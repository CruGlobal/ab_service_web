{"version":3,"file":"283.e3408e06af7f85d53617.js","mappings":"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IAAIG,EAAOlC,GAAyB+B,EAAQnzD,GAC5C,GAAIszD,EAAM,CACR,GAAIA,EAAKl8D,IACP,OAAO06D,GAAQwB,EAAKl8D,KAEtB,GAA0B,mBAAfk8D,EAAKjoF,MACd,OAAOymF,GAAQwB,EAAKjoF,MAExB,CACA8nF,EAAShC,GAAegC,EAC1B,CAKA,OAJA,SAAuBnvE,GAErB,OADA+H,QAAQglB,KAAK,qBAAsB/sB,GAC5B,IACT,CAEF,CACA,IAAIuvE,GAAS/1D,GAAO,CAClB,IACA,OACA,UACA,UACA,OACA,UACA,QACA,QACA,IACA,MACA,MACA,MACA,QACA,aACA,OACA,KACA,SACA,SACA,UACA,SACA,OACA,OACA,MACA,WACA,UACA,OACA,WACA,KACA,YACA,MACA,UACA,MACA,SACA,MACA,MACA,KACA,KACA,UACA,KACA,WACA,aACA,SACA,OACA,SACA,OACA,KACA,KACA,KACA,KACA,KACA,KACA,OACA,SACA,SACA,KACA,OACA,IACA,MACA,QACA,MACA,MACA,QACA,SACA,KACA,OACA,MACA,OACA,UACA,OACA,WACA,QACA,MACA,OACA,KACA,WACA,SACA,SACA,IACA,UACA,MACA,WACA,IACA,KACA,KACA,OACA,IACA,OACA,UACA,SACA,SACA,QACA,SACA,SACA,OACA,SACA,SACA,QACA,MACA,UACA,MACA,QACA,QACA,KACA,WACA,WACA,QACA,KACA,QACA,OACA,KACA,QACA,KACA,IACA,KACA,MACA,QACA,QAEEg2D,GAAQh2D,GAAO,CACjB,MACA,IACA,WACA,cACA,eACA,eACA,gBACA,mBACA,SACA,WACA,OACA,OACA,UACA,SACA,OACA,IACA,QACA,WACA,QACA,QACA,OACA,iBACA,SACA,OACA,WACA,QACA,OACA,UACA,UACA,WACA,iBACA,OACA,OACA,QACA,SACA,SACA,OACA,WACA,QACA,OACA,QACA,OACA,UAEEi2D,GAAaj2D,GAAO,CACtB,UACA,gBACA,sBACA,cACA,mBACA,oBACA,oBACA,iBACA,UACA,UACA,UACA,UACA,UACA,iBACA,UACA,UACA,cACA,eACA,WACA,eACA,qBACA,cACA,SACA,iBAEEk2D,GAAgBl2D,GAAO,CACzB,UACA,gBACA,SACA,UACA,eACA,YACA,mBACA,iBACA,gBACA,gBACA,gBACA,QACA,YACA,OACA,eACA,YACA,UACA,gBACA,SACA,MACA,aACA,UACA,QAEEm2D,GAAWn2D,GAAO,CACpB,OACA,WACA,SACA,UACA,QACA,SACA,KACA,aACA,gBACA,KACA,KACA,QACA,UACA,WACA,QACA,OACA,KACA,SACA,QACA,SACA,OACA,OACA,UACA,SACA,MACA,QACA,MACA,SACA,eAEEo2D,GAAmBp2D,GAAO,CAC5B,UACA,cACA,aACA,WACA,YACA,UACA,UACA,SACA,SACA,QACA,YACA,aACA,iBACA,cACA,SAEEtsB,GAAOssB,GAAO,CAAC,UACf/R,GAAO+R,GAAO,CAChB,SACA,SACA,QACA,MACA,iBACA,eACA,uBACA,WACA,aACA,UACA,SACA,UACA,cACA,cACA,UACA,OACA,QACA,QACA,QACA,OACA,UACA,WACA,eACA,SACA,cACA,WACA,WACA,UACA,MACA,WACA,0BACA,wBACA,WACA,YACA,UACA,eACA,OACA,MACA,UACA,SACA,SACA,OACA,OACA,WACA,KACA,YACA,YACA,QACA,OACA,QACA,OACA,OACA,UACA,OACA,MACA,MACA,YACA,QACA,SACA,MACA,YACA,WACA,QACA,OACA,QACA,UACA,aACA,SACA,OACA,UACA,UACA,cACA,cACA,SACA,UACA,UACA,aACA,WACA,MACA,WACA,MACA,WACA,OACA,OACA,UACA,aACA,QACA,WACA,QACA,OACA,QACA,OACA,UACA,QACA,MACA,SACA,OACA,QACA,UACA,WACA,QACA,YACA,OACA,SACA,SACA,QACA,QACA,QACA,SAEEq2D,GAAMr2D,GAAO,CACf,gBACA,aACA,WACA,qBACA,SACA,gBACA,gBACA,UACA,gBACA,iBACA,QACA,OACA,KACA,QACA,OACA,gBACA,YACA,YACA,QACA,sBACA,8BACA,gBACA,kBACA,KACA,KACA,IACA,KACA,KACA,kBACA,YACA,UACA,UACA,MACA,WACA,YACA,MACA,OACA,eACA,YACA,SACA,cACA,cACA,gBACA,cACA,YACA,mBACA,eACA,aACA,eACA,cACA,KACA,KACA,KACA,KACA,aACA,WACA,gBACA,oBACA,SACA,OACA,KACA,kBACA,KACA,MACA,IACA,KACA,KACA,KACA,KACA,UACA,YACA,aACA,WACA,OACA,eACA,iBACA,eACA,mBACA,iBACA,QACA,aACA,aACA,eACA,eACA,cACA,cACA,mBACA,YACA,MACA,OACA,QACA,SACA,OACA,MACA,OACA,aACA,SACA,WACA,UACA,QACA,SACA,cACA,SACA,WACA,cACA,OACA,aACA,sBACA,mBACA,eACA,SACA,gBACA,sBACA,iBACA,IACA,KACA,KACA,SACA,OACA,OACA,cACA,YACA,UACA,SACA,SACA,QACA,OACA,kBACA,mBACA,mBACA,eACA,cACA,eACA,cACA,aACA,eACA,mBACA,oBACA,iBACA,kBACA,oBACA,iBACA,SACA,eACA,QACA,eACA,iBACA,WACA,UACA,UACA,YACA,mBACA,cACA,kBACA,iBACA,aACA,OACA,KACA,KACA,UACA,SACA,UACA,aACA,UACA,aACA,gBACA,gBACA,QACA,eACA,OACA,eACA,mBACA,mBACA,IACA,KACA,KACA,QACA,IACA,KACA,KACA,IACA,eAEEs2D,GAASt2D,GAAO,CAClB,SACA,cACA,QACA,WACA,QACA,eACA,cACA,aACA,aACA,QACA,MACA,UACA,eACA,WACA,QACA,QACA,SACA,OACA,KACA,UACA,SACA,gBACA,SACA,SACA,iBACA,YACA,WACA,cACA,UACA,UACA,gBACA,WACA,WACA,OACA,WACA,WACA,aACA,UACA,SACA,SACA,cACA,gBACA,uBACA,YACA,YACA,aACA,WACA,iBACA,iBACA,YACA,UACA,QACA,UAEEu2D,GAAMv2D,GAAO,CACf,aACA,SACA,cACA,YACA,gBAEEw2D,GAAgB3C,G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","sources":["webpack://ab_platform_web/./node_modules/tinymce/icons/default/icons.js","webpack://ab_platform_web/./node_modules/tinymce/icons/default/index.js","webpack://ab_platform_web/./node_modules/tinymce/plugins/link/index.js","webpack://ab_platform_web/./node_modules/tinymce/plugins/link/plugin.js","webpack://ab_platform_web/./node_modules/tinymce/themes/silver/index.js","webpack://ab_platform_web/./node_modules/tinymce/themes/silver/theme.js","webpack://ab_platform_web/./node_modules/tinymce/tinymce.js"],"sourcesContent":["tinymce.IconManager.add('default', {\n  icons: {\n    'accessibility-check': '<svg width=\"24\" height=\"24\"><path d=\"M12 2a2 2 0 012 2 2 2 0 01-2 2 2 2 0 01-2-2c0-1.1.9-2 2-2zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 01-1-1v-5c0-.6-.4-1-1-1a1 1 0 00-1 1v5c0 .6-.4 1-1 1a1 1 0 01-1-1V9H4a1 1 0 110-2h16c.6 0 1 .4 1 1s-.4 1-1 1z\" fill-rule=\"nonzero\"/></svg>',\n    'action-next': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M5.7 7.3a1 1 0 00-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 10-1.4-1.4L12 13.6 5.7 7.3z\"/></svg>',\n    'action-prev': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M18.3 15.7a1 1 0 001.4-1.4L12 6.6l-7.7 7.7a1 1 0 001.4 1.4L12 9.4l6.3 6.3z\"/></svg>',\n    'align-center': '<svg width=\"24\" height=\"24\"><path d=\"M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 110-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z\" fill-rule=\"evenodd\"/></svg>',\n    'align-justify': '<svg width=\"24\" height=\"24\"><path d=\"M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z\" fill-rule=\"evenodd\"/></svg>',\n    'align-left': '<svg width=\"24\" height=\"24\"><path d=\"M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z\" fill-rule=\"evenodd\"/></svg>',\n    'align-none': '<svg width=\"24\" height=\"24\"><path d=\"M14.2 5L13 7H5a1 1 0 110-2h9.2zm4 0h.8a1 1 0 010 2h-2l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 010-2h6.8zm4 0H19a1 1 0 010 2h-4.4l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 010-2h4.4zm4 0H19a1 1 0 010 2h-6.8l1.2-2zM7 17l-1.2 2H5a1 1 0 010-2h2zm4 0h8a1 1 0 010 2H9.8l1.2-2zm5.2-13.5l1.3.7-9.7 16.3-1.3-.7 9.7-16.3z\" fill-rule=\"evenodd\"/></svg>',\n    'align-right': '<svg width=\"24\" height=\"24\"><path d=\"M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z\" fill-rule=\"evenodd\"/></svg>',\n    'arrow-left': '<svg width=\"24\" height=\"24\"><path d=\"M5.6 13l12 6a1 1 0 001.4-1V6a1 1 0 00-1.4-.9l-12 6a1 1 0 000 1.8z\" fill-rule=\"evenodd\"/></svg>',\n    'arrow-right': '<svg width=\"24\" height=\"24\"><path d=\"M18.5 13l-12 6A1 1 0 015 18V6a1 1 0 011.4-.9l12 6a1 1 0 010 1.8z\" fill-rule=\"evenodd\"/></svg>',\n    'bold': '<svg width=\"24\" height=\"24\"><path d=\"M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 01-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4z\" fill-rule=\"evenodd\"/></svg>',\n    'bookmark': '<svg width=\"24\" height=\"24\"><path d=\"M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 00-1 1z\" fill-rule=\"nonzero\"/></svg>',\n    'border-style': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><rect width=\"18\" height=\"2\" x=\"3\" y=\"6\" rx=\"1\"/><rect width=\"2.8\" height=\"2\" x=\"3\" y=\"16\" rx=\"1\"/><rect width=\"2.8\" height=\"2\" x=\"6.8\" y=\"16\" rx=\"1\"/><rect width=\"2.8\" height=\"2\" x=\"10.6\" y=\"16\" rx=\"1\"/><rect width=\"2.8\" height=\"2\" x=\"14.4\" y=\"16\" rx=\"1\"/><rect width=\"2.8\" height=\"2\" x=\"18.2\" y=\"16\" rx=\"1\"/><rect width=\"8\" height=\"2\" x=\"3\" y=\"11\" rx=\"1\"/><rect width=\"8\" height=\"2\" x=\"13\" y=\"11\" rx=\"1\"/></g></svg>',\n    'border-width': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><rect width=\"18\" height=\"5\" x=\"3\" y=\"5\" rx=\"1\"/><rect width=\"18\" height=\"3.5\" x=\"3\" y=\"11.5\" rx=\"1\"/><rect width=\"18\" height=\"2\" x=\"3\" y=\"17\" rx=\"1\"/></g></svg>',\n    'brightness': '<svg width=\"24\" height=\"24\"><path d=\"M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.7-.3 1 1 0 01-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3zm0-10a1 1 0 01-.7-.3A1 1 0 0111 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 01-.7.3zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 01-.7.3h-1a1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1zM7 12c0 .3-.1.5-.3.7a1 1 0 01-.7.3H5a1 1 0 01-.7-.3A1 1 0 014 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7zm10 3.5l.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 01-.8.3 1 1 0 01-.6-.3l-.8-.7a1 1 0 01-.3-.8c0-.2.1-.5.3-.7a1 1 0 011.4 0zm-10-7l-.7-.8a1 1 0 01-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.8-.3zm10 0a1 1 0 01-.8.3 1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 010 1.4l-.8.8a1 1 0 01-.6.3 1 1 0 01-.8-.3 1 1 0 01-.3-.8c0-.2.1-.5.3-.6l.7-.8zM12 8a4 4 0 013.7 2.4 4 4 0 010 3.2A4 4 0 0112 16a4 4 0 01-3.7-2.4 4 4 0 010-3.2A4 4 0 0112 8zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7z\" fill-rule=\"evenodd\"/></svg>',\n    'browse': '<svg width=\"24\" height=\"24\"><path d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9.4l-2.3 2.3a1 1 0 11-1.4-1.4l4-4a1 1 0 011.4 0l4 4a1 1 0 01-1.4 1.4L13 13.4V20a1 1 0 01-2 0v-6.6z\" fill-rule=\"nonzero\"/></svg>',\n    'cancel': '<svg width=\"24\" height=\"24\"><path d=\"M12 4.6a7.4 7.4 0 110 14.8 7.4 7.4 0 010-14.8zM12 3a9 9 0 100 18 9 9 0 000-18zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7z\" fill-rule=\"nonzero\"/></svg>',\n    'cell-background-color': '<svg width=\"24\" height=\"24\"><path d=\"M15.7 2l1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 01-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2zM18 12l-4.5-4L9 12h9zM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16z\"/></svg>',\n    'cell-border-color': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path fill-rule=\"nonzero\" d=\"M5 13v5h2v2H5a2 2 0 01-2-2v-5h2zm8-7V4h6a2 2 0 012 2h-8z\" opacity=\".2\"/><path fill-rule=\"nonzero\" d=\"M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1l.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z\"/><path d=\"M13 11l-2 2H5v-2h6V6h2z\"/><path fill-rule=\"nonzero\" d=\"M18.4 8l1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 01-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8zm1.6 7l-3-3-3 3h6z\"/></g></svg>',\n    'change-case': '<svg width=\"24\" height=\"24\"><path d=\"M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 01-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 01-1 .7h-.2a.7.7 0 01-.7-1l4-12a1 1 0 012 0l4 12a.7.7 0 01-.8 1h-.2a1 1 0 01-1-.7l-.8-2.6zm-.3-1.5l-2-6.5-1.9 6.5h3.9z\" fill-rule=\"evenodd\"/></svg>',\n    'character-count': '<svg width=\"24\" height=\"24\"><path d=\"M4 11.5h16v1H4v-1zm4.8-6.8V10H7.7V5.8h-1v-1h2zM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1zM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2v-.1-.2l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 01-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 00-.5-.1 1 1 0 00-.4 0l-.3.4h-1zm2.3.8h-.2l-.2.1-.4.1a1 1 0 00-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 001.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 00-.6-.3l-.6.3-.2.8zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 00-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 01-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 01-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1z\" fill-rule=\"evenodd\"/></svg>',\n    'checklist-rtl': '<svg width=\"24\" height=\"24\"><path d=\"M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z\" fill-rule=\"evenodd\"/></svg>',\n    'checklist': '<svg width=\"24\" height=\"24\"><path d=\"M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8a1 1 0 010 2h-8a1 1 0 010-2zM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z\" fill-rule=\"evenodd\"/></svg>',\n    'checkmark': '<svg width=\"24\" height=\"24\"><path d=\"M18.2 5.4a1 1 0 011.6 1.2l-8 12a1 1 0 01-1.5.1l-5-5a1 1 0 111.4-1.4l4.1 4.1 7.4-11z\" fill-rule=\"nonzero\"/></svg>',\n    'chevron-down': '<svg width=\"10\" height=\"10\"><path d=\"M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 010-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8z\" fill-rule=\"nonzero\"/></svg>',\n    'chevron-left': '<svg width=\"10\" height=\"10\"><path d=\"M7.8 1.3L4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 010-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1z\" fill-rule=\"nonzero\"/></svg>',\n    'chevron-right': '<svg width=\"10\" height=\"10\"><path d=\"M2.2 1.3a.8.8 0 010-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 010-1.1L6 5 2.2 1.3z\" fill-rule=\"nonzero\"/></svg>',\n    'chevron-up': '<svg width=\"10\" height=\"10\"><path d=\"M8.7 7.8L5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 010-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0z\" fill-rule=\"nonzero\"/></svg>',\n    'close': '<svg width=\"24\" height=\"24\"><path d=\"M17.3 8.2L13.4 12l3.9 3.8a1 1 0 01-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 01-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 011.5-1.5l3.8 3.9 3.8-3.9a1 1 0 011.5 1.5z\" fill-rule=\"evenodd\"/></svg>',\n    'code-sample': '<svg width=\"24\" height=\"26\"><path d=\"M7.1 11a2.8 2.8 0 01-.8 2 2.8 2.8 0 01.8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 01-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 01-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 01-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 01.8-2 2.8 2.8 0 01-.8-2zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2zM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 01-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 01-.5-.5V17a3 3 0 001-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5z\" fill-rule=\"evenodd\"/></svg>',\n    'color-levels': '<svg width=\"24\" height=\"24\"><path d=\"M17.5 11.4A9 9 0 0118 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 01-3.7 3 5.7 5.7 0 01-3.2 0A5.9 5.9 0 017.6 18a6.2 6.2 0 01-1.4-2.6 6.7 6.7 0 010-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 012.3-4A20 20 0 0112 4a26.4 26.4 0 013.2 3.4 18.2 18.2 0 012.3 4zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 00-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 01-1.3 3 5.3 5.3 0 01-2.3 1.5 4.9 4.9 0 01-2 .1 4.3 4.3 0 002.4.8 4 4 0 002-.6 4 4 0 001.5-1.5z\" fill-rule=\"evenodd\"/></svg>',\n    'color-picker': '<svg width=\"24\" height=\"24\"><path d=\"M12 3a9 9 0 000 18 1.5 1.5 0 001.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 005-5c0-4.4-4-8-9-8zm-5.5 9a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm3-4a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm5 0a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm3 4a1.5 1.5 0 110-3 1.5 1.5 0 010 3z\" fill-rule=\"nonzero\"/></svg>',\n    'color-swatch-remove-color': '<svg width=\"24\" height=\"24\"><path stroke=\"#000\" stroke-width=\"2\" d=\"M21 3L3 21\" fill-rule=\"evenodd\"/></svg>',\n    'color-swatch': '<svg width=\"24\" height=\"24\"><rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"1\" fill-rule=\"evenodd\"/></svg>',\n    'comment-add': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M9 19l3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 00-1 1v10c0 .6.4 1 1 1h4v2zm-2 4v-4H5a3 3 0 01-3-3V6a3 3 0 013-3h14a3 3 0 013 3v10a3 3 0 01-3 3h-6.4L7 23z\"/><path d=\"M13 10h2a1 1 0 010 2h-2v2a1 1 0 01-2 0v-2H9a1 1 0 010-2h2V8a1 1 0 012 0v2z\"/></g></svg>',\n    'comment': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M9 19l3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 00-1 1v10c0 .6.4 1 1 1h4v2zm-2 4v-4H5a3 3 0 01-3-3V6a3 3 0 013-3h14a3 3 0 013 3v10a3 3 0 01-3 3h-6.4L7 23z\"/></svg>',\n    'contrast': '<svg width=\"24\" height=\"24\"><path d=\"M12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4zm-6 8a6 6 0 006 6V6a6 6 0 00-6 6z\" fill-rule=\"evenodd\"/></svg>',\n    'copy': '<svg width=\"24\" height=\"24\"><path d=\"M16 3H6a2 2 0 00-2 2v11h2V5h10V3zm1 4a2 2 0 012 2v10a2 2 0 01-2 2h-7a2 2 0 01-2-2V9c0-1.2.9-2 2-2h7zm0 12V9h-7v10h7z\" fill-rule=\"nonzero\"/></svg>',\n    'crop': '<svg width=\"24\" height=\"24\"><path d=\"M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 01-1-1v-2H7V9H5a1 1 0 110-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3zM9 9v5l5-5H9zm1 6h5v-5l-5 5z\" fill-rule=\"evenodd\"/></svg>',\n    'cut-column': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0110.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 012 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 017 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7zm12.3 5h-3v10h3v-10zM8 13.8h-.3l-.4.2a2.8 2.8 0 00-.7.4v.1a2.8 2.8 0 00-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 00.8-.3 2.4 2.4 0 00.7-.7 2.5 2.5 0 00.3-.8 1.5 1.5 0 000-.8 1 1 0 00-.2-.4 1 1 0 00-.5-.2H8zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4zM7 5.8h-.4a1 1 0 00-.5.3 1 1 0 00-.2.5v.7a2.5 2.5 0 00.3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 000-.8 2.6 2.6 0 00-.3-.8A2.5 2.5 0 007.7 6l-.4-.1H7z\"/></svg>',\n    'cut-row': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 01-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 018.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 010-2c0-.4.3-.7.5-1l2 2V3h14zM8.5 15.3h-.3a2.6 2.6 0 00-.8.4 2.5 2.5 0 00-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 00.8-.3L9 18V18l.4-.4.2-.4.1-.4v-.3-.4a1 1 0 00-.2-.5 1 1 0 00-.4-.2h-.5zm7 0H15a1 1 0 00-.4.3 1 1 0 00-.2.5 1.5 1.5 0 000 .7v.4a2.8 2.8 0 00.5.7h.1a2.8 2.8 0 00.8.6l.4.1h.7l.5-.2.2-.5v-.4-.3a2.6 2.6 0 00-.3-.8 2.4 2.4 0 00-.7-.7 2.5 2.5 0 00-.8-.3h-.3zM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4zm8.5-7.1h-11v2h11v-2z\"/></svg>',\n    'cut': '<svg width=\"24\" height=\"24\"><path d=\"M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 01-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 018.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 010-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 010 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8zm-8.5 2.2l.1-.4v-.3-.4a1 1 0 00-.2-.5 1 1 0 00-.4-.2 1.6 1.6 0 00-.8 0 2.6 2.6 0 00-.8.3 2.5 2.5 0 00-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 00.8-.3 2.8 2.8 0 001-1zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4zm5.4 4l.2-.5v-.4-.3a2.6 2.6 0 00-.3-.8 2.4 2.4 0 00-.7-.7 2.5 2.5 0 00-.8-.3 1.5 1.5 0 00-.8 0 1 1 0 00-.4.2 1 1 0 00-.2.5 1.5 1.5 0 000 .7v.4l.3.4.3.4a2.8 2.8 0 00.8.5l.4.1h.7l.5-.2z\" fill-rule=\"evenodd\"/></svg>',\n    'document-properties': '<svg width=\"24\" height=\"24\"><path d=\"M14.4 3H7a2 2 0 00-2 2v14c0 1.1.9 2 2 2h10a2 2 0 002-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z\" fill-rule=\"nonzero\"/></svg>',\n    'drag': '<svg width=\"24\" height=\"24\"><path d=\"M13 5h2v2h-2V5zm0 4h2v2h-2V9zM9 9h2v2H9V9zm4 4h2v2h-2v-2zm-4 0h2v2H9v-2zm0 4h2v2H9v-2zm4 0h2v2h-2v-2zM9 5h2v2H9V5z\" fill-rule=\"evenodd\"/></svg>',\n    'duplicate-column': '<svg width=\"24\" height=\"24\"><path d=\"M17 6v16h-7V6h7zm-2 2h-3v12h3V8zm-2-6v2H8v15H6V2h7z\"/></svg>',\n    'duplicate-row': '<svg width=\"24\" height=\"24\"><path d=\"M22 11v7H6v-7h16zm-2 2H8v3h12v-3zm-1-6v2H4v5H2V7h17z\"/></svg>',\n    'duplicate': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10zm3 8h-2V9h-7v10h9a2 2 0 01-2 2h-7a2 2 0 01-2-2V9c0-1.2.9-2 2-2h7a2 2 0 012 2v2z\"/><path d=\"M17 14h1a1 1 0 010 2h-1v1a1 1 0 01-2 0v-1h-1a1 1 0 010-2h1v-1a1 1 0 012 0v1z\"/></g></svg>',\n    'edit-block': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19.8 8.8l-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5zm-2-.2l1-.9v-.3l-2.2-2.2a.3.3 0 00-.3 0l-1 1L18 8.5zm-1 1l-2.5-2.4-6 6 2.5 2.5 6-6zm-7 7.1l-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5z\"/></svg>',\n    'edit-image': '<svg width=\"24\" height=\"24\"><path d=\"M18 16h2V7a2 2 0 00-2-2H7v2h11v9zM6 17h15a1 1 0 010 2h-1v1a1 1 0 01-2 0v-1H6a2 2 0 01-2-2V7H3a1 1 0 110-2h1V4a1 1 0 112 0v13zm3-5.3l1.3 2 3-4.7 3.7 6H7l2-3.3z\" fill-rule=\"nonzero\"/></svg>',\n    'embed-page': '<svg width=\"24\" height=\"24\"><path d=\"M19 6V5H5v14h2A13 13 0 0119 6zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 008 19h3zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 00-4 4.5h2.2zm-3.4 0a12 12 0 012.8-4 12 12 0 00-5 4h2.2z\" fill-rule=\"nonzero\"/></svg>',\n    'embed': '<svg width=\"24\" height=\"24\"><path d=\"M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm4.8 2.6l5.6 4a.5.5 0 010 .8l-5.6 4A.5.5 0 019 16V8a.5.5 0 01.8-.4z\" fill-rule=\"nonzero\"/></svg>',\n    'emoji': '<svg width=\"24\" height=\"24\"><path d=\"M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 00-1 1c0 .6.4 1 1 1zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 00-1 1c0 .6.4 1 1 1zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5zM12 4a8 8 0 100 16 8 8 0 000-16zm0 14.5a6.5 6.5 0 110-13 6.5 6.5 0 010 13z\" fill-rule=\"nonzero\"/></svg>',\n    'export': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M14.4 3L18 7v1h-5V5H7v14h9a1 1 0 012 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5z\"/><path d=\"M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3z\"/><path d=\"M16.4 9.2a1 1 0 011.4.2l2.4 3.6-2.4 3.6a1 1 0 01-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 01.2-1.4z\"/></g></svg>',\n    'fill': '<svg width=\"24\" height=\"26\"><path d=\"M16.6 12l-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 002.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2zM5.2 13L10 8.2l4.8 4.8H5.2zM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 002-2c0-1.3-2-3.5-2-3.5z\" fill-rule=\"nonzero\"/></svg>',\n    'flip-horizontally': '<svg width=\"24\" height=\"24\"><path d=\"M14 19h2v-2h-2v2zm4-8h2V9h-2v2zM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 00-2 2zm14-2v2h2a2 2 0 00-2-2zm-7 16h2V3h-2v18zm7-6h2v-2h-2v2zm-4-8h2V5h-2v2zm4 12a2 2 0 002-2h-2v2z\" fill-rule=\"nonzero\"/></svg>',\n    'flip-vertically': '<svg width=\"24\" height=\"24\"><path d=\"M5 14v2h2v-2H5zm8 4v2h2v-2h-2zm4-14H7a2 2 0 00-2 2v3h2V6h10v3h2V6a2 2 0 00-2-2zm2 14h-2v2a2 2 0 002-2zM3 11v2h18v-2H3zm6 7v2h2v-2H9zm8-4v2h2v-2h-2zM5 18c0 1.1.9 2 2 2v-2H5z\" fill-rule=\"nonzero\"/></svg>',\n    'format-painter': '<svg width=\"24\" height=\"24\"><path d=\"M18 5V4c0-.5-.4-1-1-1H5a1 1 0 00-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3z\" fill-rule=\"nonzero\"/></svg>',\n    'format': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M17 5a1 1 0 010 2h-4v11a1 1 0 01-2 0V7H7a1 1 0 110-2h10z\"/></svg>',\n    'fullscreen': '<svg width=\"24\" height=\"24\"><path d=\"M15.3 10l-1.2-1.3 2.9-3h-2.3a.9.9 0 110-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 11-1.8 0V7l-2.9 3zm0 4l3 3v-2.3a.9.9 0 111.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 110-1.8H17l-3-2.9 1.3-1.2zM10 15.4l-2.9 3h2.3a.9.9 0 110 1.7H5a.9.9 0 01-.9-.9v-4.4a.9.9 0 111.8 0V17l2.9-3 1.2 1.3zM8.7 10L5.7 7v2.3a.9.9 0 01-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 010 1.8H7l3 2.9-1.3 1.2z\" fill-rule=\"nonzero\"/></svg>',\n    'gallery': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M5 15.7l2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7zM5 18V19h3l1.8-1.9-2-2L5 17.9zm14-3l-2.5-2.4-6.4 6.5H19v-4zM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 01-1-1V7c0-.6.4-1 1-1zm6 7a2 2 0 110-4 2 2 0 010 4zM4.5 4h15a.5.5 0 110 1h-15a.5.5 0 010-1zm2-2h11a.5.5 0 110 1h-11a.5.5 0 010-1z\"/></svg>',\n    'gamma': '<svg width=\"24\" height=\"24\"><path d=\"M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 00-.4-.8l-.1-.2H8 8v-1l.3-.1.3-.1h.7a1 1 0 01.6.5l.1.3a8.5 8.5 0 01.3.6l1.9 4.6 2-5.2a1 1 0 011-.6.5.5 0 01.5.6L13 14v2.8a.7.7 0 01-1.4 0z\" fill-rule=\"nonzero\"/></svg>',\n    'help': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path d=\"M12 5.5a6.5 6.5 0 00-6 9 6.3 6.3 0 001.4 2l1 1a6.3 6.3 0 003.6 1 6.5 6.5 0 006-9 6.3 6.3 0 00-1.4-2l-1-1a6.3 6.3 0 00-3.6-1zM12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4z\"/><path d=\"M9.6 9.7a.7.7 0 01-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 00-.8.8.8.8 0 01-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8z\" fill-rule=\"nonzero\"/><circle cx=\"12\" cy=\"16\" r=\"1\"/></g></svg>',\n    'highlight-bg-color': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path id=\"tox-icon-highlight-bg-color__color\" d=\"M3 18h18v3H3z\"/><path fill-rule=\"nonzero\" d=\"M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 012.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6\"/></g></svg>',\n    'home': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z\"/></svg>',\n    'horizontal-rule': '<svg width=\"24\" height=\"24\"><path d=\"M4 11h16v2H4z\" fill-rule=\"evenodd\"/></svg>',\n    'image-options': '<svg width=\"24\" height=\"24\"><path d=\"M6 10a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm12 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm-6 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2z\" fill-rule=\"nonzero\"/></svg>',\n    'image': '<svg width=\"24\" height=\"24\"><path d=\"M5 15.7l3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7zM5 18V19h3l2.8-2.9-2-2L5 17.9zm14-3l-2.5-2.4-6.4 6.5H19v-4zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm6 8a2 2 0 100-4 2 2 0 000 4z\" fill-rule=\"nonzero\"/></svg>',\n    'indent': '<svg width=\"24\" height=\"24\"><path d=\"M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 110-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm-5 4h12a1 1 0 010 2H7a1 1 0 010-2zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 011.2-1.6l3 2a1 1 0 010 1.6l-3 2a1 1 0 11-1.2-1.6z\" fill-rule=\"evenodd\"/></svg>',\n    'info': '<svg width=\"24\" height=\"24\"><path d=\"M12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4zm-1 3v2h2V7h-2zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4z\" fill-rule=\"evenodd\"/></svg>',\n    'insert-character': '<svg width=\"24\" height=\"24\"><path d=\"M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 001.8-2.9 6.3 6.3 0 00-.1-4.1 5.8 5.8 0 00-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 00-3.9 1.8 6.3 6.3 0 00-1.3 6 6.2 6.2 0 001.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 014 11c0-1 .2-1.9.6-2.7A7 7 0 016.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 015.7 2 7 7 0 011.7 2.3 6 6 0 01.2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 01-3.6 2.5v.5z\" fill-rule=\"evenodd\"/></svg>',\n    'insert-time': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M12 19a7 7 0 100-14 7 7 0 000 14zm0 2a9 9 0 110-18 9 9 0 010 18z\"/><path d=\"M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 00-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1z\"/></g></svg>',\n    'invert': '<svg width=\"24\" height=\"24\"><path d=\"M18 19.3L16.5 18a5.8 5.8 0 01-3.1 1.9 6.1 6.1 0 01-5.5-1.6A5.8 5.8 0 016 14v-.3l.1-1.2A13.9 13.9 0 017.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 00.2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 00-3-4.2L12 6a26.1 26.1 0 00-2.2 2.5l-1-1a20.9 20.9 0 012.9-3.3L12 4l1 .8a22.2 22.2 0 014 5.4c.6 1.2 1 2.4 1 3.6z\" fill-rule=\"evenodd\"/></svg>',\n    'italic': '<svg width=\"24\" height=\"24\"><path d=\"M16.7 4.7l-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8z\" fill-rule=\"evenodd\"/></svg>',\n    'language': '<svg width=\"24\" height=\"24\"><path d=\"M12 3a9 9 0 110 18 9 9 0 010-18zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 003.2-2.1l-.2-.2a6 6 0 00-1-.6zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 01-2-2.8zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 01-.3-2zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1zm3-1.4l-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 00-1.3-3.5zm-9 0l2 .2V5.5a9 9 0 00-2 2.2zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 00-2-2.3zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 011.9-2.5zm4.4 0l.1.1a10 10 0 011.8 2.4l1.1-.7a7.5 7.5 0 00-3-1.8z\"/></svg>',\n    'line-height': '<svg width=\"24\" height=\"24\"><path d=\"M21 5a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zM7 3.6l3.7 3.7a1 1 0 01-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 011.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 011.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 01-1.3 0h-.1a1 1 0 010-1.3v-.1L7 3.6z\"/></svg>',\n    'line': '<svg width=\"24\" height=\"24\"><path d=\"M15 9l-8 8H4v-3l8-8 3 3zm1-1l-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1zM4 18h16v2H4v-2z\" fill-rule=\"evenodd\"/></svg>',\n    'link': '<svg width=\"24\" height=\"24\"><path d=\"M6.2 12.3a1 1 0 011.4 1.4l-2.1 2a2 2 0 102.7 2.8l4.8-4.8a1 1 0 000-1.4 1 1 0 111.4-1.3 2.9 2.9 0 010 4L9.6 20a3.9 3.9 0 01-5.5-5.5l2-2zm11.6-.6a1 1 0 01-1.4-1.4l2-2a2 2 0 10-2.6-2.8L11 10.3a1 1 0 000 1.4A1 1 0 119.6 13a2.9 2.9 0 010-4L14.4 4a3.9 3.9 0 015.5 5.5l-2 2z\" fill-rule=\"nonzero\"/></svg>',\n    'list-bull-circle': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path d=\"M11 16a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6zM11 26a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6zM11 36a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6z\" fill-rule=\"nonzero\"/><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/></g></svg>',\n    'list-bull-default': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><circle cx=\"11\" cy=\"14\" r=\"3\"/><circle cx=\"11\" cy=\"24\" r=\"3\"/><circle cx=\"11\" cy=\"34\" r=\"3\"/><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/></g></svg>',\n    'list-bull-square': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path d=\"M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z\"/><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/></g></svg>',\n    'list-num-default-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M37.4 17v-4.8l-1.6 1v-1.1l1.6-1h1.2V17zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z\"/></g></svg>',\n    'list-num-default': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z\"/></g></svg>',\n    'list-num-lower-alpha-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6zM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3zM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n    'list-num-lower-alpha': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n    'list-num-lower-greek-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4zM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3zM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM37.1 34.6L34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2zm.7 1a2 2 0 00-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1zM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n    'list-num-lower-greek': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3zM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2zm.7 1a2 2 0 00-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n    'list-num-lower-roman-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M32.9 16v-1.2h-1.3V16H33zm0 10v-1.2h-1.3V26H33zm0 10v-1.2h-1.3V36H33z\"/><path fill-rule=\"nonzero\" d=\"M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z\"/></g></svg>',\n    'list-num-lower-roman': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M15.1 16v-1.2h1.3V16H15zm0 10v-1.2h1.3V26H15zm0 10v-1.2h1.3V36H15z\"/><path fill-rule=\"nonzero\" d=\"M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z\"/></g></svg>',\n    'list-num-upper-alpha-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M39.3 17l-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3zm-1.6-4.7l-.7 2.3h1.6l-.8-2.3zM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26zM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n    'list-num-upper-alpha': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M12.6 17l-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3zM11 12.3l-.7 2.3h1.6l-.8-2.3zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7zM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n    'list-num-upper-roman-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M31.6 17v-1.2H33V17h-1.3zm0 10v-1.2H33V27h-1.3zm0 10v-1.2H33V37h-1.3z\"/><path fill-rule=\"nonzero\" d=\"M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z\"/></g></svg>',\n    'list-num-upper-roman': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M15.1 17v-1.2h1.3V17H15zm0 10v-1.2h1.3V27H15zm0 10v-1.2h1.3V37H15z\"/><path fill-rule=\"nonzero\" d=\"M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z\"/></g></svg>',\n    'lock': '<svg width=\"24\" height=\"24\"><path d=\"M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3zM10 8v3h4V8a1 1 0 00-.3-.7A1 1 0 0013 7h-2a1 1 0 00-.7.3 1 1 0 00-.3.7z\" fill-rule=\"evenodd\"/></svg>',\n    'ltr': '<svg width=\"24\" height=\"24\"><path d=\"M11 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 017.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L11 5zM4.4 16.2L6.2 15l-1.8-1.2a1 1 0 011.2-1.6l3 2a1 1 0 010 1.6l-3 2a1 1 0 11-1.2-1.6z\" fill-rule=\"evenodd\"/></svg>',\n    'more-drawer': '<svg width=\"24\" height=\"24\"><path d=\"M6 10a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm12 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm-6 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2z\" fill-rule=\"nonzero\"/></svg>',\n    'new-document': '<svg width=\"24\" height=\"24\"><path d=\"M14.4 3H7a2 2 0 00-2 2v14c0 1.1.9 2 2 2h10a2 2 0 002-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z\" fill-rule=\"nonzero\"/></svg>',\n    'new-tab': '<svg width=\"24\" height=\"24\"><path d=\"M15 13l2-2v8H5V7h8l-2 2H7v8h8v-4zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19z\" fill-rule=\"evenodd\"/></svg>',\n    'non-breaking': '<svg width=\"24\" height=\"24\"><path d=\"M11 11H8a1 1 0 110-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 01-1-1v-3zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1z\" fill-rule=\"evenodd\"/></svg>',\n    'notice': '<svg width=\"24\" height=\"24\"><path d=\"M17.8 9.8L15.4 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7l2.3 5.8zm0 0l2.2 5.7-2.3-5.8zM13 17v-2h-2v2h2zm0-4V7h-2v6h2z\" fill-rule=\"evenodd\"/></svg>',\n    'ordered-list-rtl': '<svg width=\"24\" height=\"24\"><path d=\"M6 17h8a1 1 0 010 2H6a1 1 0 010-2zm0-6h8a1 1 0 010 2H6a1 1 0 010-2zm0-6h8a1 1 0 010 2H6a1 1 0 110-2zm13-1v3.5a.5.5 0 11-1 0V5h-.5a.5.5 0 110-1H19zm-1 8.8l.2.2h1.3a.5.5 0 110 1h-1.6a1 1 0 01-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 00-.2-.2h-1.3a.5.5 0 01-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 010-1h1.2a.3.3 0 100-.6h-1.3a.4.4 0 110-.8h1.3a.3.3 0 000-.6h-1.2a.5.5 0 110-1H19c.6 0 1 .4 1 1z\" fill-rule=\"evenodd\"/></svg>',\n    'ordered-list': '<svg width=\"24\" height=\"24\"><path d=\"M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 110-2zM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 01-.5-.5V5h-.5a.5.5 0 010-1H6zm-1 8.8l.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 01-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 00-.2-.2H4.5a.5.5 0 01-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3zM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 010-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 110-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 110-1H6c.6 0 1 .4 1 1z\" fill-rule=\"evenodd\"/></svg>',\n    'orientation': '<svg width=\"24\" height=\"24\"><path d=\"M7.3 6.4L1 13l6.4 6.5 6.5-6.5-6.5-6.5zM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7zM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 010-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 11-4.3 16.9l1.5-1.5A7 7 0 1013 6h-1z\" fill-rule=\"nonzero\"/></svg>',\n    'outdent': '<svg width=\"24\" height=\"24\"><path d=\"M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 110-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm-5 4h12a1 1 0 010 2H7a1 1 0 010-2zm1.6-3.8a1 1 0 01-1.2 1.6l-3-2a1 1 0 010-1.6l3-2a1 1 0 011.2 1.6L6.8 12l1.8 1.2z\" fill-rule=\"evenodd\"/></svg>',\n    'page-break': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path d=\"M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 010-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1zM6 22a1 1 0 01-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 01-1-1v-5H7v5c0 .6-.4 1-1 1z\"/></g></svg>',\n    'paragraph': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M10 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 016.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L10 5z\"/></svg>',\n    'paste-column-after': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm8 7v12h-6V8h6zm-1.5 1.5h-3v9h3v-9zM12 3a1 1 0 100 2 1 1 0 000-2z\"/></svg>',\n    'paste-column-before': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm-2 7v12H4V8h6zM8.5 9.5h-3v9h3v-9zM12 3a1 1 0 100 2 1 1 0 000-2z\"/></svg>',\n    'paste-row-after': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm10 11v5H8v-5h14zm-1.5 1.5h-11v2h11v-2zM12 3a1 1 0 100 2 1 1 0 000-2z\"/></svg>',\n    'paste-row-before': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm10 7v5H8V8h14zm-1.5 1.5h-11v2h11v-2zM12 3a1 1 0 100 2 1 1 0 000-2z\"/></svg>',\n    'paste-text': '<svg width=\"24\" height=\"24\"><path d=\"M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 01-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0112 1a3 3 0 012.8 2H18a2 2 0 012 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 00-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2z\" fill-rule=\"nonzero\"/></svg>',\n    'paste': '<svg width=\"24\" height=\"24\"><path d=\"M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 01-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0112 1a3 3 0 012.8 2H18a2 2 0 012 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 00-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1z\" fill-rule=\"nonzero\"/></svg>',\n    'permanent-pen': '<svg width=\"24\" height=\"24\"><path d=\"M10.5 17.5L8 20H3v-3l3.5-3.5a2 2 0 010-3L14 3l1 1-7.3 7.3a1 1 0 000 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 01-2.8 0l-.1-.1z\" fill-rule=\"nonzero\"/></svg>',\n    'plus': '<svg width=\"24\" height=\"24\"><path d=\"M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 01.1 2H13v6a1 1 0 01-2 .1V13H5a1 1 0 01-.1-2H11V5c0-.6.4-1 1-1z\"/></svg>',\n    'preferences': '<svg width=\"24\" height=\"24\"><path d=\"M20.1 13.5l-1.9.2a5.8 5.8 0 01-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 01-1.4 0l-1.5-1.2a6.2 6.2 0 01-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 01-1-.9l-.2-1.9a5.8 5.8 0 01-1.5-.6l-1.5 1.2a1 1 0 01-1.4 0l-.7-.7a1 1 0 010-1.4l1.2-1.5a6.2 6.2 0 01-.6-1.5l-1.9-.2a1 1 0 01-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 01.6-1.5L5.2 7.3a1 1 0 010-1.4l.7-.7a1 1 0 011.4 0l1.5 1.2a6.2 6.2 0 011.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 011.5.6l1.5-1.2a1 1 0 011.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 01.6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1zM12 15a3 3 0 100-6 3 3 0 000 6z\" fill-rule=\"evenodd\"/></svg>',\n    'preview': '<svg width=\"24\" height=\"24\"><path d=\"M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 002.1-2.8 15.7 15.7 0 00-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 00-6.7 3.2A16.2 16.2 0 003.2 12c0 .2.2.3.3.5zm-2.4-1l.7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 012.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 01-2.8-3.7 1 1 0 010-1zm12-3.3a2 2 0 102.7 2.6 4 4 0 11-2.6-2.6z\" fill-rule=\"nonzero\"/></svg>',\n    'print': '<svg width=\"24\" height=\"24\"><path d=\"M18 8H6a3 3 0 00-3 3v6h2v3h14v-3h2v-6a3 3 0 00-3-3zm-1 10H7v-4h10v4zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5zm.5-8H6v2h12V5z\" fill-rule=\"nonzero\"/></svg>',\n    'quote': '<svg width=\"24\" height=\"24\"><path d=\"M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 00-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 00.8 1.3zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 00-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 00.8 1.3z\" fill-rule=\"nonzero\"/></svg>',\n    'redo': '<svg width=\"24\" height=\"24\"><path d=\"M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 11-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 111.4-1.4l5 5a1 1 0 010 1.4l-5 5a1 1 0 01-1.4-1.4l3.3-3.3z\" fill-rule=\"nonzero\"/></svg>',\n    'reload': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M5 22.1l-1.2-4.7v-.2a1 1 0 011-1l5 .4a1 1 0 11-.2 2l-2.2-.2a7.8 7.8 0 008.4.2 7.5 7.5 0 003.5-6.4 1 1 0 112 0 9.5 9.5 0 01-4.5 8 9.9 9.9 0 01-10.2 0l.4 1.4a1 1 0 11-2 .5zM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 00-9.5-1 7.5 7.5 0 00-3.6 7 1 1 0 01-2 0 9.5 9.5 0 014.5-8.6 10 10 0 0110.9.3l-.3-1a1 1 0 012-.5l1.1 4.8a1 1 0 01-1 1.2l-5-.4a1 1 0 01-.9-1z\"/></g></svg>',\n    'remove-formatting': '<svg width=\"24\" height=\"24\"><path d=\"M13.2 6a1 1 0 010 .2l-2.6 10a1 1 0 01-1 .8h-.2a.8.8 0 01-.8-1l2.6-10H8a1 1 0 110-2h9a1 1 0 010 2h-3.8zM5 18h7a1 1 0 010 2H5a1 1 0 010-2zm13 1.5L16.5 18 15 19.5a.7.7 0 01-1-1l1.5-1.5-1.5-1.5a.7.7 0 011-1l1.5 1.5 1.5-1.5a.7.7 0 011 1L17.5 17l1.5 1.5a.7.7 0 01-1 1z\" fill-rule=\"evenodd\"/></svg>',\n    'remove': '<svg width=\"24\" height=\"24\"><path d=\"M16 7h3a1 1 0 010 2h-1v9a3 3 0 01-3 3H9a3 3 0 01-3-3V9H5a1 1 0 110-2h3V6a3 3 0 013-3h2a3 3 0 013 3v1zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 00-1 1v1h4zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9zm-7 3a1 1 0 012 0v4a1 1 0 01-2 0v-4zm4 0a1 1 0 012 0v4a1 1 0 01-2 0v-4z\" fill-rule=\"nonzero\"/></svg>',\n    'resize-handle': '<svg width=\"10\" height=\"10\"><g fill-rule=\"nonzero\"><path d=\"M8.1 1.1A.5.5 0 119 2l-7 7A.5.5 0 111 8l7-7zM8.1 5.1A.5.5 0 119 6l-3 3A.5.5 0 115 8l3-3z\"/></g></svg>',\n    'resize': '<svg width=\"24\" height=\"24\"><path d=\"M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 01-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 01-.7.3h-6a1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.7-.3A1 1 0 014 11V5z\" fill-rule=\"evenodd\"/></svg>',\n    'restore-draft': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path d=\"M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1z\"/><path d=\"M4.7 10H9a1 1 0 010 2H3a1 1 0 01-1-1V5a1 1 0 112 0v3l2.5-2.4a9.2 9.2 0 0110.8-1.5A9 9 0 0113.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 111.3-1.5 7.2 7.2 0 0011.6-3.7 7 7 0 00-3.5-7.7A7.2 7.2 0 008 7L4.7 10z\" fill-rule=\"nonzero\"/></g></svg>',\n    'rotate-left': '<svg width=\"24\" height=\"24\"><path d=\"M4.7 10H9a1 1 0 010 2H3a1 1 0 01-1-1V5a1 1 0 112 0v3l2.5-2.4a9.2 9.2 0 0110.8-1.5A9 9 0 0113.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 111.3-1.5 7.2 7.2 0 0011.6-3.7 7 7 0 00-3.5-7.7A7.2 7.2 0 008 7L4.7 10z\" fill-rule=\"nonzero\"/></svg>',\n    'rotate-right': '<svg width=\"24\" height=\"24\"><path d=\"M20 8V5a1 1 0 012 0v6c0 .6-.4 1-1 1h-6a1 1 0 010-2h4.3L16 7A7.2 7.2 0 007.7 6a7 7 0 003 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 011.4 1.5A9.2 9.2 0 012.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8z\" fill-rule=\"nonzero\"/></svg>',\n    'rtl': '<svg width=\"24\" height=\"24\"><path d=\"M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 014.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L8 5zm12 11.2a1 1 0 11-1 1.6l-3-2a1 1 0 010-1.6l3-2a1 1 0 111 1.6L18.4 15l1.8 1.2z\" fill-rule=\"evenodd\"/></svg>',\n    'save': '<svg width=\"24\" height=\"24\"><path d=\"M5 16h14a2 2 0 012 2v2a2 2 0 01-2 2H5a2 2 0 01-2-2v-2c0-1.1.9-2 2-2zm0 2v2h14v-2H5zm10 0h2v2h-2v-2zm-4-6.4L8.7 9.3a1 1 0 10-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 10-1.4-1.4L13 11.6V4a1 1 0 00-2 0v7.6z\" fill-rule=\"nonzero\"/></svg>',\n    'search': '<svg width=\"24\" height=\"24\"><path d=\"M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12z\" fill-rule=\"nonzero\"/></svg>',\n    'select-all': '<svg width=\"24\" height=\"24\"><path d=\"M3 5h2V3a2 2 0 00-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2a2 2 0 00-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8a2 2 0 002-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2zM7 17h10V7H7v10zm2-8h6v6H9V9z\" fill-rule=\"nonzero\"/></svg>',\n    'selected': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2zm3.6 10.9L7 12.3a.7.7 0 00-1 1L9.6 17 18 8.6a.7.7 0 000-1 .7.7 0 00-1 0l-7.4 7.3z\"/></svg>',\n    'settings': '<svg width=\"24\" height=\"24\"><path d=\"M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V8H5a1 1 0 110-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6zM8 8h2V6H8v2zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V13H5a1 1 0 010-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6zM14 13h2v-2h-2v2zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V18H5a1 1 0 010-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6zM8 18h2v-2H8v2z\" fill-rule=\"evenodd\"/></svg>',\n    'sharpen': '<svg width=\"24\" height=\"24\"><path d=\"M16 6l4 4-8 9-8-9 4-4h8zm-4 10.2l5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2z\" fill-rule=\"evenodd\"/></svg>',\n    'sourcecode': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 010-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7zM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 00-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7z\"/></g></svg>',\n    'spell-check': '<svg width=\"24\" height=\"24\"><path d=\"M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6zm0-3v2h2V5H6zm13 0h-3v5h3v1h-3a1 1 0 01-.7-.3 1 1 0 01-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1zm-5 1.5l-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 01-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5zM13 10V8h-2v2h2zm0-3V5h-2v2h2zm3 5l1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12z\" fill-rule=\"evenodd\"/></svg>',\n    'strike-through': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path d=\"M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 017 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1z\"/><path d=\"M5 11h14a1 1 0 010 2H5a1 1 0 010-2z\" fill-rule=\"nonzero\"/></g></svg>',\n    'subscript': '<svg width=\"24\" height=\"24\"><path d=\"M10.4 10l4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10zM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 00-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 01-1.3 1.3l-.6.6h2.6V19z\" fill-rule=\"nonzero\"/></svg>',\n    'superscript': '<svg width=\"24\" height=\"24\"><path d=\"M15 9.4L10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11z\" fill-rule=\"nonzero\"/></svg>',\n    'table-caption': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><rect width=\"12\" height=\"2\" x=\"3\" y=\"4\" rx=\"1\"/><path d=\"M19 8a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2v-8c0-1.1.9-2 2-2h14zM5 15v3h6v-3H5zm14 0h-6v3h6v-3zm0-5h-6v3h6v-3zM5 13h6v-3H5v3z\"/></g></svg>',\n    'table-cell-classes': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path fill-rule=\"nonzero\" d=\"M13 4v9H3V6c0-1.1.9-2 2-2h8zm-2 2H5v5h6V6z\"/><path fill-rule=\"nonzero\" d=\"M13 4h6a2 2 0 012 2v7h-8v-2h6V6h-6V4z\" opacity=\".2\"/><path d=\"M18 20l-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3 .2-2.3 2 .7 3z\"/><path fill-rule=\"nonzero\" d=\"M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3z\" opacity=\".2\"/></g></svg>',\n    'table-cell-properties': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9H5v5h6v-5zm8 0h-6v5h6v-5zm-8-7H5v5h6V6z\"/></svg>',\n    'table-cell-select-all': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v12h14V6z\"/><path d=\"M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2z\" opacity=\".2\"/></g></svg>',\n    'table-cell-select-inner': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v12h14V6z\" opacity=\".2\"/><path d=\"M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2z\"/></g></svg>',\n    'table-classes': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v7h-8v7H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9H5v5h6v-5zm8-7h-6v5h6V6zm-8 0H5v5h6V6z\"/><path d=\"M18 20l-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3 .2-2.3 2 .7 3z\"/></g></svg>',\n    'table-delete-column': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2zm.3.5l1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5z\"/></svg>',\n    'table-delete-row': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6zm-4.7 1.8l1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3z\"/></svg>',\n    'table-delete-table': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 6v12h14V6H5z\"/><path d=\"M14.4 8.6l1 1-2.3 2.4 2.3 2.4-1 1-2.4-2.3-2.4 2.3-1-1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z\"/></g></svg>',\n    'table-insert-column-after': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M20 4c.6 0 1 .4 1 1v2a1 1 0 01-2 0V6h-8v12h8v-1a1 1 0 012 0v2c0 .5-.4 1-.9 1H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h15zM9 13H5v5h4v-5zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 01.1 2H17v2a1 1 0 01-2 .1V13h-2a1 1 0 01-.1-2H15V9c0-.6.4-1 1-1zM9 6H5v5h4V6z\"/></svg>',\n    'table-insert-column-before': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H4a1 1 0 01-1-1v-2a1 1 0 012 0v1h8V6H5v1a1 1 0 11-2 0V5c0-.6.4-1 1-1h15zm0 9h-4v5h4v-5zM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 01.1 2H9v2a1 1 0 01-2 .1V13H5a1 1 0 01-.1-2H7V9c0-.6.4-1 1-1zm11-2h-4v5h4V6z\"/></svg>',\n    'table-insert-row-above': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M6 4a1 1 0 110 2H5v6h14V6h-1a1 1 0 010-2h2c.6 0 1 .4 1 1v13a2 2 0 01-2 2H5a2 2 0 01-2-2V5c0-.6.4-1 1-1h2zm5 10H5v4h6v-4zm8 0h-6v4h6v-4zM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 010 2h-2v2a1 1 0 01-2 .1V8H9a1 1 0 010-2h2V4c0-.6.4-1 1-1z\"/></svg>',\n    'table-insert-row-after': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 01.1 2H13v2a1 1 0 01-2 .1V18H9a1 1 0 01-.1-2H11v-2c0-.6.4-1 1-1zm6 7a1 1 0 010-2h1v-6H5v6h1a1 1 0 010 2H4a1 1 0 01-1-1V6c0-1.1.9-2 2-2h14a2 2 0 012 2v13c0 .5-.4 1-.9 1H18zM11 6H5v4h6V6zm8 0h-6v4h6V6z\"/></svg>',\n    'table-left-header': '<svg width=\"24\" height=\"24\"><path d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 9h-4v5h4v-5zm-6 0H9v5h4v-5zm0-7H9v5h4V6zm6 0h-4v5h4V6z\"/></svg>',\n    'table-merge-cells': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 15.5V18h3v-2.5H5zm14-5h-9V18h9v-7.5zM19 6h-4v2.5h4V6zM8 6H5v2.5h3V6zm5 0h-3v2.5h3V6zm-8 7.5h3v-3H5v3z\"/></svg>',\n    'table-row-numbering-rtl': '<svg width=\"24\" height=\"24\"><path d=\"M6 4a2 2 0 00-2 2v13c0 1.1.9 2 2 2h12a2 2 0 002-2V6a2 2 0 00-2-2H6zm0 12h8v3H6v-3zm11 0c.6 0 1 .4 1 1v1a1 1 0 01-2 0v-1c0-.6.4-1 1-1zM6 11h8v3H6v-3zm11 0c.6 0 1 .4 1 1v1a1 1 0 01-2 0v-1c0-.6.4-1 1-1zM6 6h8v3H6V6zm11 0c.6 0 1 .4 1 1v1a1 1 0 11-2 0V7c0-.6.4-1 1-1z\"/></svg>',\n    'table-row-numbering': '<svg width=\"24\" height=\"24\"><path d=\"M18 4a2 2 0 012 2v13a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2h12zm0 12h-8v3h8v-3zM7 16a1 1 0 00-1 1v1a1 1 0 002 0v-1c0-.6-.4-1-1-1zm11-5h-8v3h8v-3zM7 11a1 1 0 00-1 1v1a1 1 0 002 0v-1c0-.6-.4-1-1-1zm11-5h-8v3h8V6zM7 6a1 1 0 00-1 1v1a1 1 0 102 0V7c0-.6-.4-1-1-1z\"/></svg>',\n    'table-row-properties': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 15v3h6v-3H5zm14 0h-6v3h6v-3zm0-9h-6v3h6V6zM5 9h6V6H5v3z\"/></svg>',\n    'table-split-cells': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM8 15.5H5V18h3v-2.5zm11-5h-9V18h9v-7.5zm-2.5 1l1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2zm-8.5-1H5v3h3v-3zM19 6h-4v2.5h4V6zM8 6H5v2.5h3V6zm5 0h-3v2.5h3V6z\"/></svg>',\n    'table-top-header': '<svg width=\"24\" height=\"24\"><path d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 11H5v3h6v-3zm8 0h-6v3h6v-3zm0-5h-6v3h6v-3zM5 13h6v-3H5v3z\"/></svg>',\n    'table': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 14v4h6v-4H5zm14 0h-6v4h6v-4zm0-6h-6v4h6V8zM5 12h6V8H5v4z\"/></svg>',\n    'template': '<svg width=\"24\" height=\"24\"><path d=\"M19 19v-1H5v1h14zM9 16v-4a5 5 0 116 0v4h4a2 2 0 012 2v3H3v-3c0-1.1.9-2 2-2h4zm4 0v-5l.8-.6a3 3 0 10-3.6 0l.8.6v5h2z\" fill-rule=\"nonzero\"/></svg>',\n    'temporary-placeholder': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path d=\"M9 7.6V6h2.5V4.5a.5.5 0 111 0V6H15v1.6a8 8 0 11-6 0zm-2.6 5.3a.5.5 0 00.3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 013.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 00-4.1 3.7z\"/><circle cx=\"14\" cy=\"4\" r=\"1\"/><circle cx=\"12\" cy=\"2\" r=\"1\"/><circle cx=\"10\" cy=\"4\" r=\"1\"/></g></svg>',\n    'text-color': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path id=\"tox-icon-text-color__color\" d=\"M3 18h18v3H3z\"/><path d=\"M8.7 16h-.8a.5.5 0 01-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 01-.5.6h-.8a.5.5 0 01-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4zm2.6-7.6l-.6 2a.5.5 0 00.5.6h1.6a.5.5 0 00.5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4z\"/></g></svg>',\n    'toc': '<svg width=\"24\" height=\"24\"><path d=\"M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 110-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 110-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 110-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2z\" fill-rule=\"evenodd\"/></svg>',\n    'translate': '<svg width=\"24\" height=\"24\"><path d=\"M12.7 14.3l-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 010-1l3.1-3A12.4 12.4 0 016.7 9H8a10.1 10.1 0 001.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 110-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 01-1 2.4 13.5 13.5 0 01-1.7 2.3l1.9 1.8zm4.3-3l2.7 7.3a.5.5 0 01-.4.7 1 1 0 01-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 01-1 .7.5.5 0 01-.4-.7l2.7-7.4a1 1 0 012 0zm-2.2 4.4h2.4L16 12.5l-1.2 3.2z\" fill-rule=\"evenodd\"/></svg>',\n    'underline': '<svg width=\"24\" height=\"24\"><path d=\"M16 5c.6 0 1 .4 1 1v5.5a4 4 0 01-.4 1.8l-1 1.4a5.3 5.3 0 01-5.5 1 5 5 0 01-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 01-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 002.2.8 3.4 3.4 0 002.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1zM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2z\" fill-rule=\"evenodd\"/></svg>',\n    'undo': '<svg width=\"24\" height=\"24\"><path d=\"M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 01-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 11-1.4 1.4l-5-5a1 1 0 010-1.4l5-5a1 1 0 011.4 1.4L6.4 8z\" fill-rule=\"nonzero\"/></svg>',\n    'unlink': '<svg width=\"24\" height=\"24\"><path d=\"M6.2 12.3a1 1 0 011.4 1.4l-2 2a2 2 0 102.6 2.8l4.8-4.8a1 1 0 000-1.4 1 1 0 111.4-1.3 2.9 2.9 0 010 4L9.6 20a3.9 3.9 0 01-5.5-5.5l2-2zm11.6-.6a1 1 0 01-1.4-1.4l2.1-2a2 2 0 10-2.7-2.8L11 10.3a1 1 0 000 1.4A1 1 0 119.6 13a2.9 2.9 0 010-4L14.4 4a3.9 3.9 0 015.5 5.5l-2 2zM7.6 6.3a.8.8 0 01-1 1.1L3.3 4.2a.7.7 0 111-1l3.2 3.1zM5.1 8.6a.8.8 0 010 1.5H3a.8.8 0 010-1.5H5zm5-3.5a.8.8 0 01-1.5 0V3a.8.8 0 011.5 0V5zm6 11.8a.8.8 0 011-1l3.2 3.2a.8.8 0 01-1 1L16 17zm-2.2 2a.8.8 0 011.5 0V21a.8.8 0 01-1.5 0V19zm5-3.5a.7.7 0 110-1.5H21a.8.8 0 010 1.5H19z\" fill-rule=\"nonzero\"/></svg>',\n    'unlock': '<svg width=\"24\" height=\"24\"><path d=\"M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 00-.3-.7A1 1 0 0016 7h-2a1 1 0 00-.7.3 1 1 0 00-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2z\" fill-rule=\"evenodd\"/></svg>',\n    'unordered-list': '<svg width=\"24\" height=\"24\"><path d=\"M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1z\" fill-rule=\"evenodd\"/></svg>',\n    'unselected': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2zm0 1a1 1 0 00-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6z\"/></svg>',\n    'upload': '<svg width=\"24\" height=\"24\"><path d=\"M18 19v-2a1 1 0 012 0v3c0 .6-.4 1-1 1H5a1 1 0 01-1-1v-3a1 1 0 012 0v2h12zM11 6.4L8.7 8.7a1 1 0 01-1.4-1.4l4-4a1 1 0 011.4 0l4 4a1 1 0 11-1.4 1.4L13 6.4V16a1 1 0 01-2 0V6.4z\" fill-rule=\"nonzero\"/></svg>',\n    'user': '<svg width=\"24\" height=\"24\"><path d=\"M12 24a12 12 0 110-24 12 12 0 010 24zm-8.7-5.3a11 11 0 0017.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7zM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13z\" fill-rule=\"nonzero\"/></svg>',\n    'vertical-align': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><rect width=\"18\" height=\"2\" x=\"3\" y=\"11\" rx=\"1\"/><path d=\"M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 011.2 1.5l-.1.1-4.1 3-4-3a1 1 0 011-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8l4 2.9a1 1 0 01-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 01-1-1v-4l-2 1.3a1 1 0 01-1.2-.1l-.1-.1a1 1 0 01.1-1.3l.1-.1 4.1-3z\"/></g></svg>',\n    'visualblocks': '<svg width=\"24\" height=\"24\"><path d=\"M9 19v2H7v-2h2zm-4 0v2a2 2 0 01-2-2h2zm8 0v2h-2v-2h2zm8 0a2 2 0 01-2 2v-2h2zm-4 0v2h-2v-2h2zM15 7a1 1 0 010 2v7a1 1 0 01-2 0V9h-1v7a1 1 0 01-2 0v-4a2.5 2.5 0 01-.2-5H15zM5 15v2H3v-2h2zm16 0v2h-2v-2h2zM5 11v2H3v-2h2zm16 0v2h-2v-2h2zM5 7v2H3V7h2zm16 0v2h-2V7h2zM5 3v2H3c0-1.1.9-2 2-2zm8 0v2h-2V3h2zm6 0a2 2 0 012 2h-2V3zM9 3v2H7V3h2zm8 0v2h-2V3h2z\" fill-rule=\"evenodd\"/></svg>',\n    'visualchars': '<svg width=\"24\" height=\"24\"><path d=\"M10 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 016.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L10 5z\" fill-rule=\"evenodd\"/></svg>',\n    'warning': '<svg width=\"24\" height=\"24\"><path d=\"M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6zM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 00-.3-.7 1 1 0 00-.7-.3 1 1 0 00-.7.3 1 1 0 00-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3zm.7-3l.3-4a1 1 0 00-.3-.7 1 1 0 00-.7-.3 1 1 0 00-.7.3 1 1 0 00-.3.7l.3 4h1.4z\" fill-rule=\"evenodd\"/></svg>',\n    'zoom-in': '<svg width=\"24\" height=\"24\"><path d=\"M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12zm-1-9a1 1 0 012 0v6a1 1 0 01-2 0V8zm-2 4a1 1 0 010-2h6a1 1 0 010 2H8z\" fill-rule=\"nonzero\"/></svg>',\n    'zoom-out': '<svg width=\"24\" height=\"24\"><path d=\"M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12zm-3-5a1 1 0 010-2h6a1 1 0 010 2H8z\" fill-rule=\"nonzero\"/></svg>',\n  }\n});","// Exports the \"default\" icons for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/icons/default')\n//   ES2015:\n//     import 'tinymce/icons/default'\nrequire('./icons.js');","// Exports the \"link\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/link')\n//   ES2015:\n//     import 'tinymce/plugins/link'\nrequire('./plugin.js');","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.10.9 (2023-11-15)\n */\n(function () {\n    'use strict';\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var typeOf = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var eq = function (t) {\n      return function (a) {\n        return t === a;\n      };\n    };\n    var isString = isType('string');\n    var isArray = isType('array');\n    var isNull = eq(null);\n    var isBoolean = isSimpleType('boolean');\n    var isFunction = isSimpleType('function');\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity = function (x) {\n      return x;\n    };\n    var tripleEquals = function (a, b) {\n      return a === b;\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = identity;\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: function () {\n          return none();\n        },\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var nativeIndexOf = Array.prototype.indexOf;\n    var nativePush = Array.prototype.push;\n    var rawIndexOf = function (ts, t) {\n      return nativeIndexOf.call(ts, t);\n    };\n    var contains = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each$1 = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var foldl = function (xs, f, acc) {\n      each$1(xs, function (x, i) {\n        acc = f(acc, x, i);\n      });\n      return acc;\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      return flatten(map(xs, f));\n    };\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Optional.none();\n    };\n\n    var is = function (lhs, rhs, comparator) {\n      if (comparator === void 0) {\n        comparator = tripleEquals;\n      }\n      return lhs.exists(function (left) {\n        return comparator(left, rhs);\n      });\n    };\n    var cat = function (arr) {\n      var r = [];\n      var push = function (x) {\n        r.push(x);\n      };\n      for (var i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    var someIf = function (b, a) {\n      return b ? Optional.some(a) : Optional.none();\n    };\n\n    var assumeExternalTargets = function (editor) {\n      var externalTargets = editor.getParam('link_assume_external_targets', false);\n      if (isBoolean(externalTargets) && externalTargets) {\n        return 1;\n      } else if (isString(externalTargets) && (externalTargets === 'http' || externalTargets === 'https')) {\n        return externalTargets;\n      }\n      return 0;\n    };\n    var hasContextToolbar = function (editor) {\n      return editor.getParam('link_context_toolbar', false, 'boolean');\n    };\n    var getLinkList = function (editor) {\n      return editor.getParam('link_list');\n    };\n    var getDefaultLinkTarget = function (editor) {\n      return editor.getParam('default_link_target');\n    };\n    var getTargetList = function (editor) {\n      return editor.getParam('target_list', true);\n    };\n    var getRelList = function (editor) {\n      return editor.getParam('rel_list', [], 'array');\n    };\n    var getLinkClassList = function (editor) {\n      return editor.getParam('link_class_list', [], 'array');\n    };\n    var shouldShowLinkTitle = function (editor) {\n      return editor.getParam('link_title', true, 'boolean');\n    };\n    var allowUnsafeLinkTarget = function (editor) {\n      return editor.getParam('allow_unsafe_link_target', false, 'boolean');\n    };\n    var useQuickLink = function (editor) {\n      return editor.getParam('link_quicklink', false, 'boolean');\n    };\n    var getDefaultLinkProtocol = function (editor) {\n      return editor.getParam('link_default_protocol', 'http', 'string');\n    };\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var getValue = function (item) {\n      return isString(item.value) ? item.value : '';\n    };\n    var getText = function (item) {\n      if (isString(item.text)) {\n        return item.text;\n      } else if (isString(item.title)) {\n        return item.title;\n      } else {\n        return '';\n      }\n    };\n    var sanitizeList = function (list, extractValue) {\n      var out = [];\n      global$5.each(list, function (item) {\n        var text = getText(item);\n        if (item.menu !== undefined) {\n          var items = sanitizeList(item.menu, extractValue);\n          out.push({\n            text: text,\n            items: items\n          });\n        } else {\n          var value = extractValue(item);\n          out.push({\n            text: text,\n            value: value\n          });\n        }\n      });\n      return out;\n    };\n    var sanitizeWith = function (extracter) {\n      if (extracter === void 0) {\n        extracter = getValue;\n      }\n      return function (list) {\n        return Optional.from(list).map(function (list) {\n          return sanitizeList(list, extracter);\n        });\n      };\n    };\n    var sanitize = function (list) {\n      return sanitizeWith(getValue)(list);\n    };\n    var createUi = function (name, label) {\n      return function (items) {\n        return {\n          name: name,\n          type: 'listbox',\n          label: label,\n          items: items\n        };\n      };\n    };\n    var ListOptions = {\n      sanitize: sanitize,\n      sanitizeWith: sanitizeWith,\n      createUi: createUi,\n      getValue: getValue\n    };\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n\n    var keys = Object.keys;\n    var hasOwnProperty = Object.hasOwnProperty;\n    var each = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var objAcc = function (r) {\n      return function (x, i) {\n        r[i] = x;\n      };\n    };\n    var internalFilter = function (obj, pred, onTrue, onFalse) {\n      var r = {};\n      each(obj, function (x, i) {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n      return r;\n    };\n    var filter = function (obj, pred) {\n      var t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n    var has = function (obj, key) {\n      return hasOwnProperty.call(obj, key);\n    };\n    var hasNonNullableKey = function (obj, key) {\n      return has(obj, key) && obj[key] !== undefined && obj[key] !== null;\n    };\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.dom.TreeWalker');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.URI');\n\n    var isAnchor = function (elm) {\n      return elm && elm.nodeName.toLowerCase() === 'a';\n    };\n    var isLink = function (elm) {\n      return isAnchor(elm) && !!getHref(elm);\n    };\n    var collectNodesInRange = function (rng, predicate) {\n      if (rng.collapsed) {\n        return [];\n      } else {\n        var contents = rng.cloneContents();\n        var walker = new global$4(contents.firstChild, contents);\n        var elements = [];\n        var current = contents.firstChild;\n        do {\n          if (predicate(current)) {\n            elements.push(current);\n          }\n        } while (current = walker.next());\n        return elements;\n      }\n    };\n    var hasProtocol = function (url) {\n      return /^\\w+:/i.test(url);\n    };\n    var getHref = function (elm) {\n      var href = elm.getAttribute('data-mce-href');\n      return href ? href : elm.getAttribute('href');\n    };\n    var applyRelTargetRules = function (rel, isUnsafe) {\n      var rules = ['noopener'];\n      var rels = rel ? rel.split(/\\s+/) : [];\n      var toString = function (rels) {\n        return global$5.trim(rels.sort().join(' '));\n      };\n      var addTargetRules = function (rels) {\n        rels = removeTargetRules(rels);\n        return rels.length > 0 ? rels.concat(rules) : rules;\n      };\n      var removeTargetRules = function (rels) {\n        return rels.filter(function (val) {\n          return global$5.inArray(rules, val) === -1;\n        });\n      };\n      var newRels = isUnsafe ? addTargetRules(rels) : removeTargetRules(rels);\n      return newRels.length > 0 ? toString(newRels) : '';\n    };\n    var trimCaretContainers = function (text) {\n      return text.replace(/\\uFEFF/g, '');\n    };\n    var getAnchorElement = function (editor, selectedElm) {\n      selectedElm = selectedElm || editor.selection.getNode();\n      if (isImageFigure(selectedElm)) {\n        return editor.dom.select('a[href]', selectedElm)[0];\n      } else {\n        return editor.dom.getParent(selectedElm, 'a[href]');\n      }\n    };\n    var getAnchorText = function (selection, anchorElm) {\n      var text = anchorElm ? anchorElm.innerText || anchorElm.textContent : selection.getContent({ format: 'text' });\n      return trimCaretContainers(text);\n    };\n    var hasLinks = function (elements) {\n      return global$5.grep(elements, isLink).length > 0;\n    };\n    var hasLinksInSelection = function (rng) {\n      return collectNodesInRange(rng, isLink).length > 0;\n    };\n    var isOnlyTextSelected = function (editor) {\n      var inlineTextElements = editor.schema.getTextInlineElements();\n      var isElement = function (elm) {\n        return elm.nodeType === 1 && !isAnchor(elm) && !has(inlineTextElements, elm.nodeName.toLowerCase());\n      };\n      var elements = collectNodesInRange(editor.selection.getRng(), isElement);\n      return elements.length === 0;\n    };\n    var isImageFigure = function (elm) {\n      return elm && elm.nodeName === 'FIGURE' && /\\bimage\\b/i.test(elm.className);\n    };\n    var getLinkAttrs = function (data) {\n      var attrs = [\n        'title',\n        'rel',\n        'class',\n        'target'\n      ];\n      return foldl(attrs, function (acc, key) {\n        data[key].each(function (value) {\n          acc[key] = value.length > 0 ? value : null;\n        });\n        return acc;\n      }, { href: data.href });\n    };\n    var handleExternalTargets = function (href, assumeExternalTargets) {\n      if ((assumeExternalTargets === 'http' || assumeExternalTargets === 'https') && !hasProtocol(href)) {\n        return assumeExternalTargets + '://' + href;\n      }\n      return href;\n    };\n    var applyLinkOverrides = function (editor, linkAttrs) {\n      var newLinkAttrs = __assign({}, linkAttrs);\n      if (!(getRelList(editor).length > 0) && allowUnsafeLinkTarget(editor) === false) {\n        var newRel = applyRelTargetRules(newLinkAttrs.rel, newLinkAttrs.target === '_blank');\n        newLinkAttrs.rel = newRel ? newRel : null;\n      }\n      if (Optional.from(newLinkAttrs.target).isNone() && getTargetList(editor) === false) {\n        newLinkAttrs.target = getDefaultLinkTarget(editor);\n      }\n      newLinkAttrs.href = handleExternalTargets(newLinkAttrs.href, assumeExternalTargets(editor));\n      return newLinkAttrs;\n    };\n    var updateLink = function (editor, anchorElm, text, linkAttrs) {\n      text.each(function (text) {\n        if (has(anchorElm, 'innerText')) {\n          anchorElm.innerText = text;\n        } else {\n          anchorElm.textContent = text;\n        }\n      });\n      editor.dom.setAttribs(anchorElm, linkAttrs);\n      editor.selection.select(anchorElm);\n    };\n    var createLink = function (editor, selectedElm, text, linkAttrs) {\n      if (isImageFigure(selectedElm)) {\n        linkImageFigure(editor, selectedElm, linkAttrs);\n      } else {\n        text.fold(function () {\n          editor.execCommand('mceInsertLink', false, linkAttrs);\n        }, function (text) {\n          editor.insertContent(editor.dom.createHTML('a', linkAttrs, editor.dom.encode(text)));\n        });\n      }\n    };\n    var linkDomMutation = function (editor, attachState, data) {\n      var selectedElm = editor.selection.getNode();\n      var anchorElm = getAnchorElement(editor, selectedElm);\n      var linkAttrs = applyLinkOverrides(editor, getLinkAttrs(data));\n      editor.undoManager.transact(function () {\n        if (data.href === attachState.href) {\n          attachState.attach();\n        }\n        if (anchorElm) {\n          editor.focus();\n          updateLink(editor, anchorElm, data.text, linkAttrs);\n        } else {\n          createLink(editor, selectedElm, data.text, linkAttrs);\n        }\n      });\n    };\n    var unlinkSelection = function (editor) {\n      var dom = editor.dom, selection = editor.selection;\n      var bookmark = selection.getBookmark();\n      var rng = selection.getRng().cloneRange();\n      var startAnchorElm = dom.getParent(rng.startContainer, 'a[href]', editor.getBody());\n      var endAnchorElm = dom.getParent(rng.endContainer, 'a[href]', editor.getBody());\n      if (startAnchorElm) {\n        rng.setStartBefore(startAnchorElm);\n      }\n      if (endAnchorElm) {\n        rng.setEndAfter(endAnchorElm);\n      }\n      selection.setRng(rng);\n      editor.execCommand('unlink');\n      selection.moveToBookmark(bookmark);\n    };\n    var unlinkDomMutation = function (editor) {\n      editor.undoManager.transact(function () {\n        var node = editor.selection.getNode();\n        if (isImageFigure(node)) {\n          unlinkImageFigure(editor, node);\n        } else {\n          unlinkSelection(editor);\n        }\n        editor.focus();\n      });\n    };\n    var unwrapOptions = function (data) {\n      var cls = data.class, href = data.href, rel = data.rel, target = data.target, text = data.text, title = data.title;\n      return filter({\n        class: cls.getOrNull(),\n        href: href,\n        rel: rel.getOrNull(),\n        target: target.getOrNull(),\n        text: text.getOrNull(),\n        title: title.getOrNull()\n      }, function (v, _k) {\n        return isNull(v) === false;\n      });\n    };\n    var sanitizeData = function (editor, data) {\n      var href = data.href;\n      return __assign(__assign({}, data), { href: global$3.isDomSafe(href, 'a', editor.settings) ? href : '' });\n    };\n    var link = function (editor, attachState, data) {\n      var sanitizedData = sanitizeData(editor, data);\n      editor.hasPlugin('rtc', true) ? editor.execCommand('createlink', false, unwrapOptions(sanitizedData)) : linkDomMutation(editor, attachState, sanitizedData);\n    };\n    var unlink = function (editor) {\n      editor.hasPlugin('rtc', true) ? editor.execCommand('unlink') : unlinkDomMutation(editor);\n    };\n    var unlinkImageFigure = function (editor, fig) {\n      var img = editor.dom.select('img', fig)[0];\n      if (img) {\n        var a = editor.dom.getParents(img, 'a[href]', fig)[0];\n        if (a) {\n          a.parentNode.insertBefore(img, a);\n          editor.dom.remove(a);\n        }\n      }\n    };\n    var linkImageFigure = function (editor, fig, attrs) {\n      var img = editor.dom.select('img', fig)[0];\n      if (img) {\n        var a = editor.dom.create('a', attrs);\n        img.parentNode.insertBefore(a, img);\n        a.appendChild(img);\n      }\n    };\n\n    var isListGroup = function (item) {\n      return hasNonNullableKey(item, 'items');\n    };\n    var findTextByValue = function (value, catalog) {\n      return findMap(catalog, function (item) {\n        if (isListGroup(item)) {\n          return findTextByValue(value, item.items);\n        } else {\n          return someIf(item.value === value, item);\n        }\n      });\n    };\n    var getDelta = function (persistentText, fieldName, catalog, data) {\n      var value = data[fieldName];\n      var hasPersistentText = persistentText.length > 0;\n      return value !== undefined ? findTextByValue(value, catalog).map(function (i) {\n        return {\n          url: {\n            value: i.value,\n            meta: {\n              text: hasPersistentText ? persistentText : i.text,\n              attach: noop\n            }\n          },\n          text: hasPersistentText ? persistentText : i.text\n        };\n      }) : Optional.none();\n    };\n    var findCatalog = function (catalogs, fieldName) {\n      if (fieldName === 'link') {\n        return catalogs.link;\n      } else if (fieldName === 'anchor') {\n        return catalogs.anchor;\n      } else {\n        return Optional.none();\n      }\n    };\n    var init = function (initialData, linkCatalog) {\n      var persistentData = {\n        text: initialData.text,\n        title: initialData.title\n      };\n      var getTitleFromUrlChange = function (url) {\n        return someIf(persistentData.title.length <= 0, Optional.from(url.meta.title).getOr(''));\n      };\n      var getTextFromUrlChange = function (url) {\n        return someIf(persistentData.text.length <= 0, Optional.from(url.meta.text).getOr(url.value));\n      };\n      var onUrlChange = function (data) {\n        var text = getTextFromUrlChange(data.url);\n        var title = getTitleFromUrlChange(data.url);\n        if (text.isSome() || title.isSome()) {\n          return Optional.some(__assign(__assign({}, text.map(function (text) {\n            return { text: text };\n          }).getOr({})), title.map(function (title) {\n            return { title: title };\n          }).getOr({})));\n        } else {\n          return Optional.none();\n        }\n      };\n      var onCatalogChange = function (data, change) {\n        var catalog = findCatalog(linkCatalog, change.name).getOr([]);\n        return getDelta(persistentData.text, change.name, catalog, data);\n      };\n      var onChange = function (getData, change) {\n        var name = change.name;\n        if (name === 'url') {\n          return onUrlChange(getData());\n        } else if (contains([\n            'anchor',\n            'link'\n          ], name)) {\n          return onCatalogChange(getData(), change);\n        } else if (name === 'text' || name === 'title') {\n          persistentData[name] = getData()[name];\n          return Optional.none();\n        } else {\n          return Optional.none();\n        }\n      };\n      return { onChange: onChange };\n    };\n    var DialogChanges = {\n      init: init,\n      getDelta: getDelta\n    };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Promise');\n\n    var delayedConfirm = function (editor, message, callback) {\n      var rng = editor.selection.getRng();\n      global$2.setEditorTimeout(editor, function () {\n        editor.windowManager.confirm(message, function (state) {\n          editor.selection.setRng(rng);\n          callback(state);\n        });\n      });\n    };\n    var tryEmailTransform = function (data) {\n      var url = data.href;\n      var suggestMailTo = url.indexOf('@') > 0 && url.indexOf('/') === -1 && url.indexOf('mailto:') === -1;\n      return suggestMailTo ? Optional.some({\n        message: 'The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?',\n        preprocess: function (oldData) {\n          return __assign(__assign({}, oldData), { href: 'mailto:' + url });\n        }\n      }) : Optional.none();\n    };\n    var tryProtocolTransform = function (assumeExternalTargets, defaultLinkProtocol) {\n      return function (data) {\n        var url = data.href;\n        var suggestProtocol = assumeExternalTargets === 1 && !hasProtocol(url) || assumeExternalTargets === 0 && /^\\s*www(\\.|\\d\\.)/i.test(url);\n        return suggestProtocol ? Optional.some({\n          message: 'The URL you entered seems to be an external link. Do you want to add the required ' + defaultLinkProtocol + ':// prefix?',\n          preprocess: function (oldData) {\n            return __assign(__assign({}, oldData), { href: defaultLinkProtocol + '://' + url });\n          }\n        }) : Optional.none();\n      };\n    };\n    var preprocess = function (editor, data) {\n      return findMap([\n        tryEmailTransform,\n        tryProtocolTransform(assumeExternalTargets(editor), getDefaultLinkProtocol(editor))\n      ], function (f) {\n        return f(data);\n      }).fold(function () {\n        return global$1.resolve(data);\n      }, function (transform) {\n        return new global$1(function (callback) {\n          delayedConfirm(editor, transform.message, function (state) {\n            callback(state ? transform.preprocess(data) : data);\n          });\n        });\n      });\n    };\n    var DialogConfirms = { preprocess: preprocess };\n\n    var getAnchors = function (editor) {\n      var anchorNodes = editor.dom.select('a:not([href])');\n      var anchors = bind(anchorNodes, function (anchor) {\n        var id = anchor.name || anchor.id;\n        return id ? [{\n            text: id,\n            value: '#' + id\n          }] : [];\n      });\n      return anchors.length > 0 ? Optional.some([{\n          text: 'None',\n          value: ''\n        }].concat(anchors)) : Optional.none();\n    };\n    var AnchorListOptions = { getAnchors: getAnchors };\n\n    var getClasses = function (editor) {\n      var list = getLinkClassList(editor);\n      if (list.length > 0) {\n        return ListOptions.sanitize(list);\n      }\n      return Optional.none();\n    };\n    var ClassListOptions = { getClasses: getClasses };\n\n    var global = tinymce.util.Tools.resolve('tinymce.util.XHR');\n\n    var parseJson = function (text) {\n      try {\n        return Optional.some(JSON.parse(text));\n      } catch (err) {\n        return Optional.none();\n      }\n    };\n    var getLinks = function (editor) {\n      var extractor = function (item) {\n        return editor.convertURL(item.value || item.url, 'href');\n      };\n      var linkList = getLinkList(editor);\n      return new global$1(function (callback) {\n        if (isString(linkList)) {\n          global.send({\n            url: linkList,\n            success: function (text) {\n              return callback(parseJson(text));\n            },\n            error: function (_) {\n              return callback(Optional.none());\n            }\n          });\n        } else if (isFunction(linkList)) {\n          linkList(function (output) {\n            return callback(Optional.some(output));\n          });\n        } else {\n          callback(Optional.from(linkList));\n        }\n      }).then(function (optItems) {\n        return optItems.bind(ListOptions.sanitizeWith(extractor)).map(function (items) {\n          if (items.length > 0) {\n            var noneItem = [{\n                text: 'None',\n                value: ''\n              }];\n            return noneItem.concat(items);\n          } else {\n            return items;\n          }\n        });\n      });\n    };\n    var LinkListOptions = { getLinks: getLinks };\n\n    var getRels = function (editor, initialTarget) {\n      var list = getRelList(editor);\n      if (list.length > 0) {\n        var isTargetBlank_1 = is(initialTarget, '_blank');\n        var enforceSafe = allowUnsafeLinkTarget(editor) === false;\n        var safeRelExtractor = function (item) {\n          return applyRelTargetRules(ListOptions.getValue(item), isTargetBlank_1);\n        };\n        var sanitizer = enforceSafe ? ListOptions.sanitizeWith(safeRelExtractor) : ListOptions.sanitize;\n        return sanitizer(list);\n      }\n      return Optional.none();\n    };\n    var RelOptions = { getRels: getRels };\n\n    var fallbacks = [\n      {\n        text: 'Current window',\n        value: ''\n      },\n      {\n        text: 'New window',\n        value: '_blank'\n      }\n    ];\n    var getTargets = function (editor) {\n      var list = getTargetList(editor);\n      if (isArray(list)) {\n        return ListOptions.sanitize(list).orThunk(function () {\n          return Optional.some(fallbacks);\n        });\n      } else if (list === false) {\n        return Optional.none();\n      }\n      return Optional.some(fallbacks);\n    };\n    var TargetOptions = { getTargets: getTargets };\n\n    var nonEmptyAttr = function (dom, elem, name) {\n      var val = dom.getAttrib(elem, name);\n      return val !== null && val.length > 0 ? Optional.some(val) : Optional.none();\n    };\n    var extractFromAnchor = function (editor, anchor) {\n      var dom = editor.dom;\n      var onlyText = isOnlyTextSelected(editor);\n      var text = onlyText ? Optional.some(getAnchorText(editor.selection, anchor)) : Optional.none();\n      var url = anchor ? Optional.some(dom.getAttrib(anchor, 'href')) : Optional.none();\n      var target = anchor ? Optional.from(dom.getAttrib(anchor, 'target')) : Optional.none();\n      var rel = nonEmptyAttr(dom, anchor, 'rel');\n      var linkClass = nonEmptyAttr(dom, anchor, 'class');\n      var title = nonEmptyAttr(dom, anchor, 'title');\n      return {\n        url: url,\n        text: text,\n        title: title,\n        target: target,\n        rel: rel,\n        linkClass: linkClass\n      };\n    };\n    var collect = function (editor, linkNode) {\n      return LinkListOptions.getLinks(editor).then(function (links) {\n        var anchor = extractFromAnchor(editor, linkNode);\n        return {\n          anchor: anchor,\n          catalogs: {\n            targets: TargetOptions.getTargets(editor),\n            rels: RelOptions.getRels(editor, anchor.target),\n            classes: ClassListOptions.getClasses(editor),\n            anchor: AnchorListOptions.getAnchors(editor),\n            link: links\n          },\n          optNode: Optional.from(linkNode),\n          flags: { titleEnabled: shouldShowLinkTitle(editor) }\n        };\n      });\n    };\n    var DialogInfo = { collect: collect };\n\n    var handleSubmit = function (editor, info) {\n      return function (api) {\n        var data = api.getData();\n        if (!data.url.value) {\n          unlink(editor);\n          api.close();\n          return;\n        }\n        var getChangedValue = function (key) {\n          return Optional.from(data[key]).filter(function (value) {\n            return !is(info.anchor[key], value);\n          });\n        };\n        var changedData = {\n          href: data.url.value,\n          text: getChangedValue('text'),\n          target: getChangedValue('target'),\n          rel: getChangedValue('rel'),\n          class: getChangedValue('linkClass'),\n          title: getChangedValue('title')\n        };\n        var attachState = {\n          href: data.url.value,\n          attach: data.url.meta !== undefined && data.url.meta.attach ? data.url.meta.attach : noop\n        };\n        DialogConfirms.preprocess(editor, changedData).then(function (pData) {\n          link(editor, attachState, pData);\n        });\n        api.close();\n      };\n    };\n    var collectData = function (editor) {\n      var anchorNode = getAnchorElement(editor);\n      return DialogInfo.collect(editor, anchorNode);\n    };\n    var getInitialData = function (info, defaultTarget) {\n      var anchor = info.anchor;\n      var url = anchor.url.getOr('');\n      return {\n        url: {\n          value: url,\n          meta: { original: { value: url } }\n        },\n        text: anchor.text.getOr(''),\n        title: anchor.title.getOr(''),\n        anchor: url,\n        link: url,\n        rel: anchor.rel.getOr(''),\n        target: anchor.target.or(defaultTarget).getOr(''),\n        linkClass: anchor.linkClass.getOr('')\n      };\n    };\n    var makeDialog = function (settings, onSubmit, editor) {\n      var urlInput = [{\n          name: 'url',\n          type: 'urlinput',\n          filetype: 'file',\n          label: 'URL'\n        }];\n      var displayText = settings.anchor.text.map(function () {\n        return {\n          name: 'text',\n          type: 'input',\n          label: 'Text to display'\n        };\n      }).toArray();\n      var titleText = settings.flags.titleEnabled ? [{\n          name: 'title',\n          type: 'input',\n          label: 'Title'\n        }] : [];\n      var defaultTarget = Optional.from(getDefaultLinkTarget(editor));\n      var initialData = getInitialData(settings, defaultTarget);\n      var catalogs = settings.catalogs;\n      var dialogDelta = DialogChanges.init(initialData, catalogs);\n      var body = {\n        type: 'panel',\n        items: flatten([\n          urlInput,\n          displayText,\n          titleText,\n          cat([\n            catalogs.anchor.map(ListOptions.createUi('anchor', 'Anchors')),\n            catalogs.rels.map(ListOptions.createUi('rel', 'Rel')),\n            catalogs.targets.map(ListOptions.createUi('target', 'Open link in...')),\n            catalogs.link.map(ListOptions.createUi('link', 'Link list')),\n            catalogs.classes.map(ListOptions.createUi('linkClass', 'Class'))\n          ])\n        ])\n      };\n      return {\n        title: 'Insert/Edit Link',\n        size: 'normal',\n        body: body,\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        initialData: initialData,\n        onChange: function (api, _a) {\n          var name = _a.name;\n          dialogDelta.onChange(api.getData, { name: name }).each(function (newData) {\n            api.setData(newData);\n          });\n        },\n        onSubmit: onSubmit\n      };\n    };\n    var open$1 = function (editor) {\n      var data = collectData(editor);\n      data.then(function (info) {\n        var onSubmit = handleSubmit(editor, info);\n        return makeDialog(info, onSubmit, editor);\n      }).then(function (spec) {\n        editor.windowManager.open(spec);\n      });\n    };\n\n    var appendClickRemove = function (link, evt) {\n      document.body.appendChild(link);\n      link.dispatchEvent(evt);\n      document.body.removeChild(link);\n    };\n    var open = function (url) {\n      var link = document.createElement('a');\n      link.target = '_blank';\n      link.href = url;\n      link.rel = 'noreferrer noopener';\n      var evt = document.createEvent('MouseEvents');\n      evt.initMouseEvent('click', true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n      appendClickRemove(link, evt);\n    };\n\n    var getLink = function (editor, elm) {\n      return editor.dom.getParent(elm, 'a[href]');\n    };\n    var getSelectedLink = function (editor) {\n      return getLink(editor, editor.selection.getStart());\n    };\n    var hasOnlyAltModifier = function (e) {\n      return e.altKey === true && e.shiftKey === false && e.ctrlKey === false && e.metaKey === false;\n    };\n    var gotoLink = function (editor, a) {\n      if (a) {\n        var href = getHref(a);\n        if (/^#/.test(href)) {\n          var targetEl = editor.$(href);\n          if (targetEl.length) {\n            editor.selection.scrollIntoView(targetEl[0], true);\n          }\n        } else {\n          open(a.href);\n        }\n      }\n    };\n    var openDialog = function (editor) {\n      return function () {\n        open$1(editor);\n      };\n    };\n    var gotoSelectedLink = function (editor) {\n      return function () {\n        gotoLink(editor, getSelectedLink(editor));\n      };\n    };\n    var setupGotoLinks = function (editor) {\n      editor.on('click', function (e) {\n        var link = getLink(editor, e.target);\n        if (link && global$6.metaKeyPressed(e)) {\n          e.preventDefault();\n          gotoLink(editor, link);\n        }\n      });\n      editor.on('keydown', function (e) {\n        var link = getSelectedLink(editor);\n        if (link && e.keyCode === 13 && hasOnlyAltModifier(e)) {\n          e.preventDefault();\n          gotoLink(editor, link);\n        }\n      });\n    };\n    var toggleState = function (editor, toggler) {\n      editor.on('NodeChange', toggler);\n      return function () {\n        return editor.off('NodeChange', toggler);\n      };\n    };\n    var toggleActiveState = function (editor) {\n      return function (api) {\n        var updateState = function () {\n          return api.setActive(!editor.mode.isReadOnly() && getAnchorElement(editor, editor.selection.getNode()) !== null);\n        };\n        updateState();\n        return toggleState(editor, updateState);\n      };\n    };\n    var toggleEnabledState = function (editor) {\n      return function (api) {\n        var updateState = function () {\n          return api.setDisabled(getAnchorElement(editor, editor.selection.getNode()) === null);\n        };\n        updateState();\n        return toggleState(editor, updateState);\n      };\n    };\n    var toggleUnlinkState = function (editor) {\n      return function (api) {\n        var hasLinks$1 = function (parents) {\n          return hasLinks(parents) || hasLinksInSelection(editor.selection.getRng());\n        };\n        var parents = editor.dom.getParents(editor.selection.getStart());\n        api.setDisabled(!hasLinks$1(parents));\n        return toggleState(editor, function (e) {\n          return api.setDisabled(!hasLinks$1(e.parents));\n        });\n      };\n    };\n\n    var register = function (editor) {\n      editor.addCommand('mceLink', function () {\n        if (useQuickLink(editor)) {\n          editor.fire('contexttoolbar-show', { toolbarKey: 'quicklink' });\n        } else {\n          openDialog(editor)();\n        }\n      });\n    };\n\n    var setup = function (editor) {\n      editor.addShortcut('Meta+K', '', function () {\n        editor.execCommand('mceLink');\n      });\n    };\n\n    var setupButtons = function (editor) {\n      editor.ui.registry.addToggleButton('link', {\n        icon: 'link',\n        tooltip: 'Insert/edit link',\n        onAction: openDialog(editor),\n        onSetup: toggleActiveState(editor)\n      });\n      editor.ui.registry.addButton('openlink', {\n        icon: 'new-tab',\n        tooltip: 'Open link',\n        onAction: gotoSelectedLink(editor),\n        onSetup: toggleEnabledState(editor)\n      });\n      editor.ui.registry.addButton('unlink', {\n        icon: 'unlink',\n        tooltip: 'Remove link',\n        onAction: function () {\n          return unlink(editor);\n        },\n        onSetup: toggleUnlinkState(editor)\n      });\n    };\n    var setupMenuItems = function (editor) {\n      editor.ui.registry.addMenuItem('openlink', {\n        text: 'Open link',\n        icon: 'new-tab',\n        onAction: gotoSelectedLink(editor),\n        onSetup: toggleEnabledState(editor)\n      });\n      editor.ui.registry.addMenuItem('link', {\n        icon: 'link',\n        text: 'Link...',\n        shortcut: 'Meta+K',\n        onAction: openDialog(editor)\n      });\n      editor.ui.registry.addMenuItem('unlink', {\n        icon: 'unlink',\n        text: 'Remove link',\n        onAction: function () {\n          return unlink(editor);\n        },\n        onSetup: toggleUnlinkState(editor)\n      });\n    };\n    var setupContextMenu = function (editor) {\n      var inLink = 'link unlink openlink';\n      var noLink = 'link';\n      editor.ui.registry.addContextMenu('link', {\n        update: function (element) {\n          return hasLinks(editor.dom.getParents(element, 'a')) ? inLink : noLink;\n        }\n      });\n    };\n    var setupContextToolbars = function (editor) {\n      var collapseSelectionToEnd = function (editor) {\n        editor.selection.collapse(false);\n      };\n      var onSetupLink = function (buttonApi) {\n        var node = editor.selection.getNode();\n        buttonApi.setDisabled(!getAnchorElement(editor, node));\n        return noop;\n      };\n      var getLinkText = function (value) {\n        var anchor = getAnchorElement(editor);\n        var onlyText = isOnlyTextSelected(editor);\n        if (!anchor && onlyText) {\n          var text = getAnchorText(editor.selection, anchor);\n          return Optional.some(text.length > 0 ? text : value);\n        } else {\n          return Optional.none();\n        }\n      };\n      editor.ui.registry.addContextForm('quicklink', {\n        launch: {\n          type: 'contextformtogglebutton',\n          icon: 'link',\n          tooltip: 'Link',\n          onSetup: toggleActiveState(editor)\n        },\n        label: 'Link',\n        predicate: function (node) {\n          return !!getAnchorElement(editor, node) && hasContextToolbar(editor);\n        },\n        initValue: function () {\n          var elm = getAnchorElement(editor);\n          return !!elm ? getHref(elm) : '';\n        },\n        commands: [\n          {\n            type: 'contextformtogglebutton',\n            icon: 'link',\n            tooltip: 'Link',\n            primary: true,\n            onSetup: function (buttonApi) {\n              var node = editor.selection.getNode();\n              buttonApi.setActive(!!getAnchorElement(editor, node));\n              return toggleActiveState(editor)(buttonApi);\n            },\n            onAction: function (formApi) {\n              var value = formApi.getValue();\n              var text = getLinkText(value);\n              var attachState = {\n                href: value,\n                attach: noop\n              };\n              link(editor, attachState, {\n                href: value,\n                text: text,\n                title: Optional.none(),\n                rel: Optional.none(),\n                target: Optional.none(),\n                class: Optional.none()\n              });\n              collapseSelectionToEnd(editor);\n              formApi.hide();\n            }\n          },\n          {\n            type: 'contextformbutton',\n            icon: 'unlink',\n            tooltip: 'Remove link',\n            onSetup: onSetupLink,\n            onAction: function (formApi) {\n              unlink(editor);\n              formApi.hide();\n            }\n          },\n          {\n            type: 'contextformbutton',\n            icon: 'new-tab',\n            tooltip: 'Open link',\n            onSetup: onSetupLink,\n            onAction: function (formApi) {\n              gotoSelectedLink(editor)();\n              formApi.hide();\n            }\n          }\n        ]\n      });\n    };\n\n    function Plugin () {\n      global$7.add('link', function (editor) {\n        setupButtons(editor);\n        setupMenuItems(editor);\n        setupContextMenu(editor);\n        setupContextToolbars(editor);\n        setupGotoLinks(editor);\n        register(editor);\n        setup(editor);\n      });\n    }\n\n    Plugin();\n\n}());\n","// Exports the \"silver\" theme for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/themes/silver')\n//   ES2015:\n//     import 'tinymce/themes/silver'\nrequire('./theme.js');","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.10.9 (2023-11-15)\n */\n(function () {\n    'use strict';\n\n    var typeOf = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType$1 = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var eq$1 = function (t) {\n      return function (a) {\n        return t === a;\n      };\n    };\n    var isString = isType$1('string');\n    var isObject = isType$1('object');\n    var isArray = isType$1('array');\n    var isNull = eq$1(null);\n    var isBoolean = isSimpleType('boolean');\n    var isUndefined = eq$1(undefined);\n    var isNullable = function (a) {\n      return a === null || a === undefined;\n    };\n    var isNonNullable = function (a) {\n      return !isNullable(a);\n    };\n    var isFunction = isSimpleType('function');\n    var isNumber = isSimpleType('number');\n    var isArrayOf = function (value, pred) {\n      if (isArray(value)) {\n        for (var i = 0, len = value.length; i < len; ++i) {\n          if (!pred(value[i])) {\n            return false;\n          }\n        }\n        return true;\n      }\n      return false;\n    };\n\n    var noop = function () {\n    };\n    var noarg = function (f) {\n      return function () {\n        return f();\n      };\n    };\n    var compose = function (fa, fb) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return fa(fb.apply(null, args));\n      };\n    };\n    var compose1 = function (fbc, fab) {\n      return function (a) {\n        return fbc(fab(a));\n      };\n    };\n    var constant$1 = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity$1 = function (x) {\n      return x;\n    };\n    var tripleEquals = function (a, b) {\n      return a === b;\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var not = function (f) {\n      return function (t) {\n        return !f(t);\n      };\n    };\n    var die = function (msg) {\n      return function () {\n        throw new Error(msg);\n      };\n    };\n    var never = constant$1(false);\n    var always = constant$1(true);\n\n    var global$g = tinymce.util.Tools.resolve('tinymce.ThemeManager');\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n    function __rest(s, e) {\n      var t = {};\n      for (var p in s)\n        if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n          t[p] = s[p];\n      if (s != null && typeof Object.getOwnPropertySymbols === 'function')\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n            t[p[i]] = s[p[i]];\n        }\n      return t;\n    }\n    function __spreadArray(to, from, pack) {\n      if (pack || arguments.length === 2)\n        for (var i = 0, l = from.length, ar; i < l; i++) {\n          if (ar || !(i in from)) {\n            if (!ar)\n              ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n          }\n        }\n      return to.concat(ar || Array.prototype.slice.call(from));\n    }\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = identity$1;\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant$1(null),\n        getOrUndefined: constant$1(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: function () {\n          return none();\n        },\n        toArray: function () {\n          return [];\n        },\n        toString: constant$1('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant$1(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        }\n      };\n      return me;\n    };\n    var from$1 = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none,\n      from: from$1\n    };\n\n    var nativeSlice = Array.prototype.slice;\n    var nativeIndexOf = Array.prototype.indexOf;\n    var nativePush = Array.prototype.push;\n    var rawIndexOf = function (ts, t) {\n      return nativeIndexOf.call(ts, t);\n    };\n    var indexOf = function (xs, x) {\n      var r = rawIndexOf(xs, x);\n      return r === -1 ? Optional.none() : Optional.some(r);\n    };\n    var contains$2 = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var exists = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var range$2 = function (num, f) {\n      var r = [];\n      for (var i = 0; i < num; i++) {\n        r.push(f(i));\n      }\n      return r;\n    };\n    var chunk$1 = function (array, size) {\n      var r = [];\n      for (var i = 0; i < array.length; i += size) {\n        var s = nativeSlice.call(array, i, i + size);\n        r.push(s);\n      }\n      return r;\n    };\n    var map$2 = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each$1 = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var eachr = function (xs, f) {\n      for (var i = xs.length - 1; i >= 0; i--) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var partition$3 = function (xs, pred) {\n      var pass = [];\n      var fail = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        var arr = pred(x, i) ? pass : fail;\n        arr.push(x);\n      }\n      return {\n        pass: pass,\n        fail: fail\n      };\n    };\n    var filter$2 = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var foldr = function (xs, f, acc) {\n      eachr(xs, function (x, i) {\n        acc = f(acc, x, i);\n      });\n      return acc;\n    };\n    var foldl = function (xs, f, acc) {\n      each$1(xs, function (x, i) {\n        acc = f(acc, x, i);\n      });\n      return acc;\n    };\n    var findUntil = function (xs, pred, until) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(x);\n        } else if (until(x, i)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var find$5 = function (xs, pred) {\n      return findUntil(xs, pred, never);\n    };\n    var findIndex$1 = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(i);\n        }\n      }\n      return Optional.none();\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind$3 = function (xs, f) {\n      return flatten(map$2(xs, f));\n    };\n    var forall = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        var x = xs[i];\n        if (pred(x, i) !== true) {\n          return false;\n        }\n      }\n      return true;\n    };\n    var reverse = function (xs) {\n      var r = nativeSlice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    var difference = function (a1, a2) {\n      return filter$2(a1, function (x) {\n        return !contains$2(a2, x);\n      });\n    };\n    var mapToObject = function (xs, f) {\n      var r = {};\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        r[String(x)] = f(x, i);\n      }\n      return r;\n    };\n    var pure$2 = function (x) {\n      return [x];\n    };\n    var sort = function (xs, comparator) {\n      var copy = nativeSlice.call(xs, 0);\n      copy.sort(comparator);\n      return copy;\n    };\n    var get$f = function (xs, i) {\n      return i >= 0 && i < xs.length ? Optional.some(xs[i]) : Optional.none();\n    };\n    var head = function (xs) {\n      return get$f(xs, 0);\n    };\n    var last$2 = function (xs) {\n      return get$f(xs, xs.length - 1);\n    };\n    var from = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Optional.none();\n    };\n\n    var keys = Object.keys;\n    var hasOwnProperty$1 = Object.hasOwnProperty;\n    var each = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var map$1 = function (obj, f) {\n      return tupleMap(obj, function (x, i) {\n        return {\n          k: i,\n          v: f(x, i)\n        };\n      });\n    };\n    var tupleMap = function (obj, f) {\n      var r = {};\n      each(obj, function (x, i) {\n        var tuple = f(x, i);\n        r[tuple.k] = tuple.v;\n      });\n      return r;\n    };\n    var objAcc = function (r) {\n      return function (x, i) {\n        r[i] = x;\n      };\n    };\n    var internalFilter = function (obj, pred, onTrue, onFalse) {\n      var r = {};\n      each(obj, function (x, i) {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n      return r;\n    };\n    var filter$1 = function (obj, pred) {\n      var t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n    var mapToArray = function (obj, f) {\n      var r = [];\n      each(obj, function (value, name) {\n        r.push(f(value, name));\n      });\n      return r;\n    };\n    var find$4 = function (obj, pred) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        if (pred(x, i, obj)) {\n          return Optional.some(x);\n        }\n      }\n      return Optional.none();\n    };\n    var values = function (obj) {\n      return mapToArray(obj, identity$1);\n    };\n    var get$e = function (obj, key) {\n      return has$2(obj, key) ? Optional.from(obj[key]) : Optional.none();\n    };\n    var has$2 = function (obj, key) {\n      return hasOwnProperty$1.call(obj, key);\n    };\n    var hasNonNullableKey = function (obj, key) {\n      return has$2(obj, key) && obj[key] !== undefined && obj[key] !== null;\n    };\n\n    var is$1 = function (lhs, rhs, comparator) {\n      if (comparator === void 0) {\n        comparator = tripleEquals;\n      }\n      return lhs.exists(function (left) {\n        return comparator(left, rhs);\n      });\n    };\n    var equals = function (lhs, rhs, comparator) {\n      if (comparator === void 0) {\n        comparator = tripleEquals;\n      }\n      return lift2(lhs, rhs, comparator).getOr(lhs.isNone() && rhs.isNone());\n    };\n    var cat = function (arr) {\n      var r = [];\n      var push = function (x) {\n        r.push(x);\n      };\n      for (var i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    var sequence = function (arr) {\n      var r = [];\n      for (var i = 0; i < arr.length; i++) {\n        var x = arr[i];\n        if (x.isSome()) {\n          r.push(x.getOrDie());\n        } else {\n          return Optional.none();\n        }\n      }\n      return Optional.some(r);\n    };\n    var lift2 = function (oa, ob, f) {\n      return oa.isSome() && ob.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie())) : Optional.none();\n    };\n    var lift3 = function (oa, ob, oc, f) {\n      return oa.isSome() && ob.isSome() && oc.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie(), oc.getOrDie())) : Optional.none();\n    };\n    var mapFrom = function (a, f) {\n      return a !== undefined && a !== null ? Optional.some(f(a)) : Optional.none();\n    };\n    var someIf = function (b, a) {\n      return b ? Optional.some(a) : Optional.none();\n    };\n\n    var addToEnd = function (str, suffix) {\n      return str + suffix;\n    };\n    var removeFromStart = function (str, numChars) {\n      return str.substring(numChars);\n    };\n\n    var checkRange = function (str, substr, start) {\n      return substr === '' || str.length >= substr.length && str.substr(start, start + substr.length) === substr;\n    };\n    var removeLeading = function (str, prefix) {\n      return startsWith(str, prefix) ? removeFromStart(str, prefix.length) : str;\n    };\n    var ensureTrailing = function (str, suffix) {\n      return endsWith(str, suffix) ? str : addToEnd(str, suffix);\n    };\n    var contains$1 = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n    var startsWith = function (str, prefix) {\n      return checkRange(str, prefix, 0);\n    };\n    var endsWith = function (str, suffix) {\n      return checkRange(str, suffix, str.length - suffix.length);\n    };\n    var blank = function (r) {\n      return function (s) {\n        return s.replace(r, '');\n      };\n    };\n    var trim$1 = blank(/^\\s+|\\s+$/g);\n    var isNotEmpty = function (s) {\n      return s.length > 0;\n    };\n    var isEmpty = function (s) {\n      return !isNotEmpty(s);\n    };\n\n    var isSupported$1 = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var fromHtml$2 = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: node };\n    };\n    var fromPoint = function (docElm, x, y) {\n      return Optional.from(docElm.dom.elementFromPoint(x, y)).map(fromDom);\n    };\n    var SugarElement = {\n      fromHtml: fromHtml$2,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    typeof window !== 'undefined' ? window : Function('return this;')();\n\n    var DOCUMENT = 9;\n    var DOCUMENT_FRAGMENT = 11;\n    var ELEMENT = 1;\n    var TEXT = 3;\n\n    var name$2 = function (element) {\n      var r = element.dom.nodeName;\n      return r.toLowerCase();\n    };\n    var type = function (element) {\n      return element.dom.nodeType;\n    };\n    var isType = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isElement$2 = isType(ELEMENT);\n    var isText$1 = isType(TEXT);\n    var isDocument = isType(DOCUMENT);\n    var isDocumentFragment = isType(DOCUMENT_FRAGMENT);\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var DeviceType = function (os, browser, userAgent, mediaMatch) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isMobile = os.isiOS() || os.isAndroid();\n      var isTouch = isMobile || mediaMatch('(pointer:coarse)');\n      var isTablet = isiPad || !isiPhone && isMobile && mediaMatch('(min-device-width:768px)');\n      var isPhone = isiPhone || isMobile && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      var isDesktop = !isPhone && !isTablet && !iOSwebview;\n      return {\n        isiPad: constant$1(isiPad),\n        isiPhone: constant$1(isiPhone),\n        isTablet: constant$1(isTablet),\n        isPhone: constant$1(isPhone),\n        isTouch: constant$1(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant$1(iOSwebview),\n        isDesktop: constant$1(isDesktop)\n      };\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find$3 = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu$d(group(1), group(2));\n    };\n    var detect$4 = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown$3();\n      }\n      return find$3(versionRegexes, cleanedAgent);\n    };\n    var unknown$3 = function () {\n      return nu$d(0, 0);\n    };\n    var nu$d = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu$d,\n      detect: detect$4,\n      unknown: unknown$3\n    };\n\n    var detectBrowser$1 = function (browsers, userAgentData) {\n      return findMap(userAgentData.brands, function (uaBrand) {\n        var lcBrand = uaBrand.brand.toLowerCase();\n        return find$5(browsers, function (browser) {\n          var _a;\n          return lcBrand === ((_a = browser.brand) === null || _a === void 0 ? void 0 : _a.toLowerCase());\n        }).map(function (info) {\n          return {\n            current: info.name,\n            version: Version.nu(parseInt(uaBrand.version, 10), 0)\n          };\n        });\n      });\n    };\n\n    var detect$3 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find$5(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$3(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$3(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains$1(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains$1(uastring, 'edge/') && contains$1(uastring, 'chrome') && contains$1(uastring, 'safari') && contains$1(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        brand: 'Chromium',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'chrome') && !contains$1(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'msie') || contains$1(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains$1(uastring, 'safari') || contains$1(uastring, 'mobile/')) && contains$1(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains$1(uastring, 'iphone') || contains$1(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('mac os x'),\n        versionRegexes: [/.*?mac\\ os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      },\n      {\n        name: 'ChromeOS',\n        search: checkContains('cros'),\n        versionRegexes: [/.*?chrome\\/([0-9]+)\\.([0-9]+).*/]\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant$1(browsers),\n      oses: constant$1(oses)\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var unknown$2 = function () {\n      return nu$c({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$c = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isBrowser = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge),\n        isChrome: isBrowser(chrome),\n        isIE: isBrowser(ie),\n        isOpera: isBrowser(opera),\n        isFirefox: isBrowser(firefox),\n        isSafari: isBrowser(safari)\n      };\n    };\n    var Browser = {\n      unknown: unknown$2,\n      nu: nu$c,\n      edge: constant$1(edge),\n      chrome: constant$1(chrome),\n      ie: constant$1(ie),\n      opera: constant$1(opera),\n      firefox: constant$1(firefox),\n      safari: constant$1(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var chromeos = 'ChromeOS';\n    var unknown$1 = function () {\n      return nu$b({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$b = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isOS = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows),\n        isiOS: isOS(ios),\n        isAndroid: isOS(android),\n        isOSX: isOS(osx),\n        isLinux: isOS(linux),\n        isSolaris: isOS(solaris),\n        isFreeBSD: isOS(freebsd),\n        isChromeOS: isOS(chromeos)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown$1,\n      nu: nu$b,\n      windows: constant$1(windows),\n      ios: constant$1(ios),\n      android: constant$1(android),\n      linux: constant$1(linux),\n      osx: constant$1(osx),\n      solaris: constant$1(solaris),\n      freebsd: constant$1(freebsd),\n      chromeos: constant$1(chromeos)\n    };\n\n    var detect$2 = function (userAgent, userAgentDataOpt, mediaMatch) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = userAgentDataOpt.bind(function (userAgentData) {\n        return detectBrowser$1(browsers, userAgentData);\n      }).orThunk(function () {\n        return detectBrowser(browsers, userAgent);\n      }).fold(Browser.unknown, Browser.nu);\n      var os = detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent, mediaMatch);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$2 };\n\n    var mediaMatch = function (query) {\n      return window.matchMedia(query).matches;\n    };\n    var platform = cached(function () {\n      return PlatformDetection.detect(navigator.userAgent, Optional.from(navigator.userAgentData), mediaMatch);\n    });\n    var detect$1 = function () {\n      return platform();\n    };\n\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, Node.DOCUMENT_POSITION_CONTAINED_BY);\n    };\n\n    var is = function (element, selector) {\n      var dom = element.dom;\n      if (dom.nodeType !== ELEMENT) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n    var bypassSelector = function (dom) {\n      return dom.nodeType !== ELEMENT && dom.nodeType !== DOCUMENT && dom.nodeType !== DOCUMENT_FRAGMENT || dom.childElementCount === 0;\n    };\n    var all$3 = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? [] : map$2(base.querySelectorAll(selector), SugarElement.fromDom);\n    };\n    var one = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? Optional.none() : Optional.from(base.querySelector(selector)).map(SugarElement.fromDom);\n    };\n\n    var eq = function (e1, e2) {\n      return e1.dom === e2.dom;\n    };\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom;\n      var d2 = e2.dom;\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return documentPositionContainedBy(e1.dom, e2.dom);\n    };\n    var contains = function (e1, e2) {\n      return detect$1().browser.isIE() ? ieContains(e1, e2) : regularContains(e1, e2);\n    };\n\n    var owner$4 = function (element) {\n      return SugarElement.fromDom(element.dom.ownerDocument);\n    };\n    var documentOrOwner = function (dos) {\n      return isDocument(dos) ? dos : owner$4(dos);\n    };\n    var documentElement = function (element) {\n      return SugarElement.fromDom(documentOrOwner(element).dom.documentElement);\n    };\n    var defaultView = function (element) {\n      return SugarElement.fromDom(documentOrOwner(element).dom.defaultView);\n    };\n    var parent = function (element) {\n      return Optional.from(element.dom.parentNode).map(SugarElement.fromDom);\n    };\n    var parentNode = function (element) {\n      return parent(element);\n    };\n    var offsetParent = function (element) {\n      return Optional.from(element.dom.offsetParent).map(SugarElement.fromDom);\n    };\n    var nextSibling = function (element) {\n      return Optional.from(element.dom.nextSibling).map(SugarElement.fromDom);\n    };\n    var children = function (element) {\n      return map$2(element.dom.childNodes, SugarElement.fromDom);\n    };\n    var child$2 = function (element, index) {\n      var cs = element.dom.childNodes;\n      return Optional.from(cs[index]).map(SugarElement.fromDom);\n    };\n    var firstChild = function (element) {\n      return child$2(element, 0);\n    };\n    var spot = function (element, offset) {\n      return {\n        element: element,\n        offset: offset\n      };\n    };\n    var leaf = function (element, offset) {\n      var cs = children(element);\n      return cs.length > 0 && offset < cs.length ? spot(cs[offset], 0) : spot(element, offset);\n    };\n\n    var isShadowRoot = function (dos) {\n      return isDocumentFragment(dos) && isNonNullable(dos.dom.host);\n    };\n    var supported = isFunction(Element.prototype.attachShadow) && isFunction(Node.prototype.getRootNode);\n    var isSupported = constant$1(supported);\n    var getRootNode = supported ? function (e) {\n      return SugarElement.fromDom(e.dom.getRootNode());\n    } : documentOrOwner;\n    var getContentContainer = function (dos) {\n      return isShadowRoot(dos) ? dos : SugarElement.fromDom(documentOrOwner(dos).dom.body);\n    };\n    var isInShadowRoot = function (e) {\n      return getShadowRoot(e).isSome();\n    };\n    var getShadowRoot = function (e) {\n      var r = getRootNode(e);\n      return isShadowRoot(r) ? Optional.some(r) : Optional.none();\n    };\n    var getShadowHost = function (e) {\n      return SugarElement.fromDom(e.dom.host);\n    };\n    var getOriginalEventTarget = function (event) {\n      if (isSupported() && isNonNullable(event.target)) {\n        var el = SugarElement.fromDom(event.target);\n        if (isElement$2(el) && isOpenShadowHost(el)) {\n          if (event.composed && event.composedPath) {\n            var composedPath = event.composedPath();\n            if (composedPath) {\n              return head(composedPath);\n            }\n          }\n        }\n      }\n      return Optional.from(event.target);\n    };\n    var isOpenShadowHost = function (element) {\n      return isNonNullable(element.dom.shadowRoot);\n    };\n\n    var inBody = function (element) {\n      var dom = isText$1(element) ? element.dom.parentNode : element.dom;\n      if (dom === undefined || dom === null || dom.ownerDocument === null) {\n        return false;\n      }\n      var doc = dom.ownerDocument;\n      return getShadowRoot(SugarElement.fromDom(dom)).fold(function () {\n        return doc.body.contains(dom);\n      }, compose1(inBody, getShadowHost));\n    };\n    var body = function () {\n      return getBody(SugarElement.fromDom(document));\n    };\n    var getBody = function (doc) {\n      var b = doc.dom.body;\n      if (b === null || b === undefined) {\n        throw new Error('Body is not available yet');\n      }\n      return SugarElement.fromDom(b);\n    };\n\n    var rawSet = function (dom, key, value) {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        console.error('Invalid call to Attribute.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var set$8 = function (element, key, value) {\n      rawSet(element.dom, key, value);\n    };\n    var setAll$1 = function (element, attrs) {\n      var dom = element.dom;\n      each(attrs, function (v, k) {\n        rawSet(dom, k, v);\n      });\n    };\n    var get$d = function (element, key) {\n      var v = element.dom.getAttribute(key);\n      return v === null ? undefined : v;\n    };\n    var getOpt = function (element, key) {\n      return Optional.from(get$d(element, key));\n    };\n    var has$1 = function (element, key) {\n      var dom = element.dom;\n      return dom && dom.hasAttribute ? dom.hasAttribute(key) : false;\n    };\n    var remove$7 = function (element, key) {\n      element.dom.removeAttribute(key);\n    };\n\n    var internalSet = function (dom, property, value) {\n      if (!isString(value)) {\n        console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported$1(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    var internalRemove = function (dom, property) {\n      if (isSupported$1(dom)) {\n        dom.style.removeProperty(property);\n      }\n    };\n    var set$7 = function (element, property, value) {\n      var dom = element.dom;\n      internalSet(dom, property, value);\n    };\n    var setAll = function (element, css) {\n      var dom = element.dom;\n      each(css, function (v, k) {\n        internalSet(dom, k, v);\n      });\n    };\n    var setOptions = function (element, css) {\n      var dom = element.dom;\n      each(css, function (v, k) {\n        v.fold(function () {\n          internalRemove(dom, k);\n        }, function (value) {\n          internalSet(dom, k, value);\n        });\n      });\n    };\n    var get$c = function (element, property) {\n      var dom = element.dom;\n      var styles = window.getComputedStyle(dom);\n      var r = styles.getPropertyValue(property);\n      return r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\n    };\n    var getUnsafeProperty = function (dom, property) {\n      return isSupported$1(dom) ? dom.style.getPropertyValue(property) : '';\n    };\n    var getRaw = function (element, property) {\n      var dom = element.dom;\n      var raw = getUnsafeProperty(dom, property);\n      return Optional.from(raw).filter(function (r) {\n        return r.length > 0;\n      });\n    };\n    var getAllRaw = function (element) {\n      var css = {};\n      var dom = element.dom;\n      if (isSupported$1(dom)) {\n        for (var i = 0; i < dom.style.length; i++) {\n          var ruleName = dom.style.item(i);\n          css[ruleName] = dom.style[ruleName];\n        }\n      }\n      return css;\n    };\n    var isValidValue = function (tag, property, value) {\n      var element = SugarElement.fromTag(tag);\n      set$7(element, property, value);\n      var style = getRaw(element, property);\n      return style.isSome();\n    };\n    var remove$6 = function (element, property) {\n      var dom = element.dom;\n      internalRemove(dom, property);\n      if (is$1(getOpt(element, 'style').map(trim$1), '')) {\n        remove$7(element, 'style');\n      }\n    };\n    var reflow = function (e) {\n      return e.dom.offsetWidth;\n    };\n\n    var Dimension = function (name, getOffset) {\n      var set = function (element, h) {\n        if (!isNumber(h) && !h.match(/^[0-9]+$/)) {\n          throw new Error(name + '.set accepts only positive integer values. Value was ' + h);\n        }\n        var dom = element.dom;\n        if (isSupported$1(dom)) {\n          dom.style[name] = h + 'px';\n        }\n      };\n      var get = function (element) {\n        var r = getOffset(element);\n        if (r <= 0 || r === null) {\n          var css = get$c(element, name);\n          return parseFloat(css) || 0;\n        }\n        return r;\n      };\n      var getOuter = get;\n      var aggregate = function (element, properties) {\n        return foldl(properties, function (acc, property) {\n          var val = get$c(element, property);\n          var value = val === undefined ? 0 : parseInt(val, 10);\n          return isNaN(value) ? acc : acc + value;\n        }, 0);\n      };\n      var max = function (element, value, properties) {\n        var cumulativeInclusions = aggregate(element, properties);\n        var absoluteMax = value > cumulativeInclusions ? value - cumulativeInclusions : 0;\n        return absoluteMax;\n      };\n      return {\n        set: set,\n        get: get,\n        getOuter: getOuter,\n        aggregate: aggregate,\n        max: max\n      };\n    };\n\n    var api$3 = Dimension('height', function (element) {\n      var dom = element.dom;\n      return inBody(element) ? dom.getBoundingClientRect().height : dom.offsetHeight;\n    });\n    var get$b = function (element) {\n      return api$3.get(element);\n    };\n    var getOuter$2 = function (element) {\n      return api$3.getOuter(element);\n    };\n    var setMax$1 = function (element, value) {\n      var inclusions = [\n        'margin-top',\n        'border-top-width',\n        'padding-top',\n        'padding-bottom',\n        'border-bottom-width',\n        'margin-bottom'\n      ];\n      var absMax = api$3.max(element, value, inclusions);\n      set$7(element, 'max-height', absMax + 'px');\n    };\n\n    var r$1 = function (left, top) {\n      var translate = function (x, y) {\n        return r$1(left + x, top + y);\n      };\n      return {\n        left: left,\n        top: top,\n        translate: translate\n      };\n    };\n    var SugarPosition = r$1;\n\n    var boxPosition = function (dom) {\n      var box = dom.getBoundingClientRect();\n      return SugarPosition(box.left, box.top);\n    };\n    var firstDefinedOrZero = function (a, b) {\n      if (a !== undefined) {\n        return a;\n      } else {\n        return b !== undefined ? b : 0;\n      }\n    };\n    var absolute$3 = function (element) {\n      var doc = element.dom.ownerDocument;\n      var body = doc.body;\n      var win = doc.defaultView;\n      var html = doc.documentElement;\n      if (body === element.dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      var scrollTop = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageYOffset, html.scrollTop);\n      var scrollLeft = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageXOffset, html.scrollLeft);\n      var clientTop = firstDefinedOrZero(html.clientTop, body.clientTop);\n      var clientLeft = firstDefinedOrZero(html.clientLeft, body.clientLeft);\n      return viewport$1(element).translate(scrollLeft - clientLeft, scrollTop - clientTop);\n    };\n    var viewport$1 = function (element) {\n      var dom = element.dom;\n      var doc = dom.ownerDocument;\n      var body = doc.body;\n      if (body === dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      if (!inBody(element)) {\n        return SugarPosition(0, 0);\n      }\n      return boxPosition(dom);\n    };\n\n    var api$2 = Dimension('width', function (element) {\n      return element.dom.offsetWidth;\n    });\n    var set$6 = function (element, h) {\n      return api$2.set(element, h);\n    };\n    var get$a = function (element) {\n      return api$2.get(element);\n    };\n    var getOuter$1 = function (element) {\n      return api$2.getOuter(element);\n    };\n    var setMax = function (element, value) {\n      var inclusions = [\n        'margin-left',\n        'border-left-width',\n        'padding-left',\n        'padding-right',\n        'border-right-width',\n        'margin-right'\n      ];\n      var absMax = api$2.max(element, value, inclusions);\n      set$7(element, 'max-width', absMax + 'px');\n    };\n\n    var mkEvent = function (target, x, y, stop, prevent, kill, raw) {\n      return {\n        target: target,\n        x: x,\n        y: y,\n        stop: stop,\n        prevent: prevent,\n        kill: kill,\n        raw: raw\n      };\n    };\n    var fromRawEvent$1 = function (rawEvent) {\n      var target = SugarElement.fromDom(getOriginalEventTarget(rawEvent).getOr(rawEvent.target));\n      var stop = function () {\n        return rawEvent.stopPropagation();\n      };\n      var prevent = function () {\n        return rawEvent.preventDefault();\n      };\n      var kill = compose(prevent, stop);\n      return mkEvent(target, rawEvent.clientX, rawEvent.clientY, stop, prevent, kill, rawEvent);\n    };\n    var handle = function (filter, handler) {\n      return function (rawEvent) {\n        if (filter(rawEvent)) {\n          handler(fromRawEvent$1(rawEvent));\n        }\n      };\n    };\n    var binder = function (element, event, filter, handler, useCapture) {\n      var wrapped = handle(filter, handler);\n      element.dom.addEventListener(event, wrapped, useCapture);\n      return { unbind: curry(unbind, element, event, wrapped, useCapture) };\n    };\n    var bind$2 = function (element, event, filter, handler) {\n      return binder(element, event, filter, handler, false);\n    };\n    var capture$1 = function (element, event, filter, handler) {\n      return binder(element, event, filter, handler, true);\n    };\n    var unbind = function (element, event, handler, useCapture) {\n      element.dom.removeEventListener(event, handler, useCapture);\n    };\n\n    var before$2 = function (marker, element) {\n      var parent$1 = parent(marker);\n      parent$1.each(function (v) {\n        v.dom.insertBefore(element.dom, marker.dom);\n      });\n    };\n    var after$2 = function (marker, element) {\n      var sibling = nextSibling(marker);\n      sibling.fold(function () {\n        var parent$1 = parent(marker);\n        parent$1.each(function (v) {\n          append$2(v, element);\n        });\n      }, function (v) {\n        before$2(v, element);\n      });\n    };\n    var prepend$1 = function (parent, element) {\n      var firstChild$1 = firstChild(parent);\n      firstChild$1.fold(function () {\n        append$2(parent, element);\n      }, function (v) {\n        parent.dom.insertBefore(element.dom, v.dom);\n      });\n    };\n    var append$2 = function (parent, element) {\n      parent.dom.appendChild(element.dom);\n    };\n    var appendAt = function (parent, element, index) {\n      child$2(parent, index).fold(function () {\n        append$2(parent, element);\n      }, function (v) {\n        before$2(v, element);\n      });\n    };\n\n    var before$1 = function (marker, elements) {\n      each$1(elements, function (x) {\n        before$2(marker, x);\n      });\n    };\n    var append$1 = function (parent, elements) {\n      each$1(elements, function (x) {\n        append$2(parent, x);\n      });\n    };\n\n    var empty = function (element) {\n      element.dom.textContent = '';\n      each$1(children(element), function (rogue) {\n        remove$5(rogue);\n      });\n    };\n    var remove$5 = function (element) {\n      var dom = element.dom;\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n    var unwrap = function (wrapper) {\n      var children$1 = children(wrapper);\n      if (children$1.length > 0) {\n        before$1(wrapper, children$1);\n      }\n      remove$5(wrapper);\n    };\n\n    var get$9 = function (_DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var x = doc.body.scrollLeft || doc.documentElement.scrollLeft;\n      var y = doc.body.scrollTop || doc.documentElement.scrollTop;\n      return SugarPosition(x, y);\n    };\n    var to = function (x, y, _DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var win = doc.defaultView;\n      if (win) {\n        win.scrollTo(x, y);\n      }\n    };\n\n    var get$8 = function (_win) {\n      var win = _win === undefined ? window : _win;\n      if (detect$1().browser.isFirefox()) {\n        return Optional.none();\n      } else {\n        return Optional.from(win['visualViewport']);\n      }\n    };\n    var bounds$1 = function (x, y, width, height) {\n      return {\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        right: x + width,\n        bottom: y + height\n      };\n    };\n    var getBounds$3 = function (_win) {\n      var win = _win === undefined ? window : _win;\n      var doc = win.document;\n      var scroll = get$9(SugarElement.fromDom(doc));\n      return get$8(win).fold(function () {\n        var html = win.document.documentElement;\n        var width = html.clientWidth;\n        var height = html.clientHeight;\n        return bounds$1(scroll.left, scroll.top, width, height);\n      }, function (visualViewport) {\n        return bounds$1(Math.max(visualViewport.pageLeft, scroll.left), Math.max(visualViewport.pageTop, scroll.top), visualViewport.width, visualViewport.height);\n      });\n    };\n\n    var walkUp = function (navigation, doc) {\n      var frame = navigation.view(doc);\n      return frame.fold(constant$1([]), function (f) {\n        var parent = navigation.owner(f);\n        var rest = walkUp(navigation, parent);\n        return [f].concat(rest);\n      });\n    };\n    var pathTo = function (element, navigation) {\n      var d = navigation.owner(element);\n      var paths = walkUp(navigation, d);\n      return Optional.some(paths);\n    };\n\n    var view = function (doc) {\n      var _a;\n      var element = doc.dom === document ? Optional.none() : Optional.from((_a = doc.dom.defaultView) === null || _a === void 0 ? void 0 : _a.frameElement);\n      return element.map(SugarElement.fromDom);\n    };\n    var owner$3 = function (element) {\n      return owner$4(element);\n    };\n\n    var Navigation = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        view: view,\n        owner: owner$3\n    });\n\n    var find$2 = function (element) {\n      var doc = SugarElement.fromDom(document);\n      var scroll = get$9(doc);\n      var path = pathTo(element, Navigation);\n      return path.fold(curry(absolute$3, element), function (frames) {\n        var offset = viewport$1(element);\n        var r = foldr(frames, function (b, a) {\n          var loc = viewport$1(a);\n          return {\n            left: b.left + loc.left,\n            top: b.top + loc.top\n          };\n        }, {\n          left: 0,\n          top: 0\n        });\n        return SugarPosition(r.left + offset.left + scroll.left, r.top + offset.top + scroll.top);\n      });\n    };\n\n    var pointed = function (point, width, height) {\n      return {\n        point: point,\n        width: width,\n        height: height\n      };\n    };\n    var rect = function (x, y, width, height) {\n      return {\n        x: x,\n        y: y,\n        width: width,\n        height: height\n      };\n    };\n    var bounds = function (x, y, width, height) {\n      return {\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        right: x + width,\n        bottom: y + height\n      };\n    };\n    var box$1 = function (element) {\n      var xy = absolute$3(element);\n      var w = getOuter$1(element);\n      var h = getOuter$2(element);\n      return bounds(xy.left, xy.top, w, h);\n    };\n    var absolute$2 = function (element) {\n      var position = find$2(element);\n      var width = getOuter$1(element);\n      var height = getOuter$2(element);\n      return bounds(position.left, position.top, width, height);\n    };\n    var win = function () {\n      return getBounds$3(window);\n    };\n\n    var value$3 = function (o) {\n      var or = function (_opt) {\n        return value$3(o);\n      };\n      var orThunk = function (_f) {\n        return value$3(o);\n      };\n      var map = function (f) {\n        return value$3(f(o));\n      };\n      var mapError = function (_f) {\n        return value$3(o);\n      };\n      var each = function (f) {\n        f(o);\n      };\n      var bind = function (f) {\n        return f(o);\n      };\n      var fold = function (_, onValue) {\n        return onValue(o);\n      };\n      var exists = function (f) {\n        return f(o);\n      };\n      var forall = function (f) {\n        return f(o);\n      };\n      var toOptional = function () {\n        return Optional.some(o);\n      };\n      return {\n        isValue: always,\n        isError: never,\n        getOr: constant$1(o),\n        getOrThunk: constant$1(o),\n        getOrDie: constant$1(o),\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: each,\n        bind: bind,\n        exists: exists,\n        forall: forall,\n        toOptional: toOptional\n      };\n    };\n    var error$1 = function (message) {\n      var getOrThunk = function (f) {\n        return f();\n      };\n      var getOrDie = function () {\n        return die(String(message))();\n      };\n      var or = identity$1;\n      var orThunk = function (f) {\n        return f();\n      };\n      var map = function (_f) {\n        return error$1(message);\n      };\n      var mapError = function (f) {\n        return error$1(f(message));\n      };\n      var bind = function (_f) {\n        return error$1(message);\n      };\n      var fold = function (onError, _) {\n        return onError(message);\n      };\n      return {\n        isValue: never,\n        isError: always,\n        getOr: identity$1,\n        getOrThunk: getOrThunk,\n        getOrDie: getOrDie,\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: noop,\n        bind: bind,\n        exists: never,\n        forall: always,\n        toOptional: Optional.none\n      };\n    };\n    var fromOption = function (opt, err) {\n      return opt.fold(function () {\n        return error$1(err);\n      }, value$3);\n    };\n    var Result = {\n      value: value$3,\n      error: error$1,\n      fromOption: fromOption\n    };\n\n    var SimpleResultType;\n    (function (SimpleResultType) {\n      SimpleResultType[SimpleResultType['Error'] = 0] = 'Error';\n      SimpleResultType[SimpleResultType['Value'] = 1] = 'Value';\n    }(SimpleResultType || (SimpleResultType = {})));\n    var fold$1 = function (res, onError, onValue) {\n      return res.stype === SimpleResultType.Error ? onError(res.serror) : onValue(res.svalue);\n    };\n    var partition$2 = function (results) {\n      var values = [];\n      var errors = [];\n      each$1(results, function (obj) {\n        fold$1(obj, function (err) {\n          return errors.push(err);\n        }, function (val) {\n          return values.push(val);\n        });\n      });\n      return {\n        values: values,\n        errors: errors\n      };\n    };\n    var mapError = function (res, f) {\n      if (res.stype === SimpleResultType.Error) {\n        return {\n          stype: SimpleResultType.Error,\n          serror: f(res.serror)\n        };\n      } else {\n        return res;\n      }\n    };\n    var map = function (res, f) {\n      if (res.stype === SimpleResultType.Value) {\n        return {\n          stype: SimpleResultType.Value,\n          svalue: f(res.svalue)\n        };\n      } else {\n        return res;\n      }\n    };\n    var bind$1 = function (res, f) {\n      if (res.stype === SimpleResultType.Value) {\n        return f(res.svalue);\n      } else {\n        return res;\n      }\n    };\n    var bindError = function (res, f) {\n      if (res.stype === SimpleResultType.Error) {\n        return f(res.serror);\n      } else {\n        return res;\n      }\n    };\n    var svalue = function (v) {\n      return {\n        stype: SimpleResultType.Value,\n        svalue: v\n      };\n    };\n    var serror = function (e) {\n      return {\n        stype: SimpleResultType.Error,\n        serror: e\n      };\n    };\n    var toResult$1 = function (res) {\n      return fold$1(res, Result.error, Result.value);\n    };\n    var fromResult$1 = function (res) {\n      return res.fold(serror, svalue);\n    };\n    var SimpleResult = {\n      fromResult: fromResult$1,\n      toResult: toResult$1,\n      svalue: svalue,\n      partition: partition$2,\n      serror: serror,\n      bind: bind$1,\n      bindError: bindError,\n      map: map,\n      mapError: mapError,\n      fold: fold$1\n    };\n\n    var field$2 = function (key, newKey, presence, prop) {\n      return {\n        tag: 'field',\n        key: key,\n        newKey: newKey,\n        presence: presence,\n        prop: prop\n      };\n    };\n    var customField$1 = function (newKey, instantiator) {\n      return {\n        tag: 'custom',\n        newKey: newKey,\n        instantiator: instantiator\n      };\n    };\n    var fold = function (value, ifField, ifCustom) {\n      switch (value.tag) {\n      case 'field':\n        return ifField(value.key, value.newKey, value.presence, value.prop);\n      case 'custom':\n        return ifCustom(value.newKey, value.instantiator);\n      }\n    };\n\n    var shallow$1 = function (old, nu) {\n      return nu;\n    };\n    var deep = function (old, nu) {\n      var bothObjects = isObject(old) && isObject(nu);\n      return bothObjects ? deepMerge(old, nu) : nu;\n    };\n    var baseMerge = function (merger) {\n      return function () {\n        var objects = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          objects[_i] = arguments[_i];\n        }\n        if (objects.length === 0) {\n          throw new Error('Can\\'t merge zero objects');\n        }\n        var ret = {};\n        for (var j = 0; j < objects.length; j++) {\n          var curObject = objects[j];\n          for (var key in curObject) {\n            if (has$2(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    var deepMerge = baseMerge(deep);\n    var merge$1 = baseMerge(shallow$1);\n\n    var required$2 = function () {\n      return {\n        tag: 'required',\n        process: {}\n      };\n    };\n    var defaultedThunk = function (fallbackThunk) {\n      return {\n        tag: 'defaultedThunk',\n        process: fallbackThunk\n      };\n    };\n    var defaulted$1 = function (fallback) {\n      return defaultedThunk(constant$1(fallback));\n    };\n    var asOption = function () {\n      return {\n        tag: 'option',\n        process: {}\n      };\n    };\n    var mergeWithThunk = function (baseThunk) {\n      return {\n        tag: 'mergeWithThunk',\n        process: baseThunk\n      };\n    };\n    var mergeWith = function (base) {\n      return mergeWithThunk(constant$1(base));\n    };\n\n    var mergeValues$1 = function (values, base) {\n      return values.length > 0 ? SimpleResult.svalue(deepMerge(base, merge$1.apply(undefined, values))) : SimpleResult.svalue(base);\n    };\n    var mergeErrors$1 = function (errors) {\n      return compose(SimpleResult.serror, flatten)(errors);\n    };\n    var consolidateObj = function (objects, base) {\n      var partition = SimpleResult.partition(objects);\n      return partition.errors.length > 0 ? mergeErrors$1(partition.errors) : mergeValues$1(partition.values, base);\n    };\n    var consolidateArr = function (objects) {\n      var partitions = SimpleResult.partition(objects);\n      return partitions.errors.length > 0 ? mergeErrors$1(partitions.errors) : SimpleResult.svalue(partitions.values);\n    };\n    var ResultCombine = {\n      consolidateObj: consolidateObj,\n      consolidateArr: consolidateArr\n    };\n\n    var formatObj = function (input) {\n      return isObject(input) && keys(input).length > 100 ? ' removed due to size' : JSON.stringify(input, null, 2);\n    };\n    var formatErrors = function (errors) {\n      var es = errors.length > 10 ? errors.slice(0, 10).concat([{\n          path: [],\n          getErrorInfo: constant$1('... (only showing first ten failures)')\n        }]) : errors;\n      return map$2(es, function (e) {\n        return 'Failed path: (' + e.path.join(' > ') + ')\\n' + e.getErrorInfo();\n      });\n    };\n\n    var nu$a = function (path, getErrorInfo) {\n      return SimpleResult.serror([{\n          path: path,\n          getErrorInfo: getErrorInfo\n        }]);\n    };\n    var missingRequired = function (path, key, obj) {\n      return nu$a(path, function () {\n        return 'Could not find valid *required* value for \"' + key + '\" in ' + formatObj(obj);\n      });\n    };\n    var missingKey = function (path, key) {\n      return nu$a(path, function () {\n        return 'Choice schema did not contain choice key: \"' + key + '\"';\n      });\n    };\n    var missingBranch = function (path, branches, branch) {\n      return nu$a(path, function () {\n        return 'The chosen schema: \"' + branch + '\" did not exist in branches: ' + formatObj(branches);\n      });\n    };\n    var unsupportedFields = function (path, unsupported) {\n      return nu$a(path, function () {\n        return 'There are unsupported fields: [' + unsupported.join(', ') + '] specified';\n      });\n    };\n    var custom = function (path, err) {\n      return nu$a(path, constant$1(err));\n    };\n\n    var value$2 = function (validator) {\n      var extract = function (path, val) {\n        return SimpleResult.bindError(validator(val), function (err) {\n          return custom(path, err);\n        });\n      };\n      var toString = constant$1('val');\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var anyValue$1 = value$2(SimpleResult.svalue);\n\n    var requiredAccess = function (path, obj, key, bundle) {\n      return get$e(obj, key).fold(function () {\n        return missingRequired(path, key, obj);\n      }, bundle);\n    };\n    var fallbackAccess = function (obj, key, fallback, bundle) {\n      var v = get$e(obj, key).getOrThunk(function () {\n        return fallback(obj);\n      });\n      return bundle(v);\n    };\n    var optionAccess = function (obj, key, bundle) {\n      return bundle(get$e(obj, key));\n    };\n    var optionDefaultedAccess = function (obj, key, fallback, bundle) {\n      var opt = get$e(obj, key).map(function (val) {\n        return val === true ? fallback(obj) : val;\n      });\n      return bundle(opt);\n    };\n    var extractField = function (field, path, obj, key, prop) {\n      var bundle = function (av) {\n        return prop.extract(path.concat([key]), av);\n      };\n      var bundleAsOption = function (optValue) {\n        return optValue.fold(function () {\n          return SimpleResult.svalue(Optional.none());\n        }, function (ov) {\n          var result = prop.extract(path.concat([key]), ov);\n          return SimpleResult.map(result, Optional.some);\n        });\n      };\n      switch (field.tag) {\n      case 'required':\n        return requiredAccess(path, obj, key, bundle);\n      case 'defaultedThunk':\n        return fallbackAccess(obj, key, field.process, bundle);\n      case 'option':\n        return optionAccess(obj, key, bundleAsOption);\n      case 'defaultedOptionThunk':\n        return optionDefaultedAccess(obj, key, field.process, bundleAsOption);\n      case 'mergeWithThunk': {\n          return fallbackAccess(obj, key, constant$1({}), function (v) {\n            var result = deepMerge(field.process(obj), v);\n            return bundle(result);\n          });\n        }\n      }\n    };\n    var extractFields = function (path, obj, fields) {\n      var success = {};\n      var errors = [];\n      for (var _i = 0, fields_1 = fields; _i < fields_1.length; _i++) {\n        var field = fields_1[_i];\n        fold(field, function (key, newKey, presence, prop) {\n          var result = extractField(presence, path, obj, key, prop);\n          SimpleResult.fold(result, function (err) {\n            errors.push.apply(errors, err);\n          }, function (res) {\n            success[newKey] = res;\n          });\n        }, function (newKey, instantiator) {\n          success[newKey] = instantiator(obj);\n        });\n      }\n      return errors.length > 0 ? SimpleResult.serror(errors) : SimpleResult.svalue(success);\n    };\n    var valueThunk = function (getDelegate) {\n      var extract = function (path, val) {\n        return getDelegate().extract(path, val);\n      };\n      var toString = function () {\n        return getDelegate().toString();\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var getSetKeys = function (obj) {\n      return keys(filter$1(obj, isNonNullable));\n    };\n    var objOfOnly = function (fields) {\n      var delegate = objOf(fields);\n      var fieldNames = foldr(fields, function (acc, value) {\n        return fold(value, function (key) {\n          var _a;\n          return deepMerge(acc, (_a = {}, _a[key] = true, _a));\n        }, constant$1(acc));\n      }, {});\n      var extract = function (path, o) {\n        var keys = isBoolean(o) ? [] : getSetKeys(o);\n        var extra = filter$2(keys, function (k) {\n          return !hasNonNullableKey(fieldNames, k);\n        });\n        return extra.length === 0 ? delegate.extract(path, o) : unsupportedFields(path, extra);\n      };\n      return {\n        extract: extract,\n        toString: delegate.toString\n      };\n    };\n    var objOf = function (values) {\n      var extract = function (path, o) {\n        return extractFields(path, o, values);\n      };\n      var toString = function () {\n        var fieldStrings = map$2(values, function (value) {\n          return fold(value, function (key, _okey, _presence, prop) {\n            return key + ' -> ' + prop.toString();\n          }, function (newKey, _instantiator) {\n            return 'state(' + newKey + ')';\n          });\n        });\n        return 'obj{\\n' + fieldStrings.join('\\n') + '}';\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var arrOf = function (prop) {\n      var extract = function (path, array) {\n        var results = map$2(array, function (a, i) {\n          return prop.extract(path.concat(['[' + i + ']']), a);\n        });\n        return ResultCombine.consolidateArr(results);\n      };\n      var toString = function () {\n        return 'array(' + prop.toString() + ')';\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var oneOf = function (props) {\n      var extract = function (path, val) {\n        var errors = [];\n        for (var _i = 0, props_1 = props; _i < props_1.length; _i++) {\n          var prop = props_1[_i];\n          var res = prop.extract(path, val);\n          if (res.stype === SimpleResultType.Value) {\n            return res;\n          }\n          errors.push(res);\n        }\n        return ResultCombine.consolidateArr(errors);\n      };\n      var toString = function () {\n        return 'oneOf(' + map$2(props, function (prop) {\n          return prop.toString();\n        }).join(', ') + ')';\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var setOf$1 = function (validator, prop) {\n      var validateKeys = function (path, keys) {\n        return arrOf(value$2(validator)).extract(path, keys);\n      };\n      var extract = function (path, o) {\n        var keys$1 = keys(o);\n        var validatedKeys = validateKeys(path, keys$1);\n        return SimpleResult.bind(validatedKeys, function (validKeys) {\n          var schema = map$2(validKeys, function (vk) {\n            return field$2(vk, vk, required$2(), prop);\n          });\n          return objOf(schema).extract(path, o);\n        });\n      };\n      var toString = function () {\n        return 'setOf(' + prop.toString() + ')';\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var thunk = function (_desc, processor) {\n      var getP = cached(processor);\n      var extract = function (path, val) {\n        return getP().extract(path, val);\n      };\n      var toString = function () {\n        return getP().toString();\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var arrOfObj = compose(arrOf, objOf);\n\n    var anyValue = constant$1(anyValue$1);\n    var typedValue = function (validator, expectedType) {\n      return value$2(function (a) {\n        var actualType = typeof a;\n        return validator(a) ? SimpleResult.svalue(a) : SimpleResult.serror('Expected type: ' + expectedType + ' but got: ' + actualType);\n      });\n    };\n    var number = typedValue(isNumber, 'number');\n    var string = typedValue(isString, 'string');\n    var boolean = typedValue(isBoolean, 'boolean');\n    var functionProcessor = typedValue(isFunction, 'function');\n    var isPostMessageable = function (val) {\n      if (Object(val) !== val) {\n        return true;\n      }\n      switch ({}.toString.call(val).slice(8, -1)) {\n      case 'Boolean':\n      case 'Number':\n      case 'String':\n      case 'Date':\n      case 'RegExp':\n      case 'Blob':\n      case 'FileList':\n      case 'ImageData':\n      case 'ImageBitmap':\n      case 'ArrayBuffer':\n        return true;\n      case 'Array':\n      case 'Object':\n        return Object.keys(val).every(function (prop) {\n          return isPostMessageable(val[prop]);\n        });\n      default:\n        return false;\n      }\n    };\n    var postMessageable = value$2(function (a) {\n      if (isPostMessageable(a)) {\n        return SimpleResult.svalue(a);\n      } else {\n        return SimpleResult.serror('Expected value to be acceptable for sending via postMessage');\n      }\n    });\n\n    var chooseFrom = function (path, input, branches, ch) {\n      var fields = get$e(branches, ch);\n      return fields.fold(function () {\n        return missingBranch(path, branches, ch);\n      }, function (vp) {\n        return vp.extract(path.concat(['branch: ' + ch]), input);\n      });\n    };\n    var choose$2 = function (key, branches) {\n      var extract = function (path, input) {\n        var choice = get$e(input, key);\n        return choice.fold(function () {\n          return missingKey(path, key);\n        }, function (chosen) {\n          return chooseFrom(path, input, branches, chosen);\n        });\n      };\n      var toString = function () {\n        return 'chooseOn(' + key + '). Possible values: ' + keys(branches);\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n\n    var arrOfVal = function () {\n      return arrOf(anyValue$1);\n    };\n    var valueOf = function (validator) {\n      return value$2(function (v) {\n        return validator(v).fold(SimpleResult.serror, SimpleResult.svalue);\n      });\n    };\n    var setOf = function (validator, prop) {\n      return setOf$1(function (v) {\n        return SimpleResult.fromResult(validator(v));\n      }, prop);\n    };\n    var extractValue = function (label, prop, obj) {\n      var res = prop.extract([label], obj);\n      return SimpleResult.mapError(res, function (errs) {\n        return {\n          input: obj,\n          errors: errs\n        };\n      });\n    };\n    var asRaw = function (label, prop, obj) {\n      return SimpleResult.toResult(extractValue(label, prop, obj));\n    };\n    var getOrDie = function (extraction) {\n      return extraction.fold(function (errInfo) {\n        throw new Error(formatError(errInfo));\n      }, identity$1);\n    };\n    var asRawOrDie$1 = function (label, prop, obj) {\n      return getOrDie(asRaw(label, prop, obj));\n    };\n    var formatError = function (errInfo) {\n      return 'Errors: \\n' + formatErrors(errInfo.errors).join('\\n') + '\\n\\nInput object: ' + formatObj(errInfo.input);\n    };\n    var choose$1 = function (key, branches) {\n      return choose$2(key, map$1(branches, objOf));\n    };\n    var thunkOf = function (desc, schema) {\n      return thunk(desc, schema);\n    };\n\n    var field$1 = field$2;\n    var customField = customField$1;\n    var validateEnum = function (values) {\n      return valueOf(function (value) {\n        return contains$2(values, value) ? Result.value(value) : Result.error('Unsupported value: \"' + value + '\", choose one of \"' + values.join(', ') + '\".');\n      });\n    };\n    var required$1 = function (key) {\n      return field$1(key, key, required$2(), anyValue());\n    };\n    var requiredOf = function (key, schema) {\n      return field$1(key, key, required$2(), schema);\n    };\n    var requiredNumber = function (key) {\n      return requiredOf(key, number);\n    };\n    var requiredString = function (key) {\n      return requiredOf(key, string);\n    };\n    var requiredStringEnum = function (key, values) {\n      return field$1(key, key, required$2(), validateEnum(values));\n    };\n    var requiredBoolean = function (key) {\n      return requiredOf(key, boolean);\n    };\n    var requiredFunction = function (key) {\n      return requiredOf(key, functionProcessor);\n    };\n    var forbid = function (key, message) {\n      return field$1(key, key, asOption(), value$2(function (_v) {\n        return SimpleResult.serror('The field: ' + key + ' is forbidden. ' + message);\n      }));\n    };\n    var requiredObjOf = function (key, objSchema) {\n      return field$1(key, key, required$2(), objOf(objSchema));\n    };\n    var requiredArrayOfObj = function (key, objFields) {\n      return field$1(key, key, required$2(), arrOfObj(objFields));\n    };\n    var requiredArrayOf = function (key, schema) {\n      return field$1(key, key, required$2(), arrOf(schema));\n    };\n    var option = function (key) {\n      return field$1(key, key, asOption(), anyValue());\n    };\n    var optionOf = function (key, schema) {\n      return field$1(key, key, asOption(), schema);\n    };\n    var optionNumber = function (key) {\n      return optionOf(key, number);\n    };\n    var optionString = function (key) {\n      return optionOf(key, string);\n    };\n    var optionFunction = function (key) {\n      return optionOf(key, functionProcessor);\n    };\n    var optionArrayOf = function (key, schema) {\n      return optionOf(key, arrOf(schema));\n    };\n    var optionObjOf = function (key, objSchema) {\n      return optionOf(key, objOf(objSchema));\n    };\n    var optionObjOfOnly = function (key, objSchema) {\n      return optionOf(key, objOfOnly(objSchema));\n    };\n    var defaulted = function (key, fallback) {\n      return field$1(key, key, defaulted$1(fallback), anyValue());\n    };\n    var defaultedOf = function (key, fallback, schema) {\n      return field$1(key, key, defaulted$1(fallback), schema);\n    };\n    var defaultedNumber = function (key, fallback) {\n      return defaultedOf(key, fallback, number);\n    };\n    var defaultedString = function (key, fallback) {\n      return defaultedOf(key, fallback, string);\n    };\n    var defaultedStringEnum = function (key, fallback, values) {\n      return defaultedOf(key, fallback, validateEnum(values));\n    };\n    var defaultedBoolean = function (key, fallback) {\n      return defaultedOf(key, fallback, boolean);\n    };\n    var defaultedFunction = function (key, fallback) {\n      return defaultedOf(key, fallback, functionProcessor);\n    };\n    var defaultedPostMsg = function (key, fallback) {\n      return defaultedOf(key, fallback, postMessageable);\n    };\n    var defaultedArrayOf = function (key, fallback, schema) {\n      return defaultedOf(key, fallback, arrOf(schema));\n    };\n    var defaultedObjOf = function (key, fallback, objSchema) {\n      return defaultedOf(key, fallback, objOf(objSchema));\n    };\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var generate$7 = function (cases) {\n      if (!isArray(cases)) {\n        throw new Error('cases must be an array');\n      }\n      if (cases.length === 0) {\n        throw new Error('there must be at least one case');\n      }\n      var constructors = [];\n      var adt = {};\n      each$1(cases, function (acase, count) {\n        var keys$1 = keys(acase);\n        if (keys$1.length !== 1) {\n          throw new Error('one and only one name per case');\n        }\n        var key = keys$1[0];\n        var value = acase[key];\n        if (adt[key] !== undefined) {\n          throw new Error('duplicate key detected:' + key);\n        } else if (key === 'cata') {\n          throw new Error('cannot have a case named cata (sorry)');\n        } else if (!isArray(value)) {\n          throw new Error('case arguments must be an array');\n        }\n        constructors.push(key);\n        adt[key] = function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          var argLength = args.length;\n          if (argLength !== value.length) {\n            throw new Error('Wrong number of arguments to case ' + key + '. Expected ' + value.length + ' (' + value + '), got ' + argLength);\n          }\n          var match = function (branches) {\n            var branchKeys = keys(branches);\n            if (constructors.length !== branchKeys.length) {\n              throw new Error('Wrong number of arguments to match. Expected: ' + constructors.join(',') + '\\nActual: ' + branchKeys.join(','));\n            }\n            var allReqd = forall(constructors, function (reqKey) {\n              return contains$2(branchKeys, reqKey);\n            });\n            if (!allReqd) {\n              throw new Error('Not all branches were specified when using match. Specified: ' + branchKeys.join(', ') + '\\nRequired: ' + constructors.join(', '));\n            }\n            return branches[key].apply(null, args);\n          };\n          return {\n            fold: function () {\n              var foldArgs = [];\n              for (var _i = 0; _i < arguments.length; _i++) {\n                foldArgs[_i] = arguments[_i];\n              }\n              if (foldArgs.length !== cases.length) {\n                throw new Error('Wrong number of arguments to fold. Expected ' + cases.length + ', got ' + foldArgs.length);\n              }\n              var target = foldArgs[count];\n              return target.apply(null, args);\n            },\n            match: match,\n            log: function (label) {\n              console.log(label, {\n                constructors: constructors,\n                constructor: key,\n                params: args\n              });\n            }\n          };\n        };\n      });\n      return adt;\n    };\n    var Adt = { generate: generate$7 };\n\n    Adt.generate([\n      {\n        bothErrors: [\n          'error1',\n          'error2'\n        ]\n      },\n      {\n        firstError: [\n          'error1',\n          'value2'\n        ]\n      },\n      {\n        secondError: [\n          'value1',\n          'error2'\n        ]\n      },\n      {\n        bothValues: [\n          'value1',\n          'value2'\n        ]\n      }\n    ]);\n    var partition$1 = function (results) {\n      var errors = [];\n      var values = [];\n      each$1(results, function (result) {\n        result.fold(function (err) {\n          errors.push(err);\n        }, function (value) {\n          values.push(value);\n        });\n      });\n      return {\n        errors: errors,\n        values: values\n      };\n    };\n\n    var exclude$1 = function (obj, fields) {\n      var r = {};\n      each(obj, function (v, k) {\n        if (!contains$2(fields, k)) {\n          r[k] = v;\n        }\n      });\n      return r;\n    };\n\n    var wrap$2 = function (key, value) {\n      var _a;\n      return _a = {}, _a[key] = value, _a;\n    };\n    var wrapAll$1 = function (keyvalues) {\n      var r = {};\n      each$1(keyvalues, function (kv) {\n        r[kv.key] = kv.value;\n      });\n      return r;\n    };\n\n    var exclude = function (obj, fields) {\n      return exclude$1(obj, fields);\n    };\n    var wrap$1 = function (key, value) {\n      return wrap$2(key, value);\n    };\n    var wrapAll = function (keyvalues) {\n      return wrapAll$1(keyvalues);\n    };\n    var mergeValues = function (values, base) {\n      return values.length === 0 ? Result.value(base) : Result.value(deepMerge(base, merge$1.apply(undefined, values)));\n    };\n    var mergeErrors = function (errors) {\n      return Result.error(flatten(errors));\n    };\n    var consolidate = function (objs, base) {\n      var partitions = partition$1(objs);\n      return partitions.errors.length > 0 ? mergeErrors(partitions.errors) : mergeValues(partitions.values, base);\n    };\n\n    var ensureIsRoot = function (isRoot) {\n      return isFunction(isRoot) ? isRoot : never;\n    };\n    var ancestor$2 = function (scope, transform, isRoot) {\n      var element = scope.dom;\n      var stop = ensureIsRoot(isRoot);\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = SugarElement.fromDom(element);\n        var transformed = transform(el);\n        if (transformed.isSome()) {\n          return transformed;\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var closest$4 = function (scope, transform, isRoot) {\n      var current = transform(scope);\n      var stop = ensureIsRoot(isRoot);\n      return current.orThunk(function () {\n        return stop(scope) ? Optional.none() : ancestor$2(scope, transform, stop);\n      });\n    };\n\n    var isSource = function (component, simulatedEvent) {\n      return eq(component.element, simulatedEvent.event.target);\n    };\n\n    var defaultEventHandler = {\n      can: always,\n      abort: never,\n      run: noop\n    };\n    var nu$9 = function (parts) {\n      if (!hasNonNullableKey(parts, 'can') && !hasNonNullableKey(parts, 'abort') && !hasNonNullableKey(parts, 'run')) {\n        throw new Error('EventHandler defined by: ' + JSON.stringify(parts, null, 2) + ' does not have can, abort, or run!');\n      }\n      return __assign(__assign({}, defaultEventHandler), parts);\n    };\n    var all$2 = function (handlers, f) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return foldl(handlers, function (acc, handler) {\n          return acc && f(handler).apply(undefined, args);\n        }, true);\n      };\n    };\n    var any = function (handlers, f) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return foldl(handlers, function (acc, handler) {\n          return acc || f(handler).apply(undefined, args);\n        }, false);\n      };\n    };\n    var read$2 = function (handler) {\n      return isFunction(handler) ? {\n        can: always,\n        abort: never,\n        run: handler\n      } : handler;\n    };\n    var fuse$1 = function (handlers) {\n      var can = all$2(handlers, function (handler) {\n        return handler.can;\n      });\n      var abort = any(handlers, function (handler) {\n        return handler.abort;\n      });\n      var run = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        each$1(handlers, function (handler) {\n          handler.run.apply(undefined, args);\n        });\n      };\n      return {\n        can: can,\n        abort: abort,\n        run: run\n      };\n    };\n\n    var constant = constant$1;\n    var touchstart = constant('touchstart');\n    var touchmove = constant('touchmove');\n    var touchend = constant('touchend');\n    var touchcancel = constant('touchcancel');\n    var mousedown = constant('mousedown');\n    var mousemove = constant('mousemove');\n    var mouseout = constant('mouseout');\n    var mouseup = constant('mouseup');\n    var mouseover = constant('mouseover');\n    var focusin = constant('focusin');\n    var focusout = constant('focusout');\n    var keydown = constant('keydown');\n    var keyup = constant('keyup');\n    var input = constant('input');\n    var change = constant('change');\n    var click = constant('click');\n    var transitioncancel = constant('transitioncancel');\n    var transitionend = constant('transitionend');\n    var transitionstart = constant('transitionstart');\n    var selectstart = constant('selectstart');\n\n    var prefixName = function (name) {\n      return constant$1('alloy.' + name);\n    };\n    var alloy = { tap: prefixName('tap') };\n    var focus$4 = prefixName('focus');\n    var postBlur = prefixName('blur.post');\n    var postPaste = prefixName('paste.post');\n    var receive = prefixName('receive');\n    var execute$5 = prefixName('execute');\n    var focusItem = prefixName('focus.item');\n    var tap = alloy.tap;\n    var longpress = prefixName('longpress');\n    var sandboxClose = prefixName('sandbox.close');\n    var typeaheadCancel = prefixName('typeahead.cancel');\n    var systemInit = prefixName('system.init');\n    var documentTouchmove = prefixName('system.touchmove');\n    var documentTouchend = prefixName('system.touchend');\n    var windowScroll = prefixName('system.scroll');\n    var windowResize = prefixName('system.resize');\n    var attachedToDom = prefixName('system.attached');\n    var detachedFromDom = prefixName('system.detached');\n    var dismissRequested = prefixName('system.dismissRequested');\n    var repositionRequested = prefixName('system.repositionRequested');\n    var focusShifted = prefixName('focusmanager.shifted');\n    var slotVisibility = prefixName('slotcontainer.visibility');\n    var changeTab = prefixName('change.tab');\n    var dismissTab = prefixName('dismiss.tab');\n    var highlight$1 = prefixName('highlight');\n    var dehighlight$1 = prefixName('dehighlight');\n\n    var emit = function (component, event) {\n      dispatchWith(component, component.element, event, {});\n    };\n    var emitWith = function (component, event, properties) {\n      dispatchWith(component, component.element, event, properties);\n    };\n    var emitExecute = function (component) {\n      emit(component, execute$5());\n    };\n    var dispatch = function (component, target, event) {\n      dispatchWith(component, target, event, {});\n    };\n    var dispatchWith = function (component, target, event, properties) {\n      var data = __assign({ target: target }, properties);\n      component.getSystem().triggerEvent(event, target, data);\n    };\n    var dispatchEvent = function (component, target, event, simulatedEvent) {\n      component.getSystem().triggerEvent(event, target, simulatedEvent.event);\n    };\n\n    var derive$2 = function (configs) {\n      return wrapAll(configs);\n    };\n    var abort = function (name, predicate) {\n      return {\n        key: name,\n        value: nu$9({ abort: predicate })\n      };\n    };\n    var can = function (name, predicate) {\n      return {\n        key: name,\n        value: nu$9({ can: predicate })\n      };\n    };\n    var preventDefault = function (name) {\n      return {\n        key: name,\n        value: nu$9({\n          run: function (component, simulatedEvent) {\n            simulatedEvent.event.prevent();\n          }\n        })\n      };\n    };\n    var run$1 = function (name, handler) {\n      return {\n        key: name,\n        value: nu$9({ run: handler })\n      };\n    };\n    var runActionExtra = function (name, action, extra) {\n      return {\n        key: name,\n        value: nu$9({\n          run: function (component, simulatedEvent) {\n            action.apply(undefined, [\n              component,\n              simulatedEvent\n            ].concat(extra));\n          }\n        })\n      };\n    };\n    var runOnName = function (name) {\n      return function (handler) {\n        return run$1(name, handler);\n      };\n    };\n    var runOnSourceName = function (name) {\n      return function (handler) {\n        return {\n          key: name,\n          value: nu$9({\n            run: function (component, simulatedEvent) {\n              if (isSource(component, simulatedEvent)) {\n                handler(component, simulatedEvent);\n              }\n            }\n          })\n        };\n      };\n    };\n    var redirectToUid = function (name, uid) {\n      return run$1(name, function (component, simulatedEvent) {\n        component.getSystem().getByUid(uid).each(function (redirectee) {\n          dispatchEvent(redirectee, redirectee.element, name, simulatedEvent);\n        });\n      });\n    };\n    var redirectToPart = function (name, detail, partName) {\n      var uid = detail.partUids[partName];\n      return redirectToUid(name, uid);\n    };\n    var runWithTarget = function (name, f) {\n      return run$1(name, function (component, simulatedEvent) {\n        var ev = simulatedEvent.event;\n        var target = component.getSystem().getByDom(ev.target).getOrThunk(function () {\n          var closest = closest$4(ev.target, function (el) {\n            return component.getSystem().getByDom(el).toOptional();\n          }, never);\n          return closest.getOr(component);\n        });\n        f(component, target, simulatedEvent);\n      });\n    };\n    var cutter = function (name) {\n      return run$1(name, function (component, simulatedEvent) {\n        simulatedEvent.cut();\n      });\n    };\n    var stopper = function (name) {\n      return run$1(name, function (component, simulatedEvent) {\n        simulatedEvent.stop();\n      });\n    };\n    var runOnSource = function (name, f) {\n      return runOnSourceName(name)(f);\n    };\n    var runOnAttached = runOnSourceName(attachedToDom());\n    var runOnDetached = runOnSourceName(detachedFromDom());\n    var runOnInit = runOnSourceName(systemInit());\n    var runOnExecute$1 = runOnName(execute$5());\n\n    var fromHtml$1 = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      return children(SugarElement.fromDom(div));\n    };\n\n    var get$7 = function (element) {\n      return element.dom.innerHTML;\n    };\n    var set$5 = function (element, content) {\n      var owner = owner$4(element);\n      var docDom = owner.dom;\n      var fragment = SugarElement.fromDom(docDom.createDocumentFragment());\n      var contentElements = fromHtml$1(content, docDom);\n      append$1(fragment, contentElements);\n      empty(element);\n      append$2(element, fragment);\n    };\n    var getOuter = function (element) {\n      var container = SugarElement.fromTag('div');\n      var clone = SugarElement.fromDom(element.dom.cloneNode(true));\n      append$2(container, clone);\n      return get$7(container);\n    };\n\n    var clone$2 = function (original, isDeep) {\n      return SugarElement.fromDom(original.dom.cloneNode(isDeep));\n    };\n    var shallow = function (original) {\n      return clone$2(original, false);\n    };\n\n    var getHtml = function (element) {\n      if (isShadowRoot(element)) {\n        return '#shadow-root';\n      } else {\n        var clone = shallow(element);\n        return getOuter(clone);\n      }\n    };\n\n    var element = function (elem) {\n      return getHtml(elem);\n    };\n\n    var isRecursive = function (component, originator, target) {\n      return eq(originator, component.element) && !eq(originator, target);\n    };\n    var events$i = derive$2([can(focus$4(), function (component, simulatedEvent) {\n        var event = simulatedEvent.event;\n        var originator = event.originator;\n        var target = event.target;\n        if (isRecursive(component, originator, target)) {\n          console.warn(focus$4() + ' did not get interpreted by the desired target. ' + '\\nOriginator: ' + element(originator) + '\\nTarget: ' + element(target) + '\\nCheck the ' + focus$4() + ' event handlers');\n          return false;\n        } else {\n          return true;\n        }\n      })]);\n\n    var DefaultEvents = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$i\n    });\n\n    var unique = 0;\n    var generate$6 = function (prefix) {\n      var date = new Date();\n      var time = date.getTime();\n      var random = Math.floor(Math.random() * 1000000000);\n      unique++;\n      return prefix + '_' + random + unique + String(time);\n    };\n\n    var prefix$1 = constant$1('alloy-id-');\n    var idAttr$1 = constant$1('data-alloy-id');\n\n    var prefix = prefix$1();\n    var idAttr = idAttr$1();\n    var write = function (label, elem) {\n      var id = generate$6(prefix + label);\n      writeOnly(elem, id);\n      return id;\n    };\n    var writeOnly = function (elem, uid) {\n      Object.defineProperty(elem.dom, idAttr, {\n        value: uid,\n        writable: true\n      });\n    };\n    var read$1 = function (elem) {\n      var id = isElement$2(elem) ? elem.dom[idAttr] : null;\n      return Optional.from(id);\n    };\n    var generate$5 = function (prefix) {\n      return generate$6(prefix);\n    };\n\n    var make$8 = identity$1;\n\n    var NoContextApi = function (getComp) {\n      var getMessage = function (event) {\n        return 'The component must be in a context to execute: ' + event + (getComp ? '\\n' + element(getComp().element) + ' is not in context.' : '');\n      };\n      var fail = function (event) {\n        return function () {\n          throw new Error(getMessage(event));\n        };\n      };\n      var warn = function (event) {\n        return function () {\n          console.warn(getMessage(event));\n        };\n      };\n      return {\n        debugInfo: constant$1('fake'),\n        triggerEvent: warn('triggerEvent'),\n        triggerFocus: warn('triggerFocus'),\n        triggerEscape: warn('triggerEscape'),\n        broadcast: warn('broadcast'),\n        broadcastOn: warn('broadcastOn'),\n        broadcastEvent: warn('broadcastEvent'),\n        build: fail('build'),\n        addToWorld: fail('addToWorld'),\n        removeFromWorld: fail('removeFromWorld'),\n        addToGui: fail('addToGui'),\n        removeFromGui: fail('removeFromGui'),\n        getByUid: fail('getByUid'),\n        getByDom: fail('getByDom'),\n        isConnected: never\n      };\n    };\n    var singleton$1 = NoContextApi();\n\n    var markAsBehaviourApi = function (f, apiName, apiFunction) {\n      var delegate = apiFunction.toString();\n      var endIndex = delegate.indexOf(')') + 1;\n      var openBracketIndex = delegate.indexOf('(');\n      var parameters = delegate.substring(openBracketIndex + 1, endIndex - 1).split(/,\\s*/);\n      f.toFunctionAnnotation = function () {\n        return {\n          name: apiName,\n          parameters: cleanParameters(parameters.slice(0, 1).concat(parameters.slice(3)))\n        };\n      };\n      return f;\n    };\n    var cleanParameters = function (parameters) {\n      return map$2(parameters, function (p) {\n        return endsWith(p, '/*') ? p.substring(0, p.length - '/*'.length) : p;\n      });\n    };\n    var markAsExtraApi = function (f, extraName) {\n      var delegate = f.toString();\n      var endIndex = delegate.indexOf(')') + 1;\n      var openBracketIndex = delegate.indexOf('(');\n      var parameters = delegate.substring(openBracketIndex + 1, endIndex - 1).split(/,\\s*/);\n      f.toFunctionAnnotation = function () {\n        return {\n          name: extraName,\n          parameters: cleanParameters(parameters)\n        };\n      };\n      return f;\n    };\n    var markAsSketchApi = function (f, apiFunction) {\n      var delegate = apiFunction.toString();\n      var endIndex = delegate.indexOf(')') + 1;\n      var openBracketIndex = delegate.indexOf('(');\n      var parameters = delegate.substring(openBracketIndex + 1, endIndex - 1).split(/,\\s*/);\n      f.toFunctionAnnotation = function () {\n        return {\n          name: 'OVERRIDE',\n          parameters: cleanParameters(parameters.slice(1))\n        };\n      };\n      return f;\n    };\n\n    var premadeTag = generate$6('alloy-premade');\n    var premade$1 = function (comp) {\n      return wrap$1(premadeTag, comp);\n    };\n    var getPremade = function (spec) {\n      return get$e(spec, premadeTag);\n    };\n    var makeApi = function (f) {\n      return markAsSketchApi(function (component) {\n        var rest = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n          rest[_i - 1] = arguments[_i];\n        }\n        return f.apply(void 0, __spreadArray([\n          component.getApis(),\n          component\n        ], rest, false));\n      }, f);\n    };\n\n    var NoState = {\n      init: function () {\n        return nu$8({ readState: constant$1('No State required') });\n      }\n    };\n    var nu$8 = function (spec) {\n      return spec;\n    };\n\n    var generateFrom$1 = function (spec, all) {\n      var schema = map$2(all, function (a) {\n        return optionObjOf(a.name(), [\n          required$1('config'),\n          defaulted('state', NoState)\n        ]);\n      });\n      var validated = asRaw('component.behaviours', objOf(schema), spec.behaviours).fold(function (errInfo) {\n        throw new Error(formatError(errInfo) + '\\nComplete spec:\\n' + JSON.stringify(spec, null, 2));\n      }, identity$1);\n      return {\n        list: all,\n        data: map$1(validated, function (optBlobThunk) {\n          var output = optBlobThunk.map(function (blob) {\n            return {\n              config: blob.config,\n              state: blob.state.init(blob.config)\n            };\n          });\n          return constant$1(output);\n        })\n      };\n    };\n    var getBehaviours$3 = function (bData) {\n      return bData.list;\n    };\n    var getData$2 = function (bData) {\n      return bData.data;\n    };\n\n    var byInnerKey = function (data, tuple) {\n      var r = {};\n      each(data, function (detail, key) {\n        each(detail, function (value, indexKey) {\n          var chain = get$e(r, indexKey).getOr([]);\n          r[indexKey] = chain.concat([tuple(key, value)]);\n        });\n      });\n      return r;\n    };\n\n    var nu$7 = function (s) {\n      return {\n        classes: isUndefined(s.classes) ? [] : s.classes,\n        attributes: isUndefined(s.attributes) ? {} : s.attributes,\n        styles: isUndefined(s.styles) ? {} : s.styles\n      };\n    };\n    var merge = function (defnA, mod) {\n      return __assign(__assign({}, defnA), {\n        attributes: __assign(__assign({}, defnA.attributes), mod.attributes),\n        styles: __assign(__assign({}, defnA.styles), mod.styles),\n        classes: defnA.classes.concat(mod.classes)\n      });\n    };\n\n    var combine$2 = function (info, baseMod, behaviours, base) {\n      var modsByBehaviour = __assign({}, baseMod);\n      each$1(behaviours, function (behaviour) {\n        modsByBehaviour[behaviour.name()] = behaviour.exhibit(info, base);\n      });\n      var byAspect = byInnerKey(modsByBehaviour, function (name, modification) {\n        return {\n          name: name,\n          modification: modification\n        };\n      });\n      var combineObjects = function (objects) {\n        return foldr(objects, function (b, a) {\n          return __assign(__assign({}, a.modification), b);\n        }, {});\n      };\n      var combinedClasses = foldr(byAspect.classes, function (b, a) {\n        return a.modification.concat(b);\n      }, []);\n      var combinedAttributes = combineObjects(byAspect.attributes);\n      var combinedStyles = combineObjects(byAspect.styles);\n      return nu$7({\n        classes: combinedClasses,\n        attributes: combinedAttributes,\n        styles: combinedStyles\n      });\n    };\n\n    var sortKeys = function (label, keyName, array, order) {\n      try {\n        var sorted = sort(array, function (a, b) {\n          var aKey = a[keyName];\n          var bKey = b[keyName];\n          var aIndex = order.indexOf(aKey);\n          var bIndex = order.indexOf(bKey);\n          if (aIndex === -1) {\n            throw new Error('The ordering for ' + label + ' does not have an entry for ' + aKey + '.\\nOrder specified: ' + JSON.stringify(order, null, 2));\n          }\n          if (bIndex === -1) {\n            throw new Error('The ordering for ' + label + ' does not have an entry for ' + bKey + '.\\nOrder specified: ' + JSON.stringify(order, null, 2));\n          }\n          if (aIndex < bIndex) {\n            return -1;\n          } else if (bIndex < aIndex) {\n            return 1;\n          } else {\n            return 0;\n          }\n        });\n        return Result.value(sorted);\n      } catch (err) {\n        return Result.error([err]);\n      }\n    };\n\n    var uncurried = function (handler, purpose) {\n      return {\n        handler: handler,\n        purpose: purpose\n      };\n    };\n    var curried = function (handler, purpose) {\n      return {\n        cHandler: handler,\n        purpose: purpose\n      };\n    };\n    var curryArgs = function (descHandler, extraArgs) {\n      return curried(curry.apply(undefined, [descHandler.handler].concat(extraArgs)), descHandler.purpose);\n    };\n    var getCurried = function (descHandler) {\n      return descHandler.cHandler;\n    };\n\n    var behaviourTuple = function (name, handler) {\n      return {\n        name: name,\n        handler: handler\n      };\n    };\n    var nameToHandlers = function (behaviours, info) {\n      var r = {};\n      each$1(behaviours, function (behaviour) {\n        r[behaviour.name()] = behaviour.handlers(info);\n      });\n      return r;\n    };\n    var groupByEvents = function (info, behaviours, base) {\n      var behaviourEvents = __assign(__assign({}, base), nameToHandlers(behaviours, info));\n      return byInnerKey(behaviourEvents, behaviourTuple);\n    };\n    var combine$1 = function (info, eventOrder, behaviours, base) {\n      var byEventName = groupByEvents(info, behaviours, base);\n      return combineGroups(byEventName, eventOrder);\n    };\n    var assemble = function (rawHandler) {\n      var handler = read$2(rawHandler);\n      return function (component, simulatedEvent) {\n        var rest = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n          rest[_i - 2] = arguments[_i];\n        }\n        var args = [\n          component,\n          simulatedEvent\n        ].concat(rest);\n        if (handler.abort.apply(undefined, args)) {\n          simulatedEvent.stop();\n        } else if (handler.can.apply(undefined, args)) {\n          handler.run.apply(undefined, args);\n        }\n      };\n    };\n    var missingOrderError = function (eventName, tuples) {\n      return Result.error(['The event (' + eventName + ') has more than one behaviour that listens to it.\\nWhen this occurs, you must ' + 'specify an event ordering for the behaviours in your spec (e.g. [ \"listing\", \"toggling\" ]).\\nThe behaviours that ' + 'can trigger it are: ' + JSON.stringify(map$2(tuples, function (c) {\n          return c.name;\n        }), null, 2)]);\n    };\n    var fuse = function (tuples, eventOrder, eventName) {\n      var order = eventOrder[eventName];\n      if (!order) {\n        return missingOrderError(eventName, tuples);\n      } else {\n        return sortKeys('Event: ' + eventName, 'name', tuples, order).map(function (sortedTuples) {\n          var handlers = map$2(sortedTuples, function (tuple) {\n            return tuple.handler;\n          });\n          return fuse$1(handlers);\n        });\n      }\n    };\n    var combineGroups = function (byEventName, eventOrder) {\n      var r = mapToArray(byEventName, function (tuples, eventName) {\n        var combined = tuples.length === 1 ? Result.value(tuples[0].handler) : fuse(tuples, eventOrder, eventName);\n        return combined.map(function (handler) {\n          var assembled = assemble(handler);\n          var purpose = tuples.length > 1 ? filter$2(eventOrder[eventName], function (o) {\n            return exists(tuples, function (t) {\n              return t.name === o;\n            });\n          }).join(' > ') : tuples[0].name;\n          return wrap$1(eventName, uncurried(assembled, purpose));\n        });\n      });\n      return consolidate(r, {});\n    };\n\n    var _a$2;\n    var baseBehaviour = 'alloy.base.behaviour';\n    var schema$z = objOf([\n      field$1('dom', 'dom', required$2(), objOf([\n        required$1('tag'),\n        defaulted('styles', {}),\n        defaulted('classes', []),\n        defaulted('attributes', {}),\n        option('value'),\n        option('innerHtml')\n      ])),\n      required$1('components'),\n      required$1('uid'),\n      defaulted('events', {}),\n      defaulted('apis', {}),\n      field$1('eventOrder', 'eventOrder', mergeWith((_a$2 = {}, _a$2[execute$5()] = [\n        'disabling',\n        baseBehaviour,\n        'toggling',\n        'typeaheadevents'\n      ], _a$2[focus$4()] = [\n        baseBehaviour,\n        'focusing',\n        'keying'\n      ], _a$2[systemInit()] = [\n        baseBehaviour,\n        'disabling',\n        'toggling',\n        'representing'\n      ], _a$2[input()] = [\n        baseBehaviour,\n        'representing',\n        'streaming',\n        'invalidating'\n      ], _a$2[detachedFromDom()] = [\n        baseBehaviour,\n        'representing',\n        'item-events',\n        'tooltipping'\n      ], _a$2[mousedown()] = [\n        'focusing',\n        baseBehaviour,\n        'item-type-events'\n      ], _a$2[touchstart()] = [\n        'focusing',\n        baseBehaviour,\n        'item-type-events'\n      ], _a$2[mouseover()] = [\n        'item-type-events',\n        'tooltipping'\n      ], _a$2[receive()] = [\n        'receiving',\n        'reflecting',\n        'tooltipping'\n      ], _a$2)), anyValue()),\n      option('domModification')\n    ]);\n    var toInfo = function (spec) {\n      return asRaw('custom.definition', schema$z, spec);\n    };\n    var toDefinition = function (detail) {\n      return __assign(__assign({}, detail.dom), {\n        uid: detail.uid,\n        domChildren: map$2(detail.components, function (comp) {\n          return comp.element;\n        })\n      });\n    };\n    var toModification = function (detail) {\n      return detail.domModification.fold(function () {\n        return nu$7({});\n      }, nu$7);\n    };\n    var toEvents = function (info) {\n      return info.events;\n    };\n\n    var read = function (element, attr) {\n      var value = get$d(element, attr);\n      return value === undefined || value === '' ? [] : value.split(' ');\n    };\n    var add$4 = function (element, attr, id) {\n      var old = read(element, attr);\n      var nu = old.concat([id]);\n      set$8(element, attr, nu.join(' '));\n      return true;\n    };\n    var remove$4 = function (element, attr, id) {\n      var nu = filter$2(read(element, attr), function (v) {\n        return v !== id;\n      });\n      if (nu.length > 0) {\n        set$8(element, attr, nu.join(' '));\n      } else {\n        remove$7(element, attr);\n      }\n      return false;\n    };\n\n    var supports = function (element) {\n      return element.dom.classList !== undefined;\n    };\n    var get$6 = function (element) {\n      return read(element, 'class');\n    };\n    var add$3 = function (element, clazz) {\n      return add$4(element, 'class', clazz);\n    };\n    var remove$3 = function (element, clazz) {\n      return remove$4(element, 'class', clazz);\n    };\n\n    var add$2 = function (element, clazz) {\n      if (supports(element)) {\n        element.dom.classList.add(clazz);\n      } else {\n        add$3(element, clazz);\n      }\n    };\n    var cleanClass = function (element) {\n      var classList = supports(element) ? element.dom.classList : get$6(element);\n      if (classList.length === 0) {\n        remove$7(element, 'class');\n      }\n    };\n    var remove$2 = function (element, clazz) {\n      if (supports(element)) {\n        var classList = element.dom.classList;\n        classList.remove(clazz);\n      } else {\n        remove$3(element, clazz);\n      }\n      cleanClass(element);\n    };\n    var has = function (element, clazz) {\n      return supports(element) && element.dom.classList.contains(clazz);\n    };\n\n    var add$1 = function (element, classes) {\n      each$1(classes, function (x) {\n        add$2(element, x);\n      });\n    };\n    var remove$1 = function (element, classes) {\n      each$1(classes, function (x) {\n        remove$2(element, x);\n      });\n    };\n    var hasAll = function (element, classes) {\n      return forall(classes, function (clazz) {\n        return has(element, clazz);\n      });\n    };\n\n    var get$5 = function (element) {\n      return element.dom.value;\n    };\n    var set$4 = function (element, value) {\n      if (value === undefined) {\n        throw new Error('Value.set was undefined');\n      }\n      element.dom.value = value;\n    };\n\n    var renderToDom = function (definition) {\n      var subject = SugarElement.fromTag(definition.tag);\n      setAll$1(subject, definition.attributes);\n      add$1(subject, definition.classes);\n      setAll(subject, definition.styles);\n      definition.innerHtml.each(function (html) {\n        return set$5(subject, html);\n      });\n      var children = definition.domChildren;\n      append$1(subject, children);\n      definition.value.each(function (value) {\n        set$4(subject, value);\n      });\n      if (!definition.uid) {\n        debugger;\n      }\n      writeOnly(subject, definition.uid);\n      return subject;\n    };\n\n    var getBehaviours$2 = function (spec) {\n      var behaviours = get$e(spec, 'behaviours').getOr({});\n      return bind$3(keys(behaviours), function (name) {\n        var behaviour = behaviours[name];\n        return isNonNullable(behaviour) ? [behaviour.me] : [];\n      });\n    };\n    var generateFrom = function (spec, all) {\n      return generateFrom$1(spec, all);\n    };\n    var generate$4 = function (spec) {\n      var all = getBehaviours$2(spec);\n      return generateFrom(spec, all);\n    };\n\n    var getDomDefinition = function (info, bList, bData) {\n      var definition = toDefinition(info);\n      var infoModification = toModification(info);\n      var baseModification = { 'alloy.base.modification': infoModification };\n      var modification = bList.length > 0 ? combine$2(bData, baseModification, bList, definition) : infoModification;\n      return merge(definition, modification);\n    };\n    var getEvents = function (info, bList, bData) {\n      var baseEvents = { 'alloy.base.behaviour': toEvents(info) };\n      return combine$1(bData, info.eventOrder, bList, baseEvents).getOrDie();\n    };\n    var build$2 = function (spec) {\n      var getMe = function () {\n        return me;\n      };\n      var systemApi = Cell(singleton$1);\n      var info = getOrDie(toInfo(spec));\n      var bBlob = generate$4(spec);\n      var bList = getBehaviours$3(bBlob);\n      var bData = getData$2(bBlob);\n      var modDefinition = getDomDefinition(info, bList, bData);\n      var item = renderToDom(modDefinition);\n      var events = getEvents(info, bList, bData);\n      var subcomponents = Cell(info.components);\n      var connect = function (newApi) {\n        systemApi.set(newApi);\n      };\n      var disconnect = function () {\n        systemApi.set(NoContextApi(getMe));\n      };\n      var syncComponents = function () {\n        var children$1 = children(item);\n        var subs = bind$3(children$1, function (child) {\n          return systemApi.get().getByDom(child).fold(function () {\n            return [];\n          }, pure$2);\n        });\n        subcomponents.set(subs);\n      };\n      var config = function (behaviour) {\n        var b = bData;\n        var f = isFunction(b[behaviour.name()]) ? b[behaviour.name()] : function () {\n          throw new Error('Could not find ' + behaviour.name() + ' in ' + JSON.stringify(spec, null, 2));\n        };\n        return f();\n      };\n      var hasConfigured = function (behaviour) {\n        return isFunction(bData[behaviour.name()]);\n      };\n      var getApis = function () {\n        return info.apis;\n      };\n      var readState = function (behaviourName) {\n        return bData[behaviourName]().map(function (b) {\n          return b.state.readState();\n        }).getOr('not enabled');\n      };\n      var me = {\n        uid: spec.uid,\n        getSystem: systemApi.get,\n        config: config,\n        hasConfigured: hasConfigured,\n        spec: spec,\n        readState: readState,\n        getApis: getApis,\n        connect: connect,\n        disconnect: disconnect,\n        element: item,\n        syncComponents: syncComponents,\n        components: subcomponents.get,\n        events: events\n      };\n      return me;\n    };\n\n    var buildSubcomponents = function (spec) {\n      var components = get$e(spec, 'components').getOr([]);\n      return map$2(components, build$1);\n    };\n    var buildFromSpec = function (userSpec) {\n      var _a = make$8(userSpec), specEvents = _a.events, spec = __rest(_a, ['events']);\n      var components = buildSubcomponents(spec);\n      var completeSpec = __assign(__assign({}, spec), {\n        events: __assign(__assign({}, DefaultEvents), specEvents),\n        components: components\n      });\n      return Result.value(build$2(completeSpec));\n    };\n    var text$1 = function (textContent) {\n      var element = SugarElement.fromText(textContent);\n      return external$2({ element: element });\n    };\n    var external$2 = function (spec) {\n      var extSpec = asRawOrDie$1('external.component', objOfOnly([\n        required$1('element'),\n        option('uid')\n      ]), spec);\n      var systemApi = Cell(NoContextApi());\n      var connect = function (newApi) {\n        systemApi.set(newApi);\n      };\n      var disconnect = function () {\n        systemApi.set(NoContextApi(function () {\n          return me;\n        }));\n      };\n      var uid = extSpec.uid.getOrThunk(function () {\n        return generate$5('external');\n      });\n      writeOnly(extSpec.element, uid);\n      var me = {\n        uid: uid,\n        getSystem: systemApi.get,\n        config: Optional.none,\n        hasConfigured: never,\n        connect: connect,\n        disconnect: disconnect,\n        getApis: function () {\n          return {};\n        },\n        element: extSpec.element,\n        spec: spec,\n        readState: constant$1('No state'),\n        syncComponents: noop,\n        components: constant$1([]),\n        events: {}\n      };\n      return premade$1(me);\n    };\n    var uids = generate$5;\n    var isSketchSpec$1 = function (spec) {\n      return has$2(spec, 'uid');\n    };\n    var build$1 = function (spec) {\n      return getPremade(spec).getOrThunk(function () {\n        var userSpecWithUid = isSketchSpec$1(spec) ? spec : __assign({ uid: uids('') }, spec);\n        return buildFromSpec(userSpecWithUid).getOrDie();\n      });\n    };\n    var premade = premade$1;\n\n    function ClosestOrAncestor (is, ancestor, scope, a, isRoot) {\n      if (is(scope, a)) {\n        return Optional.some(scope);\n      } else if (isFunction(isRoot) && isRoot(scope)) {\n        return Optional.none();\n      } else {\n        return ancestor(scope, a, isRoot);\n      }\n    }\n\n    var ancestor$1 = function (scope, predicate, isRoot) {\n      var element = scope.dom;\n      var stop = isFunction(isRoot) ? isRoot : never;\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = SugarElement.fromDom(element);\n        if (predicate(el)) {\n          return Optional.some(el);\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var closest$3 = function (scope, predicate, isRoot) {\n      var is = function (s, test) {\n        return test(s);\n      };\n      return ClosestOrAncestor(is, ancestor$1, scope, predicate, isRoot);\n    };\n    var child$1 = function (scope, predicate) {\n      var pred = function (node) {\n        return predicate(SugarElement.fromDom(node));\n      };\n      var result = find$5(scope.dom.childNodes, pred);\n      return result.map(SugarElement.fromDom);\n    };\n    var descendant$1 = function (scope, predicate) {\n      var descend = function (node) {\n        for (var i = 0; i < node.childNodes.length; i++) {\n          var child_1 = SugarElement.fromDom(node.childNodes[i]);\n          if (predicate(child_1)) {\n            return Optional.some(child_1);\n          }\n          var res = descend(node.childNodes[i]);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Optional.none();\n      };\n      return descend(scope.dom);\n    };\n\n    var closest$2 = function (scope, predicate, isRoot) {\n      return closest$3(scope, predicate, isRoot).isSome();\n    };\n\n    var ancestor = function (scope, selector, isRoot) {\n      return ancestor$1(scope, function (e) {\n        return is(e, selector);\n      }, isRoot);\n    };\n    var child = function (scope, selector) {\n      return child$1(scope, function (e) {\n        return is(e, selector);\n      });\n    };\n    var descendant = function (scope, selector) {\n      return one(selector, scope);\n    };\n    var closest$1 = function (scope, selector, isRoot) {\n      var is$1 = function (element, selector) {\n        return is(element, selector);\n      };\n      return ClosestOrAncestor(is$1, ancestor, scope, selector, isRoot);\n    };\n\n    var find$1 = function (queryElem) {\n      var dependent = closest$3(queryElem, function (elem) {\n        if (!isElement$2(elem)) {\n          return false;\n        }\n        var id = get$d(elem, 'id');\n        return id !== undefined && id.indexOf('aria-owns') > -1;\n      });\n      return dependent.bind(function (dep) {\n        var id = get$d(dep, 'id');\n        var dos = getRootNode(dep);\n        return descendant(dos, '[aria-owns=\"' + id + '\"]');\n      });\n    };\n    var manager = function () {\n      var ariaId = generate$6('aria-owns');\n      var link = function (elem) {\n        set$8(elem, 'aria-owns', ariaId);\n      };\n      var unlink = function (elem) {\n        remove$7(elem, 'aria-owns');\n      };\n      return {\n        id: ariaId,\n        link: link,\n        unlink: unlink\n      };\n    };\n\n    var isAriaPartOf = function (component, queryElem) {\n      return find$1(queryElem).exists(function (owner) {\n        return isPartOf$1(component, owner);\n      });\n    };\n    var isPartOf$1 = function (component, queryElem) {\n      return closest$2(queryElem, function (el) {\n        return eq(el, component.element);\n      }, never) || isAriaPartOf(component, queryElem);\n    };\n\n    var unknown = 'unknown';\n    var EventConfiguration;\n    (function (EventConfiguration) {\n      EventConfiguration[EventConfiguration['STOP'] = 0] = 'STOP';\n      EventConfiguration[EventConfiguration['NORMAL'] = 1] = 'NORMAL';\n      EventConfiguration[EventConfiguration['LOGGING'] = 2] = 'LOGGING';\n    }(EventConfiguration || (EventConfiguration = {})));\n    var eventConfig = Cell({});\n    var makeEventLogger = function (eventName, initialTarget) {\n      var sequence = [];\n      var startTime = new Date().getTime();\n      return {\n        logEventCut: function (_name, target, purpose) {\n          sequence.push({\n            outcome: 'cut',\n            target: target,\n            purpose: purpose\n          });\n        },\n        logEventStopped: function (_name, target, purpose) {\n          sequence.push({\n            outcome: 'stopped',\n            target: target,\n            purpose: purpose\n          });\n        },\n        logNoParent: function (_name, target, purpose) {\n          sequence.push({\n            outcome: 'no-parent',\n            target: target,\n            purpose: purpose\n          });\n        },\n        logEventNoHandlers: function (_name, target) {\n          sequence.push({\n            outcome: 'no-handlers-left',\n            target: target\n          });\n        },\n        logEventResponse: function (_name, target, purpose) {\n          sequence.push({\n            outcome: 'response',\n            purpose: purpose,\n            target: target\n          });\n        },\n        write: function () {\n          var finishTime = new Date().getTime();\n          if (contains$2([\n              'mousemove',\n              'mouseover',\n              'mouseout',\n              systemInit()\n            ], eventName)) {\n            return;\n          }\n          console.log(eventName, {\n            event: eventName,\n            time: finishTime - startTime,\n            target: initialTarget.dom,\n            sequence: map$2(sequence, function (s) {\n              if (!contains$2([\n                  'cut',\n                  'stopped',\n                  'response'\n                ], s.outcome)) {\n                return s.outcome;\n              } else {\n                return '{' + s.purpose + '} ' + s.outcome + ' at (' + element(s.target) + ')';\n              }\n            })\n          });\n        }\n      };\n    };\n    var processEvent = function (eventName, initialTarget, f) {\n      var status = get$e(eventConfig.get(), eventName).orThunk(function () {\n        var patterns = keys(eventConfig.get());\n        return findMap(patterns, function (p) {\n          return eventName.indexOf(p) > -1 ? Optional.some(eventConfig.get()[p]) : Optional.none();\n        });\n      }).getOr(EventConfiguration.NORMAL);\n      switch (status) {\n      case EventConfiguration.NORMAL:\n        return f(noLogger());\n      case EventConfiguration.LOGGING: {\n          var logger = makeEventLogger(eventName, initialTarget);\n          var output = f(logger);\n          logger.write();\n          return output;\n        }\n      case EventConfiguration.STOP:\n        return true;\n      }\n    };\n    var path = [\n      'alloy/data/Fields',\n      'alloy/debugging/Debugging'\n    ];\n    var getTrace = function () {\n      var err = new Error();\n      if (err.stack !== undefined) {\n        var lines = err.stack.split('\\n');\n        return find$5(lines, function (line) {\n          return line.indexOf('alloy') > 0 && !exists(path, function (p) {\n            return line.indexOf(p) > -1;\n          });\n        }).getOr(unknown);\n      } else {\n        return unknown;\n      }\n    };\n    var ignoreEvent = {\n      logEventCut: noop,\n      logEventStopped: noop,\n      logNoParent: noop,\n      logEventNoHandlers: noop,\n      logEventResponse: noop,\n      write: noop\n    };\n    var monitorEvent = function (eventName, initialTarget, f) {\n      return processEvent(eventName, initialTarget, f);\n    };\n    var noLogger = constant$1(ignoreEvent);\n\n    var menuFields = constant$1([\n      required$1('menu'),\n      required$1('selectedMenu')\n    ]);\n    var itemFields = constant$1([\n      required$1('item'),\n      required$1('selectedItem')\n    ]);\n    constant$1(objOf(itemFields().concat(menuFields())));\n    var itemSchema$3 = constant$1(objOf(itemFields()));\n\n    var _initSize = requiredObjOf('initSize', [\n      required$1('numColumns'),\n      required$1('numRows')\n    ]);\n    var itemMarkers = function () {\n      return requiredOf('markers', itemSchema$3());\n    };\n    var tieredMenuMarkers = function () {\n      return requiredObjOf('markers', [required$1('backgroundMenu')].concat(menuFields()).concat(itemFields()));\n    };\n    var markers$1 = function (required) {\n      return requiredObjOf('markers', map$2(required, required$1));\n    };\n    var onPresenceHandler = function (label, fieldName, presence) {\n      getTrace();\n      return field$1(fieldName, fieldName, presence, valueOf(function (f) {\n        return Result.value(function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          return f.apply(undefined, args);\n        });\n      }));\n    };\n    var onHandler = function (fieldName) {\n      return onPresenceHandler('onHandler', fieldName, defaulted$1(noop));\n    };\n    var onKeyboardHandler = function (fieldName) {\n      return onPresenceHandler('onKeyboardHandler', fieldName, defaulted$1(Optional.none));\n    };\n    var onStrictHandler = function (fieldName) {\n      return onPresenceHandler('onHandler', fieldName, required$2());\n    };\n    var onStrictKeyboardHandler = function (fieldName) {\n      return onPresenceHandler('onKeyboardHandler', fieldName, required$2());\n    };\n    var output$1 = function (name, value) {\n      return customField(name, constant$1(value));\n    };\n    var snapshot = function (name) {\n      return customField(name, identity$1);\n    };\n    var initSize = constant$1(_initSize);\n\n    var nu$6 = function (x, y, bubble, direction, placement, boundsRestriction, labelPrefix, alwaysFit) {\n      if (alwaysFit === void 0) {\n        alwaysFit = false;\n      }\n      return {\n        x: x,\n        y: y,\n        bubble: bubble,\n        direction: direction,\n        placement: placement,\n        restriction: boundsRestriction,\n        label: labelPrefix + '-' + placement,\n        alwaysFit: alwaysFit\n      };\n    };\n\n    var adt$a = Adt.generate([\n      { southeast: [] },\n      { southwest: [] },\n      { northeast: [] },\n      { northwest: [] },\n      { south: [] },\n      { north: [] },\n      { east: [] },\n      { west: [] }\n    ]);\n    var cata$2 = function (subject, southeast, southwest, northeast, northwest, south, north, east, west) {\n      return subject.fold(southeast, southwest, northeast, northwest, south, north, east, west);\n    };\n    var cataVertical = function (subject, south, middle, north) {\n      return subject.fold(south, south, north, north, south, north, middle, middle);\n    };\n    var cataHorizontal = function (subject, east, middle, west) {\n      return subject.fold(east, west, east, west, middle, middle, east, west);\n    };\n    var southeast$3 = adt$a.southeast;\n    var southwest$3 = adt$a.southwest;\n    var northeast$3 = adt$a.northeast;\n    var northwest$3 = adt$a.northwest;\n    var south$3 = adt$a.south;\n    var north$3 = adt$a.north;\n    var east$3 = adt$a.east;\n    var west$3 = adt$a.west;\n\n    var cycleBy = function (value, delta, min, max) {\n      var r = value + delta;\n      if (r > max) {\n        return min;\n      } else if (r < min) {\n        return max;\n      } else {\n        return r;\n      }\n    };\n    var clamp$1 = function (value, min, max) {\n      return Math.min(Math.max(value, min), max);\n    };\n\n    var getRestriction = function (anchor, restriction) {\n      switch (restriction) {\n      case 1:\n        return anchor.x;\n      case 0:\n        return anchor.x + anchor.width;\n      case 2:\n        return anchor.y;\n      case 3:\n        return anchor.y + anchor.height;\n      }\n    };\n    var boundsRestriction = function (anchor, restrictions) {\n      return mapToObject([\n        'left',\n        'right',\n        'top',\n        'bottom'\n      ], function (dir) {\n        return get$e(restrictions, dir).map(function (restriction) {\n          return getRestriction(anchor, restriction);\n        });\n      });\n    };\n    var adjustBounds = function (bounds$1, restriction, bubbleOffset) {\n      var applyRestriction = function (dir, current) {\n        return restriction[dir].map(function (pos) {\n          var isVerticalAxis = dir === 'top' || dir === 'bottom';\n          var offset = isVerticalAxis ? bubbleOffset.top : bubbleOffset.left;\n          var comparator = dir === 'left' || dir === 'top' ? Math.max : Math.min;\n          var newPos = comparator(pos, current) + offset;\n          return isVerticalAxis ? clamp$1(newPos, bounds$1.y, bounds$1.bottom) : clamp$1(newPos, bounds$1.x, bounds$1.right);\n        }).getOr(current);\n      };\n      var adjustedLeft = applyRestriction('left', bounds$1.x);\n      var adjustedTop = applyRestriction('top', bounds$1.y);\n      var adjustedRight = applyRestriction('right', bounds$1.right);\n      var adjustedBottom = applyRestriction('bottom', bounds$1.bottom);\n      return bounds(adjustedLeft, adjustedTop, adjustedRight - adjustedLeft, adjustedBottom - adjustedTop);\n    };\n\n    var labelPrefix$2 = 'layout';\n    var eastX$1 = function (anchor) {\n      return anchor.x;\n    };\n    var middleX$1 = function (anchor, element) {\n      return anchor.x + anchor.width / 2 - element.width / 2;\n    };\n    var westX$1 = function (anchor, element) {\n      return anchor.x + anchor.width - element.width;\n    };\n    var northY$2 = function (anchor, element) {\n      return anchor.y - element.height;\n    };\n    var southY$2 = function (anchor) {\n      return anchor.y + anchor.height;\n    };\n    var centreY$1 = function (anchor, element) {\n      return anchor.y + anchor.height / 2 - element.height / 2;\n    };\n    var eastEdgeX$1 = function (anchor) {\n      return anchor.x + anchor.width;\n    };\n    var westEdgeX$1 = function (anchor, element) {\n      return anchor.x - element.width;\n    };\n    var southeast$2 = function (anchor, element, bubbles) {\n      return nu$6(eastX$1(anchor), southY$2(anchor), bubbles.southeast(), southeast$3(), 'southeast', boundsRestriction(anchor, {\n        left: 1,\n        top: 3\n      }), labelPrefix$2);\n    };\n    var southwest$2 = function (anchor, element, bubbles) {\n      return nu$6(westX$1(anchor, element), southY$2(anchor), bubbles.southwest(), southwest$3(), 'southwest', boundsRestriction(anchor, {\n        right: 0,\n        top: 3\n      }), labelPrefix$2);\n    };\n    var northeast$2 = function (anchor, element, bubbles) {\n      return nu$6(eastX$1(anchor), northY$2(anchor, element), bubbles.northeast(), northeast$3(), 'northeast', boundsRestriction(anchor, {\n        left: 1,\n        bottom: 2\n      }), labelPrefix$2);\n    };\n    var northwest$2 = function (anchor, element, bubbles) {\n      return nu$6(westX$1(anchor, element), northY$2(anchor, element), bubbles.northwest(), northwest$3(), 'northwest', boundsRestriction(anchor, {\n        right: 0,\n        bottom: 2\n      }), labelPrefix$2);\n    };\n    var north$2 = function (anchor, element, bubbles) {\n      return nu$6(middleX$1(anchor, element), northY$2(anchor, element), bubbles.north(), north$3(), 'north', boundsRestriction(anchor, { bottom: 2 }), labelPrefix$2);\n    };\n    var south$2 = function (anchor, element, bubbles) {\n      return nu$6(middleX$1(anchor, element), southY$2(anchor), bubbles.south(), south$3(), 'south', boundsRestriction(anchor, { top: 3 }), labelPrefix$2);\n    };\n    var east$2 = function (anchor, element, bubbles) {\n      return nu$6(eastEdgeX$1(anchor), centreY$1(anchor, element), bubbles.east(), east$3(), 'east', boundsRestriction(anchor, { left: 0 }), labelPrefix$2);\n    };\n    var west$2 = function (anchor, element, bubbles) {\n      return nu$6(westEdgeX$1(anchor, element), centreY$1(anchor, element), bubbles.west(), west$3(), 'west', boundsRestriction(anchor, { right: 1 }), labelPrefix$2);\n    };\n    var all$1 = function () {\n      return [\n        southeast$2,\n        southwest$2,\n        northeast$2,\n        northwest$2,\n        south$2,\n        north$2,\n        east$2,\n        west$2\n      ];\n    };\n    var allRtl$1 = function () {\n      return [\n        southwest$2,\n        southeast$2,\n        northwest$2,\n        northeast$2,\n        south$2,\n        north$2,\n        east$2,\n        west$2\n      ];\n    };\n    var aboveOrBelow = function () {\n      return [\n        northeast$2,\n        northwest$2,\n        southeast$2,\n        southwest$2,\n        north$2,\n        south$2\n      ];\n    };\n    var aboveOrBelowRtl = function () {\n      return [\n        northwest$2,\n        northeast$2,\n        southwest$2,\n        southeast$2,\n        north$2,\n        south$2\n      ];\n    };\n    var belowOrAbove = function () {\n      return [\n        southeast$2,\n        southwest$2,\n        northeast$2,\n        northwest$2,\n        south$2,\n        north$2\n      ];\n    };\n    var belowOrAboveRtl = function () {\n      return [\n        southwest$2,\n        southeast$2,\n        northwest$2,\n        northeast$2,\n        south$2,\n        north$2\n      ];\n    };\n\n    var chooseChannels = function (channels, message) {\n      return message.universal ? channels : filter$2(channels, function (ch) {\n        return contains$2(message.channels, ch);\n      });\n    };\n    var events$h = function (receiveConfig) {\n      return derive$2([run$1(receive(), function (component, message) {\n          var channelMap = receiveConfig.channels;\n          var channels = keys(channelMap);\n          var receivingData = message;\n          var targetChannels = chooseChannels(channels, receivingData);\n          each$1(targetChannels, function (ch) {\n            var channelInfo = channelMap[ch];\n            var channelSchema = channelInfo.schema;\n            var data = asRawOrDie$1('channel[' + ch + '] data\\nReceiver: ' + element(component.element), channelSchema, receivingData.data);\n            channelInfo.onReceive(component, data);\n          });\n        })]);\n    };\n\n    var ActiveReceiving = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$h\n    });\n\n    var ReceivingSchema = [requiredOf('channels', setOf(Result.value, objOfOnly([\n        onStrictHandler('onReceive'),\n        defaulted('schema', anyValue())\n      ])))];\n\n    var executeEvent = function (bConfig, bState, executor) {\n      return runOnExecute$1(function (component) {\n        executor(component, bConfig, bState);\n      });\n    };\n    var loadEvent = function (bConfig, bState, f) {\n      return runOnInit(function (component, _simulatedEvent) {\n        f(component, bConfig, bState);\n      });\n    };\n    var create$9 = function (schema, name, active, apis, extra, state) {\n      var configSchema = objOfOnly(schema);\n      var schemaSchema = optionObjOf(name, [optionObjOfOnly('config', schema)]);\n      return doCreate(configSchema, schemaSchema, name, active, apis, extra, state);\n    };\n    var createModes$1 = function (modes, name, active, apis, extra, state) {\n      var configSchema = modes;\n      var schemaSchema = optionObjOf(name, [optionOf('config', modes)]);\n      return doCreate(configSchema, schemaSchema, name, active, apis, extra, state);\n    };\n    var wrapApi = function (bName, apiFunction, apiName) {\n      var f = function (component) {\n        var rest = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n          rest[_i - 1] = arguments[_i];\n        }\n        var args = [component].concat(rest);\n        return component.config({ name: constant$1(bName) }).fold(function () {\n          throw new Error('We could not find any behaviour configuration for: ' + bName + '. Using API: ' + apiName);\n        }, function (info) {\n          var rest = Array.prototype.slice.call(args, 1);\n          return apiFunction.apply(undefined, [\n            component,\n            info.config,\n            info.state\n          ].concat(rest));\n        });\n      };\n      return markAsBehaviourApi(f, apiName, apiFunction);\n    };\n    var revokeBehaviour = function (name) {\n      return {\n        key: name,\n        value: undefined\n      };\n    };\n    var doCreate = function (configSchema, schemaSchema, name, active, apis, extra, state) {\n      var getConfig = function (info) {\n        return hasNonNullableKey(info, name) ? info[name]() : Optional.none();\n      };\n      var wrappedApis = map$1(apis, function (apiF, apiName) {\n        return wrapApi(name, apiF, apiName);\n      });\n      var wrappedExtra = map$1(extra, function (extraF, extraName) {\n        return markAsExtraApi(extraF, extraName);\n      });\n      var me = __assign(__assign(__assign({}, wrappedExtra), wrappedApis), {\n        revoke: curry(revokeBehaviour, name),\n        config: function (spec) {\n          var prepared = asRawOrDie$1(name + '-config', configSchema, spec);\n          return {\n            key: name,\n            value: {\n              config: prepared,\n              me: me,\n              configAsRaw: cached(function () {\n                return asRawOrDie$1(name + '-config', configSchema, spec);\n              }),\n              initialConfig: spec,\n              state: state\n            }\n          };\n        },\n        schema: constant$1(schemaSchema),\n        exhibit: function (info, base) {\n          return lift2(getConfig(info), get$e(active, 'exhibit'), function (behaviourInfo, exhibitor) {\n            return exhibitor(base, behaviourInfo.config, behaviourInfo.state);\n          }).getOrThunk(function () {\n            return nu$7({});\n          });\n        },\n        name: constant$1(name),\n        handlers: function (info) {\n          return getConfig(info).map(function (behaviourInfo) {\n            var getEvents = get$e(active, 'events').getOr(function () {\n              return {};\n            });\n            return getEvents(behaviourInfo.config, behaviourInfo.state);\n          }).getOr({});\n        }\n      });\n      return me;\n    };\n\n    var derive$1 = function (capabilities) {\n      return wrapAll(capabilities);\n    };\n    var simpleSchema = objOfOnly([\n      required$1('fields'),\n      required$1('name'),\n      defaulted('active', {}),\n      defaulted('apis', {}),\n      defaulted('state', NoState),\n      defaulted('extra', {})\n    ]);\n    var create$8 = function (data) {\n      var value = asRawOrDie$1('Creating behaviour: ' + data.name, simpleSchema, data);\n      return create$9(value.fields, value.name, value.active, value.apis, value.extra, value.state);\n    };\n    var modeSchema = objOfOnly([\n      required$1('branchKey'),\n      required$1('branches'),\n      required$1('name'),\n      defaulted('active', {}),\n      defaulted('apis', {}),\n      defaulted('state', NoState),\n      defaulted('extra', {})\n    ]);\n    var createModes = function (data) {\n      var value = asRawOrDie$1('Creating behaviour: ' + data.name, modeSchema, data);\n      return createModes$1(choose$1(value.branchKey, value.branches), value.name, value.active, value.apis, value.extra, value.state);\n    };\n    var revoke = constant$1(undefined);\n\n    var Receiving = create$8({\n      fields: ReceivingSchema,\n      name: 'receiving',\n      active: ActiveReceiving\n    });\n\n    var exhibit$6 = function (base, posConfig) {\n      return nu$7({\n        classes: [],\n        styles: posConfig.useFixed() ? {} : { position: 'relative' }\n      });\n    };\n\n    var ActivePosition = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$6\n    });\n\n    var getDocument = function () {\n      return SugarElement.fromDom(document);\n    };\n\n    var focus$3 = function (element) {\n      return element.dom.focus();\n    };\n    var blur$1 = function (element) {\n      return element.dom.blur();\n    };\n    var hasFocus = function (element) {\n      var root = getRootNode(element).dom;\n      return element.dom === root.activeElement;\n    };\n    var active = function (root) {\n      if (root === void 0) {\n        root = getDocument();\n      }\n      return Optional.from(root.dom.activeElement).map(SugarElement.fromDom);\n    };\n    var search = function (element) {\n      return active(getRootNode(element)).filter(function (e) {\n        return element.dom.contains(e.dom);\n      });\n    };\n\n    var preserve$1 = function (f, container) {\n      var dos = getRootNode(container);\n      var refocus = active(dos).bind(function (focused) {\n        var hasFocus = function (elem) {\n          return eq(focused, elem);\n        };\n        return hasFocus(container) ? Optional.some(container) : descendant$1(container, hasFocus);\n      });\n      var result = f(container);\n      refocus.each(function (oldFocus) {\n        active(dos).filter(function (newFocus) {\n          return eq(newFocus, oldFocus);\n        }).fold(function () {\n          focus$3(oldFocus);\n        }, noop);\n      });\n      return result;\n    };\n\n    var NuPositionCss = function (position, left, top, right, bottom) {\n      var toPx = function (num) {\n        return num + 'px';\n      };\n      return {\n        position: position,\n        left: left.map(toPx),\n        top: top.map(toPx),\n        right: right.map(toPx),\n        bottom: bottom.map(toPx)\n      };\n    };\n    var toOptions = function (position) {\n      return __assign(__assign({}, position), { position: Optional.some(position.position) });\n    };\n    var applyPositionCss = function (element, position) {\n      setOptions(element, toOptions(position));\n    };\n\n    var adt$9 = Adt.generate([\n      { none: [] },\n      {\n        relative: [\n          'x',\n          'y',\n          'width',\n          'height'\n        ]\n      },\n      {\n        fixed: [\n          'x',\n          'y',\n          'width',\n          'height'\n        ]\n      }\n    ]);\n    var positionWithDirection = function (posName, decision, x, y, width, height) {\n      var decisionRect = decision.rect;\n      var decisionX = decisionRect.x - x;\n      var decisionY = decisionRect.y - y;\n      var decisionWidth = decisionRect.width;\n      var decisionHeight = decisionRect.height;\n      var decisionRight = width - (decisionX + decisionWidth);\n      var decisionBottom = height - (decisionY + decisionHeight);\n      var left = Optional.some(decisionX);\n      var top = Optional.some(decisionY);\n      var right = Optional.some(decisionRight);\n      var bottom = Optional.some(decisionBottom);\n      var none = Optional.none();\n      return cata$2(decision.direction, function () {\n        return NuPositionCss(posName, left, top, none, none);\n      }, function () {\n        return NuPositionCss(posName, none, top, right, none);\n      }, function () {\n        return NuPositionCss(posName, left, none, none, bottom);\n      }, function () {\n        return NuPositionCss(posName, none, none, right, bottom);\n      }, function () {\n        return NuPositionCss(posName, left, top, none, none);\n      }, function () {\n        return NuPositionCss(posName, left, none, none, bottom);\n      }, function () {\n        return NuPositionCss(posName, left, top, none, none);\n      }, function () {\n        return NuPositionCss(posName, none, top, right, none);\n      });\n    };\n    var reposition = function (origin, decision) {\n      return origin.fold(function () {\n        var decisionRect = decision.rect;\n        return NuPositionCss('absolute', Optional.some(decisionRect.x), Optional.some(decisionRect.y), Optional.none(), Optional.none());\n      }, function (x, y, width, height) {\n        return positionWithDirection('absolute', decision, x, y, width, height);\n      }, function (x, y, width, height) {\n        return positionWithDirection('fixed', decision, x, y, width, height);\n      });\n    };\n    var toBox = function (origin, element) {\n      var rel = curry(find$2, element);\n      var position = origin.fold(rel, rel, function () {\n        var scroll = get$9();\n        return find$2(element).translate(-scroll.left, -scroll.top);\n      });\n      var width = getOuter$1(element);\n      var height = getOuter$2(element);\n      return bounds(position.left, position.top, width, height);\n    };\n    var viewport = function (origin, getBounds) {\n      return getBounds.fold(function () {\n        return origin.fold(win, win, bounds);\n      }, function (b) {\n        return origin.fold(b, b, function () {\n          var bounds$1 = b();\n          var pos = translate$2(origin, bounds$1.x, bounds$1.y);\n          return bounds(pos.left, pos.top, bounds$1.width, bounds$1.height);\n        });\n      });\n    };\n    var translate$2 = function (origin, x, y) {\n      var pos = SugarPosition(x, y);\n      var removeScroll = function () {\n        var outerScroll = get$9();\n        return pos.translate(-outerScroll.left, -outerScroll.top);\n      };\n      return origin.fold(constant$1(pos), constant$1(pos), removeScroll);\n    };\n    var cata$1 = function (subject, onNone, onRelative, onFixed) {\n      return subject.fold(onNone, onRelative, onFixed);\n    };\n    adt$9.none;\n    var relative$1 = adt$9.relative;\n    var fixed$1 = adt$9.fixed;\n\n    var anchor = function (anchorBox, origin) {\n      return {\n        anchorBox: anchorBox,\n        origin: origin\n      };\n    };\n    var box = function (anchorBox, origin) {\n      return anchor(anchorBox, origin);\n    };\n\n    var placementAttribute = 'data-alloy-placement';\n    var setPlacement$1 = function (element, placement) {\n      set$8(element, placementAttribute, placement);\n    };\n    var getPlacement = function (element) {\n      return getOpt(element, placementAttribute);\n    };\n    var reset$2 = function (element) {\n      return remove$7(element, placementAttribute);\n    };\n\n    var adt$8 = Adt.generate([\n      { fit: ['reposition'] },\n      {\n        nofit: [\n          'reposition',\n          'visibleW',\n          'visibleH',\n          'isVisible'\n        ]\n      }\n    ]);\n    var determinePosition = function (box, bounds) {\n      var boundsX = bounds.x, boundsY = bounds.y, boundsRight = bounds.right, boundsBottom = bounds.bottom;\n      var x = box.x, y = box.y, right = box.right, bottom = box.bottom, width = box.width, height = box.height;\n      var xInBounds = x >= boundsX && x <= boundsRight;\n      var yInBounds = y >= boundsY && y <= boundsBottom;\n      var originInBounds = xInBounds && yInBounds;\n      var rightInBounds = right <= boundsRight && right >= boundsX;\n      var bottomInBounds = bottom <= boundsBottom && bottom >= boundsY;\n      var sizeInBounds = rightInBounds && bottomInBounds;\n      var visibleW = Math.min(width, x >= boundsX ? boundsRight - x : right - boundsX);\n      var visibleH = Math.min(height, y >= boundsY ? boundsBottom - y : bottom - boundsY);\n      return {\n        originInBounds: originInBounds,\n        sizeInBounds: sizeInBounds,\n        visibleW: visibleW,\n        visibleH: visibleH\n      };\n    };\n    var calcReposition = function (box, bounds$1) {\n      var boundsX = bounds$1.x, boundsY = bounds$1.y, boundsRight = bounds$1.right, boundsBottom = bounds$1.bottom;\n      var x = box.x, y = box.y, width = box.width, height = box.height;\n      var maxX = Math.max(boundsX, boundsRight - width);\n      var maxY = Math.max(boundsY, boundsBottom - height);\n      var restrictedX = clamp$1(x, boundsX, maxX);\n      var restrictedY = clamp$1(y, boundsY, maxY);\n      var restrictedWidth = Math.min(restrictedX + width, boundsRight) - restrictedX;\n      var restrictedHeight = Math.min(restrictedY + height, boundsBottom) - restrictedY;\n      return bounds(restrictedX, restrictedY, restrictedWidth, restrictedHeight);\n    };\n    var calcMaxSizes = function (direction, box, bounds) {\n      var upAvailable = constant$1(box.bottom - bounds.y);\n      var downAvailable = constant$1(bounds.bottom - box.y);\n      var maxHeight = cataVertical(direction, downAvailable, downAvailable, upAvailable);\n      var westAvailable = constant$1(box.right - bounds.x);\n      var eastAvailable = constant$1(bounds.right - box.x);\n      var maxWidth = cataHorizontal(direction, eastAvailable, eastAvailable, westAvailable);\n      return {\n        maxWidth: maxWidth,\n        maxHeight: maxHeight\n      };\n    };\n    var attempt = function (candidate, width, height, bounds$1) {\n      var bubble = candidate.bubble;\n      var bubbleOffset = bubble.offset;\n      var adjustedBounds = adjustBounds(bounds$1, candidate.restriction, bubbleOffset);\n      var newX = candidate.x + bubbleOffset.left;\n      var newY = candidate.y + bubbleOffset.top;\n      var box = bounds(newX, newY, width, height);\n      var _a = determinePosition(box, adjustedBounds), originInBounds = _a.originInBounds, sizeInBounds = _a.sizeInBounds, visibleW = _a.visibleW, visibleH = _a.visibleH;\n      var fits = originInBounds && sizeInBounds;\n      var fittedBox = fits ? box : calcReposition(box, adjustedBounds);\n      var isPartlyVisible = fittedBox.width > 0 && fittedBox.height > 0;\n      var _b = calcMaxSizes(candidate.direction, fittedBox, bounds$1), maxWidth = _b.maxWidth, maxHeight = _b.maxHeight;\n      var reposition = {\n        rect: fittedBox,\n        maxHeight: maxHeight,\n        maxWidth: maxWidth,\n        direction: candidate.direction,\n        placement: candidate.placement,\n        classes: {\n          on: bubble.classesOn,\n          off: bubble.classesOff\n        },\n        layout: candidate.label,\n        testY: newY\n      };\n      return fits || candidate.alwaysFit ? adt$8.fit(reposition) : adt$8.nofit(reposition, visibleW, visibleH, isPartlyVisible);\n    };\n    var attempts = function (element, candidates, anchorBox, elementBox, bubbles, bounds) {\n      var panelWidth = elementBox.width;\n      var panelHeight = elementBox.height;\n      var attemptBestFit = function (layout, reposition, visibleW, visibleH, isVisible) {\n        var next = layout(anchorBox, elementBox, bubbles, element, bounds);\n        var attemptLayout = attempt(next, panelWidth, panelHeight, bounds);\n        return attemptLayout.fold(constant$1(attemptLayout), function (newReposition, newVisibleW, newVisibleH, newIsVisible) {\n          var improved = isVisible === newIsVisible ? newVisibleH > visibleH || newVisibleW > visibleW : !isVisible && newIsVisible;\n          return improved ? attemptLayout : adt$8.nofit(reposition, visibleW, visibleH, isVisible);\n        });\n      };\n      var abc = foldl(candidates, function (b, a) {\n        var bestNext = curry(attemptBestFit, a);\n        return b.fold(constant$1(b), bestNext);\n      }, adt$8.nofit({\n        rect: anchorBox,\n        maxHeight: elementBox.height,\n        maxWidth: elementBox.width,\n        direction: southeast$3(),\n        placement: 'southeast',\n        classes: {\n          on: [],\n          off: []\n        },\n        layout: 'none',\n        testY: anchorBox.y\n      }, -1, -1, false));\n      return abc.fold(identity$1, identity$1);\n    };\n\n    var singleton = function (doRevoke) {\n      var subject = Cell(Optional.none());\n      var revoke = function () {\n        return subject.get().each(doRevoke);\n      };\n      var clear = function () {\n        revoke();\n        subject.set(Optional.none());\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      var get = function () {\n        return subject.get();\n      };\n      var set = function (s) {\n        revoke();\n        subject.set(Optional.some(s));\n      };\n      return {\n        clear: clear,\n        isSet: isSet,\n        get: get,\n        set: set\n      };\n    };\n    var destroyable = function () {\n      return singleton(function (s) {\n        return s.destroy();\n      });\n    };\n    var unbindable = function () {\n      return singleton(function (s) {\n        return s.unbind();\n      });\n    };\n    var api$1 = function () {\n      var subject = destroyable();\n      var run = function (f) {\n        return subject.get().each(f);\n      };\n      return __assign(__assign({}, subject), { run: run });\n    };\n    var value$1 = function () {\n      var subject = singleton(noop);\n      var on = function (f) {\n        return subject.get().each(f);\n      };\n      return __assign(__assign({}, subject), { on: on });\n    };\n\n    var filter = always;\n    var bind = function (element, event, handler) {\n      return bind$2(element, event, filter, handler);\n    };\n    var capture = function (element, event, handler) {\n      return capture$1(element, event, filter, handler);\n    };\n    var fromRawEvent = fromRawEvent$1;\n\n    var properties = [\n      'top',\n      'bottom',\n      'right',\n      'left'\n    ];\n    var timerAttr = 'data-alloy-transition-timer';\n    var isTransitioning$1 = function (element, transition) {\n      return hasAll(element, transition.classes);\n    };\n    var shouldApplyTransitionCss = function (transition, decision, lastPlacement) {\n      return lastPlacement.exists(function (placer) {\n        var mode = transition.mode;\n        return mode === 'all' ? true : placer[mode] !== decision[mode];\n      });\n    };\n    var hasChanges = function (position, intermediate) {\n      var round = function (value) {\n        return parseFloat(value).toFixed(3);\n      };\n      return find$4(intermediate, function (value, key) {\n        var newValue = position[key].map(round);\n        var val = value.map(round);\n        return !equals(newValue, val);\n      }).isSome();\n    };\n    var getTransitionDuration = function (element) {\n      var get = function (name) {\n        var style = get$c(element, name);\n        var times = isString(style) ? style.split(/\\s*,\\s*/) : [];\n        return filter$2(times, isNotEmpty);\n      };\n      var parse = function (value) {\n        if (isString(value) && /^[\\d.]+/.test(value)) {\n          var num = parseFloat(value);\n          return endsWith(value, 'ms') ? num : num * 1000;\n        } else {\n          return 0;\n        }\n      };\n      var delay = get('transition-delay');\n      var duration = get('transition-duration');\n      return foldl(duration, function (acc, dur, i) {\n        var time = parse(delay[i]) + parse(dur);\n        return Math.max(acc, time);\n      }, 0);\n    };\n    var setupTransitionListeners = function (element, transition) {\n      var transitionEnd = unbindable();\n      var transitionCancel = unbindable();\n      var timer;\n      var isSourceTransition = function (e) {\n        var _a;\n        var pseudoElement = (_a = e.raw.pseudoElement) !== null && _a !== void 0 ? _a : '';\n        return eq(e.target, element) && isEmpty(pseudoElement) && contains$2(properties, e.raw.propertyName);\n      };\n      var transitionDone = function (e) {\n        if (isNullable(e) || isSourceTransition(e)) {\n          transitionEnd.clear();\n          transitionCancel.clear();\n          var type = e === null || e === void 0 ? void 0 : e.raw.type;\n          if (isNullable(type) || type === transitionend()) {\n            clearTimeout(timer);\n            remove$7(element, timerAttr);\n            remove$1(element, transition.classes);\n          }\n        }\n      };\n      var transitionStarted = function () {\n        transitionEnd.set(bind(element, transitionend(), transitionDone));\n        transitionCancel.set(bind(element, transitioncancel(), transitionDone));\n      };\n      if ('ontransitionstart' in element.dom) {\n        var transitionStart_1 = bind(element, transitionstart(), function (e) {\n          if (isSourceTransition(e)) {\n            transitionStart_1.unbind();\n            transitionStarted();\n          }\n        });\n      } else {\n        transitionStarted();\n      }\n      var duration = getTransitionDuration(element);\n      requestAnimationFrame(function () {\n        timer = setTimeout(transitionDone, duration + 17);\n        set$8(element, timerAttr, timer);\n      });\n    };\n    var startTransitioning = function (element, transition) {\n      add$1(element, transition.classes);\n      getOpt(element, timerAttr).each(function (timerId) {\n        clearTimeout(parseInt(timerId, 10));\n        remove$7(element, timerAttr);\n      });\n      setupTransitionListeners(element, transition);\n    };\n    var applyTransitionCss = function (element, origin, position, transition, decision, lastPlacement) {\n      var shouldTransition = shouldApplyTransitionCss(transition, decision, lastPlacement);\n      if (shouldTransition || isTransitioning$1(element, transition)) {\n        set$7(element, 'position', position.position);\n        var rect = toBox(origin, element);\n        var intermediatePosition_1 = reposition(origin, __assign(__assign({}, decision), { rect: rect }));\n        var intermediateCssOptions = mapToObject(properties, function (prop) {\n          return intermediatePosition_1[prop];\n        });\n        if (hasChanges(position, intermediateCssOptions)) {\n          setOptions(element, intermediateCssOptions);\n          if (shouldTransition) {\n            startTransitioning(element, transition);\n          }\n          reflow(element);\n        }\n      } else {\n        remove$1(element, transition.classes);\n      }\n    };\n\n    var elementSize = function (p) {\n      return {\n        width: getOuter$1(p),\n        height: getOuter$2(p)\n      };\n    };\n    var layout = function (anchorBox, element, bubbles, options) {\n      remove$6(element, 'max-height');\n      remove$6(element, 'max-width');\n      var elementBox = elementSize(element);\n      return attempts(element, options.preference, anchorBox, elementBox, bubbles, options.bounds);\n    };\n    var setClasses = function (element, decision) {\n      var classInfo = decision.classes;\n      remove$1(element, classInfo.off);\n      add$1(element, classInfo.on);\n    };\n    var setHeight = function (element, decision, options) {\n      var maxHeightFunction = options.maxHeightFunction;\n      maxHeightFunction(element, decision.maxHeight);\n    };\n    var setWidth = function (element, decision, options) {\n      var maxWidthFunction = options.maxWidthFunction;\n      maxWidthFunction(element, decision.maxWidth);\n    };\n    var position$2 = function (element, decision, options) {\n      var positionCss = reposition(options.origin, decision);\n      options.transition.each(function (transition) {\n        applyTransitionCss(element, options.origin, positionCss, transition, decision, options.lastPlacement);\n      });\n      applyPositionCss(element, positionCss);\n    };\n    var setPlacement = function (element, decision) {\n      setPlacement$1(element, decision.placement);\n    };\n\n    var setMaxHeight = function (element, maxHeight) {\n      setMax$1(element, Math.floor(maxHeight));\n    };\n    var anchored = constant$1(function (element, available) {\n      setMaxHeight(element, available);\n      setAll(element, {\n        'overflow-x': 'hidden',\n        'overflow-y': 'auto'\n      });\n    });\n    var expandable$1 = constant$1(function (element, available) {\n      setMaxHeight(element, available);\n    });\n\n    var defaultOr = function (options, key, dephault) {\n      return options[key] === undefined ? dephault : options[key];\n    };\n    var simple = function (anchor, element, bubble, layouts, lastPlacement, getBounds, overrideOptions, transition) {\n      var maxHeightFunction = defaultOr(overrideOptions, 'maxHeightFunction', anchored());\n      var maxWidthFunction = defaultOr(overrideOptions, 'maxWidthFunction', noop);\n      var anchorBox = anchor.anchorBox;\n      var origin = anchor.origin;\n      var options = {\n        bounds: viewport(origin, getBounds),\n        origin: origin,\n        preference: layouts,\n        maxHeightFunction: maxHeightFunction,\n        maxWidthFunction: maxWidthFunction,\n        lastPlacement: lastPlacement,\n        transition: transition\n      };\n      return go(anchorBox, element, bubble, options);\n    };\n    var go = function (anchorBox, element, bubble, options) {\n      var decision = layout(anchorBox, element, bubble, options);\n      position$2(element, decision, options);\n      setPlacement(element, decision);\n      setClasses(element, decision);\n      setHeight(element, decision, options);\n      setWidth(element, decision, options);\n      return {\n        layout: decision.layout,\n        placement: decision.placement\n      };\n    };\n\n    var allAlignments = [\n      'valignCentre',\n      'alignLeft',\n      'alignRight',\n      'alignCentre',\n      'top',\n      'bottom',\n      'left',\n      'right',\n      'inset'\n    ];\n    var nu$5 = function (xOffset, yOffset, classes, insetModifier) {\n      if (insetModifier === void 0) {\n        insetModifier = 1;\n      }\n      var insetXOffset = xOffset * insetModifier;\n      var insetYOffset = yOffset * insetModifier;\n      var getClasses = function (prop) {\n        return get$e(classes, prop).getOr([]);\n      };\n      var make = function (xDelta, yDelta, alignmentsOn) {\n        var alignmentsOff = difference(allAlignments, alignmentsOn);\n        return {\n          offset: SugarPosition(xDelta, yDelta),\n          classesOn: bind$3(alignmentsOn, getClasses),\n          classesOff: bind$3(alignmentsOff, getClasses)\n        };\n      };\n      return {\n        southeast: function () {\n          return make(-xOffset, yOffset, [\n            'top',\n            'alignLeft'\n          ]);\n        },\n        southwest: function () {\n          return make(xOffset, yOffset, [\n            'top',\n            'alignRight'\n          ]);\n        },\n        south: function () {\n          return make(-xOffset / 2, yOffset, [\n            'top',\n            'alignCentre'\n          ]);\n        },\n        northeast: function () {\n          return make(-xOffset, -yOffset, [\n            'bottom',\n            'alignLeft'\n          ]);\n        },\n        northwest: function () {\n          return make(xOffset, -yOffset, [\n            'bottom',\n            'alignRight'\n          ]);\n        },\n        north: function () {\n          return make(-xOffset / 2, -yOffset, [\n            'bottom',\n            'alignCentre'\n          ]);\n        },\n        east: function () {\n          return make(xOffset, -yOffset / 2, [\n            'valignCentre',\n            'left'\n          ]);\n        },\n        west: function () {\n          return make(-xOffset, -yOffset / 2, [\n            'valignCentre',\n            'right'\n          ]);\n        },\n        insetNortheast: function () {\n          return make(insetXOffset, insetYOffset, [\n            'top',\n            'alignLeft',\n            'inset'\n          ]);\n        },\n        insetNorthwest: function () {\n          return make(-insetXOffset, insetYOffset, [\n            'top',\n            'alignRight',\n            'inset'\n          ]);\n        },\n        insetNorth: function () {\n          return make(-insetXOffset / 2, insetYOffset, [\n            'top',\n            'alignCentre',\n            'inset'\n          ]);\n        },\n        insetSoutheast: function () {\n          return make(insetXOffset, -insetYOffset, [\n            'bottom',\n            'alignLeft',\n            'inset'\n          ]);\n        },\n        insetSouthwest: function () {\n          return make(-insetXOffset, -insetYOffset, [\n            'bottom',\n            'alignRight',\n            'inset'\n          ]);\n        },\n        insetSouth: function () {\n          return make(-insetXOffset / 2, -insetYOffset, [\n            'bottom',\n            'alignCentre',\n            'inset'\n          ]);\n        },\n        insetEast: function () {\n          return make(-insetXOffset, -insetYOffset / 2, [\n            'valignCentre',\n            'right',\n            'inset'\n          ]);\n        },\n        insetWest: function () {\n          return make(insetXOffset, -insetYOffset / 2, [\n            'valignCentre',\n            'left',\n            'inset'\n          ]);\n        }\n      };\n    };\n    var fallback = function () {\n      return nu$5(0, 0, {});\n    };\n\n    var nu$4 = identity$1;\n\n    var onDirection = function (isLtr, isRtl) {\n      return function (element) {\n        return getDirection(element) === 'rtl' ? isRtl : isLtr;\n      };\n    };\n    var getDirection = function (element) {\n      return get$c(element, 'direction') === 'rtl' ? 'rtl' : 'ltr';\n    };\n\n    var AttributeValue;\n    (function (AttributeValue) {\n      AttributeValue['TopToBottom'] = 'toptobottom';\n      AttributeValue['BottomToTop'] = 'bottomtotop';\n    }(AttributeValue || (AttributeValue = {})));\n    var Attribute = 'data-alloy-vertical-dir';\n    var isBottomToTopDir = function (el) {\n      return closest$2(el, function (current) {\n        return isElement$2(current) && get$d(current, 'data-alloy-vertical-dir') === AttributeValue.BottomToTop;\n      });\n    };\n\n    var schema$y = function () {\n      return optionObjOf('layouts', [\n        required$1('onLtr'),\n        required$1('onRtl'),\n        option('onBottomLtr'),\n        option('onBottomRtl')\n      ]);\n    };\n    var get$4 = function (elem, info, defaultLtr, defaultRtl, defaultBottomLtr, defaultBottomRtl, dirElement) {\n      var isBottomToTop = dirElement.map(isBottomToTopDir).getOr(false);\n      var customLtr = info.layouts.map(function (ls) {\n        return ls.onLtr(elem);\n      });\n      var customRtl = info.layouts.map(function (ls) {\n        return ls.onRtl(elem);\n      });\n      var ltr = isBottomToTop ? info.layouts.bind(function (ls) {\n        return ls.onBottomLtr.map(function (f) {\n          return f(elem);\n        });\n      }).or(customLtr).getOr(defaultBottomLtr) : customLtr.getOr(defaultLtr);\n      var rtl = isBottomToTop ? info.layouts.bind(function (ls) {\n        return ls.onBottomRtl.map(function (f) {\n          return f(elem);\n        });\n      }).or(customRtl).getOr(defaultBottomRtl) : customRtl.getOr(defaultRtl);\n      var f = onDirection(ltr, rtl);\n      return f(elem);\n    };\n\n    var placement$4 = function (component, anchorInfo, origin) {\n      var hotspot = anchorInfo.hotspot;\n      var anchorBox = toBox(origin, hotspot.element);\n      var layouts = get$4(component.element, anchorInfo, belowOrAbove(), belowOrAboveRtl(), aboveOrBelow(), aboveOrBelowRtl(), Optional.some(anchorInfo.hotspot.element));\n      return Optional.some(nu$4({\n        anchorBox: anchorBox,\n        bubble: anchorInfo.bubble.getOr(fallback()),\n        overrides: anchorInfo.overrides,\n        layouts: layouts,\n        placer: Optional.none()\n      }));\n    };\n    var HotspotAnchor = [\n      required$1('hotspot'),\n      option('bubble'),\n      defaulted('overrides', {}),\n      schema$y(),\n      output$1('placement', placement$4)\n    ];\n\n    var placement$3 = function (component, anchorInfo, origin) {\n      var pos = translate$2(origin, anchorInfo.x, anchorInfo.y);\n      var anchorBox = bounds(pos.left, pos.top, anchorInfo.width, anchorInfo.height);\n      var layouts = get$4(component.element, anchorInfo, all$1(), allRtl$1(), all$1(), allRtl$1(), Optional.none());\n      return Optional.some(nu$4({\n        anchorBox: anchorBox,\n        bubble: anchorInfo.bubble,\n        overrides: anchorInfo.overrides,\n        layouts: layouts,\n        placer: Optional.none()\n      }));\n    };\n    var MakeshiftAnchor = [\n      required$1('x'),\n      required$1('y'),\n      defaulted('height', 0),\n      defaulted('width', 0),\n      defaulted('bubble', fallback()),\n      defaulted('overrides', {}),\n      schema$y(),\n      output$1('placement', placement$3)\n    ];\n\n    var adt$7 = Adt.generate([\n      { screen: ['point'] },\n      {\n        absolute: [\n          'point',\n          'scrollLeft',\n          'scrollTop'\n        ]\n      }\n    ]);\n    var toFixed = function (pos) {\n      return pos.fold(identity$1, function (point, scrollLeft, scrollTop) {\n        return point.translate(-scrollLeft, -scrollTop);\n      });\n    };\n    var toAbsolute = function (pos) {\n      return pos.fold(identity$1, identity$1);\n    };\n    var sum = function (points) {\n      return foldl(points, function (b, a) {\n        return b.translate(a.left, a.top);\n      }, SugarPosition(0, 0));\n    };\n    var sumAsFixed = function (positions) {\n      var points = map$2(positions, toFixed);\n      return sum(points);\n    };\n    var sumAsAbsolute = function (positions) {\n      var points = map$2(positions, toAbsolute);\n      return sum(points);\n    };\n    var screen = adt$7.screen;\n    var absolute$1 = adt$7.absolute;\n\n    var getOffset = function (component, origin, anchorInfo) {\n      var win = defaultView(anchorInfo.root).dom;\n      var hasSameOwner = function (frame) {\n        var frameOwner = owner$4(frame);\n        var compOwner = owner$4(component.element);\n        return eq(frameOwner, compOwner);\n      };\n      return Optional.from(win.frameElement).map(SugarElement.fromDom).filter(hasSameOwner).map(absolute$3);\n    };\n    var getRootPoint = function (component, origin, anchorInfo) {\n      var doc = owner$4(component.element);\n      var outerScroll = get$9(doc);\n      var offset = getOffset(component, origin, anchorInfo).getOr(outerScroll);\n      return absolute$1(offset, outerScroll.left, outerScroll.top);\n    };\n\n    var getBox = function (left, top, width, height) {\n      var point = screen(SugarPosition(left, top));\n      return Optional.some(pointed(point, width, height));\n    };\n    var calcNewAnchor = function (optBox, rootPoint, anchorInfo, origin, elem) {\n      return optBox.map(function (box) {\n        var points = [\n          rootPoint,\n          box.point\n        ];\n        var topLeft = cata$1(origin, function () {\n          return sumAsAbsolute(points);\n        }, function () {\n          return sumAsAbsolute(points);\n        }, function () {\n          return sumAsFixed(points);\n        });\n        var anchorBox = rect(topLeft.left, topLeft.top, box.width, box.height);\n        var layoutsLtr = anchorInfo.showAbove ? aboveOrBelow() : belowOrAbove();\n        var layoutsRtl = anchorInfo.showAbove ? aboveOrBelowRtl() : belowOrAboveRtl();\n        var layouts = get$4(elem, anchorInfo, layoutsLtr, layoutsRtl, layoutsLtr, layoutsRtl, Optional.none());\n        return nu$4({\n          anchorBox: anchorBox,\n          bubble: anchorInfo.bubble.getOr(fallback()),\n          overrides: anchorInfo.overrides,\n          layouts: layouts,\n          placer: Optional.none()\n        });\n      });\n    };\n\n    var placement$2 = function (component, anchorInfo, origin) {\n      var rootPoint = getRootPoint(component, origin, anchorInfo);\n      return anchorInfo.node.filter(inBody).bind(function (target) {\n        var rect = target.dom.getBoundingClientRect();\n        var nodeBox = getBox(rect.left, rect.top, rect.width, rect.height);\n        var elem = anchorInfo.node.getOr(component.element);\n        return calcNewAnchor(nodeBox, rootPoint, anchorInfo, origin, elem);\n      });\n    };\n    var NodeAnchor = [\n      required$1('node'),\n      required$1('root'),\n      option('bubble'),\n      schema$y(),\n      defaulted('overrides', {}),\n      defaulted('showAbove', false),\n      output$1('placement', placement$2)\n    ];\n\n    var zeroWidth = '\\uFEFF';\n    var nbsp = '\\xA0';\n\n    var create$7 = function (start, soffset, finish, foffset) {\n      return {\n        start: start,\n        soffset: soffset,\n        finish: finish,\n        foffset: foffset\n      };\n    };\n    var SimRange = { create: create$7 };\n\n    var adt$6 = Adt.generate([\n      { before: ['element'] },\n      {\n        on: [\n          'element',\n          'offset'\n        ]\n      },\n      { after: ['element'] }\n    ]);\n    var cata = function (subject, onBefore, onOn, onAfter) {\n      return subject.fold(onBefore, onOn, onAfter);\n    };\n    var getStart$1 = function (situ) {\n      return situ.fold(identity$1, identity$1, identity$1);\n    };\n    var before = adt$6.before;\n    var on$1 = adt$6.on;\n    var after$1 = adt$6.after;\n    var Situ = {\n      before: before,\n      on: on$1,\n      after: after$1,\n      cata: cata,\n      getStart: getStart$1\n    };\n\n    var adt$5 = Adt.generate([\n      { domRange: ['rng'] },\n      {\n        relative: [\n          'startSitu',\n          'finishSitu'\n        ]\n      },\n      {\n        exact: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var exactFromRange = function (simRange) {\n      return adt$5.exact(simRange.start, simRange.soffset, simRange.finish, simRange.foffset);\n    };\n    var getStart = function (selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return SugarElement.fromDom(rng.startContainer);\n        },\n        relative: function (startSitu, _finishSitu) {\n          return Situ.getStart(startSitu);\n        },\n        exact: function (start, _soffset, _finish, _foffset) {\n          return start;\n        }\n      });\n    };\n    var domRange = adt$5.domRange;\n    var relative = adt$5.relative;\n    var exact = adt$5.exact;\n    var getWin = function (selection) {\n      var start = getStart(selection);\n      return defaultView(start);\n    };\n    var range$1 = SimRange.create;\n    var SimSelection = {\n      domRange: domRange,\n      relative: relative,\n      exact: exact,\n      exactFromRange: exactFromRange,\n      getWin: getWin,\n      range: range$1\n    };\n\n    var setStart = function (rng, situ) {\n      situ.fold(function (e) {\n        rng.setStartBefore(e.dom);\n      }, function (e, o) {\n        rng.setStart(e.dom, o);\n      }, function (e) {\n        rng.setStartAfter(e.dom);\n      });\n    };\n    var setFinish = function (rng, situ) {\n      situ.fold(function (e) {\n        rng.setEndBefore(e.dom);\n      }, function (e, o) {\n        rng.setEnd(e.dom, o);\n      }, function (e) {\n        rng.setEndAfter(e.dom);\n      });\n    };\n    var relativeToNative = function (win, startSitu, finishSitu) {\n      var range = win.document.createRange();\n      setStart(range, startSitu);\n      setFinish(range, finishSitu);\n      return range;\n    };\n    var exactToNative = function (win, start, soffset, finish, foffset) {\n      var rng = win.document.createRange();\n      rng.setStart(start.dom, soffset);\n      rng.setEnd(finish.dom, foffset);\n      return rng;\n    };\n    var toRect = function (rect) {\n      return {\n        left: rect.left,\n        top: rect.top,\n        right: rect.right,\n        bottom: rect.bottom,\n        width: rect.width,\n        height: rect.height\n      };\n    };\n    var getFirstRect$1 = function (rng) {\n      var rects = rng.getClientRects();\n      var rect = rects.length > 0 ? rects[0] : rng.getBoundingClientRect();\n      return rect.width > 0 || rect.height > 0 ? Optional.some(rect).map(toRect) : Optional.none();\n    };\n    var getBounds$2 = function (rng) {\n      var rect = rng.getBoundingClientRect();\n      return rect.width > 0 || rect.height > 0 ? Optional.some(rect).map(toRect) : Optional.none();\n    };\n\n    var adt$4 = Adt.generate([\n      {\n        ltr: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      },\n      {\n        rtl: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var fromRange = function (win, type, range) {\n      return type(SugarElement.fromDom(range.startContainer), range.startOffset, SugarElement.fromDom(range.endContainer), range.endOffset);\n    };\n    var getRanges = function (win, selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return {\n            ltr: constant$1(rng),\n            rtl: Optional.none\n          };\n        },\n        relative: function (startSitu, finishSitu) {\n          return {\n            ltr: cached(function () {\n              return relativeToNative(win, startSitu, finishSitu);\n            }),\n            rtl: cached(function () {\n              return Optional.some(relativeToNative(win, finishSitu, startSitu));\n            })\n          };\n        },\n        exact: function (start, soffset, finish, foffset) {\n          return {\n            ltr: cached(function () {\n              return exactToNative(win, start, soffset, finish, foffset);\n            }),\n            rtl: cached(function () {\n              return Optional.some(exactToNative(win, finish, foffset, start, soffset));\n            })\n          };\n        }\n      });\n    };\n    var doDiagnose = function (win, ranges) {\n      var rng = ranges.ltr();\n      if (rng.collapsed) {\n        var reversed = ranges.rtl().filter(function (rev) {\n          return rev.collapsed === false;\n        });\n        return reversed.map(function (rev) {\n          return adt$4.rtl(SugarElement.fromDom(rev.endContainer), rev.endOffset, SugarElement.fromDom(rev.startContainer), rev.startOffset);\n        }).getOrThunk(function () {\n          return fromRange(win, adt$4.ltr, rng);\n        });\n      } else {\n        return fromRange(win, adt$4.ltr, rng);\n      }\n    };\n    var diagnose = function (win, selection) {\n      var ranges = getRanges(win, selection);\n      return doDiagnose(win, ranges);\n    };\n    var asLtrRange = function (win, selection) {\n      var diagnosis = diagnose(win, selection);\n      return diagnosis.match({\n        ltr: function (start, soffset, finish, foffset) {\n          var rng = win.document.createRange();\n          rng.setStart(start.dom, soffset);\n          rng.setEnd(finish.dom, foffset);\n          return rng;\n        },\n        rtl: function (start, soffset, finish, foffset) {\n          var rng = win.document.createRange();\n          rng.setStart(finish.dom, foffset);\n          rng.setEnd(start.dom, soffset);\n          return rng;\n        }\n      });\n    };\n    adt$4.ltr;\n    adt$4.rtl;\n\n    var NodeValue = function (is, name) {\n      var get = function (element) {\n        if (!is(element)) {\n          throw new Error('Can only get ' + name + ' value of a ' + name + ' node');\n        }\n        return getOption(element).getOr('');\n      };\n      var getOption = function (element) {\n        return is(element) ? Optional.from(element.dom.nodeValue) : Optional.none();\n      };\n      var set = function (element, value) {\n        if (!is(element)) {\n          throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');\n        }\n        element.dom.nodeValue = value;\n      };\n      return {\n        get: get,\n        getOption: getOption,\n        set: set\n      };\n    };\n\n    var api = NodeValue(isText$1, 'text');\n    var get$3 = function (element) {\n      return api.get(element);\n    };\n    var getOption = function (element) {\n      return api.getOption(element);\n    };\n\n    var getEnd = function (element) {\n      return name$2(element) === 'img' ? 1 : getOption(element).fold(function () {\n        return children(element).length;\n      }, function (v) {\n        return v.length;\n      });\n    };\n    var isTextNodeWithCursorPosition = function (el) {\n      return getOption(el).filter(function (text) {\n        return text.trim().length !== 0 || text.indexOf(nbsp) > -1;\n      }).isSome();\n    };\n    var elementsWithCursorPosition = [\n      'img',\n      'br'\n    ];\n    var isCursorPosition = function (elem) {\n      var hasCursorPosition = isTextNodeWithCursorPosition(elem);\n      return hasCursorPosition || contains$2(elementsWithCursorPosition, name$2(elem));\n    };\n\n    var last$1 = function (element) {\n      return descendantRtl(element, isCursorPosition);\n    };\n    var descendantRtl = function (scope, predicate) {\n      var descend = function (element) {\n        var children$1 = children(element);\n        for (var i = children$1.length - 1; i >= 0; i--) {\n          var child = children$1[i];\n          if (predicate(child)) {\n            return Optional.some(child);\n          }\n          var res = descend(child);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Optional.none();\n      };\n      return descend(scope);\n    };\n\n    var descendants = function (scope, selector) {\n      return all$3(selector, scope);\n    };\n\n    var makeRange = function (start, soffset, finish, foffset) {\n      var doc = owner$4(start);\n      var rng = doc.dom.createRange();\n      rng.setStart(start.dom, soffset);\n      rng.setEnd(finish.dom, foffset);\n      return rng;\n    };\n    var after = function (start, soffset, finish, foffset) {\n      var r = makeRange(start, soffset, finish, foffset);\n      var same = eq(start, finish) && soffset === foffset;\n      return r.collapsed && !same;\n    };\n\n    var getNativeSelection = function (win) {\n      return Optional.from(win.getSelection());\n    };\n    var readRange = function (selection) {\n      if (selection.rangeCount > 0) {\n        var firstRng = selection.getRangeAt(0);\n        var lastRng = selection.getRangeAt(selection.rangeCount - 1);\n        return Optional.some(SimRange.create(SugarElement.fromDom(firstRng.startContainer), firstRng.startOffset, SugarElement.fromDom(lastRng.endContainer), lastRng.endOffset));\n      } else {\n        return Optional.none();\n      }\n    };\n    var doGetExact = function (selection) {\n      if (selection.anchorNode === null || selection.focusNode === null) {\n        return readRange(selection);\n      } else {\n        var anchor = SugarElement.fromDom(selection.anchorNode);\n        var focus_1 = SugarElement.fromDom(selection.focusNode);\n        return after(anchor, selection.anchorOffset, focus_1, selection.focusOffset) ? Optional.some(SimRange.create(anchor, selection.anchorOffset, focus_1, selection.focusOffset)) : readRange(selection);\n      }\n    };\n    var getExact = function (win) {\n      return getNativeSelection(win).filter(function (sel) {\n        return sel.rangeCount > 0;\n      }).bind(doGetExact);\n    };\n    var getFirstRect = function (win, selection) {\n      var rng = asLtrRange(win, selection);\n      return getFirstRect$1(rng);\n    };\n    var getBounds$1 = function (win, selection) {\n      var rng = asLtrRange(win, selection);\n      return getBounds$2(rng);\n    };\n\n    var point$1 = function (element, offset) {\n      return {\n        element: element,\n        offset: offset\n      };\n    };\n    var descendOnce$1 = function (element, offset) {\n      var children$1 = children(element);\n      if (children$1.length === 0) {\n        return point$1(element, offset);\n      } else if (offset < children$1.length) {\n        return point$1(children$1[offset], 0);\n      } else {\n        var last = children$1[children$1.length - 1];\n        var len = isText$1(last) ? get$3(last).length : children(last).length;\n        return point$1(last, len);\n      }\n    };\n\n    var descendOnce = function (element, offset) {\n      return isText$1(element) ? point$1(element, offset) : descendOnce$1(element, offset);\n    };\n    var getAnchorSelection = function (win, anchorInfo) {\n      var getSelection = anchorInfo.getSelection.getOrThunk(function () {\n        return function () {\n          return getExact(win);\n        };\n      });\n      return getSelection().map(function (sel) {\n        var modStart = descendOnce(sel.start, sel.soffset);\n        var modFinish = descendOnce(sel.finish, sel.foffset);\n        return SimSelection.range(modStart.element, modStart.offset, modFinish.element, modFinish.offset);\n      });\n    };\n    var placement$1 = function (component, anchorInfo, origin) {\n      var win = defaultView(anchorInfo.root).dom;\n      var rootPoint = getRootPoint(component, origin, anchorInfo);\n      var selectionBox = getAnchorSelection(win, anchorInfo).bind(function (sel) {\n        var optRect = getBounds$1(win, SimSelection.exactFromRange(sel)).orThunk(function () {\n          var x = SugarElement.fromText(zeroWidth);\n          before$2(sel.start, x);\n          var rect = getFirstRect(win, SimSelection.exact(x, 0, x, 1));\n          remove$5(x);\n          return rect;\n        });\n        return optRect.bind(function (rawRect) {\n          return getBox(rawRect.left, rawRect.top, rawRect.width, rawRect.height);\n        });\n      });\n      var targetElement = getAnchorSelection(win, anchorInfo).bind(function (sel) {\n        return isElement$2(sel.start) ? Optional.some(sel.start) : parentNode(sel.start);\n      });\n      var elem = targetElement.getOr(component.element);\n      return calcNewAnchor(selectionBox, rootPoint, anchorInfo, origin, elem);\n    };\n    var SelectionAnchor = [\n      option('getSelection'),\n      required$1('root'),\n      option('bubble'),\n      schema$y(),\n      defaulted('overrides', {}),\n      defaulted('showAbove', false),\n      output$1('placement', placement$1)\n    ];\n\n    var labelPrefix$1 = 'link-layout';\n    var eastX = function (anchor) {\n      return anchor.x + anchor.width;\n    };\n    var westX = function (anchor, element) {\n      return anchor.x - element.width;\n    };\n    var northY$1 = function (anchor, element) {\n      return anchor.y - element.height + anchor.height;\n    };\n    var southY$1 = function (anchor) {\n      return anchor.y;\n    };\n    var southeast$1 = function (anchor, element, bubbles) {\n      return nu$6(eastX(anchor), southY$1(anchor), bubbles.southeast(), southeast$3(), 'southeast', boundsRestriction(anchor, {\n        left: 0,\n        top: 2\n      }), labelPrefix$1);\n    };\n    var southwest$1 = function (anchor, element, bubbles) {\n      return nu$6(westX(anchor, element), southY$1(anchor), bubbles.southwest(), southwest$3(), 'southwest', boundsRestriction(anchor, {\n        right: 1,\n        top: 2\n      }), labelPrefix$1);\n    };\n    var northeast$1 = function (anchor, element, bubbles) {\n      return nu$6(eastX(anchor), northY$1(anchor, element), bubbles.northeast(), northeast$3(), 'northeast', boundsRestriction(anchor, {\n        left: 0,\n        bottom: 3\n      }), labelPrefix$1);\n    };\n    var northwest$1 = function (anchor, element, bubbles) {\n      return nu$6(westX(anchor, element), northY$1(anchor, element), bubbles.northwest(), northwest$3(), 'northwest', boundsRestriction(anchor, {\n        right: 1,\n        bottom: 3\n      }), labelPrefix$1);\n    };\n    var all = function () {\n      return [\n        southeast$1,\n        southwest$1,\n        northeast$1,\n        northwest$1\n      ];\n    };\n    var allRtl = function () {\n      return [\n        southwest$1,\n        southeast$1,\n        northwest$1,\n        northeast$1\n      ];\n    };\n\n    var placement = function (component, submenuInfo, origin) {\n      var anchorBox = toBox(origin, submenuInfo.item.element);\n      var layouts = get$4(component.element, submenuInfo, all(), allRtl(), all(), allRtl(), Optional.none());\n      return Optional.some(nu$4({\n        anchorBox: anchorBox,\n        bubble: fallback(),\n        overrides: submenuInfo.overrides,\n        layouts: layouts,\n        placer: Optional.none()\n      }));\n    };\n    var SubmenuAnchor = [\n      required$1('item'),\n      schema$y(),\n      defaulted('overrides', {}),\n      output$1('placement', placement)\n    ];\n\n    var AnchorSchema = choose$1('type', {\n      selection: SelectionAnchor,\n      node: NodeAnchor,\n      hotspot: HotspotAnchor,\n      submenu: SubmenuAnchor,\n      makeshift: MakeshiftAnchor\n    });\n\n    var TransitionSchema = [\n      requiredArrayOf('classes', string),\n      defaultedStringEnum('mode', 'all', [\n        'all',\n        'layout',\n        'placement'\n      ])\n    ];\n    var PositionSchema = [\n      defaulted('useFixed', never),\n      option('getBounds')\n    ];\n    var PlacementSchema = [\n      requiredOf('anchor', AnchorSchema),\n      optionObjOf('transition', TransitionSchema)\n    ];\n\n    var getFixedOrigin = function () {\n      var html = document.documentElement;\n      return fixed$1(0, 0, html.clientWidth, html.clientHeight);\n    };\n    var getRelativeOrigin = function (component) {\n      var position = absolute$3(component.element);\n      var bounds = component.element.dom.getBoundingClientRect();\n      return relative$1(position.left, position.top, bounds.width, bounds.height);\n    };\n    var place = function (component, origin, anchoring, getBounds, placee, lastPlace, transition) {\n      var anchor = box(anchoring.anchorBox, origin);\n      return simple(anchor, placee.element, anchoring.bubble, anchoring.layouts, lastPlace, getBounds, anchoring.overrides, transition);\n    };\n    var position$1 = function (component, posConfig, posState, placee, placementSpec) {\n      positionWithin(component, posConfig, posState, placee, placementSpec, Optional.none());\n    };\n    var positionWithin = function (component, posConfig, posState, placee, placementSpec, boxElement) {\n      var boundsBox = boxElement.map(box$1);\n      return positionWithinBounds(component, posConfig, posState, placee, placementSpec, boundsBox);\n    };\n    var positionWithinBounds = function (component, posConfig, posState, placee, placementSpec, bounds) {\n      var placeeDetail = asRawOrDie$1('placement.info', objOf(PlacementSchema), placementSpec);\n      var anchorage = placeeDetail.anchor;\n      var element = placee.element;\n      var placeeState = posState.get(placee.uid);\n      preserve$1(function () {\n        set$7(element, 'position', 'fixed');\n        var oldVisibility = getRaw(element, 'visibility');\n        set$7(element, 'visibility', 'hidden');\n        var origin = posConfig.useFixed() ? getFixedOrigin() : getRelativeOrigin(component);\n        var placer = anchorage.placement;\n        var getBounds = bounds.map(constant$1).or(posConfig.getBounds);\n        placer(component, anchorage, origin).each(function (anchoring) {\n          var doPlace = anchoring.placer.getOr(place);\n          var newState = doPlace(component, origin, anchoring, getBounds, placee, placeeState, placeeDetail.transition);\n          posState.set(placee.uid, newState);\n        });\n        oldVisibility.fold(function () {\n          remove$6(element, 'visibility');\n        }, function (vis) {\n          set$7(element, 'visibility', vis);\n        });\n        if (getRaw(element, 'left').isNone() && getRaw(element, 'top').isNone() && getRaw(element, 'right').isNone() && getRaw(element, 'bottom').isNone() && is$1(getRaw(element, 'position'), 'fixed')) {\n          remove$6(element, 'position');\n        }\n      }, element);\n    };\n    var getMode = function (component, pConfig, _pState) {\n      return pConfig.useFixed() ? 'fixed' : 'absolute';\n    };\n    var reset$1 = function (component, pConfig, posState, placee) {\n      var element = placee.element;\n      each$1([\n        'position',\n        'left',\n        'right',\n        'top',\n        'bottom'\n      ], function (prop) {\n        return remove$6(element, prop);\n      });\n      reset$2(element);\n      posState.clear(placee.uid);\n    };\n\n    var PositionApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        position: position$1,\n        positionWithin: positionWithin,\n        positionWithinBounds: positionWithinBounds,\n        getMode: getMode,\n        reset: reset$1\n    });\n\n    var init$g = function () {\n      var state = {};\n      var set = function (id, data) {\n        state[id] = data;\n      };\n      var get = function (id) {\n        return get$e(state, id);\n      };\n      var clear = function (id) {\n        if (isNonNullable(id)) {\n          delete state[id];\n        } else {\n          state = {};\n        }\n      };\n      return nu$8({\n        readState: function () {\n          return state;\n        },\n        clear: clear,\n        set: set,\n        get: get\n      });\n    };\n\n    var PositioningState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$g\n    });\n\n    var Positioning = create$8({\n      fields: PositionSchema,\n      name: 'positioning',\n      active: ActivePosition,\n      apis: PositionApis,\n      state: PositioningState\n    });\n\n    var fireDetaching = function (component) {\n      emit(component, detachedFromDom());\n      var children = component.components();\n      each$1(children, fireDetaching);\n    };\n    var fireAttaching = function (component) {\n      var children = component.components();\n      each$1(children, fireAttaching);\n      emit(component, attachedToDom());\n    };\n    var attach$1 = function (parent, child) {\n      append$2(parent.element, child.element);\n    };\n    var detachChildren$1 = function (component) {\n      each$1(component.components(), function (childComp) {\n        return remove$5(childComp.element);\n      });\n      empty(component.element);\n      component.syncComponents();\n    };\n    var replaceChildren = function (component, newChildren) {\n      var subs = component.components();\n      detachChildren$1(component);\n      var deleted = difference(subs, newChildren);\n      each$1(deleted, function (comp) {\n        fireDetaching(comp);\n        component.getSystem().removeFromWorld(comp);\n      });\n      each$1(newChildren, function (childComp) {\n        if (!childComp.getSystem().isConnected()) {\n          component.getSystem().addToWorld(childComp);\n          attach$1(component, childComp);\n          if (inBody(component.element)) {\n            fireAttaching(childComp);\n          }\n        } else {\n          attach$1(component, childComp);\n        }\n        component.syncComponents();\n      });\n    };\n\n    var attach = function (parent, child) {\n      attachWith(parent, child, append$2);\n    };\n    var attachWith = function (parent, child, insertion) {\n      parent.getSystem().addToWorld(child);\n      insertion(parent.element, child.element);\n      if (inBody(parent.element)) {\n        fireAttaching(child);\n      }\n      parent.syncComponents();\n    };\n    var doDetach = function (component) {\n      fireDetaching(component);\n      remove$5(component.element);\n      component.getSystem().removeFromWorld(component);\n    };\n    var detach = function (component) {\n      var parent$1 = parent(component.element).bind(function (p) {\n        return component.getSystem().getByDom(p).toOptional();\n      });\n      doDetach(component);\n      parent$1.each(function (p) {\n        p.syncComponents();\n      });\n    };\n    var detachChildren = function (component) {\n      var subs = component.components();\n      each$1(subs, doDetach);\n      empty(component.element);\n      component.syncComponents();\n    };\n    var attachSystem = function (element, guiSystem) {\n      attachSystemWith(element, guiSystem, append$2);\n    };\n    var attachSystemAfter = function (element, guiSystem) {\n      attachSystemWith(element, guiSystem, after$2);\n    };\n    var attachSystemWith = function (element, guiSystem, inserter) {\n      inserter(element, guiSystem.element);\n      var children$1 = children(guiSystem.element);\n      each$1(children$1, function (child) {\n        guiSystem.getByDom(child).each(fireAttaching);\n      });\n    };\n    var detachSystem = function (guiSystem) {\n      var children$1 = children(guiSystem.element);\n      each$1(children$1, function (child) {\n        guiSystem.getByDom(child).each(fireDetaching);\n      });\n      remove$5(guiSystem.element);\n    };\n\n    var rebuild = function (sandbox, sConfig, sState, data) {\n      sState.get().each(function (_data) {\n        detachChildren(sandbox);\n      });\n      var point = sConfig.getAttachPoint(sandbox);\n      attach(point, sandbox);\n      var built = sandbox.getSystem().build(data);\n      attach(sandbox, built);\n      sState.set(built);\n      return built;\n    };\n    var open$1 = function (sandbox, sConfig, sState, data) {\n      var newState = rebuild(sandbox, sConfig, sState, data);\n      sConfig.onOpen(sandbox, newState);\n      return newState;\n    };\n    var setContent = function (sandbox, sConfig, sState, data) {\n      return sState.get().map(function () {\n        return rebuild(sandbox, sConfig, sState, data);\n      });\n    };\n    var openWhileCloaked = function (sandbox, sConfig, sState, data, transaction) {\n      cloak(sandbox, sConfig);\n      open$1(sandbox, sConfig, sState, data);\n      transaction();\n      decloak(sandbox, sConfig);\n    };\n    var close$1 = function (sandbox, sConfig, sState) {\n      sState.get().each(function (data) {\n        detachChildren(sandbox);\n        detach(sandbox);\n        sConfig.onClose(sandbox, data);\n        sState.clear();\n      });\n    };\n    var isOpen$1 = function (_sandbox, _sConfig, sState) {\n      return sState.isOpen();\n    };\n    var isPartOf = function (sandbox, sConfig, sState, queryElem) {\n      return isOpen$1(sandbox, sConfig, sState) && sState.get().exists(function (data) {\n        return sConfig.isPartOf(sandbox, data, queryElem);\n      });\n    };\n    var getState$2 = function (_sandbox, _sConfig, sState) {\n      return sState.get();\n    };\n    var store = function (sandbox, cssKey, attr, newValue) {\n      getRaw(sandbox.element, cssKey).fold(function () {\n        remove$7(sandbox.element, attr);\n      }, function (v) {\n        set$8(sandbox.element, attr, v);\n      });\n      set$7(sandbox.element, cssKey, newValue);\n    };\n    var restore = function (sandbox, cssKey, attr) {\n      getOpt(sandbox.element, attr).fold(function () {\n        return remove$6(sandbox.element, cssKey);\n      }, function (oldValue) {\n        return set$7(sandbox.element, cssKey, oldValue);\n      });\n    };\n    var cloak = function (sandbox, sConfig, _sState) {\n      var sink = sConfig.getAttachPoint(sandbox);\n      set$7(sandbox.element, 'position', Positioning.getMode(sink));\n      store(sandbox, 'visibility', sConfig.cloakVisibilityAttr, 'hidden');\n    };\n    var hasPosition = function (element) {\n      return exists([\n        'top',\n        'left',\n        'right',\n        'bottom'\n      ], function (pos) {\n        return getRaw(element, pos).isSome();\n      });\n    };\n    var decloak = function (sandbox, sConfig, _sState) {\n      if (!hasPosition(sandbox.element)) {\n        remove$6(sandbox.element, 'position');\n      }\n      restore(sandbox, 'visibility', sConfig.cloakVisibilityAttr);\n    };\n\n    var SandboxApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        cloak: cloak,\n        decloak: decloak,\n        open: open$1,\n        openWhileCloaked: openWhileCloaked,\n        close: close$1,\n        isOpen: isOpen$1,\n        isPartOf: isPartOf,\n        getState: getState$2,\n        setContent: setContent\n    });\n\n    var events$g = function (sandboxConfig, sandboxState) {\n      return derive$2([run$1(sandboxClose(), function (sandbox, _simulatedEvent) {\n          close$1(sandbox, sandboxConfig, sandboxState);\n        })]);\n    };\n\n    var ActiveSandbox = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$g\n    });\n\n    var SandboxSchema = [\n      onHandler('onOpen'),\n      onHandler('onClose'),\n      required$1('isPartOf'),\n      required$1('getAttachPoint'),\n      defaulted('cloakVisibilityAttr', 'data-precloak-visibility')\n    ];\n\n    var init$f = function () {\n      var contents = value$1();\n      var readState = constant$1('not-implemented');\n      return nu$8({\n        readState: readState,\n        isOpen: contents.isSet,\n        clear: contents.clear,\n        set: contents.set,\n        get: contents.get\n      });\n    };\n\n    var SandboxState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$f\n    });\n\n    var Sandboxing = create$8({\n      fields: SandboxSchema,\n      name: 'sandboxing',\n      active: ActiveSandbox,\n      apis: SandboxApis,\n      state: SandboxState\n    });\n\n    var dismissPopups = constant$1('dismiss.popups');\n    var repositionPopups = constant$1('reposition.popups');\n    var mouseReleased = constant$1('mouse.released');\n\n    var schema$x = objOfOnly([\n      defaulted('isExtraPart', never),\n      optionObjOf('fireEventInstead', [defaulted('event', dismissRequested())])\n    ]);\n    var receivingChannel$1 = function (rawSpec) {\n      var _a;\n      var detail = asRawOrDie$1('Dismissal', schema$x, rawSpec);\n      return _a = {}, _a[dismissPopups()] = {\n        schema: objOfOnly([required$1('target')]),\n        onReceive: function (sandbox, data) {\n          if (Sandboxing.isOpen(sandbox)) {\n            var isPart = Sandboxing.isPartOf(sandbox, data.target) || detail.isExtraPart(sandbox, data.target);\n            if (!isPart) {\n              detail.fireEventInstead.fold(function () {\n                return Sandboxing.close(sandbox);\n              }, function (fe) {\n                return emit(sandbox, fe.event);\n              });\n            }\n          }\n        }\n      }, _a;\n    };\n\n    var schema$w = objOfOnly([\n      optionObjOf('fireEventInstead', [defaulted('event', repositionRequested())]),\n      requiredFunction('doReposition')\n    ]);\n    var receivingChannel = function (rawSpec) {\n      var _a;\n      var detail = asRawOrDie$1('Reposition', schema$w, rawSpec);\n      return _a = {}, _a[repositionPopups()] = {\n        onReceive: function (sandbox) {\n          if (Sandboxing.isOpen(sandbox)) {\n            detail.fireEventInstead.fold(function () {\n              return detail.doReposition(sandbox);\n            }, function (fe) {\n              return emit(sandbox, fe.event);\n            });\n          }\n        }\n      }, _a;\n    };\n\n    var onLoad$5 = function (component, repConfig, repState) {\n      repConfig.store.manager.onLoad(component, repConfig, repState);\n    };\n    var onUnload$2 = function (component, repConfig, repState) {\n      repConfig.store.manager.onUnload(component, repConfig, repState);\n    };\n    var setValue$3 = function (component, repConfig, repState, data) {\n      repConfig.store.manager.setValue(component, repConfig, repState, data);\n    };\n    var getValue$3 = function (component, repConfig, repState) {\n      return repConfig.store.manager.getValue(component, repConfig, repState);\n    };\n    var getState$1 = function (component, repConfig, repState) {\n      return repState;\n    };\n\n    var RepresentApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        onLoad: onLoad$5,\n        onUnload: onUnload$2,\n        setValue: setValue$3,\n        getValue: getValue$3,\n        getState: getState$1\n    });\n\n    var events$f = function (repConfig, repState) {\n      var es = repConfig.resetOnDom ? [\n        runOnAttached(function (comp, _se) {\n          onLoad$5(comp, repConfig, repState);\n        }),\n        runOnDetached(function (comp, _se) {\n          onUnload$2(comp, repConfig, repState);\n        })\n      ] : [loadEvent(repConfig, repState, onLoad$5)];\n      return derive$2(es);\n    };\n\n    var ActiveRepresenting = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$f\n    });\n\n    var memory$1 = function () {\n      var data = Cell(null);\n      var readState = function () {\n        return {\n          mode: 'memory',\n          value: data.get()\n        };\n      };\n      var isNotSet = function () {\n        return data.get() === null;\n      };\n      var clear = function () {\n        data.set(null);\n      };\n      return nu$8({\n        set: data.set,\n        get: data.get,\n        isNotSet: isNotSet,\n        clear: clear,\n        readState: readState\n      });\n    };\n    var manual = function () {\n      var readState = noop;\n      return nu$8({ readState: readState });\n    };\n    var dataset = function () {\n      var dataByValue = Cell({});\n      var dataByText = Cell({});\n      var readState = function () {\n        return {\n          mode: 'dataset',\n          dataByValue: dataByValue.get(),\n          dataByText: dataByText.get()\n        };\n      };\n      var clear = function () {\n        dataByValue.set({});\n        dataByText.set({});\n      };\n      var lookup = function (itemString) {\n        return get$e(dataByValue.get(), itemString).orThunk(function () {\n          return get$e(dataByText.get(), itemString);\n        });\n      };\n      var update = function (items) {\n        var currentDataByValue = dataByValue.get();\n        var currentDataByText = dataByText.get();\n        var newDataByValue = {};\n        var newDataByText = {};\n        each$1(items, function (item) {\n          newDataByValue[item.value] = item;\n          get$e(item, 'meta').each(function (meta) {\n            get$e(meta, 'text').each(function (text) {\n              newDataByText[text] = item;\n            });\n          });\n        });\n        dataByValue.set(__assign(__assign({}, currentDataByValue), newDataByValue));\n        dataByText.set(__assign(__assign({}, currentDataByText), newDataByText));\n      };\n      return nu$8({\n        readState: readState,\n        lookup: lookup,\n        update: update,\n        clear: clear\n      });\n    };\n    var init$e = function (spec) {\n      return spec.store.manager.state(spec);\n    };\n\n    var RepresentState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        memory: memory$1,\n        dataset: dataset,\n        manual: manual,\n        init: init$e\n    });\n\n    var setValue$2 = function (component, repConfig, repState, data) {\n      var store = repConfig.store;\n      repState.update([data]);\n      store.setValue(component, data);\n      repConfig.onSetValue(component, data);\n    };\n    var getValue$2 = function (component, repConfig, repState) {\n      var store = repConfig.store;\n      var key = store.getDataKey(component);\n      return repState.lookup(key).getOrThunk(function () {\n        return store.getFallbackEntry(key);\n      });\n    };\n    var onLoad$4 = function (component, repConfig, repState) {\n      var store = repConfig.store;\n      store.initialValue.each(function (data) {\n        setValue$2(component, repConfig, repState, data);\n      });\n    };\n    var onUnload$1 = function (component, repConfig, repState) {\n      repState.clear();\n    };\n    var DatasetStore = [\n      option('initialValue'),\n      required$1('getFallbackEntry'),\n      required$1('getDataKey'),\n      required$1('setValue'),\n      output$1('manager', {\n        setValue: setValue$2,\n        getValue: getValue$2,\n        onLoad: onLoad$4,\n        onUnload: onUnload$1,\n        state: dataset\n      })\n    ];\n\n    var getValue$1 = function (component, repConfig, _repState) {\n      return repConfig.store.getValue(component);\n    };\n    var setValue$1 = function (component, repConfig, _repState, data) {\n      repConfig.store.setValue(component, data);\n      repConfig.onSetValue(component, data);\n    };\n    var onLoad$3 = function (component, repConfig, _repState) {\n      repConfig.store.initialValue.each(function (data) {\n        repConfig.store.setValue(component, data);\n      });\n    };\n    var ManualStore = [\n      required$1('getValue'),\n      defaulted('setValue', noop),\n      option('initialValue'),\n      output$1('manager', {\n        setValue: setValue$1,\n        getValue: getValue$1,\n        onLoad: onLoad$3,\n        onUnload: noop,\n        state: NoState.init\n      })\n    ];\n\n    var setValue = function (component, repConfig, repState, data) {\n      repState.set(data);\n      repConfig.onSetValue(component, data);\n    };\n    var getValue = function (component, repConfig, repState) {\n      return repState.get();\n    };\n    var onLoad$2 = function (component, repConfig, repState) {\n      repConfig.store.initialValue.each(function (initVal) {\n        if (repState.isNotSet()) {\n          repState.set(initVal);\n        }\n      });\n    };\n    var onUnload = function (component, repConfig, repState) {\n      repState.clear();\n    };\n    var MemoryStore = [\n      option('initialValue'),\n      output$1('manager', {\n        setValue: setValue,\n        getValue: getValue,\n        onLoad: onLoad$2,\n        onUnload: onUnload,\n        state: memory$1\n      })\n    ];\n\n    var RepresentSchema = [\n      defaultedOf('store', { mode: 'memory' }, choose$1('mode', {\n        memory: MemoryStore,\n        manual: ManualStore,\n        dataset: DatasetStore\n      })),\n      onHandler('onSetValue'),\n      defaulted('resetOnDom', false)\n    ];\n\n    var Representing = create$8({\n      fields: RepresentSchema,\n      name: 'representing',\n      active: ActiveRepresenting,\n      apis: RepresentApis,\n      extra: {\n        setValueFrom: function (component, source) {\n          var value = Representing.getValue(source);\n          Representing.setValue(component, value);\n        }\n      },\n      state: RepresentState\n    });\n\n    var field = function (name, forbidden) {\n      return defaultedObjOf(name, {}, map$2(forbidden, function (f) {\n        return forbid(f.name(), 'Cannot configure ' + f.name() + ' for ' + name);\n      }).concat([customField('dump', identity$1)]));\n    };\n    var get$2 = function (data) {\n      return data.dump;\n    };\n    var augment = function (data, original) {\n      return __assign(__assign({}, derive$1(original)), data.dump);\n    };\n    var SketchBehaviours = {\n      field: field,\n      augment: augment,\n      get: get$2\n    };\n\n    var _placeholder = 'placeholder';\n    var adt$3 = Adt.generate([\n      {\n        single: [\n          'required',\n          'valueThunk'\n        ]\n      },\n      {\n        multiple: [\n          'required',\n          'valueThunks'\n        ]\n      }\n    ]);\n    var isSubstituted = function (spec) {\n      return has$2(spec, 'uiType');\n    };\n    var subPlaceholder = function (owner, detail, compSpec, placeholders) {\n      if (owner.exists(function (o) {\n          return o !== compSpec.owner;\n        })) {\n        return adt$3.single(true, constant$1(compSpec));\n      }\n      return get$e(placeholders, compSpec.name).fold(function () {\n        throw new Error('Unknown placeholder component: ' + compSpec.name + '\\nKnown: [' + keys(placeholders) + ']\\nNamespace: ' + owner.getOr('none') + '\\nSpec: ' + JSON.stringify(compSpec, null, 2));\n      }, function (newSpec) {\n        return newSpec.replace();\n      });\n    };\n    var scan = function (owner, detail, compSpec, placeholders) {\n      if (isSubstituted(compSpec) && compSpec.uiType === _placeholder) {\n        return subPlaceholder(owner, detail, compSpec, placeholders);\n      } else {\n        return adt$3.single(false, constant$1(compSpec));\n      }\n    };\n    var substitute = function (owner, detail, compSpec, placeholders) {\n      var base = scan(owner, detail, compSpec, placeholders);\n      return base.fold(function (req, valueThunk) {\n        var value = isSubstituted(compSpec) ? valueThunk(detail, compSpec.config, compSpec.validated) : valueThunk(detail);\n        var childSpecs = get$e(value, 'components').getOr([]);\n        var substituted = bind$3(childSpecs, function (c) {\n          return substitute(owner, detail, c, placeholders);\n        });\n        return [__assign(__assign({}, value), { components: substituted })];\n      }, function (req, valuesThunk) {\n        if (isSubstituted(compSpec)) {\n          var values = valuesThunk(detail, compSpec.config, compSpec.validated);\n          var preprocessor = compSpec.validated.preprocess.getOr(identity$1);\n          return preprocessor(values);\n        } else {\n          return valuesThunk(detail);\n        }\n      });\n    };\n    var substituteAll = function (owner, detail, components, placeholders) {\n      return bind$3(components, function (c) {\n        return substitute(owner, detail, c, placeholders);\n      });\n    };\n    var oneReplace = function (label, replacements) {\n      var called = false;\n      var used = function () {\n        return called;\n      };\n      var replace = function () {\n        if (called) {\n          throw new Error('Trying to use the same placeholder more than once: ' + label);\n        }\n        called = true;\n        return replacements;\n      };\n      var required = function () {\n        return replacements.fold(function (req, _) {\n          return req;\n        }, function (req, _) {\n          return req;\n        });\n      };\n      return {\n        name: constant$1(label),\n        required: required,\n        used: used,\n        replace: replace\n      };\n    };\n    var substitutePlaces = function (owner, detail, components, placeholders) {\n      var ps = map$1(placeholders, function (ph, name) {\n        return oneReplace(name, ph);\n      });\n      var outcome = substituteAll(owner, detail, components, ps);\n      each(ps, function (p) {\n        if (p.used() === false && p.required()) {\n          throw new Error('Placeholder: ' + p.name() + ' was not found in components list\\nNamespace: ' + owner.getOr('none') + '\\nComponents: ' + JSON.stringify(detail.components, null, 2));\n        }\n      });\n      return outcome;\n    };\n    var single$2 = adt$3.single;\n    var multiple = adt$3.multiple;\n    var placeholder = constant$1(_placeholder);\n\n    var adt$2 = Adt.generate([\n      { required: ['data'] },\n      { external: ['data'] },\n      { optional: ['data'] },\n      { group: ['data'] }\n    ]);\n    var fFactory = defaulted('factory', { sketch: identity$1 });\n    var fSchema = defaulted('schema', []);\n    var fName = required$1('name');\n    var fPname = field$1('pname', 'pname', defaultedThunk(function (typeSpec) {\n      return '<alloy.' + generate$6(typeSpec.name) + '>';\n    }), anyValue());\n    var fGroupSchema = customField('schema', function () {\n      return [option('preprocess')];\n    });\n    var fDefaults = defaulted('defaults', constant$1({}));\n    var fOverrides = defaulted('overrides', constant$1({}));\n    var requiredSpec = objOf([\n      fFactory,\n      fSchema,\n      fName,\n      fPname,\n      fDefaults,\n      fOverrides\n    ]);\n    var externalSpec = objOf([\n      fFactory,\n      fSchema,\n      fName,\n      fDefaults,\n      fOverrides\n    ]);\n    var optionalSpec = objOf([\n      fFactory,\n      fSchema,\n      fName,\n      fPname,\n      fDefaults,\n      fOverrides\n    ]);\n    var groupSpec = objOf([\n      fFactory,\n      fGroupSchema,\n      fName,\n      required$1('unit'),\n      fPname,\n      fDefaults,\n      fOverrides\n    ]);\n    var asNamedPart = function (part) {\n      return part.fold(Optional.some, Optional.none, Optional.some, Optional.some);\n    };\n    var name$1 = function (part) {\n      var get = function (data) {\n        return data.name;\n      };\n      return part.fold(get, get, get, get);\n    };\n    var asCommon = function (part) {\n      return part.fold(identity$1, identity$1, identity$1, identity$1);\n    };\n    var convert = function (adtConstructor, partSchema) {\n      return function (spec) {\n        var data = asRawOrDie$1('Converting part type', partSchema, spec);\n        return adtConstructor(data);\n      };\n    };\n    var required = convert(adt$2.required, requiredSpec);\n    var external$1 = convert(adt$2.external, externalSpec);\n    var optional = convert(adt$2.optional, optionalSpec);\n    var group = convert(adt$2.group, groupSpec);\n    var original = constant$1('entirety');\n\n    var PartType = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        required: required,\n        external: external$1,\n        optional: optional,\n        group: group,\n        asNamedPart: asNamedPart,\n        name: name$1,\n        asCommon: asCommon,\n        original: original\n    });\n\n    var combine = function (detail, data, partSpec, partValidated) {\n      return deepMerge(data.defaults(detail, partSpec, partValidated), partSpec, { uid: detail.partUids[data.name] }, data.overrides(detail, partSpec, partValidated));\n    };\n    var subs = function (owner, detail, parts) {\n      var internals = {};\n      var externals = {};\n      each$1(parts, function (part) {\n        part.fold(function (data) {\n          internals[data.pname] = single$2(true, function (detail, partSpec, partValidated) {\n            return data.factory.sketch(combine(detail, data, partSpec, partValidated));\n          });\n        }, function (data) {\n          var partSpec = detail.parts[data.name];\n          externals[data.name] = constant$1(data.factory.sketch(combine(detail, data, partSpec[original()]), partSpec));\n        }, function (data) {\n          internals[data.pname] = single$2(false, function (detail, partSpec, partValidated) {\n            return data.factory.sketch(combine(detail, data, partSpec, partValidated));\n          });\n        }, function (data) {\n          internals[data.pname] = multiple(true, function (detail, _partSpec, _partValidated) {\n            var units = detail[data.name];\n            return map$2(units, function (u) {\n              return data.factory.sketch(deepMerge(data.defaults(detail, u, _partValidated), u, data.overrides(detail, u)));\n            });\n          });\n        });\n      });\n      return {\n        internals: constant$1(internals),\n        externals: constant$1(externals)\n      };\n    };\n\n    var generate$3 = function (owner, parts) {\n      var r = {};\n      each$1(parts, function (part) {\n        asNamedPart(part).each(function (np) {\n          var g = doGenerateOne(owner, np.pname);\n          r[np.name] = function (config) {\n            var validated = asRawOrDie$1('Part: ' + np.name + ' in ' + owner, objOf(np.schema), config);\n            return __assign(__assign({}, g), {\n              config: config,\n              validated: validated\n            });\n          };\n        });\n      });\n      return r;\n    };\n    var doGenerateOne = function (owner, pname) {\n      return {\n        uiType: placeholder(),\n        owner: owner,\n        name: pname\n      };\n    };\n    var generateOne$1 = function (owner, pname, config) {\n      return {\n        uiType: placeholder(),\n        owner: owner,\n        name: pname,\n        config: config,\n        validated: {}\n      };\n    };\n    var schemas = function (parts) {\n      return bind$3(parts, function (part) {\n        return part.fold(Optional.none, Optional.some, Optional.none, Optional.none).map(function (data) {\n          return requiredObjOf(data.name, data.schema.concat([snapshot(original())]));\n        }).toArray();\n      });\n    };\n    var names = function (parts) {\n      return map$2(parts, name$1);\n    };\n    var substitutes = function (owner, detail, parts) {\n      return subs(owner, detail, parts);\n    };\n    var components$1 = function (owner, detail, internals) {\n      return substitutePlaces(Optional.some(owner), detail, detail.components, internals);\n    };\n    var getPart = function (component, detail, partKey) {\n      var uid = detail.partUids[partKey];\n      return component.getSystem().getByUid(uid).toOptional();\n    };\n    var getPartOrDie = function (component, detail, partKey) {\n      return getPart(component, detail, partKey).getOrDie('Could not find part: ' + partKey);\n    };\n    var getParts = function (component, detail, partKeys) {\n      var r = {};\n      var uids = detail.partUids;\n      var system = component.getSystem();\n      each$1(partKeys, function (pk) {\n        r[pk] = constant$1(system.getByUid(uids[pk]));\n      });\n      return r;\n    };\n    var getAllParts = function (component, detail) {\n      var system = component.getSystem();\n      return map$1(detail.partUids, function (pUid, _k) {\n        return constant$1(system.getByUid(pUid));\n      });\n    };\n    var getAllPartNames = function (detail) {\n      return keys(detail.partUids);\n    };\n    var getPartsOrDie = function (component, detail, partKeys) {\n      var r = {};\n      var uids = detail.partUids;\n      var system = component.getSystem();\n      each$1(partKeys, function (pk) {\n        r[pk] = constant$1(system.getByUid(uids[pk]).getOrDie());\n      });\n      return r;\n    };\n    var defaultUids = function (baseUid, partTypes) {\n      var partNames = names(partTypes);\n      return wrapAll(map$2(partNames, function (pn) {\n        return {\n          key: pn,\n          value: baseUid + '-' + pn\n        };\n      }));\n    };\n    var defaultUidsSchema = function (partTypes) {\n      return field$1('partUids', 'partUids', mergeWithThunk(function (spec) {\n        return defaultUids(spec.uid, partTypes);\n      }), anyValue());\n    };\n\n    var AlloyParts = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        generate: generate$3,\n        generateOne: generateOne$1,\n        schemas: schemas,\n        names: names,\n        substitutes: substitutes,\n        components: components$1,\n        defaultUids: defaultUids,\n        defaultUidsSchema: defaultUidsSchema,\n        getAllParts: getAllParts,\n        getAllPartNames: getAllPartNames,\n        getPart: getPart,\n        getPartOrDie: getPartOrDie,\n        getParts: getParts,\n        getPartsOrDie: getPartsOrDie\n    });\n\n    var base = function (partSchemas, partUidsSchemas) {\n      var ps = partSchemas.length > 0 ? [requiredObjOf('parts', partSchemas)] : [];\n      return ps.concat([\n        required$1('uid'),\n        defaulted('dom', {}),\n        defaulted('components', []),\n        snapshot('originalSpec'),\n        defaulted('debug.sketcher', {})\n      ]).concat(partUidsSchemas);\n    };\n    var asRawOrDie = function (label, schema, spec, partSchemas, partUidsSchemas) {\n      var baseS = base(partSchemas, partUidsSchemas);\n      return asRawOrDie$1(label + ' [SpecSchema]', objOfOnly(baseS.concat(schema)), spec);\n    };\n\n    var single$1 = function (owner, schema, factory, spec) {\n      var specWithUid = supplyUid(spec);\n      var detail = asRawOrDie(owner, schema, specWithUid, [], []);\n      return factory(detail, specWithUid);\n    };\n    var composite$1 = function (owner, schema, partTypes, factory, spec) {\n      var specWithUid = supplyUid(spec);\n      var partSchemas = schemas(partTypes);\n      var partUidsSchema = defaultUidsSchema(partTypes);\n      var detail = asRawOrDie(owner, schema, specWithUid, partSchemas, [partUidsSchema]);\n      var subs = substitutes(owner, detail, partTypes);\n      var components = components$1(owner, detail, subs.internals());\n      return factory(detail, components, specWithUid, subs.externals());\n    };\n    var hasUid = function (spec) {\n      return has$2(spec, 'uid');\n    };\n    var supplyUid = function (spec) {\n      return hasUid(spec) ? spec : __assign(__assign({}, spec), { uid: generate$5('uid') });\n    };\n\n    var isSketchSpec = function (spec) {\n      return spec.uid !== undefined;\n    };\n    var singleSchema = objOfOnly([\n      required$1('name'),\n      required$1('factory'),\n      required$1('configFields'),\n      defaulted('apis', {}),\n      defaulted('extraApis', {})\n    ]);\n    var compositeSchema = objOfOnly([\n      required$1('name'),\n      required$1('factory'),\n      required$1('configFields'),\n      required$1('partFields'),\n      defaulted('apis', {}),\n      defaulted('extraApis', {})\n    ]);\n    var single = function (rawConfig) {\n      var config = asRawOrDie$1('Sketcher for ' + rawConfig.name, singleSchema, rawConfig);\n      var sketch = function (spec) {\n        return single$1(config.name, config.configFields, config.factory, spec);\n      };\n      var apis = map$1(config.apis, makeApi);\n      var extraApis = map$1(config.extraApis, function (f, k) {\n        return markAsExtraApi(f, k);\n      });\n      return __assign(__assign({\n        name: config.name,\n        configFields: config.configFields,\n        sketch: sketch\n      }, apis), extraApis);\n    };\n    var composite = function (rawConfig) {\n      var config = asRawOrDie$1('Sketcher for ' + rawConfig.name, compositeSchema, rawConfig);\n      var sketch = function (spec) {\n        return composite$1(config.name, config.configFields, config.partFields, config.factory, spec);\n      };\n      var parts = generate$3(config.name, config.partFields);\n      var apis = map$1(config.apis, makeApi);\n      var extraApis = map$1(config.extraApis, function (f, k) {\n        return markAsExtraApi(f, k);\n      });\n      return __assign(__assign({\n        name: config.name,\n        partFields: config.partFields,\n        configFields: config.configFields,\n        sketch: sketch,\n        parts: parts\n      }, apis), extraApis);\n    };\n\n    var inside = function (target) {\n      return name$2(target) === 'input' && get$d(target, 'type') !== 'radio' || name$2(target) === 'textarea';\n    };\n\n    var getCurrent = function (component, composeConfig, _composeState) {\n      return composeConfig.find(component);\n    };\n\n    var ComposeApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getCurrent: getCurrent\n    });\n\n    var ComposeSchema = [required$1('find')];\n\n    var Composing = create$8({\n      fields: ComposeSchema,\n      name: 'composing',\n      apis: ComposeApis\n    });\n\n    var nativeDisabled = [\n      'input',\n      'button',\n      'textarea',\n      'select'\n    ];\n    var onLoad$1 = function (component, disableConfig, disableState) {\n      var f = disableConfig.disabled() ? disable$1 : enable$1;\n      f(component, disableConfig);\n    };\n    var hasNative = function (component, config) {\n      return config.useNative === true && contains$2(nativeDisabled, name$2(component.element));\n    };\n    var nativeIsDisabled = function (component) {\n      return has$1(component.element, 'disabled');\n    };\n    var nativeDisable = function (component) {\n      set$8(component.element, 'disabled', 'disabled');\n    };\n    var nativeEnable = function (component) {\n      remove$7(component.element, 'disabled');\n    };\n    var ariaIsDisabled = function (component) {\n      return get$d(component.element, 'aria-disabled') === 'true';\n    };\n    var ariaDisable = function (component) {\n      set$8(component.element, 'aria-disabled', 'true');\n    };\n    var ariaEnable = function (component) {\n      set$8(component.element, 'aria-disabled', 'false');\n    };\n    var disable$1 = function (component, disableConfig, _disableState) {\n      disableConfig.disableClass.each(function (disableClass) {\n        add$2(component.element, disableClass);\n      });\n      var f = hasNative(component, disableConfig) ? nativeDisable : ariaDisable;\n      f(component);\n      disableConfig.onDisabled(component);\n    };\n    var enable$1 = function (component, disableConfig, _disableState) {\n      disableConfig.disableClass.each(function (disableClass) {\n        remove$2(component.element, disableClass);\n      });\n      var f = hasNative(component, disableConfig) ? nativeEnable : ariaEnable;\n      f(component);\n      disableConfig.onEnabled(component);\n    };\n    var isDisabled = function (component, disableConfig) {\n      return hasNative(component, disableConfig) ? nativeIsDisabled(component) : ariaIsDisabled(component);\n    };\n    var set$3 = function (component, disableConfig, disableState, disabled) {\n      var f = disabled ? disable$1 : enable$1;\n      f(component, disableConfig);\n    };\n\n    var DisableApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        enable: enable$1,\n        disable: disable$1,\n        isDisabled: isDisabled,\n        onLoad: onLoad$1,\n        set: set$3\n    });\n\n    var exhibit$5 = function (base, disableConfig) {\n      return nu$7({ classes: disableConfig.disabled() ? disableConfig.disableClass.toArray() : [] });\n    };\n    var events$e = function (disableConfig, disableState) {\n      return derive$2([\n        abort(execute$5(), function (component, _simulatedEvent) {\n          return isDisabled(component, disableConfig);\n        }),\n        loadEvent(disableConfig, disableState, onLoad$1)\n      ]);\n    };\n\n    var ActiveDisable = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$5,\n        events: events$e\n    });\n\n    var DisableSchema = [\n      defaultedFunction('disabled', never),\n      defaulted('useNative', true),\n      option('disableClass'),\n      onHandler('onDisabled'),\n      onHandler('onEnabled')\n    ];\n\n    var Disabling = create$8({\n      fields: DisableSchema,\n      name: 'disabling',\n      active: ActiveDisable,\n      apis: DisableApis\n    });\n\n    var dehighlightAllExcept = function (component, hConfig, hState, skip) {\n      var highlighted = descendants(component.element, '.' + hConfig.highlightClass);\n      each$1(highlighted, function (h) {\n        if (!exists(skip, function (skipComp) {\n            return skipComp.element === h;\n          })) {\n          remove$2(h, hConfig.highlightClass);\n          component.getSystem().getByDom(h).each(function (target) {\n            hConfig.onDehighlight(component, target);\n            emit(target, dehighlight$1());\n          });\n        }\n      });\n    };\n    var dehighlightAll = function (component, hConfig, hState) {\n      return dehighlightAllExcept(component, hConfig, hState, []);\n    };\n    var dehighlight = function (component, hConfig, hState, target) {\n      if (isHighlighted(component, hConfig, hState, target)) {\n        remove$2(target.element, hConfig.highlightClass);\n        hConfig.onDehighlight(component, target);\n        emit(target, dehighlight$1());\n      }\n    };\n    var highlight = function (component, hConfig, hState, target) {\n      dehighlightAllExcept(component, hConfig, hState, [target]);\n      if (!isHighlighted(component, hConfig, hState, target)) {\n        add$2(target.element, hConfig.highlightClass);\n        hConfig.onHighlight(component, target);\n        emit(target, highlight$1());\n      }\n    };\n    var highlightFirst = function (component, hConfig, hState) {\n      getFirst(component, hConfig).each(function (firstComp) {\n        highlight(component, hConfig, hState, firstComp);\n      });\n    };\n    var highlightLast = function (component, hConfig, hState) {\n      getLast(component, hConfig).each(function (lastComp) {\n        highlight(component, hConfig, hState, lastComp);\n      });\n    };\n    var highlightAt = function (component, hConfig, hState, index) {\n      getByIndex(component, hConfig, hState, index).fold(function (err) {\n        throw err;\n      }, function (firstComp) {\n        highlight(component, hConfig, hState, firstComp);\n      });\n    };\n    var highlightBy = function (component, hConfig, hState, predicate) {\n      var candidates = getCandidates(component, hConfig);\n      var targetComp = find$5(candidates, predicate);\n      targetComp.each(function (c) {\n        highlight(component, hConfig, hState, c);\n      });\n    };\n    var isHighlighted = function (component, hConfig, hState, queryTarget) {\n      return has(queryTarget.element, hConfig.highlightClass);\n    };\n    var getHighlighted = function (component, hConfig, _hState) {\n      return descendant(component.element, '.' + hConfig.highlightClass).bind(function (e) {\n        return component.getSystem().getByDom(e).toOptional();\n      });\n    };\n    var getByIndex = function (component, hConfig, hState, index) {\n      var items = descendants(component.element, '.' + hConfig.itemClass);\n      return Optional.from(items[index]).fold(function () {\n        return Result.error(new Error('No element found with index ' + index));\n      }, component.getSystem().getByDom);\n    };\n    var getFirst = function (component, hConfig, _hState) {\n      return descendant(component.element, '.' + hConfig.itemClass).bind(function (e) {\n        return component.getSystem().getByDom(e).toOptional();\n      });\n    };\n    var getLast = function (component, hConfig, _hState) {\n      var items = descendants(component.element, '.' + hConfig.itemClass);\n      var last = items.length > 0 ? Optional.some(items[items.length - 1]) : Optional.none();\n      return last.bind(function (c) {\n        return component.getSystem().getByDom(c).toOptional();\n      });\n    };\n    var getDelta$2 = function (component, hConfig, hState, delta) {\n      var items = descendants(component.element, '.' + hConfig.itemClass);\n      var current = findIndex$1(items, function (item) {\n        return has(item, hConfig.highlightClass);\n      });\n      return current.bind(function (selected) {\n        var dest = cycleBy(selected, delta, 0, items.length - 1);\n        return component.getSystem().getByDom(items[dest]).toOptional();\n      });\n    };\n    var getPrevious = function (component, hConfig, hState) {\n      return getDelta$2(component, hConfig, hState, -1);\n    };\n    var getNext = function (component, hConfig, hState) {\n      return getDelta$2(component, hConfig, hState, +1);\n    };\n    var getCandidates = function (component, hConfig, _hState) {\n      var items = descendants(component.element, '.' + hConfig.itemClass);\n      return cat(map$2(items, function (i) {\n        return component.getSystem().getByDom(i).toOptional();\n      }));\n    };\n\n    var HighlightApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        dehighlightAll: dehighlightAll,\n        dehighlight: dehighlight,\n        highlight: highlight,\n        highlightFirst: highlightFirst,\n        highlightLast: highlightLast,\n        highlightAt: highlightAt,\n        highlightBy: highlightBy,\n        isHighlighted: isHighlighted,\n        getHighlighted: getHighlighted,\n        getFirst: getFirst,\n        getLast: getLast,\n        getPrevious: getPrevious,\n        getNext: getNext,\n        getCandidates: getCandidates\n    });\n\n    var HighlightSchema = [\n      required$1('highlightClass'),\n      required$1('itemClass'),\n      onHandler('onHighlight'),\n      onHandler('onDehighlight')\n    ];\n\n    var Highlighting = create$8({\n      fields: HighlightSchema,\n      name: 'highlighting',\n      apis: HighlightApis\n    });\n\n    var BACKSPACE = [8];\n    var TAB = [9];\n    var ENTER = [13];\n    var ESCAPE = [27];\n    var SPACE = [32];\n    var LEFT = [37];\n    var UP = [38];\n    var RIGHT = [39];\n    var DOWN = [40];\n\n    var cyclePrev = function (values, index, predicate) {\n      var before = reverse(values.slice(0, index));\n      var after = reverse(values.slice(index + 1));\n      return find$5(before.concat(after), predicate);\n    };\n    var tryPrev = function (values, index, predicate) {\n      var before = reverse(values.slice(0, index));\n      return find$5(before, predicate);\n    };\n    var cycleNext = function (values, index, predicate) {\n      var before = values.slice(0, index);\n      var after = values.slice(index + 1);\n      return find$5(after.concat(before), predicate);\n    };\n    var tryNext = function (values, index, predicate) {\n      var after = values.slice(index + 1);\n      return find$5(after, predicate);\n    };\n\n    var inSet = function (keys) {\n      return function (event) {\n        var raw = event.raw;\n        return contains$2(keys, raw.which);\n      };\n    };\n    var and = function (preds) {\n      return function (event) {\n        return forall(preds, function (pred) {\n          return pred(event);\n        });\n      };\n    };\n    var isShift = function (event) {\n      var raw = event.raw;\n      return raw.shiftKey === true;\n    };\n    var isControl = function (event) {\n      var raw = event.raw;\n      return raw.ctrlKey === true;\n    };\n    var isNotShift = not(isShift);\n\n    var rule = function (matches, action) {\n      return {\n        matches: matches,\n        classification: action\n      };\n    };\n    var choose = function (transitions, event) {\n      var transition = find$5(transitions, function (t) {\n        return t.matches(event);\n      });\n      return transition.map(function (t) {\n        return t.classification;\n      });\n    };\n\n    var reportFocusShifting = function (component, prevFocus, newFocus) {\n      var noChange = prevFocus.exists(function (p) {\n        return newFocus.exists(function (n) {\n          return eq(n, p);\n        });\n      });\n      if (!noChange) {\n        emitWith(component, focusShifted(), {\n          prevFocus: prevFocus,\n          newFocus: newFocus\n        });\n      }\n    };\n    var dom$2 = function () {\n      var get = function (component) {\n        return search(component.element);\n      };\n      var set = function (component, focusee) {\n        var prevFocus = get(component);\n        component.getSystem().triggerFocus(focusee, component.element);\n        var newFocus = get(component);\n        reportFocusShifting(component, prevFocus, newFocus);\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n    var highlights = function () {\n      var get = function (component) {\n        return Highlighting.getHighlighted(component).map(function (item) {\n          return item.element;\n        });\n      };\n      var set = function (component, element) {\n        var prevFocus = get(component);\n        component.getSystem().getByDom(element).fold(noop, function (item) {\n          Highlighting.highlight(component, item);\n        });\n        var newFocus = get(component);\n        reportFocusShifting(component, prevFocus, newFocus);\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var FocusInsideModes;\n    (function (FocusInsideModes) {\n      FocusInsideModes['OnFocusMode'] = 'onFocus';\n      FocusInsideModes['OnEnterOrSpaceMode'] = 'onEnterOrSpace';\n      FocusInsideModes['OnApiMode'] = 'onApi';\n    }(FocusInsideModes || (FocusInsideModes = {})));\n\n    var typical = function (infoSchema, stateInit, getKeydownRules, getKeyupRules, optFocusIn) {\n      var schema = function () {\n        return infoSchema.concat([\n          defaulted('focusManager', dom$2()),\n          defaultedOf('focusInside', 'onFocus', valueOf(function (val) {\n            return contains$2([\n              'onFocus',\n              'onEnterOrSpace',\n              'onApi'\n            ], val) ? Result.value(val) : Result.error('Invalid value for focusInside');\n          })),\n          output$1('handler', me),\n          output$1('state', stateInit),\n          output$1('sendFocusIn', optFocusIn)\n        ]);\n      };\n      var processKey = function (component, simulatedEvent, getRules, keyingConfig, keyingState) {\n        var rules = getRules(component, simulatedEvent, keyingConfig, keyingState);\n        return choose(rules, simulatedEvent.event).bind(function (rule) {\n          return rule(component, simulatedEvent, keyingConfig, keyingState);\n        });\n      };\n      var toEvents = function (keyingConfig, keyingState) {\n        var onFocusHandler = keyingConfig.focusInside !== FocusInsideModes.OnFocusMode ? Optional.none() : optFocusIn(keyingConfig).map(function (focusIn) {\n          return run$1(focus$4(), function (component, simulatedEvent) {\n            focusIn(component, keyingConfig, keyingState);\n            simulatedEvent.stop();\n          });\n        });\n        var tryGoInsideComponent = function (component, simulatedEvent) {\n          var isEnterOrSpace = inSet(SPACE.concat(ENTER))(simulatedEvent.event);\n          if (keyingConfig.focusInside === FocusInsideModes.OnEnterOrSpaceMode && isEnterOrSpace && isSource(component, simulatedEvent)) {\n            optFocusIn(keyingConfig).each(function (focusIn) {\n              focusIn(component, keyingConfig, keyingState);\n              simulatedEvent.stop();\n            });\n          }\n        };\n        var keyboardEvents = [\n          run$1(keydown(), function (component, simulatedEvent) {\n            processKey(component, simulatedEvent, getKeydownRules, keyingConfig, keyingState).fold(function () {\n              tryGoInsideComponent(component, simulatedEvent);\n            }, function (_) {\n              simulatedEvent.stop();\n            });\n          }),\n          run$1(keyup(), function (component, simulatedEvent) {\n            processKey(component, simulatedEvent, getKeyupRules, keyingConfig, keyingState).each(function (_) {\n              simulatedEvent.stop();\n            });\n          })\n        ];\n        return derive$2(onFocusHandler.toArray().concat(keyboardEvents));\n      };\n      var me = {\n        schema: schema,\n        processKey: processKey,\n        toEvents: toEvents\n      };\n      return me;\n    };\n\n    var create$6 = function (cyclicField) {\n      var schema = [\n        option('onEscape'),\n        option('onEnter'),\n        defaulted('selector', '[data-alloy-tabstop=\"true\"]:not(:disabled)'),\n        defaulted('firstTabstop', 0),\n        defaulted('useTabstopAt', always),\n        option('visibilitySelector')\n      ].concat([cyclicField]);\n      var isVisible = function (tabbingConfig, element) {\n        var target = tabbingConfig.visibilitySelector.bind(function (sel) {\n          return closest$1(element, sel);\n        }).getOr(element);\n        return get$b(target) > 0;\n      };\n      var findInitial = function (component, tabbingConfig) {\n        var tabstops = descendants(component.element, tabbingConfig.selector);\n        var visibles = filter$2(tabstops, function (elem) {\n          return isVisible(tabbingConfig, elem);\n        });\n        return Optional.from(visibles[tabbingConfig.firstTabstop]);\n      };\n      var findCurrent = function (component, tabbingConfig) {\n        return tabbingConfig.focusManager.get(component).bind(function (elem) {\n          return closest$1(elem, tabbingConfig.selector);\n        });\n      };\n      var isTabstop = function (tabbingConfig, element) {\n        return isVisible(tabbingConfig, element) && tabbingConfig.useTabstopAt(element);\n      };\n      var focusIn = function (component, tabbingConfig, _tabbingState) {\n        findInitial(component, tabbingConfig).each(function (target) {\n          tabbingConfig.focusManager.set(component, target);\n        });\n      };\n      var goFromTabstop = function (component, tabstops, stopIndex, tabbingConfig, cycle) {\n        return cycle(tabstops, stopIndex, function (elem) {\n          return isTabstop(tabbingConfig, elem);\n        }).fold(function () {\n          return tabbingConfig.cyclic ? Optional.some(true) : Optional.none();\n        }, function (target) {\n          tabbingConfig.focusManager.set(component, target);\n          return Optional.some(true);\n        });\n      };\n      var go = function (component, _simulatedEvent, tabbingConfig, cycle) {\n        var tabstops = descendants(component.element, tabbingConfig.selector);\n        return findCurrent(component, tabbingConfig).bind(function (tabstop) {\n          var optStopIndex = findIndex$1(tabstops, curry(eq, tabstop));\n          return optStopIndex.bind(function (stopIndex) {\n            return goFromTabstop(component, tabstops, stopIndex, tabbingConfig, cycle);\n          });\n        });\n      };\n      var goBackwards = function (component, simulatedEvent, tabbingConfig) {\n        var navigate = tabbingConfig.cyclic ? cyclePrev : tryPrev;\n        return go(component, simulatedEvent, tabbingConfig, navigate);\n      };\n      var goForwards = function (component, simulatedEvent, tabbingConfig) {\n        var navigate = tabbingConfig.cyclic ? cycleNext : tryNext;\n        return go(component, simulatedEvent, tabbingConfig, navigate);\n      };\n      var execute = function (component, simulatedEvent, tabbingConfig) {\n        return tabbingConfig.onEnter.bind(function (f) {\n          return f(component, simulatedEvent);\n        });\n      };\n      var exit = function (component, simulatedEvent, tabbingConfig) {\n        return tabbingConfig.onEscape.bind(function (f) {\n          return f(component, simulatedEvent);\n        });\n      };\n      var getKeydownRules = constant$1([\n        rule(and([\n          isShift,\n          inSet(TAB)\n        ]), goBackwards),\n        rule(inSet(TAB), goForwards),\n        rule(inSet(ESCAPE), exit),\n        rule(and([\n          isNotShift,\n          inSet(ENTER)\n        ]), execute)\n      ]);\n      var getKeyupRules = constant$1([]);\n      return typical(schema, NoState.init, getKeydownRules, getKeyupRules, function () {\n        return Optional.some(focusIn);\n      });\n    };\n\n    var AcyclicType = create$6(customField('cyclic', never));\n\n    var CyclicType = create$6(customField('cyclic', always));\n\n    var doDefaultExecute = function (component, _simulatedEvent, focused) {\n      dispatch(component, focused, execute$5());\n      return Optional.some(true);\n    };\n    var defaultExecute = function (component, simulatedEvent, focused) {\n      var isComplex = inside(focused) && inSet(SPACE)(simulatedEvent.event);\n      return isComplex ? Optional.none() : doDefaultExecute(component, simulatedEvent, focused);\n    };\n    var stopEventForFirefox = function (_component, _simulatedEvent) {\n      return Optional.some(true);\n    };\n\n    var schema$v = [\n      defaulted('execute', defaultExecute),\n      defaulted('useSpace', false),\n      defaulted('useEnter', true),\n      defaulted('useControlEnter', false),\n      defaulted('useDown', false)\n    ];\n    var execute$4 = function (component, simulatedEvent, executeConfig) {\n      return executeConfig.execute(component, simulatedEvent, component.element);\n    };\n    var getKeydownRules$5 = function (component, _simulatedEvent, executeConfig, _executeState) {\n      var spaceExec = executeConfig.useSpace && !inside(component.element) ? SPACE : [];\n      var enterExec = executeConfig.useEnter ? ENTER : [];\n      var downExec = executeConfig.useDown ? DOWN : [];\n      var execKeys = spaceExec.concat(enterExec).concat(downExec);\n      return [rule(inSet(execKeys), execute$4)].concat(executeConfig.useControlEnter ? [rule(and([\n          isControl,\n          inSet(ENTER)\n        ]), execute$4)] : []);\n    };\n    var getKeyupRules$5 = function (component, _simulatedEvent, executeConfig, _executeState) {\n      return executeConfig.useSpace && !inside(component.element) ? [rule(inSet(SPACE), stopEventForFirefox)] : [];\n    };\n    var ExecutionType = typical(schema$v, NoState.init, getKeydownRules$5, getKeyupRules$5, function () {\n      return Optional.none();\n    });\n\n    var flatgrid$1 = function () {\n      var dimensions = value$1();\n      var setGridSize = function (numRows, numColumns) {\n        dimensions.set({\n          numRows: numRows,\n          numColumns: numColumns\n        });\n      };\n      var getNumRows = function () {\n        return dimensions.get().map(function (d) {\n          return d.numRows;\n        });\n      };\n      var getNumColumns = function () {\n        return dimensions.get().map(function (d) {\n          return d.numColumns;\n        });\n      };\n      return nu$8({\n        readState: function () {\n          return dimensions.get().map(function (d) {\n            return {\n              numRows: String(d.numRows),\n              numColumns: String(d.numColumns)\n            };\n          }).getOr({\n            numRows: '?',\n            numColumns: '?'\n          });\n        },\n        setGridSize: setGridSize,\n        getNumRows: getNumRows,\n        getNumColumns: getNumColumns\n      });\n    };\n    var init$d = function (spec) {\n      return spec.state(spec);\n    };\n\n    var KeyingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        flatgrid: flatgrid$1,\n        init: init$d\n    });\n\n    var useH = function (movement) {\n      return function (component, simulatedEvent, config, state) {\n        var move = movement(component.element);\n        return use(move, component, simulatedEvent, config, state);\n      };\n    };\n    var west$1 = function (moveLeft, moveRight) {\n      var movement = onDirection(moveLeft, moveRight);\n      return useH(movement);\n    };\n    var east$1 = function (moveLeft, moveRight) {\n      var movement = onDirection(moveRight, moveLeft);\n      return useH(movement);\n    };\n    var useV = function (move) {\n      return function (component, simulatedEvent, config, state) {\n        return use(move, component, simulatedEvent, config, state);\n      };\n    };\n    var use = function (move, component, simulatedEvent, config, state) {\n      var outcome = config.focusManager.get(component).bind(function (focused) {\n        return move(component.element, focused, config, state);\n      });\n      return outcome.map(function (newFocus) {\n        config.focusManager.set(component, newFocus);\n        return true;\n      });\n    };\n    var north$1 = useV;\n    var south$1 = useV;\n    var move$1 = useV;\n\n    var isHidden$1 = function (dom) {\n      return dom.offsetWidth <= 0 && dom.offsetHeight <= 0;\n    };\n    var isVisible = function (element) {\n      return !isHidden$1(element.dom);\n    };\n\n    var locate = function (candidates, predicate) {\n      return findIndex$1(candidates, predicate).map(function (index) {\n        return {\n          index: index,\n          candidates: candidates\n        };\n      });\n    };\n\n    var locateVisible = function (container, current, selector) {\n      var predicate = function (x) {\n        return eq(x, current);\n      };\n      var candidates = descendants(container, selector);\n      var visible = filter$2(candidates, isVisible);\n      return locate(visible, predicate);\n    };\n    var findIndex = function (elements, target) {\n      return findIndex$1(elements, function (elem) {\n        return eq(target, elem);\n      });\n    };\n\n    var withGrid = function (values, index, numCols, f) {\n      var oldRow = Math.floor(index / numCols);\n      var oldColumn = index % numCols;\n      return f(oldRow, oldColumn).bind(function (address) {\n        var newIndex = address.row * numCols + address.column;\n        return newIndex >= 0 && newIndex < values.length ? Optional.some(values[newIndex]) : Optional.none();\n      });\n    };\n    var cycleHorizontal$1 = function (values, index, numRows, numCols, delta) {\n      return withGrid(values, index, numCols, function (oldRow, oldColumn) {\n        var onLastRow = oldRow === numRows - 1;\n        var colsInRow = onLastRow ? values.length - oldRow * numCols : numCols;\n        var newColumn = cycleBy(oldColumn, delta, 0, colsInRow - 1);\n        return Optional.some({\n          row: oldRow,\n          column: newColumn\n        });\n      });\n    };\n    var cycleVertical$1 = function (values, index, numRows, numCols, delta) {\n      return withGrid(values, index, numCols, function (oldRow, oldColumn) {\n        var newRow = cycleBy(oldRow, delta, 0, numRows - 1);\n        var onLastRow = newRow === numRows - 1;\n        var colsInRow = onLastRow ? values.length - newRow * numCols : numCols;\n        var newCol = clamp$1(oldColumn, 0, colsInRow - 1);\n        return Optional.some({\n          row: newRow,\n          column: newCol\n        });\n      });\n    };\n    var cycleRight$1 = function (values, index, numRows, numCols) {\n      return cycleHorizontal$1(values, index, numRows, numCols, +1);\n    };\n    var cycleLeft$1 = function (values, index, numRows, numCols) {\n      return cycleHorizontal$1(values, index, numRows, numCols, -1);\n    };\n    var cycleUp$1 = function (values, index, numRows, numCols) {\n      return cycleVertical$1(values, index, numRows, numCols, -1);\n    };\n    var cycleDown$1 = function (values, index, numRows, numCols) {\n      return cycleVertical$1(values, index, numRows, numCols, +1);\n    };\n\n    var schema$u = [\n      required$1('selector'),\n      defaulted('execute', defaultExecute),\n      onKeyboardHandler('onEscape'),\n      defaulted('captureTab', false),\n      initSize()\n    ];\n    var focusIn$3 = function (component, gridConfig, _gridState) {\n      descendant(component.element, gridConfig.selector).each(function (first) {\n        gridConfig.focusManager.set(component, first);\n      });\n    };\n    var findCurrent$1 = function (component, gridConfig) {\n      return gridConfig.focusManager.get(component).bind(function (elem) {\n        return closest$1(elem, gridConfig.selector);\n      });\n    };\n    var execute$3 = function (component, simulatedEvent, gridConfig, _gridState) {\n      return findCurrent$1(component, gridConfig).bind(function (focused) {\n        return gridConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var doMove$2 = function (cycle) {\n      return function (element, focused, gridConfig, gridState) {\n        return locateVisible(element, focused, gridConfig.selector).bind(function (identified) {\n          return cycle(identified.candidates, identified.index, gridState.getNumRows().getOr(gridConfig.initSize.numRows), gridState.getNumColumns().getOr(gridConfig.initSize.numColumns));\n        });\n      };\n    };\n    var handleTab = function (_component, _simulatedEvent, gridConfig) {\n      return gridConfig.captureTab ? Optional.some(true) : Optional.none();\n    };\n    var doEscape$1 = function (component, simulatedEvent, gridConfig) {\n      return gridConfig.onEscape(component, simulatedEvent);\n    };\n    var moveLeft$3 = doMove$2(cycleLeft$1);\n    var moveRight$3 = doMove$2(cycleRight$1);\n    var moveNorth$1 = doMove$2(cycleUp$1);\n    var moveSouth$1 = doMove$2(cycleDown$1);\n    var getKeydownRules$4 = constant$1([\n      rule(inSet(LEFT), west$1(moveLeft$3, moveRight$3)),\n      rule(inSet(RIGHT), east$1(moveLeft$3, moveRight$3)),\n      rule(inSet(UP), north$1(moveNorth$1)),\n      rule(inSet(DOWN), south$1(moveSouth$1)),\n      rule(and([\n        isShift,\n        inSet(TAB)\n      ]), handleTab),\n      rule(and([\n        isNotShift,\n        inSet(TAB)\n      ]), handleTab),\n      rule(inSet(ESCAPE), doEscape$1),\n      rule(inSet(SPACE.concat(ENTER)), execute$3)\n    ]);\n    var getKeyupRules$4 = constant$1([rule(inSet(SPACE), stopEventForFirefox)]);\n    var FlatgridType = typical(schema$u, flatgrid$1, getKeydownRules$4, getKeyupRules$4, function () {\n      return Optional.some(focusIn$3);\n    });\n\n    var horizontal = function (container, selector, current, delta) {\n      var isDisabledButton = function (candidate) {\n        return name$2(candidate) === 'button' && get$d(candidate, 'disabled') === 'disabled';\n      };\n      var tryCycle = function (initial, index, candidates) {\n        var newIndex = cycleBy(index, delta, 0, candidates.length - 1);\n        if (newIndex === initial) {\n          return Optional.none();\n        } else {\n          return isDisabledButton(candidates[newIndex]) ? tryCycle(initial, newIndex, candidates) : Optional.from(candidates[newIndex]);\n        }\n      };\n      return locateVisible(container, current, selector).bind(function (identified) {\n        var index = identified.index;\n        var candidates = identified.candidates;\n        return tryCycle(index, index, candidates);\n      });\n    };\n\n    var schema$t = [\n      required$1('selector'),\n      defaulted('getInitial', Optional.none),\n      defaulted('execute', defaultExecute),\n      onKeyboardHandler('onEscape'),\n      defaulted('executeOnMove', false),\n      defaulted('allowVertical', true)\n    ];\n    var findCurrent = function (component, flowConfig) {\n      return flowConfig.focusManager.get(component).bind(function (elem) {\n        return closest$1(elem, flowConfig.selector);\n      });\n    };\n    var execute$2 = function (component, simulatedEvent, flowConfig) {\n      return findCurrent(component, flowConfig).bind(function (focused) {\n        return flowConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var focusIn$2 = function (component, flowConfig, _state) {\n      flowConfig.getInitial(component).orThunk(function () {\n        return descendant(component.element, flowConfig.selector);\n      }).each(function (first) {\n        flowConfig.focusManager.set(component, first);\n      });\n    };\n    var moveLeft$2 = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, -1);\n    };\n    var moveRight$2 = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, +1);\n    };\n    var doMove$1 = function (movement) {\n      return function (component, simulatedEvent, flowConfig, flowState) {\n        return movement(component, simulatedEvent, flowConfig, flowState).bind(function () {\n          return flowConfig.executeOnMove ? execute$2(component, simulatedEvent, flowConfig) : Optional.some(true);\n        });\n      };\n    };\n    var doEscape = function (component, simulatedEvent, flowConfig) {\n      return flowConfig.onEscape(component, simulatedEvent);\n    };\n    var getKeydownRules$3 = function (_component, _se, flowConfig, _flowState) {\n      var westMovers = LEFT.concat(flowConfig.allowVertical ? UP : []);\n      var eastMovers = RIGHT.concat(flowConfig.allowVertical ? DOWN : []);\n      return [\n        rule(inSet(westMovers), doMove$1(west$1(moveLeft$2, moveRight$2))),\n        rule(inSet(eastMovers), doMove$1(east$1(moveLeft$2, moveRight$2))),\n        rule(inSet(ENTER), execute$2),\n        rule(inSet(SPACE), execute$2),\n        rule(inSet(ESCAPE), doEscape)\n      ];\n    };\n    var getKeyupRules$3 = constant$1([rule(inSet(SPACE), stopEventForFirefox)]);\n    var FlowType = typical(schema$t, NoState.init, getKeydownRules$3, getKeyupRules$3, function () {\n      return Optional.some(focusIn$2);\n    });\n\n    var toCell = function (matrix, rowIndex, columnIndex) {\n      return Optional.from(matrix[rowIndex]).bind(function (row) {\n        return Optional.from(row[columnIndex]).map(function (cell) {\n          return {\n            rowIndex: rowIndex,\n            columnIndex: columnIndex,\n            cell: cell\n          };\n        });\n      });\n    };\n    var cycleHorizontal = function (matrix, rowIndex, startCol, deltaCol) {\n      var row = matrix[rowIndex];\n      var colsInRow = row.length;\n      var newColIndex = cycleBy(startCol, deltaCol, 0, colsInRow - 1);\n      return toCell(matrix, rowIndex, newColIndex);\n    };\n    var cycleVertical = function (matrix, colIndex, startRow, deltaRow) {\n      var nextRowIndex = cycleBy(startRow, deltaRow, 0, matrix.length - 1);\n      var colsInNextRow = matrix[nextRowIndex].length;\n      var nextColIndex = clamp$1(colIndex, 0, colsInNextRow - 1);\n      return toCell(matrix, nextRowIndex, nextColIndex);\n    };\n    var moveHorizontal = function (matrix, rowIndex, startCol, deltaCol) {\n      var row = matrix[rowIndex];\n      var colsInRow = row.length;\n      var newColIndex = clamp$1(startCol + deltaCol, 0, colsInRow - 1);\n      return toCell(matrix, rowIndex, newColIndex);\n    };\n    var moveVertical = function (matrix, colIndex, startRow, deltaRow) {\n      var nextRowIndex = clamp$1(startRow + deltaRow, 0, matrix.length - 1);\n      var colsInNextRow = matrix[nextRowIndex].length;\n      var nextColIndex = clamp$1(colIndex, 0, colsInNextRow - 1);\n      return toCell(matrix, nextRowIndex, nextColIndex);\n    };\n    var cycleRight = function (matrix, startRow, startCol) {\n      return cycleHorizontal(matrix, startRow, startCol, +1);\n    };\n    var cycleLeft = function (matrix, startRow, startCol) {\n      return cycleHorizontal(matrix, startRow, startCol, -1);\n    };\n    var cycleUp = function (matrix, startRow, startCol) {\n      return cycleVertical(matrix, startCol, startRow, -1);\n    };\n    var cycleDown = function (matrix, startRow, startCol) {\n      return cycleVertical(matrix, startCol, startRow, +1);\n    };\n    var moveLeft$1 = function (matrix, startRow, startCol) {\n      return moveHorizontal(matrix, startRow, startCol, -1);\n    };\n    var moveRight$1 = function (matrix, startRow, startCol) {\n      return moveHorizontal(matrix, startRow, startCol, +1);\n    };\n    var moveUp$1 = function (matrix, startRow, startCol) {\n      return moveVertical(matrix, startCol, startRow, -1);\n    };\n    var moveDown$1 = function (matrix, startRow, startCol) {\n      return moveVertical(matrix, startCol, startRow, +1);\n    };\n\n    var schema$s = [\n      requiredObjOf('selectors', [\n        required$1('row'),\n        required$1('cell')\n      ]),\n      defaulted('cycles', true),\n      defaulted('previousSelector', Optional.none),\n      defaulted('execute', defaultExecute)\n    ];\n    var focusIn$1 = function (component, matrixConfig, _state) {\n      var focused = matrixConfig.previousSelector(component).orThunk(function () {\n        var selectors = matrixConfig.selectors;\n        return descendant(component.element, selectors.cell);\n      });\n      focused.each(function (cell) {\n        matrixConfig.focusManager.set(component, cell);\n      });\n    };\n    var execute$1 = function (component, simulatedEvent, matrixConfig) {\n      return search(component.element).bind(function (focused) {\n        return matrixConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var toMatrix = function (rows, matrixConfig) {\n      return map$2(rows, function (row) {\n        return descendants(row, matrixConfig.selectors.cell);\n      });\n    };\n    var doMove = function (ifCycle, ifMove) {\n      return function (element, focused, matrixConfig) {\n        var move = matrixConfig.cycles ? ifCycle : ifMove;\n        return closest$1(focused, matrixConfig.selectors.row).bind(function (inRow) {\n          var cellsInRow = descendants(inRow, matrixConfig.selectors.cell);\n          return findIndex(cellsInRow, focused).bind(function (colIndex) {\n            var allRows = descendants(element, matrixConfig.selectors.row);\n            return findIndex(allRows, inRow).bind(function (rowIndex) {\n              var matrix = toMatrix(allRows, matrixConfig);\n              return move(matrix, rowIndex, colIndex).map(function (next) {\n                return next.cell;\n              });\n            });\n          });\n        });\n      };\n    };\n    var moveLeft = doMove(cycleLeft, moveLeft$1);\n    var moveRight = doMove(cycleRight, moveRight$1);\n    var moveNorth = doMove(cycleUp, moveUp$1);\n    var moveSouth = doMove(cycleDown, moveDown$1);\n    var getKeydownRules$2 = constant$1([\n      rule(inSet(LEFT), west$1(moveLeft, moveRight)),\n      rule(inSet(RIGHT), east$1(moveLeft, moveRight)),\n      rule(inSet(UP), north$1(moveNorth)),\n      rule(inSet(DOWN), south$1(moveSouth)),\n      rule(inSet(SPACE.concat(ENTER)), execute$1)\n    ]);\n    var getKeyupRules$2 = constant$1([rule(inSet(SPACE), stopEventForFirefox)]);\n    var MatrixType = typical(schema$s, NoState.init, getKeydownRules$2, getKeyupRules$2, function () {\n      return Optional.some(focusIn$1);\n    });\n\n    var schema$r = [\n      required$1('selector'),\n      defaulted('execute', defaultExecute),\n      defaulted('moveOnTab', false)\n    ];\n    var execute = function (component, simulatedEvent, menuConfig) {\n      return menuConfig.focusManager.get(component).bind(function (focused) {\n        return menuConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var focusIn = function (component, menuConfig, _state) {\n      descendant(component.element, menuConfig.selector).each(function (first) {\n        menuConfig.focusManager.set(component, first);\n      });\n    };\n    var moveUp = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, -1);\n    };\n    var moveDown = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, +1);\n    };\n    var fireShiftTab = function (component, simulatedEvent, menuConfig, menuState) {\n      return menuConfig.moveOnTab ? move$1(moveUp)(component, simulatedEvent, menuConfig, menuState) : Optional.none();\n    };\n    var fireTab = function (component, simulatedEvent, menuConfig, menuState) {\n      return menuConfig.moveOnTab ? move$1(moveDown)(component, simulatedEvent, menuConfig, menuState) : Optional.none();\n    };\n    var getKeydownRules$1 = constant$1([\n      rule(inSet(UP), move$1(moveUp)),\n      rule(inSet(DOWN), move$1(moveDown)),\n      rule(and([\n        isShift,\n        inSet(TAB)\n      ]), fireShiftTab),\n      rule(and([\n        isNotShift,\n        inSet(TAB)\n      ]), fireTab),\n      rule(inSet(ENTER), execute),\n      rule(inSet(SPACE), execute)\n    ]);\n    var getKeyupRules$1 = constant$1([rule(inSet(SPACE), stopEventForFirefox)]);\n    var MenuType = typical(schema$r, NoState.init, getKeydownRules$1, getKeyupRules$1, function () {\n      return Optional.some(focusIn);\n    });\n\n    var schema$q = [\n      onKeyboardHandler('onSpace'),\n      onKeyboardHandler('onEnter'),\n      onKeyboardHandler('onShiftEnter'),\n      onKeyboardHandler('onLeft'),\n      onKeyboardHandler('onRight'),\n      onKeyboardHandler('onTab'),\n      onKeyboardHandler('onShiftTab'),\n      onKeyboardHandler('onUp'),\n      onKeyboardHandler('onDown'),\n      onKeyboardHandler('onEscape'),\n      defaulted('stopSpaceKeyup', false),\n      option('focusIn')\n    ];\n    var getKeydownRules = function (component, simulatedEvent, specialInfo) {\n      return [\n        rule(inSet(SPACE), specialInfo.onSpace),\n        rule(and([\n          isNotShift,\n          inSet(ENTER)\n        ]), specialInfo.onEnter),\n        rule(and([\n          isShift,\n          inSet(ENTER)\n        ]), specialInfo.onShiftEnter),\n        rule(and([\n          isShift,\n          inSet(TAB)\n        ]), specialInfo.onShiftTab),\n        rule(and([\n          isNotShift,\n          inSet(TAB)\n        ]), specialInfo.onTab),\n        rule(inSet(UP), specialInfo.onUp),\n        rule(inSet(DOWN), specialInfo.onDown),\n        rule(inSet(LEFT), specialInfo.onLeft),\n        rule(inSet(RIGHT), specialInfo.onRight),\n        rule(inSet(SPACE), specialInfo.onSpace),\n        rule(inSet(ESCAPE), specialInfo.onEscape)\n      ];\n    };\n    var getKeyupRules = function (component, simulatedEvent, specialInfo) {\n      return specialInfo.stopSpaceKeyup ? [rule(inSet(SPACE), stopEventForFirefox)] : [];\n    };\n    var SpecialType = typical(schema$q, NoState.init, getKeydownRules, getKeyupRules, function (specialInfo) {\n      return specialInfo.focusIn;\n    });\n\n    var acyclic = AcyclicType.schema();\n    var cyclic = CyclicType.schema();\n    var flow = FlowType.schema();\n    var flatgrid = FlatgridType.schema();\n    var matrix = MatrixType.schema();\n    var execution = ExecutionType.schema();\n    var menu = MenuType.schema();\n    var special = SpecialType.schema();\n\n    var KeyboardBranches = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        acyclic: acyclic,\n        cyclic: cyclic,\n        flow: flow,\n        flatgrid: flatgrid,\n        matrix: matrix,\n        execution: execution,\n        menu: menu,\n        special: special\n    });\n\n    var isFlatgridState = function (keyState) {\n      return hasNonNullableKey(keyState, 'setGridSize');\n    };\n    var Keying = createModes({\n      branchKey: 'mode',\n      branches: KeyboardBranches,\n      name: 'keying',\n      active: {\n        events: function (keyingConfig, keyingState) {\n          var handler = keyingConfig.handler;\n          return handler.toEvents(keyingConfig, keyingState);\n        }\n      },\n      apis: {\n        focusIn: function (component, keyConfig, keyState) {\n          keyConfig.sendFocusIn(keyConfig).fold(function () {\n            component.getSystem().triggerFocus(component.element, component.element);\n          }, function (sendFocusIn) {\n            sendFocusIn(component, keyConfig, keyState);\n          });\n        },\n        setGridSize: function (component, keyConfig, keyState, numRows, numColumns) {\n          if (!isFlatgridState(keyState)) {\n            console.error('Layout does not support setGridSize');\n          } else {\n            keyState.setGridSize(numRows, numColumns);\n          }\n        }\n      },\n      state: KeyingState\n    });\n\n    var set$2 = function (component, replaceConfig, replaceState, data) {\n      preserve$1(function () {\n        var newChildren = map$2(data, component.getSystem().build);\n        replaceChildren(component, newChildren);\n      }, component.element);\n    };\n    var insert = function (component, replaceConfig, insertion, childSpec) {\n      var child = component.getSystem().build(childSpec);\n      attachWith(component, child, insertion);\n    };\n    var append = function (component, replaceConfig, replaceState, appendee) {\n      insert(component, replaceConfig, append$2, appendee);\n    };\n    var prepend = function (component, replaceConfig, replaceState, prependee) {\n      insert(component, replaceConfig, prepend$1, prependee);\n    };\n    var remove = function (component, replaceConfig, replaceState, removee) {\n      var children = contents(component);\n      var foundChild = find$5(children, function (child) {\n        return eq(removee.element, child.element);\n      });\n      foundChild.each(detach);\n    };\n    var contents = function (component, _replaceConfig) {\n      return component.components();\n    };\n    var replaceAt = function (component, replaceConfig, replaceState, replaceeIndex, replacer) {\n      var children = contents(component);\n      return Optional.from(children[replaceeIndex]).map(function (replacee) {\n        remove(component, replaceConfig, replaceState, replacee);\n        replacer.each(function (r) {\n          insert(component, replaceConfig, function (p, c) {\n            appendAt(p, c, replaceeIndex);\n          }, r);\n        });\n        return replacee;\n      });\n    };\n    var replaceBy = function (component, replaceConfig, replaceState, replaceePred, replacer) {\n      var children = contents(component);\n      return findIndex$1(children, replaceePred).bind(function (replaceeIndex) {\n        return replaceAt(component, replaceConfig, replaceState, replaceeIndex, replacer);\n      });\n    };\n\n    var ReplaceApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        append: append,\n        prepend: prepend,\n        remove: remove,\n        replaceAt: replaceAt,\n        replaceBy: replaceBy,\n        set: set$2,\n        contents: contents\n    });\n\n    var Replacing = create$8({\n      fields: [],\n      name: 'replacing',\n      apis: ReplaceApis\n    });\n\n    var events$d = function (name, eventHandlers) {\n      var events = derive$2(eventHandlers);\n      return create$8({\n        fields: [required$1('enabled')],\n        name: name,\n        active: { events: constant$1(events) }\n      });\n    };\n    var config = function (name, eventHandlers) {\n      var me = events$d(name, eventHandlers);\n      return {\n        key: name,\n        value: {\n          config: {},\n          me: me,\n          configAsRaw: constant$1({}),\n          initialConfig: {},\n          state: NoState\n        }\n      };\n    };\n\n    var focus$2 = function (component, focusConfig) {\n      if (!focusConfig.ignore) {\n        focus$3(component.element);\n        focusConfig.onFocus(component);\n      }\n    };\n    var blur = function (component, focusConfig) {\n      if (!focusConfig.ignore) {\n        blur$1(component.element);\n      }\n    };\n    var isFocused = function (component) {\n      return hasFocus(component.element);\n    };\n\n    var FocusApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        focus: focus$2,\n        blur: blur,\n        isFocused: isFocused\n    });\n\n    var exhibit$4 = function (base, focusConfig) {\n      var mod = focusConfig.ignore ? {} : { attributes: { tabindex: '-1' } };\n      return nu$7(mod);\n    };\n    var events$c = function (focusConfig) {\n      return derive$2([run$1(focus$4(), function (component, simulatedEvent) {\n          focus$2(component, focusConfig);\n          simulatedEvent.stop();\n        })].concat(focusConfig.stopMousedown ? [run$1(mousedown(), function (_, simulatedEvent) {\n          simulatedEvent.event.prevent();\n        })] : []));\n    };\n\n    var ActiveFocus = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$4,\n        events: events$c\n    });\n\n    var FocusSchema = [\n      onHandler('onFocus'),\n      defaulted('stopMousedown', false),\n      defaulted('ignore', false)\n    ];\n\n    var Focusing = create$8({\n      fields: FocusSchema,\n      name: 'focusing',\n      active: ActiveFocus,\n      apis: FocusApis\n    });\n\n    var SetupBehaviourCellState = function (initialState) {\n      var init = function () {\n        var cell = Cell(initialState);\n        var get = function () {\n          return cell.get();\n        };\n        var set = function (newState) {\n          return cell.set(newState);\n        };\n        var clear = function () {\n          return cell.set(initialState);\n        };\n        var readState = function () {\n          return cell.get();\n        };\n        return {\n          get: get,\n          set: set,\n          clear: clear,\n          readState: readState\n        };\n      };\n      return { init: init };\n    };\n\n    var updateAriaState = function (component, toggleConfig, toggleState) {\n      var ariaInfo = toggleConfig.aria;\n      ariaInfo.update(component, ariaInfo, toggleState.get());\n    };\n    var updateClass = function (component, toggleConfig, toggleState) {\n      toggleConfig.toggleClass.each(function (toggleClass) {\n        if (toggleState.get()) {\n          add$2(component.element, toggleClass);\n        } else {\n          remove$2(component.element, toggleClass);\n        }\n      });\n    };\n    var toggle$2 = function (component, toggleConfig, toggleState) {\n      set$1(component, toggleConfig, toggleState, !toggleState.get());\n    };\n    var on = function (component, toggleConfig, toggleState) {\n      toggleState.set(true);\n      updateClass(component, toggleConfig, toggleState);\n      updateAriaState(component, toggleConfig, toggleState);\n    };\n    var off = function (component, toggleConfig, toggleState) {\n      toggleState.set(false);\n      updateClass(component, toggleConfig, toggleState);\n      updateAriaState(component, toggleConfig, toggleState);\n    };\n    var set$1 = function (component, toggleConfig, toggleState, state) {\n      var action = state ? on : off;\n      action(component, toggleConfig, toggleState);\n    };\n    var isOn = function (component, toggleConfig, toggleState) {\n      return toggleState.get();\n    };\n    var onLoad = function (component, toggleConfig, toggleState) {\n      set$1(component, toggleConfig, toggleState, toggleConfig.selected);\n    };\n\n    var ToggleApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        onLoad: onLoad,\n        toggle: toggle$2,\n        isOn: isOn,\n        on: on,\n        off: off,\n        set: set$1\n    });\n\n    var exhibit$3 = function () {\n      return nu$7({});\n    };\n    var events$b = function (toggleConfig, toggleState) {\n      var execute = executeEvent(toggleConfig, toggleState, toggle$2);\n      var load = loadEvent(toggleConfig, toggleState, onLoad);\n      return derive$2(flatten([\n        toggleConfig.toggleOnExecute ? [execute] : [],\n        [load]\n      ]));\n    };\n\n    var ActiveToggle = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$3,\n        events: events$b\n    });\n\n    var updatePressed = function (component, ariaInfo, status) {\n      set$8(component.element, 'aria-pressed', status);\n      if (ariaInfo.syncWithExpanded) {\n        updateExpanded(component, ariaInfo, status);\n      }\n    };\n    var updateSelected = function (component, ariaInfo, status) {\n      set$8(component.element, 'aria-selected', status);\n    };\n    var updateChecked = function (component, ariaInfo, status) {\n      set$8(component.element, 'aria-checked', status);\n    };\n    var updateExpanded = function (component, ariaInfo, status) {\n      set$8(component.element, 'aria-expanded', status);\n    };\n\n    var ToggleSchema = [\n      defaulted('selected', false),\n      option('toggleClass'),\n      defaulted('toggleOnExecute', true),\n      defaultedOf('aria', { mode: 'none' }, choose$1('mode', {\n        pressed: [\n          defaulted('syncWithExpanded', false),\n          output$1('update', updatePressed)\n        ],\n        checked: [output$1('update', updateChecked)],\n        expanded: [output$1('update', updateExpanded)],\n        selected: [output$1('update', updateSelected)],\n        none: [output$1('update', noop)]\n      }))\n    ];\n\n    var Toggling = create$8({\n      fields: ToggleSchema,\n      name: 'toggling',\n      active: ActiveToggle,\n      apis: ToggleApis,\n      state: SetupBehaviourCellState(false)\n    });\n\n    var pointerEvents = function () {\n      var onClick = function (component, simulatedEvent) {\n        simulatedEvent.stop();\n        emitExecute(component);\n      };\n      return [\n        run$1(click(), onClick),\n        run$1(tap(), onClick),\n        cutter(touchstart()),\n        cutter(mousedown())\n      ];\n    };\n    var events$a = function (optAction) {\n      var executeHandler = function (action) {\n        return runOnExecute$1(function (component, simulatedEvent) {\n          action(component);\n          simulatedEvent.stop();\n        });\n      };\n      return derive$2(flatten([\n        optAction.map(executeHandler).toArray(),\n        pointerEvents()\n      ]));\n    };\n\n    var hoverEvent = 'alloy.item-hover';\n    var focusEvent = 'alloy.item-focus';\n    var onHover = function (item) {\n      if (search(item.element).isNone() || Focusing.isFocused(item)) {\n        if (!Focusing.isFocused(item)) {\n          Focusing.focus(item);\n        }\n        emitWith(item, hoverEvent, { item: item });\n      }\n    };\n    var onFocus$1 = function (item) {\n      emitWith(item, focusEvent, { item: item });\n    };\n    var hover = constant$1(hoverEvent);\n    var focus$1 = constant$1(focusEvent);\n\n    var builder$2 = function (detail) {\n      return {\n        dom: detail.dom,\n        domModification: __assign(__assign({}, detail.domModification), { attributes: __assign(__assign(__assign({ 'role': detail.toggling.isSome() ? 'menuitemcheckbox' : 'menuitem' }, detail.domModification.attributes), { 'aria-haspopup': detail.hasSubmenu }), detail.hasSubmenu ? { 'aria-expanded': false } : {}) }),\n        behaviours: SketchBehaviours.augment(detail.itemBehaviours, [\n          detail.toggling.fold(Toggling.revoke, function (tConfig) {\n            return Toggling.config(__assign({ aria: { mode: 'checked' } }, tConfig));\n          }),\n          Focusing.config({\n            ignore: detail.ignoreFocus,\n            stopMousedown: detail.ignoreFocus,\n            onFocus: function (component) {\n              onFocus$1(component);\n            }\n          }),\n          Keying.config({ mode: 'execution' }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.data\n            }\n          }),\n          config('item-type-events', __spreadArray(__spreadArray([], pointerEvents(), true), [\n            run$1(mouseover(), onHover),\n            run$1(focusItem(), Focusing.focus)\n          ], false))\n        ]),\n        components: detail.components,\n        eventOrder: detail.eventOrder\n      };\n    };\n    var schema$p = [\n      required$1('data'),\n      required$1('components'),\n      required$1('dom'),\n      defaulted('hasSubmenu', false),\n      option('toggling'),\n      SketchBehaviours.field('itemBehaviours', [\n        Toggling,\n        Focusing,\n        Keying,\n        Representing\n      ]),\n      defaulted('ignoreFocus', false),\n      defaulted('domModification', {}),\n      output$1('builder', builder$2),\n      defaulted('eventOrder', {})\n    ];\n\n    var builder$1 = function (detail) {\n      return {\n        dom: detail.dom,\n        components: detail.components,\n        events: derive$2([stopper(focusItem())])\n      };\n    };\n    var schema$o = [\n      required$1('dom'),\n      required$1('components'),\n      output$1('builder', builder$1)\n    ];\n\n    var owner$2 = constant$1('item-widget');\n    var parts$h = constant$1([required({\n        name: 'widget',\n        overrides: function (detail) {\n          return {\n            behaviours: derive$1([Representing.config({\n                store: {\n                  mode: 'manual',\n                  getValue: function (_component) {\n                    return detail.data;\n                  },\n                  setValue: noop\n                }\n              })])\n          };\n        }\n      })]);\n\n    var builder = function (detail) {\n      var subs = substitutes(owner$2(), detail, parts$h());\n      var components = components$1(owner$2(), detail, subs.internals());\n      var focusWidget = function (component) {\n        return getPart(component, detail, 'widget').map(function (widget) {\n          Keying.focusIn(widget);\n          return widget;\n        });\n      };\n      var onHorizontalArrow = function (component, simulatedEvent) {\n        return inside(simulatedEvent.event.target) ? Optional.none() : function () {\n          if (detail.autofocus) {\n            simulatedEvent.setSource(component.element);\n            return Optional.none();\n          } else {\n            return Optional.none();\n          }\n        }();\n      };\n      return {\n        dom: detail.dom,\n        components: components,\n        domModification: detail.domModification,\n        events: derive$2([\n          runOnExecute$1(function (component, simulatedEvent) {\n            focusWidget(component).each(function (_widget) {\n              simulatedEvent.stop();\n            });\n          }),\n          run$1(mouseover(), onHover),\n          run$1(focusItem(), function (component, _simulatedEvent) {\n            if (detail.autofocus) {\n              focusWidget(component);\n            } else {\n              Focusing.focus(component);\n            }\n          })\n        ]),\n        behaviours: SketchBehaviours.augment(detail.widgetBehaviours, [\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.data\n            }\n          }),\n          Focusing.config({\n            ignore: detail.ignoreFocus,\n            onFocus: function (component) {\n              onFocus$1(component);\n            }\n          }),\n          Keying.config({\n            mode: 'special',\n            focusIn: detail.autofocus ? function (component) {\n              focusWidget(component);\n            } : revoke(),\n            onLeft: onHorizontalArrow,\n            onRight: onHorizontalArrow,\n            onEscape: function (component, simulatedEvent) {\n              if (!Focusing.isFocused(component) && !detail.autofocus) {\n                Focusing.focus(component);\n                return Optional.some(true);\n              } else if (detail.autofocus) {\n                simulatedEvent.setSource(component.element);\n                return Optional.none();\n              } else {\n                return Optional.none();\n              }\n            }\n          })\n        ])\n      };\n    };\n    var schema$n = [\n      required$1('uid'),\n      required$1('data'),\n      required$1('components'),\n      required$1('dom'),\n      defaulted('autofocus', false),\n      defaulted('ignoreFocus', false),\n      SketchBehaviours.field('widgetBehaviours', [\n        Representing,\n        Focusing,\n        Keying\n      ]),\n      defaulted('domModification', {}),\n      defaultUidsSchema(parts$h()),\n      output$1('builder', builder)\n    ];\n\n    var itemSchema$2 = choose$1('type', {\n      widget: schema$n,\n      item: schema$p,\n      separator: schema$o\n    });\n    var configureGrid = function (detail, movementInfo) {\n      return {\n        mode: 'flatgrid',\n        selector: '.' + detail.markers.item,\n        initSize: {\n          numColumns: movementInfo.initSize.numColumns,\n          numRows: movementInfo.initSize.numRows\n        },\n        focusManager: detail.focusManager\n      };\n    };\n    var configureMatrix = function (detail, movementInfo) {\n      return {\n        mode: 'matrix',\n        selectors: {\n          row: movementInfo.rowSelector,\n          cell: '.' + detail.markers.item\n        },\n        focusManager: detail.focusManager\n      };\n    };\n    var configureMenu = function (detail, movementInfo) {\n      return {\n        mode: 'menu',\n        selector: '.' + detail.markers.item,\n        moveOnTab: movementInfo.moveOnTab,\n        focusManager: detail.focusManager\n      };\n    };\n    var parts$g = constant$1([group({\n        factory: {\n          sketch: function (spec) {\n            var itemInfo = asRawOrDie$1('menu.spec item', itemSchema$2, spec);\n            return itemInfo.builder(itemInfo);\n          }\n        },\n        name: 'items',\n        unit: 'item',\n        defaults: function (detail, u) {\n          return has$2(u, 'uid') ? u : __assign(__assign({}, u), { uid: generate$5('item') });\n        },\n        overrides: function (detail, u) {\n          return {\n            type: u.type,\n            ignoreFocus: detail.fakeFocus,\n            domModification: { classes: [detail.markers.item] }\n          };\n        }\n      })]);\n    var schema$m = constant$1([\n      required$1('value'),\n      required$1('items'),\n      required$1('dom'),\n      required$1('components'),\n      defaulted('eventOrder', {}),\n      field('menuBehaviours', [\n        Highlighting,\n        Representing,\n        Composing,\n        Keying\n      ]),\n      defaultedOf('movement', {\n        mode: 'menu',\n        moveOnTab: true\n      }, choose$1('mode', {\n        grid: [\n          initSize(),\n          output$1('config', configureGrid)\n        ],\n        matrix: [\n          output$1('config', configureMatrix),\n          required$1('rowSelector')\n        ],\n        menu: [\n          defaulted('moveOnTab', true),\n          output$1('config', configureMenu)\n        ]\n      })),\n      itemMarkers(),\n      defaulted('fakeFocus', false),\n      defaulted('focusManager', dom$2()),\n      onHandler('onHighlight')\n    ]);\n\n    var focus = constant$1('alloy.menu-focus');\n\n    var make$7 = function (detail, components, _spec, _externals) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        markers: detail.markers,\n        behaviours: augment(detail.menuBehaviours, [\n          Highlighting.config({\n            highlightClass: detail.markers.selectedItem,\n            itemClass: detail.markers.item,\n            onHighlight: detail.onHighlight\n          }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.value\n            }\n          }),\n          Composing.config({ find: Optional.some }),\n          Keying.config(detail.movement.config(detail, detail.movement))\n        ]),\n        events: derive$2([\n          run$1(focus$1(), function (menu, simulatedEvent) {\n            var event = simulatedEvent.event;\n            menu.getSystem().getByDom(event.target).each(function (item) {\n              Highlighting.highlight(menu, item);\n              simulatedEvent.stop();\n              emitWith(menu, focus(), {\n                menu: menu,\n                item: item\n              });\n            });\n          }),\n          run$1(hover(), function (menu, simulatedEvent) {\n            var item = simulatedEvent.event.item;\n            Highlighting.highlight(menu, item);\n          })\n        ]),\n        components: components,\n        eventOrder: detail.eventOrder,\n        domModification: { attributes: { role: 'menu' } }\n      };\n    };\n\n    var Menu = composite({\n      name: 'Menu',\n      configFields: schema$m(),\n      partFields: parts$g(),\n      factory: make$7\n    });\n\n    var transpose$1 = function (obj) {\n      return tupleMap(obj, function (v, k) {\n        return {\n          k: v,\n          v: k\n        };\n      });\n    };\n    var trace = function (items, byItem, byMenu, finish) {\n      return get$e(byMenu, finish).bind(function (triggerItem) {\n        return get$e(items, triggerItem).bind(function (triggerMenu) {\n          var rest = trace(items, byItem, byMenu, triggerMenu);\n          return Optional.some([triggerMenu].concat(rest));\n        });\n      }).getOr([]);\n    };\n    var generate$2 = function (menus, expansions) {\n      var items = {};\n      each(menus, function (menuItems, menu) {\n        each$1(menuItems, function (item) {\n          items[item] = menu;\n        });\n      });\n      var byItem = expansions;\n      var byMenu = transpose$1(expansions);\n      var menuPaths = map$1(byMenu, function (_triggerItem, submenu) {\n        return [submenu].concat(trace(items, byItem, byMenu, submenu));\n      });\n      return map$1(items, function (menu) {\n        return get$e(menuPaths, menu).getOr([menu]);\n      });\n    };\n\n    var init$c = function () {\n      var expansions = Cell({});\n      var menus = Cell({});\n      var paths = Cell({});\n      var primary = value$1();\n      var directory = Cell({});\n      var clear = function () {\n        expansions.set({});\n        menus.set({});\n        paths.set({});\n        primary.clear();\n      };\n      var isClear = function () {\n        return primary.get().isNone();\n      };\n      var setMenuBuilt = function (menuName, built) {\n        var _a;\n        menus.set(__assign(__assign({}, menus.get()), (_a = {}, _a[menuName] = {\n          type: 'prepared',\n          menu: built\n        }, _a)));\n      };\n      var setContents = function (sPrimary, sMenus, sExpansions, dir) {\n        primary.set(sPrimary);\n        expansions.set(sExpansions);\n        menus.set(sMenus);\n        directory.set(dir);\n        var sPaths = generate$2(dir, sExpansions);\n        paths.set(sPaths);\n      };\n      var getTriggeringItem = function (menuValue) {\n        return find$4(expansions.get(), function (v, _k) {\n          return v === menuValue;\n        });\n      };\n      var getTriggerData = function (menuValue, getItemByValue, path) {\n        return getPreparedMenu(menuValue).bind(function (menu) {\n          return getTriggeringItem(menuValue).bind(function (triggeringItemValue) {\n            return getItemByValue(triggeringItemValue).map(function (triggeredItem) {\n              return {\n                triggeredMenu: menu,\n                triggeringItem: triggeredItem,\n                triggeringPath: path\n              };\n            });\n          });\n        });\n      };\n      var getTriggeringPath = function (itemValue, getItemByValue) {\n        var extraPath = filter$2(lookupItem(itemValue).toArray(), function (menuValue) {\n          return getPreparedMenu(menuValue).isSome();\n        });\n        return get$e(paths.get(), itemValue).bind(function (path) {\n          var revPath = reverse(extraPath.concat(path));\n          var triggers = bind$3(revPath, function (menuValue, menuIndex) {\n            return getTriggerData(menuValue, getItemByValue, revPath.slice(0, menuIndex + 1)).fold(function () {\n              return is$1(primary.get(), menuValue) ? [] : [Optional.none()];\n            }, function (data) {\n              return [Optional.some(data)];\n            });\n          });\n          return sequence(triggers);\n        });\n      };\n      var expand = function (itemValue) {\n        return get$e(expansions.get(), itemValue).map(function (menu) {\n          var current = get$e(paths.get(), itemValue).getOr([]);\n          return [menu].concat(current);\n        });\n      };\n      var collapse = function (itemValue) {\n        return get$e(paths.get(), itemValue).bind(function (path) {\n          return path.length > 1 ? Optional.some(path.slice(1)) : Optional.none();\n        });\n      };\n      var refresh = function (itemValue) {\n        return get$e(paths.get(), itemValue);\n      };\n      var getPreparedMenu = function (menuValue) {\n        return lookupMenu(menuValue).bind(extractPreparedMenu);\n      };\n      var lookupMenu = function (menuValue) {\n        return get$e(menus.get(), menuValue);\n      };\n      var lookupItem = function (itemValue) {\n        return get$e(expansions.get(), itemValue);\n      };\n      var otherMenus = function (path) {\n        var menuValues = directory.get();\n        return difference(keys(menuValues), path);\n      };\n      var getPrimary = function () {\n        return primary.get().bind(getPreparedMenu);\n      };\n      var getMenus = function () {\n        return menus.get();\n      };\n      return {\n        setMenuBuilt: setMenuBuilt,\n        setContents: setContents,\n        expand: expand,\n        refresh: refresh,\n        collapse: collapse,\n        lookupMenu: lookupMenu,\n        lookupItem: lookupItem,\n        otherMenus: otherMenus,\n        getPrimary: getPrimary,\n        getMenus: getMenus,\n        clear: clear,\n        isClear: isClear,\n        getTriggeringPath: getTriggeringPath\n      };\n    };\n    var extractPreparedMenu = function (prep) {\n      return prep.type === 'prepared' ? Optional.some(prep.menu) : Optional.none();\n    };\n    var LayeredState = {\n      init: init$c,\n      extractPreparedMenu: extractPreparedMenu\n    };\n\n    var make$6 = function (detail, _rawUiSpec) {\n      var submenuParentItems = value$1();\n      var buildMenus = function (container, primaryName, menus) {\n        return map$1(menus, function (spec, name) {\n          var makeSketch = function () {\n            return Menu.sketch(__assign(__assign({}, spec), {\n              value: name,\n              markers: detail.markers,\n              fakeFocus: detail.fakeFocus,\n              onHighlight: detail.onHighlight,\n              focusManager: detail.fakeFocus ? highlights() : dom$2()\n            }));\n          };\n          return name === primaryName ? {\n            type: 'prepared',\n            menu: container.getSystem().build(makeSketch())\n          } : {\n            type: 'notbuilt',\n            nbMenu: makeSketch\n          };\n        });\n      };\n      var layeredState = LayeredState.init();\n      var setup = function (container) {\n        var componentMap = buildMenus(container, detail.data.primary, detail.data.menus);\n        var directory = toDirectory();\n        layeredState.setContents(detail.data.primary, componentMap, detail.data.expansions, directory);\n        return layeredState.getPrimary();\n      };\n      var getItemValue = function (item) {\n        return Representing.getValue(item).value;\n      };\n      var getItemByValue = function (_container, menus, itemValue) {\n        return findMap(menus, function (menu) {\n          if (!menu.getSystem().isConnected()) {\n            return Optional.none();\n          }\n          var candidates = Highlighting.getCandidates(menu);\n          return find$5(candidates, function (c) {\n            return getItemValue(c) === itemValue;\n          });\n        });\n      };\n      var toDirectory = function (_container) {\n        return map$1(detail.data.menus, function (data, _menuName) {\n          return bind$3(data.items, function (item) {\n            return item.type === 'separator' ? [] : [item.data.value];\n          });\n        });\n      };\n      var setActiveMenu = function (container, menu) {\n        Highlighting.highlight(container, menu);\n        Highlighting.getHighlighted(menu).orThunk(function () {\n          return Highlighting.getFirst(menu);\n        }).each(function (item) {\n          dispatch(container, item.element, focusItem());\n        });\n      };\n      var getMenus = function (state, menuValues) {\n        return cat(map$2(menuValues, function (mv) {\n          return state.lookupMenu(mv).bind(function (prep) {\n            return prep.type === 'prepared' ? Optional.some(prep.menu) : Optional.none();\n          });\n        }));\n      };\n      var closeOthers = function (container, state, path) {\n        var others = getMenus(state, state.otherMenus(path));\n        each$1(others, function (o) {\n          remove$1(o.element, [detail.markers.backgroundMenu]);\n          if (!detail.stayInDom) {\n            Replacing.remove(container, o);\n          }\n        });\n      };\n      var getSubmenuParents = function (container) {\n        return submenuParentItems.get().getOrThunk(function () {\n          var r = {};\n          var items = descendants(container.element, '.' + detail.markers.item);\n          var parentItems = filter$2(items, function (i) {\n            return get$d(i, 'aria-haspopup') === 'true';\n          });\n          each$1(parentItems, function (i) {\n            container.getSystem().getByDom(i).each(function (itemComp) {\n              var key = getItemValue(itemComp);\n              r[key] = itemComp;\n            });\n          });\n          submenuParentItems.set(r);\n          return r;\n        });\n      };\n      var updateAriaExpansions = function (container, path) {\n        var parentItems = getSubmenuParents(container);\n        each(parentItems, function (v, k) {\n          var expanded = contains$2(path, k);\n          set$8(v.element, 'aria-expanded', expanded);\n        });\n      };\n      var updateMenuPath = function (container, state, path) {\n        return Optional.from(path[0]).bind(function (latestMenuName) {\n          return state.lookupMenu(latestMenuName).bind(function (menuPrep) {\n            if (menuPrep.type === 'notbuilt') {\n              return Optional.none();\n            } else {\n              var activeMenu = menuPrep.menu;\n              var rest = getMenus(state, path.slice(1));\n              each$1(rest, function (r) {\n                add$2(r.element, detail.markers.backgroundMenu);\n              });\n              if (!inBody(activeMenu.element)) {\n                Replacing.append(container, premade(activeMenu));\n              }\n              remove$1(activeMenu.element, [detail.markers.backgroundMenu]);\n              setActiveMenu(container, activeMenu);\n              closeOthers(container, state, path);\n              return Optional.some(activeMenu);\n            }\n          });\n        });\n      };\n      var ExpandHighlightDecision;\n      (function (ExpandHighlightDecision) {\n        ExpandHighlightDecision[ExpandHighlightDecision['HighlightSubmenu'] = 0] = 'HighlightSubmenu';\n        ExpandHighlightDecision[ExpandHighlightDecision['HighlightParent'] = 1] = 'HighlightParent';\n      }(ExpandHighlightDecision || (ExpandHighlightDecision = {})));\n      var buildIfRequired = function (container, menuName, menuPrep) {\n        if (menuPrep.type === 'notbuilt') {\n          var menu = container.getSystem().build(menuPrep.nbMenu());\n          layeredState.setMenuBuilt(menuName, menu);\n          return menu;\n        } else {\n          return menuPrep.menu;\n        }\n      };\n      var expandRight = function (container, item, decision) {\n        if (decision === void 0) {\n          decision = ExpandHighlightDecision.HighlightSubmenu;\n        }\n        if (item.hasConfigured(Disabling) && Disabling.isDisabled(item)) {\n          return Optional.some(item);\n        } else {\n          var value = getItemValue(item);\n          return layeredState.expand(value).bind(function (path) {\n            updateAriaExpansions(container, path);\n            return Optional.from(path[0]).bind(function (menuName) {\n              return layeredState.lookupMenu(menuName).bind(function (activeMenuPrep) {\n                var activeMenu = buildIfRequired(container, menuName, activeMenuPrep);\n                if (!inBody(activeMenu.element)) {\n                  Replacing.append(container, premade(activeMenu));\n                }\n                detail.onOpenSubmenu(container, item, activeMenu, reverse(path));\n                if (decision === ExpandHighlightDecision.HighlightSubmenu) {\n                  Highlighting.highlightFirst(activeMenu);\n                  return updateMenuPath(container, layeredState, path);\n                } else {\n                  Highlighting.dehighlightAll(activeMenu);\n                  return Optional.some(item);\n                }\n              });\n            });\n          });\n        }\n      };\n      var collapseLeft = function (container, item) {\n        var value = getItemValue(item);\n        return layeredState.collapse(value).bind(function (path) {\n          updateAriaExpansions(container, path);\n          return updateMenuPath(container, layeredState, path).map(function (activeMenu) {\n            detail.onCollapseMenu(container, item, activeMenu);\n            return activeMenu;\n          });\n        });\n      };\n      var updateView = function (container, item) {\n        var value = getItemValue(item);\n        return layeredState.refresh(value).bind(function (path) {\n          updateAriaExpansions(container, path);\n          return updateMenuPath(container, layeredState, path);\n        });\n      };\n      var onRight = function (container, item) {\n        return inside(item.element) ? Optional.none() : expandRight(container, item, ExpandHighlightDecision.HighlightSubmenu);\n      };\n      var onLeft = function (container, item) {\n        return inside(item.element) ? Optional.none() : collapseLeft(container, item);\n      };\n      var onEscape = function (container, item) {\n        return collapseLeft(container, item).orThunk(function () {\n          return detail.onEscape(container, item).map(function () {\n            return container;\n          });\n        });\n      };\n      var keyOnItem = function (f) {\n        return function (container, simulatedEvent) {\n          return closest$1(simulatedEvent.getSource(), '.' + detail.markers.item).bind(function (target) {\n            return container.getSystem().getByDom(target).toOptional().bind(function (item) {\n              return f(container, item).map(always);\n            });\n          });\n        };\n      };\n      var events = derive$2([\n        run$1(focus(), function (sandbox, simulatedEvent) {\n          var item = simulatedEvent.event.item;\n          layeredState.lookupItem(getItemValue(item)).each(function () {\n            var menu = simulatedEvent.event.menu;\n            Highlighting.highlight(sandbox, menu);\n            var value = getItemValue(simulatedEvent.event.item);\n            layeredState.refresh(value).each(function (path) {\n              return closeOthers(sandbox, layeredState, path);\n            });\n          });\n        }),\n        runOnExecute$1(function (component, simulatedEvent) {\n          var target = simulatedEvent.event.target;\n          component.getSystem().getByDom(target).each(function (item) {\n            var itemValue = getItemValue(item);\n            if (itemValue.indexOf('collapse-item') === 0) {\n              collapseLeft(component, item);\n            }\n            expandRight(component, item, ExpandHighlightDecision.HighlightSubmenu).fold(function () {\n              detail.onExecute(component, item);\n            }, noop);\n          });\n        }),\n        runOnAttached(function (container, _simulatedEvent) {\n          setup(container).each(function (primary) {\n            Replacing.append(container, premade(primary));\n            detail.onOpenMenu(container, primary);\n            if (detail.highlightImmediately) {\n              setActiveMenu(container, primary);\n            }\n          });\n        })\n      ].concat(detail.navigateOnHover ? [run$1(hover(), function (sandbox, simulatedEvent) {\n          var item = simulatedEvent.event.item;\n          updateView(sandbox, item);\n          expandRight(sandbox, item, ExpandHighlightDecision.HighlightParent);\n          detail.onHover(sandbox, item);\n        })] : []));\n      var getActiveItem = function (container) {\n        return Highlighting.getHighlighted(container).bind(Highlighting.getHighlighted);\n      };\n      var collapseMenuApi = function (container) {\n        getActiveItem(container).each(function (currentItem) {\n          collapseLeft(container, currentItem);\n        });\n      };\n      var highlightPrimary = function (container) {\n        layeredState.getPrimary().each(function (primary) {\n          setActiveMenu(container, primary);\n        });\n      };\n      var extractMenuFromContainer = function (container) {\n        return Optional.from(container.components()[0]).filter(function (comp) {\n          return get$d(comp.element, 'role') === 'menu';\n        });\n      };\n      var repositionMenus = function (container) {\n        var maybeActivePrimary = layeredState.getPrimary().bind(function (primary) {\n          return getActiveItem(container).bind(function (currentItem) {\n            var itemValue = getItemValue(currentItem);\n            var allMenus = values(layeredState.getMenus());\n            var preparedMenus = cat(map$2(allMenus, LayeredState.extractPreparedMenu));\n            return layeredState.getTriggeringPath(itemValue, function (v) {\n              return getItemByValue(container, preparedMenus, v);\n            });\n          }).map(function (triggeringPath) {\n            return {\n              primary: primary,\n              triggeringPath: triggeringPath\n            };\n          });\n        });\n        maybeActivePrimary.fold(function () {\n          extractMenuFromContainer(container).each(function (primaryMenu) {\n            detail.onRepositionMenu(container, primaryMenu, []);\n          });\n        }, function (_a) {\n          var primary = _a.primary, triggeringPath = _a.triggeringPath;\n          detail.onRepositionMenu(container, primary, triggeringPath);\n        });\n      };\n      var apis = {\n        collapseMenu: collapseMenuApi,\n        highlightPrimary: highlightPrimary,\n        repositionMenus: repositionMenus\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        markers: detail.markers,\n        behaviours: augment(detail.tmenuBehaviours, [\n          Keying.config({\n            mode: 'special',\n            onRight: keyOnItem(onRight),\n            onLeft: keyOnItem(onLeft),\n            onEscape: keyOnItem(onEscape),\n            focusIn: function (container, _keyInfo) {\n              layeredState.getPrimary().each(function (primary) {\n                dispatch(container, primary.element, focusItem());\n              });\n            }\n          }),\n          Highlighting.config({\n            highlightClass: detail.markers.selectedMenu,\n            itemClass: detail.markers.menu\n          }),\n          Composing.config({\n            find: function (container) {\n              return Highlighting.getHighlighted(container);\n            }\n          }),\n          Replacing.config({})\n        ]),\n        eventOrder: detail.eventOrder,\n        apis: apis,\n        events: events\n      };\n    };\n    var collapseItem$1 = constant$1('collapse-item');\n\n    var tieredData = function (primary, menus, expansions) {\n      return {\n        primary: primary,\n        menus: menus,\n        expansions: expansions\n      };\n    };\n    var singleData = function (name, menu) {\n      return {\n        primary: name,\n        menus: wrap$1(name, menu),\n        expansions: {}\n      };\n    };\n    var collapseItem = function (text) {\n      return {\n        value: generate$6(collapseItem$1()),\n        meta: { text: text }\n      };\n    };\n    var tieredMenu = single({\n      name: 'TieredMenu',\n      configFields: [\n        onStrictKeyboardHandler('onExecute'),\n        onStrictKeyboardHandler('onEscape'),\n        onStrictHandler('onOpenMenu'),\n        onStrictHandler('onOpenSubmenu'),\n        onHandler('onRepositionMenu'),\n        onHandler('onCollapseMenu'),\n        defaulted('highlightImmediately', true),\n        requiredObjOf('data', [\n          required$1('primary'),\n          required$1('menus'),\n          required$1('expansions')\n        ]),\n        defaulted('fakeFocus', false),\n        onHandler('onHighlight'),\n        onHandler('onHover'),\n        tieredMenuMarkers(),\n        required$1('dom'),\n        defaulted('navigateOnHover', true),\n        defaulted('stayInDom', false),\n        field('tmenuBehaviours', [\n          Keying,\n          Highlighting,\n          Composing,\n          Replacing\n        ]),\n        defaulted('eventOrder', {})\n      ],\n      apis: {\n        collapseMenu: function (apis, tmenu) {\n          apis.collapseMenu(tmenu);\n        },\n        highlightPrimary: function (apis, tmenu) {\n          apis.highlightPrimary(tmenu);\n        },\n        repositionMenus: function (apis, tmenu) {\n          apis.repositionMenus(tmenu);\n        }\n      },\n      factory: make$6,\n      extraApis: {\n        tieredData: tieredData,\n        singleData: singleData,\n        collapseItem: collapseItem\n      }\n    });\n\n    var makeMenu = function (detail, menuSandbox, placementSpec, menuSpec, getBounds) {\n      var lazySink = function () {\n        return detail.lazySink(menuSandbox);\n      };\n      var layouts = menuSpec.type === 'horizontal' ? {\n        layouts: {\n          onLtr: function () {\n            return belowOrAbove();\n          },\n          onRtl: function () {\n            return belowOrAboveRtl();\n          }\n        }\n      } : {};\n      var isFirstTierSubmenu = function (triggeringPaths) {\n        return triggeringPaths.length === 2;\n      };\n      var getSubmenuLayouts = function (triggeringPaths) {\n        return isFirstTierSubmenu(triggeringPaths) ? layouts : {};\n      };\n      return tieredMenu.sketch({\n        dom: { tag: 'div' },\n        data: menuSpec.data,\n        markers: menuSpec.menu.markers,\n        highlightImmediately: menuSpec.menu.highlightImmediately,\n        onEscape: function () {\n          Sandboxing.close(menuSandbox);\n          detail.onEscape.map(function (handler) {\n            return handler(menuSandbox);\n          });\n          return Optional.some(true);\n        },\n        onExecute: function () {\n          return Optional.some(true);\n        },\n        onOpenMenu: function (tmenu, menu) {\n          Positioning.positionWithinBounds(lazySink().getOrDie(), menu, placementSpec, getBounds());\n        },\n        onOpenSubmenu: function (tmenu, item, submenu, triggeringPaths) {\n          var sink = lazySink().getOrDie();\n          Positioning.position(sink, submenu, {\n            anchor: __assign({\n              type: 'submenu',\n              item: item\n            }, getSubmenuLayouts(triggeringPaths))\n          });\n        },\n        onRepositionMenu: function (tmenu, primaryMenu, submenuTriggers) {\n          var sink = lazySink().getOrDie();\n          Positioning.positionWithinBounds(sink, primaryMenu, placementSpec, getBounds());\n          each$1(submenuTriggers, function (st) {\n            var submenuLayouts = getSubmenuLayouts(st.triggeringPath);\n            Positioning.position(sink, st.triggeredMenu, {\n              anchor: __assign({\n                type: 'submenu',\n                item: st.triggeringItem\n              }, submenuLayouts)\n            });\n          });\n        }\n      });\n    };\n    var factory$m = function (detail, spec) {\n      var isPartOfRelated = function (sandbox, queryElem) {\n        var related = detail.getRelated(sandbox);\n        return related.exists(function (rel) {\n          return isPartOf$1(rel, queryElem);\n        });\n      };\n      var setContent = function (sandbox, thing) {\n        Sandboxing.setContent(sandbox, thing);\n      };\n      var showAt = function (sandbox, thing, placementSpec) {\n        showWithin(sandbox, thing, placementSpec, Optional.none());\n      };\n      var showWithin = function (sandbox, thing, placementSpec, boxElement) {\n        showWithinBounds(sandbox, thing, placementSpec, function () {\n          return boxElement.map(function (elem) {\n            return box$1(elem);\n          });\n        });\n      };\n      var showWithinBounds = function (sandbox, thing, placementSpec, getBounds) {\n        var sink = detail.lazySink(sandbox).getOrDie();\n        Sandboxing.openWhileCloaked(sandbox, thing, function () {\n          return Positioning.positionWithinBounds(sink, sandbox, placementSpec, getBounds());\n        });\n        Representing.setValue(sandbox, Optional.some({\n          mode: 'position',\n          config: placementSpec,\n          getBounds: getBounds\n        }));\n      };\n      var showMenuAt = function (sandbox, placementSpec, menuSpec) {\n        showMenuWithinBounds(sandbox, placementSpec, menuSpec, Optional.none);\n      };\n      var showMenuWithinBounds = function (sandbox, placementSpec, menuSpec, getBounds) {\n        var menu = makeMenu(detail, sandbox, placementSpec, menuSpec, getBounds);\n        Sandboxing.open(sandbox, menu);\n        Representing.setValue(sandbox, Optional.some({\n          mode: 'menu',\n          menu: menu\n        }));\n      };\n      var hide = function (sandbox) {\n        if (Sandboxing.isOpen(sandbox)) {\n          Representing.setValue(sandbox, Optional.none());\n          Sandboxing.close(sandbox);\n        }\n      };\n      var getContent = function (sandbox) {\n        return Sandboxing.getState(sandbox);\n      };\n      var reposition = function (sandbox) {\n        if (Sandboxing.isOpen(sandbox)) {\n          Representing.getValue(sandbox).each(function (state) {\n            switch (state.mode) {\n            case 'menu':\n              Sandboxing.getState(sandbox).each(tieredMenu.repositionMenus);\n              break;\n            case 'position':\n              var sink = detail.lazySink(sandbox).getOrDie();\n              Positioning.positionWithinBounds(sink, sandbox, state.config, state.getBounds());\n              break;\n            }\n          });\n        }\n      };\n      var apis = {\n        setContent: setContent,\n        showAt: showAt,\n        showWithin: showWithin,\n        showWithinBounds: showWithinBounds,\n        showMenuAt: showMenuAt,\n        showMenuWithinBounds: showMenuWithinBounds,\n        hide: hide,\n        getContent: getContent,\n        reposition: reposition,\n        isOpen: Sandboxing.isOpen\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        behaviours: augment(detail.inlineBehaviours, [\n          Sandboxing.config({\n            isPartOf: function (sandbox, data, queryElem) {\n              return isPartOf$1(data, queryElem) || isPartOfRelated(sandbox, queryElem);\n            },\n            getAttachPoint: function (sandbox) {\n              return detail.lazySink(sandbox).getOrDie();\n            },\n            onOpen: function (sandbox) {\n              detail.onShow(sandbox);\n            },\n            onClose: function (sandbox) {\n              detail.onHide(sandbox);\n            }\n          }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: Optional.none()\n            }\n          }),\n          Receiving.config({\n            channels: __assign(__assign({}, receivingChannel$1(__assign({ isExtraPart: spec.isExtraPart }, detail.fireDismissalEventInstead.map(function (fe) {\n              return { fireEventInstead: { event: fe.event } };\n            }).getOr({})))), receivingChannel(__assign(__assign({}, detail.fireRepositionEventInstead.map(function (fe) {\n              return { fireEventInstead: { event: fe.event } };\n            }).getOr({})), { doReposition: reposition })))\n          })\n        ]),\n        eventOrder: detail.eventOrder,\n        apis: apis\n      };\n    };\n    var InlineView = single({\n      name: 'InlineView',\n      configFields: [\n        required$1('lazySink'),\n        onHandler('onShow'),\n        onHandler('onHide'),\n        optionFunction('onEscape'),\n        field('inlineBehaviours', [\n          Sandboxing,\n          Representing,\n          Receiving\n        ]),\n        optionObjOf('fireDismissalEventInstead', [defaulted('event', dismissRequested())]),\n        optionObjOf('fireRepositionEventInstead', [defaulted('event', repositionRequested())]),\n        defaulted('getRelated', Optional.none),\n        defaulted('isExtraPart', never),\n        defaulted('eventOrder', Optional.none)\n      ],\n      factory: factory$m,\n      apis: {\n        showAt: function (apis, component, anchor, thing) {\n          apis.showAt(component, anchor, thing);\n        },\n        showWithin: function (apis, component, anchor, thing, boxElement) {\n          apis.showWithin(component, anchor, thing, boxElement);\n        },\n        showWithinBounds: function (apis, component, anchor, thing, bounds) {\n          apis.showWithinBounds(component, anchor, thing, bounds);\n        },\n        showMenuAt: function (apis, component, anchor, menuSpec) {\n          apis.showMenuAt(component, anchor, menuSpec);\n        },\n        showMenuWithinBounds: function (apis, component, anchor, menuSpec, bounds) {\n          apis.showMenuWithinBounds(component, anchor, menuSpec, bounds);\n        },\n        hide: function (apis, component) {\n          apis.hide(component);\n        },\n        isOpen: function (apis, component) {\n          return apis.isOpen(component);\n        },\n        getContent: function (apis, component) {\n          return apis.getContent(component);\n        },\n        setContent: function (apis, component, thing) {\n          apis.setContent(component, thing);\n        },\n        reposition: function (apis, component) {\n          apis.reposition(component);\n        }\n      }\n    });\n\n    var labelPrefix = 'layout-inset';\n    var westEdgeX = function (anchor) {\n      return anchor.x;\n    };\n    var middleX = function (anchor, element) {\n      return anchor.x + anchor.width / 2 - element.width / 2;\n    };\n    var eastEdgeX = function (anchor, element) {\n      return anchor.x + anchor.width - element.width;\n    };\n    var northY = function (anchor) {\n      return anchor.y;\n    };\n    var southY = function (anchor, element) {\n      return anchor.y + anchor.height - element.height;\n    };\n    var centreY = function (anchor, element) {\n      return anchor.y + anchor.height / 2 - element.height / 2;\n    };\n    var southwest = function (anchor, element, bubbles) {\n      return nu$6(eastEdgeX(anchor, element), southY(anchor, element), bubbles.insetSouthwest(), northwest$3(), 'southwest', boundsRestriction(anchor, {\n        right: 0,\n        bottom: 3\n      }), labelPrefix);\n    };\n    var southeast = function (anchor, element, bubbles) {\n      return nu$6(westEdgeX(anchor), southY(anchor, element), bubbles.insetSoutheast(), northeast$3(), 'southeast', boundsRestriction(anchor, {\n        left: 1,\n        bottom: 3\n      }), labelPrefix);\n    };\n    var northwest = function (anchor, element, bubbles) {\n      return nu$6(eastEdgeX(anchor, element), northY(anchor), bubbles.insetNorthwest(), southwest$3(), 'northwest', boundsRestriction(anchor, {\n        right: 0,\n        top: 2\n      }), labelPrefix);\n    };\n    var northeast = function (anchor, element, bubbles) {\n      return nu$6(westEdgeX(anchor), northY(anchor), bubbles.insetNortheast(), southeast$3(), 'northeast', boundsRestriction(anchor, {\n        left: 1,\n        top: 2\n      }), labelPrefix);\n    };\n    var north = function (anchor, element, bubbles) {\n      return nu$6(middleX(anchor, element), northY(anchor), bubbles.insetNorth(), south$3(), 'north', boundsRestriction(anchor, { top: 2 }), labelPrefix);\n    };\n    var south = function (anchor, element, bubbles) {\n      return nu$6(middleX(anchor, element), southY(anchor, element), bubbles.insetSouth(), north$3(), 'south', boundsRestriction(anchor, { bottom: 3 }), labelPrefix);\n    };\n    var east = function (anchor, element, bubbles) {\n      return nu$6(eastEdgeX(anchor, element), centreY(anchor, element), bubbles.insetEast(), west$3(), 'east', boundsRestriction(anchor, { right: 0 }), labelPrefix);\n    };\n    var west = function (anchor, element, bubbles) {\n      return nu$6(westEdgeX(anchor), centreY(anchor, element), bubbles.insetWest(), east$3(), 'west', boundsRestriction(anchor, { left: 1 }), labelPrefix);\n    };\n    var lookupPreserveLayout = function (lastPlacement) {\n      switch (lastPlacement) {\n      case 'north':\n        return north;\n      case 'northeast':\n        return northeast;\n      case 'northwest':\n        return northwest;\n      case 'south':\n        return south;\n      case 'southeast':\n        return southeast;\n      case 'southwest':\n        return southwest;\n      case 'east':\n        return east;\n      case 'west':\n        return west;\n      }\n    };\n    var preserve = function (anchor, element, bubbles, placee, bounds) {\n      var layout = getPlacement(placee).map(lookupPreserveLayout).getOr(north);\n      return layout(anchor, element, bubbles, placee, bounds);\n    };\n    var lookupFlippedLayout = function (lastPlacement) {\n      switch (lastPlacement) {\n      case 'north':\n        return south;\n      case 'northeast':\n        return southeast;\n      case 'northwest':\n        return southwest;\n      case 'south':\n        return north;\n      case 'southeast':\n        return northeast;\n      case 'southwest':\n        return northwest;\n      case 'east':\n        return west;\n      case 'west':\n        return east;\n      }\n    };\n    var flip$2 = function (anchor, element, bubbles, placee, bounds) {\n      var layout = getPlacement(placee).map(lookupFlippedLayout).getOr(north);\n      return layout(anchor, element, bubbles, placee, bounds);\n    };\n\n    var global$f = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var factory$l = function (detail) {\n      var events = events$a(detail.action);\n      var tag = detail.dom.tag;\n      var lookupAttr = function (attr) {\n        return get$e(detail.dom, 'attributes').bind(function (attrs) {\n          return get$e(attrs, attr);\n        });\n      };\n      var getModAttributes = function () {\n        if (tag === 'button') {\n          var type = lookupAttr('type').getOr('button');\n          var roleAttrs = lookupAttr('role').map(function (role) {\n            return { role: role };\n          }).getOr({});\n          return __assign({ type: type }, roleAttrs);\n        } else {\n          var role = lookupAttr('role').getOr('button');\n          return { role: role };\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: detail.components,\n        events: events,\n        behaviours: SketchBehaviours.augment(detail.buttonBehaviours, [\n          Focusing.config({}),\n          Keying.config({\n            mode: 'execution',\n            useSpace: true,\n            useEnter: true\n          })\n        ]),\n        domModification: { attributes: getModAttributes() },\n        eventOrder: detail.eventOrder\n      };\n    };\n    var Button = single({\n      name: 'Button',\n      factory: factory$l,\n      configFields: [\n        defaulted('uid', undefined),\n        required$1('dom'),\n        defaulted('components', []),\n        SketchBehaviours.field('buttonBehaviours', [\n          Focusing,\n          Keying\n        ]),\n        option('action'),\n        option('role'),\n        defaulted('eventOrder', {})\n      ]\n    });\n\n    var getAttrs = function (elem) {\n      var attributes = elem.dom.attributes !== undefined ? elem.dom.attributes : [];\n      return foldl(attributes, function (b, attr) {\n        var _a;\n        if (attr.name === 'class') {\n          return b;\n        } else {\n          return __assign(__assign({}, b), (_a = {}, _a[attr.name] = attr.value, _a));\n        }\n      }, {});\n    };\n    var getClasses = function (elem) {\n      return Array.prototype.slice.call(elem.dom.classList, 0);\n    };\n    var fromHtml = function (html) {\n      var elem = SugarElement.fromHtml(html);\n      var children$1 = children(elem);\n      var attrs = getAttrs(elem);\n      var classes = getClasses(elem);\n      var contents = children$1.length === 0 ? {} : { innerHtml: get$7(elem) };\n      return __assign({\n        tag: name$2(elem),\n        classes: classes,\n        attributes: attrs\n      }, contents);\n    };\n\n    var record = function (spec) {\n      var uid = isSketchSpec(spec) && hasNonNullableKey(spec, 'uid') ? spec.uid : generate$5('memento');\n      var get = function (anyInSystem) {\n        return anyInSystem.getSystem().getByUid(uid).getOrDie();\n      };\n      var getOpt = function (anyInSystem) {\n        return anyInSystem.getSystem().getByUid(uid).toOptional();\n      };\n      var asSpec = function () {\n        return __assign(__assign({}, spec), { uid: uid });\n      };\n      return {\n        get: get,\n        getOpt: getOpt,\n        asSpec: asSpec\n      };\n    };\n\n    function _typeof(obj) {\n      '@babel/helpers - typeof';\n      return _typeof = 'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator ? function (obj) {\n        return typeof obj;\n      } : function (obj) {\n        return obj && 'function' == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? 'symbol' : typeof obj;\n      }, _typeof(obj);\n    }\n    function _setPrototypeOf(o, p) {\n      _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n        o.__proto__ = p;\n        return o;\n      };\n      return _setPrototypeOf(o, p);\n    }\n    function _isNativeReflectConstruct() {\n      if (typeof Reflect === 'undefined' || !Reflect.construct)\n        return false;\n      if (Reflect.construct.sham)\n        return false;\n      if (typeof Proxy === 'function')\n        return true;\n      try {\n        Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {\n        }));\n        return true;\n      } catch (e) {\n        return false;\n      }\n    }\n    function _construct(Parent, args, Class) {\n      if (_isNativeReflectConstruct()) {\n        _construct = Reflect.construct;\n      } else {\n        _construct = function _construct(Parent, args, Class) {\n          var a = [null];\n          a.push.apply(a, args);\n          var Constructor = Function.bind.apply(Parent, a);\n          var instance = new Constructor();\n          if (Class)\n            _setPrototypeOf(instance, Class.prototype);\n          return instance;\n        };\n      }\n      return _construct.apply(null, arguments);\n    }\n    function _toConsumableArray(arr) {\n      return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n    }\n    function _arrayWithoutHoles(arr) {\n      if (Array.isArray(arr))\n        return _arrayLikeToArray(arr);\n    }\n    function _iterableToArray(iter) {\n      if (typeof Symbol !== 'undefined' && iter[Symbol.iterator] != null || iter['@@iterator'] != null)\n        return Array.from(iter);\n    }\n    function _unsupportedIterableToArray(o, minLen) {\n      if (!o)\n        return;\n      if (typeof o === 'string')\n        return _arrayLikeToArray(o, minLen);\n      var n = Object.prototype.toString.call(o).slice(8, -1);\n      if (n === 'Object' && o.constructor)\n        n = o.constructor.name;\n      if (n === 'Map' || n === 'Set')\n        return Array.from(o);\n      if (n === 'Arguments' || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))\n        return _arrayLikeToArray(o, minLen);\n    }\n    function _arrayLikeToArray(arr, len) {\n      if (len == null || len > arr.length)\n        len = arr.length;\n      for (var i = 0, arr2 = new Array(len); i < len; i++)\n        arr2[i] = arr[i];\n      return arr2;\n    }\n    function _nonIterableSpread() {\n      throw new TypeError('Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.');\n    }\n    var hasOwnProperty = Object.hasOwnProperty, setPrototypeOf = Object.setPrototypeOf, isFrozen = Object.isFrozen, getPrototypeOf = Object.getPrototypeOf, getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n    var freeze = Object.freeze, seal = Object.seal, create$5 = Object.create;\n    var _ref = typeof Reflect !== 'undefined' && Reflect, apply$1 = _ref.apply, construct = _ref.construct;\n    if (!apply$1) {\n      apply$1 = function apply(fun, thisValue, args) {\n        return fun.apply(thisValue, args);\n      };\n    }\n    if (!freeze) {\n      freeze = function freeze(x) {\n        return x;\n      };\n    }\n    if (!seal) {\n      seal = function seal(x) {\n        return x;\n      };\n    }\n    if (!construct) {\n      construct = function construct(Func, args) {\n        return _construct(Func, _toConsumableArray(args));\n      };\n    }\n    var arrayForEach = unapply(Array.prototype.forEach);\n    var arrayPop = unapply(Array.prototype.pop);\n    var arrayPush = unapply(Array.prototype.push);\n    var stringToLowerCase = unapply(String.prototype.toLowerCase);\n    var stringMatch = unapply(String.prototype.match);\n    var stringReplace = unapply(String.prototype.replace);\n    var stringIndexOf = unapply(String.prototype.indexOf);\n    var stringTrim = unapply(String.prototype.trim);\n    var regExpTest = unapply(RegExp.prototype.test);\n    var typeErrorCreate = unconstruct(TypeError);\n    function unapply(func) {\n      return function (thisArg) {\n        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n        return apply$1(func, thisArg, args);\n      };\n    }\n    function unconstruct(func) {\n      return function () {\n        for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n          args[_key2] = arguments[_key2];\n        }\n        return construct(func, args);\n      };\n    }\n    function addToSet(set, array) {\n      if (setPrototypeOf) {\n        setPrototypeOf(set, null);\n      }\n      var l = array.length;\n      while (l--) {\n        var element = array[l];\n        if (typeof element === 'string') {\n          var lcElement = stringToLowerCase(element);\n          if (lcElement !== element) {\n            if (!isFrozen(array)) {\n              array[l] = lcElement;\n            }\n            element = lcElement;\n          }\n        }\n        set[element] = true;\n      }\n      return set;\n    }\n    function clone$1(object) {\n      var newObject = create$5(null);\n      var property;\n      for (property in object) {\n        if (apply$1(hasOwnProperty, object, [property])) {\n          newObject[property] = object[property];\n        }\n      }\n      return newObject;\n    }\n    function lookupGetter(object, prop) {\n      while (object !== null) {\n        var desc = getOwnPropertyDescriptor(object, prop);\n        if (desc) {\n          if (desc.get) {\n            return unapply(desc.get);\n          }\n          if (typeof desc.value === 'function') {\n            return unapply(desc.value);\n          }\n        }\n        object = getPrototypeOf(object);\n      }\n      function fallbackValue(element) {\n        console.warn('fallback value for', element);\n        return null;\n      }\n      return fallbackValue;\n    }\n    var html$1 = freeze([\n      'a',\n      'abbr',\n      'acronym',\n      'address',\n      'area',\n      'article',\n      'aside',\n      'audio',\n      'b',\n      'bdi',\n      'bdo',\n      'big',\n      'blink',\n      'blockquote',\n      'body',\n      'br',\n      'button',\n      'canvas',\n      'caption',\n      'center',\n      'cite',\n      'code',\n      'col',\n      'colgroup',\n      'content',\n      'data',\n      'datalist',\n      'dd',\n      'decorator',\n      'del',\n      'details',\n      'dfn',\n      'dialog',\n      'dir',\n      'div',\n      'dl',\n      'dt',\n      'element',\n      'em',\n      'fieldset',\n      'figcaption',\n      'figure',\n      'font',\n      'footer',\n      'form',\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'head',\n      'header',\n      'hgroup',\n      'hr',\n      'html',\n      'i',\n      'img',\n      'input',\n      'ins',\n      'kbd',\n      'label',\n      'legend',\n      'li',\n      'main',\n      'map',\n      'mark',\n      'marquee',\n      'menu',\n      'menuitem',\n      'meter',\n      'nav',\n      'nobr',\n      'ol',\n      'optgroup',\n      'option',\n      'output',\n      'p',\n      'picture',\n      'pre',\n      'progress',\n      'q',\n      'rp',\n      'rt',\n      'ruby',\n      's',\n      'samp',\n      'section',\n      'select',\n      'shadow',\n      'small',\n      'source',\n      'spacer',\n      'span',\n      'strike',\n      'strong',\n      'style',\n      'sub',\n      'summary',\n      'sup',\n      'table',\n      'tbody',\n      'td',\n      'template',\n      'textarea',\n      'tfoot',\n      'th',\n      'thead',\n      'time',\n      'tr',\n      'track',\n      'tt',\n      'u',\n      'ul',\n      'var',\n      'video',\n      'wbr'\n    ]);\n    var svg$1 = freeze([\n      'svg',\n      'a',\n      'altglyph',\n      'altglyphdef',\n      'altglyphitem',\n      'animatecolor',\n      'animatemotion',\n      'animatetransform',\n      'circle',\n      'clippath',\n      'defs',\n      'desc',\n      'ellipse',\n      'filter',\n      'font',\n      'g',\n      'glyph',\n      'glyphref',\n      'hkern',\n      'image',\n      'line',\n      'lineargradient',\n      'marker',\n      'mask',\n      'metadata',\n      'mpath',\n      'path',\n      'pattern',\n      'polygon',\n      'polyline',\n      'radialgradient',\n      'rect',\n      'stop',\n      'style',\n      'switch',\n      'symbol',\n      'text',\n      'textpath',\n      'title',\n      'tref',\n      'tspan',\n      'view',\n      'vkern'\n    ]);\n    var svgFilters = freeze([\n      'feBlend',\n      'feColorMatrix',\n      'feComponentTransfer',\n      'feComposite',\n      'feConvolveMatrix',\n      'feDiffuseLighting',\n      'feDisplacementMap',\n      'feDistantLight',\n      'feFlood',\n      'feFuncA',\n      'feFuncB',\n      'feFuncG',\n      'feFuncR',\n      'feGaussianBlur',\n      'feImage',\n      'feMerge',\n      'feMergeNode',\n      'feMorphology',\n      'feOffset',\n      'fePointLight',\n      'feSpecularLighting',\n      'feSpotLight',\n      'feTile',\n      'feTurbulence'\n    ]);\n    var svgDisallowed = freeze([\n      'animate',\n      'color-profile',\n      'cursor',\n      'discard',\n      'fedropshadow',\n      'font-face',\n      'font-face-format',\n      'font-face-name',\n      'font-face-src',\n      'font-face-uri',\n      'foreignobject',\n      'hatch',\n      'hatchpath',\n      'mesh',\n      'meshgradient',\n      'meshpatch',\n      'meshrow',\n      'missing-glyph',\n      'script',\n      'set',\n      'solidcolor',\n      'unknown',\n      'use'\n    ]);\n    var mathMl$1 = freeze([\n      'math',\n      'menclose',\n      'merror',\n      'mfenced',\n      'mfrac',\n      'mglyph',\n      'mi',\n      'mlabeledtr',\n      'mmultiscripts',\n      'mn',\n      'mo',\n      'mover',\n      'mpadded',\n      'mphantom',\n      'mroot',\n      'mrow',\n      'ms',\n      'mspace',\n      'msqrt',\n      'mstyle',\n      'msub',\n      'msup',\n      'msubsup',\n      'mtable',\n      'mtd',\n      'mtext',\n      'mtr',\n      'munder',\n      'munderover'\n    ]);\n    var mathMlDisallowed = freeze([\n      'maction',\n      'maligngroup',\n      'malignmark',\n      'mlongdiv',\n      'mscarries',\n      'mscarry',\n      'msgroup',\n      'mstack',\n      'msline',\n      'msrow',\n      'semantics',\n      'annotation',\n      'annotation-xml',\n      'mprescripts',\n      'none'\n    ]);\n    var text = freeze(['#text']);\n    var html = freeze([\n      'accept',\n      'action',\n      'align',\n      'alt',\n      'autocapitalize',\n      'autocomplete',\n      'autopictureinpicture',\n      'autoplay',\n      'background',\n      'bgcolor',\n      'border',\n      'capture',\n      'cellpadding',\n      'cellspacing',\n      'checked',\n      'cite',\n      'class',\n      'clear',\n      'color',\n      'cols',\n      'colspan',\n      'controls',\n      'controlslist',\n      'coords',\n      'crossorigin',\n      'datetime',\n      'decoding',\n      'default',\n      'dir',\n      'disabled',\n      'disablepictureinpicture',\n      'disableremoteplayback',\n      'download',\n      'draggable',\n      'enctype',\n      'enterkeyhint',\n      'face',\n      'for',\n      'headers',\n      'height',\n      'hidden',\n      'high',\n      'href',\n      'hreflang',\n      'id',\n      'inputmode',\n      'integrity',\n      'ismap',\n      'kind',\n      'label',\n      'lang',\n      'list',\n      'loading',\n      'loop',\n      'low',\n      'max',\n      'maxlength',\n      'media',\n      'method',\n      'min',\n      'minlength',\n      'multiple',\n      'muted',\n      'name',\n      'nonce',\n      'noshade',\n      'novalidate',\n      'nowrap',\n      'open',\n      'optimum',\n      'pattern',\n      'placeholder',\n      'playsinline',\n      'poster',\n      'preload',\n      'pubdate',\n      'radiogroup',\n      'readonly',\n      'rel',\n      'required',\n      'rev',\n      'reversed',\n      'role',\n      'rows',\n      'rowspan',\n      'spellcheck',\n      'scope',\n      'selected',\n      'shape',\n      'size',\n      'sizes',\n      'span',\n      'srclang',\n      'start',\n      'src',\n      'srcset',\n      'step',\n      'style',\n      'summary',\n      'tabindex',\n      'title',\n      'translate',\n      'type',\n      'usemap',\n      'valign',\n      'value',\n      'width',\n      'xmlns',\n      'slot'\n    ]);\n    var svg = freeze([\n      'accent-height',\n      'accumulate',\n      'additive',\n      'alignment-baseline',\n      'ascent',\n      'attributename',\n      'attributetype',\n      'azimuth',\n      'basefrequency',\n      'baseline-shift',\n      'begin',\n      'bias',\n      'by',\n      'class',\n      'clip',\n      'clippathunits',\n      'clip-path',\n      'clip-rule',\n      'color',\n      'color-interpolation',\n      'color-interpolation-filters',\n      'color-profile',\n      'color-rendering',\n      'cx',\n      'cy',\n      'd',\n      'dx',\n      'dy',\n      'diffuseconstant',\n      'direction',\n      'display',\n      'divisor',\n      'dur',\n      'edgemode',\n      'elevation',\n      'end',\n      'fill',\n      'fill-opacity',\n      'fill-rule',\n      'filter',\n      'filterunits',\n      'flood-color',\n      'flood-opacity',\n      'font-family',\n      'font-size',\n      'font-size-adjust',\n      'font-stretch',\n      'font-style',\n      'font-variant',\n      'font-weight',\n      'fx',\n      'fy',\n      'g1',\n      'g2',\n      'glyph-name',\n      'glyphref',\n      'gradientunits',\n      'gradienttransform',\n      'height',\n      'href',\n      'id',\n      'image-rendering',\n      'in',\n      'in2',\n      'k',\n      'k1',\n      'k2',\n      'k3',\n      'k4',\n      'kerning',\n      'keypoints',\n      'keysplines',\n      'keytimes',\n      'lang',\n      'lengthadjust',\n      'letter-spacing',\n      'kernelmatrix',\n      'kernelunitlength',\n      'lighting-color',\n      'local',\n      'marker-end',\n      'marker-mid',\n      'marker-start',\n      'markerheight',\n      'markerunits',\n      'markerwidth',\n      'maskcontentunits',\n      'maskunits',\n      'max',\n      'mask',\n      'media',\n      'method',\n      'mode',\n      'min',\n      'name',\n      'numoctaves',\n      'offset',\n      'operator',\n      'opacity',\n      'order',\n      'orient',\n      'orientation',\n      'origin',\n      'overflow',\n      'paint-order',\n      'path',\n      'pathlength',\n      'patterncontentunits',\n      'patterntransform',\n      'patternunits',\n      'points',\n      'preservealpha',\n      'preserveaspectratio',\n      'primitiveunits',\n      'r',\n      'rx',\n      'ry',\n      'radius',\n      'refx',\n      'refy',\n      'repeatcount',\n      'repeatdur',\n      'restart',\n      'result',\n      'rotate',\n      'scale',\n      'seed',\n      'shape-rendering',\n      'specularconstant',\n      'specularexponent',\n      'spreadmethod',\n      'startoffset',\n      'stddeviation',\n      'stitchtiles',\n      'stop-color',\n      'stop-opacity',\n      'stroke-dasharray',\n      'stroke-dashoffset',\n      'stroke-linecap',\n      'stroke-linejoin',\n      'stroke-miterlimit',\n      'stroke-opacity',\n      'stroke',\n      'stroke-width',\n      'style',\n      'surfacescale',\n      'systemlanguage',\n      'tabindex',\n      'targetx',\n      'targety',\n      'transform',\n      'transform-origin',\n      'text-anchor',\n      'text-decoration',\n      'text-rendering',\n      'textlength',\n      'type',\n      'u1',\n      'u2',\n      'unicode',\n      'values',\n      'viewbox',\n      'visibility',\n      'version',\n      'vert-adv-y',\n      'vert-origin-x',\n      'vert-origin-y',\n      'width',\n      'word-spacing',\n      'wrap',\n      'writing-mode',\n      'xchannelselector',\n      'ychannelselector',\n      'x',\n      'x1',\n      'x2',\n      'xmlns',\n      'y',\n      'y1',\n      'y2',\n      'z',\n      'zoomandpan'\n    ]);\n    var mathMl = freeze([\n      'accent',\n      'accentunder',\n      'align',\n      'bevelled',\n      'close',\n      'columnsalign',\n      'columnlines',\n      'columnspan',\n      'denomalign',\n      'depth',\n      'dir',\n      'display',\n      'displaystyle',\n      'encoding',\n      'fence',\n      'frame',\n      'height',\n      'href',\n      'id',\n      'largeop',\n      'length',\n      'linethickness',\n      'lspace',\n      'lquote',\n      'mathbackground',\n      'mathcolor',\n      'mathsize',\n      'mathvariant',\n      'maxsize',\n      'minsize',\n      'movablelimits',\n      'notation',\n      'numalign',\n      'open',\n      'rowalign',\n      'rowlines',\n      'rowspacing',\n      'rowspan',\n      'rspace',\n      'rquote',\n      'scriptlevel',\n      'scriptminsize',\n      'scriptsizemultiplier',\n      'selection',\n      'separator',\n      'separators',\n      'stretchy',\n      'subscriptshift',\n      'supscriptshift',\n      'symmetric',\n      'voffset',\n      'width',\n      'xmlns'\n    ]);\n    var xml = freeze([\n      'xlink:href',\n      'xml:id',\n      'xlink:title',\n      'xml:space',\n      'xmlns:xlink'\n    ]);\n    var MUSTACHE_EXPR = seal(/\\{\\{[\\w\\W]*|[\\w\\W]*\\}\\}/gm);\n    var ERB_EXPR = seal(/<%[\\w\\W]*|[\\w\\W]*%>/gm);\n    var DATA_ATTR = seal(/^data-[\\-\\w.\\u00B7-\\uFFFF]/);\n    var ARIA_ATTR = seal(/^aria-[\\-\\w]+$/);\n    var IS_ALLOWED_URI = seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i);\n    var IS_SCRIPT_OR_DATA = seal(/^(?:\\w+script|data):/i);\n    var ATTR_WHITESPACE = seal(/[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205F\\u3000]/g);\n    var DOCTYPE_NAME = seal(/^html$/i);\n    var getGlobal = function getGlobal() {\n      return typeof window === 'undefined' ? null : window;\n    };\n    var _createTrustedTypesPolicy = function _createTrustedTypesPolicy(trustedTypes, document) {\n      if (_typeof(trustedTypes) !== 'object' || typeof trustedTypes.createPolicy !== 'function') {\n        return null;\n      }\n      var suffix = null;\n      var ATTR_NAME = 'data-tt-policy-suffix';\n      if (document.currentScript && document.currentScript.hasAttribute(ATTR_NAME)) {\n        suffix = document.currentScript.getAttribute(ATTR_NAME);\n      }\n      var policyName = 'dompurify' + (suffix ? '#' + suffix : '');\n      try {\n        return trustedTypes.createPolicy(policyName, {\n          createHTML: function createHTML(html) {\n            return html;\n          }\n        });\n      } catch (_) {\n        console.warn('TrustedTypes policy ' + policyName + ' could not be created.');\n        return null;\n      }\n    };\n    function createDOMPurify() {\n      var window = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getGlobal();\n      var DOMPurify = function DOMPurify(root) {\n        return createDOMPurify(root);\n      };\n      DOMPurify.version = '2.3.8';\n      DOMPurify.removed = [];\n      if (!window || !window.document || window.document.nodeType !== 9) {\n        DOMPurify.isSupported = false;\n        return DOMPurify;\n      }\n      var originalDocument = window.document;\n      var document = window.document;\n      var DocumentFragment = window.DocumentFragment, HTMLTemplateElement = window.HTMLTemplateElement, Node = window.Node, Element = window.Element, NodeFilter = window.NodeFilter, _window$NamedNodeMap = window.NamedNodeMap, NamedNodeMap = _window$NamedNodeMap === void 0 ? window.NamedNodeMap || window.MozNamedAttrMap : _window$NamedNodeMap, HTMLFormElement = window.HTMLFormElement, DOMParser = window.DOMParser, trustedTypes = window.trustedTypes;\n      var ElementPrototype = Element.prototype;\n      var cloneNode = lookupGetter(ElementPrototype, 'cloneNode');\n      var getNextSibling = lookupGetter(ElementPrototype, 'nextSibling');\n      var getChildNodes = lookupGetter(ElementPrototype, 'childNodes');\n      var getParentNode = lookupGetter(ElementPrototype, 'parentNode');\n      if (typeof HTMLTemplateElement === 'function') {\n        var template = document.createElement('template');\n        if (template.content && template.content.ownerDocument) {\n          document = template.content.ownerDocument;\n        }\n      }\n      var trustedTypesPolicy = _createTrustedTypesPolicy(trustedTypes, originalDocument);\n      var emptyHTML = trustedTypesPolicy ? trustedTypesPolicy.createHTML('') : '';\n      var _document = document, implementation = _document.implementation, createNodeIterator = _document.createNodeIterator, createDocumentFragment = _document.createDocumentFragment, getElementsByTagName = _document.getElementsByTagName;\n      var importNode = originalDocument.importNode;\n      var documentMode = {};\n      try {\n        documentMode = clone$1(document).documentMode ? document.documentMode : {};\n      } catch (_) {\n      }\n      var hooks = {};\n      DOMPurify.isSupported = typeof getParentNode === 'function' && implementation && typeof implementation.createHTMLDocument !== 'undefined' && documentMode !== 9;\n      var MUSTACHE_EXPR$1 = MUSTACHE_EXPR, ERB_EXPR$1 = ERB_EXPR, DATA_ATTR$1 = DATA_ATTR, ARIA_ATTR$1 = ARIA_ATTR, IS_SCRIPT_OR_DATA$1 = IS_SCRIPT_OR_DATA, ATTR_WHITESPACE$1 = ATTR_WHITESPACE;\n      var IS_ALLOWED_URI$1 = IS_ALLOWED_URI;\n      var ALLOWED_TAGS = null;\n      var DEFAULT_ALLOWED_TAGS = addToSet({}, [].concat(_toConsumableArray(html$1), _toConsumableArray(svg$1), _toConsumableArray(svgFilters), _toConsumableArray(mathMl$1), _toConsumableArray(text)));\n      var ALLOWED_ATTR = null;\n      var DEFAULT_ALLOWED_ATTR = addToSet({}, [].concat(_toConsumableArray(html), _toConsumableArray(svg), _toConsumableArray(mathMl), _toConsumableArray(xml)));\n      var CUSTOM_ELEMENT_HANDLING = Object.seal(Object.create(null, {\n        tagNameCheck: {\n          writable: true,\n          configurable: false,\n          enumerable: true,\n          value: null\n        },\n        attributeNameCheck: {\n          writable: true,\n          configurable: false,\n          enumerable: true,\n          value: null\n        },\n        allowCustomizedBuiltInElements: {\n          writable: true,\n          configurable: false,\n          enumerable: true,\n          value: false\n        }\n      }));\n      var FORBID_TAGS = null;\n      var FORBID_ATTR = null;\n      var ALLOW_ARIA_ATTR = true;\n      var ALLOW_DATA_ATTR = true;\n      var ALLOW_UNKNOWN_PROTOCOLS = false;\n      var SAFE_FOR_TEMPLATES = false;\n      var WHOLE_DOCUMENT = false;\n      var SET_CONFIG = false;\n      var FORCE_BODY = false;\n      var RETURN_DOM = false;\n      var RETURN_DOM_FRAGMENT = false;\n      var RETURN_TRUSTED_TYPE = false;\n      var SANITIZE_DOM = true;\n      var KEEP_CONTENT = true;\n      var IN_PLACE = false;\n      var USE_PROFILES = {};\n      var FORBID_CONTENTS = null;\n      var DEFAULT_FORBID_CONTENTS = addToSet({}, [\n        'annotation-xml',\n        'audio',\n        'colgroup',\n        'desc',\n        'foreignobject',\n        'head',\n        'iframe',\n        'math',\n        'mi',\n        'mn',\n        'mo',\n        'ms',\n        'mtext',\n        'noembed',\n        'noframes',\n        'noscript',\n        'plaintext',\n        'script',\n        'style',\n        'svg',\n        'template',\n        'thead',\n        'title',\n        'video',\n        'xmp'\n      ]);\n      var DATA_URI_TAGS = null;\n      var DEFAULT_DATA_URI_TAGS = addToSet({}, [\n        'audio',\n        'video',\n        'img',\n        'source',\n        'image',\n        'track'\n      ]);\n      var URI_SAFE_ATTRIBUTES = null;\n      var DEFAULT_URI_SAFE_ATTRIBUTES = addToSet({}, [\n        'alt',\n        'class',\n        'for',\n        'id',\n        'label',\n        'name',\n        'pattern',\n        'placeholder',\n        'role',\n        'summary',\n        'title',\n        'value',\n        'style',\n        'xmlns'\n      ]);\n      var MATHML_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n      var SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\n      var HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\n      var NAMESPACE = HTML_NAMESPACE;\n      var IS_EMPTY_INPUT = false;\n      var PARSER_MEDIA_TYPE;\n      var SUPPORTED_PARSER_MEDIA_TYPES = [\n        'application/xhtml+xml',\n        'text/html'\n      ];\n      var DEFAULT_PARSER_MEDIA_TYPE = 'text/html';\n      var transformCaseFunc;\n      var CONFIG = null;\n      var formElement = document.createElement('form');\n      var isRegexOrFunction = function isRegexOrFunction(testValue) {\n        return testValue instanceof RegExp || testValue instanceof Function;\n      };\n      var _parseConfig = function _parseConfig(cfg) {\n        if (CONFIG && CONFIG === cfg) {\n          return;\n        }\n        if (!cfg || _typeof(cfg) !== 'object') {\n          cfg = {};\n        }\n        cfg = clone$1(cfg);\n        ALLOWED_TAGS = 'ALLOWED_TAGS' in cfg ? addToSet({}, cfg.ALLOWED_TAGS) : DEFAULT_ALLOWED_TAGS;\n        ALLOWED_ATTR = 'ALLOWED_ATTR' in cfg ? addToSet({}, cfg.ALLOWED_ATTR) : DEFAULT_ALLOWED_ATTR;\n        URI_SAFE_ATTRIBUTES = 'ADD_URI_SAFE_ATTR' in cfg ? addToSet(clone$1(DEFAULT_URI_SAFE_ATTRIBUTES), cfg.ADD_URI_SAFE_ATTR) : DEFAULT_URI_SAFE_ATTRIBUTES;\n        DATA_URI_TAGS = 'ADD_DATA_URI_TAGS' in cfg ? addToSet(clone$1(DEFAULT_DATA_URI_TAGS), cfg.ADD_DATA_URI_TAGS) : DEFAULT_DATA_URI_TAGS;\n        FORBID_CONTENTS = 'FORBID_CONTENTS' in cfg ? addToSet({}, cfg.FORBID_CONTENTS) : DEFAULT_FORBID_CONTENTS;\n        FORBID_TAGS = 'FORBID_TAGS' in cfg ? addToSet({}, cfg.FORBID_TAGS) : {};\n        FORBID_ATTR = 'FORBID_ATTR' in cfg ? addToSet({}, cfg.FORBID_ATTR) : {};\n        USE_PROFILES = 'USE_PROFILES' in cfg ? cfg.USE_PROFILES : false;\n        ALLOW_ARIA_ATTR = cfg.ALLOW_ARIA_ATTR !== false;\n        ALLOW_DATA_ATTR = cfg.ALLOW_DATA_ATTR !== false;\n        ALLOW_UNKNOWN_PROTOCOLS = cfg.ALLOW_UNKNOWN_PROTOCOLS || false;\n        SAFE_FOR_TEMPLATES = cfg.SAFE_FOR_TEMPLATES || false;\n        WHOLE_DOCUMENT = cfg.WHOLE_DOCUMENT || false;\n        RETURN_DOM = cfg.RETURN_DOM || false;\n        RETURN_DOM_FRAGMENT = cfg.RETURN_DOM_FRAGMENT || false;\n        RETURN_TRUSTED_TYPE = cfg.RETURN_TRUSTED_TYPE || false;\n        FORCE_BODY = cfg.FORCE_BODY || false;\n        SANITIZE_DOM = cfg.SANITIZE_DOM !== false;\n        KEEP_CONTENT = cfg.KEEP_CONTENT !== false;\n        IN_PLACE = cfg.IN_PLACE || false;\n        IS_ALLOWED_URI$1 = cfg.ALLOWED_URI_REGEXP || IS_ALLOWED_URI$1;\n        NAMESPACE = cfg.NAMESPACE || HTML_NAMESPACE;\n        if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck)) {\n          CUSTOM_ELEMENT_HANDLING.tagNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck;\n        }\n        if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)) {\n          CUSTOM_ELEMENT_HANDLING.attributeNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck;\n        }\n        if (cfg.CUSTOM_ELEMENT_HANDLING && typeof cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements === 'boolean') {\n          CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements = cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements;\n        }\n        PARSER_MEDIA_TYPE = SUPPORTED_PARSER_MEDIA_TYPES.indexOf(cfg.PARSER_MEDIA_TYPE) === -1 ? PARSER_MEDIA_TYPE = DEFAULT_PARSER_MEDIA_TYPE : PARSER_MEDIA_TYPE = cfg.PARSER_MEDIA_TYPE;\n        transformCaseFunc = PARSER_MEDIA_TYPE === 'application/xhtml+xml' ? function (x) {\n          return x;\n        } : stringToLowerCase;\n        if (SAFE_FOR_TEMPLATES) {\n          ALLOW_DATA_ATTR = false;\n        }\n        if (RETURN_DOM_FRAGMENT) {\n          RETURN_DOM = true;\n        }\n        if (USE_PROFILES) {\n          ALLOWED_TAGS = addToSet({}, _toConsumableArray(text));\n          ALLOWED_ATTR = [];\n          if (USE_PROFILES.html === true) {\n            addToSet(ALLOWED_TAGS, html$1);\n            addToSet(ALLOWED_ATTR, html);\n          }\n          if (USE_PROFILES.svg === true) {\n            addToSet(ALLOWED_TAGS, svg$1);\n            addToSet(ALLOWED_ATTR, svg);\n            addToSet(ALLOWED_ATTR, xml);\n          }\n          if (USE_PROFILES.svgFilters === true) {\n            addToSet(ALLOWED_TAGS, svgFilters);\n            addToSet(ALLOWED_ATTR, svg);\n            addToSet(ALLOWED_ATTR, xml);\n          }\n          if (USE_PROFILES.mathMl === true) {\n            addToSet(ALLOWED_TAGS, mathMl$1);\n            addToSet(ALLOWED_ATTR, mathMl);\n            addToSet(ALLOWED_ATTR, xml);\n          }\n        }\n        if (cfg.ADD_TAGS) {\n          if (ALLOWED_TAGS === DEFAULT_ALLOWED_TAGS) {\n            ALLOWED_TAGS = clone$1(ALLOWED_TAGS);\n          }\n          addToSet(ALLOWED_TAGS, cfg.ADD_TAGS);\n        }\n        if (cfg.ADD_ATTR) {\n          if (ALLOWED_ATTR === DEFAULT_ALLOWED_ATTR) {\n            ALLOWED_ATTR = clone$1(ALLOWED_ATTR);\n          }\n          addToSet(ALLOWED_ATTR, cfg.ADD_ATTR);\n        }\n        if (cfg.ADD_URI_SAFE_ATTR) {\n          addToSet(URI_SAFE_ATTRIBUTES, cfg.ADD_URI_SAFE_ATTR);\n        }\n        if (cfg.FORBID_CONTENTS) {\n          if (FORBID_CONTENTS === DEFAULT_FORBID_CONTENTS) {\n            FORBID_CONTENTS = clone$1(FORBID_CONTENTS);\n          }\n          addToSet(FORBID_CONTENTS, cfg.FORBID_CONTENTS);\n        }\n        if (KEEP_CONTENT) {\n          ALLOWED_TAGS['#text'] = true;\n        }\n        if (WHOLE_DOCUMENT) {\n          addToSet(ALLOWED_TAGS, [\n            'html',\n            'head',\n            'body'\n          ]);\n        }\n        if (ALLOWED_TAGS.table) {\n          addToSet(ALLOWED_TAGS, ['tbody']);\n          delete FORBID_TAGS.tbody;\n        }\n        if (freeze) {\n          freeze(cfg);\n        }\n        CONFIG = cfg;\n      };\n      var MATHML_TEXT_INTEGRATION_POINTS = addToSet({}, [\n        'mi',\n        'mo',\n        'mn',\n        'ms',\n        'mtext'\n      ]);\n      var HTML_INTEGRATION_POINTS = addToSet({}, [\n        'foreignobject',\n        'desc',\n        'title',\n        'annotation-xml'\n      ]);\n      var COMMON_SVG_AND_HTML_ELEMENTS = addToSet({}, [\n        'title',\n        'style',\n        'font',\n        'a',\n        'script'\n      ]);\n      var ALL_SVG_TAGS = addToSet({}, svg$1);\n      addToSet(ALL_SVG_TAGS, svgFilters);\n      addToSet(ALL_SVG_TAGS, svgDisallowed);\n      var ALL_MATHML_TAGS = addToSet({}, mathMl$1);\n      addToSet(ALL_MATHML_TAGS, mathMlDisallowed);\n      var _checkValidNamespace = function _checkValidNamespace(element) {\n        var parent = getParentNode(element);\n        if (!parent || !parent.tagName) {\n          parent = {\n            namespaceURI: HTML_NAMESPACE,\n            tagName: 'template'\n          };\n        }\n        var tagName = stringToLowerCase(element.tagName);\n        var parentTagName = stringToLowerCase(parent.tagName);\n        if (element.namespaceURI === SVG_NAMESPACE) {\n          if (parent.namespaceURI === HTML_NAMESPACE) {\n            return tagName === 'svg';\n          }\n          if (parent.namespaceURI === MATHML_NAMESPACE) {\n            return tagName === 'svg' && (parentTagName === 'annotation-xml' || MATHML_TEXT_INTEGRATION_POINTS[parentTagName]);\n          }\n          return Boolean(ALL_SVG_TAGS[tagName]);\n        }\n        if (element.namespaceURI === MATHML_NAMESPACE) {\n          if (parent.namespaceURI === HTML_NAMESPACE) {\n            return tagName === 'math';\n          }\n          if (parent.namespaceURI === SVG_NAMESPACE) {\n            return tagName === 'math' && HTML_INTEGRATION_POINTS[parentTagName];\n          }\n          return Boolean(ALL_MATHML_TAGS[tagName]);\n        }\n        if (element.namespaceURI === HTML_NAMESPACE) {\n          if (parent.namespaceURI === SVG_NAMESPACE && !HTML_INTEGRATION_POINTS[parentTagName]) {\n            return false;\n          }\n          if (parent.namespaceURI === MATHML_NAMESPACE && !MATHML_TEXT_INTEGRATION_POINTS[parentTagName]) {\n            return false;\n          }\n          return !ALL_MATHML_TAGS[tagName] && (COMMON_SVG_AND_HTML_ELEMENTS[tagName] || !ALL_SVG_TAGS[tagName]);\n        }\n        return false;\n      };\n      var _forceRemove = function _forceRemove(node) {\n        arrayPush(DOMPurify.removed, { element: node });\n        try {\n          node.parentNode.removeChild(node);\n        } catch (_) {\n          try {\n            node.outerHTML = emptyHTML;\n          } catch (_) {\n            node.remove();\n          }\n        }\n      };\n      var _removeAttribute = function _removeAttribute(name, node) {\n        try {\n          arrayPush(DOMPurify.removed, {\n            attribute: node.getAttributeNode(name),\n            from: node\n          });\n        } catch (_) {\n          arrayPush(DOMPurify.removed, {\n            attribute: null,\n            from: node\n          });\n        }\n        node.removeAttribute(name);\n        if (name === 'is' && !ALLOWED_ATTR[name]) {\n          if (RETURN_DOM || RETURN_DOM_FRAGMENT) {\n            try {\n              _forceRemove(node);\n            } catch (_) {\n            }\n          } else {\n            try {\n              node.setAttribute(name, '');\n            } catch (_) {\n            }\n          }\n        }\n      };\n      var _initDocument = function _initDocument(dirty) {\n        var doc;\n        var leadingWhitespace;\n        if (FORCE_BODY) {\n          dirty = '<remove></remove>' + dirty;\n        } else {\n          var matches = stringMatch(dirty, /^[\\r\\n\\t ]+/);\n          leadingWhitespace = matches && matches[0];\n        }\n        if (PARSER_MEDIA_TYPE === 'application/xhtml+xml') {\n          dirty = '<html xmlns=\"http://www.w3.org/1999/xhtml\"><head></head><body>' + dirty + '</body></html>';\n        }\n        var dirtyPayload = trustedTypesPolicy ? trustedTypesPolicy.createHTML(dirty) : dirty;\n        if (NAMESPACE === HTML_NAMESPACE) {\n          try {\n            doc = new DOMParser().parseFromString(dirtyPayload, PARSER_MEDIA_TYPE);\n          } catch (_) {\n          }\n        }\n        if (!doc || !doc.documentElement) {\n          doc = implementation.createDocument(NAMESPACE, 'template', null);\n          try {\n            doc.documentElement.innerHTML = IS_EMPTY_INPUT ? '' : dirtyPayload;\n          } catch (_) {\n          }\n        }\n        var body = doc.body || doc.documentElement;\n        if (dirty && leadingWhitespace) {\n          body.insertBefore(document.createTextNode(leadingWhitespace), body.childNodes[0] || null);\n        }\n        if (NAMESPACE === HTML_NAMESPACE) {\n          return getElementsByTagName.call(doc, WHOLE_DOCUMENT ? 'html' : 'body')[0];\n        }\n        return WHOLE_DOCUMENT ? doc.documentElement : body;\n      };\n      var _createIterator = function _createIterator(root) {\n        return createNodeIterator.call(root.ownerDocument || root, root, NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT | NodeFilter.SHOW_TEXT, null, false);\n      };\n      var _isClobbered = function _isClobbered(elm) {\n        return elm instanceof HTMLFormElement && (typeof elm.nodeName !== 'string' || typeof elm.textContent !== 'string' || typeof elm.removeChild !== 'function' || !(elm.attributes instanceof NamedNodeMap) || typeof elm.removeAttribute !== 'function' || typeof elm.setAttribute !== 'function' || typeof elm.namespaceURI !== 'string' || typeof elm.insertBefore !== 'function');\n      };\n      var _isNode = function _isNode(object) {\n        return _typeof(Node) === 'object' ? object instanceof Node : object && _typeof(object) === 'object' && typeof object.nodeType === 'number' && typeof object.nodeName === 'string';\n      };\n      var _executeHook = function _executeHook(entryPoint, currentNode, data) {\n        if (!hooks[entryPoint]) {\n          return;\n        }\n        arrayForEach(hooks[entryPoint], function (hook) {\n          hook.call(DOMPurify, currentNode, data, CONFIG);\n        });\n      };\n      var _sanitizeElements = function _sanitizeElements(currentNode) {\n        var content;\n        _executeHook('beforeSanitizeElements', currentNode, null);\n        if (_isClobbered(currentNode)) {\n          _forceRemove(currentNode);\n          return true;\n        }\n        if (regExpTest(/[\\u0080-\\uFFFF]/, currentNode.nodeName)) {\n          _forceRemove(currentNode);\n          return true;\n        }\n        var tagName = transformCaseFunc(currentNode.nodeName);\n        _executeHook('uponSanitizeElement', currentNode, {\n          tagName: tagName,\n          allowedTags: ALLOWED_TAGS\n        });\n        if (currentNode.hasChildNodes() && !_isNode(currentNode.firstElementChild) && (!_isNode(currentNode.content) || !_isNode(currentNode.content.firstElementChild)) && regExpTest(/<[/\\w]/g, currentNode.innerHTML) && regExpTest(/<[/\\w]/g, currentNode.textContent)) {\n          _forceRemove(currentNode);\n          return true;\n        }\n        if (tagName === 'select' && regExpTest(/<template/i, currentNode.innerHTML)) {\n          _forceRemove(currentNode);\n          return true;\n        }\n        if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n          if (!FORBID_TAGS[tagName] && _basicCustomElementTest(tagName)) {\n            if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, tagName))\n              return false;\n            if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(tagName))\n              return false;\n          }\n          if (KEEP_CONTENT && !FORBID_CONTENTS[tagName]) {\n            var parentNode = getParentNode(currentNode) || currentNode.parentNode;\n            var childNodes = getChildNodes(currentNode) || currentNode.childNodes;\n            if (childNodes && parentNode) {\n              var childCount = childNodes.length;\n              for (var i = childCount - 1; i >= 0; --i) {\n                parentNode.insertBefore(cloneNode(childNodes[i], true), getNextSibling(currentNode));\n              }\n            }\n          }\n          _forceRemove(currentNode);\n          return true;\n        }\n        if (currentNode instanceof Element && !_checkValidNamespace(currentNode)) {\n          _forceRemove(currentNode);\n          return true;\n        }\n        if ((tagName === 'noscript' || tagName === 'noembed') && regExpTest(/<\\/no(script|embed)/i, currentNode.innerHTML)) {\n          _forceRemove(currentNode);\n          return true;\n        }\n        if (SAFE_FOR_TEMPLATES && currentNode.nodeType === 3) {\n          content = currentNode.textContent;\n          content = stringReplace(content, MUSTACHE_EXPR$1, ' ');\n          content = stringReplace(content, ERB_EXPR$1, ' ');\n          if (currentNode.textContent !== content) {\n            arrayPush(DOMPurify.removed, { element: currentNode.cloneNode() });\n            currentNode.textContent = content;\n          }\n        }\n        _executeHook('afterSanitizeElements', currentNode, null);\n        return false;\n      };\n      var _isValidAttribute = function _isValidAttribute(lcTag, lcName, value) {\n        if (SANITIZE_DOM && (lcName === 'id' || lcName === 'name') && (value in document || value in formElement)) {\n          return false;\n        }\n        if (ALLOW_DATA_ATTR && !FORBID_ATTR[lcName] && regExpTest(DATA_ATTR$1, lcName));\n        else if (ALLOW_ARIA_ATTR && regExpTest(ARIA_ATTR$1, lcName));\n        else if (!ALLOWED_ATTR[lcName] || FORBID_ATTR[lcName]) {\n          if (_basicCustomElementTest(lcTag) && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, lcTag) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(lcTag)) && (CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.attributeNameCheck, lcName) || CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.attributeNameCheck(lcName)) || lcName === 'is' && CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, value) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(value)));\n          else {\n            return false;\n          }\n        } else if (URI_SAFE_ATTRIBUTES[lcName]);\n        else if (regExpTest(IS_ALLOWED_URI$1, stringReplace(value, ATTR_WHITESPACE$1, '')));\n        else if ((lcName === 'src' || lcName === 'xlink:href' || lcName === 'href') && lcTag !== 'script' && stringIndexOf(value, 'data:') === 0 && DATA_URI_TAGS[lcTag]);\n        else if (ALLOW_UNKNOWN_PROTOCOLS && !regExpTest(IS_SCRIPT_OR_DATA$1, stringReplace(value, ATTR_WHITESPACE$1, '')));\n        else if (!value);\n        else {\n          return false;\n        }\n        return true;\n      };\n      var _basicCustomElementTest = function _basicCustomElementTest(tagName) {\n        return tagName.indexOf('-') > 0;\n      };\n      var _sanitizeAttributes = function _sanitizeAttributes(currentNode) {\n        var attr;\n        var value;\n        var lcName;\n        var l;\n        _executeHook('beforeSanitizeAttributes', currentNode, null);\n        var attributes = currentNode.attributes;\n        if (!attributes) {\n          return;\n        }\n        var hookEvent = {\n          attrName: '',\n          attrValue: '',\n          keepAttr: true,\n          allowedAttributes: ALLOWED_ATTR\n        };\n        l = attributes.length;\n        while (l--) {\n          attr = attributes[l];\n          var _attr = attr, name = _attr.name, namespaceURI = _attr.namespaceURI;\n          value = name === 'value' ? attr.value : stringTrim(attr.value);\n          lcName = transformCaseFunc(name);\n          hookEvent.attrName = lcName;\n          hookEvent.attrValue = value;\n          hookEvent.keepAttr = true;\n          hookEvent.forceKeepAttr = undefined;\n          _executeHook('uponSanitizeAttribute', currentNode, hookEvent);\n          value = hookEvent.attrValue;\n          if (hookEvent.forceKeepAttr) {\n            continue;\n          }\n          _removeAttribute(name, currentNode);\n          if (!hookEvent.keepAttr) {\n            continue;\n          }\n          if (regExpTest(/\\/>/i, value)) {\n            _removeAttribute(name, currentNode);\n            continue;\n          }\n          if (SAFE_FOR_TEMPLATES) {\n            value = stringReplace(value, MUSTACHE_EXPR$1, ' ');\n            value = stringReplace(value, ERB_EXPR$1, ' ');\n          }\n          var lcTag = transformCaseFunc(currentNode.nodeName);\n          if (!_isValidAttribute(lcTag, lcName, value)) {\n            continue;\n          }\n          try {\n            if (namespaceURI) {\n              currentNode.setAttributeNS(namespaceURI, name, value);\n            } else {\n              currentNode.setAttribute(name, value);\n            }\n            arrayPop(DOMPurify.removed);\n          } catch (_) {\n          }\n        }\n        _executeHook('afterSanitizeAttributes', currentNode, null);\n      };\n      var _sanitizeShadowDOM = function _sanitizeShadowDOM(fragment) {\n        var shadowNode;\n        var shadowIterator = _createIterator(fragment);\n        _executeHook('beforeSanitizeShadowDOM', fragment, null);\n        while (shadowNode = shadowIterator.nextNode()) {\n          _executeHook('uponSanitizeShadowNode', shadowNode, null);\n          if (_sanitizeElements(shadowNode)) {\n            continue;\n          }\n          if (shadowNode.content instanceof DocumentFragment) {\n            _sanitizeShadowDOM(shadowNode.content);\n          }\n          _sanitizeAttributes(shadowNode);\n        }\n        _executeHook('afterSanitizeShadowDOM', fragment, null);\n      };\n      DOMPurify.sanitize = function (dirty, cfg) {\n        var body;\n        var importedNode;\n        var currentNode;\n        var oldNode;\n        var returnNode;\n        IS_EMPTY_INPUT = !dirty;\n        if (IS_EMPTY_INPUT) {\n          dirty = '<!-->';\n        }\n        if (typeof dirty !== 'string' && !_isNode(dirty)) {\n          if (typeof dirty.toString !== 'function') {\n            throw typeErrorCreate('toString is not a function');\n          } else {\n            dirty = dirty.toString();\n            if (typeof dirty !== 'string') {\n              throw typeErrorCreate('dirty is not a string, aborting');\n            }\n          }\n        }\n        if (!DOMPurify.isSupported) {\n          if (_typeof(window.toStaticHTML) === 'object' || typeof window.toStaticHTML === 'function') {\n            if (typeof dirty === 'string') {\n              return window.toStaticHTML(dirty);\n            }\n            if (_isNode(dirty)) {\n              return window.toStaticHTML(dirty.outerHTML);\n            }\n          }\n          return dirty;\n        }\n        if (!SET_CONFIG) {\n          _parseConfig(cfg);\n        }\n        DOMPurify.removed = [];\n        if (typeof dirty === 'string') {\n          IN_PLACE = false;\n        }\n        if (IN_PLACE) {\n          if (dirty.nodeName) {\n            var tagName = transformCaseFunc(dirty.nodeName);\n            if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n              throw typeErrorCreate('root node is forbidden and cannot be sanitized in-place');\n            }\n          }\n        } else if (dirty instanceof Node) {\n          body = _initDocument('<!---->');\n          importedNode = body.ownerDocument.importNode(dirty, true);\n          if (importedNode.nodeType === 1 && importedNode.nodeName === 'BODY') {\n            body = importedNode;\n          } else if (importedNode.nodeName === 'HTML') {\n            body = importedNode;\n          } else {\n            body.appendChild(importedNode);\n          }\n        } else {\n          if (!RETURN_DOM && !SAFE_FOR_TEMPLATES && !WHOLE_DOCUMENT && dirty.indexOf('<') === -1) {\n            return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(dirty) : dirty;\n          }\n          body = _initDocument(dirty);\n          if (!body) {\n            return RETURN_DOM ? null : RETURN_TRUSTED_TYPE ? emptyHTML : '';\n          }\n        }\n        if (body && FORCE_BODY) {\n          _forceRemove(body.firstChild);\n        }\n        var nodeIterator = _createIterator(IN_PLACE ? dirty : body);\n        while (currentNode = nodeIterator.nextNode()) {\n          if (currentNode.nodeType === 3 && currentNode === oldNode) {\n            continue;\n          }\n          if (_sanitizeElements(currentNode)) {\n            continue;\n          }\n          if (currentNode.content instanceof DocumentFragment) {\n            _sanitizeShadowDOM(currentNode.content);\n          }\n          _sanitizeAttributes(currentNode);\n          oldNode = currentNode;\n        }\n        oldNode = null;\n        if (IN_PLACE) {\n          return dirty;\n        }\n        if (RETURN_DOM) {\n          if (RETURN_DOM_FRAGMENT) {\n            returnNode = createDocumentFragment.call(body.ownerDocument);\n            while (body.firstChild) {\n              returnNode.appendChild(body.firstChild);\n            }\n          } else {\n            returnNode = body;\n          }\n          if (ALLOWED_ATTR.shadowroot) {\n            returnNode = importNode.call(originalDocument, returnNode, true);\n          }\n          return returnNode;\n        }\n        var serializedHTML = WHOLE_DOCUMENT ? body.outerHTML : body.innerHTML;\n        if (WHOLE_DOCUMENT && ALLOWED_TAGS['!doctype'] && body.ownerDocument && body.ownerDocument.doctype && body.ownerDocument.doctype.name && regExpTest(DOCTYPE_NAME, body.ownerDocument.doctype.name)) {\n          serializedHTML = '<!DOCTYPE ' + body.ownerDocument.doctype.name + '>\\n' + serializedHTML;\n        }\n        if (SAFE_FOR_TEMPLATES) {\n          serializedHTML = stringReplace(serializedHTML, MUSTACHE_EXPR$1, ' ');\n          serializedHTML = stringReplace(serializedHTML, ERB_EXPR$1, ' ');\n        }\n        return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(serializedHTML) : serializedHTML;\n      };\n      DOMPurify.setConfig = function (cfg) {\n        _parseConfig(cfg);\n        SET_CONFIG = true;\n      };\n      DOMPurify.clearConfig = function () {\n        CONFIG = null;\n        SET_CONFIG = false;\n      };\n      DOMPurify.isValidAttribute = function (tag, attr, value) {\n        if (!CONFIG) {\n          _parseConfig({});\n        }\n        var lcTag = transformCaseFunc(tag);\n        var lcName = transformCaseFunc(attr);\n        return _isValidAttribute(lcTag, lcName, value);\n      };\n      DOMPurify.addHook = function (entryPoint, hookFunction) {\n        if (typeof hookFunction !== 'function') {\n          return;\n        }\n        hooks[entryPoint] = hooks[entryPoint] || [];\n        arrayPush(hooks[entryPoint], hookFunction);\n      };\n      DOMPurify.removeHook = function (entryPoint) {\n        if (hooks[entryPoint]) {\n          return arrayPop(hooks[entryPoint]);\n        }\n      };\n      DOMPurify.removeHooks = function (entryPoint) {\n        if (hooks[entryPoint]) {\n          hooks[entryPoint] = [];\n        }\n      };\n      DOMPurify.removeAllHooks = function () {\n        hooks = {};\n      };\n      return DOMPurify;\n    }\n    var purify = createDOMPurify();\n\n    var sanitizeHtmlString = function (html) {\n      return purify().sanitize(html);\n    };\n\n    var global$e = tinymce.util.Tools.resolve('tinymce.util.I18n');\n\n    var rtlTransform = {\n      'indent': true,\n      'outdent': true,\n      'table-insert-column-after': true,\n      'table-insert-column-before': true,\n      'paste-column-after': true,\n      'paste-column-before': true,\n      'unordered-list': true,\n      'list-bull-circle': true,\n      'list-bull-default': true,\n      'list-bull-square': true\n    };\n    var defaultIconName = 'temporary-placeholder';\n    var defaultIcon = function (icons) {\n      return function () {\n        return get$e(icons, defaultIconName).getOr('!not found!');\n      };\n    };\n    var getIconName = function (name, icons) {\n      var lcName = name.toLowerCase();\n      if (global$e.isRtl()) {\n        var rtlName = ensureTrailing(lcName, '-rtl');\n        return has$2(icons, rtlName) ? rtlName : lcName;\n      } else {\n        return lcName;\n      }\n    };\n    var lookupIcon = function (name, icons) {\n      return get$e(icons, getIconName(name, icons));\n    };\n    var get$1 = function (name, iconProvider) {\n      var icons = iconProvider();\n      return lookupIcon(name, icons).getOrThunk(defaultIcon(icons));\n    };\n    var getOr = function (name, iconProvider, fallbackIcon) {\n      var icons = iconProvider();\n      return lookupIcon(name, icons).or(fallbackIcon).getOrThunk(defaultIcon(icons));\n    };\n    var needsRtlTransform = function (iconName) {\n      return global$e.isRtl() ? has$2(rtlTransform, iconName) : false;\n    };\n    var addFocusableBehaviour = function () {\n      return config('add-focusable', [runOnAttached(function (comp) {\n          child(comp.element, 'svg').each(function (svg) {\n            return set$8(svg, 'focusable', 'false');\n          });\n        })]);\n    };\n    var renderIcon$2 = function (spec, iconName, icons, fallbackIcon) {\n      var _a, _b;\n      var rtlIconClasses = needsRtlTransform(iconName) ? ['tox-icon--flip'] : [];\n      var iconHtml = get$e(icons, getIconName(iconName, icons)).or(fallbackIcon).getOrThunk(defaultIcon(icons));\n      return {\n        dom: {\n          tag: spec.tag,\n          attributes: (_a = spec.attributes) !== null && _a !== void 0 ? _a : {},\n          classes: spec.classes.concat(rtlIconClasses),\n          innerHtml: iconHtml\n        },\n        behaviours: derive$1(__spreadArray(__spreadArray([], (_b = spec.behaviours) !== null && _b !== void 0 ? _b : [], true), [addFocusableBehaviour()], false))\n      };\n    };\n    var render$3 = function (iconName, spec, iconProvider, fallbackIcon) {\n      if (fallbackIcon === void 0) {\n        fallbackIcon = Optional.none();\n      }\n      return renderIcon$2(spec, iconName, iconProvider(), fallbackIcon);\n    };\n    var renderFirst = function (iconNames, spec, iconProvider) {\n      var icons = iconProvider();\n      var iconName = find$5(iconNames, function (name) {\n        return has$2(icons, getIconName(name, icons));\n      });\n      return renderIcon$2(spec, iconName.getOr(defaultIconName), icons, Optional.none());\n    };\n\n    var notificationIconMap = {\n      success: 'checkmark',\n      error: 'warning',\n      err: 'error',\n      warning: 'warning',\n      warn: 'warning',\n      info: 'info'\n    };\n    var factory$k = function (detail) {\n      var memBannerText = record({\n        dom: fromHtml('<p>' + sanitizeHtmlString(detail.translationProvider(detail.text)) + '</p>'),\n        behaviours: derive$1([Replacing.config({})])\n      });\n      var renderPercentBar = function (percent) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-bar'],\n            attributes: { style: 'width: ' + percent + '%' }\n          }\n        };\n      };\n      var renderPercentText = function (percent) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-text'],\n            innerHtml: percent + '%'\n          }\n        };\n      };\n      var memBannerProgress = record({\n        dom: {\n          tag: 'div',\n          classes: detail.progress ? [\n            'tox-progress-bar',\n            'tox-progress-indicator'\n          ] : ['tox-progress-bar']\n        },\n        components: [\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-bar-container']\n            },\n            components: [renderPercentBar(0)]\n          },\n          renderPercentText(0)\n        ],\n        behaviours: derive$1([Replacing.config({})])\n      });\n      var updateProgress = function (comp, percent) {\n        if (comp.getSystem().isConnected()) {\n          memBannerProgress.getOpt(comp).each(function (progress) {\n            Replacing.set(progress, [\n              {\n                dom: {\n                  tag: 'div',\n                  classes: ['tox-bar-container']\n                },\n                components: [renderPercentBar(percent)]\n              },\n              renderPercentText(percent)\n            ]);\n          });\n        }\n      };\n      var updateText = function (comp, text) {\n        if (comp.getSystem().isConnected()) {\n          var banner = memBannerText.get(comp);\n          Replacing.set(banner, [text$1(text)]);\n        }\n      };\n      var apis = {\n        updateProgress: updateProgress,\n        updateText: updateText\n      };\n      var iconChoices = flatten([\n        detail.icon.toArray(),\n        detail.level.toArray(),\n        detail.level.bind(function (level) {\n          return Optional.from(notificationIconMap[level]);\n        }).toArray()\n      ]);\n      var memButton = record(Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-notification__dismiss',\n            'tox-button',\n            'tox-button--naked',\n            'tox-button--icon'\n          ]\n        },\n        components: [render$3('close', {\n            tag: 'div',\n            classes: ['tox-icon'],\n            attributes: { 'aria-label': detail.translationProvider('Close') }\n          }, detail.iconProvider)],\n        action: function (comp) {\n          detail.onAction(comp);\n        }\n      }));\n      var notificationIconSpec = renderFirst(iconChoices, {\n        tag: 'div',\n        classes: ['tox-notification__icon']\n      }, detail.iconProvider);\n      var notificationBodySpec = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-notification__body']\n        },\n        components: [memBannerText.asSpec()],\n        behaviours: derive$1([Replacing.config({})])\n      };\n      var components = [\n        notificationIconSpec,\n        notificationBodySpec\n      ];\n      return {\n        uid: detail.uid,\n        dom: {\n          tag: 'div',\n          attributes: { role: 'alert' },\n          classes: detail.level.map(function (level) {\n            return [\n              'tox-notification',\n              'tox-notification--in',\n              'tox-notification--' + level\n            ];\n          }).getOr([\n            'tox-notification',\n            'tox-notification--in'\n          ])\n        },\n        behaviours: derive$1([\n          Focusing.config({}),\n          config('notification-events', [run$1(focusin(), function (comp) {\n              memButton.getOpt(comp).each(Focusing.focus);\n            })])\n        ]),\n        components: components.concat(detail.progress ? [memBannerProgress.asSpec()] : []).concat(!detail.closeButton ? [] : [memButton.asSpec()]),\n        apis: apis\n      };\n    };\n    var Notification = single({\n      name: 'Notification',\n      factory: factory$k,\n      configFields: [\n        option('level'),\n        required$1('progress'),\n        required$1('icon'),\n        required$1('onAction'),\n        required$1('text'),\n        required$1('iconProvider'),\n        required$1('translationProvider'),\n        defaultedBoolean('closeButton', true)\n      ],\n      apis: {\n        updateProgress: function (apis, comp, percent) {\n          apis.updateProgress(comp, percent);\n        },\n        updateText: function (apis, comp, text) {\n          apis.updateText(comp, text);\n        }\n      }\n    });\n\n    function NotificationManagerImpl (editor, extras, uiMothership) {\n      var sharedBackstage = extras.backstage.shared;\n      var getLayoutDirection = function (rel) {\n        switch (rel) {\n        case 'bc-bc':\n          return south;\n        case 'tc-tc':\n          return north;\n        case 'tc-bc':\n          return north$2;\n        case 'bc-tc':\n        default:\n          return south$2;\n        }\n      };\n      var reposition = function (notifications) {\n        if (notifications.length > 0) {\n          each$1(notifications, function (notification, index) {\n            if (index === 0) {\n              notification.moveRel(null, 'banner');\n            } else {\n              notification.moveRel(notifications[index - 1].getEl(), 'bc-tc');\n            }\n          });\n        }\n      };\n      var open = function (settings, closeCallback) {\n        var hideCloseButton = !settings.closeButton && settings.timeout && (settings.timeout > 0 || settings.timeout < 0);\n        var close = function () {\n          closeCallback();\n          InlineView.hide(notificationWrapper);\n        };\n        var notification = build$1(Notification.sketch({\n          text: settings.text,\n          level: contains$2([\n            'success',\n            'error',\n            'warning',\n            'warn',\n            'info'\n          ], settings.type) ? settings.type : undefined,\n          progress: settings.progressBar === true,\n          icon: Optional.from(settings.icon),\n          closeButton: !hideCloseButton,\n          onAction: close,\n          iconProvider: sharedBackstage.providers.icons,\n          translationProvider: sharedBackstage.providers.translate\n        }));\n        var notificationWrapper = build$1(InlineView.sketch(__assign({\n          dom: {\n            tag: 'div',\n            classes: ['tox-notifications-container']\n          },\n          lazySink: sharedBackstage.getSink,\n          fireDismissalEventInstead: {}\n        }, sharedBackstage.header.isPositionedAtTop() ? {} : { fireRepositionEventInstead: {} })));\n        uiMothership.add(notificationWrapper);\n        if (settings.timeout > 0) {\n          global$f.setTimeout(function () {\n            close();\n          }, settings.timeout);\n        }\n        var getBounds = function () {\n          var contentArea = box$1(SugarElement.fromDom(editor.getContentAreaContainer()));\n          var win$1 = win();\n          var x = clamp$1(win$1.x, contentArea.x, contentArea.right);\n          var y = clamp$1(win$1.y, contentArea.y, contentArea.bottom);\n          var right = Math.max(contentArea.right, win$1.right);\n          var bottom = Math.max(contentArea.bottom, win$1.bottom);\n          return Optional.some(bounds(x, y, right - x, bottom - y));\n        };\n        return {\n          close: close,\n          moveTo: function (x, y) {\n            InlineView.showAt(notificationWrapper, premade(notification), {\n              anchor: {\n                type: 'makeshift',\n                x: x,\n                y: y\n              }\n            });\n          },\n          moveRel: function (element, rel) {\n            var notificationSpec = premade(notification);\n            var anchorOverrides = { maxHeightFunction: expandable$1() };\n            if (rel !== 'banner' && isNonNullable(element)) {\n              var layoutDirection_1 = getLayoutDirection(rel);\n              var nodeAnchor = {\n                type: 'node',\n                root: body(),\n                node: Optional.some(SugarElement.fromDom(element)),\n                overrides: anchorOverrides,\n                layouts: {\n                  onRtl: function () {\n                    return [layoutDirection_1];\n                  },\n                  onLtr: function () {\n                    return [layoutDirection_1];\n                  }\n                }\n              };\n              InlineView.showWithinBounds(notificationWrapper, notificationSpec, { anchor: nodeAnchor }, getBounds);\n            } else {\n              var anchor = __assign(__assign({}, sharedBackstage.anchors.banner()), { overrides: anchorOverrides });\n              InlineView.showWithinBounds(notificationWrapper, notificationSpec, { anchor: anchor }, getBounds);\n            }\n          },\n          text: function (nuText) {\n            Notification.updateText(notification, nuText);\n          },\n          settings: settings,\n          getEl: function () {\n            return notification.element.dom;\n          },\n          progressBar: {\n            value: function (percent) {\n              Notification.updateProgress(notification, percent);\n            }\n          }\n        };\n      };\n      var close = function (notification) {\n        notification.close();\n      };\n      var getArgs = function (notification) {\n        return notification.settings;\n      };\n      return {\n        open: open,\n        close: close,\n        reposition: reposition,\n        getArgs: getArgs\n      };\n    }\n\n    var first = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (!isNull(timer)) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (isNull(timer)) {\n          timer = setTimeout(function () {\n            timer = null;\n            fn.apply(null, args);\n          }, rate);\n        }\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n    var last = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (!isNull(timer)) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        cancel();\n        timer = setTimeout(function () {\n          timer = null;\n          fn.apply(null, args);\n        }, rate);\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n\n    var global$d = tinymce.util.Tools.resolve('tinymce.dom.TextSeeker');\n\n    var isBoundary = function (dom, node) {\n      return dom.isBlock(node) || contains$2([\n        'BR',\n        'IMG',\n        'HR',\n        'INPUT'\n      ], node.nodeName) || dom.getContentEditable(node) === 'false';\n    };\n    var repeatLeft = function (dom, node, offset, process, rootNode) {\n      var search = global$d(dom, function (node) {\n        return isBoundary(dom, node);\n      });\n      return Optional.from(search.backwards(node, offset, process, rootNode));\n    };\n\n    var autocompleteSelector = '[data-mce-autocompleter]';\n    var create$4 = function (editor, range) {\n      return detect(SugarElement.fromDom(editor.selection.getNode())).getOrThunk(function () {\n        var wrapper = SugarElement.fromHtml('<span data-mce-autocompleter=\"1\" data-mce-bogus=\"1\"></span>', editor.getDoc());\n        append$2(wrapper, SugarElement.fromDom(range.extractContents()));\n        range.insertNode(wrapper.dom);\n        parent(wrapper).each(function (elm) {\n          return elm.dom.normalize();\n        });\n        last$1(wrapper).map(function (last) {\n          editor.selection.setCursorLocation(last.dom, getEnd(last));\n        });\n        return wrapper;\n      });\n    };\n    var detect = function (elm) {\n      return closest$1(elm, autocompleteSelector);\n    };\n\n    var isValidTextRange = function (rng) {\n      return rng.collapsed && rng.startContainer.nodeType === 3;\n    };\n    var getText = function (rng) {\n      return rng.toString().replace(/\\u00A0/g, ' ').replace(/\\uFEFF/g, '');\n    };\n    var isWhitespace = function (chr) {\n      return chr !== '' && ' \\xA0\\f\\n\\r\\t\\x0B'.indexOf(chr) !== -1;\n    };\n\n    var stripTriggerChar = function (text, triggerCh) {\n      return text.substring(triggerCh.length);\n    };\n    var findChar = function (text, index, ch) {\n      var i;\n      for (i = index - 1; i >= 0; i--) {\n        var char = text.charAt(i);\n        if (isWhitespace(char)) {\n          return Optional.none();\n        }\n        if (char === ch) {\n          break;\n        }\n      }\n      return Optional.some(i);\n    };\n    var findStart = function (dom, initRange, ch, minChars) {\n      if (minChars === void 0) {\n        minChars = 0;\n      }\n      if (!isValidTextRange(initRange)) {\n        return Optional.none();\n      }\n      var findTriggerChIndex = function (element, offset, text) {\n        return findChar(text, offset, ch).getOr(offset);\n      };\n      var root = dom.getParent(initRange.startContainer, dom.isBlock) || dom.getRoot();\n      return repeatLeft(dom, initRange.startContainer, initRange.startOffset, findTriggerChIndex, root).bind(function (spot) {\n        var range = initRange.cloneRange();\n        range.setStart(spot.container, spot.offset);\n        range.setEnd(initRange.endContainer, initRange.endOffset);\n        if (range.collapsed) {\n          return Optional.none();\n        }\n        var text = getText(range);\n        var triggerCharIndex = text.lastIndexOf(ch);\n        if (triggerCharIndex !== 0 || stripTriggerChar(text, ch).length < minChars) {\n          return Optional.none();\n        } else {\n          return Optional.some({\n            text: stripTriggerChar(text, ch),\n            range: range,\n            triggerChar: ch\n          });\n        }\n      });\n    };\n    var getContext = function (dom, initRange, ch, minChars) {\n      if (minChars === void 0) {\n        minChars = 0;\n      }\n      return detect(SugarElement.fromDom(initRange.startContainer)).fold(function () {\n        return findStart(dom, initRange, ch, minChars);\n      }, function (elm) {\n        var range = dom.createRng();\n        range.selectNode(elm.dom);\n        var text = getText(range);\n        return Optional.some({\n          range: range,\n          text: stripTriggerChar(text, ch),\n          triggerChar: ch\n        });\n      });\n    };\n\n    var setup$e = function (api, editor) {\n      editor.on('keypress compositionend', api.onKeypress.throttle);\n      editor.on('remove', api.onKeypress.cancel);\n      var redirectKeyToItem = function (item, e) {\n        emitWith(item, keydown(), { raw: e });\n      };\n      editor.on('keydown', function (e) {\n        var getItem = function () {\n          return api.getView().bind(Highlighting.getHighlighted);\n        };\n        if (e.which === 8) {\n          api.onKeypress.throttle(e);\n        }\n        if (api.isActive()) {\n          if (e.which === 27) {\n            api.cancelIfNecessary();\n          }\n          if (api.isMenuOpen()) {\n            if (e.which === 13) {\n              getItem().each(emitExecute);\n              e.preventDefault();\n            } else if (e.which === 40) {\n              getItem().fold(function () {\n                api.getView().each(Highlighting.highlightFirst);\n              }, function (item) {\n                redirectKeyToItem(item, e);\n              });\n              e.preventDefault();\n              e.stopImmediatePropagation();\n            } else if (e.which === 37 || e.which === 38 || e.which === 39) {\n              getItem().each(function (item) {\n                redirectKeyToItem(item, e);\n                e.preventDefault();\n                e.stopImmediatePropagation();\n              });\n            }\n          } else {\n            if (e.which === 13 || e.which === 38 || e.which === 40) {\n              api.cancelIfNecessary();\n            }\n          }\n        }\n      });\n      editor.on('NodeChange', function (e) {\n        if (api.isActive() && !api.isProcessingAction() && detect(SugarElement.fromDom(e.element)).isNone()) {\n          api.cancelIfNecessary();\n        }\n      });\n    };\n    var AutocompleterEditorEvents = { setup: setup$e };\n\n    var global$c = tinymce.util.Tools.resolve('tinymce.util.Promise');\n\n    var point = function (container, offset) {\n      return {\n        container: container,\n        offset: offset\n      };\n    };\n\n    var isText = function (node) {\n      return node.nodeType === TEXT;\n    };\n    var isElement$1 = function (node) {\n      return node.nodeType === ELEMENT;\n    };\n    var toLast = function (node) {\n      if (isText(node)) {\n        return point(node, node.data.length);\n      } else {\n        var children = node.childNodes;\n        return children.length > 0 ? toLast(children[children.length - 1]) : point(node, children.length);\n      }\n    };\n    var toLeaf = function (node, offset) {\n      var children = node.childNodes;\n      if (children.length > 0 && offset < children.length) {\n        return toLeaf(children[offset], 0);\n      } else if (children.length > 0 && isElement$1(node) && children.length === offset) {\n        return toLast(children[children.length - 1]);\n      } else {\n        return point(node, offset);\n      }\n    };\n\n    var isPreviousCharContent = function (dom, leaf) {\n      return repeatLeft(dom, leaf.container, leaf.offset, function (element, offset) {\n        return offset === 0 ? -1 : offset;\n      }, dom.getRoot()).filter(function (spot) {\n        var char = spot.container.data.charAt(spot.offset - 1);\n        return !isWhitespace(char);\n      }).isSome();\n    };\n    var isStartOfWord = function (dom) {\n      return function (rng) {\n        var leaf = toLeaf(rng.startContainer, rng.startOffset);\n        return !isPreviousCharContent(dom, leaf);\n      };\n    };\n    var getTriggerContext = function (dom, initRange, database) {\n      return findMap(database.triggerChars, function (ch) {\n        return getContext(dom, initRange, ch);\n      });\n    };\n    var lookup$2 = function (editor, getDatabase) {\n      var database = getDatabase();\n      var rng = editor.selection.getRng();\n      return getTriggerContext(editor.dom, rng, database).bind(function (context) {\n        return lookupWithContext(editor, getDatabase, context);\n      });\n    };\n    var lookupWithContext = function (editor, getDatabase, context, fetchOptions) {\n      if (fetchOptions === void 0) {\n        fetchOptions = {};\n      }\n      var database = getDatabase();\n      var rng = editor.selection.getRng();\n      var startText = rng.startContainer.nodeValue;\n      var autocompleters = filter$2(database.lookupByChar(context.triggerChar), function (autocompleter) {\n        return context.text.length >= autocompleter.minChars && autocompleter.matches.getOrThunk(function () {\n          return isStartOfWord(editor.dom);\n        })(context.range, startText, context.text);\n      });\n      if (autocompleters.length === 0) {\n        return Optional.none();\n      }\n      var lookupData = global$c.all(map$2(autocompleters, function (ac) {\n        var fetchResult = ac.fetch(context.text, ac.maxResults, fetchOptions);\n        return fetchResult.then(function (results) {\n          return {\n            matchText: context.text,\n            items: results,\n            columns: ac.columns,\n            onAction: ac.onAction,\n            highlightOn: ac.highlightOn\n          };\n        });\n      }));\n      return Optional.some({\n        lookupData: lookupData,\n        context: context\n      });\n    };\n\n    var separatorMenuItemSchema = objOf([\n      requiredString('type'),\n      optionString('text')\n    ]);\n    var createSeparatorMenuItem = function (spec) {\n      return asRaw('separatormenuitem', separatorMenuItemSchema, spec);\n    };\n\n    var autocompleterItemSchema = objOf([\n      defaulted('type', 'autocompleteitem'),\n      defaulted('active', false),\n      defaulted('disabled', false),\n      defaulted('meta', {}),\n      requiredString('value'),\n      optionString('text'),\n      optionString('icon')\n    ]);\n    var autocompleterSchema = objOf([\n      requiredString('type'),\n      requiredString('ch'),\n      defaultedNumber('minChars', 1),\n      defaulted('columns', 1),\n      defaultedNumber('maxResults', 10),\n      optionFunction('matches'),\n      requiredFunction('fetch'),\n      requiredFunction('onAction'),\n      defaultedArrayOf('highlightOn', [], string)\n    ]);\n    var createSeparatorItem = function (spec) {\n      return asRaw('Autocompleter.Separator', separatorMenuItemSchema, spec);\n    };\n    var createAutocompleterItem = function (spec) {\n      return asRaw('Autocompleter.Item', autocompleterItemSchema, spec);\n    };\n    var createAutocompleter = function (spec) {\n      return asRaw('Autocompleter', autocompleterSchema, spec);\n    };\n\n    var baseToolbarButtonFields = [\n      defaultedBoolean('disabled', false),\n      optionString('tooltip'),\n      optionString('icon'),\n      optionString('text'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      })\n    ];\n    var toolbarButtonSchema = objOf([\n      requiredString('type'),\n      requiredFunction('onAction')\n    ].concat(baseToolbarButtonFields));\n    var createToolbarButton = function (spec) {\n      return asRaw('toolbarbutton', toolbarButtonSchema, spec);\n    };\n\n    var baseToolbarToggleButtonFields = [defaultedBoolean('active', false)].concat(baseToolbarButtonFields);\n    var toggleButtonSchema = objOf(baseToolbarToggleButtonFields.concat([\n      requiredString('type'),\n      requiredFunction('onAction')\n    ]));\n    var createToggleButton = function (spec) {\n      return asRaw('ToggleButton', toggleButtonSchema, spec);\n    };\n\n    var contextBarFields = [\n      defaultedFunction('predicate', never),\n      defaultedStringEnum('scope', 'node', [\n        'node',\n        'editor'\n      ]),\n      defaultedStringEnum('position', 'selection', [\n        'node',\n        'selection',\n        'line'\n      ])\n    ];\n\n    var contextButtonFields = baseToolbarButtonFields.concat([\n      defaulted('type', 'contextformbutton'),\n      defaulted('primary', false),\n      requiredFunction('onAction'),\n      customField('original', identity$1)\n    ]);\n    var contextToggleButtonFields = baseToolbarToggleButtonFields.concat([\n      defaulted('type', 'contextformbutton'),\n      defaulted('primary', false),\n      requiredFunction('onAction'),\n      customField('original', identity$1)\n    ]);\n    var launchButtonFields = baseToolbarButtonFields.concat([defaulted('type', 'contextformbutton')]);\n    var launchToggleButtonFields = baseToolbarToggleButtonFields.concat([defaulted('type', 'contextformtogglebutton')]);\n    var toggleOrNormal = choose$1('type', {\n      contextformbutton: contextButtonFields,\n      contextformtogglebutton: contextToggleButtonFields\n    });\n    var contextFormSchema = objOf([\n      defaulted('type', 'contextform'),\n      defaultedFunction('initValue', constant$1('')),\n      optionString('label'),\n      requiredArrayOf('commands', toggleOrNormal),\n      optionOf('launch', choose$1('type', {\n        contextformbutton: launchButtonFields,\n        contextformtogglebutton: launchToggleButtonFields\n      }))\n    ].concat(contextBarFields));\n    var createContextForm = function (spec) {\n      return asRaw('ContextForm', contextFormSchema, spec);\n    };\n\n    var contextToolbarSchema = objOf([\n      defaulted('type', 'contexttoolbar'),\n      requiredString('items')\n    ].concat(contextBarFields));\n    var createContextToolbar = function (spec) {\n      return asRaw('ContextToolbar', contextToolbarSchema, spec);\n    };\n\n    var stringArray = function (a) {\n      var all = {};\n      each$1(a, function (key) {\n        all[key] = {};\n      });\n      return keys(all);\n    };\n\n    var register$b = function (editor) {\n      var popups = editor.ui.registry.getAll().popups;\n      var dataset = map$1(popups, function (popup) {\n        return createAutocompleter(popup).fold(function (err) {\n          throw new Error(formatError(err));\n        }, identity$1);\n      });\n      var triggerChars = stringArray(mapToArray(dataset, function (v) {\n        return v.ch;\n      }));\n      var datasetValues = values(dataset);\n      var lookupByChar = function (ch) {\n        return filter$2(datasetValues, function (dv) {\n          return dv.ch === ch;\n        });\n      };\n      return {\n        dataset: dataset,\n        triggerChars: triggerChars,\n        lookupByChar: lookupByChar\n      };\n    };\n\n    var ItemResponse;\n    (function (ItemResponse) {\n      ItemResponse[ItemResponse['CLOSE_ON_EXECUTE'] = 0] = 'CLOSE_ON_EXECUTE';\n      ItemResponse[ItemResponse['BUBBLE_TO_SANDBOX'] = 1] = 'BUBBLE_TO_SANDBOX';\n    }(ItemResponse || (ItemResponse = {})));\n    var ItemResponse$1 = ItemResponse;\n\n    var navClass = 'tox-menu-nav__js';\n    var selectableClass = 'tox-collection__item';\n    var colorClass = 'tox-swatch';\n    var presetClasses = {\n      normal: navClass,\n      color: colorClass\n    };\n    var tickedClass = 'tox-collection__item--enabled';\n    var groupHeadingClass = 'tox-collection__group-heading';\n    var iconClass = 'tox-collection__item-icon';\n    var textClass = 'tox-collection__item-label';\n    var accessoryClass = 'tox-collection__item-accessory';\n    var caretClass = 'tox-collection__item-caret';\n    var checkmarkClass = 'tox-collection__item-checkmark';\n    var activeClass = 'tox-collection__item--active';\n    var containerClass = 'tox-collection__item-container';\n    var containerColumnClass = 'tox-collection__item-container--column';\n    var containerRowClass = 'tox-collection__item-container--row';\n    var containerAlignRightClass = 'tox-collection__item-container--align-right';\n    var containerAlignLeftClass = 'tox-collection__item-container--align-left';\n    var containerValignTopClass = 'tox-collection__item-container--valign-top';\n    var containerValignMiddleClass = 'tox-collection__item-container--valign-middle';\n    var containerValignBottomClass = 'tox-collection__item-container--valign-bottom';\n    var classForPreset = function (presets) {\n      return get$e(presetClasses, presets).getOr(navClass);\n    };\n\n    var forMenu = function (presets) {\n      if (presets === 'color') {\n        return 'tox-swatches';\n      } else {\n        return 'tox-menu';\n      }\n    };\n    var classes = function (presets) {\n      return {\n        backgroundMenu: 'tox-background-menu',\n        selectedMenu: 'tox-selected-menu',\n        selectedItem: 'tox-collection__item--active',\n        hasIcons: 'tox-menu--has-icons',\n        menu: forMenu(presets),\n        tieredMenu: 'tox-tiered-menu'\n      };\n    };\n\n    var markers = function (presets) {\n      var menuClasses = classes(presets);\n      return {\n        backgroundMenu: menuClasses.backgroundMenu,\n        selectedMenu: menuClasses.selectedMenu,\n        menu: menuClasses.menu,\n        selectedItem: menuClasses.selectedItem,\n        item: classForPreset(presets)\n      };\n    };\n    var dom$1 = function (hasIcons, columns, presets) {\n      var menuClasses = classes(presets);\n      return {\n        tag: 'div',\n        classes: flatten([\n          [\n            menuClasses.menu,\n            'tox-menu-' + columns + '-column'\n          ],\n          hasIcons ? [menuClasses.hasIcons] : []\n        ])\n      };\n    };\n    var components = [Menu.parts.items({})];\n    var part = function (hasIcons, columns, presets) {\n      var menuClasses = classes(presets);\n      var d = {\n        tag: 'div',\n        classes: flatten([[menuClasses.tieredMenu]])\n      };\n      return {\n        dom: d,\n        markers: markers(presets)\n      };\n    };\n\n    var chunk = function (rowDom, numColumns) {\n      return function (items) {\n        var chunks = chunk$1(items, numColumns);\n        return map$2(chunks, function (c) {\n          return {\n            dom: rowDom,\n            components: c\n          };\n        });\n      };\n    };\n    var forSwatch = function (columns) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-menu',\n            'tox-swatches-menu'\n          ]\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-swatches']\n            },\n            components: [Menu.parts.items({\n                preprocess: columns !== 'auto' ? chunk({\n                  tag: 'div',\n                  classes: ['tox-swatches__row']\n                }, columns) : identity$1\n              })]\n          }]\n      };\n    };\n    var forToolbar = function (columns) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-menu',\n            'tox-collection',\n            'tox-collection--toolbar',\n            'tox-collection--toolbar-lg'\n          ]\n        },\n        components: [Menu.parts.items({\n            preprocess: chunk({\n              tag: 'div',\n              classes: ['tox-collection__group']\n            }, columns)\n          })]\n      };\n    };\n    var preprocessCollection = function (items, isSeparator) {\n      var allSplits = [];\n      var currentSplit = [];\n      each$1(items, function (item, i) {\n        if (isSeparator(item, i)) {\n          if (currentSplit.length > 0) {\n            allSplits.push(currentSplit);\n          }\n          currentSplit = [];\n          if (has$2(item.dom, 'innerHtml')) {\n            currentSplit.push(item);\n          }\n        } else {\n          currentSplit.push(item);\n        }\n      });\n      if (currentSplit.length > 0) {\n        allSplits.push(currentSplit);\n      }\n      return map$2(allSplits, function (s) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-collection__group']\n          },\n          components: s\n        };\n      });\n    };\n    var forCollection = function (columns, initItems, _hasIcons) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-menu',\n            'tox-collection'\n          ].concat(columns === 1 ? ['tox-collection--list'] : ['tox-collection--grid'])\n        },\n        components: [Menu.parts.items({\n            preprocess: function (items) {\n              if (columns !== 'auto' && columns > 1) {\n                return chunk({\n                  tag: 'div',\n                  classes: ['tox-collection__group']\n                }, columns)(items);\n              } else {\n                return preprocessCollection(items, function (_item, i) {\n                  return initItems[i].type === 'separator';\n                });\n              }\n            }\n          })]\n      };\n    };\n    var forHorizontalCollection = function (initItems, _hasIcons) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-collection',\n            'tox-collection--horizontal'\n          ]\n        },\n        components: [Menu.parts.items({\n            preprocess: function (items) {\n              return preprocessCollection(items, function (_item, i) {\n                return initItems[i].type === 'separator';\n              });\n            }\n          })]\n      };\n    };\n\n    var menuHasIcons = function (xs) {\n      return exists(xs, function (item) {\n        return 'icon' in item && item.icon !== undefined;\n      });\n    };\n    var handleError = function (error) {\n      console.error(formatError(error));\n      console.log(error);\n      return Optional.none();\n    };\n    var createHorizontalPartialMenuWithAlloyItems = function (value, _hasIcons, items, _columns, _presets) {\n      var structure = forHorizontalCollection(items);\n      return {\n        value: value,\n        dom: structure.dom,\n        components: structure.components,\n        items: items\n      };\n    };\n    var createPartialMenuWithAlloyItems = function (value, hasIcons, items, columns, presets) {\n      if (presets === 'color') {\n        var structure = forSwatch(columns);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'normal' && columns === 'auto') {\n        var structure = forCollection(columns, items);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'normal' && columns === 1) {\n        var structure = forCollection(1, items);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'normal') {\n        var structure = forCollection(columns, items);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'listpreview' && columns !== 'auto') {\n        var structure = forToolbar(columns);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      return {\n        value: value,\n        dom: dom$1(hasIcons, columns, presets),\n        components: components,\n        items: items\n      };\n    };\n\n    var cardImageFields = [\n      requiredString('type'),\n      requiredString('src'),\n      optionString('alt'),\n      defaultedArrayOf('classes', [], string)\n    ];\n    var cardImageSchema = objOf(cardImageFields);\n\n    var cardTextFields = [\n      requiredString('type'),\n      requiredString('text'),\n      optionString('name'),\n      defaultedArrayOf('classes', ['tox-collection__item-label'], string)\n    ];\n    var cardTextSchema = objOf(cardTextFields);\n\n    var itemSchema$1 = valueThunk(function () {\n      return choose$2('type', {\n        cardimage: cardImageSchema,\n        cardtext: cardTextSchema,\n        cardcontainer: cardContainerSchema\n      });\n    });\n    var cardContainerSchema = objOf([\n      requiredString('type'),\n      defaultedString('direction', 'horizontal'),\n      defaultedString('align', 'left'),\n      defaultedString('valign', 'middle'),\n      requiredArrayOf('items', itemSchema$1)\n    ]);\n\n    var commonMenuItemFields = [\n      defaultedBoolean('disabled', false),\n      optionString('text'),\n      optionString('shortcut'),\n      field$1('value', 'value', defaultedThunk(function () {\n        return generate$6('menuitem-value');\n      }), anyValue()),\n      defaulted('meta', {})\n    ];\n\n    var cardMenuItemSchema = objOf([\n      requiredString('type'),\n      optionString('label'),\n      requiredArrayOf('items', itemSchema$1),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      defaultedFunction('onAction', noop)\n    ].concat(commonMenuItemFields));\n    var createCardMenuItem = function (spec) {\n      return asRaw('cardmenuitem', cardMenuItemSchema, spec);\n    };\n\n    var choiceMenuItemSchema = objOf([\n      requiredString('type'),\n      defaultedBoolean('active', false),\n      optionString('icon')\n    ].concat(commonMenuItemFields));\n    var createChoiceMenuItem = function (spec) {\n      return asRaw('choicemenuitem', choiceMenuItemSchema, spec);\n    };\n\n    var baseFields = [\n      requiredString('type'),\n      requiredString('fancytype'),\n      defaultedFunction('onAction', noop)\n    ];\n    var insertTableFields = [defaulted('initData', {})].concat(baseFields);\n    var colorSwatchFields = [defaultedObjOf('initData', {}, [\n        defaultedBoolean('allowCustomColors', true),\n        optionArrayOf('colors', anyValue())\n      ])].concat(baseFields);\n    var fancyMenuItemSchema = choose$1('fancytype', {\n      inserttable: insertTableFields,\n      colorswatch: colorSwatchFields\n    });\n    var createFancyMenuItem = function (spec) {\n      return asRaw('fancymenuitem', fancyMenuItemSchema, spec);\n    };\n\n    var menuItemSchema = objOf([\n      requiredString('type'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      defaultedFunction('onAction', noop),\n      optionString('icon')\n    ].concat(commonMenuItemFields));\n    var createMenuItem = function (spec) {\n      return asRaw('menuitem', menuItemSchema, spec);\n    };\n\n    var nestedMenuItemSchema = objOf([\n      requiredString('type'),\n      requiredFunction('getSubmenuItems'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      optionString('icon')\n    ].concat(commonMenuItemFields));\n    var createNestedMenuItem = function (spec) {\n      return asRaw('nestedmenuitem', nestedMenuItemSchema, spec);\n    };\n\n    var toggleMenuItemSchema = objOf([\n      requiredString('type'),\n      optionString('icon'),\n      defaultedBoolean('active', false),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      requiredFunction('onAction')\n    ].concat(commonMenuItemFields));\n    var createToggleMenuItem = function (spec) {\n      return asRaw('togglemenuitem', toggleMenuItemSchema, spec);\n    };\n\n    var detectSize = function (comp, margin, selectorClass) {\n      var descendants$1 = descendants(comp.element, '.' + selectorClass);\n      if (descendants$1.length > 0) {\n        var columnLength = findIndex$1(descendants$1, function (c) {\n          var thisTop = c.dom.getBoundingClientRect().top;\n          var cTop = descendants$1[0].dom.getBoundingClientRect().top;\n          return Math.abs(thisTop - cTop) > margin;\n        }).getOr(descendants$1.length);\n        return Optional.some({\n          numColumns: columnLength,\n          numRows: Math.ceil(descendants$1.length / columnLength)\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n\n    var namedEvents = function (name, handlers) {\n      return derive$1([config(name, handlers)]);\n    };\n    var unnamedEvents = function (handlers) {\n      return namedEvents(generate$6('unnamed-events'), handlers);\n    };\n    var SimpleBehaviours = {\n      namedEvents: namedEvents,\n      unnamedEvents: unnamedEvents\n    };\n\n    var ExclusivityChannel = generate$6('tooltip.exclusive');\n    var ShowTooltipEvent = generate$6('tooltip.show');\n    var HideTooltipEvent = generate$6('tooltip.hide');\n\n    var hideAllExclusive = function (component, _tConfig, _tState) {\n      component.getSystem().broadcastOn([ExclusivityChannel], {});\n    };\n    var setComponents = function (component, tConfig, tState, specs) {\n      tState.getTooltip().each(function (tooltip) {\n        if (tooltip.getSystem().isConnected()) {\n          Replacing.set(tooltip, specs);\n        }\n      });\n    };\n\n    var TooltippingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        hideAllExclusive: hideAllExclusive,\n        setComponents: setComponents\n    });\n\n    var events$9 = function (tooltipConfig, state) {\n      var hide = function (comp) {\n        state.getTooltip().each(function (p) {\n          detach(p);\n          tooltipConfig.onHide(comp, p);\n          state.clearTooltip();\n        });\n        state.clearTimer();\n      };\n      var show = function (comp) {\n        if (!state.isShowing()) {\n          hideAllExclusive(comp);\n          var sink = tooltipConfig.lazySink(comp).getOrDie();\n          var popup = comp.getSystem().build({\n            dom: tooltipConfig.tooltipDom,\n            components: tooltipConfig.tooltipComponents,\n            events: derive$2(tooltipConfig.mode === 'normal' ? [\n              run$1(mouseover(), function (_) {\n                emit(comp, ShowTooltipEvent);\n              }),\n              run$1(mouseout(), function (_) {\n                emit(comp, HideTooltipEvent);\n              })\n            ] : []),\n            behaviours: derive$1([Replacing.config({})])\n          });\n          state.setTooltip(popup);\n          attach(sink, popup);\n          tooltipConfig.onShow(comp, popup);\n          Positioning.position(sink, popup, { anchor: tooltipConfig.anchor(comp) });\n        }\n      };\n      return derive$2(flatten([\n        [\n          run$1(ShowTooltipEvent, function (comp) {\n            state.resetTimer(function () {\n              show(comp);\n            }, tooltipConfig.delay);\n          }),\n          run$1(HideTooltipEvent, function (comp) {\n            state.resetTimer(function () {\n              hide(comp);\n            }, tooltipConfig.delay);\n          }),\n          run$1(receive(), function (comp, message) {\n            var receivingData = message;\n            if (!receivingData.universal) {\n              if (contains$2(receivingData.channels, ExclusivityChannel)) {\n                hide(comp);\n              }\n            }\n          }),\n          runOnDetached(function (comp) {\n            hide(comp);\n          })\n        ],\n        tooltipConfig.mode === 'normal' ? [\n          run$1(focusin(), function (comp) {\n            emit(comp, ShowTooltipEvent);\n          }),\n          run$1(postBlur(), function (comp) {\n            emit(comp, HideTooltipEvent);\n          }),\n          run$1(mouseover(), function (comp) {\n            emit(comp, ShowTooltipEvent);\n          }),\n          run$1(mouseout(), function (comp) {\n            emit(comp, HideTooltipEvent);\n          })\n        ] : [\n          run$1(highlight$1(), function (comp, _se) {\n            emit(comp, ShowTooltipEvent);\n          }),\n          run$1(dehighlight$1(), function (comp) {\n            emit(comp, HideTooltipEvent);\n          })\n        ]\n      ]));\n    };\n\n    var ActiveTooltipping = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$9\n    });\n\n    var TooltippingSchema = [\n      required$1('lazySink'),\n      required$1('tooltipDom'),\n      defaulted('exclusive', true),\n      defaulted('tooltipComponents', []),\n      defaulted('delay', 300),\n      defaultedStringEnum('mode', 'normal', [\n        'normal',\n        'follow-highlight'\n      ]),\n      defaulted('anchor', function (comp) {\n        return {\n          type: 'hotspot',\n          hotspot: comp,\n          layouts: {\n            onLtr: constant$1([\n              south$2,\n              north$2,\n              southeast$2,\n              northeast$2,\n              southwest$2,\n              northwest$2\n            ]),\n            onRtl: constant$1([\n              south$2,\n              north$2,\n              southeast$2,\n              northeast$2,\n              southwest$2,\n              northwest$2\n            ])\n          }\n        };\n      }),\n      onHandler('onHide'),\n      onHandler('onShow')\n    ];\n\n    var init$b = function () {\n      var timer = value$1();\n      var popup = value$1();\n      var clearTimer = function () {\n        timer.on(clearTimeout);\n      };\n      var resetTimer = function (f, delay) {\n        clearTimer();\n        timer.set(setTimeout(f, delay));\n      };\n      var readState = constant$1('not-implemented');\n      return nu$8({\n        getTooltip: popup.get,\n        isShowing: popup.isSet,\n        setTooltip: popup.set,\n        clearTooltip: popup.clear,\n        clearTimer: clearTimer,\n        resetTimer: resetTimer,\n        readState: readState\n      });\n    };\n\n    var TooltippingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$b\n    });\n\n    var Tooltipping = create$8({\n      fields: TooltippingSchema,\n      name: 'tooltipping',\n      active: ActiveTooltipping,\n      state: TooltippingState,\n      apis: TooltippingApis\n    });\n\n    var escape = function (text) {\n      return text.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n    };\n\n    var global$b = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$a = tinymce.util.Tools.resolve('tinymce.EditorManager');\n\n    var getSkinUrl = function (editor) {\n      var skin = editor.getParam('skin');\n      var skinUrl = editor.getParam('skin_url');\n      if (skin !== false) {\n        var skinName = skin ? skin : 'oxide';\n        if (skinUrl) {\n          skinUrl = editor.documentBaseURI.toAbsolute(skinUrl);\n        } else {\n          skinUrl = global$a.baseURL + '/skins/ui/' + skinName;\n        }\n      }\n      return skinUrl;\n    };\n    var isReadOnly = function (editor) {\n      return editor.getParam('readonly', false, 'boolean');\n    };\n    var isSkinDisabled = function (editor) {\n      return editor.getParam('skin') === false;\n    };\n    var getHeightSetting = function (editor) {\n      return editor.getParam('height', Math.max(editor.getElement().offsetHeight, 200));\n    };\n    var getWidthSetting = function (editor) {\n      return editor.getParam('width', global$b.DOM.getStyle(editor.getElement(), 'width'));\n    };\n    var getMinWidthSetting = function (editor) {\n      return Optional.from(editor.getParam('min_width')).filter(isNumber);\n    };\n    var getMinHeightSetting = function (editor) {\n      return Optional.from(editor.getParam('min_height')).filter(isNumber);\n    };\n    var getMaxWidthSetting = function (editor) {\n      return Optional.from(editor.getParam('max_width')).filter(isNumber);\n    };\n    var getMaxHeightSetting = function (editor) {\n      return Optional.from(editor.getParam('max_height')).filter(isNumber);\n    };\n    var getUserStyleFormats = function (editor) {\n      return Optional.from(editor.getParam('style_formats')).filter(isArray);\n    };\n    var isMergeStyleFormats = function (editor) {\n      return editor.getParam('style_formats_merge', false, 'boolean');\n    };\n    var getLineHeightFormats = function (editor) {\n      return editor.getParam('lineheight_formats', '1 1.1 1.2 1.3 1.4 1.5 2', 'string').split(' ');\n    };\n    var getContentLanguages = function (editor) {\n      return editor.getParam('content_langs', undefined, 'array');\n    };\n    var getRemovedMenuItems = function (editor) {\n      return editor.getParam('removed_menuitems', '');\n    };\n    var isMenubarEnabled = function (editor) {\n      return editor.getParam('menubar', true, 'boolean') !== false;\n    };\n    var isToolbarEnabled = function (editor) {\n      var toolbar = editor.getParam('toolbar', true);\n      var isToolbarTrue = toolbar === true;\n      var isToolbarString = isString(toolbar);\n      var isToolbarObjectArray = isArray(toolbar) && toolbar.length > 0;\n      return !isMultipleToolbars(editor) && (isToolbarObjectArray || isToolbarString || isToolbarTrue);\n    };\n    var getMultipleToolbarsSetting = function (editor) {\n      var toolbars = range$2(9, function (num) {\n        return editor.getParam('toolbar' + (num + 1), false, 'string');\n      });\n      var toolbarArray = filter$2(toolbars, function (toolbar) {\n        return typeof toolbar === 'string';\n      });\n      return toolbarArray.length > 0 ? Optional.some(toolbarArray) : Optional.none();\n    };\n    var isMultipleToolbars = function (editor) {\n      return getMultipleToolbarsSetting(editor).fold(function () {\n        var toolbar = editor.getParam('toolbar', [], 'string[]');\n        return toolbar.length > 0;\n      }, always);\n    };\n    var ToolbarMode;\n    (function (ToolbarMode) {\n      ToolbarMode['default'] = 'wrap';\n      ToolbarMode['floating'] = 'floating';\n      ToolbarMode['sliding'] = 'sliding';\n      ToolbarMode['scrolling'] = 'scrolling';\n    }(ToolbarMode || (ToolbarMode = {})));\n    var getToolbarMode = function (editor) {\n      return editor.getParam('toolbar_mode', '', 'string');\n    };\n    var ToolbarLocation;\n    (function (ToolbarLocation) {\n      ToolbarLocation['auto'] = 'auto';\n      ToolbarLocation['top'] = 'top';\n      ToolbarLocation['bottom'] = 'bottom';\n    }(ToolbarLocation || (ToolbarLocation = {})));\n    var getToolbarGroups = function (editor) {\n      return editor.getParam('toolbar_groups', {}, 'object');\n    };\n    var getToolbarLocation = function (editor) {\n      return editor.getParam('toolbar_location', ToolbarLocation.auto, 'string');\n    };\n    var isToolbarLocationBottom = function (editor) {\n      return getToolbarLocation(editor) === ToolbarLocation.bottom;\n    };\n    var fixedContainerSelector = function (editor) {\n      return editor.getParam('fixed_toolbar_container', '', 'string');\n    };\n    var fixedToolbarContainerTarget = function (editor) {\n      return editor.getParam('fixed_toolbar_container_target');\n    };\n    var isToolbarPersist = function (editor) {\n      return editor.getParam('toolbar_persist', false, 'boolean');\n    };\n    var fixedContainerTarget = function (editor) {\n      if (!editor.inline) {\n        return Optional.none();\n      }\n      var selector = fixedContainerSelector(editor);\n      if (selector.length > 0) {\n        return descendant(body(), selector);\n      }\n      var element = fixedToolbarContainerTarget(editor);\n      if (isNonNullable(element)) {\n        return Optional.some(SugarElement.fromDom(element));\n      }\n      return Optional.none();\n    };\n    var useFixedContainer = function (editor) {\n      return editor.inline && fixedContainerTarget(editor).isSome();\n    };\n    var getUiContainer = function (editor) {\n      var fixedContainer = fixedContainerTarget(editor);\n      return fixedContainer.getOrThunk(function () {\n        return getContentContainer(getRootNode(SugarElement.fromDom(editor.getElement())));\n      });\n    };\n    var isDistractionFree = function (editor) {\n      return editor.inline && !isMenubarEnabled(editor) && !isToolbarEnabled(editor) && !isMultipleToolbars(editor);\n    };\n    var isStickyToolbar = function (editor) {\n      var isStickyToolbar = editor.getParam('toolbar_sticky', false, 'boolean');\n      return (isStickyToolbar || editor.inline) && !useFixedContainer(editor) && !isDistractionFree(editor);\n    };\n    var getStickyToolbarOffset = function (editor) {\n      return editor.getParam('toolbar_sticky_offset', 0, 'number');\n    };\n    var isDraggableModal$1 = function (editor) {\n      return editor.getParam('draggable_modal', false, 'boolean');\n    };\n    var getMenus = function (editor) {\n      var menu = editor.getParam('menu');\n      if (menu) {\n        return map$1(menu, function (menu) {\n          return __assign(__assign({}, menu), { items: menu.items });\n        });\n      } else {\n        return {};\n      }\n    };\n    var getMenubar = function (editor) {\n      return editor.getParam('menubar');\n    };\n    var getToolbar = function (editor) {\n      return editor.getParam('toolbar', true);\n    };\n    var getFilePickerCallback = function (editor) {\n      return editor.getParam('file_picker_callback');\n    };\n    var getFilePickerTypes = function (editor) {\n      return editor.getParam('file_picker_types');\n    };\n    var getFileBrowserCallbackTypes = function (editor) {\n      return editor.getParam('file_browser_callback_types');\n    };\n    var noTypeaheadUrls = function (editor) {\n      return editor.getParam('typeahead_urls') === false;\n    };\n    var getAnchorTop = function (editor) {\n      return editor.getParam('anchor_top', '#top');\n    };\n    var getAnchorBottom = function (editor) {\n      return editor.getParam('anchor_bottom', '#bottom');\n    };\n    var getFilePickerValidatorHandler = function (editor) {\n      var handler = editor.getParam('file_picker_validator_handler', undefined, 'function');\n      if (handler === undefined) {\n        return editor.getParam('filepicker_validator_handler', undefined, 'function');\n      } else {\n        return handler;\n      }\n    };\n\n    var ReadOnlyChannel = 'silver.readonly';\n    var ReadOnlyDataSchema = objOf([requiredBoolean('readonly')]);\n    var broadcastReadonly = function (uiComponents, readonly) {\n      var outerContainer = uiComponents.outerContainer;\n      var target = outerContainer.element;\n      if (readonly) {\n        uiComponents.mothership.broadcastOn([dismissPopups()], { target: target });\n        uiComponents.uiMothership.broadcastOn([dismissPopups()], { target: target });\n      }\n      uiComponents.mothership.broadcastOn([ReadOnlyChannel], { readonly: readonly });\n      uiComponents.uiMothership.broadcastOn([ReadOnlyChannel], { readonly: readonly });\n    };\n    var setupReadonlyModeSwitch = function (editor, uiComponents) {\n      editor.on('init', function () {\n        if (editor.mode.isReadOnly()) {\n          broadcastReadonly(uiComponents, true);\n        }\n      });\n      editor.on('SwitchMode', function () {\n        return broadcastReadonly(uiComponents, editor.mode.isReadOnly());\n      });\n      if (isReadOnly(editor)) {\n        editor.setMode('readonly');\n      }\n    };\n    var receivingConfig = function () {\n      var _a;\n      return Receiving.config({\n        channels: (_a = {}, _a[ReadOnlyChannel] = {\n          schema: ReadOnlyDataSchema,\n          onReceive: function (comp, data) {\n            Disabling.set(comp, data.readonly);\n          }\n        }, _a)\n      });\n    };\n\n    var item = function (disabled) {\n      return Disabling.config({\n        disabled: disabled,\n        disableClass: 'tox-collection__item--state-disabled'\n      });\n    };\n    var button = function (disabled) {\n      return Disabling.config({ disabled: disabled });\n    };\n    var splitButton = function (disabled) {\n      return Disabling.config({\n        disabled: disabled,\n        disableClass: 'tox-tbtn--disabled'\n      });\n    };\n    var toolbarButton = function (disabled) {\n      return Disabling.config({\n        disabled: disabled,\n        disableClass: 'tox-tbtn--disabled',\n        useNative: false\n      });\n    };\n    var DisablingConfigs = {\n      item: item,\n      button: button,\n      splitButton: splitButton,\n      toolbarButton: toolbarButton\n    };\n\n    var runWithApi = function (info, comp) {\n      var api = info.getApi(comp);\n      return function (f) {\n        f(api);\n      };\n    };\n    var onControlAttached = function (info, editorOffCell) {\n      return runOnAttached(function (comp) {\n        var run = runWithApi(info, comp);\n        run(function (api) {\n          var onDestroy = info.onSetup(api);\n          if (isFunction(onDestroy)) {\n            editorOffCell.set(onDestroy);\n          }\n        });\n      });\n    };\n    var onControlDetached = function (getApi, editorOffCell) {\n      return runOnDetached(function (comp) {\n        return runWithApi(getApi, comp)(editorOffCell.get());\n      });\n    };\n\n    var _a$1;\n    var onMenuItemExecute = function (info, itemResponse) {\n      return runOnExecute$1(function (comp, simulatedEvent) {\n        runWithApi(info, comp)(info.onAction);\n        if (!info.triggersSubmenu && itemResponse === ItemResponse$1.CLOSE_ON_EXECUTE) {\n          emit(comp, sandboxClose());\n          simulatedEvent.stop();\n        }\n      });\n    };\n    var menuItemEventOrder = (_a$1 = {}, _a$1[execute$5()] = [\n      'disabling',\n      'alloy.base.behaviour',\n      'toggling',\n      'item-events'\n    ], _a$1);\n\n    var componentRenderPipeline = cat;\n    var renderCommonItem = function (spec, structure, itemResponse, providersbackstage) {\n      var editorOffCell = Cell(noop);\n      return {\n        type: 'item',\n        dom: structure.dom,\n        components: componentRenderPipeline(structure.optComponents),\n        data: spec.data,\n        eventOrder: menuItemEventOrder,\n        hasSubmenu: spec.triggersSubmenu,\n        itemBehaviours: derive$1([\n          config('item-events', [\n            onMenuItemExecute(spec, itemResponse),\n            onControlAttached(spec, editorOffCell),\n            onControlDetached(spec, editorOffCell)\n          ]),\n          DisablingConfigs.item(function () {\n            return spec.disabled || providersbackstage.isDisabled();\n          }),\n          receivingConfig(),\n          Replacing.config({})\n        ].concat(spec.itemBehaviours))\n      };\n    };\n    var buildData = function (source) {\n      return {\n        value: source.value,\n        meta: __assign({ text: source.text.getOr('') }, source.meta)\n      };\n    };\n\n    var global$9 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var convertText = function (source) {\n      var mac = {\n        alt: '&#x2325;',\n        ctrl: '&#x2303;',\n        shift: '&#x21E7;',\n        meta: '&#x2318;',\n        access: '&#x2303;&#x2325;'\n      };\n      var other = {\n        meta: 'Ctrl',\n        access: 'Shift+Alt'\n      };\n      var replace = global$9.mac ? mac : other;\n      var shortcut = source.split('+');\n      var updated = map$2(shortcut, function (segment) {\n        var search = segment.toLowerCase().trim();\n        return has$2(replace, search) ? replace[search] : segment;\n      });\n      return global$9.mac ? updated.join('') : updated.join('+');\n    };\n\n    var renderIcon$1 = function (name, icons, classes) {\n      if (classes === void 0) {\n        classes = [iconClass];\n      }\n      return render$3(name, {\n        tag: 'div',\n        classes: classes\n      }, icons);\n    };\n    var renderText = function (text) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [textClass]\n        },\n        components: [text$1(global$e.translate(text))]\n      };\n    };\n    var renderHtml = function (html, classes) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: classes,\n          innerHtml: html\n        }\n      };\n    };\n    var renderStyledText = function (style, text) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [textClass]\n        },\n        components: [{\n            dom: {\n              tag: style.tag,\n              styles: style.styles\n            },\n            components: [text$1(global$e.translate(text))]\n          }]\n      };\n    };\n    var renderShortcut = function (shortcut) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [accessoryClass],\n          innerHtml: convertText(shortcut)\n        }\n      };\n    };\n    var renderCheckmark = function (icons) {\n      return renderIcon$1('checkmark', icons, [checkmarkClass]);\n    };\n    var renderSubmenuCaret = function (icons) {\n      return renderIcon$1('chevron-right', icons, [caretClass]);\n    };\n    var renderDownwardsCaret = function (icons) {\n      return renderIcon$1('chevron-down', icons, [caretClass]);\n    };\n    var renderContainer = function (container, components) {\n      var directionClass = container.direction === 'vertical' ? containerColumnClass : containerRowClass;\n      var alignClass = container.align === 'left' ? containerAlignLeftClass : containerAlignRightClass;\n      var getValignClass = function () {\n        switch (container.valign) {\n        case 'top':\n          return containerValignTopClass;\n        case 'middle':\n          return containerValignMiddleClass;\n        case 'bottom':\n          return containerValignBottomClass;\n        }\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            containerClass,\n            directionClass,\n            alignClass,\n            getValignClass()\n          ]\n        },\n        components: components\n      };\n    };\n    var renderImage = function (src, classes, alt) {\n      return {\n        dom: {\n          tag: 'img',\n          classes: classes,\n          attributes: {\n            src: src,\n            alt: alt.getOr('')\n          }\n        }\n      };\n    };\n\n    var renderColorStructure = function (item, providerBackstage, fallbackIcon) {\n      var colorPickerCommand = 'custom';\n      var removeColorCommand = 'remove';\n      var itemText = item.ariaLabel;\n      var itemValue = item.value;\n      var iconSvg = item.iconContent.map(function (name) {\n        return getOr(name, providerBackstage.icons, fallbackIcon);\n      });\n      var getDom = function () {\n        var common = colorClass;\n        var icon = iconSvg.getOr('');\n        var attributes = itemText.map(function (text) {\n          return { title: providerBackstage.translate(text) };\n        }).getOr({});\n        var baseDom = {\n          tag: 'div',\n          attributes: attributes,\n          classes: [common]\n        };\n        if (itemValue === colorPickerCommand) {\n          return __assign(__assign({}, baseDom), {\n            tag: 'button',\n            classes: __spreadArray(__spreadArray([], baseDom.classes, true), ['tox-swatches__picker-btn'], false),\n            innerHtml: icon\n          });\n        } else if (itemValue === removeColorCommand) {\n          return __assign(__assign({}, baseDom), {\n            classes: __spreadArray(__spreadArray([], baseDom.classes, true), ['tox-swatch--remove'], false),\n            innerHtml: icon\n          });\n        } else {\n          return __assign(__assign({}, baseDom), {\n            attributes: __assign(__assign({}, baseDom.attributes), { 'data-mce-color': itemValue }),\n            styles: { 'background-color': itemValue }\n          });\n        }\n      };\n      return {\n        dom: getDom(),\n        optComponents: []\n      };\n    };\n    var renderItemDomStructure = function (ariaLabel) {\n      var domTitle = ariaLabel.map(function (label) {\n        return { attributes: { title: global$e.translate(label) } };\n      }).getOr({});\n      return __assign({\n        tag: 'div',\n        classes: [\n          navClass,\n          selectableClass\n        ]\n      }, domTitle);\n    };\n    var renderNormalItemStructure = function (info, providersBackstage, renderIcons, fallbackIcon) {\n      var iconSpec = {\n        tag: 'div',\n        classes: [iconClass]\n      };\n      var renderIcon = function (iconName) {\n        return render$3(iconName, iconSpec, providersBackstage.icons, fallbackIcon);\n      };\n      var renderEmptyIcon = function () {\n        return Optional.some({ dom: iconSpec });\n      };\n      var leftIcon = renderIcons ? info.iconContent.map(renderIcon).orThunk(renderEmptyIcon) : Optional.none();\n      var checkmark = info.checkMark;\n      var textRender = Optional.from(info.meta).fold(function () {\n        return renderText;\n      }, function (meta) {\n        return has$2(meta, 'style') ? curry(renderStyledText, meta.style) : renderText;\n      });\n      var content = info.htmlContent.fold(function () {\n        return info.textContent.map(textRender);\n      }, function (html) {\n        return Optional.some(renderHtml(html, [textClass]));\n      });\n      var menuItem = {\n        dom: renderItemDomStructure(info.ariaLabel),\n        optComponents: [\n          leftIcon,\n          content,\n          info.shortcutContent.map(renderShortcut),\n          checkmark,\n          info.caret\n        ]\n      };\n      return menuItem;\n    };\n    var renderItemStructure = function (info, providersBackstage, renderIcons, fallbackIcon) {\n      if (fallbackIcon === void 0) {\n        fallbackIcon = Optional.none();\n      }\n      if (info.presets === 'color') {\n        return renderColorStructure(info, providersBackstage, fallbackIcon);\n      } else {\n        return renderNormalItemStructure(info, providersBackstage, renderIcons, fallbackIcon);\n      }\n    };\n\n    var tooltipBehaviour = function (meta, sharedBackstage) {\n      return get$e(meta, 'tooltipWorker').map(function (tooltipWorker) {\n        return [Tooltipping.config({\n            lazySink: sharedBackstage.getSink,\n            tooltipDom: {\n              tag: 'div',\n              classes: ['tox-tooltip-worker-container']\n            },\n            tooltipComponents: [],\n            anchor: function (comp) {\n              return {\n                type: 'submenu',\n                item: comp,\n                overrides: { maxHeightFunction: expandable$1 }\n              };\n            },\n            mode: 'follow-highlight',\n            onShow: function (component, _tooltip) {\n              tooltipWorker(function (elm) {\n                Tooltipping.setComponents(component, [external$2({ element: SugarElement.fromDom(elm) })]);\n              });\n            }\n          })];\n      }).getOr([]);\n    };\n    var encodeText = function (text) {\n      return global$b.DOM.encode(text);\n    };\n    var replaceText = function (text, matchText) {\n      var translated = global$e.translate(text);\n      var encoded = encodeText(translated);\n      if (matchText.length > 0) {\n        var escapedMatchRegex = new RegExp(escape(matchText), 'gi');\n        return encoded.replace(escapedMatchRegex, function (match) {\n          return '<span class=\"tox-autocompleter-highlight\">' + match + '</span>';\n        });\n      } else {\n        return encoded;\n      }\n    };\n    var renderAutocompleteItem = function (spec, matchText, useText, presets, onItemValueHandler, itemResponse, sharedBackstage, renderIcons) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      var structure = renderItemStructure({\n        presets: presets,\n        textContent: Optional.none(),\n        htmlContent: useText ? spec.text.map(function (text) {\n          return replaceText(text, matchText);\n        }) : Optional.none(),\n        ariaLabel: spec.text,\n        iconContent: spec.icon,\n        shortcutContent: Optional.none(),\n        checkMark: Optional.none(),\n        caret: Optional.none(),\n        value: spec.value\n      }, sharedBackstage.providers, renderIcons, spec.icon);\n      return renderCommonItem({\n        data: buildData(spec),\n        disabled: spec.disabled,\n        getApi: constant$1({}),\n        onAction: function (_api) {\n          return onItemValueHandler(spec.value, spec.meta);\n        },\n        onSetup: constant$1(noop),\n        triggersSubmenu: false,\n        itemBehaviours: tooltipBehaviour(spec.meta, sharedBackstage)\n      }, structure, itemResponse, sharedBackstage.providers);\n    };\n\n    var render$2 = function (items, extras) {\n      return map$2(items, function (item) {\n        switch (item.type) {\n        case 'cardcontainer':\n          return renderContainer(item, render$2(item.items, extras));\n        case 'cardimage':\n          return renderImage(item.src, item.classes, item.alt);\n        case 'cardtext':\n          var shouldHighlight = item.name.exists(function (name) {\n            return contains$2(extras.cardText.highlightOn, name);\n          });\n          var matchText = shouldHighlight ? Optional.from(extras.cardText.matchText).getOr('') : '';\n          return renderHtml(replaceText(item.text, matchText), item.classes);\n        }\n      });\n    };\n    var renderCardMenuItem = function (spec, itemResponse, sharedBackstage, extras) {\n      var getApi = function (component) {\n        return {\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            Disabling.set(component, state);\n            each$1(descendants(component.element, '*'), function (elm) {\n              component.getSystem().getByDom(elm).each(function (comp) {\n                if (comp.hasConfigured(Disabling)) {\n                  Disabling.set(comp, state);\n                }\n              });\n            });\n          }\n        };\n      };\n      var structure = {\n        dom: renderItemDomStructure(spec.label),\n        optComponents: [Optional.some({\n            dom: {\n              tag: 'div',\n              classes: [\n                containerClass,\n                containerRowClass\n              ]\n            },\n            components: render$2(spec.items, extras)\n          })]\n      };\n      return renderCommonItem({\n        data: buildData(__assign({ text: Optional.none() }, spec)),\n        disabled: spec.disabled,\n        getApi: getApi,\n        onAction: spec.onAction,\n        onSetup: spec.onSetup,\n        triggersSubmenu: false,\n        itemBehaviours: Optional.from(extras.itemBehaviours).getOr([])\n      }, structure, itemResponse, sharedBackstage.providers);\n    };\n\n    var renderChoiceItem = function (spec, useText, presets, onItemValueHandler, isSelected, itemResponse, providersBackstage, renderIcons) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      var getApi = function (component) {\n        return {\n          setActive: function (state) {\n            Toggling.set(component, state);\n          },\n          isActive: function () {\n            return Toggling.isOn(component);\n          },\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        presets: presets,\n        textContent: useText ? spec.text : Optional.none(),\n        htmlContent: Optional.none(),\n        ariaLabel: spec.text,\n        iconContent: spec.icon,\n        shortcutContent: useText ? spec.shortcut : Optional.none(),\n        checkMark: useText ? Optional.some(renderCheckmark(providersBackstage.icons)) : Optional.none(),\n        caret: Optional.none(),\n        value: spec.value\n      }, providersBackstage, renderIcons);\n      return deepMerge(renderCommonItem({\n        data: buildData(spec),\n        disabled: spec.disabled,\n        getApi: getApi,\n        onAction: function (_api) {\n          return onItemValueHandler(spec.value);\n        },\n        onSetup: function (api) {\n          api.setActive(isSelected);\n          return noop;\n        },\n        triggersSubmenu: false,\n        itemBehaviours: []\n      }, structure, itemResponse, providersBackstage), {\n        toggling: {\n          toggleClass: tickedClass,\n          toggleOnExecute: false,\n          selected: spec.active\n        }\n      });\n    };\n\n    var parts$f = generate$3(owner$2(), parts$h());\n\n    var hexColour = function (value) {\n      return { value: value };\n    };\n    var shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n    var longformRegex = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i;\n    var isHexString = function (hex) {\n      return shorthandRegex.test(hex) || longformRegex.test(hex);\n    };\n    var normalizeHex = function (hex) {\n      return removeLeading(hex, '#').toUpperCase();\n    };\n    var fromString$1 = function (hex) {\n      return isHexString(hex) ? Optional.some({ value: normalizeHex(hex) }) : Optional.none();\n    };\n    var getLongForm = function (hex) {\n      var hexString = hex.value.replace(shorthandRegex, function (m, r, g, b) {\n        return r + r + g + g + b + b;\n      });\n      return { value: hexString };\n    };\n    var extractValues = function (hex) {\n      var longForm = getLongForm(hex);\n      var splitForm = longformRegex.exec(longForm.value);\n      return splitForm === null ? [\n        'FFFFFF',\n        'FF',\n        'FF',\n        'FF'\n      ] : splitForm;\n    };\n    var toHex = function (component) {\n      var hex = component.toString(16);\n      return (hex.length === 1 ? '0' + hex : hex).toUpperCase();\n    };\n    var fromRgba = function (rgbaColour) {\n      var value = toHex(rgbaColour.red) + toHex(rgbaColour.green) + toHex(rgbaColour.blue);\n      return hexColour(value);\n    };\n\n    var min = Math.min;\n    var max = Math.max;\n    var round$1 = Math.round;\n    var rgbRegex = /^rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)/;\n    var rgbaRegex = /^rgba\\((\\d+),\\s*(\\d+),\\s*(\\d+),\\s*(\\d?(?:\\.\\d+)?)\\)/;\n    var rgbaColour = function (red, green, blue, alpha) {\n      return {\n        red: red,\n        green: green,\n        blue: blue,\n        alpha: alpha\n      };\n    };\n    var isRgbaComponent = function (value) {\n      var num = parseInt(value, 10);\n      return num.toString() === value && num >= 0 && num <= 255;\n    };\n    var fromHsv = function (hsv) {\n      var r;\n      var g;\n      var b;\n      var hue = (hsv.hue || 0) % 360;\n      var saturation = hsv.saturation / 100;\n      var brightness = hsv.value / 100;\n      saturation = max(0, min(saturation, 1));\n      brightness = max(0, min(brightness, 1));\n      if (saturation === 0) {\n        r = g = b = round$1(255 * brightness);\n        return rgbaColour(r, g, b, 1);\n      }\n      var side = hue / 60;\n      var chroma = brightness * saturation;\n      var x = chroma * (1 - Math.abs(side % 2 - 1));\n      var match = brightness - chroma;\n      switch (Math.floor(side)) {\n      case 0:\n        r = chroma;\n        g = x;\n        b = 0;\n        break;\n      case 1:\n        r = x;\n        g = chroma;\n        b = 0;\n        break;\n      case 2:\n        r = 0;\n        g = chroma;\n        b = x;\n        break;\n      case 3:\n        r = 0;\n        g = x;\n        b = chroma;\n        break;\n      case 4:\n        r = x;\n        g = 0;\n        b = chroma;\n        break;\n      case 5:\n        r = chroma;\n        g = 0;\n        b = x;\n        break;\n      default:\n        r = g = b = 0;\n      }\n      r = round$1(255 * (r + match));\n      g = round$1(255 * (g + match));\n      b = round$1(255 * (b + match));\n      return rgbaColour(r, g, b, 1);\n    };\n    var fromHex = function (hexColour) {\n      var result = extractValues(hexColour);\n      var red = parseInt(result[1], 16);\n      var green = parseInt(result[2], 16);\n      var blue = parseInt(result[3], 16);\n      return rgbaColour(red, green, blue, 1);\n    };\n    var fromStringValues = function (red, green, blue, alpha) {\n      var r = parseInt(red, 10);\n      var g = parseInt(green, 10);\n      var b = parseInt(blue, 10);\n      var a = parseFloat(alpha);\n      return rgbaColour(r, g, b, a);\n    };\n    var fromString = function (rgbaString) {\n      if (rgbaString === 'transparent') {\n        return Optional.some(rgbaColour(0, 0, 0, 0));\n      }\n      var rgbMatch = rgbRegex.exec(rgbaString);\n      if (rgbMatch !== null) {\n        return Optional.some(fromStringValues(rgbMatch[1], rgbMatch[2], rgbMatch[3], '1'));\n      }\n      var rgbaMatch = rgbaRegex.exec(rgbaString);\n      if (rgbaMatch !== null) {\n        return Optional.some(fromStringValues(rgbaMatch[1], rgbaMatch[2], rgbaMatch[3], rgbaMatch[4]));\n      }\n      return Optional.none();\n    };\n    var toString = function (rgba) {\n      return 'rgba(' + rgba.red + ',' + rgba.green + ',' + rgba.blue + ',' + rgba.alpha + ')';\n    };\n    var red = rgbaColour(255, 0, 0, 1);\n\n    var fireSkinLoaded$1 = function (editor) {\n      return editor.fire('SkinLoaded');\n    };\n    var fireSkinLoadError$1 = function (editor, error) {\n      return editor.fire('SkinLoadError', error);\n    };\n    var fireResizeEditor = function (editor) {\n      return editor.fire('ResizeEditor');\n    };\n    var fireResizeContent = function (editor, e) {\n      return editor.fire('ResizeContent', e);\n    };\n    var fireScrollContent = function (editor, e) {\n      return editor.fire('ScrollContent', e);\n    };\n    var fireTextColorChange = function (editor, data) {\n      return editor.fire('TextColorChange', data);\n    };\n\n    var hsvColour = function (hue, saturation, value) {\n      return {\n        hue: hue,\n        saturation: saturation,\n        value: value\n      };\n    };\n    var fromRgb = function (rgbaColour) {\n      var h = 0;\n      var s = 0;\n      var v = 0;\n      var r = rgbaColour.red / 255;\n      var g = rgbaColour.green / 255;\n      var b = rgbaColour.blue / 255;\n      var minRGB = Math.min(r, Math.min(g, b));\n      var maxRGB = Math.max(r, Math.max(g, b));\n      if (minRGB === maxRGB) {\n        v = minRGB;\n        return hsvColour(0, 0, v * 100);\n      }\n      var d = r === minRGB ? g - b : b === minRGB ? r - g : b - r;\n      h = r === minRGB ? 3 : b === minRGB ? 1 : 5;\n      h = 60 * (h - d / (maxRGB - minRGB));\n      s = (maxRGB - minRGB) / maxRGB;\n      v = maxRGB;\n      return hsvColour(Math.round(h), Math.round(s * 100), Math.round(v * 100));\n    };\n\n    var hexToHsv = function (hex) {\n      return fromRgb(fromHex(hex));\n    };\n    var hsvToHex = function (hsv) {\n      return fromRgba(fromHsv(hsv));\n    };\n    var anyToHex = function (color) {\n      return fromString$1(color).orThunk(function () {\n        return fromString(color).map(fromRgba);\n      }).getOrThunk(function () {\n        var canvas = document.createElement('canvas');\n        canvas.height = 1;\n        canvas.width = 1;\n        var canvasContext = canvas.getContext('2d');\n        canvasContext.clearRect(0, 0, canvas.width, canvas.height);\n        canvasContext.fillStyle = '#FFFFFF';\n        canvasContext.fillStyle = color;\n        canvasContext.fillRect(0, 0, 1, 1);\n        var rgba = canvasContext.getImageData(0, 0, 1, 1).data;\n        var r = rgba[0];\n        var g = rgba[1];\n        var b = rgba[2];\n        var a = rgba[3];\n        return fromRgba(rgbaColour(r, g, b, a));\n      });\n    };\n\n    var global$8 = tinymce.util.Tools.resolve('tinymce.util.LocalStorage');\n\n    var storageName = 'tinymce-custom-colors';\n    function ColorCache (max) {\n      if (max === void 0) {\n        max = 10;\n      }\n      var storageString = global$8.getItem(storageName);\n      var localstorage = isString(storageString) ? JSON.parse(storageString) : [];\n      var prune = function (list) {\n        var diff = max - list.length;\n        return diff < 0 ? list.slice(0, max) : list;\n      };\n      var cache = prune(localstorage);\n      var add = function (key) {\n        indexOf(cache, key).each(remove);\n        cache.unshift(key);\n        if (cache.length > max) {\n          cache.pop();\n        }\n        global$8.setItem(storageName, JSON.stringify(cache));\n      };\n      var remove = function (idx) {\n        cache.splice(idx, 1);\n      };\n      var state = function () {\n        return cache.slice(0);\n      };\n      return {\n        add: add,\n        state: state\n      };\n    }\n\n    var choiceItem = 'choiceitem';\n    var defaultColors = [\n      {\n        type: choiceItem,\n        text: 'Light Green',\n        value: '#BFEDD2'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Yellow',\n        value: '#FBEEB8'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Red',\n        value: '#F8CAC6'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Purple',\n        value: '#ECCAFA'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Blue',\n        value: '#C2E0F4'\n      },\n      {\n        type: choiceItem,\n        text: 'Green',\n        value: '#2DC26B'\n      },\n      {\n        type: choiceItem,\n        text: 'Yellow',\n        value: '#F1C40F'\n      },\n      {\n        type: choiceItem,\n        text: 'Red',\n        value: '#E03E2D'\n      },\n      {\n        type: choiceItem,\n        text: 'Purple',\n        value: '#B96AD9'\n      },\n      {\n        type: choiceItem,\n        text: 'Blue',\n        value: '#3598DB'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Turquoise',\n        value: '#169179'\n      },\n      {\n        type: choiceItem,\n        text: 'Orange',\n        value: '#E67E23'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Red',\n        value: '#BA372A'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Purple',\n        value: '#843FA1'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Blue',\n        value: '#236FA1'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Gray',\n        value: '#ECF0F1'\n      },\n      {\n        type: choiceItem,\n        text: 'Medium Gray',\n        value: '#CED4D9'\n      },\n      {\n        type: choiceItem,\n        text: 'Gray',\n        value: '#95A5A6'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Gray',\n        value: '#7E8C8D'\n      },\n      {\n        type: choiceItem,\n        text: 'Navy Blue',\n        value: '#34495E'\n      },\n      {\n        type: choiceItem,\n        text: 'Black',\n        value: '#000000'\n      },\n      {\n        type: choiceItem,\n        text: 'White',\n        value: '#ffffff'\n      }\n    ];\n    var colorCache = ColorCache(10);\n    var mapColors = function (colorMap) {\n      var colors = [];\n      for (var i = 0; i < colorMap.length; i += 2) {\n        colors.push({\n          text: colorMap[i + 1],\n          value: '#' + anyToHex(colorMap[i]).value,\n          type: 'choiceitem'\n        });\n      }\n      return colors;\n    };\n    var getColorCols$2 = function (editor, defaultCols) {\n      return editor.getParam('color_cols', defaultCols, 'number');\n    };\n    var hasCustomColors$1 = function (editor) {\n      return editor.getParam('custom_colors') !== false;\n    };\n    var getColorMap = function (editor) {\n      return editor.getParam('color_map');\n    };\n    var getColors$2 = function (editor) {\n      var unmapped = getColorMap(editor);\n      return unmapped !== undefined ? mapColors(unmapped) : defaultColors;\n    };\n    var getCurrentColors = function () {\n      return map$2(colorCache.state(), function (color) {\n        return {\n          type: choiceItem,\n          text: color,\n          value: color\n        };\n      });\n    };\n    var addColor = function (color) {\n      colorCache.add(color);\n    };\n\n    var fallbackColor = '#000000';\n    var getCurrentColor = function (editor, format) {\n      var color;\n      editor.dom.getParents(editor.selection.getStart(), function (elm) {\n        var value;\n        if (value = elm.style[format === 'forecolor' ? 'color' : 'background-color']) {\n          color = color ? color : value;\n        }\n      });\n      return Optional.from(color);\n    };\n    var applyFormat = function (editor, format, value) {\n      editor.undoManager.transact(function () {\n        editor.focus();\n        editor.formatter.apply(format, { value: value });\n        editor.nodeChanged();\n      });\n    };\n    var removeFormat = function (editor, format) {\n      editor.undoManager.transact(function () {\n        editor.focus();\n        editor.formatter.remove(format, { value: null }, null, true);\n        editor.nodeChanged();\n      });\n    };\n    var registerCommands = function (editor) {\n      editor.addCommand('mceApplyTextcolor', function (format, value) {\n        applyFormat(editor, format, value);\n      });\n      editor.addCommand('mceRemoveTextcolor', function (format) {\n        removeFormat(editor, format);\n      });\n    };\n    var calcCols = function (colors) {\n      return Math.max(5, Math.ceil(Math.sqrt(colors)));\n    };\n    var getColorCols$1 = function (editor) {\n      var colors = getColors$2(editor);\n      var defaultCols = calcCols(colors.length);\n      return getColorCols$2(editor, defaultCols);\n    };\n    var getAdditionalColors = function (hasCustom) {\n      var type = 'choiceitem';\n      var remove = {\n        type: type,\n        text: 'Remove color',\n        icon: 'color-swatch-remove-color',\n        value: 'remove'\n      };\n      var custom = {\n        type: type,\n        text: 'Custom color',\n        icon: 'color-picker',\n        value: 'custom'\n      };\n      return hasCustom ? [\n        remove,\n        custom\n      ] : [remove];\n    };\n    var applyColor = function (editor, format, value, onChoice) {\n      if (value === 'custom') {\n        var dialog = colorPickerDialog(editor);\n        dialog(function (colorOpt) {\n          colorOpt.each(function (color) {\n            addColor(color);\n            editor.execCommand('mceApplyTextcolor', format, color);\n            onChoice(color);\n          });\n        }, fallbackColor);\n      } else if (value === 'remove') {\n        onChoice('');\n        editor.execCommand('mceRemoveTextcolor', format);\n      } else {\n        onChoice(value);\n        editor.execCommand('mceApplyTextcolor', format, value);\n      }\n    };\n    var getColors$1 = function (colors, hasCustom) {\n      return colors.concat(getCurrentColors().concat(getAdditionalColors(hasCustom)));\n    };\n    var getFetch$1 = function (colors, hasCustom) {\n      return function (callback) {\n        callback(getColors$1(colors, hasCustom));\n      };\n    };\n    var setIconColor = function (splitButtonApi, name, newColor) {\n      var id = name === 'forecolor' ? 'tox-icon-text-color__color' : 'tox-icon-highlight-bg-color__color';\n      splitButtonApi.setIconFill(id, newColor);\n    };\n    var registerTextColorButton = function (editor, name, format, tooltip, lastColor) {\n      editor.ui.registry.addSplitButton(name, {\n        tooltip: tooltip,\n        presets: 'color',\n        icon: name === 'forecolor' ? 'text-color' : 'highlight-bg-color',\n        select: function (value) {\n          var optCurrentRgb = getCurrentColor(editor, format);\n          return optCurrentRgb.bind(function (currentRgb) {\n            return fromString(currentRgb).map(function (rgba) {\n              var currentHex = fromRgba(rgba).value;\n              return contains$1(value.toLowerCase(), currentHex);\n            });\n          }).getOr(false);\n        },\n        columns: getColorCols$1(editor),\n        fetch: getFetch$1(getColors$2(editor), hasCustomColors$1(editor)),\n        onAction: function (_splitButtonApi) {\n          applyColor(editor, format, lastColor.get(), noop);\n        },\n        onItemAction: function (_splitButtonApi, value) {\n          applyColor(editor, format, value, function (newColor) {\n            lastColor.set(newColor);\n            fireTextColorChange(editor, {\n              name: name,\n              color: newColor\n            });\n          });\n        },\n        onSetup: function (splitButtonApi) {\n          setIconColor(splitButtonApi, name, lastColor.get());\n          var handler = function (e) {\n            if (e.name === name) {\n              setIconColor(splitButtonApi, e.name, e.color);\n            }\n          };\n          editor.on('TextColorChange', handler);\n          return function () {\n            editor.off('TextColorChange', handler);\n          };\n        }\n      });\n    };\n    var registerTextColorMenuItem = function (editor, name, format, text) {\n      editor.ui.registry.addNestedMenuItem(name, {\n        text: text,\n        icon: name === 'forecolor' ? 'text-color' : 'highlight-bg-color',\n        getSubmenuItems: function () {\n          return [{\n              type: 'fancymenuitem',\n              fancytype: 'colorswatch',\n              onAction: function (data) {\n                applyColor(editor, format, data.value, noop);\n              }\n            }];\n        }\n      });\n    };\n    var colorPickerDialog = function (editor) {\n      return function (callback, value) {\n        var isValid = false;\n        var onSubmit = function (api) {\n          var data = api.getData();\n          var hex = data.colorpicker;\n          if (isValid) {\n            callback(Optional.from(hex));\n            api.close();\n          } else {\n            editor.windowManager.alert(editor.translate([\n              'Invalid hex color code: {0}',\n              hex\n            ]));\n          }\n        };\n        var onAction = function (_api, details) {\n          if (details.name === 'hex-valid') {\n            isValid = details.value;\n          }\n        };\n        var initialData = { colorpicker: value };\n        editor.windowManager.open({\n          title: 'Color Picker',\n          size: 'normal',\n          body: {\n            type: 'panel',\n            items: [{\n                type: 'colorpicker',\n                name: 'colorpicker',\n                label: 'Color'\n              }]\n          },\n          buttons: [\n            {\n              type: 'cancel',\n              name: 'cancel',\n              text: 'Cancel'\n            },\n            {\n              type: 'submit',\n              name: 'save',\n              text: 'Save',\n              primary: true\n            }\n          ],\n          initialData: initialData,\n          onAction: onAction,\n          onSubmit: onSubmit,\n          onClose: noop,\n          onCancel: function () {\n            callback(Optional.none());\n          }\n        });\n      };\n    };\n    var register$a = function (editor) {\n      registerCommands(editor);\n      var lastForeColor = Cell(fallbackColor);\n      var lastBackColor = Cell(fallbackColor);\n      registerTextColorButton(editor, 'forecolor', 'forecolor', 'Text color', lastForeColor);\n      registerTextColorButton(editor, 'backcolor', 'hilitecolor', 'Background color', lastBackColor);\n      registerTextColorMenuItem(editor, 'forecolor', 'forecolor', 'Text color');\n      registerTextColorMenuItem(editor, 'backcolor', 'hilitecolor', 'Background color');\n    };\n\n    var createPartialChoiceMenu = function (value, items, onItemValueHandler, columns, presets, itemResponse, select, providersBackstage) {\n      var hasIcons = menuHasIcons(items);\n      var presetItemTypes = presets !== 'color' ? 'normal' : 'color';\n      var alloyItems = createChoiceItems(items, onItemValueHandler, columns, presetItemTypes, itemResponse, select, providersBackstage);\n      return createPartialMenuWithAlloyItems(value, hasIcons, alloyItems, columns, presets);\n    };\n    var createChoiceItems = function (items, onItemValueHandler, columns, itemPresets, itemResponse, select, providersBackstage) {\n      return cat(map$2(items, function (item) {\n        if (item.type === 'choiceitem') {\n          return createChoiceMenuItem(item).fold(handleError, function (d) {\n            return Optional.some(renderChoiceItem(d, columns === 1, itemPresets, onItemValueHandler, select(item.value), itemResponse, providersBackstage, menuHasIcons(items)));\n          });\n        } else {\n          return Optional.none();\n        }\n      }));\n    };\n\n    var deriveMenuMovement = function (columns, presets) {\n      var menuMarkers = markers(presets);\n      if (columns === 1) {\n        return {\n          mode: 'menu',\n          moveOnTab: true\n        };\n      } else if (columns === 'auto') {\n        return {\n          mode: 'grid',\n          selector: '.' + menuMarkers.item,\n          initSize: {\n            numColumns: 1,\n            numRows: 1\n          }\n        };\n      } else {\n        var rowClass = presets === 'color' ? 'tox-swatches__row' : 'tox-collection__group';\n        return {\n          mode: 'matrix',\n          rowSelector: '.' + rowClass\n        };\n      }\n    };\n    var deriveCollectionMovement = function (columns, presets) {\n      if (columns === 1) {\n        return {\n          mode: 'menu',\n          moveOnTab: false,\n          selector: '.tox-collection__item'\n        };\n      } else if (columns === 'auto') {\n        return {\n          mode: 'flatgrid',\n          selector: '.' + 'tox-collection__item',\n          initSize: {\n            numColumns: 1,\n            numRows: 1\n          }\n        };\n      } else {\n        return {\n          mode: 'matrix',\n          selectors: {\n            row: presets === 'color' ? '.tox-swatches__row' : '.tox-collection__group',\n            cell: presets === 'color' ? '.' + colorClass : '.' + selectableClass\n          }\n        };\n      }\n    };\n\n    var renderColorSwatchItem = function (spec, backstage) {\n      var items = getColorItems(spec, backstage);\n      var columns = backstage.colorinput.getColorCols();\n      var presets = 'color';\n      var menuSpec = createPartialChoiceMenu(generate$6('menu-value'), items, function (value) {\n        spec.onAction({ value: value });\n      }, columns, presets, ItemResponse$1.CLOSE_ON_EXECUTE, never, backstage.shared.providers);\n      var widgetSpec = __assign(__assign({}, menuSpec), {\n        markers: markers(presets),\n        movement: deriveMenuMovement(columns, presets)\n      });\n      return {\n        type: 'widget',\n        data: { value: generate$6('widget-id') },\n        dom: {\n          tag: 'div',\n          classes: ['tox-fancymenuitem']\n        },\n        autofocus: true,\n        components: [parts$f.widget(Menu.sketch(widgetSpec))]\n      };\n    };\n    var getColorItems = function (spec, backstage) {\n      var useCustomColors = spec.initData.allowCustomColors && backstage.colorinput.hasCustomColors();\n      return spec.initData.colors.fold(function () {\n        return getColors$1(backstage.colorinput.getColors(), useCustomColors);\n      }, function (colors) {\n        return colors.concat(getAdditionalColors(useCustomColors));\n      });\n    };\n\n    var cellOverEvent = generate$6('cell-over');\n    var cellExecuteEvent = generate$6('cell-execute');\n    var makeCell = function (row, col, labelId) {\n      var _a;\n      var emitCellOver = function (c) {\n        return emitWith(c, cellOverEvent, {\n          row: row,\n          col: col\n        });\n      };\n      var emitExecute = function (c) {\n        return emitWith(c, cellExecuteEvent, {\n          row: row,\n          col: col\n        });\n      };\n      var onClick = function (c, se) {\n        se.stop();\n        emitExecute(c);\n      };\n      return build$1({\n        dom: {\n          tag: 'div',\n          attributes: (_a = { role: 'button' }, _a['aria-labelledby'] = labelId, _a)\n        },\n        behaviours: derive$1([\n          config('insert-table-picker-cell', [\n            run$1(mouseover(), Focusing.focus),\n            run$1(execute$5(), emitExecute),\n            run$1(click(), onClick),\n            run$1(tap(), onClick)\n          ]),\n          Toggling.config({\n            toggleClass: 'tox-insert-table-picker__selected',\n            toggleOnExecute: false\n          }),\n          Focusing.config({ onFocus: emitCellOver })\n        ])\n      });\n    };\n    var makeCells = function (labelId, numRows, numCols) {\n      var cells = [];\n      for (var i = 0; i < numRows; i++) {\n        var row = [];\n        for (var j = 0; j < numCols; j++) {\n          row.push(makeCell(i, j, labelId));\n        }\n        cells.push(row);\n      }\n      return cells;\n    };\n    var selectCells = function (cells, selectedRow, selectedColumn, numRows, numColumns) {\n      for (var i = 0; i < numRows; i++) {\n        for (var j = 0; j < numColumns; j++) {\n          Toggling.set(cells[i][j], i <= selectedRow && j <= selectedColumn);\n        }\n      }\n    };\n    var makeComponents = function (cells) {\n      return bind$3(cells, function (cellRow) {\n        return map$2(cellRow, premade);\n      });\n    };\n    var makeLabelText = function (row, col) {\n      return text$1(col + 'x' + row);\n    };\n    var renderInsertTableMenuItem = function (spec) {\n      var numRows = 10;\n      var numColumns = 10;\n      var sizeLabelId = generate$6('size-label');\n      var cells = makeCells(sizeLabelId, numRows, numColumns);\n      var emptyLabelText = makeLabelText(0, 0);\n      var memLabel = record({\n        dom: {\n          tag: 'span',\n          classes: ['tox-insert-table-picker__label'],\n          attributes: { id: sizeLabelId }\n        },\n        components: [emptyLabelText],\n        behaviours: derive$1([Replacing.config({})])\n      });\n      return {\n        type: 'widget',\n        data: { value: generate$6('widget-id') },\n        dom: {\n          tag: 'div',\n          classes: ['tox-fancymenuitem']\n        },\n        autofocus: true,\n        components: [parts$f.widget({\n            dom: {\n              tag: 'div',\n              classes: ['tox-insert-table-picker']\n            },\n            components: makeComponents(cells).concat(memLabel.asSpec()),\n            behaviours: derive$1([\n              config('insert-table-picker', [\n                runOnAttached(function (c) {\n                  Replacing.set(memLabel.get(c), [emptyLabelText]);\n                }),\n                runWithTarget(cellOverEvent, function (c, t, e) {\n                  var _a = e.event, row = _a.row, col = _a.col;\n                  selectCells(cells, row, col, numRows, numColumns);\n                  Replacing.set(memLabel.get(c), [makeLabelText(row + 1, col + 1)]);\n                }),\n                runWithTarget(cellExecuteEvent, function (c, _, e) {\n                  var _a = e.event, row = _a.row, col = _a.col;\n                  spec.onAction({\n                    numRows: row + 1,\n                    numColumns: col + 1\n                  });\n                  emit(c, sandboxClose());\n                })\n              ]),\n              Keying.config({\n                initSize: {\n                  numRows: numRows,\n                  numColumns: numColumns\n                },\n                mode: 'flatgrid',\n                selector: '[role=\"button\"]'\n              })\n            ])\n          })]\n      };\n    };\n\n    var fancyMenuItems = {\n      inserttable: renderInsertTableMenuItem,\n      colorswatch: renderColorSwatchItem\n    };\n    var renderFancyMenuItem = function (spec, backstage) {\n      return get$e(fancyMenuItems, spec.fancytype).map(function (render) {\n        return render(spec, backstage);\n      });\n    };\n\n    var renderNestedItem = function (spec, itemResponse, providersBackstage, renderIcons, downwardsCaret) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      if (downwardsCaret === void 0) {\n        downwardsCaret = false;\n      }\n      var caret = downwardsCaret ? renderDownwardsCaret(providersBackstage.icons) : renderSubmenuCaret(providersBackstage.icons);\n      var getApi = function (component) {\n        return {\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        presets: 'normal',\n        iconContent: spec.icon,\n        textContent: spec.text,\n        htmlContent: Optional.none(),\n        ariaLabel: spec.text,\n        caret: Optional.some(caret),\n        checkMark: Optional.none(),\n        shortcutContent: spec.shortcut\n      }, providersBackstage, renderIcons);\n      return renderCommonItem({\n        data: buildData(spec),\n        getApi: getApi,\n        disabled: spec.disabled,\n        onAction: noop,\n        onSetup: spec.onSetup,\n        triggersSubmenu: true,\n        itemBehaviours: []\n      }, structure, itemResponse, providersBackstage);\n    };\n\n    var renderNormalItem = function (spec, itemResponse, providersBackstage, renderIcons) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      var getApi = function (component) {\n        return {\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        presets: 'normal',\n        iconContent: spec.icon,\n        textContent: spec.text,\n        htmlContent: Optional.none(),\n        ariaLabel: spec.text,\n        caret: Optional.none(),\n        checkMark: Optional.none(),\n        shortcutContent: spec.shortcut\n      }, providersBackstage, renderIcons);\n      return renderCommonItem({\n        data: buildData(spec),\n        getApi: getApi,\n        disabled: spec.disabled,\n        onAction: spec.onAction,\n        onSetup: spec.onSetup,\n        triggersSubmenu: false,\n        itemBehaviours: []\n      }, structure, itemResponse, providersBackstage);\n    };\n\n    var renderSeparatorItem = function (spec) {\n      var innerHtml = spec.text.fold(function () {\n        return {};\n      }, function (text) {\n        return { innerHtml: text };\n      });\n      return {\n        type: 'separator',\n        dom: __assign({\n          tag: 'div',\n          classes: [\n            selectableClass,\n            groupHeadingClass\n          ]\n        }, innerHtml),\n        components: []\n      };\n    };\n\n    var renderToggleMenuItem = function (spec, itemResponse, providersBackstage, renderIcons) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      var getApi = function (component) {\n        return {\n          setActive: function (state) {\n            Toggling.set(component, state);\n          },\n          isActive: function () {\n            return Toggling.isOn(component);\n          },\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        iconContent: spec.icon,\n        textContent: spec.text,\n        htmlContent: Optional.none(),\n        ariaLabel: spec.text,\n        checkMark: Optional.some(renderCheckmark(providersBackstage.icons)),\n        caret: Optional.none(),\n        shortcutContent: spec.shortcut,\n        presets: 'normal',\n        meta: spec.meta\n      }, providersBackstage, renderIcons);\n      return deepMerge(renderCommonItem({\n        data: buildData(spec),\n        disabled: spec.disabled,\n        getApi: getApi,\n        onAction: spec.onAction,\n        onSetup: spec.onSetup,\n        triggersSubmenu: false,\n        itemBehaviours: []\n      }, structure, itemResponse, providersBackstage), {\n        toggling: {\n          toggleClass: tickedClass,\n          toggleOnExecute: false,\n          selected: spec.active\n        }\n      });\n    };\n\n    var autocomplete = renderAutocompleteItem;\n    var separator$3 = renderSeparatorItem;\n    var normal = renderNormalItem;\n    var nested = renderNestedItem;\n    var toggle$1 = renderToggleMenuItem;\n    var fancy = renderFancyMenuItem;\n    var card = renderCardMenuItem;\n\n    var FocusMode;\n    (function (FocusMode) {\n      FocusMode[FocusMode['ContentFocus'] = 0] = 'ContentFocus';\n      FocusMode[FocusMode['UiFocus'] = 1] = 'UiFocus';\n    }(FocusMode || (FocusMode = {})));\n    var createMenuItemFromBridge = function (item, itemResponse, backstage, menuHasIcons, isHorizontalMenu) {\n      var providersBackstage = backstage.shared.providers;\n      var parseForHorizontalMenu = function (menuitem) {\n        return !isHorizontalMenu ? menuitem : __assign(__assign({}, menuitem), {\n          shortcut: Optional.none(),\n          icon: menuitem.text.isSome() ? Optional.none() : menuitem.icon\n        });\n      };\n      switch (item.type) {\n      case 'menuitem':\n        return createMenuItem(item).fold(handleError, function (d) {\n          return Optional.some(normal(parseForHorizontalMenu(d), itemResponse, providersBackstage, menuHasIcons));\n        });\n      case 'nestedmenuitem':\n        return createNestedMenuItem(item).fold(handleError, function (d) {\n          return Optional.some(nested(parseForHorizontalMenu(d), itemResponse, providersBackstage, menuHasIcons, isHorizontalMenu));\n        });\n      case 'togglemenuitem':\n        return createToggleMenuItem(item).fold(handleError, function (d) {\n          return Optional.some(toggle$1(parseForHorizontalMenu(d), itemResponse, providersBackstage, menuHasIcons));\n        });\n      case 'separator':\n        return createSeparatorMenuItem(item).fold(handleError, function (d) {\n          return Optional.some(separator$3(d));\n        });\n      case 'fancymenuitem':\n        return createFancyMenuItem(item).fold(handleError, function (d) {\n          return fancy(parseForHorizontalMenu(d), backstage);\n        });\n      default: {\n          console.error('Unknown item in general menu', item);\n          return Optional.none();\n        }\n      }\n    };\n    var createAutocompleteItems = function (items, matchText, onItemValueHandler, columns, itemResponse, sharedBackstage, highlightOn) {\n      var renderText = columns === 1;\n      var renderIcons = !renderText || menuHasIcons(items);\n      return cat(map$2(items, function (item) {\n        switch (item.type) {\n        case 'separator':\n          return createSeparatorItem(item).fold(handleError, function (d) {\n            return Optional.some(separator$3(d));\n          });\n        case 'cardmenuitem':\n          return createCardMenuItem(item).fold(handleError, function (d) {\n            return Optional.some(card(__assign(__assign({}, d), {\n              onAction: function (api) {\n                d.onAction(api);\n                onItemValueHandler(d.value, d.meta);\n              }\n            }), itemResponse, sharedBackstage, {\n              itemBehaviours: tooltipBehaviour(d.meta, sharedBackstage),\n              cardText: {\n                matchText: matchText,\n                highlightOn: highlightOn\n              }\n            }));\n          });\n        case 'autocompleteitem':\n        default:\n          return createAutocompleterItem(item).fold(handleError, function (d) {\n            return Optional.some(autocomplete(d, matchText, renderText, 'normal', onItemValueHandler, itemResponse, sharedBackstage, renderIcons));\n          });\n        }\n      }));\n    };\n    var createPartialMenu = function (value, items, itemResponse, backstage, isHorizontalMenu) {\n      var hasIcons = menuHasIcons(items);\n      var alloyItems = cat(map$2(items, function (item) {\n        var itemHasIcon = function (i) {\n          return isHorizontalMenu ? !has$2(i, 'text') : hasIcons;\n        };\n        var createItem = function (i) {\n          return createMenuItemFromBridge(i, itemResponse, backstage, itemHasIcon(i), isHorizontalMenu);\n        };\n        if (item.type === 'nestedmenuitem' && item.getSubmenuItems().length <= 0) {\n          return createItem(__assign(__assign({}, item), { disabled: true }));\n        } else {\n          return createItem(item);\n        }\n      }));\n      var createPartial = isHorizontalMenu ? createHorizontalPartialMenuWithAlloyItems : createPartialMenuWithAlloyItems;\n      return createPartial(value, hasIcons, alloyItems, 1, 'normal');\n    };\n    var createTieredDataFrom = function (partialMenu) {\n      return tieredMenu.singleData(partialMenu.value, partialMenu);\n    };\n    var createMenuFrom = function (partialMenu, columns, focusMode, presets) {\n      var focusManager = focusMode === FocusMode.ContentFocus ? highlights() : dom$2();\n      var movement = deriveMenuMovement(columns, presets);\n      var menuMarkers = markers(presets);\n      return {\n        dom: partialMenu.dom,\n        components: partialMenu.components,\n        items: partialMenu.items,\n        value: partialMenu.value,\n        markers: {\n          selectedItem: menuMarkers.selectedItem,\n          item: menuMarkers.item\n        },\n        movement: movement,\n        fakeFocus: focusMode === FocusMode.ContentFocus,\n        focusManager: focusManager,\n        menuBehaviours: SimpleBehaviours.unnamedEvents(columns !== 'auto' ? [] : [runOnAttached(function (comp, _se) {\n            detectSize(comp, 4, menuMarkers.item).each(function (_a) {\n              var numColumns = _a.numColumns, numRows = _a.numRows;\n              Keying.setGridSize(comp, numRows, numColumns);\n            });\n          })])\n      };\n    };\n\n    var register$9 = function (editor, sharedBackstage) {\n      var activeAutocompleter = value$1();\n      var processingAction = Cell(false);\n      var autocompleter = build$1(InlineView.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-autocompleter']\n        },\n        components: [],\n        fireDismissalEventInstead: {},\n        inlineBehaviours: derive$1([config('dismissAutocompleter', [run$1(dismissRequested(), function () {\n              return cancelIfNecessary();\n            })])]),\n        lazySink: sharedBackstage.getSink\n      }));\n      var isMenuOpen = function () {\n        return InlineView.isOpen(autocompleter);\n      };\n      var isActive = function () {\n        return activeAutocompleter.get().isSome();\n      };\n      var hideIfNecessary = function () {\n        if (isActive()) {\n          InlineView.hide(autocompleter);\n        }\n      };\n      var cancelIfNecessary = function () {\n        if (isActive()) {\n          var lastElement = activeAutocompleter.get().map(function (ac) {\n            return ac.element;\n          });\n          detect(lastElement.getOr(SugarElement.fromDom(editor.selection.getNode()))).each(unwrap);\n          hideIfNecessary();\n          activeAutocompleter.clear();\n          processingAction.set(false);\n        }\n      };\n      var getAutocompleters = cached(function () {\n        return register$b(editor);\n      });\n      var getCombinedItems = function (triggerChar, matches) {\n        var columns = findMap(matches, function (m) {\n          return Optional.from(m.columns);\n        }).getOr(1);\n        return bind$3(matches, function (match) {\n          var choices = match.items;\n          return createAutocompleteItems(choices, match.matchText, function (itemValue, itemMeta) {\n            var nr = editor.selection.getRng();\n            getContext(editor.dom, nr, triggerChar).fold(function () {\n              return console.error('Lost context. Cursor probably moved');\n            }, function (_a) {\n              var range = _a.range;\n              var autocompleterApi = {\n                hide: function () {\n                  cancelIfNecessary();\n                },\n                reload: function (fetchOptions) {\n                  hideIfNecessary();\n                  load(fetchOptions);\n                }\n              };\n              processingAction.set(true);\n              match.onAction(autocompleterApi, range, itemValue, itemMeta);\n              processingAction.set(false);\n            });\n          }, columns, ItemResponse$1.BUBBLE_TO_SANDBOX, sharedBackstage, match.highlightOn);\n        });\n      };\n      var commenceIfNecessary = function (context) {\n        if (!isActive()) {\n          var wrapper = create$4(editor, context.range);\n          activeAutocompleter.set({\n            triggerChar: context.triggerChar,\n            element: wrapper,\n            matchLength: context.text.length\n          });\n          processingAction.set(false);\n        }\n      };\n      var display = function (ac, context, lookupData, items) {\n        ac.matchLength = context.text.length;\n        var columns = findMap(lookupData, function (ld) {\n          return Optional.from(ld.columns);\n        }).getOr(1);\n        InlineView.showAt(autocompleter, Menu.sketch(createMenuFrom(createPartialMenuWithAlloyItems('autocompleter-value', true, items, columns, 'normal'), columns, FocusMode.ContentFocus, 'normal')), {\n          anchor: {\n            type: 'node',\n            root: SugarElement.fromDom(editor.getBody()),\n            node: Optional.from(ac.element)\n          }\n        });\n        InlineView.getContent(autocompleter).each(Highlighting.highlightFirst);\n      };\n      var doLookup = function (fetchOptions) {\n        return activeAutocompleter.get().map(function (ac) {\n          return getContext(editor.dom, editor.selection.getRng(), ac.triggerChar).bind(function (newContext) {\n            return lookupWithContext(editor, getAutocompleters, newContext, fetchOptions);\n          });\n        }).getOrThunk(function () {\n          return lookup$2(editor, getAutocompleters);\n        });\n      };\n      var load = function (fetchOptions) {\n        doLookup(fetchOptions).fold(cancelIfNecessary, function (lookupInfo) {\n          commenceIfNecessary(lookupInfo.context);\n          lookupInfo.lookupData.then(function (lookupData) {\n            activeAutocompleter.get().map(function (ac) {\n              var context = lookupInfo.context;\n              if (ac.triggerChar === context.triggerChar) {\n                var combinedItems = getCombinedItems(context.triggerChar, lookupData);\n                if (combinedItems.length > 0) {\n                  display(ac, context, lookupData, combinedItems);\n                } else if (context.text.length - ac.matchLength >= 10) {\n                  cancelIfNecessary();\n                } else {\n                  hideIfNecessary();\n                }\n              }\n            });\n          });\n        });\n      };\n      var onKeypress = last(function (e) {\n        if (e.which === 27) {\n          return;\n        }\n        load();\n      }, 50);\n      var autocompleterUiApi = {\n        onKeypress: onKeypress,\n        cancelIfNecessary: cancelIfNecessary,\n        isMenuOpen: isMenuOpen,\n        isActive: isActive,\n        isProcessingAction: processingAction.get,\n        getView: function () {\n          return InlineView.getContent(autocompleter);\n        }\n      };\n      if (editor.hasPlugin('rtc') === false) {\n        AutocompleterEditorEvents.setup(autocompleterUiApi, editor);\n      }\n    };\n    var Autocompleter = { register: register$9 };\n\n    var closest = function (scope, selector, isRoot) {\n      return closest$1(scope, selector, isRoot).isSome();\n    };\n\n    var DelayedFunction = function (fun, delay) {\n      var ref = null;\n      var schedule = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        ref = setTimeout(function () {\n          fun.apply(null, args);\n          ref = null;\n        }, delay);\n      };\n      var cancel = function () {\n        if (ref !== null) {\n          clearTimeout(ref);\n          ref = null;\n        }\n      };\n      return {\n        cancel: cancel,\n        schedule: schedule\n      };\n    };\n\n    var SIGNIFICANT_MOVE = 5;\n    var LONGPRESS_DELAY = 400;\n    var getTouch = function (event) {\n      var raw = event.raw;\n      if (raw.touches === undefined || raw.touches.length !== 1) {\n        return Optional.none();\n      }\n      return Optional.some(raw.touches[0]);\n    };\n    var isFarEnough = function (touch, data) {\n      var distX = Math.abs(touch.clientX - data.x);\n      var distY = Math.abs(touch.clientY - data.y);\n      return distX > SIGNIFICANT_MOVE || distY > SIGNIFICANT_MOVE;\n    };\n    var monitor = function (settings) {\n      var startData = value$1();\n      var longpressFired = Cell(false);\n      var longpress$1 = DelayedFunction(function (event) {\n        settings.triggerEvent(longpress(), event);\n        longpressFired.set(true);\n      }, LONGPRESS_DELAY);\n      var handleTouchstart = function (event) {\n        getTouch(event).each(function (touch) {\n          longpress$1.cancel();\n          var data = {\n            x: touch.clientX,\n            y: touch.clientY,\n            target: event.target\n          };\n          longpress$1.schedule(event);\n          longpressFired.set(false);\n          startData.set(data);\n        });\n        return Optional.none();\n      };\n      var handleTouchmove = function (event) {\n        longpress$1.cancel();\n        getTouch(event).each(function (touch) {\n          startData.on(function (data) {\n            if (isFarEnough(touch, data)) {\n              startData.clear();\n            }\n          });\n        });\n        return Optional.none();\n      };\n      var handleTouchend = function (event) {\n        longpress$1.cancel();\n        var isSame = function (data) {\n          return eq(data.target, event.target);\n        };\n        return startData.get().filter(isSame).map(function (_data) {\n          if (longpressFired.get()) {\n            event.prevent();\n            return false;\n          } else {\n            return settings.triggerEvent(tap(), event);\n          }\n        });\n      };\n      var handlers = wrapAll([\n        {\n          key: touchstart(),\n          value: handleTouchstart\n        },\n        {\n          key: touchmove(),\n          value: handleTouchmove\n        },\n        {\n          key: touchend(),\n          value: handleTouchend\n        }\n      ]);\n      var fireIfReady = function (event, type) {\n        return get$e(handlers, type).bind(function (handler) {\n          return handler(event);\n        });\n      };\n      return { fireIfReady: fireIfReady };\n    };\n\n    var isDangerous = function (event) {\n      var keyEv = event.raw;\n      return keyEv.which === BACKSPACE[0] && !contains$2([\n        'input',\n        'textarea'\n      ], name$2(event.target)) && !closest(event.target, '[contenteditable=\"true\"]');\n    };\n    var isFirefox = function () {\n      return detect$1().browser.isFirefox();\n    };\n    var bindFocus = function (container, handler) {\n      if (isFirefox()) {\n        return capture(container, 'focus', handler);\n      } else {\n        return bind(container, 'focusin', handler);\n      }\n    };\n    var bindBlur = function (container, handler) {\n      if (isFirefox()) {\n        return capture(container, 'blur', handler);\n      } else {\n        return bind(container, 'focusout', handler);\n      }\n    };\n    var setup$d = function (container, rawSettings) {\n      var settings = __assign({ stopBackspace: true }, rawSettings);\n      var pointerEvents = [\n        'touchstart',\n        'touchmove',\n        'touchend',\n        'touchcancel',\n        'gesturestart',\n        'mousedown',\n        'mouseup',\n        'mouseover',\n        'mousemove',\n        'mouseout',\n        'click'\n      ];\n      var tapEvent = monitor(settings);\n      var simpleEvents = map$2(pointerEvents.concat([\n        'selectstart',\n        'input',\n        'contextmenu',\n        'change',\n        'transitionend',\n        'transitioncancel',\n        'drag',\n        'dragstart',\n        'dragend',\n        'dragenter',\n        'dragleave',\n        'dragover',\n        'drop',\n        'keyup'\n      ]), function (type) {\n        return bind(container, type, function (event) {\n          tapEvent.fireIfReady(event, type).each(function (tapStopped) {\n            if (tapStopped) {\n              event.kill();\n            }\n          });\n          var stopped = settings.triggerEvent(type, event);\n          if (stopped) {\n            event.kill();\n          }\n        });\n      });\n      var pasteTimeout = value$1();\n      var onPaste = bind(container, 'paste', function (event) {\n        tapEvent.fireIfReady(event, 'paste').each(function (tapStopped) {\n          if (tapStopped) {\n            event.kill();\n          }\n        });\n        var stopped = settings.triggerEvent('paste', event);\n        if (stopped) {\n          event.kill();\n        }\n        pasteTimeout.set(setTimeout(function () {\n          settings.triggerEvent(postPaste(), event);\n        }, 0));\n      });\n      var onKeydown = bind(container, 'keydown', function (event) {\n        var stopped = settings.triggerEvent('keydown', event);\n        if (stopped) {\n          event.kill();\n        } else if (settings.stopBackspace && isDangerous(event)) {\n          event.prevent();\n        }\n      });\n      var onFocusIn = bindFocus(container, function (event) {\n        var stopped = settings.triggerEvent('focusin', event);\n        if (stopped) {\n          event.kill();\n        }\n      });\n      var focusoutTimeout = value$1();\n      var onFocusOut = bindBlur(container, function (event) {\n        var stopped = settings.triggerEvent('focusout', event);\n        if (stopped) {\n          event.kill();\n        }\n        focusoutTimeout.set(setTimeout(function () {\n          settings.triggerEvent(postBlur(), event);\n        }, 0));\n      });\n      var unbind = function () {\n        each$1(simpleEvents, function (e) {\n          e.unbind();\n        });\n        onKeydown.unbind();\n        onFocusIn.unbind();\n        onFocusOut.unbind();\n        onPaste.unbind();\n        pasteTimeout.on(clearTimeout);\n        focusoutTimeout.on(clearTimeout);\n      };\n      return { unbind: unbind };\n    };\n\n    var derive = function (rawEvent, rawTarget) {\n      var source = get$e(rawEvent, 'target').getOr(rawTarget);\n      return Cell(source);\n    };\n\n    var fromSource = function (event, source) {\n      var stopper = Cell(false);\n      var cutter = Cell(false);\n      var stop = function () {\n        stopper.set(true);\n      };\n      var cut = function () {\n        cutter.set(true);\n      };\n      return {\n        stop: stop,\n        cut: cut,\n        isStopped: stopper.get,\n        isCut: cutter.get,\n        event: event,\n        setSource: source.set,\n        getSource: source.get\n      };\n    };\n    var fromExternal = function (event) {\n      var stopper = Cell(false);\n      var stop = function () {\n        stopper.set(true);\n      };\n      return {\n        stop: stop,\n        cut: noop,\n        isStopped: stopper.get,\n        isCut: never,\n        event: event,\n        setSource: die('Cannot set source of a broadcasted event'),\n        getSource: die('Cannot get source of a broadcasted event')\n      };\n    };\n\n    var adt$1 = Adt.generate([\n      { stopped: [] },\n      { resume: ['element'] },\n      { complete: [] }\n    ]);\n    var doTriggerHandler = function (lookup, eventType, rawEvent, target, source, logger) {\n      var handler = lookup(eventType, target);\n      var simulatedEvent = fromSource(rawEvent, source);\n      return handler.fold(function () {\n        logger.logEventNoHandlers(eventType, target);\n        return adt$1.complete();\n      }, function (handlerInfo) {\n        var descHandler = handlerInfo.descHandler;\n        var eventHandler = getCurried(descHandler);\n        eventHandler(simulatedEvent);\n        if (simulatedEvent.isStopped()) {\n          logger.logEventStopped(eventType, handlerInfo.element, descHandler.purpose);\n          return adt$1.stopped();\n        } else if (simulatedEvent.isCut()) {\n          logger.logEventCut(eventType, handlerInfo.element, descHandler.purpose);\n          return adt$1.complete();\n        } else {\n          return parent(handlerInfo.element).fold(function () {\n            logger.logNoParent(eventType, handlerInfo.element, descHandler.purpose);\n            return adt$1.complete();\n          }, function (parent) {\n            logger.logEventResponse(eventType, handlerInfo.element, descHandler.purpose);\n            return adt$1.resume(parent);\n          });\n        }\n      });\n    };\n    var doTriggerOnUntilStopped = function (lookup, eventType, rawEvent, rawTarget, source, logger) {\n      return doTriggerHandler(lookup, eventType, rawEvent, rawTarget, source, logger).fold(always, function (parent) {\n        return doTriggerOnUntilStopped(lookup, eventType, rawEvent, parent, source, logger);\n      }, never);\n    };\n    var triggerHandler = function (lookup, eventType, rawEvent, target, logger) {\n      var source = derive(rawEvent, target);\n      return doTriggerHandler(lookup, eventType, rawEvent, target, source, logger);\n    };\n    var broadcast = function (listeners, rawEvent, _logger) {\n      var simulatedEvent = fromExternal(rawEvent);\n      each$1(listeners, function (listener) {\n        var descHandler = listener.descHandler;\n        var handler = getCurried(descHandler);\n        handler(simulatedEvent);\n      });\n      return simulatedEvent.isStopped();\n    };\n    var triggerUntilStopped = function (lookup, eventType, rawEvent, logger) {\n      return triggerOnUntilStopped(lookup, eventType, rawEvent, rawEvent.target, logger);\n    };\n    var triggerOnUntilStopped = function (lookup, eventType, rawEvent, rawTarget, logger) {\n      var source = derive(rawEvent, rawTarget);\n      return doTriggerOnUntilStopped(lookup, eventType, rawEvent, rawTarget, source, logger);\n    };\n\n    var eventHandler = function (element, descHandler) {\n      return {\n        element: element,\n        descHandler: descHandler\n      };\n    };\n    var broadcastHandler = function (id, handler) {\n      return {\n        id: id,\n        descHandler: handler\n      };\n    };\n    var EventRegistry = function () {\n      var registry = {};\n      var registerId = function (extraArgs, id, events) {\n        each(events, function (v, k) {\n          var handlers = registry[k] !== undefined ? registry[k] : {};\n          handlers[id] = curryArgs(v, extraArgs);\n          registry[k] = handlers;\n        });\n      };\n      var findHandler = function (handlers, elem) {\n        return read$1(elem).bind(function (id) {\n          return get$e(handlers, id);\n        }).map(function (descHandler) {\n          return eventHandler(elem, descHandler);\n        });\n      };\n      var filterByType = function (type) {\n        return get$e(registry, type).map(function (handlers) {\n          return mapToArray(handlers, function (f, id) {\n            return broadcastHandler(id, f);\n          });\n        }).getOr([]);\n      };\n      var find = function (isAboveRoot, type, target) {\n        return get$e(registry, type).bind(function (handlers) {\n          return closest$4(target, function (elem) {\n            return findHandler(handlers, elem);\n          }, isAboveRoot);\n        });\n      };\n      var unregisterId = function (id) {\n        each(registry, function (handlersById, _eventName) {\n          if (has$2(handlersById, id)) {\n            delete handlersById[id];\n          }\n        });\n      };\n      return {\n        registerId: registerId,\n        unregisterId: unregisterId,\n        filterByType: filterByType,\n        find: find\n      };\n    };\n\n    var Registry = function () {\n      var events = EventRegistry();\n      var components = {};\n      var readOrTag = function (component) {\n        var elem = component.element;\n        return read$1(elem).getOrThunk(function () {\n          return write('uid-', component.element);\n        });\n      };\n      var failOnDuplicate = function (component, tagId) {\n        var conflict = components[tagId];\n        if (conflict === component) {\n          unregister(component);\n        } else {\n          throw new Error('The tagId \"' + tagId + '\" is already used by: ' + element(conflict.element) + '\\nCannot use it for: ' + element(component.element) + '\\n' + 'The conflicting element is' + (inBody(conflict.element) ? ' ' : ' not ') + 'already in the DOM');\n        }\n      };\n      var register = function (component) {\n        var tagId = readOrTag(component);\n        if (hasNonNullableKey(components, tagId)) {\n          failOnDuplicate(component, tagId);\n        }\n        var extraArgs = [component];\n        events.registerId(extraArgs, tagId, component.events);\n        components[tagId] = component;\n      };\n      var unregister = function (component) {\n        read$1(component.element).each(function (tagId) {\n          delete components[tagId];\n          events.unregisterId(tagId);\n        });\n      };\n      var filter = function (type) {\n        return events.filterByType(type);\n      };\n      var find = function (isAboveRoot, type, target) {\n        return events.find(isAboveRoot, type, target);\n      };\n      var getById = function (id) {\n        return get$e(components, id);\n      };\n      return {\n        find: find,\n        filter: filter,\n        register: register,\n        unregister: unregister,\n        getById: getById\n      };\n    };\n\n    var factory$j = function (detail) {\n      var _a = detail.dom, attributes = _a.attributes, domWithoutAttributes = __rest(_a, ['attributes']);\n      return {\n        uid: detail.uid,\n        dom: __assign({\n          tag: 'div',\n          attributes: __assign({ role: 'presentation' }, attributes)\n        }, domWithoutAttributes),\n        components: detail.components,\n        behaviours: get$2(detail.containerBehaviours),\n        events: detail.events,\n        domModification: detail.domModification,\n        eventOrder: detail.eventOrder\n      };\n    };\n    var Container = single({\n      name: 'Container',\n      factory: factory$j,\n      configFields: [\n        defaulted('components', []),\n        field('containerBehaviours', []),\n        defaulted('events', {}),\n        defaulted('domModification', {}),\n        defaulted('eventOrder', {})\n      ]\n    });\n\n    var takeover = function (root) {\n      var isAboveRoot = function (el) {\n        return parent(root.element).fold(always, function (parent) {\n          return eq(el, parent);\n        });\n      };\n      var registry = Registry();\n      var lookup = function (eventName, target) {\n        return registry.find(isAboveRoot, eventName, target);\n      };\n      var domEvents = setup$d(root.element, {\n        triggerEvent: function (eventName, event) {\n          return monitorEvent(eventName, event.target, function (logger) {\n            return triggerUntilStopped(lookup, eventName, event, logger);\n          });\n        }\n      });\n      var systemApi = {\n        debugInfo: constant$1('real'),\n        triggerEvent: function (eventName, target, data) {\n          monitorEvent(eventName, target, function (logger) {\n            return triggerOnUntilStopped(lookup, eventName, data, target, logger);\n          });\n        },\n        triggerFocus: function (target, originator) {\n          read$1(target).fold(function () {\n            focus$3(target);\n          }, function (_alloyId) {\n            monitorEvent(focus$4(), target, function (logger) {\n              triggerHandler(lookup, focus$4(), {\n                originator: originator,\n                kill: noop,\n                prevent: noop,\n                target: target\n              }, target, logger);\n              return false;\n            });\n          });\n        },\n        triggerEscape: function (comp, simulatedEvent) {\n          systemApi.triggerEvent('keydown', comp.element, simulatedEvent.event);\n        },\n        getByUid: function (uid) {\n          return getByUid(uid);\n        },\n        getByDom: function (elem) {\n          return getByDom(elem);\n        },\n        build: build$1,\n        addToGui: function (c) {\n          add(c);\n        },\n        removeFromGui: function (c) {\n          remove(c);\n        },\n        addToWorld: function (c) {\n          addToWorld(c);\n        },\n        removeFromWorld: function (c) {\n          removeFromWorld(c);\n        },\n        broadcast: function (message) {\n          broadcast$1(message);\n        },\n        broadcastOn: function (channels, message) {\n          broadcastOn(channels, message);\n        },\n        broadcastEvent: function (eventName, event) {\n          broadcastEvent(eventName, event);\n        },\n        isConnected: always\n      };\n      var addToWorld = function (component) {\n        component.connect(systemApi);\n        if (!isText$1(component.element)) {\n          registry.register(component);\n          each$1(component.components(), addToWorld);\n          systemApi.triggerEvent(systemInit(), component.element, { target: component.element });\n        }\n      };\n      var removeFromWorld = function (component) {\n        if (!isText$1(component.element)) {\n          each$1(component.components(), removeFromWorld);\n          registry.unregister(component);\n        }\n        component.disconnect();\n      };\n      var add = function (component) {\n        attach(root, component);\n      };\n      var remove = function (component) {\n        detach(component);\n      };\n      var destroy = function () {\n        domEvents.unbind();\n        remove$5(root.element);\n      };\n      var broadcastData = function (data) {\n        var receivers = registry.filter(receive());\n        each$1(receivers, function (receiver) {\n          var descHandler = receiver.descHandler;\n          var handler = getCurried(descHandler);\n          handler(data);\n        });\n      };\n      var broadcast$1 = function (message) {\n        broadcastData({\n          universal: true,\n          data: message\n        });\n      };\n      var broadcastOn = function (channels, message) {\n        broadcastData({\n          universal: false,\n          channels: channels,\n          data: message\n        });\n      };\n      var broadcastEvent = function (eventName, event) {\n        var listeners = registry.filter(eventName);\n        return broadcast(listeners, event);\n      };\n      var getByUid = function (uid) {\n        return registry.getById(uid).fold(function () {\n          return Result.error(new Error('Could not find component with uid: \"' + uid + '\" in system.'));\n        }, Result.value);\n      };\n      var getByDom = function (elem) {\n        var uid = read$1(elem).getOr('not found');\n        return getByUid(uid);\n      };\n      addToWorld(root);\n      return {\n        root: root,\n        element: root.element,\n        destroy: destroy,\n        add: add,\n        remove: remove,\n        getByUid: getByUid,\n        getByDom: getByDom,\n        addToWorld: addToWorld,\n        removeFromWorld: removeFromWorld,\n        broadcast: broadcast$1,\n        broadcastOn: broadcastOn,\n        broadcastEvent: broadcastEvent\n      };\n    };\n\n    var renderBar = function (spec, backstage) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-bar',\n            'tox-form__controls-h-stack'\n          ]\n        },\n        components: map$2(spec.items, backstage.interpreter)\n      };\n    };\n\n    var schema$l = constant$1([\n      defaulted('prefix', 'form-field'),\n      field('fieldBehaviours', [\n        Composing,\n        Representing\n      ])\n    ]);\n    var parts$e = constant$1([\n      optional({\n        schema: [required$1('dom')],\n        name: 'label'\n      }),\n      optional({\n        factory: {\n          sketch: function (spec) {\n            return {\n              uid: spec.uid,\n              dom: {\n                tag: 'span',\n                styles: { display: 'none' },\n                attributes: { 'aria-hidden': 'true' },\n                innerHtml: spec.text\n              }\n            };\n          }\n        },\n        schema: [required$1('text')],\n        name: 'aria-descriptor'\n      }),\n      required({\n        factory: {\n          sketch: function (spec) {\n            var excludeFactory = exclude(spec, ['factory']);\n            return spec.factory.sketch(excludeFactory);\n          }\n        },\n        schema: [required$1('factory')],\n        name: 'field'\n      })\n    ]);\n\n    var factory$i = function (detail, components, _spec, _externals) {\n      var behaviours = augment(detail.fieldBehaviours, [\n        Composing.config({\n          find: function (container) {\n            return getPart(container, detail, 'field');\n          }\n        }),\n        Representing.config({\n          store: {\n            mode: 'manual',\n            getValue: function (field) {\n              return Composing.getCurrent(field).bind(Representing.getValue);\n            },\n            setValue: function (field, value) {\n              Composing.getCurrent(field).each(function (current) {\n                Representing.setValue(current, value);\n              });\n            }\n          }\n        })\n      ]);\n      var events = derive$2([runOnAttached(function (component, _simulatedEvent) {\n          var ps = getParts(component, detail, [\n            'label',\n            'field',\n            'aria-descriptor'\n          ]);\n          ps.field().each(function (field) {\n            var id = generate$6(detail.prefix);\n            ps.label().each(function (label) {\n              set$8(label.element, 'for', id);\n              set$8(field.element, 'id', id);\n            });\n            ps['aria-descriptor']().each(function (descriptor) {\n              var descriptorId = generate$6(detail.prefix);\n              set$8(descriptor.element, 'id', descriptorId);\n              set$8(field.element, 'aria-describedby', descriptorId);\n            });\n          });\n        })]);\n      var apis = {\n        getField: function (container) {\n          return getPart(container, detail, 'field');\n        },\n        getLabel: function (container) {\n          return getPart(container, detail, 'label');\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: behaviours,\n        events: events,\n        apis: apis\n      };\n    };\n    var FormField = composite({\n      name: 'FormField',\n      configFields: schema$l(),\n      partFields: parts$e(),\n      factory: factory$i,\n      apis: {\n        getField: function (apis, comp) {\n          return apis.getField(comp);\n        },\n        getLabel: function (apis, comp) {\n          return apis.getLabel(comp);\n        }\n      }\n    });\n\n    var exhibit$2 = function (base, tabConfig) {\n      return nu$7({\n        attributes: wrapAll([{\n            key: tabConfig.tabAttr,\n            value: 'true'\n          }])\n      });\n    };\n\n    var ActiveTabstopping = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$2\n    });\n\n    var TabstopSchema = [defaulted('tabAttr', 'data-alloy-tabstop')];\n\n    var Tabstopping = create$8({\n      fields: TabstopSchema,\n      name: 'tabstopping',\n      active: ActiveTabstopping\n    });\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.html.Entities');\n\n    var renderFormFieldWith = function (pLabel, pField, extraClasses, extraBehaviours) {\n      var spec = renderFormFieldSpecWith(pLabel, pField, extraClasses, extraBehaviours);\n      return FormField.sketch(spec);\n    };\n    var renderFormField = function (pLabel, pField) {\n      return renderFormFieldWith(pLabel, pField, [], []);\n    };\n    var renderFormFieldSpecWith = function (pLabel, pField, extraClasses, extraBehaviours) {\n      return {\n        dom: renderFormFieldDomWith(extraClasses),\n        components: pLabel.toArray().concat([pField]),\n        fieldBehaviours: derive$1(extraBehaviours)\n      };\n    };\n    var renderFormFieldDom = function () {\n      return renderFormFieldDomWith([]);\n    };\n    var renderFormFieldDomWith = function (extraClasses) {\n      return {\n        tag: 'div',\n        classes: ['tox-form__group'].concat(extraClasses)\n      };\n    };\n    var renderLabel$2 = function (label, providersBackstage) {\n      return FormField.parts.label({\n        dom: {\n          tag: 'label',\n          classes: ['tox-label'],\n          innerHtml: providersBackstage.translate(label)\n        }\n      });\n    };\n\n    var formChangeEvent = generate$6('form-component-change');\n    var formCloseEvent = generate$6('form-close');\n    var formCancelEvent = generate$6('form-cancel');\n    var formActionEvent = generate$6('form-action');\n    var formSubmitEvent = generate$6('form-submit');\n    var formBlockEvent = generate$6('form-block');\n    var formUnblockEvent = generate$6('form-unblock');\n    var formTabChangeEvent = generate$6('form-tabchange');\n    var formResizeEvent = generate$6('form-resize');\n\n    var renderCollection = function (spec, providersBackstage) {\n      var _a;\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel$2(label, providersBackstage);\n      });\n      var runOnItem = function (f) {\n        return function (comp, se) {\n          closest$1(se.event.target, '[data-collection-item-value]').each(function (target) {\n            f(comp, se, target, get$d(target, 'data-collection-item-value'));\n          });\n        };\n      };\n      var setContents = function (comp, items) {\n        var htmlLines = map$2(items, function (item) {\n          var itemText = global$e.translate(item.text);\n          var textContent = spec.columns === 1 ? '<div class=\"tox-collection__item-label\">' + itemText + '</div>' : '';\n          var iconContent = '<div class=\"tox-collection__item-icon\">' + item.icon + '</div>';\n          var mapItemName = {\n            '_': ' ',\n            ' - ': ' ',\n            '-': ' '\n          };\n          var ariaLabel = itemText.replace(/\\_| \\- |\\-/g, function (match) {\n            return mapItemName[match];\n          });\n          var disabledClass = providersBackstage.isDisabled() ? ' tox-collection__item--state-disabled' : '';\n          return '<div class=\"tox-collection__item' + disabledClass + '\" tabindex=\"-1\" data-collection-item-value=\"' + global$7.encodeAllRaw(item.value) + '\" title=\"' + ariaLabel + '\" aria-label=\"' + ariaLabel + '\">' + iconContent + textContent + '</div>';\n        });\n        var chunks = spec.columns !== 'auto' && spec.columns > 1 ? chunk$1(htmlLines, spec.columns) : [htmlLines];\n        var html = map$2(chunks, function (ch) {\n          return '<div class=\"tox-collection__group\">' + ch.join('') + '</div>';\n        });\n        set$5(comp.element, html.join(''));\n      };\n      var onClick = runOnItem(function (comp, se, tgt, itemValue) {\n        se.stop();\n        if (!providersBackstage.isDisabled()) {\n          emitWith(comp, formActionEvent, {\n            name: spec.name,\n            value: itemValue\n          });\n        }\n      });\n      var collectionEvents = [\n        run$1(mouseover(), runOnItem(function (comp, se, tgt) {\n          focus$3(tgt);\n        })),\n        run$1(click(), onClick),\n        run$1(tap(), onClick),\n        run$1(focusin(), runOnItem(function (comp, se, tgt) {\n          descendant(comp.element, '.' + activeClass).each(function (currentActive) {\n            remove$2(currentActive, activeClass);\n          });\n          add$2(tgt, activeClass);\n        })),\n        run$1(focusout(), runOnItem(function (comp) {\n          descendant(comp.element, '.' + activeClass).each(function (currentActive) {\n            remove$2(currentActive, activeClass);\n          });\n        })),\n        runOnExecute$1(runOnItem(function (comp, se, tgt, itemValue) {\n          emitWith(comp, formActionEvent, {\n            name: spec.name,\n            value: itemValue\n          });\n        }))\n      ];\n      var iterCollectionItems = function (comp, applyAttributes) {\n        return map$2(descendants(comp.element, '.tox-collection__item'), applyAttributes);\n      };\n      var pField = FormField.parts.field({\n        dom: {\n          tag: 'div',\n          classes: ['tox-collection'].concat(spec.columns !== 1 ? ['tox-collection--grid'] : ['tox-collection--list'])\n        },\n        components: [],\n        factory: { sketch: identity$1 },\n        behaviours: derive$1([\n          Disabling.config({\n            disabled: providersBackstage.isDisabled,\n            onDisabled: function (comp) {\n              iterCollectionItems(comp, function (childElm) {\n                add$2(childElm, 'tox-collection__item--state-disabled');\n                set$8(childElm, 'aria-disabled', true);\n              });\n            },\n            onEnabled: function (comp) {\n              iterCollectionItems(comp, function (childElm) {\n                remove$2(childElm, 'tox-collection__item--state-disabled');\n                remove$7(childElm, 'aria-disabled');\n              });\n            }\n          }),\n          receivingConfig(),\n          Replacing.config({}),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: []\n            },\n            onSetValue: function (comp, items) {\n              setContents(comp, items);\n              if (spec.columns === 'auto') {\n                detectSize(comp, 5, 'tox-collection__item').each(function (_a) {\n                  var numRows = _a.numRows, numColumns = _a.numColumns;\n                  Keying.setGridSize(comp, numRows, numColumns);\n                });\n              }\n              emit(comp, formResizeEvent);\n            }\n          }),\n          Tabstopping.config({}),\n          Keying.config(deriveCollectionMovement(spec.columns, 'normal')),\n          config('collection-events', collectionEvents)\n        ]),\n        eventOrder: (_a = {}, _a[execute$5()] = [\n          'disabling',\n          'alloy.base.behaviour',\n          'collection-events'\n        ], _a)\n      });\n      var extraClasses = ['tox-form__group--collection'];\n      return renderFormFieldWith(pLabel, pField, extraClasses, []);\n    };\n\n    var schema$k = constant$1([\n      option('data'),\n      defaulted('inputAttributes', {}),\n      defaulted('inputStyles', {}),\n      defaulted('tag', 'input'),\n      defaulted('inputClasses', []),\n      onHandler('onSetValue'),\n      defaulted('styles', {}),\n      defaulted('eventOrder', {}),\n      field('inputBehaviours', [\n        Representing,\n        Focusing\n      ]),\n      defaulted('selectOnFocus', true)\n    ]);\n    var focusBehaviours = function (detail) {\n      return derive$1([Focusing.config({\n          onFocus: !detail.selectOnFocus ? noop : function (component) {\n            var input = component.element;\n            var value = get$5(input);\n            input.dom.setSelectionRange(0, value.length);\n          }\n        })]);\n    };\n    var behaviours = function (detail) {\n      return __assign(__assign({}, focusBehaviours(detail)), augment(detail.inputBehaviours, [Representing.config({\n          store: __assign(__assign({ mode: 'manual' }, detail.data.map(function (data) {\n            return { initialValue: data };\n          }).getOr({})), {\n            getValue: function (input) {\n              return get$5(input.element);\n            },\n            setValue: function (input, data) {\n              var current = get$5(input.element);\n              if (current !== data) {\n                set$4(input.element, data);\n              }\n            }\n          }),\n          onSetValue: detail.onSetValue\n        })]));\n    };\n    var dom = function (detail) {\n      return {\n        tag: detail.tag,\n        attributes: __assign({ type: 'text' }, detail.inputAttributes),\n        styles: detail.inputStyles,\n        classes: detail.inputClasses\n      };\n    };\n\n    var factory$h = function (detail, _spec) {\n      return {\n        uid: detail.uid,\n        dom: dom(detail),\n        components: [],\n        behaviours: behaviours(detail),\n        eventOrder: detail.eventOrder\n      };\n    };\n    var Input = single({\n      name: 'Input',\n      configFields: schema$k(),\n      factory: factory$h\n    });\n\n    var exports$1 = {}, module = { exports: exports$1 };\n    (function (define, exports, module, require) {\n      (function (global, factory) {\n        typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() : typeof define === 'function' && define.amd ? define(factory) : (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.EphoxContactWrapper = factory());\n      }(this, function () {\n        var commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n        var promise = { exports: {} };\n        (function (module) {\n          (function (root) {\n            var setTimeoutFunc = setTimeout;\n            function noop() {\n            }\n            function bind(fn, thisArg) {\n              return function () {\n                fn.apply(thisArg, arguments);\n              };\n            }\n            function Promise(fn) {\n              if (typeof this !== 'object')\n                throw new TypeError('Promises must be constructed via new');\n              if (typeof fn !== 'function')\n                throw new TypeError('not a function');\n              this._state = 0;\n              this._handled = false;\n              this._value = undefined;\n              this._deferreds = [];\n              doResolve(fn, this);\n            }\n            function handle(self, deferred) {\n              while (self._state === 3) {\n                self = self._value;\n              }\n              if (self._state === 0) {\n                self._deferreds.push(deferred);\n                return;\n              }\n              self._handled = true;\n              Promise._immediateFn(function () {\n                var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n                if (cb === null) {\n                  (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n                  return;\n                }\n                var ret;\n                try {\n                  ret = cb(self._value);\n                } catch (e) {\n                  reject(deferred.promise, e);\n                  return;\n                }\n                resolve(deferred.promise, ret);\n              });\n            }\n            function resolve(self, newValue) {\n              try {\n                if (newValue === self)\n                  throw new TypeError('A promise cannot be resolved with itself.');\n                if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n                  var then = newValue.then;\n                  if (newValue instanceof Promise) {\n                    self._state = 3;\n                    self._value = newValue;\n                    finale(self);\n                    return;\n                  } else if (typeof then === 'function') {\n                    doResolve(bind(then, newValue), self);\n                    return;\n                  }\n                }\n                self._state = 1;\n                self._value = newValue;\n                finale(self);\n              } catch (e) {\n                reject(self, e);\n              }\n            }\n            function reject(self, newValue) {\n              self._state = 2;\n              self._value = newValue;\n              finale(self);\n            }\n            function finale(self) {\n              if (self._state === 2 && self._deferreds.length === 0) {\n                Promise._immediateFn(function () {\n                  if (!self._handled) {\n                    Promise._unhandledRejectionFn(self._value);\n                  }\n                });\n              }\n              for (var i = 0, len = self._deferreds.length; i < len; i++) {\n                handle(self, self._deferreds[i]);\n              }\n              self._deferreds = null;\n            }\n            function Handler(onFulfilled, onRejected, promise) {\n              this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n              this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n              this.promise = promise;\n            }\n            function doResolve(fn, self) {\n              var done = false;\n              try {\n                fn(function (value) {\n                  if (done)\n                    return;\n                  done = true;\n                  resolve(self, value);\n                }, function (reason) {\n                  if (done)\n                    return;\n                  done = true;\n                  reject(self, reason);\n                });\n              } catch (ex) {\n                if (done)\n                  return;\n                done = true;\n                reject(self, ex);\n              }\n            }\n            Promise.prototype['catch'] = function (onRejected) {\n              return this.then(null, onRejected);\n            };\n            Promise.prototype.then = function (onFulfilled, onRejected) {\n              var prom = new this.constructor(noop);\n              handle(this, new Handler(onFulfilled, onRejected, prom));\n              return prom;\n            };\n            Promise.all = function (arr) {\n              var args = Array.prototype.slice.call(arr);\n              return new Promise(function (resolve, reject) {\n                if (args.length === 0)\n                  return resolve([]);\n                var remaining = args.length;\n                function res(i, val) {\n                  try {\n                    if (val && (typeof val === 'object' || typeof val === 'function')) {\n                      var then = val.then;\n                      if (typeof then === 'function') {\n                        then.call(val, function (val) {\n                          res(i, val);\n                        }, reject);\n                        return;\n                      }\n                    }\n                    args[i] = val;\n                    if (--remaining === 0) {\n                      resolve(args);\n                    }\n                  } catch (ex) {\n                    reject(ex);\n                  }\n                }\n                for (var i = 0; i < args.length; i++) {\n                  res(i, args[i]);\n                }\n              });\n            };\n            Promise.resolve = function (value) {\n              if (value && typeof value === 'object' && value.constructor === Promise) {\n                return value;\n              }\n              return new Promise(function (resolve) {\n                resolve(value);\n              });\n            };\n            Promise.reject = function (value) {\n              return new Promise(function (resolve, reject) {\n                reject(value);\n              });\n            };\n            Promise.race = function (values) {\n              return new Promise(function (resolve, reject) {\n                for (var i = 0, len = values.length; i < len; i++) {\n                  values[i].then(resolve, reject);\n                }\n              });\n            };\n            Promise._immediateFn = typeof setImmediate === 'function' ? function (fn) {\n              setImmediate(fn);\n            } : function (fn) {\n              setTimeoutFunc(fn, 0);\n            };\n            Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n              if (typeof console !== 'undefined' && console) {\n                console.warn('Possible Unhandled Promise Rejection:', err);\n              }\n            };\n            Promise._setImmediateFn = function _setImmediateFn(fn) {\n              Promise._immediateFn = fn;\n            };\n            Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {\n              Promise._unhandledRejectionFn = fn;\n            };\n            if (module.exports) {\n              module.exports = Promise;\n            } else if (!root.Promise) {\n              root.Promise = Promise;\n            }\n          }(commonjsGlobal));\n        }(promise));\n        var promisePolyfill = promise.exports;\n        var Global = function () {\n          if (typeof window !== 'undefined') {\n            return window;\n          } else {\n            return Function('return this;')();\n          }\n        }();\n        var promisePolyfill_1 = { boltExport: Global.Promise || promisePolyfill };\n        return promisePolyfill_1;\n      }));\n    }(undefined, exports$1, module));\n    var Promise$1 = module.exports.boltExport;\n\n    var nu$3 = function (baseFn) {\n      var data = Optional.none();\n      var callbacks = [];\n      var map = function (f) {\n        return nu$3(function (nCallback) {\n          get(function (data) {\n            nCallback(f(data));\n          });\n        });\n      };\n      var get = function (nCallback) {\n        if (isReady()) {\n          call(nCallback);\n        } else {\n          callbacks.push(nCallback);\n        }\n      };\n      var set = function (x) {\n        if (!isReady()) {\n          data = Optional.some(x);\n          run(callbacks);\n          callbacks = [];\n        }\n      };\n      var isReady = function () {\n        return data.isSome();\n      };\n      var run = function (cbs) {\n        each$1(cbs, call);\n      };\n      var call = function (cb) {\n        data.each(function (x) {\n          setTimeout(function () {\n            cb(x);\n          }, 0);\n        });\n      };\n      baseFn(set);\n      return {\n        get: get,\n        map: map,\n        isReady: isReady\n      };\n    };\n    var pure$1 = function (a) {\n      return nu$3(function (callback) {\n        callback(a);\n      });\n    };\n    var LazyValue = {\n      nu: nu$3,\n      pure: pure$1\n    };\n\n    var errorReporter = function (err) {\n      setTimeout(function () {\n        throw err;\n      }, 0);\n    };\n    var make$5 = function (run) {\n      var get = function (callback) {\n        run().then(callback, errorReporter);\n      };\n      var map = function (fab) {\n        return make$5(function () {\n          return run().then(fab);\n        });\n      };\n      var bind = function (aFutureB) {\n        return make$5(function () {\n          return run().then(function (v) {\n            return aFutureB(v).toPromise();\n          });\n        });\n      };\n      var anonBind = function (futureB) {\n        return make$5(function () {\n          return run().then(function () {\n            return futureB.toPromise();\n          });\n        });\n      };\n      var toLazy = function () {\n        return LazyValue.nu(get);\n      };\n      var toCached = function () {\n        var cache = null;\n        return make$5(function () {\n          if (cache === null) {\n            cache = run();\n          }\n          return cache;\n        });\n      };\n      var toPromise = run;\n      return {\n        map: map,\n        bind: bind,\n        anonBind: anonBind,\n        toLazy: toLazy,\n        toCached: toCached,\n        toPromise: toPromise,\n        get: get\n      };\n    };\n    var nu$2 = function (baseFn) {\n      return make$5(function () {\n        return new Promise$1(baseFn);\n      });\n    };\n    var pure = function (a) {\n      return make$5(function () {\n        return Promise$1.resolve(a);\n      });\n    };\n    var Future = {\n      nu: nu$2,\n      pure: pure\n    };\n\n    var ariaElements = [\n      'input',\n      'textarea'\n    ];\n    var isAriaElement = function (elem) {\n      var name = name$2(elem);\n      return contains$2(ariaElements, name);\n    };\n    var markValid = function (component, invalidConfig) {\n      var elem = invalidConfig.getRoot(component).getOr(component.element);\n      remove$2(elem, invalidConfig.invalidClass);\n      invalidConfig.notify.each(function (notifyInfo) {\n        if (isAriaElement(component.element)) {\n          set$8(component.element, 'aria-invalid', false);\n        }\n        notifyInfo.getContainer(component).each(function (container) {\n          set$5(container, notifyInfo.validHtml);\n        });\n        notifyInfo.onValid(component);\n      });\n    };\n    var markInvalid = function (component, invalidConfig, invalidState, text) {\n      var elem = invalidConfig.getRoot(component).getOr(component.element);\n      add$2(elem, invalidConfig.invalidClass);\n      invalidConfig.notify.each(function (notifyInfo) {\n        if (isAriaElement(component.element)) {\n          set$8(component.element, 'aria-invalid', true);\n        }\n        notifyInfo.getContainer(component).each(function (container) {\n          set$5(container, text);\n        });\n        notifyInfo.onInvalid(component, text);\n      });\n    };\n    var query = function (component, invalidConfig, _invalidState) {\n      return invalidConfig.validator.fold(function () {\n        return Future.pure(Result.value(true));\n      }, function (validatorInfo) {\n        return validatorInfo.validate(component);\n      });\n    };\n    var run = function (component, invalidConfig, invalidState) {\n      invalidConfig.notify.each(function (notifyInfo) {\n        notifyInfo.onValidate(component);\n      });\n      return query(component, invalidConfig).map(function (valid) {\n        if (component.getSystem().isConnected()) {\n          return valid.fold(function (err) {\n            markInvalid(component, invalidConfig, invalidState, err);\n            return Result.error(err);\n          }, function (v) {\n            markValid(component, invalidConfig);\n            return Result.value(v);\n          });\n        } else {\n          return Result.error('No longer in system');\n        }\n      });\n    };\n    var isInvalid = function (component, invalidConfig) {\n      var elem = invalidConfig.getRoot(component).getOr(component.element);\n      return has(elem, invalidConfig.invalidClass);\n    };\n\n    var InvalidateApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        markValid: markValid,\n        markInvalid: markInvalid,\n        query: query,\n        run: run,\n        isInvalid: isInvalid\n    });\n\n    var events$8 = function (invalidConfig, invalidState) {\n      return invalidConfig.validator.map(function (validatorInfo) {\n        return derive$2([run$1(validatorInfo.onEvent, function (component) {\n            run(component, invalidConfig, invalidState).get(identity$1);\n          })].concat(validatorInfo.validateOnLoad ? [runOnAttached(function (component) {\n            run(component, invalidConfig, invalidState).get(noop);\n          })] : []));\n      }).getOr({});\n    };\n\n    var ActiveInvalidate = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$8\n    });\n\n    var InvalidateSchema = [\n      required$1('invalidClass'),\n      defaulted('getRoot', Optional.none),\n      optionObjOf('notify', [\n        defaulted('aria', 'alert'),\n        defaulted('getContainer', Optional.none),\n        defaulted('validHtml', ''),\n        onHandler('onValid'),\n        onHandler('onInvalid'),\n        onHandler('onValidate')\n      ]),\n      optionObjOf('validator', [\n        required$1('validate'),\n        defaulted('onEvent', 'input'),\n        defaulted('validateOnLoad', true)\n      ])\n    ];\n\n    var Invalidating = create$8({\n      fields: InvalidateSchema,\n      name: 'invalidating',\n      active: ActiveInvalidate,\n      apis: InvalidateApis,\n      extra: {\n        validation: function (validator) {\n          return function (component) {\n            var v = Representing.getValue(component);\n            return Future.pure(validator(v));\n          };\n        }\n      }\n    });\n\n    var getCoupled = function (component, coupleConfig, coupleState, name) {\n      return coupleState.getOrCreate(component, coupleConfig, name);\n    };\n\n    var CouplingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getCoupled: getCoupled\n    });\n\n    var CouplingSchema = [requiredOf('others', setOf(Result.value, anyValue()))];\n\n    var init$a = function () {\n      var coupled = {};\n      var getOrCreate = function (component, coupleConfig, name) {\n        var available = keys(coupleConfig.others);\n        if (!available) {\n          throw new Error('Cannot find coupled component: ' + name + '. Known coupled components: ' + JSON.stringify(available, null, 2));\n        } else {\n          return get$e(coupled, name).getOrThunk(function () {\n            var builder = get$e(coupleConfig.others, name).getOrDie('No information found for coupled component: ' + name);\n            var spec = builder(component);\n            var built = component.getSystem().build(spec);\n            coupled[name] = built;\n            return built;\n          });\n        }\n      };\n      var readState = constant$1({});\n      return nu$8({\n        readState: readState,\n        getOrCreate: getOrCreate\n      });\n    };\n\n    var CouplingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$a\n    });\n\n    var Coupling = create$8({\n      fields: CouplingSchema,\n      name: 'coupling',\n      apis: CouplingApis,\n      state: CouplingState\n    });\n\n    var suffix = constant$1('sink');\n    var partType$1 = constant$1(optional({\n      name: suffix(),\n      overrides: constant$1({\n        dom: { tag: 'div' },\n        behaviours: derive$1([Positioning.config({ useFixed: always })]),\n        events: derive$2([\n          cutter(keydown()),\n          cutter(mousedown()),\n          cutter(click())\n        ])\n      })\n    }));\n\n    var HighlightOnOpen;\n    (function (HighlightOnOpen) {\n      HighlightOnOpen[HighlightOnOpen['HighlightFirst'] = 0] = 'HighlightFirst';\n      HighlightOnOpen[HighlightOnOpen['HighlightNone'] = 1] = 'HighlightNone';\n    }(HighlightOnOpen || (HighlightOnOpen = {})));\n    var getAnchor = function (detail, component) {\n      var hotspot = detail.getHotspot(component).getOr(component);\n      var type = 'hotspot';\n      var overrides = detail.getAnchorOverrides();\n      return detail.layouts.fold(function () {\n        return {\n          type: type,\n          hotspot: hotspot,\n          overrides: overrides\n        };\n      }, function (layouts) {\n        return {\n          type: type,\n          hotspot: hotspot,\n          overrides: overrides,\n          layouts: layouts\n        };\n      });\n    };\n    var fetch = function (detail, mapFetch, component) {\n      var fetcher = detail.fetch;\n      return fetcher(component).map(mapFetch);\n    };\n    var openF = function (detail, mapFetch, anchor, component, sandbox, externals, highlightOnOpen) {\n      var futureData = fetch(detail, mapFetch, component);\n      var getLazySink = getSink(component, detail);\n      return futureData.map(function (tdata) {\n        return tdata.bind(function (data) {\n          return Optional.from(tieredMenu.sketch(__assign(__assign({}, externals.menu()), {\n            uid: generate$5(''),\n            data: data,\n            highlightImmediately: highlightOnOpen === HighlightOnOpen.HighlightFirst,\n            onOpenMenu: function (tmenu, menu) {\n              var sink = getLazySink().getOrDie();\n              Positioning.position(sink, menu, { anchor: anchor });\n              Sandboxing.decloak(sandbox);\n            },\n            onOpenSubmenu: function (tmenu, item, submenu) {\n              var sink = getLazySink().getOrDie();\n              Positioning.position(sink, submenu, {\n                anchor: {\n                  type: 'submenu',\n                  item: item\n                }\n              });\n              Sandboxing.decloak(sandbox);\n            },\n            onRepositionMenu: function (tmenu, primaryMenu, submenuTriggers) {\n              var sink = getLazySink().getOrDie();\n              Positioning.position(sink, primaryMenu, { anchor: anchor });\n              each$1(submenuTriggers, function (st) {\n                Positioning.position(sink, st.triggeredMenu, {\n                  anchor: {\n                    type: 'submenu',\n                    item: st.triggeringItem\n                  }\n                });\n              });\n            },\n            onEscape: function () {\n              Focusing.focus(component);\n              Sandboxing.close(sandbox);\n              return Optional.some(true);\n            }\n          })));\n        });\n      });\n    };\n    var open = function (detail, mapFetch, hotspot, sandbox, externals, onOpenSync, highlightOnOpen) {\n      var anchor = getAnchor(detail, hotspot);\n      var processed = openF(detail, mapFetch, anchor, hotspot, sandbox, externals, highlightOnOpen);\n      return processed.map(function (tdata) {\n        tdata.fold(function () {\n          if (Sandboxing.isOpen(sandbox)) {\n            Sandboxing.close(sandbox);\n          }\n        }, function (data) {\n          Sandboxing.cloak(sandbox);\n          Sandboxing.open(sandbox, data);\n          onOpenSync(sandbox);\n        });\n        return sandbox;\n      });\n    };\n    var close = function (detail, mapFetch, component, sandbox, _externals, _onOpenSync, _highlightOnOpen) {\n      Sandboxing.close(sandbox);\n      return Future.pure(sandbox);\n    };\n    var togglePopup = function (detail, mapFetch, hotspot, externals, onOpenSync, highlightOnOpen) {\n      var sandbox = Coupling.getCoupled(hotspot, 'sandbox');\n      var showing = Sandboxing.isOpen(sandbox);\n      var action = showing ? close : open;\n      return action(detail, mapFetch, hotspot, sandbox, externals, onOpenSync, highlightOnOpen);\n    };\n    var matchWidth = function (hotspot, container, useMinWidth) {\n      var menu = Composing.getCurrent(container).getOr(container);\n      var buttonWidth = get$a(hotspot.element);\n      if (useMinWidth) {\n        set$7(menu.element, 'min-width', buttonWidth + 'px');\n      } else {\n        set$6(menu.element, buttonWidth);\n      }\n    };\n    var getSink = function (anyInSystem, sinkDetail) {\n      return anyInSystem.getSystem().getByUid(sinkDetail.uid + '-' + suffix()).map(function (internalSink) {\n        return function () {\n          return Result.value(internalSink);\n        };\n      }).getOrThunk(function () {\n        return sinkDetail.lazySink.fold(function () {\n          return function () {\n            return Result.error(new Error('No internal sink is specified, nor could an external sink be found'));\n          };\n        }, function (lazySinkFn) {\n          return function () {\n            return lazySinkFn(anyInSystem);\n          };\n        });\n      });\n    };\n    var doRepositionMenus = function (sandbox) {\n      Sandboxing.getState(sandbox).each(function (tmenu) {\n        tieredMenu.repositionMenus(tmenu);\n      });\n    };\n    var makeSandbox$1 = function (detail, hotspot, extras) {\n      var ariaOwner = manager();\n      var onOpen = function (component, menu) {\n        var anchor = getAnchor(detail, hotspot);\n        ariaOwner.link(hotspot.element);\n        if (detail.matchWidth) {\n          matchWidth(anchor.hotspot, menu, detail.useMinWidth);\n        }\n        detail.onOpen(anchor, component, menu);\n        if (extras !== undefined && extras.onOpen !== undefined) {\n          extras.onOpen(component, menu);\n        }\n      };\n      var onClose = function (component, menu) {\n        ariaOwner.unlink(hotspot.element);\n        if (extras !== undefined && extras.onClose !== undefined) {\n          extras.onClose(component, menu);\n        }\n      };\n      var lazySink = getSink(hotspot, detail);\n      return {\n        dom: {\n          tag: 'div',\n          classes: detail.sandboxClasses,\n          attributes: {\n            id: ariaOwner.id,\n            role: 'listbox'\n          }\n        },\n        behaviours: SketchBehaviours.augment(detail.sandboxBehaviours, [\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: hotspot\n            }\n          }),\n          Sandboxing.config({\n            onOpen: onOpen,\n            onClose: onClose,\n            isPartOf: function (container, data, queryElem) {\n              return isPartOf$1(data, queryElem) || isPartOf$1(hotspot, queryElem);\n            },\n            getAttachPoint: function () {\n              return lazySink().getOrDie();\n            }\n          }),\n          Composing.config({\n            find: function (sandbox) {\n              return Sandboxing.getState(sandbox).bind(function (menu) {\n                return Composing.getCurrent(menu);\n              });\n            }\n          }),\n          Receiving.config({ channels: __assign(__assign({}, receivingChannel$1({ isExtraPart: never })), receivingChannel({ doReposition: doRepositionMenus })) })\n        ])\n      };\n    };\n    var repositionMenus = function (comp) {\n      var sandbox = Coupling.getCoupled(comp, 'sandbox');\n      doRepositionMenus(sandbox);\n    };\n\n    var sandboxFields = function () {\n      return [\n        defaulted('sandboxClasses', []),\n        SketchBehaviours.field('sandboxBehaviours', [\n          Composing,\n          Receiving,\n          Sandboxing,\n          Representing\n        ])\n      ];\n    };\n\n    var schema$j = constant$1([\n      required$1('dom'),\n      required$1('fetch'),\n      onHandler('onOpen'),\n      onKeyboardHandler('onExecute'),\n      defaulted('getHotspot', Optional.some),\n      defaulted('getAnchorOverrides', constant$1({})),\n      schema$y(),\n      field('dropdownBehaviours', [\n        Toggling,\n        Coupling,\n        Keying,\n        Focusing\n      ]),\n      required$1('toggleClass'),\n      defaulted('eventOrder', {}),\n      option('lazySink'),\n      defaulted('matchWidth', false),\n      defaulted('useMinWidth', false),\n      option('role')\n    ].concat(sandboxFields()));\n    var parts$d = constant$1([\n      external$1({\n        schema: [tieredMenuMarkers()],\n        name: 'menu',\n        defaults: function (detail) {\n          return { onExecute: detail.onExecute };\n        }\n      }),\n      partType$1()\n    ]);\n\n    var factory$g = function (detail, components, _spec, externals) {\n      var _a;\n      var lookupAttr = function (attr) {\n        return get$e(detail.dom, 'attributes').bind(function (attrs) {\n          return get$e(attrs, attr);\n        });\n      };\n      var switchToMenu = function (sandbox) {\n        Sandboxing.getState(sandbox).each(function (tmenu) {\n          tieredMenu.highlightPrimary(tmenu);\n        });\n      };\n      var action = function (component) {\n        var onOpenSync = switchToMenu;\n        togglePopup(detail, identity$1, component, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n      };\n      var apis = {\n        expand: function (comp) {\n          if (!Toggling.isOn(comp)) {\n            togglePopup(detail, identity$1, comp, externals, noop, HighlightOnOpen.HighlightNone).get(noop);\n          }\n        },\n        open: function (comp) {\n          if (!Toggling.isOn(comp)) {\n            togglePopup(detail, identity$1, comp, externals, noop, HighlightOnOpen.HighlightFirst).get(noop);\n          }\n        },\n        isOpen: Toggling.isOn,\n        close: function (comp) {\n          if (Toggling.isOn(comp)) {\n            togglePopup(detail, identity$1, comp, externals, noop, HighlightOnOpen.HighlightFirst).get(noop);\n          }\n        },\n        repositionMenus: function (comp) {\n          if (Toggling.isOn(comp)) {\n            repositionMenus(comp);\n          }\n        }\n      };\n      var triggerExecute = function (comp, _se) {\n        emitExecute(comp);\n        return Optional.some(true);\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.dropdownBehaviours, [\n          Toggling.config({\n            toggleClass: detail.toggleClass,\n            aria: { mode: 'expanded' }\n          }),\n          Coupling.config({\n            others: {\n              sandbox: function (hotspot) {\n                return makeSandbox$1(detail, hotspot, {\n                  onOpen: function () {\n                    return Toggling.on(hotspot);\n                  },\n                  onClose: function () {\n                    return Toggling.off(hotspot);\n                  }\n                });\n              }\n            }\n          }),\n          Keying.config({\n            mode: 'special',\n            onSpace: triggerExecute,\n            onEnter: triggerExecute,\n            onDown: function (comp, _se) {\n              if (Dropdown.isOpen(comp)) {\n                var sandbox = Coupling.getCoupled(comp, 'sandbox');\n                switchToMenu(sandbox);\n              } else {\n                Dropdown.open(comp);\n              }\n              return Optional.some(true);\n            },\n            onEscape: function (comp, _se) {\n              if (Dropdown.isOpen(comp)) {\n                Dropdown.close(comp);\n                return Optional.some(true);\n              } else {\n                return Optional.none();\n              }\n            }\n          }),\n          Focusing.config({})\n        ]),\n        events: events$a(Optional.some(action)),\n        eventOrder: __assign(__assign({}, detail.eventOrder), (_a = {}, _a[execute$5()] = [\n          'disabling',\n          'toggling',\n          'alloy.base.behaviour'\n        ], _a)),\n        apis: apis,\n        domModification: {\n          attributes: __assign(__assign({ 'aria-haspopup': 'true' }, detail.role.fold(function () {\n            return {};\n          }, function (role) {\n            return { role: role };\n          })), detail.dom.tag === 'button' ? { type: lookupAttr('type').getOr('button') } : {})\n        }\n      };\n    };\n    var Dropdown = composite({\n      name: 'Dropdown',\n      configFields: schema$j(),\n      partFields: parts$d(),\n      factory: factory$g,\n      apis: {\n        open: function (apis, comp) {\n          return apis.open(comp);\n        },\n        expand: function (apis, comp) {\n          return apis.expand(comp);\n        },\n        close: function (apis, comp) {\n          return apis.close(comp);\n        },\n        isOpen: function (apis, comp) {\n          return apis.isOpen(comp);\n        },\n        repositionMenus: function (apis, comp) {\n          return apis.repositionMenus(comp);\n        }\n      }\n    });\n\n    var exhibit$1 = function () {\n      return nu$7({\n        styles: {\n          '-webkit-user-select': 'none',\n          'user-select': 'none',\n          '-ms-user-select': 'none',\n          '-moz-user-select': '-moz-none'\n        },\n        attributes: { unselectable: 'on' }\n      });\n    };\n    var events$7 = function () {\n      return derive$2([abort(selectstart(), always)]);\n    };\n\n    var ActiveUnselecting = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$7,\n        exhibit: exhibit$1\n    });\n\n    var Unselecting = create$8({\n      fields: [],\n      name: 'unselecting',\n      active: ActiveUnselecting\n    });\n\n    var renderPanelButton = function (spec, sharedBackstage) {\n      return Dropdown.sketch({\n        dom: spec.dom,\n        components: spec.components,\n        toggleClass: 'mce-active',\n        dropdownBehaviours: derive$1([\n          DisablingConfigs.button(sharedBackstage.providers.isDisabled),\n          receivingConfig(),\n          Unselecting.config({}),\n          Tabstopping.config({})\n        ]),\n        layouts: spec.layouts,\n        sandboxClasses: ['tox-dialog__popups'],\n        lazySink: sharedBackstage.getSink,\n        fetch: function (comp) {\n          return Future.nu(function (callback) {\n            return spec.fetch(callback);\n          }).map(function (items) {\n            return Optional.from(createTieredDataFrom(deepMerge(createPartialChoiceMenu(generate$6('menu-value'), items, function (value) {\n              spec.onItemAction(comp, value);\n            }, spec.columns, spec.presets, ItemResponse$1.CLOSE_ON_EXECUTE, never, sharedBackstage.providers), { movement: deriveMenuMovement(spec.columns, spec.presets) })));\n          });\n        },\n        parts: { menu: part(false, 1, spec.presets) }\n      });\n    };\n\n    var colorInputChangeEvent = generate$6('color-input-change');\n    var colorSwatchChangeEvent = generate$6('color-swatch-change');\n    var colorPickerCancelEvent = generate$6('color-picker-cancel');\n    var renderColorInput = function (spec, sharedBackstage, colorInputBackstage) {\n      var pField = FormField.parts.field({\n        factory: Input,\n        inputClasses: ['tox-textfield'],\n        onSetValue: function (c) {\n          return Invalidating.run(c).get(noop);\n        },\n        inputBehaviours: derive$1([\n          Disabling.config({ disabled: sharedBackstage.providers.isDisabled }),\n          receivingConfig(),\n          Tabstopping.config({}),\n          Invalidating.config({\n            invalidClass: 'tox-textbox-field-invalid',\n            getRoot: function (comp) {\n              return parent(comp.element);\n            },\n            notify: {\n              onValid: function (comp) {\n                var val = Representing.getValue(comp);\n                emitWith(comp, colorInputChangeEvent, { color: val });\n              }\n            },\n            validator: {\n              validateOnLoad: false,\n              validate: function (input) {\n                var inputValue = Representing.getValue(input);\n                if (inputValue.length === 0) {\n                  return Future.pure(Result.value(true));\n                } else {\n                  var span = SugarElement.fromTag('span');\n                  set$7(span, 'background-color', inputValue);\n                  var res = getRaw(span, 'background-color').fold(function () {\n                    return Result.error('blah');\n                  }, function (_) {\n                    return Result.value(inputValue);\n                  });\n                  return Future.pure(res);\n                }\n              }\n            }\n          })\n        ]),\n        selectOnFocus: false\n      });\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel$2(label, sharedBackstage.providers);\n      });\n      var emitSwatchChange = function (colorBit, value) {\n        emitWith(colorBit, colorSwatchChangeEvent, { value: value });\n      };\n      var onItemAction = function (comp, value) {\n        memColorButton.getOpt(comp).each(function (colorBit) {\n          if (value === 'custom') {\n            colorInputBackstage.colorPicker(function (valueOpt) {\n              valueOpt.fold(function () {\n                return emit(colorBit, colorPickerCancelEvent);\n              }, function (value) {\n                emitSwatchChange(colorBit, value);\n                addColor(value);\n              });\n            }, '#ffffff');\n          } else if (value === 'remove') {\n            emitSwatchChange(colorBit, '');\n          } else {\n            emitSwatchChange(colorBit, value);\n          }\n        });\n      };\n      var memColorButton = record(renderPanelButton({\n        dom: {\n          tag: 'span',\n          attributes: { 'aria-label': sharedBackstage.providers.translate('Color swatch') }\n        },\n        layouts: {\n          onRtl: function () {\n            return [\n              southwest$2,\n              southeast$2,\n              south$2\n            ];\n          },\n          onLtr: function () {\n            return [\n              southeast$2,\n              southwest$2,\n              south$2\n            ];\n          }\n        },\n        components: [],\n        fetch: getFetch$1(colorInputBackstage.getColors(), colorInputBackstage.hasCustomColors()),\n        columns: colorInputBackstage.getColorCols(),\n        presets: 'color',\n        onItemAction: onItemAction\n      }, sharedBackstage));\n      return FormField.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: pLabel.toArray().concat([{\n            dom: {\n              tag: 'div',\n              classes: ['tox-color-input']\n            },\n            components: [\n              pField,\n              memColorButton.asSpec()\n            ]\n          }]),\n        fieldBehaviours: derive$1([config('form-field-events', [\n            run$1(colorInputChangeEvent, function (comp, se) {\n              memColorButton.getOpt(comp).each(function (colorButton) {\n                set$7(colorButton.element, 'background-color', se.event.color);\n              });\n              emitWith(comp, formChangeEvent, { name: spec.name });\n            }),\n            run$1(colorSwatchChangeEvent, function (comp, se) {\n              FormField.getField(comp).each(function (field) {\n                Representing.setValue(field, se.event.value);\n                Composing.getCurrent(comp).each(Focusing.focus);\n              });\n            }),\n            run$1(colorPickerCancelEvent, function (comp, _se) {\n              FormField.getField(comp).each(function (_field) {\n                Composing.getCurrent(comp).each(Focusing.focus);\n              });\n            })\n          ])])\n      });\n    };\n\n    var labelPart = optional({\n      schema: [required$1('dom')],\n      name: 'label'\n    });\n    var edgePart = function (name) {\n      return optional({\n        name: '' + name + '-edge',\n        overrides: function (detail) {\n          var action = detail.model.manager.edgeActions[name];\n          return action.fold(function () {\n            return {};\n          }, function (a) {\n            return {\n              events: derive$2([\n                runActionExtra(touchstart(), function (comp, se, d) {\n                  return a(comp, d);\n                }, [detail]),\n                runActionExtra(mousedown(), function (comp, se, d) {\n                  return a(comp, d);\n                }, [detail]),\n                runActionExtra(mousemove(), function (comp, se, det) {\n                  if (det.mouseIsDown.get()) {\n                    a(comp, det);\n                  }\n                }, [detail])\n              ])\n            };\n          });\n        }\n      });\n    };\n    var tlEdgePart = edgePart('top-left');\n    var tedgePart = edgePart('top');\n    var trEdgePart = edgePart('top-right');\n    var redgePart = edgePart('right');\n    var brEdgePart = edgePart('bottom-right');\n    var bedgePart = edgePart('bottom');\n    var blEdgePart = edgePart('bottom-left');\n    var ledgePart = edgePart('left');\n    var thumbPart = required({\n      name: 'thumb',\n      defaults: constant$1({ dom: { styles: { position: 'absolute' } } }),\n      overrides: function (detail) {\n        return {\n          events: derive$2([\n            redirectToPart(touchstart(), detail, 'spectrum'),\n            redirectToPart(touchmove(), detail, 'spectrum'),\n            redirectToPart(touchend(), detail, 'spectrum'),\n            redirectToPart(mousedown(), detail, 'spectrum'),\n            redirectToPart(mousemove(), detail, 'spectrum'),\n            redirectToPart(mouseup(), detail, 'spectrum')\n          ])\n        };\n      }\n    });\n    var spectrumPart = required({\n      schema: [customField('mouseIsDown', function () {\n          return Cell(false);\n        })],\n      name: 'spectrum',\n      overrides: function (detail) {\n        var modelDetail = detail.model;\n        var model = modelDetail.manager;\n        var setValueFrom = function (component, simulatedEvent) {\n          return model.getValueFromEvent(simulatedEvent).map(function (value) {\n            return model.setValueFrom(component, detail, value);\n          });\n        };\n        return {\n          behaviours: derive$1([\n            Keying.config({\n              mode: 'special',\n              onLeft: function (spectrum) {\n                return model.onLeft(spectrum, detail);\n              },\n              onRight: function (spectrum) {\n                return model.onRight(spectrum, detail);\n              },\n              onUp: function (spectrum) {\n                return model.onUp(spectrum, detail);\n              },\n              onDown: function (spectrum) {\n                return model.onDown(spectrum, detail);\n              }\n            }),\n            Focusing.config({})\n          ]),\n          events: derive$2([\n            run$1(touchstart(), setValueFrom),\n            run$1(touchmove(), setValueFrom),\n            run$1(mousedown(), setValueFrom),\n            run$1(mousemove(), function (spectrum, se) {\n              if (detail.mouseIsDown.get()) {\n                setValueFrom(spectrum, se);\n              }\n            })\n          ])\n        };\n      }\n    });\n    var SliderParts = [\n      labelPart,\n      ledgePart,\n      redgePart,\n      tedgePart,\n      bedgePart,\n      tlEdgePart,\n      trEdgePart,\n      blEdgePart,\n      brEdgePart,\n      thumbPart,\n      spectrumPart\n    ];\n\n    var _sliderChangeEvent = 'slider.change.value';\n    var sliderChangeEvent = constant$1(_sliderChangeEvent);\n    var isTouchEvent$2 = function (evt) {\n      return evt.type.indexOf('touch') !== -1;\n    };\n    var getEventSource = function (simulatedEvent) {\n      var evt = simulatedEvent.event.raw;\n      if (isTouchEvent$2(evt)) {\n        var touchEvent = evt;\n        return touchEvent.touches !== undefined && touchEvent.touches.length === 1 ? Optional.some(touchEvent.touches[0]).map(function (t) {\n          return SugarPosition(t.clientX, t.clientY);\n        }) : Optional.none();\n      } else {\n        var mouseEvent = evt;\n        return mouseEvent.clientX !== undefined ? Optional.some(mouseEvent).map(function (me) {\n          return SugarPosition(me.clientX, me.clientY);\n        }) : Optional.none();\n      }\n    };\n\n    var t = 'top', r = 'right', b = 'bottom', l = 'left';\n    var minX = function (detail) {\n      return detail.model.minX;\n    };\n    var minY = function (detail) {\n      return detail.model.minY;\n    };\n    var min1X = function (detail) {\n      return detail.model.minX - 1;\n    };\n    var min1Y = function (detail) {\n      return detail.model.minY - 1;\n    };\n    var maxX = function (detail) {\n      return detail.model.maxX;\n    };\n    var maxY = function (detail) {\n      return detail.model.maxY;\n    };\n    var max1X = function (detail) {\n      return detail.model.maxX + 1;\n    };\n    var max1Y = function (detail) {\n      return detail.model.maxY + 1;\n    };\n    var range = function (detail, max, min) {\n      return max(detail) - min(detail);\n    };\n    var xRange = function (detail) {\n      return range(detail, maxX, minX);\n    };\n    var yRange = function (detail) {\n      return range(detail, maxY, minY);\n    };\n    var halfX = function (detail) {\n      return xRange(detail) / 2;\n    };\n    var halfY = function (detail) {\n      return yRange(detail) / 2;\n    };\n    var step = function (detail) {\n      return detail.stepSize;\n    };\n    var snap = function (detail) {\n      return detail.snapToGrid;\n    };\n    var snapStart = function (detail) {\n      return detail.snapStart;\n    };\n    var rounded = function (detail) {\n      return detail.rounded;\n    };\n    var hasEdge = function (detail, edgeName) {\n      return detail[edgeName + '-edge'] !== undefined;\n    };\n    var hasLEdge = function (detail) {\n      return hasEdge(detail, l);\n    };\n    var hasREdge = function (detail) {\n      return hasEdge(detail, r);\n    };\n    var hasTEdge = function (detail) {\n      return hasEdge(detail, t);\n    };\n    var hasBEdge = function (detail) {\n      return hasEdge(detail, b);\n    };\n    var currentValue = function (detail) {\n      return detail.model.value.get();\n    };\n\n    var xValue = function (x) {\n      return { x: x };\n    };\n    var yValue = function (y) {\n      return { y: y };\n    };\n    var xyValue = function (x, y) {\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var fireSliderChange$3 = function (component, value) {\n      emitWith(component, sliderChangeEvent(), { value: value });\n    };\n    var setToTLEdgeXY = function (edge, detail) {\n      fireSliderChange$3(edge, xyValue(min1X(detail), min1Y(detail)));\n    };\n    var setToTEdge = function (edge, detail) {\n      fireSliderChange$3(edge, yValue(min1Y(detail)));\n    };\n    var setToTEdgeXY = function (edge, detail) {\n      fireSliderChange$3(edge, xyValue(halfX(detail), min1Y(detail)));\n    };\n    var setToTREdgeXY = function (edge, detail) {\n      fireSliderChange$3(edge, xyValue(max1X(detail), min1Y(detail)));\n    };\n    var setToREdge = function (edge, detail) {\n      fireSliderChange$3(edge, xValue(max1X(detail)));\n    };\n    var setToREdgeXY = function (edge, detail) {\n      fireSliderChange$3(edge, xyValue(max1X(detail), halfY(detail)));\n    };\n    var setToBREdgeXY = function (edge, detail) {\n      fireSliderChange$3(edge, xyValue(max1X(detail), max1Y(detail)));\n    };\n    var setToBEdge = function (edge, detail) {\n      fireSliderChange$3(edge, yValue(max1Y(detail)));\n    };\n    var setToBEdgeXY = function (edge, detail) {\n      fireSliderChange$3(edge, xyValue(halfX(detail), max1Y(detail)));\n    };\n    var setToBLEdgeXY = function (edge, detail) {\n      fireSliderChange$3(edge, xyValue(min1X(detail), max1Y(detail)));\n    };\n    var setToLEdge = function (edge, detail) {\n      fireSliderChange$3(edge, xValue(min1X(detail)));\n    };\n    var setToLEdgeXY = function (edge, detail) {\n      fireSliderChange$3(edge, xyValue(min1X(detail), halfY(detail)));\n    };\n\n    var reduceBy = function (value, min, max, step) {\n      if (value < min) {\n        return value;\n      } else if (value > max) {\n        return max;\n      } else if (value === min) {\n        return min - 1;\n      } else {\n        return Math.max(min, value - step);\n      }\n    };\n    var increaseBy = function (value, min, max, step) {\n      if (value > max) {\n        return value;\n      } else if (value < min) {\n        return min;\n      } else if (value === max) {\n        return max + 1;\n      } else {\n        return Math.min(max, value + step);\n      }\n    };\n    var capValue = function (value, min, max) {\n      return Math.max(min, Math.min(max, value));\n    };\n    var snapValueOf = function (value, min, max, step, snapStart) {\n      return snapStart.fold(function () {\n        var initValue = value - min;\n        var extraValue = Math.round(initValue / step) * step;\n        return capValue(min + extraValue, min - 1, max + 1);\n      }, function (start) {\n        var remainder = (value - start) % step;\n        var adjustment = Math.round(remainder / step);\n        var rawSteps = Math.floor((value - start) / step);\n        var maxSteps = Math.floor((max - start) / step);\n        var numSteps = Math.min(maxSteps, rawSteps + adjustment);\n        var r = start + numSteps * step;\n        return Math.max(start, r);\n      });\n    };\n    var findOffsetOf = function (value, min, max) {\n      return Math.min(max, Math.max(value, min)) - min;\n    };\n    var findValueOf = function (args) {\n      var min = args.min, max = args.max, range = args.range, value = args.value, step = args.step, snap = args.snap, snapStart = args.snapStart, rounded = args.rounded, hasMinEdge = args.hasMinEdge, hasMaxEdge = args.hasMaxEdge, minBound = args.minBound, maxBound = args.maxBound, screenRange = args.screenRange;\n      var capMin = hasMinEdge ? min - 1 : min;\n      var capMax = hasMaxEdge ? max + 1 : max;\n      if (value < minBound) {\n        return capMin;\n      } else if (value > maxBound) {\n        return capMax;\n      } else {\n        var offset = findOffsetOf(value, minBound, maxBound);\n        var newValue = capValue(offset / screenRange * range + min, capMin, capMax);\n        if (snap && newValue >= min && newValue <= max) {\n          return snapValueOf(newValue, min, max, step, snapStart);\n        } else if (rounded) {\n          return Math.round(newValue);\n        } else {\n          return newValue;\n        }\n      }\n    };\n    var findOffsetOfValue$2 = function (args) {\n      var min = args.min, max = args.max, range = args.range, value = args.value, hasMinEdge = args.hasMinEdge, hasMaxEdge = args.hasMaxEdge, maxBound = args.maxBound, maxOffset = args.maxOffset, centerMinEdge = args.centerMinEdge, centerMaxEdge = args.centerMaxEdge;\n      if (value < min) {\n        return hasMinEdge ? 0 : centerMinEdge;\n      } else if (value > max) {\n        return hasMaxEdge ? maxBound : centerMaxEdge;\n      } else {\n        return (value - min) / range * maxOffset;\n      }\n    };\n\n    var top = 'top', right = 'right', bottom = 'bottom', left = 'left', width = 'width', height = 'height';\n    var getBounds = function (component) {\n      return component.element.dom.getBoundingClientRect();\n    };\n    var getBoundsProperty = function (bounds, property) {\n      return bounds[property];\n    };\n    var getMinXBounds = function (component) {\n      var bounds = getBounds(component);\n      return getBoundsProperty(bounds, left);\n    };\n    var getMaxXBounds = function (component) {\n      var bounds = getBounds(component);\n      return getBoundsProperty(bounds, right);\n    };\n    var getMinYBounds = function (component) {\n      var bounds = getBounds(component);\n      return getBoundsProperty(bounds, top);\n    };\n    var getMaxYBounds = function (component) {\n      var bounds = getBounds(component);\n      return getBoundsProperty(bounds, bottom);\n    };\n    var getXScreenRange = function (component) {\n      var bounds = getBounds(component);\n      return getBoundsProperty(bounds, width);\n    };\n    var getYScreenRange = function (component) {\n      var bounds = getBounds(component);\n      return getBoundsProperty(bounds, height);\n    };\n    var getCenterOffsetOf = function (componentMinEdge, componentMaxEdge, spectrumMinEdge) {\n      return (componentMinEdge + componentMaxEdge) / 2 - spectrumMinEdge;\n    };\n    var getXCenterOffSetOf = function (component, spectrum) {\n      var componentBounds = getBounds(component);\n      var spectrumBounds = getBounds(spectrum);\n      var componentMinEdge = getBoundsProperty(componentBounds, left);\n      var componentMaxEdge = getBoundsProperty(componentBounds, right);\n      var spectrumMinEdge = getBoundsProperty(spectrumBounds, left);\n      return getCenterOffsetOf(componentMinEdge, componentMaxEdge, spectrumMinEdge);\n    };\n    var getYCenterOffSetOf = function (component, spectrum) {\n      var componentBounds = getBounds(component);\n      var spectrumBounds = getBounds(spectrum);\n      var componentMinEdge = getBoundsProperty(componentBounds, top);\n      var componentMaxEdge = getBoundsProperty(componentBounds, bottom);\n      var spectrumMinEdge = getBoundsProperty(spectrumBounds, top);\n      return getCenterOffsetOf(componentMinEdge, componentMaxEdge, spectrumMinEdge);\n    };\n\n    var fireSliderChange$2 = function (spectrum, value) {\n      emitWith(spectrum, sliderChangeEvent(), { value: value });\n    };\n    var sliderValue$2 = function (x) {\n      return { x: x };\n    };\n    var findValueOfOffset$1 = function (spectrum, detail, left) {\n      var args = {\n        min: minX(detail),\n        max: maxX(detail),\n        range: xRange(detail),\n        value: left,\n        step: step(detail),\n        snap: snap(detail),\n        snapStart: snapStart(detail),\n        rounded: rounded(detail),\n        hasMinEdge: hasLEdge(detail),\n        hasMaxEdge: hasREdge(detail),\n        minBound: getMinXBounds(spectrum),\n        maxBound: getMaxXBounds(spectrum),\n        screenRange: getXScreenRange(spectrum)\n      };\n      return findValueOf(args);\n    };\n    var setValueFrom$2 = function (spectrum, detail, value) {\n      var xValue = findValueOfOffset$1(spectrum, detail, value);\n      var sliderVal = sliderValue$2(xValue);\n      fireSliderChange$2(spectrum, sliderVal);\n      return xValue;\n    };\n    var setToMin$2 = function (spectrum, detail) {\n      var min = minX(detail);\n      fireSliderChange$2(spectrum, sliderValue$2(min));\n    };\n    var setToMax$2 = function (spectrum, detail) {\n      var max = maxX(detail);\n      fireSliderChange$2(spectrum, sliderValue$2(max));\n    };\n    var moveBy$2 = function (direction, spectrum, detail) {\n      var f = direction > 0 ? increaseBy : reduceBy;\n      var xValue = f(currentValue(detail).x, minX(detail), maxX(detail), step(detail));\n      fireSliderChange$2(spectrum, sliderValue$2(xValue));\n      return Optional.some(xValue);\n    };\n    var handleMovement$2 = function (direction) {\n      return function (spectrum, detail) {\n        return moveBy$2(direction, spectrum, detail).map(always);\n      };\n    };\n    var getValueFromEvent$2 = function (simulatedEvent) {\n      var pos = getEventSource(simulatedEvent);\n      return pos.map(function (p) {\n        return p.left;\n      });\n    };\n    var findOffsetOfValue$1 = function (spectrum, detail, value, minEdge, maxEdge) {\n      var minOffset = 0;\n      var maxOffset = getXScreenRange(spectrum);\n      var centerMinEdge = minEdge.bind(function (edge) {\n        return Optional.some(getXCenterOffSetOf(edge, spectrum));\n      }).getOr(minOffset);\n      var centerMaxEdge = maxEdge.bind(function (edge) {\n        return Optional.some(getXCenterOffSetOf(edge, spectrum));\n      }).getOr(maxOffset);\n      var args = {\n        min: minX(detail),\n        max: maxX(detail),\n        range: xRange(detail),\n        value: value,\n        hasMinEdge: hasLEdge(detail),\n        hasMaxEdge: hasREdge(detail),\n        minBound: getMinXBounds(spectrum),\n        minOffset: minOffset,\n        maxBound: getMaxXBounds(spectrum),\n        maxOffset: maxOffset,\n        centerMinEdge: centerMinEdge,\n        centerMaxEdge: centerMaxEdge\n      };\n      return findOffsetOfValue$2(args);\n    };\n    var findPositionOfValue$1 = function (slider, spectrum, value, minEdge, maxEdge, detail) {\n      var offset = findOffsetOfValue$1(spectrum, detail, value, minEdge, maxEdge);\n      return getMinXBounds(spectrum) - getMinXBounds(slider) + offset;\n    };\n    var setPositionFromValue$2 = function (slider, thumb, detail, edges) {\n      var value = currentValue(detail);\n      var pos = findPositionOfValue$1(slider, edges.getSpectrum(slider), value.x, edges.getLeftEdge(slider), edges.getRightEdge(slider), detail);\n      var thumbRadius = get$a(thumb.element) / 2;\n      set$7(thumb.element, 'left', pos - thumbRadius + 'px');\n    };\n    var onLeft$2 = handleMovement$2(-1);\n    var onRight$2 = handleMovement$2(1);\n    var onUp$2 = Optional.none;\n    var onDown$2 = Optional.none;\n    var edgeActions$2 = {\n      'top-left': Optional.none(),\n      'top': Optional.none(),\n      'top-right': Optional.none(),\n      'right': Optional.some(setToREdge),\n      'bottom-right': Optional.none(),\n      'bottom': Optional.none(),\n      'bottom-left': Optional.none(),\n      'left': Optional.some(setToLEdge)\n    };\n\n    var HorizontalModel = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setValueFrom: setValueFrom$2,\n        setToMin: setToMin$2,\n        setToMax: setToMax$2,\n        findValueOfOffset: findValueOfOffset$1,\n        getValueFromEvent: getValueFromEvent$2,\n        findPositionOfValue: findPositionOfValue$1,\n        setPositionFromValue: setPositionFromValue$2,\n        onLeft: onLeft$2,\n        onRight: onRight$2,\n        onUp: onUp$2,\n        onDown: onDown$2,\n        edgeActions: edgeActions$2\n    });\n\n    var fireSliderChange$1 = function (spectrum, value) {\n      emitWith(spectrum, sliderChangeEvent(), { value: value });\n    };\n    var sliderValue$1 = function (y) {\n      return { y: y };\n    };\n    var findValueOfOffset = function (spectrum, detail, top) {\n      var args = {\n        min: minY(detail),\n        max: maxY(detail),\n        range: yRange(detail),\n        value: top,\n        step: step(detail),\n        snap: snap(detail),\n        snapStart: snapStart(detail),\n        rounded: rounded(detail),\n        hasMinEdge: hasTEdge(detail),\n        hasMaxEdge: hasBEdge(detail),\n        minBound: getMinYBounds(spectrum),\n        maxBound: getMaxYBounds(spectrum),\n        screenRange: getYScreenRange(spectrum)\n      };\n      return findValueOf(args);\n    };\n    var setValueFrom$1 = function (spectrum, detail, value) {\n      var yValue = findValueOfOffset(spectrum, detail, value);\n      var sliderVal = sliderValue$1(yValue);\n      fireSliderChange$1(spectrum, sliderVal);\n      return yValue;\n    };\n    var setToMin$1 = function (spectrum, detail) {\n      var min = minY(detail);\n      fireSliderChange$1(spectrum, sliderValue$1(min));\n    };\n    var setToMax$1 = function (spectrum, detail) {\n      var max = maxY(detail);\n      fireSliderChange$1(spectrum, sliderValue$1(max));\n    };\n    var moveBy$1 = function (direction, spectrum, detail) {\n      var f = direction > 0 ? increaseBy : reduceBy;\n      var yValue = f(currentValue(detail).y, minY(detail), maxY(detail), step(detail));\n      fireSliderChange$1(spectrum, sliderValue$1(yValue));\n      return Optional.some(yValue);\n    };\n    var handleMovement$1 = function (direction) {\n      return function (spectrum, detail) {\n        return moveBy$1(direction, spectrum, detail).map(always);\n      };\n    };\n    var getValueFromEvent$1 = function (simulatedEvent) {\n      var pos = getEventSource(simulatedEvent);\n      return pos.map(function (p) {\n        return p.top;\n      });\n    };\n    var findOffsetOfValue = function (spectrum, detail, value, minEdge, maxEdge) {\n      var minOffset = 0;\n      var maxOffset = getYScreenRange(spectrum);\n      var centerMinEdge = minEdge.bind(function (edge) {\n        return Optional.some(getYCenterOffSetOf(edge, spectrum));\n      }).getOr(minOffset);\n      var centerMaxEdge = maxEdge.bind(function (edge) {\n        return Optional.some(getYCenterOffSetOf(edge, spectrum));\n      }).getOr(maxOffset);\n      var args = {\n        min: minY(detail),\n        max: maxY(detail),\n        range: yRange(detail),\n        value: value,\n        hasMinEdge: hasTEdge(detail),\n        hasMaxEdge: hasBEdge(detail),\n        minBound: getMinYBounds(spectrum),\n        minOffset: minOffset,\n        maxBound: getMaxYBounds(spectrum),\n        maxOffset: maxOffset,\n        centerMinEdge: centerMinEdge,\n        centerMaxEdge: centerMaxEdge\n      };\n      return findOffsetOfValue$2(args);\n    };\n    var findPositionOfValue = function (slider, spectrum, value, minEdge, maxEdge, detail) {\n      var offset = findOffsetOfValue(spectrum, detail, value, minEdge, maxEdge);\n      return getMinYBounds(spectrum) - getMinYBounds(slider) + offset;\n    };\n    var setPositionFromValue$1 = function (slider, thumb, detail, edges) {\n      var value = currentValue(detail);\n      var pos = findPositionOfValue(slider, edges.getSpectrum(slider), value.y, edges.getTopEdge(slider), edges.getBottomEdge(slider), detail);\n      var thumbRadius = get$b(thumb.element) / 2;\n      set$7(thumb.element, 'top', pos - thumbRadius + 'px');\n    };\n    var onLeft$1 = Optional.none;\n    var onRight$1 = Optional.none;\n    var onUp$1 = handleMovement$1(-1);\n    var onDown$1 = handleMovement$1(1);\n    var edgeActions$1 = {\n      'top-left': Optional.none(),\n      'top': Optional.some(setToTEdge),\n      'top-right': Optional.none(),\n      'right': Optional.none(),\n      'bottom-right': Optional.none(),\n      'bottom': Optional.some(setToBEdge),\n      'bottom-left': Optional.none(),\n      'left': Optional.none()\n    };\n\n    var VerticalModel = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setValueFrom: setValueFrom$1,\n        setToMin: setToMin$1,\n        setToMax: setToMax$1,\n        findValueOfOffset: findValueOfOffset,\n        getValueFromEvent: getValueFromEvent$1,\n        findPositionOfValue: findPositionOfValue,\n        setPositionFromValue: setPositionFromValue$1,\n        onLeft: onLeft$1,\n        onRight: onRight$1,\n        onUp: onUp$1,\n        onDown: onDown$1,\n        edgeActions: edgeActions$1\n    });\n\n    var fireSliderChange = function (spectrum, value) {\n      emitWith(spectrum, sliderChangeEvent(), { value: value });\n    };\n    var sliderValue = function (x, y) {\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var setValueFrom = function (spectrum, detail, value) {\n      var xValue = findValueOfOffset$1(spectrum, detail, value.left);\n      var yValue = findValueOfOffset(spectrum, detail, value.top);\n      var val = sliderValue(xValue, yValue);\n      fireSliderChange(spectrum, val);\n      return val;\n    };\n    var moveBy = function (direction, isVerticalMovement, spectrum, detail) {\n      var f = direction > 0 ? increaseBy : reduceBy;\n      var xValue = isVerticalMovement ? currentValue(detail).x : f(currentValue(detail).x, minX(detail), maxX(detail), step(detail));\n      var yValue = !isVerticalMovement ? currentValue(detail).y : f(currentValue(detail).y, minY(detail), maxY(detail), step(detail));\n      fireSliderChange(spectrum, sliderValue(xValue, yValue));\n      return Optional.some(xValue);\n    };\n    var handleMovement = function (direction, isVerticalMovement) {\n      return function (spectrum, detail) {\n        return moveBy(direction, isVerticalMovement, spectrum, detail).map(always);\n      };\n    };\n    var setToMin = function (spectrum, detail) {\n      var mX = minX(detail);\n      var mY = minY(detail);\n      fireSliderChange(spectrum, sliderValue(mX, mY));\n    };\n    var setToMax = function (spectrum, detail) {\n      var mX = maxX(detail);\n      var mY = maxY(detail);\n      fireSliderChange(spectrum, sliderValue(mX, mY));\n    };\n    var getValueFromEvent = function (simulatedEvent) {\n      return getEventSource(simulatedEvent);\n    };\n    var setPositionFromValue = function (slider, thumb, detail, edges) {\n      var value = currentValue(detail);\n      var xPos = findPositionOfValue$1(slider, edges.getSpectrum(slider), value.x, edges.getLeftEdge(slider), edges.getRightEdge(slider), detail);\n      var yPos = findPositionOfValue(slider, edges.getSpectrum(slider), value.y, edges.getTopEdge(slider), edges.getBottomEdge(slider), detail);\n      var thumbXRadius = get$a(thumb.element) / 2;\n      var thumbYRadius = get$b(thumb.element) / 2;\n      set$7(thumb.element, 'left', xPos - thumbXRadius + 'px');\n      set$7(thumb.element, 'top', yPos - thumbYRadius + 'px');\n    };\n    var onLeft = handleMovement(-1, false);\n    var onRight = handleMovement(1, false);\n    var onUp = handleMovement(-1, true);\n    var onDown = handleMovement(1, true);\n    var edgeActions = {\n      'top-left': Optional.some(setToTLEdgeXY),\n      'top': Optional.some(setToTEdgeXY),\n      'top-right': Optional.some(setToTREdgeXY),\n      'right': Optional.some(setToREdgeXY),\n      'bottom-right': Optional.some(setToBREdgeXY),\n      'bottom': Optional.some(setToBEdgeXY),\n      'bottom-left': Optional.some(setToBLEdgeXY),\n      'left': Optional.some(setToLEdgeXY)\n    };\n\n    var TwoDModel = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setValueFrom: setValueFrom,\n        setToMin: setToMin,\n        setToMax: setToMax,\n        getValueFromEvent: getValueFromEvent,\n        setPositionFromValue: setPositionFromValue,\n        onLeft: onLeft,\n        onRight: onRight,\n        onUp: onUp,\n        onDown: onDown,\n        edgeActions: edgeActions\n    });\n\n    var SliderSchema = [\n      defaulted('stepSize', 1),\n      defaulted('onChange', noop),\n      defaulted('onChoose', noop),\n      defaulted('onInit', noop),\n      defaulted('onDragStart', noop),\n      defaulted('onDragEnd', noop),\n      defaulted('snapToGrid', false),\n      defaulted('rounded', true),\n      option('snapStart'),\n      requiredOf('model', choose$1('mode', {\n        x: [\n          defaulted('minX', 0),\n          defaulted('maxX', 100),\n          customField('value', function (spec) {\n            return Cell(spec.mode.minX);\n          }),\n          required$1('getInitialValue'),\n          output$1('manager', HorizontalModel)\n        ],\n        y: [\n          defaulted('minY', 0),\n          defaulted('maxY', 100),\n          customField('value', function (spec) {\n            return Cell(spec.mode.minY);\n          }),\n          required$1('getInitialValue'),\n          output$1('manager', VerticalModel)\n        ],\n        xy: [\n          defaulted('minX', 0),\n          defaulted('maxX', 100),\n          defaulted('minY', 0),\n          defaulted('maxY', 100),\n          customField('value', function (spec) {\n            return Cell({\n              x: spec.mode.minX,\n              y: spec.mode.minY\n            });\n          }),\n          required$1('getInitialValue'),\n          output$1('manager', TwoDModel)\n        ]\n      })),\n      field('sliderBehaviours', [\n        Keying,\n        Representing\n      ]),\n      customField('mouseIsDown', function () {\n        return Cell(false);\n      })\n    ];\n\n    var sketch$2 = function (detail, components, _spec, _externals) {\n      var _a;\n      var getThumb = function (component) {\n        return getPartOrDie(component, detail, 'thumb');\n      };\n      var getSpectrum = function (component) {\n        return getPartOrDie(component, detail, 'spectrum');\n      };\n      var getLeftEdge = function (component) {\n        return getPart(component, detail, 'left-edge');\n      };\n      var getRightEdge = function (component) {\n        return getPart(component, detail, 'right-edge');\n      };\n      var getTopEdge = function (component) {\n        return getPart(component, detail, 'top-edge');\n      };\n      var getBottomEdge = function (component) {\n        return getPart(component, detail, 'bottom-edge');\n      };\n      var modelDetail = detail.model;\n      var model = modelDetail.manager;\n      var refresh = function (slider, thumb) {\n        model.setPositionFromValue(slider, thumb, detail, {\n          getLeftEdge: getLeftEdge,\n          getRightEdge: getRightEdge,\n          getTopEdge: getTopEdge,\n          getBottomEdge: getBottomEdge,\n          getSpectrum: getSpectrum\n        });\n      };\n      var setValue = function (slider, newValue) {\n        modelDetail.value.set(newValue);\n        var thumb = getThumb(slider);\n        refresh(slider, thumb);\n      };\n      var changeValue = function (slider, newValue) {\n        setValue(slider, newValue);\n        var thumb = getThumb(slider);\n        detail.onChange(slider, thumb, newValue);\n        return Optional.some(true);\n      };\n      var resetToMin = function (slider) {\n        model.setToMin(slider, detail);\n      };\n      var resetToMax = function (slider) {\n        model.setToMax(slider, detail);\n      };\n      var choose = function (slider) {\n        var fireOnChoose = function () {\n          getPart(slider, detail, 'thumb').each(function (thumb) {\n            var value = modelDetail.value.get();\n            detail.onChoose(slider, thumb, value);\n          });\n        };\n        var wasDown = detail.mouseIsDown.get();\n        detail.mouseIsDown.set(false);\n        if (wasDown) {\n          fireOnChoose();\n        }\n      };\n      var onDragStart = function (slider, simulatedEvent) {\n        simulatedEvent.stop();\n        detail.mouseIsDown.set(true);\n        detail.onDragStart(slider, getThumb(slider));\n      };\n      var onDragEnd = function (slider, simulatedEvent) {\n        simulatedEvent.stop();\n        detail.onDragEnd(slider, getThumb(slider));\n        choose(slider);\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.sliderBehaviours, [\n          Keying.config({\n            mode: 'special',\n            focusIn: function (slider) {\n              return getPart(slider, detail, 'spectrum').map(Keying.focusIn).map(always);\n            }\n          }),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (_) {\n                return modelDetail.value.get();\n              }\n            }\n          }),\n          Receiving.config({ channels: (_a = {}, _a[mouseReleased()] = { onReceive: choose }, _a) })\n        ]),\n        events: derive$2([\n          run$1(sliderChangeEvent(), function (slider, simulatedEvent) {\n            changeValue(slider, simulatedEvent.event.value);\n          }),\n          runOnAttached(function (slider, _simulatedEvent) {\n            var getInitial = modelDetail.getInitialValue();\n            modelDetail.value.set(getInitial);\n            var thumb = getThumb(slider);\n            refresh(slider, thumb);\n            var spectrum = getSpectrum(slider);\n            detail.onInit(slider, thumb, spectrum, modelDetail.value.get());\n          }),\n          run$1(touchstart(), onDragStart),\n          run$1(touchend(), onDragEnd),\n          run$1(mousedown(), onDragStart),\n          run$1(mouseup(), onDragEnd)\n        ]),\n        apis: {\n          resetToMin: resetToMin,\n          resetToMax: resetToMax,\n          setValue: setValue,\n          refresh: refresh\n        },\n        domModification: { styles: { position: 'relative' } }\n      };\n    };\n\n    var Slider = composite({\n      name: 'Slider',\n      configFields: SliderSchema,\n      partFields: SliderParts,\n      factory: sketch$2,\n      apis: {\n        setValue: function (apis, slider, value) {\n          apis.setValue(slider, value);\n        },\n        resetToMin: function (apis, slider) {\n          apis.resetToMin(slider);\n        },\n        resetToMax: function (apis, slider) {\n          apis.resetToMax(slider);\n        },\n        refresh: function (apis, slider) {\n          apis.refresh(slider);\n        }\n      }\n    });\n\n    var fieldsUpdate = generate$6('rgb-hex-update');\n    var sliderUpdate = generate$6('slider-update');\n    var paletteUpdate = generate$6('palette-update');\n\n    var sliderFactory = function (translate, getClass) {\n      var spectrum = Slider.parts.spectrum({\n        dom: {\n          tag: 'div',\n          classes: [getClass('hue-slider-spectrum')],\n          attributes: { role: 'presentation' }\n        }\n      });\n      var thumb = Slider.parts.thumb({\n        dom: {\n          tag: 'div',\n          classes: [getClass('hue-slider-thumb')],\n          attributes: { role: 'presentation' }\n        }\n      });\n      return Slider.sketch({\n        dom: {\n          tag: 'div',\n          classes: [getClass('hue-slider')],\n          attributes: { role: 'presentation' }\n        },\n        rounded: false,\n        model: {\n          mode: 'y',\n          getInitialValue: constant$1({ y: 0 })\n        },\n        components: [\n          spectrum,\n          thumb\n        ],\n        sliderBehaviours: derive$1([Focusing.config({})]),\n        onChange: function (slider, _thumb, value) {\n          emitWith(slider, sliderUpdate, { value: value });\n        }\n      });\n    };\n\n    var owner$1 = 'form';\n    var schema$i = [field('formBehaviours', [Representing])];\n    var getPartName$1 = function (name) {\n      return '<alloy.field.' + name + '>';\n    };\n    var sketch$1 = function (fSpec) {\n      var parts = function () {\n        var record = [];\n        var field = function (name, config) {\n          record.push(name);\n          return generateOne$1(owner$1, getPartName$1(name), config);\n        };\n        return {\n          field: field,\n          record: constant$1(record)\n        };\n      }();\n      var spec = fSpec(parts);\n      var partNames = parts.record();\n      var fieldParts = map$2(partNames, function (n) {\n        return required({\n          name: n,\n          pname: getPartName$1(n)\n        });\n      });\n      return composite$1(owner$1, schema$i, fieldParts, make$4, spec);\n    };\n    var toResult = function (o, e) {\n      return o.fold(function () {\n        return Result.error(e);\n      }, Result.value);\n    };\n    var make$4 = function (detail, components) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.formBehaviours, [Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (form) {\n                var resPs = getAllParts(form, detail);\n                return map$1(resPs, function (resPThunk, pName) {\n                  return resPThunk().bind(function (v) {\n                    var opt = Composing.getCurrent(v);\n                    return toResult(opt, new Error('Cannot find a current component to extract the value from for form part \\'' + pName + '\\': ' + element(v.element)));\n                  }).map(Representing.getValue);\n                });\n              },\n              setValue: function (form, values) {\n                each(values, function (newValue, key) {\n                  getPart(form, detail, key).each(function (wrapper) {\n                    Composing.getCurrent(wrapper).each(function (field) {\n                      Representing.setValue(field, newValue);\n                    });\n                  });\n                });\n              }\n            }\n          })]),\n        apis: {\n          getField: function (form, key) {\n            return getPart(form, detail, key).bind(Composing.getCurrent);\n          }\n        }\n      };\n    };\n    var Form = {\n      getField: makeApi(function (apis, component, key) {\n        return apis.getField(component, key);\n      }),\n      sketch: sketch$1\n    };\n\n    var validInput = generate$6('valid-input');\n    var invalidInput = generate$6('invalid-input');\n    var validatingInput = generate$6('validating-input');\n    var translatePrefix = 'colorcustom.rgb.';\n    var rgbFormFactory = function (translate, getClass, onValidHexx, onInvalidHexx) {\n      var invalidation = function (label, isValid) {\n        return Invalidating.config({\n          invalidClass: getClass('invalid'),\n          notify: {\n            onValidate: function (comp) {\n              emitWith(comp, validatingInput, { type: label });\n            },\n            onValid: function (comp) {\n              emitWith(comp, validInput, {\n                type: label,\n                value: Representing.getValue(comp)\n              });\n            },\n            onInvalid: function (comp) {\n              emitWith(comp, invalidInput, {\n                type: label,\n                value: Representing.getValue(comp)\n              });\n            }\n          },\n          validator: {\n            validate: function (comp) {\n              var value = Representing.getValue(comp);\n              var res = isValid(value) ? Result.value(true) : Result.error(translate('aria.input.invalid'));\n              return Future.pure(res);\n            },\n            validateOnLoad: false\n          }\n        });\n      };\n      var renderTextField = function (isValid, name, label, description, data) {\n        var helptext = translate(translatePrefix + 'range');\n        var pLabel = FormField.parts.label({\n          dom: {\n            tag: 'label',\n            innerHtml: label,\n            attributes: { 'aria-label': description }\n          }\n        });\n        var pField = FormField.parts.field({\n          data: data,\n          factory: Input,\n          inputAttributes: __assign({ type: 'text' }, name === 'hex' ? { 'aria-live': 'polite' } : {}),\n          inputClasses: [getClass('textfield')],\n          inputBehaviours: derive$1([\n            invalidation(name, isValid),\n            Tabstopping.config({})\n          ]),\n          onSetValue: function (input) {\n            if (Invalidating.isInvalid(input)) {\n              var run = Invalidating.run(input);\n              run.get(noop);\n            }\n          }\n        });\n        var comps = [\n          pLabel,\n          pField\n        ];\n        var concats = name !== 'hex' ? [FormField.parts['aria-descriptor']({ text: helptext })] : [];\n        var components = comps.concat(concats);\n        return {\n          dom: {\n            tag: 'div',\n            attributes: { role: 'presentation' }\n          },\n          components: components\n        };\n      };\n      var copyRgbToHex = function (form, rgba) {\n        var hex = fromRgba(rgba);\n        Form.getField(form, 'hex').each(function (hexField) {\n          if (!Focusing.isFocused(hexField)) {\n            Representing.setValue(form, { hex: hex.value });\n          }\n        });\n        return hex;\n      };\n      var copyRgbToForm = function (form, rgb) {\n        var red = rgb.red;\n        var green = rgb.green;\n        var blue = rgb.blue;\n        Representing.setValue(form, {\n          red: red,\n          green: green,\n          blue: blue\n        });\n      };\n      var memPreview = record({\n        dom: {\n          tag: 'div',\n          classes: [getClass('rgba-preview')],\n          styles: { 'background-color': 'white' },\n          attributes: { role: 'presentation' }\n        }\n      });\n      var updatePreview = function (anyInSystem, hex) {\n        memPreview.getOpt(anyInSystem).each(function (preview) {\n          set$7(preview.element, 'background-color', '#' + hex.value);\n        });\n      };\n      var factory = function () {\n        var state = {\n          red: Cell(Optional.some(255)),\n          green: Cell(Optional.some(255)),\n          blue: Cell(Optional.some(255)),\n          hex: Cell(Optional.some('ffffff'))\n        };\n        var copyHexToRgb = function (form, hex) {\n          var rgb = fromHex(hex);\n          copyRgbToForm(form, rgb);\n          setValueRgb(rgb);\n        };\n        var get = function (prop) {\n          return state[prop].get();\n        };\n        var set = function (prop, value) {\n          state[prop].set(value);\n        };\n        var getValueRgb = function () {\n          return get('red').bind(function (red) {\n            return get('green').bind(function (green) {\n              return get('blue').map(function (blue) {\n                return rgbaColour(red, green, blue, 1);\n              });\n            });\n          });\n        };\n        var setValueRgb = function (rgb) {\n          var red = rgb.red;\n          var green = rgb.green;\n          var blue = rgb.blue;\n          set('red', Optional.some(red));\n          set('green', Optional.some(green));\n          set('blue', Optional.some(blue));\n        };\n        var onInvalidInput = function (form, simulatedEvent) {\n          var data = simulatedEvent.event;\n          if (data.type !== 'hex') {\n            set(data.type, Optional.none());\n          } else {\n            onInvalidHexx(form);\n          }\n        };\n        var onValidHex = function (form, value) {\n          onValidHexx(form);\n          var hex = hexColour(value);\n          set('hex', Optional.some(value));\n          var rgb = fromHex(hex);\n          copyRgbToForm(form, rgb);\n          setValueRgb(rgb);\n          emitWith(form, fieldsUpdate, { hex: hex });\n          updatePreview(form, hex);\n        };\n        var onValidRgb = function (form, prop, value) {\n          var val = parseInt(value, 10);\n          set(prop, Optional.some(val));\n          getValueRgb().each(function (rgb) {\n            var hex = copyRgbToHex(form, rgb);\n            emitWith(form, fieldsUpdate, { hex: hex });\n            updatePreview(form, hex);\n          });\n        };\n        var isHexInputEvent = function (data) {\n          return data.type === 'hex';\n        };\n        var onValidInput = function (form, simulatedEvent) {\n          var data = simulatedEvent.event;\n          if (isHexInputEvent(data)) {\n            onValidHex(form, data.value);\n          } else {\n            onValidRgb(form, data.type, data.value);\n          }\n        };\n        var formPartStrings = function (key) {\n          return {\n            label: translate(translatePrefix + key + '.label'),\n            description: translate(translatePrefix + key + '.description')\n          };\n        };\n        var redStrings = formPartStrings('red');\n        var greenStrings = formPartStrings('green');\n        var blueStrings = formPartStrings('blue');\n        var hexStrings = formPartStrings('hex');\n        return deepMerge(Form.sketch(function (parts) {\n          return {\n            dom: {\n              tag: 'form',\n              classes: [getClass('rgb-form')],\n              attributes: { 'aria-label': translate('aria.color.picker') }\n            },\n            components: [\n              parts.field('red', FormField.sketch(renderTextField(isRgbaComponent, 'red', redStrings.label, redStrings.description, 255))),\n              parts.field('green', FormField.sketch(renderTextField(isRgbaComponent, 'green', greenStrings.label, greenStrings.description, 255))),\n              parts.field('blue', FormField.sketch(renderTextField(isRgbaComponent, 'blue', blueStrings.label, blueStrings.description, 255))),\n              parts.field('hex', FormField.sketch(renderTextField(isHexString, 'hex', hexStrings.label, hexStrings.description, 'ffffff'))),\n              memPreview.asSpec()\n            ],\n            formBehaviours: derive$1([\n              Invalidating.config({ invalidClass: getClass('form-invalid') }),\n              config('rgb-form-events', [\n                run$1(validInput, onValidInput),\n                run$1(invalidInput, onInvalidInput),\n                run$1(validatingInput, onInvalidInput)\n              ])\n            ])\n          };\n        }), {\n          apis: {\n            updateHex: function (form, hex) {\n              Representing.setValue(form, { hex: hex.value });\n              copyHexToRgb(form, hex);\n              updatePreview(form, hex);\n            }\n          }\n        });\n      };\n      var rgbFormSketcher = single({\n        factory: factory,\n        name: 'RgbForm',\n        configFields: [],\n        apis: {\n          updateHex: function (apis, form, hex) {\n            apis.updateHex(form, hex);\n          }\n        },\n        extraApis: {}\n      });\n      return rgbFormSketcher;\n    };\n\n    var paletteFactory = function (_translate, getClass) {\n      var spectrumPart = Slider.parts.spectrum({\n        dom: {\n          tag: 'canvas',\n          attributes: { role: 'presentation' },\n          classes: [getClass('sv-palette-spectrum')]\n        }\n      });\n      var thumbPart = Slider.parts.thumb({\n        dom: {\n          tag: 'div',\n          attributes: { role: 'presentation' },\n          classes: [getClass('sv-palette-thumb')],\n          innerHtml: '<div class=' + getClass('sv-palette-inner-thumb') + ' role=\"presentation\"></div>'\n        }\n      });\n      var setColour = function (canvas, rgba) {\n        var width = canvas.width, height = canvas.height;\n        var ctx = canvas.getContext('2d');\n        if (ctx === null) {\n          return;\n        }\n        ctx.fillStyle = rgba;\n        ctx.fillRect(0, 0, width, height);\n        var grdWhite = ctx.createLinearGradient(0, 0, width, 0);\n        grdWhite.addColorStop(0, 'rgba(255,255,255,1)');\n        grdWhite.addColorStop(1, 'rgba(255,255,255,0)');\n        ctx.fillStyle = grdWhite;\n        ctx.fillRect(0, 0, width, height);\n        var grdBlack = ctx.createLinearGradient(0, 0, 0, height);\n        grdBlack.addColorStop(0, 'rgba(0,0,0,0)');\n        grdBlack.addColorStop(1, 'rgba(0,0,0,1)');\n        ctx.fillStyle = grdBlack;\n        ctx.fillRect(0, 0, width, height);\n      };\n      var setPaletteHue = function (slider, hue) {\n        var canvas = slider.components()[0].element.dom;\n        var hsv = hsvColour(hue, 100, 100);\n        var rgba = fromHsv(hsv);\n        setColour(canvas, toString(rgba));\n      };\n      var setPaletteThumb = function (slider, hex) {\n        var hsv = fromRgb(fromHex(hex));\n        Slider.setValue(slider, {\n          x: hsv.saturation,\n          y: 100 - hsv.value\n        });\n      };\n      var factory = function (_detail) {\n        var getInitialValue = constant$1({\n          x: 0,\n          y: 0\n        });\n        var onChange = function (slider, _thumb, value) {\n          emitWith(slider, paletteUpdate, { value: value });\n        };\n        var onInit = function (_slider, _thumb, spectrum, _value) {\n          setColour(spectrum.element.dom, toString(red));\n        };\n        var sliderBehaviours = derive$1([\n          Composing.config({ find: Optional.some }),\n          Focusing.config({})\n        ]);\n        return Slider.sketch({\n          dom: {\n            tag: 'div',\n            attributes: { role: 'presentation' },\n            classes: [getClass('sv-palette')]\n          },\n          model: {\n            mode: 'xy',\n            getInitialValue: getInitialValue\n          },\n          rounded: false,\n          components: [\n            spectrumPart,\n            thumbPart\n          ],\n          onChange: onChange,\n          onInit: onInit,\n          sliderBehaviours: sliderBehaviours\n        });\n      };\n      var saturationBrightnessPaletteSketcher = single({\n        factory: factory,\n        name: 'SaturationBrightnessPalette',\n        configFields: [],\n        apis: {\n          setHue: function (_apis, slider, hue) {\n            setPaletteHue(slider, hue);\n          },\n          setThumb: function (_apis, slider, hex) {\n            setPaletteThumb(slider, hex);\n          }\n        },\n        extraApis: {}\n      });\n      return saturationBrightnessPaletteSketcher;\n    };\n\n    var makeFactory = function (translate, getClass) {\n      var factory = function (detail) {\n        var rgbForm = rgbFormFactory(translate, getClass, detail.onValidHex, detail.onInvalidHex);\n        var sbPalette = paletteFactory(translate, getClass);\n        var hueSliderToDegrees = function (hue) {\n          return (100 - hue) / 100 * 360;\n        };\n        var hueDegreesToSlider = function (hue) {\n          return 100 - hue / 360 * 100;\n        };\n        var state = {\n          paletteRgba: Cell(red),\n          paletteHue: Cell(0)\n        };\n        var memSlider = record(sliderFactory(translate, getClass));\n        var memPalette = record(sbPalette.sketch({}));\n        var memRgb = record(rgbForm.sketch({}));\n        var updatePalette = function (anyInSystem, _hex, hue) {\n          memPalette.getOpt(anyInSystem).each(function (palette) {\n            sbPalette.setHue(palette, hue);\n          });\n        };\n        var updateFields = function (anyInSystem, hex) {\n          memRgb.getOpt(anyInSystem).each(function (form) {\n            rgbForm.updateHex(form, hex);\n          });\n        };\n        var updateSlider = function (anyInSystem, _hex, hue) {\n          memSlider.getOpt(anyInSystem).each(function (slider) {\n            Slider.setValue(slider, { y: hueDegreesToSlider(hue) });\n          });\n        };\n        var updatePaletteThumb = function (anyInSystem, hex) {\n          memPalette.getOpt(anyInSystem).each(function (palette) {\n            sbPalette.setThumb(palette, hex);\n          });\n        };\n        var updateState = function (hex, hue) {\n          var rgba = fromHex(hex);\n          state.paletteRgba.set(rgba);\n          state.paletteHue.set(hue);\n        };\n        var runUpdates = function (anyInSystem, hex, hue, updates) {\n          updateState(hex, hue);\n          each$1(updates, function (update) {\n            update(anyInSystem, hex, hue);\n          });\n        };\n        var onPaletteUpdate = function () {\n          var updates = [updateFields];\n          return function (form, simulatedEvent) {\n            var value = simulatedEvent.event.value;\n            var oldHue = state.paletteHue.get();\n            var newHsv = hsvColour(oldHue, value.x, 100 - value.y);\n            var newHex = hsvToHex(newHsv);\n            runUpdates(form, newHex, oldHue, updates);\n          };\n        };\n        var onSliderUpdate = function () {\n          var updates = [\n            updatePalette,\n            updateFields\n          ];\n          return function (form, simulatedEvent) {\n            var hue = hueSliderToDegrees(simulatedEvent.event.value.y);\n            var oldRgb = state.paletteRgba.get();\n            var oldHsv = fromRgb(oldRgb);\n            var newHsv = hsvColour(hue, oldHsv.saturation, oldHsv.value);\n            var newHex = hsvToHex(newHsv);\n            runUpdates(form, newHex, hue, updates);\n          };\n        };\n        var onFieldsUpdate = function () {\n          var updates = [\n            updatePalette,\n            updateSlider,\n            updatePaletteThumb\n          ];\n          return function (form, simulatedEvent) {\n            var hex = simulatedEvent.event.hex;\n            var hsv = hexToHsv(hex);\n            runUpdates(form, hex, hsv.hue, updates);\n          };\n        };\n        return {\n          uid: detail.uid,\n          dom: detail.dom,\n          components: [\n            memPalette.asSpec(),\n            memSlider.asSpec(),\n            memRgb.asSpec()\n          ],\n          behaviours: derive$1([\n            config('colour-picker-events', [\n              run$1(fieldsUpdate, onFieldsUpdate()),\n              run$1(paletteUpdate, onPaletteUpdate()),\n              run$1(sliderUpdate, onSliderUpdate())\n            ]),\n            Composing.config({\n              find: function (comp) {\n                return memRgb.getOpt(comp);\n              }\n            }),\n            Keying.config({ mode: 'acyclic' })\n          ])\n        };\n      };\n      var colourPickerSketcher = single({\n        name: 'ColourPicker',\n        configFields: [\n          required$1('dom'),\n          defaulted('onValidHex', noop),\n          defaulted('onInvalidHex', noop)\n        ],\n        factory: factory\n      });\n      return colourPickerSketcher;\n    };\n\n    var self$1 = function () {\n      return Composing.config({ find: Optional.some });\n    };\n    var memento$1 = function (mem) {\n      return Composing.config({ find: mem.getOpt });\n    };\n    var childAt = function (index) {\n      return Composing.config({\n        find: function (comp) {\n          return child$2(comp.element, index).bind(function (element) {\n            return comp.getSystem().getByDom(element).toOptional();\n          });\n        }\n      });\n    };\n    var ComposingConfigs = {\n      self: self$1,\n      memento: memento$1,\n      childAt: childAt\n    };\n\n    var english = {\n      'colorcustom.rgb.red.label': 'R',\n      'colorcustom.rgb.red.description': 'Red component',\n      'colorcustom.rgb.green.label': 'G',\n      'colorcustom.rgb.green.description': 'Green component',\n      'colorcustom.rgb.blue.label': 'B',\n      'colorcustom.rgb.blue.description': 'Blue component',\n      'colorcustom.rgb.hex.label': '#',\n      'colorcustom.rgb.hex.description': 'Hex color code',\n      'colorcustom.rgb.range': 'Range 0 to 255',\n      'colorcustom.sb.saturation': 'Saturation',\n      'colorcustom.sb.brightness': 'Brightness',\n      'colorcustom.sb.picker': 'Saturation and Brightness Picker',\n      'colorcustom.sb.palette': 'Saturation and Brightness Palette',\n      'colorcustom.sb.instructions': 'Use arrow keys to select saturation and brightness, on x and y axes',\n      'colorcustom.hue.hue': 'Hue',\n      'colorcustom.hue.slider': 'Hue Slider',\n      'colorcustom.hue.palette': 'Hue Palette',\n      'colorcustom.hue.instructions': 'Use arrow keys to select a hue',\n      'aria.color.picker': 'Color Picker',\n      'aria.input.invalid': 'Invalid input'\n    };\n    var getEnglishText = function (key) {\n      return english[key];\n    };\n    var translate$1 = function (key) {\n      return getEnglishText(key);\n    };\n    var renderColorPicker = function (_spec) {\n      var getClass = function (key) {\n        return 'tox-' + key;\n      };\n      var colourPickerFactory = makeFactory(translate$1, getClass);\n      var onValidHex = function (form) {\n        emitWith(form, formActionEvent, {\n          name: 'hex-valid',\n          value: true\n        });\n      };\n      var onInvalidHex = function (form) {\n        emitWith(form, formActionEvent, {\n          name: 'hex-valid',\n          value: false\n        });\n      };\n      var memPicker = record(colourPickerFactory.sketch({\n        dom: {\n          tag: 'div',\n          classes: [getClass('color-picker-container')],\n          attributes: { role: 'presentation' }\n        },\n        onValidHex: onValidHex,\n        onInvalidHex: onInvalidHex\n      }));\n      return {\n        dom: { tag: 'div' },\n        components: [memPicker.asSpec()],\n        behaviours: derive$1([\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (comp) {\n                var picker = memPicker.get(comp);\n                var optRgbForm = Composing.getCurrent(picker);\n                var optHex = optRgbForm.bind(function (rgbForm) {\n                  var formValues = Representing.getValue(rgbForm);\n                  return formValues.hex;\n                });\n                return optHex.map(function (hex) {\n                  return '#' + hex;\n                }).getOr('');\n              },\n              setValue: function (comp, newValue) {\n                var pattern = /^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/;\n                var m = pattern.exec(newValue);\n                var picker = memPicker.get(comp);\n                var optRgbForm = Composing.getCurrent(picker);\n                optRgbForm.fold(function () {\n                  console.log('Can not find form');\n                }, function (rgbForm) {\n                  Representing.setValue(rgbForm, { hex: Optional.from(m[1]).getOr('') });\n                  Form.getField(rgbForm, 'hex').each(function (hexField) {\n                    emit(hexField, input());\n                  });\n                });\n              }\n            }\n          }),\n          ComposingConfigs.self()\n        ])\n      };\n    };\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.Resource');\n\n    var isOldCustomEditor = function (spec) {\n      return has$2(spec, 'init');\n    };\n    var renderCustomEditor = function (spec) {\n      var editorApi = value$1();\n      var memReplaced = record({ dom: { tag: spec.tag } });\n      var initialValue = value$1();\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-custom-editor']\n        },\n        behaviours: derive$1([\n          config('custom-editor-events', [runOnAttached(function (component) {\n              memReplaced.getOpt(component).each(function (ta) {\n                (isOldCustomEditor(spec) ? spec.init(ta.element.dom) : global$6.load(spec.scriptId, spec.scriptUrl).then(function (init) {\n                  return init(ta.element.dom, spec.settings);\n                })).then(function (ea) {\n                  initialValue.on(function (cvalue) {\n                    ea.setValue(cvalue);\n                  });\n                  initialValue.clear();\n                  editorApi.set(ea);\n                });\n              });\n            })]),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function () {\n                return editorApi.get().fold(function () {\n                  return initialValue.get().getOr('');\n                }, function (ed) {\n                  return ed.getValue();\n                });\n              },\n              setValue: function (component, value) {\n                editorApi.get().fold(function () {\n                  initialValue.set(value);\n                }, function (ed) {\n                  return ed.setValue(value);\n                });\n              }\n            }\n          }),\n          ComposingConfigs.self()\n        ]),\n        components: [memReplaced.asSpec()]\n      };\n    };\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var processors = objOf([\n      defaulted('preprocess', identity$1),\n      defaulted('postprocess', identity$1)\n    ]);\n    var memento = function (mem, rawProcessors) {\n      var ps = asRawOrDie$1('RepresentingConfigs.memento processors', processors, rawProcessors);\n      return Representing.config({\n        store: {\n          mode: 'manual',\n          getValue: function (comp) {\n            var other = mem.get(comp);\n            var rawValue = Representing.getValue(other);\n            return ps.postprocess(rawValue);\n          },\n          setValue: function (comp, rawValue) {\n            var newValue = ps.preprocess(rawValue);\n            var other = mem.get(comp);\n            Representing.setValue(other, newValue);\n          }\n        }\n      });\n    };\n    var withComp = function (optInitialValue, getter, setter) {\n      return Representing.config(deepMerge({\n        store: {\n          mode: 'manual',\n          getValue: getter,\n          setValue: setter\n        }\n      }, optInitialValue.map(function (initialValue) {\n        return { store: { initialValue: initialValue } };\n      }).getOr({})));\n    };\n    var withElement = function (initialValue, getter, setter) {\n      return withComp(initialValue, function (c) {\n        return getter(c.element);\n      }, function (c, v) {\n        return setter(c.element, v);\n      });\n    };\n    var domValue = function (optInitialValue) {\n      return withElement(optInitialValue, get$5, set$4);\n    };\n    var domHtml = function (optInitialValue) {\n      return withElement(optInitialValue, get$7, set$5);\n    };\n    var memory = function (initialValue) {\n      return Representing.config({\n        store: {\n          mode: 'memory',\n          initialValue: initialValue\n        }\n      });\n    };\n    var RepresentingConfigs = {\n      memento: memento,\n      withElement: withElement,\n      withComp: withComp,\n      domValue: domValue,\n      domHtml: domHtml,\n      memory: memory\n    };\n\n    var defaultImageFileTypes = 'jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp';\n    var filterByExtension = function (files, providersBackstage) {\n      var allowedImageFileTypes = global$5.explode(providersBackstage.getSetting('images_file_types', defaultImageFileTypes, 'string'));\n      var isFileInAllowedTypes = function (file) {\n        return exists(allowedImageFileTypes, function (type) {\n          return endsWith(file.name.toLowerCase(), '.' + type.toLowerCase());\n        });\n      };\n      return filter$2(from(files), isFileInAllowedTypes);\n    };\n    var renderDropZone = function (spec, providersBackstage) {\n      var stopper = function (_, se) {\n        se.stop();\n      };\n      var sequence = function (actions) {\n        return function (comp, se) {\n          each$1(actions, function (a) {\n            a(comp, se);\n          });\n        };\n      };\n      var onDrop = function (comp, se) {\n        if (!Disabling.isDisabled(comp)) {\n          var transferEvent = se.event.raw;\n          handleFiles(comp, transferEvent.dataTransfer.files);\n        }\n      };\n      var onSelect = function (component, simulatedEvent) {\n        var input = simulatedEvent.event.raw.target;\n        handleFiles(component, input.files);\n      };\n      var handleFiles = function (component, files) {\n        Representing.setValue(component, filterByExtension(files, providersBackstage));\n        emitWith(component, formChangeEvent, { name: spec.name });\n      };\n      var memInput = record({\n        dom: {\n          tag: 'input',\n          attributes: {\n            type: 'file',\n            accept: 'image/*'\n          },\n          styles: { display: 'none' }\n        },\n        behaviours: derive$1([config('input-file-events', [\n            cutter(click()),\n            cutter(tap())\n          ])])\n      });\n      var renderField = function (s) {\n        return {\n          uid: s.uid,\n          dom: {\n            tag: 'div',\n            classes: ['tox-dropzone-container']\n          },\n          behaviours: derive$1([\n            RepresentingConfigs.memory([]),\n            ComposingConfigs.self(),\n            Disabling.config({}),\n            Toggling.config({\n              toggleClass: 'dragenter',\n              toggleOnExecute: false\n            }),\n            config('dropzone-events', [\n              run$1('dragenter', sequence([\n                stopper,\n                Toggling.toggle\n              ])),\n              run$1('dragleave', sequence([\n                stopper,\n                Toggling.toggle\n              ])),\n              run$1('dragover', stopper),\n              run$1('drop', sequence([\n                stopper,\n                onDrop\n              ])),\n              run$1(change(), onSelect)\n            ])\n          ]),\n          components: [{\n              dom: {\n                tag: 'div',\n                classes: ['tox-dropzone'],\n                styles: {}\n              },\n              components: [\n                {\n                  dom: {\n                    tag: 'p',\n                    innerHtml: providersBackstage.translate('Drop an image here')\n                  }\n                },\n                Button.sketch({\n                  dom: {\n                    tag: 'button',\n                    innerHtml: providersBackstage.translate('Browse for an image'),\n                    styles: { position: 'relative' },\n                    classes: [\n                      'tox-button',\n                      'tox-button--secondary'\n                    ]\n                  },\n                  components: [memInput.asSpec()],\n                  action: function (comp) {\n                    var inputComp = memInput.get(comp);\n                    inputComp.element.dom.click();\n                  },\n                  buttonBehaviours: derive$1([\n                    Tabstopping.config({}),\n                    DisablingConfigs.button(providersBackstage.isDisabled),\n                    receivingConfig()\n                  ])\n                })\n              ]\n            }]\n        };\n      };\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel$2(label, providersBackstage);\n      });\n      var pField = FormField.parts.field({ factory: { sketch: renderField } });\n      return renderFormFieldWith(pLabel, pField, ['tox-form__group--stretched'], []);\n    };\n\n    var renderGrid = function (spec, backstage) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-form__grid',\n            'tox-form__grid--' + spec.columns + 'col'\n          ]\n        },\n        components: map$2(spec.items, backstage.interpreter)\n      };\n    };\n\n    var beforeObject = generate$6('alloy-fake-before-tabstop');\n    var afterObject = generate$6('alloy-fake-after-tabstop');\n    var craftWithClasses = function (classes) {\n      return {\n        dom: {\n          tag: 'div',\n          styles: {\n            width: '1px',\n            height: '1px',\n            outline: 'none'\n          },\n          attributes: { tabindex: '0' },\n          classes: classes\n        },\n        behaviours: derive$1([\n          Focusing.config({ ignore: true }),\n          Tabstopping.config({})\n        ])\n      };\n    };\n    var craft = function (spec) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-navobj']\n        },\n        components: [\n          craftWithClasses([beforeObject]),\n          spec,\n          craftWithClasses([afterObject])\n        ],\n        behaviours: derive$1([ComposingConfigs.childAt(1)])\n      };\n    };\n    var triggerTab = function (placeholder, shiftKey) {\n      emitWith(placeholder, keydown(), {\n        raw: {\n          which: 9,\n          shiftKey: shiftKey\n        }\n      });\n    };\n    var onFocus = function (container, targetComp) {\n      var target = targetComp.element;\n      if (has(target, beforeObject)) {\n        triggerTab(container, true);\n      } else if (has(target, afterObject)) {\n        triggerTab(container, false);\n      }\n    };\n    var isPseudoStop = function (element) {\n      return closest(element, [\n        '.' + beforeObject,\n        '.' + afterObject\n      ].join(','), never);\n    };\n\n    var platformNeedsSandboxing = !(detect$1().browser.isIE() || detect$1().browser.isEdge());\n    var getDynamicSource = function (isSandbox) {\n      var cachedValue = Cell('');\n      return {\n        getValue: function (_frameComponent) {\n          return cachedValue.get();\n        },\n        setValue: function (frameComponent, html) {\n          if (!isSandbox) {\n            set$8(frameComponent.element, 'src', 'javascript:\\'\\'');\n            var doc = frameComponent.element.dom.contentWindow.document;\n            doc.open();\n            doc.write(html);\n            doc.close();\n          } else {\n            set$8(frameComponent.element, 'srcdoc', html);\n          }\n          cachedValue.set(html);\n        }\n      };\n    };\n    var renderIFrame = function (spec, providersBackstage) {\n      var isSandbox = platformNeedsSandboxing && spec.sandboxed;\n      var attributes = __assign(__assign({}, spec.label.map(function (title) {\n        return { title: title };\n      }).getOr({})), isSandbox ? { sandbox: 'allow-scripts allow-same-origin' } : {});\n      var sourcing = getDynamicSource(isSandbox);\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel$2(label, providersBackstage);\n      });\n      var factory = function (newSpec) {\n        return craft({\n          uid: newSpec.uid,\n          dom: {\n            tag: 'iframe',\n            attributes: attributes\n          },\n          behaviours: derive$1([\n            Tabstopping.config({}),\n            Focusing.config({}),\n            RepresentingConfigs.withComp(Optional.none(), sourcing.getValue, sourcing.setValue)\n          ])\n        });\n      };\n      var pField = FormField.parts.field({ factory: { sketch: factory } });\n      return renderFormFieldWith(pLabel, pField, ['tox-form__group--stretched'], []);\n    };\n\n    var create$3 = function (width, height) {\n      return resize$3(document.createElement('canvas'), width, height);\n    };\n    var clone = function (canvas) {\n      var tCanvas = create$3(canvas.width, canvas.height);\n      var ctx = get2dContext(tCanvas);\n      ctx.drawImage(canvas, 0, 0);\n      return tCanvas;\n    };\n    var get2dContext = function (canvas) {\n      return canvas.getContext('2d');\n    };\n    var resize$3 = function (canvas, width, height) {\n      canvas.width = width;\n      canvas.height = height;\n      return canvas;\n    };\n\n    var getWidth$1 = function (image) {\n      return image.naturalWidth || image.width;\n    };\n    var getHeight$1 = function (image) {\n      return image.naturalHeight || image.height;\n    };\n\n    var blobToImage = function (blob) {\n      return new Promise$1(function (resolve, reject) {\n        var blobUrl = URL.createObjectURL(blob);\n        var image = new Image();\n        var removeListeners = function () {\n          image.removeEventListener('load', loaded);\n          image.removeEventListener('error', error);\n        };\n        var loaded = function () {\n          removeListeners();\n          resolve(image);\n        };\n        var error = function () {\n          removeListeners();\n          reject('Unable to load data of type ' + blob.type + ': ' + blobUrl);\n        };\n        image.addEventListener('load', loaded);\n        image.addEventListener('error', error);\n        image.src = blobUrl;\n        if (image.complete) {\n          setTimeout(loaded, 0);\n        }\n      });\n    };\n    var dataUriToBlobSync = function (uri) {\n      var data = uri.split(',');\n      var matches = /data:([^;]+)/.exec(data[0]);\n      if (!matches) {\n        return Optional.none();\n      }\n      var mimetype = matches[1];\n      var base64 = data[1];\n      var sliceSize = 1024;\n      var byteCharacters = atob(base64);\n      var bytesLength = byteCharacters.length;\n      var slicesCount = Math.ceil(bytesLength / sliceSize);\n      var byteArrays = new Array(slicesCount);\n      for (var sliceIndex = 0; sliceIndex < slicesCount; ++sliceIndex) {\n        var begin = sliceIndex * sliceSize;\n        var end = Math.min(begin + sliceSize, bytesLength);\n        var bytes = new Array(end - begin);\n        for (var offset = begin, i = 0; offset < end; ++i, ++offset) {\n          bytes[i] = byteCharacters[offset].charCodeAt(0);\n        }\n        byteArrays[sliceIndex] = new Uint8Array(bytes);\n      }\n      return Optional.some(new Blob(byteArrays, { type: mimetype }));\n    };\n    var dataUriToBlob = function (uri) {\n      return new Promise$1(function (resolve, reject) {\n        dataUriToBlobSync(uri).fold(function () {\n          reject('uri is not base64: ' + uri);\n        }, resolve);\n      });\n    };\n    var canvasToBlob = function (canvas, type, quality) {\n      type = type || 'image/png';\n      if (isFunction(HTMLCanvasElement.prototype.toBlob)) {\n        return new Promise$1(function (resolve, reject) {\n          canvas.toBlob(function (blob) {\n            if (blob) {\n              resolve(blob);\n            } else {\n              reject();\n            }\n          }, type, quality);\n        });\n      } else {\n        return dataUriToBlob(canvas.toDataURL(type, quality));\n      }\n    };\n    var canvasToDataURL = function (canvas, type, quality) {\n      type = type || 'image/png';\n      return canvas.toDataURL(type, quality);\n    };\n    var blobToCanvas = function (blob) {\n      return blobToImage(blob).then(function (image) {\n        revokeImageUrl(image);\n        var canvas = create$3(getWidth$1(image), getHeight$1(image));\n        var context = get2dContext(canvas);\n        context.drawImage(image, 0, 0);\n        return canvas;\n      });\n    };\n    var blobToDataUri = function (blob) {\n      return new Promise$1(function (resolve) {\n        var reader = new FileReader();\n        reader.onloadend = function () {\n          resolve(reader.result);\n        };\n        reader.readAsDataURL(blob);\n      });\n    };\n    var revokeImageUrl = function (image) {\n      URL.revokeObjectURL(image.src);\n    };\n\n    var create$2 = function (getCanvas, blob, uri) {\n      var initialType = blob.type;\n      var getType = constant$1(initialType);\n      var toBlob = function () {\n        return Promise$1.resolve(blob);\n      };\n      var toDataURL = constant$1(uri);\n      var toBase64 = function () {\n        return uri.split(',')[1];\n      };\n      var toAdjustedBlob = function (type, quality) {\n        return getCanvas.then(function (canvas) {\n          return canvasToBlob(canvas, type, quality);\n        });\n      };\n      var toAdjustedDataURL = function (type, quality) {\n        return getCanvas.then(function (canvas) {\n          return canvasToDataURL(canvas, type, quality);\n        });\n      };\n      var toAdjustedBase64 = function (type, quality) {\n        return toAdjustedDataURL(type, quality).then(function (dataurl) {\n          return dataurl.split(',')[1];\n        });\n      };\n      var toCanvas = function () {\n        return getCanvas.then(clone);\n      };\n      return {\n        getType: getType,\n        toBlob: toBlob,\n        toDataURL: toDataURL,\n        toBase64: toBase64,\n        toAdjustedBlob: toAdjustedBlob,\n        toAdjustedDataURL: toAdjustedDataURL,\n        toAdjustedBase64: toAdjustedBase64,\n        toCanvas: toCanvas\n      };\n    };\n    var fromBlob = function (blob) {\n      return blobToDataUri(blob).then(function (uri) {\n        return create$2(blobToCanvas(blob), blob, uri);\n      });\n    };\n    var fromCanvas = function (canvas, type) {\n      return canvasToBlob(canvas, type).then(function (blob) {\n        return create$2(Promise$1.resolve(canvas), blob, canvas.toDataURL());\n      });\n    };\n\n    var blobToImageResult = function (blob) {\n      return fromBlob(blob);\n    };\n\n    var clamp = function (value, min, max) {\n      var parsedValue = typeof value === 'string' ? parseFloat(value) : value;\n      if (parsedValue > max) {\n        parsedValue = max;\n      } else if (parsedValue < min) {\n        parsedValue = min;\n      }\n      return parsedValue;\n    };\n    var identity = function () {\n      return [\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ];\n    };\n    var DELTA_INDEX = [\n      0,\n      0.01,\n      0.02,\n      0.04,\n      0.05,\n      0.06,\n      0.07,\n      0.08,\n      0.1,\n      0.11,\n      0.12,\n      0.14,\n      0.15,\n      0.16,\n      0.17,\n      0.18,\n      0.2,\n      0.21,\n      0.22,\n      0.24,\n      0.25,\n      0.27,\n      0.28,\n      0.3,\n      0.32,\n      0.34,\n      0.36,\n      0.38,\n      0.4,\n      0.42,\n      0.44,\n      0.46,\n      0.48,\n      0.5,\n      0.53,\n      0.56,\n      0.59,\n      0.62,\n      0.65,\n      0.68,\n      0.71,\n      0.74,\n      0.77,\n      0.8,\n      0.83,\n      0.86,\n      0.89,\n      0.92,\n      0.95,\n      0.98,\n      1,\n      1.06,\n      1.12,\n      1.18,\n      1.24,\n      1.3,\n      1.36,\n      1.42,\n      1.48,\n      1.54,\n      1.6,\n      1.66,\n      1.72,\n      1.78,\n      1.84,\n      1.9,\n      1.96,\n      2,\n      2.12,\n      2.25,\n      2.37,\n      2.5,\n      2.62,\n      2.75,\n      2.87,\n      3,\n      3.2,\n      3.4,\n      3.6,\n      3.8,\n      4,\n      4.3,\n      4.7,\n      4.9,\n      5,\n      5.5,\n      6,\n      6.5,\n      6.8,\n      7,\n      7.3,\n      7.5,\n      7.8,\n      8,\n      8.4,\n      8.7,\n      9,\n      9.4,\n      9.6,\n      9.8,\n      10\n    ];\n    var multiply = function (matrix1, matrix2) {\n      var col = [];\n      var out = new Array(25);\n      var val;\n      for (var i = 0; i < 5; i++) {\n        for (var j = 0; j < 5; j++) {\n          col[j] = matrix2[j + i * 5];\n        }\n        for (var j = 0; j < 5; j++) {\n          val = 0;\n          for (var k = 0; k < 5; k++) {\n            val += matrix1[j + k * 5] * col[k];\n          }\n          out[j + i * 5] = val;\n        }\n      }\n      return out;\n    };\n    var adjustContrast = function (matrix, value) {\n      var x;\n      value = clamp(value, -1, 1);\n      value *= 100;\n      if (value < 0) {\n        x = 127 + value / 100 * 127;\n      } else {\n        x = value % 1;\n        if (x === 0) {\n          x = DELTA_INDEX[value];\n        } else {\n          x = DELTA_INDEX[Math.floor(value)] * (1 - x) + DELTA_INDEX[Math.floor(value) + 1] * x;\n        }\n        x = x * 127 + 127;\n      }\n      return multiply(matrix, [\n        x / 127,\n        0,\n        0,\n        0,\n        0.5 * (127 - x),\n        0,\n        x / 127,\n        0,\n        0,\n        0.5 * (127 - x),\n        0,\n        0,\n        x / 127,\n        0,\n        0.5 * (127 - x),\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n    };\n    var adjustBrightness = function (matrix, value) {\n      value = clamp(255 * value, -255, 255);\n      return multiply(matrix, [\n        1,\n        0,\n        0,\n        0,\n        value,\n        0,\n        1,\n        0,\n        0,\n        value,\n        0,\n        0,\n        1,\n        0,\n        value,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n    };\n    var adjustColors = function (matrix, adjustR, adjustG, adjustB) {\n      adjustR = clamp(adjustR, 0, 2);\n      adjustG = clamp(adjustG, 0, 2);\n      adjustB = clamp(adjustB, 0, 2);\n      return multiply(matrix, [\n        adjustR,\n        0,\n        0,\n        0,\n        0,\n        0,\n        adjustG,\n        0,\n        0,\n        0,\n        0,\n        0,\n        adjustB,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n    };\n\n    var colorFilter = function (ir, matrix) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyColorFilter(canvas, ir.getType(), matrix);\n      });\n    };\n    var applyColorFilter = function (canvas, type, matrix) {\n      var context = get2dContext(canvas);\n      var applyMatrix = function (pixelsData, m) {\n        var r, g, b, a;\n        var data = pixelsData.data, m0 = m[0], m1 = m[1], m2 = m[2], m3 = m[3], m4 = m[4], m5 = m[5], m6 = m[6], m7 = m[7], m8 = m[8], m9 = m[9], m10 = m[10], m11 = m[11], m12 = m[12], m13 = m[13], m14 = m[14], m15 = m[15], m16 = m[16], m17 = m[17], m18 = m[18], m19 = m[19];\n        for (var i = 0; i < data.length; i += 4) {\n          r = data[i];\n          g = data[i + 1];\n          b = data[i + 2];\n          a = data[i + 3];\n          data[i] = r * m0 + g * m1 + b * m2 + a * m3 + m4;\n          data[i + 1] = r * m5 + g * m6 + b * m7 + a * m8 + m9;\n          data[i + 2] = r * m10 + g * m11 + b * m12 + a * m13 + m14;\n          data[i + 3] = r * m15 + g * m16 + b * m17 + a * m18 + m19;\n        }\n        return pixelsData;\n      };\n      var pixels = applyMatrix(context.getImageData(0, 0, canvas.width, canvas.height), matrix);\n      context.putImageData(pixels, 0, 0);\n      return fromCanvas(canvas, type);\n    };\n    var convoluteFilter = function (ir, matrix) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyConvoluteFilter(canvas, ir.getType(), matrix);\n      });\n    };\n    var applyConvoluteFilter = function (canvas, type, matrix) {\n      var context = get2dContext(canvas);\n      var applyMatrix = function (pIn, pOut, aMatrix) {\n        var clamp = function (value, min, max) {\n          if (value > max) {\n            value = max;\n          } else if (value < min) {\n            value = min;\n          }\n          return value;\n        };\n        var side = Math.round(Math.sqrt(aMatrix.length));\n        var halfSide = Math.floor(side / 2);\n        var rgba = pIn.data;\n        var drgba = pOut.data;\n        var w = pIn.width;\n        var h = pIn.height;\n        for (var y = 0; y < h; y++) {\n          for (var x = 0; x < w; x++) {\n            var r = 0;\n            var g = 0;\n            var b = 0;\n            for (var cy = 0; cy < side; cy++) {\n              for (var cx = 0; cx < side; cx++) {\n                var scx = clamp(x + cx - halfSide, 0, w - 1);\n                var scy = clamp(y + cy - halfSide, 0, h - 1);\n                var innerOffset = (scy * w + scx) * 4;\n                var wt = aMatrix[cy * side + cx];\n                r += rgba[innerOffset] * wt;\n                g += rgba[innerOffset + 1] * wt;\n                b += rgba[innerOffset + 2] * wt;\n              }\n            }\n            var offset = (y * w + x) * 4;\n            drgba[offset] = clamp(r, 0, 255);\n            drgba[offset + 1] = clamp(g, 0, 255);\n            drgba[offset + 2] = clamp(b, 0, 255);\n          }\n        }\n        return pOut;\n      };\n      var pixelsIn = context.getImageData(0, 0, canvas.width, canvas.height);\n      var pixelsOut = context.getImageData(0, 0, canvas.width, canvas.height);\n      pixelsOut = applyMatrix(pixelsIn, pixelsOut, matrix);\n      context.putImageData(pixelsOut, 0, 0);\n      return fromCanvas(canvas, type);\n    };\n    var functionColorFilter = function (colorFn) {\n      var filterImpl = function (canvas, type, value) {\n        var context = get2dContext(canvas);\n        var lookup = new Array(256);\n        var applyLookup = function (pixelsData, lookupData) {\n          var data = pixelsData.data;\n          for (var i = 0; i < data.length; i += 4) {\n            data[i] = lookupData[data[i]];\n            data[i + 1] = lookupData[data[i + 1]];\n            data[i + 2] = lookupData[data[i + 2]];\n          }\n          return pixelsData;\n        };\n        for (var i = 0; i < lookup.length; i++) {\n          lookup[i] = colorFn(i, value);\n        }\n        var pixels = applyLookup(context.getImageData(0, 0, canvas.width, canvas.height), lookup);\n        context.putImageData(pixels, 0, 0);\n        return fromCanvas(canvas, type);\n      };\n      return function (ir, value) {\n        return ir.toCanvas().then(function (canvas) {\n          return filterImpl(canvas, ir.getType(), value);\n        });\n      };\n    };\n    var complexAdjustableColorFilter = function (matrixAdjustFn) {\n      return function (ir, adjust) {\n        return colorFilter(ir, matrixAdjustFn(identity(), adjust));\n      };\n    };\n    var basicColorFilter = function (matrix) {\n      return function (ir) {\n        return colorFilter(ir, matrix);\n      };\n    };\n    var basicConvolutionFilter = function (kernel) {\n      return function (ir) {\n        return convoluteFilter(ir, kernel);\n      };\n    };\n    var invert$1 = basicColorFilter([\n      -1,\n      0,\n      0,\n      0,\n      255,\n      0,\n      -1,\n      0,\n      0,\n      255,\n      0,\n      0,\n      -1,\n      0,\n      255,\n      0,\n      0,\n      0,\n      1,\n      0,\n      0,\n      0,\n      0,\n      0,\n      1\n    ]);\n    var brightness$1 = complexAdjustableColorFilter(adjustBrightness);\n    var contrast$1 = complexAdjustableColorFilter(adjustContrast);\n    var colorize$1 = function (ir, adjustR, adjustG, adjustB) {\n      return colorFilter(ir, adjustColors(identity(), adjustR, adjustG, adjustB));\n    };\n    var sharpen$1 = basicConvolutionFilter([\n      0,\n      -1,\n      0,\n      -1,\n      5,\n      -1,\n      0,\n      -1,\n      0\n    ]);\n    var gamma$1 = functionColorFilter(function (color, value) {\n      return Math.pow(color / 255, 1 - value) * 255;\n    });\n\n    var scale = function (image, dW, dH) {\n      var sW = getWidth$1(image);\n      var sH = getHeight$1(image);\n      var wRatio = dW / sW;\n      var hRatio = dH / sH;\n      var scaleCapped = false;\n      if (wRatio < 0.5 || wRatio > 2) {\n        wRatio = wRatio < 0.5 ? 0.5 : 2;\n        scaleCapped = true;\n      }\n      if (hRatio < 0.5 || hRatio > 2) {\n        hRatio = hRatio < 0.5 ? 0.5 : 2;\n        scaleCapped = true;\n      }\n      var scaled = _scale(image, wRatio, hRatio);\n      return !scaleCapped ? scaled : scaled.then(function (tCanvas) {\n        return scale(tCanvas, dW, dH);\n      });\n    };\n    var _scale = function (image, wRatio, hRatio) {\n      return new Promise$1(function (resolve) {\n        var sW = getWidth$1(image);\n        var sH = getHeight$1(image);\n        var dW = Math.floor(sW * wRatio);\n        var dH = Math.floor(sH * hRatio);\n        var canvas = create$3(dW, dH);\n        var context = get2dContext(canvas);\n        context.drawImage(image, 0, 0, sW, sH, 0, 0, dW, dH);\n        resolve(canvas);\n      });\n    };\n\n    var ceilWithPrecision = function (num, precision) {\n      if (precision === void 0) {\n        precision = 2;\n      }\n      var mul = Math.pow(10, precision);\n      var upper = Math.round(num * mul);\n      return Math.ceil(upper / mul);\n    };\n    var rotate$1 = function (ir, angle) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyRotate(canvas, ir.getType(), angle);\n      });\n    };\n    var applyRotate = function (image, type, angle) {\n      var degrees = angle < 0 ? 360 + angle : angle;\n      var rad = degrees * Math.PI / 180;\n      var width = image.width;\n      var height = image.height;\n      var sin = Math.sin(rad);\n      var cos = Math.cos(rad);\n      var newWidth = ceilWithPrecision(Math.abs(width * cos) + Math.abs(height * sin));\n      var newHeight = ceilWithPrecision(Math.abs(width * sin) + Math.abs(height * cos));\n      var canvas = create$3(newWidth, newHeight);\n      var context = get2dContext(canvas);\n      context.translate(newWidth / 2, newHeight / 2);\n      context.rotate(rad);\n      context.drawImage(image, -width / 2, -height / 2);\n      return fromCanvas(canvas, type);\n    };\n    var flip$1 = function (ir, axis) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyFlip(canvas, ir.getType(), axis);\n      });\n    };\n    var applyFlip = function (image, type, axis) {\n      var canvas = create$3(image.width, image.height);\n      var context = get2dContext(canvas);\n      if (axis === 'v') {\n        context.scale(1, -1);\n        context.drawImage(image, 0, -canvas.height);\n      } else {\n        context.scale(-1, 1);\n        context.drawImage(image, -canvas.width, 0);\n      }\n      return fromCanvas(canvas, type);\n    };\n    var crop$1 = function (ir, x, y, w, h) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyCrop(canvas, ir.getType(), x, y, w, h);\n      });\n    };\n    var applyCrop = function (image, type, x, y, w, h) {\n      var canvas = create$3(w, h);\n      var context = get2dContext(canvas);\n      context.drawImage(image, -x, -y);\n      return fromCanvas(canvas, type);\n    };\n    var resize$2 = function (ir, w, h) {\n      return ir.toCanvas().then(function (canvas) {\n        return scale(canvas, w, h).then(function (newCanvas) {\n          return fromCanvas(newCanvas, ir.getType());\n        });\n      });\n    };\n\n    var invert = function (ir) {\n      return invert$1(ir);\n    };\n    var sharpen = function (ir) {\n      return sharpen$1(ir);\n    };\n    var gamma = function (ir, value) {\n      return gamma$1(ir, value);\n    };\n    var colorize = function (ir, adjustR, adjustG, adjustB) {\n      return colorize$1(ir, adjustR, adjustG, adjustB);\n    };\n    var brightness = function (ir, adjust) {\n      return brightness$1(ir, adjust);\n    };\n    var contrast = function (ir, adjust) {\n      return contrast$1(ir, adjust);\n    };\n    var flip = function (ir, axis) {\n      return flip$1(ir, axis);\n    };\n    var crop = function (ir, x, y, w, h) {\n      return crop$1(ir, x, y, w, h);\n    };\n    var resize$1 = function (ir, w, h) {\n      return resize$2(ir, w, h);\n    };\n    var rotate = function (ir, angle) {\n      return rotate$1(ir, angle);\n    };\n\n    var renderIcon = function (iconName, iconsProvider, behaviours) {\n      return render$3(iconName, {\n        tag: 'span',\n        classes: [\n          'tox-icon',\n          'tox-tbtn__icon-wrap'\n        ],\n        behaviours: behaviours\n      }, iconsProvider);\n    };\n    var renderIconFromPack = function (iconName, iconsProvider) {\n      return renderIcon(iconName, iconsProvider, []);\n    };\n    var renderReplacableIconFromPack = function (iconName, iconsProvider) {\n      return renderIcon(iconName, iconsProvider, [Replacing.config({})]);\n    };\n    var renderLabel$1 = function (text, prefix, providersBackstage) {\n      return {\n        dom: {\n          tag: 'span',\n          innerHtml: providersBackstage.translate(text),\n          classes: [prefix + '__select-label']\n        },\n        behaviours: derive$1([Replacing.config({})])\n      };\n    };\n\n    var _a;\n    var internalToolbarButtonExecute = generate$6('toolbar.button.execute');\n    var onToolbarButtonExecute = function (info) {\n      return runOnExecute$1(function (comp, _simulatedEvent) {\n        runWithApi(info, comp)(function (itemApi) {\n          emitWith(comp, internalToolbarButtonExecute, { buttonApi: itemApi });\n          info.onAction(itemApi);\n        });\n      });\n    };\n    var toolbarButtonEventOrder = (_a = {}, _a[execute$5()] = [\n      'disabling',\n      'alloy.base.behaviour',\n      'toggling',\n      'toolbar-button-events'\n    ], _a);\n\n    var updateMenuText = generate$6('update-menu-text');\n    var updateMenuIcon = generate$6('update-menu-icon');\n    var renderCommonDropdown = function (spec, prefix, sharedBackstage) {\n      var editorOffCell = Cell(noop);\n      var optMemDisplayText = spec.text.map(function (text) {\n        return record(renderLabel$1(text, prefix, sharedBackstage.providers));\n      });\n      var optMemDisplayIcon = spec.icon.map(function (iconName) {\n        return record(renderReplacableIconFromPack(iconName, sharedBackstage.providers.icons));\n      });\n      var onLeftOrRightInMenu = function (comp, se) {\n        var dropdown = Representing.getValue(comp);\n        Focusing.focus(dropdown);\n        emitWith(dropdown, 'keydown', { raw: se.event.raw });\n        Dropdown.close(dropdown);\n        return Optional.some(true);\n      };\n      var role = spec.role.fold(function () {\n        return {};\n      }, function (role) {\n        return { role: role };\n      });\n      var tooltipAttributes = spec.tooltip.fold(function () {\n        return {};\n      }, function (tooltip) {\n        var translatedTooltip = sharedBackstage.providers.translate(tooltip);\n        return {\n          'title': translatedTooltip,\n          'aria-label': translatedTooltip\n        };\n      });\n      var iconSpec = render$3('chevron-down', {\n        tag: 'div',\n        classes: [prefix + '__select-chevron']\n      }, sharedBackstage.providers.icons);\n      var memDropdown = record(Dropdown.sketch(__assign(__assign(__assign({}, spec.uid ? { uid: spec.uid } : {}), role), {\n        dom: {\n          tag: 'button',\n          classes: [\n            prefix,\n            prefix + '--select'\n          ].concat(map$2(spec.classes, function (c) {\n            return prefix + '--' + c;\n          })),\n          attributes: __assign({}, tooltipAttributes)\n        },\n        components: componentRenderPipeline([\n          optMemDisplayIcon.map(function (mem) {\n            return mem.asSpec();\n          }),\n          optMemDisplayText.map(function (mem) {\n            return mem.asSpec();\n          }),\n          Optional.some(iconSpec)\n        ]),\n        matchWidth: true,\n        useMinWidth: true,\n        dropdownBehaviours: derive$1(__spreadArray(__spreadArray([], spec.dropdownBehaviours, true), [\n          DisablingConfigs.button(function () {\n            return spec.disabled || sharedBackstage.providers.isDisabled();\n          }),\n          receivingConfig(),\n          Unselecting.config({}),\n          Replacing.config({}),\n          config('dropdown-events', [\n            onControlAttached(spec, editorOffCell),\n            onControlDetached(spec, editorOffCell)\n          ]),\n          config('menubutton-update-display-text', [\n            run$1(updateMenuText, function (comp, se) {\n              optMemDisplayText.bind(function (mem) {\n                return mem.getOpt(comp);\n              }).each(function (displayText) {\n                Replacing.set(displayText, [text$1(sharedBackstage.providers.translate(se.event.text))]);\n              });\n            }),\n            run$1(updateMenuIcon, function (comp, se) {\n              optMemDisplayIcon.bind(function (mem) {\n                return mem.getOpt(comp);\n              }).each(function (displayIcon) {\n                Replacing.set(displayIcon, [renderReplacableIconFromPack(se.event.icon, sharedBackstage.providers.icons)]);\n              });\n            })\n          ])\n        ], false)),\n        eventOrder: deepMerge(toolbarButtonEventOrder, {\n          mousedown: [\n            'focusing',\n            'alloy.base.behaviour',\n            'item-type-events',\n            'normal-dropdown-events'\n          ]\n        }),\n        sandboxBehaviours: derive$1([Keying.config({\n            mode: 'special',\n            onLeft: onLeftOrRightInMenu,\n            onRight: onLeftOrRightInMenu\n          })]),\n        lazySink: sharedBackstage.getSink,\n        toggleClass: prefix + '--active',\n        parts: { menu: part(false, spec.columns, spec.presets) },\n        fetch: function (comp) {\n          return Future.nu(curry(spec.fetch, comp));\n        }\n      })));\n      return memDropdown.asSpec();\n    };\n\n    var isMenuItemReference = function (item) {\n      return isString(item);\n    };\n    var isSeparator$1 = function (item) {\n      return item.type === 'separator';\n    };\n    var isExpandingMenuItem = function (item) {\n      return has$2(item, 'getSubmenuItems');\n    };\n    var separator$2 = { type: 'separator' };\n    var unwrapReferences = function (items, menuItems) {\n      var realItems = foldl(items, function (acc, item) {\n        if (isMenuItemReference(item)) {\n          if (item === '') {\n            return acc;\n          } else if (item === '|') {\n            return acc.length > 0 && !isSeparator$1(acc[acc.length - 1]) ? acc.concat([separator$2]) : acc;\n          } else if (has$2(menuItems, item.toLowerCase())) {\n            return acc.concat([menuItems[item.toLowerCase()]]);\n          } else {\n            return acc;\n          }\n        } else {\n          return acc.concat([item]);\n        }\n      }, []);\n      if (realItems.length > 0 && isSeparator$1(realItems[realItems.length - 1])) {\n        realItems.pop();\n      }\n      return realItems;\n    };\n    var getFromExpandingItem = function (item, menuItems) {\n      var submenuItems = item.getSubmenuItems();\n      var rest = expand(submenuItems, menuItems);\n      var newMenus = deepMerge(rest.menus, wrap$1(item.value, rest.items));\n      var newExpansions = deepMerge(rest.expansions, wrap$1(item.value, item.value));\n      return {\n        item: item,\n        menus: newMenus,\n        expansions: newExpansions\n      };\n    };\n    var getFromItem = function (item, menuItems) {\n      return isExpandingMenuItem(item) ? getFromExpandingItem(item, menuItems) : {\n        item: item,\n        menus: {},\n        expansions: {}\n      };\n    };\n    var generateValueIfRequired = function (item) {\n      if (isSeparator$1(item)) {\n        return item;\n      } else {\n        var itemValue = get$e(item, 'value').getOrThunk(function () {\n          return generate$6('generated-menu-item');\n        });\n        return deepMerge({ value: itemValue }, item);\n      }\n    };\n    var expand = function (items, menuItems) {\n      var realItems = unwrapReferences(isString(items) ? items.split(' ') : items, menuItems);\n      return foldr(realItems, function (acc, item) {\n        var itemWithValue = generateValueIfRequired(item);\n        var newData = getFromItem(itemWithValue, menuItems);\n        return {\n          menus: deepMerge(acc.menus, newData.menus),\n          items: [newData.item].concat(acc.items),\n          expansions: deepMerge(acc.expansions, newData.expansions)\n        };\n      }, {\n        menus: {},\n        expansions: {},\n        items: []\n      });\n    };\n\n    var build = function (items, itemResponse, backstage, isHorizontalMenu) {\n      var primary = generate$6('primary-menu');\n      var data = expand(items, backstage.shared.providers.menuItems());\n      if (data.items.length === 0) {\n        return Optional.none();\n      }\n      var mainMenu = createPartialMenu(primary, data.items, itemResponse, backstage, isHorizontalMenu);\n      var submenus = map$1(data.menus, function (menuItems, menuName) {\n        return createPartialMenu(menuName, menuItems, itemResponse, backstage, false);\n      });\n      var menus = deepMerge(submenus, wrap$1(primary, mainMenu));\n      return Optional.from(tieredMenu.tieredData(primary, menus, data.expansions));\n    };\n\n    var getMenuButtonApi = function (component) {\n      return {\n        isDisabled: function () {\n          return Disabling.isDisabled(component);\n        },\n        setDisabled: function (state) {\n          return Disabling.set(component, state);\n        },\n        setActive: function (state) {\n          var elm = component.element;\n          if (state) {\n            add$2(elm, 'tox-tbtn--enabled');\n            set$8(elm, 'aria-pressed', true);\n          } else {\n            remove$2(elm, 'tox-tbtn--enabled');\n            remove$7(elm, 'aria-pressed');\n          }\n        },\n        isActive: function () {\n          return has(component.element, 'tox-tbtn--enabled');\n        }\n      };\n    };\n    var renderMenuButton = function (spec, prefix, backstage, role) {\n      return renderCommonDropdown({\n        text: spec.text,\n        icon: spec.icon,\n        tooltip: spec.tooltip,\n        role: role,\n        fetch: function (_comp, callback) {\n          spec.fetch(function (items) {\n            callback(build(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, false));\n          });\n        },\n        onSetup: spec.onSetup,\n        getApi: getMenuButtonApi,\n        columns: 1,\n        presets: 'normal',\n        classes: [],\n        dropdownBehaviours: [Tabstopping.config({})]\n      }, prefix, backstage.shared);\n    };\n    var getFetch = function (items, getButton, backstage) {\n      var getMenuItemAction = function (item) {\n        return function (api) {\n          var newValue = !api.isActive();\n          api.setActive(newValue);\n          item.storage.set(newValue);\n          backstage.shared.getSink().each(function (sink) {\n            getButton().getOpt(sink).each(function (orig) {\n              focus$3(orig.element);\n              emitWith(orig, formActionEvent, {\n                name: item.name,\n                value: item.storage.get()\n              });\n            });\n          });\n        };\n      };\n      var getMenuItemSetup = function (item) {\n        return function (api) {\n          api.setActive(item.storage.get());\n        };\n      };\n      return function (success) {\n        success(map$2(items, function (item) {\n          var text = item.text.fold(function () {\n            return {};\n          }, function (text) {\n            return { text: text };\n          });\n          return __assign(__assign({\n            type: item.type,\n            active: false\n          }, text), {\n            onAction: getMenuItemAction(item),\n            onSetup: getMenuItemSetup(item)\n          });\n        }));\n      };\n    };\n\n    var renderCommonSpec = function (spec, actionOpt, extraBehaviours, dom, components, providersBackstage) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      var action = actionOpt.fold(function () {\n        return {};\n      }, function (action) {\n        return { action: action };\n      });\n      var common = __assign({\n        buttonBehaviours: derive$1([\n          DisablingConfigs.button(function () {\n            return spec.disabled || providersBackstage.isDisabled();\n          }),\n          receivingConfig(),\n          Tabstopping.config({}),\n          config('button press', [\n            preventDefault('click'),\n            preventDefault('mousedown')\n          ])\n        ].concat(extraBehaviours)),\n        eventOrder: {\n          click: [\n            'button press',\n            'alloy.base.behaviour'\n          ],\n          mousedown: [\n            'button press',\n            'alloy.base.behaviour'\n          ]\n        }\n      }, action);\n      var domFinal = deepMerge(common, { dom: dom });\n      return deepMerge(domFinal, { components: components });\n    };\n    var renderIconButtonSpec = function (spec, action, providersBackstage, extraBehaviours) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      var tooltipAttributes = spec.tooltip.map(function (tooltip) {\n        return {\n          'aria-label': providersBackstage.translate(tooltip),\n          'title': providersBackstage.translate(tooltip)\n        };\n      }).getOr({});\n      var dom = {\n        tag: 'button',\n        classes: ['tox-tbtn'],\n        attributes: tooltipAttributes\n      };\n      var icon = spec.icon.map(function (iconName) {\n        return renderIconFromPack(iconName, providersBackstage.icons);\n      });\n      var components = componentRenderPipeline([icon]);\n      return renderCommonSpec(spec, action, extraBehaviours, dom, components, providersBackstage);\n    };\n    var renderIconButton = function (spec, action, providersBackstage, extraBehaviours) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      var iconButtonSpec = renderIconButtonSpec(spec, Optional.some(action), providersBackstage, extraBehaviours);\n      return Button.sketch(iconButtonSpec);\n    };\n    var renderButtonSpec = function (spec, action, providersBackstage, extraBehaviours, extraClasses) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      if (extraClasses === void 0) {\n        extraClasses = [];\n      }\n      var translatedText = providersBackstage.translate(spec.text);\n      var icon = spec.icon ? spec.icon.map(function (iconName) {\n        return renderIconFromPack(iconName, providersBackstage.icons);\n      }) : Optional.none();\n      var components = icon.isSome() ? componentRenderPipeline([icon]) : [];\n      var innerHtml = icon.isSome() ? {} : { innerHtml: translatedText };\n      var classes = __spreadArray(__spreadArray(__spreadArray(__spreadArray([], !spec.primary && !spec.borderless ? [\n        'tox-button',\n        'tox-button--secondary'\n      ] : ['tox-button'], true), icon.isSome() ? ['tox-button--icon'] : [], true), spec.borderless ? ['tox-button--naked'] : [], true), extraClasses, true);\n      var dom = __assign(__assign({\n        tag: 'button',\n        classes: classes\n      }, innerHtml), { attributes: { title: translatedText } });\n      return renderCommonSpec(spec, action, extraBehaviours, dom, components, providersBackstage);\n    };\n    var renderButton = function (spec, action, providersBackstage, extraBehaviours, extraClasses) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      if (extraClasses === void 0) {\n        extraClasses = [];\n      }\n      var buttonSpec = renderButtonSpec(spec, Optional.some(action), providersBackstage, extraBehaviours, extraClasses);\n      return Button.sketch(buttonSpec);\n    };\n    var getAction = function (name, buttonType) {\n      return function (comp) {\n        if (buttonType === 'custom') {\n          emitWith(comp, formActionEvent, {\n            name: name,\n            value: {}\n          });\n        } else if (buttonType === 'submit') {\n          emit(comp, formSubmitEvent);\n        } else if (buttonType === 'cancel') {\n          emit(comp, formCancelEvent);\n        } else {\n          console.error('Unknown button type: ', buttonType);\n        }\n      };\n    };\n    var isMenuFooterButtonSpec = function (spec, buttonType) {\n      return buttonType === 'menu';\n    };\n    var isNormalFooterButtonSpec = function (spec, buttonType) {\n      return buttonType === 'custom' || buttonType === 'cancel' || buttonType === 'submit';\n    };\n    var renderFooterButton = function (spec, buttonType, backstage) {\n      if (isMenuFooterButtonSpec(spec, buttonType)) {\n        var getButton = function () {\n          return memButton_1;\n        };\n        var menuButtonSpec = spec;\n        var fixedSpec = __assign(__assign({}, spec), {\n          onSetup: function (api) {\n            api.setDisabled(spec.disabled);\n            return noop;\n          },\n          fetch: getFetch(menuButtonSpec.items, getButton, backstage)\n        });\n        var memButton_1 = record(renderMenuButton(fixedSpec, 'tox-tbtn', backstage, Optional.none()));\n        return memButton_1.asSpec();\n      } else if (isNormalFooterButtonSpec(spec, buttonType)) {\n        var action = getAction(spec.name, buttonType);\n        var buttonSpec = __assign(__assign({}, spec), { borderless: false });\n        return renderButton(buttonSpec, action, backstage.shared.providers, []);\n      } else {\n        console.error('Unknown footer button type: ', buttonType);\n      }\n    };\n    var renderDialogButton = function (spec, providersBackstage) {\n      var action = getAction(spec.name, 'custom');\n      return renderFormField(Optional.none(), FormField.parts.field(__assign({ factory: Button }, renderButtonSpec(spec, Optional.some(action), providersBackstage, [\n        RepresentingConfigs.memory(''),\n        ComposingConfigs.self()\n      ]))));\n    };\n\n    var schema$h = constant$1([\n      defaulted('field1Name', 'field1'),\n      defaulted('field2Name', 'field2'),\n      onStrictHandler('onLockedChange'),\n      markers$1(['lockClass']),\n      defaulted('locked', false),\n      SketchBehaviours.field('coupledFieldBehaviours', [\n        Composing,\n        Representing\n      ])\n    ]);\n    var getField = function (comp, detail, partName) {\n      return getPart(comp, detail, partName).bind(Composing.getCurrent);\n    };\n    var coupledPart = function (selfName, otherName) {\n      return required({\n        factory: FormField,\n        name: selfName,\n        overrides: function (detail) {\n          return {\n            fieldBehaviours: derive$1([config('coupled-input-behaviour', [run$1(input(), function (me) {\n                  getField(me, detail, otherName).each(function (other) {\n                    getPart(me, detail, 'lock').each(function (lock) {\n                      if (Toggling.isOn(lock)) {\n                        detail.onLockedChange(me, other, lock);\n                      }\n                    });\n                  });\n                })])])\n          };\n        }\n      });\n    };\n    var parts$c = constant$1([\n      coupledPart('field1', 'field2'),\n      coupledPart('field2', 'field1'),\n      required({\n        factory: Button,\n        schema: [required$1('dom')],\n        name: 'lock',\n        overrides: function (detail) {\n          return {\n            buttonBehaviours: derive$1([Toggling.config({\n                selected: detail.locked,\n                toggleClass: detail.markers.lockClass,\n                aria: { mode: 'pressed' }\n              })])\n          };\n        }\n      })\n    ]);\n\n    var factory$f = function (detail, components, _spec, _externals) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: SketchBehaviours.augment(detail.coupledFieldBehaviours, [\n          Composing.config({ find: Optional.some }),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (comp) {\n                var _a;\n                var parts = getPartsOrDie(comp, detail, [\n                  'field1',\n                  'field2'\n                ]);\n                return _a = {}, _a[detail.field1Name] = Representing.getValue(parts.field1()), _a[detail.field2Name] = Representing.getValue(parts.field2()), _a;\n              },\n              setValue: function (comp, value) {\n                var parts = getPartsOrDie(comp, detail, [\n                  'field1',\n                  'field2'\n                ]);\n                if (hasNonNullableKey(value, detail.field1Name)) {\n                  Representing.setValue(parts.field1(), value[detail.field1Name]);\n                }\n                if (hasNonNullableKey(value, detail.field2Name)) {\n                  Representing.setValue(parts.field2(), value[detail.field2Name]);\n                }\n              }\n            }\n          })\n        ]),\n        apis: {\n          getField1: function (component) {\n            return getPart(component, detail, 'field1');\n          },\n          getField2: function (component) {\n            return getPart(component, detail, 'field2');\n          },\n          getLock: function (component) {\n            return getPart(component, detail, 'lock');\n          }\n        }\n      };\n    };\n    var FormCoupledInputs = composite({\n      name: 'FormCoupledInputs',\n      configFields: schema$h(),\n      partFields: parts$c(),\n      factory: factory$f,\n      apis: {\n        getField1: function (apis, component) {\n          return apis.getField1(component);\n        },\n        getField2: function (apis, component) {\n          return apis.getField2(component);\n        },\n        getLock: function (apis, component) {\n          return apis.getLock(component);\n        }\n      }\n    });\n\n    var formatSize = function (size) {\n      var unitDec = {\n        '': 0,\n        'px': 0,\n        'pt': 1,\n        'mm': 1,\n        'pc': 2,\n        'ex': 2,\n        'em': 2,\n        'ch': 2,\n        'rem': 2,\n        'cm': 3,\n        'in': 4,\n        '%': 4\n      };\n      var maxDecimal = function (unit) {\n        return unit in unitDec ? unitDec[unit] : 1;\n      };\n      var numText = size.value.toFixed(maxDecimal(size.unit));\n      if (numText.indexOf('.') !== -1) {\n        numText = numText.replace(/\\.?0*$/, '');\n      }\n      return numText + size.unit;\n    };\n    var parseSize = function (sizeText) {\n      var numPattern = /^\\s*(\\d+(?:\\.\\d+)?)\\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\\s*$/;\n      var match = numPattern.exec(sizeText);\n      if (match !== null) {\n        var value = parseFloat(match[1]);\n        var unit = match[2];\n        return Result.value({\n          value: value,\n          unit: unit\n        });\n      } else {\n        return Result.error(sizeText);\n      }\n    };\n    var convertUnit = function (size, unit) {\n      var inInch = {\n        '': 96,\n        'px': 96,\n        'pt': 72,\n        'cm': 2.54,\n        'pc': 12,\n        'mm': 25.4,\n        'in': 1\n      };\n      var supported = function (u) {\n        return has$2(inInch, u);\n      };\n      if (size.unit === unit) {\n        return Optional.some(size.value);\n      } else if (supported(size.unit) && supported(unit)) {\n        if (inInch[size.unit] === inInch[unit]) {\n          return Optional.some(size.value);\n        } else {\n          return Optional.some(size.value / inInch[size.unit] * inInch[unit]);\n        }\n      } else {\n        return Optional.none();\n      }\n    };\n    var noSizeConversion = function (_input) {\n      return Optional.none();\n    };\n    var ratioSizeConversion = function (scale, unit) {\n      return function (size) {\n        return convertUnit(size, unit).map(function (value) {\n          return {\n            value: value * scale,\n            unit: unit\n          };\n        });\n      };\n    };\n    var makeRatioConverter = function (currentFieldText, otherFieldText) {\n      var cValue = parseSize(currentFieldText).toOptional();\n      var oValue = parseSize(otherFieldText).toOptional();\n      return lift2(cValue, oValue, function (cSize, oSize) {\n        return convertUnit(cSize, oSize.unit).map(function (val) {\n          return oSize.value / val;\n        }).map(function (r) {\n          return ratioSizeConversion(r, oSize.unit);\n        }).getOr(noSizeConversion);\n      }).getOr(noSizeConversion);\n    };\n\n    var renderSizeInput = function (spec, providersBackstage) {\n      var converter = noSizeConversion;\n      var ratioEvent = generate$6('ratio-event');\n      var makeIcon = function (iconName) {\n        return render$3(iconName, {\n          tag: 'span',\n          classes: [\n            'tox-icon',\n            'tox-lock-icon__' + iconName\n          ]\n        }, providersBackstage.icons);\n      };\n      var pLock = FormCoupledInputs.parts.lock({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-lock',\n            'tox-button',\n            'tox-button--naked',\n            'tox-button--icon'\n          ],\n          attributes: { title: providersBackstage.translate(spec.label.getOr('Constrain proportions')) }\n        },\n        components: [\n          makeIcon('lock'),\n          makeIcon('unlock')\n        ],\n        buttonBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            }\n          }),\n          receivingConfig(),\n          Tabstopping.config({})\n        ])\n      });\n      var formGroup = function (components) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__group']\n          },\n          components: components\n        };\n      };\n      var getFieldPart = function (isField1) {\n        return FormField.parts.field({\n          factory: Input,\n          inputClasses: ['tox-textfield'],\n          inputBehaviours: derive$1([\n            Disabling.config({\n              disabled: function () {\n                return spec.disabled || providersBackstage.isDisabled();\n              }\n            }),\n            receivingConfig(),\n            Tabstopping.config({}),\n            config('size-input-events', [\n              run$1(focusin(), function (component, _simulatedEvent) {\n                emitWith(component, ratioEvent, { isField1: isField1 });\n              }),\n              run$1(change(), function (component, _simulatedEvent) {\n                emitWith(component, formChangeEvent, { name: spec.name });\n              })\n            ])\n          ]),\n          selectOnFocus: false\n        });\n      };\n      var getLabel = function (label) {\n        return {\n          dom: {\n            tag: 'label',\n            classes: ['tox-label'],\n            innerHtml: providersBackstage.translate(label)\n          }\n        };\n      };\n      var widthField = FormCoupledInputs.parts.field1(formGroup([\n        FormField.parts.label(getLabel('Width')),\n        getFieldPart(true)\n      ]));\n      var heightField = FormCoupledInputs.parts.field2(formGroup([\n        FormField.parts.label(getLabel('Height')),\n        getFieldPart(false)\n      ]));\n      return FormCoupledInputs.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-form__controls-h-stack']\n            },\n            components: [\n              widthField,\n              heightField,\n              formGroup([\n                getLabel('&nbsp;'),\n                pLock\n              ])\n            ]\n          }],\n        field1Name: 'width',\n        field2Name: 'height',\n        locked: true,\n        markers: { lockClass: 'tox-locked' },\n        onLockedChange: function (current, other, _lock) {\n          parseSize(Representing.getValue(current)).each(function (size) {\n            converter(size).each(function (newSize) {\n              Representing.setValue(other, formatSize(newSize));\n            });\n          });\n        },\n        coupledFieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            },\n            onDisabled: function (comp) {\n              FormCoupledInputs.getField1(comp).bind(FormField.getField).each(Disabling.disable);\n              FormCoupledInputs.getField2(comp).bind(FormField.getField).each(Disabling.disable);\n              FormCoupledInputs.getLock(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormCoupledInputs.getField1(comp).bind(FormField.getField).each(Disabling.enable);\n              FormCoupledInputs.getField2(comp).bind(FormField.getField).each(Disabling.enable);\n              FormCoupledInputs.getLock(comp).each(Disabling.enable);\n            }\n          }),\n          receivingConfig(),\n          config('size-input-events2', [run$1(ratioEvent, function (component, simulatedEvent) {\n              var isField1 = simulatedEvent.event.isField1;\n              var optCurrent = isField1 ? FormCoupledInputs.getField1(component) : FormCoupledInputs.getField2(component);\n              var optOther = isField1 ? FormCoupledInputs.getField2(component) : FormCoupledInputs.getField1(component);\n              var value1 = optCurrent.map(Representing.getValue).getOr('');\n              var value2 = optOther.map(Representing.getValue).getOr('');\n              converter = makeRatioConverter(value1, value2);\n            })])\n        ])\n      });\n    };\n\n    var undo = constant$1(generate$6('undo'));\n    var redo = constant$1(generate$6('redo'));\n    var zoom = constant$1(generate$6('zoom'));\n    var back = constant$1(generate$6('back'));\n    var apply = constant$1(generate$6('apply'));\n    var swap = constant$1(generate$6('swap'));\n    var transform$1 = constant$1(generate$6('transform'));\n    var tempTransform = constant$1(generate$6('temp-transform'));\n    var transformApply = constant$1(generate$6('transform-apply'));\n    var internal = {\n      undo: undo,\n      redo: redo,\n      zoom: zoom,\n      back: back,\n      apply: apply,\n      swap: swap,\n      transform: transform$1,\n      tempTransform: tempTransform,\n      transformApply: transformApply\n    };\n    var saveState = constant$1('save-state');\n    var disable = constant$1('disable');\n    var enable = constant$1('enable');\n    var external = {\n      formActionEvent: formActionEvent,\n      saveState: saveState,\n      disable: disable,\n      enable: enable\n    };\n\n    var renderEditPanel = function (imagePanel, providersBackstage) {\n      var createButton = function (text, action, disabled, primary) {\n        return record(renderButton({\n          name: text,\n          text: text,\n          disabled: disabled,\n          primary: primary,\n          icon: Optional.none(),\n          borderless: false\n        }, action, providersBackstage));\n      };\n      var createIconButton = function (icon, tooltip, action, disabled) {\n        return record(renderIconButton({\n          name: icon,\n          icon: Optional.some(icon),\n          tooltip: Optional.some(tooltip),\n          disabled: disabled,\n          primary: false,\n          borderless: false\n        }, action, providersBackstage));\n      };\n      var disableAllComponents = function (comps, eventcomp) {\n        comps.map(function (mem) {\n          var component = mem.get(eventcomp);\n          if (component.hasConfigured(Disabling)) {\n            Disabling.disable(component);\n          }\n        });\n      };\n      var enableAllComponents = function (comps, eventcomp) {\n        comps.map(function (mem) {\n          var component = mem.get(eventcomp);\n          if (component.hasConfigured(Disabling)) {\n            Disabling.enable(component);\n          }\n        });\n      };\n      var panelDom = {\n        tag: 'div',\n        classes: [\n          'tox-image-tools__toolbar',\n          'tox-image-tools-edit-panel'\n        ]\n      };\n      var noop$1 = noop;\n      var emit$1 = function (comp, event, data) {\n        emitWith(comp, event, data);\n      };\n      var emitDisable = function (component) {\n        return emit(component, external.disable());\n      };\n      var emitEnable = function (component) {\n        return emit(component, external.enable());\n      };\n      var emitTransform = function (comp, transform) {\n        emitDisable(comp);\n        emit$1(comp, internal.transform(), { transform: transform });\n        emitEnable(comp);\n      };\n      var emitTempTransform = function (comp, transform) {\n        emitDisable(comp);\n        emit$1(comp, internal.tempTransform(), { transform: transform });\n        emitEnable(comp);\n      };\n      var getBackSwap = function (anyInSystem) {\n        return function () {\n          memContainer.getOpt(anyInSystem).each(function (container) {\n            Replacing.set(container, [ButtonPanel]);\n          });\n        };\n      };\n      var emitTransformApply = function (comp, transform) {\n        emitDisable(comp);\n        emit$1(comp, internal.transformApply(), {\n          transform: transform,\n          swap: getBackSwap(comp)\n        });\n        emitEnable(comp);\n      };\n      var createBackButton = function () {\n        return createButton('Back', function (button) {\n          return emit$1(button, internal.back(), { swap: getBackSwap(button) });\n        }, false, false);\n      };\n      var createSpacer = function () {\n        return record({\n          dom: {\n            tag: 'div',\n            classes: ['tox-spacer']\n          },\n          behaviours: derive$1([Disabling.config({})])\n        });\n      };\n      var createApplyButton = function () {\n        return createButton('Apply', function (button) {\n          return emit$1(button, internal.apply(), { swap: getBackSwap(button) });\n        }, true, true);\n      };\n      var makeCropTransform = function () {\n        return function (ir) {\n          var rect = imagePanel.getRect();\n          return crop(ir, rect.x, rect.y, rect.w, rect.h);\n        };\n      };\n      var cropPanelComponents = [\n        createBackButton(),\n        createSpacer(),\n        createButton('Apply', function (button) {\n          var transform = makeCropTransform();\n          emitTransformApply(button, transform);\n          imagePanel.hideCrop();\n        }, false, true)\n      ];\n      var CropPanel = Container.sketch({\n        dom: panelDom,\n        components: cropPanelComponents.map(function (mem) {\n          return mem.asSpec();\n        }),\n        containerBehaviours: derive$1([config('image-tools-crop-buttons-events', [\n            run$1(external.disable(), function (comp, _se) {\n              disableAllComponents(cropPanelComponents, comp);\n            }),\n            run$1(external.enable(), function (comp, _se) {\n              enableAllComponents(cropPanelComponents, comp);\n            })\n          ])])\n      });\n      var memSize = record(renderSizeInput({\n        name: 'size',\n        label: Optional.none(),\n        constrain: true,\n        disabled: false\n      }, providersBackstage));\n      var makeResizeTransform = function (width, height) {\n        return function (ir) {\n          return resize$1(ir, width, height);\n        };\n      };\n      var resizePanelComponents = [\n        createBackButton(),\n        createSpacer(),\n        memSize,\n        createSpacer(),\n        createButton('Apply', function (button) {\n          memSize.getOpt(button).each(function (sizeInput) {\n            var value = Representing.getValue(sizeInput);\n            var width = parseInt(value.width, 10);\n            var height = parseInt(value.height, 10);\n            var transform = makeResizeTransform(width, height);\n            emitTransformApply(button, transform);\n          });\n        }, false, true)\n      ];\n      var ResizePanel = Container.sketch({\n        dom: panelDom,\n        components: resizePanelComponents.map(function (mem) {\n          return mem.asSpec();\n        }),\n        containerBehaviours: derive$1([config('image-tools-resize-buttons-events', [\n            run$1(external.disable(), function (comp, _se) {\n              disableAllComponents(resizePanelComponents, comp);\n            }),\n            run$1(external.enable(), function (comp, _se) {\n              enableAllComponents(resizePanelComponents, comp);\n            })\n          ])])\n      });\n      var makeValueTransform = function (transform, value) {\n        return function (ir) {\n          return transform(ir, value);\n        };\n      };\n      var horizontalFlip = makeValueTransform(flip, 'h');\n      var verticalFlip = makeValueTransform(flip, 'v');\n      var counterclockwiseRotate = makeValueTransform(rotate, -90);\n      var clockwiseRotate = makeValueTransform(rotate, 90);\n      var flipRotateOnAction = function (comp, operation) {\n        emitTempTransform(comp, operation);\n      };\n      var flipRotateComponents = [\n        createBackButton(),\n        createSpacer(),\n        createIconButton('flip-horizontally', 'Flip horizontally', function (button) {\n          flipRotateOnAction(button, horizontalFlip);\n        }, false),\n        createIconButton('flip-vertically', 'Flip vertically', function (button) {\n          flipRotateOnAction(button, verticalFlip);\n        }, false),\n        createIconButton('rotate-left', 'Rotate counterclockwise', function (button) {\n          flipRotateOnAction(button, counterclockwiseRotate);\n        }, false),\n        createIconButton('rotate-right', 'Rotate clockwise', function (button) {\n          flipRotateOnAction(button, clockwiseRotate);\n        }, false),\n        createSpacer(),\n        createApplyButton()\n      ];\n      var FlipRotatePanel = Container.sketch({\n        dom: panelDom,\n        components: flipRotateComponents.map(function (mem) {\n          return mem.asSpec();\n        }),\n        containerBehaviours: derive$1([config('image-tools-fliprotate-buttons-events', [\n            run$1(external.disable(), function (comp, _se) {\n              disableAllComponents(flipRotateComponents, comp);\n            }),\n            run$1(external.enable(), function (comp, _se) {\n              enableAllComponents(flipRotateComponents, comp);\n            })\n          ])])\n      });\n      var makeSlider = function (label, onChoose, min, value, max) {\n        var labelPart = Slider.parts.label({\n          dom: {\n            tag: 'label',\n            classes: ['tox-label'],\n            innerHtml: providersBackstage.translate(label)\n          }\n        });\n        var spectrum = Slider.parts.spectrum({\n          dom: {\n            tag: 'div',\n            classes: ['tox-slider__rail'],\n            attributes: { role: 'presentation' }\n          }\n        });\n        var thumb = Slider.parts.thumb({\n          dom: {\n            tag: 'div',\n            classes: ['tox-slider__handle'],\n            attributes: { role: 'presentation' }\n          }\n        });\n        return record(Slider.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-slider'],\n            attributes: { role: 'presentation' }\n          },\n          model: {\n            mode: 'x',\n            minX: min,\n            maxX: max,\n            getInitialValue: constant$1({ x: value })\n          },\n          components: [\n            labelPart,\n            spectrum,\n            thumb\n          ],\n          sliderBehaviours: derive$1([Focusing.config({})]),\n          onChoose: onChoose\n        }));\n      };\n      var makeVariableSlider = function (label, transform, min, value, max) {\n        var onChoose = function (slider, _thumb, value) {\n          var valTransform = makeValueTransform(transform, value.x / 100);\n          emitTransform(slider, valTransform);\n        };\n        return makeSlider(label, onChoose, min, value, max);\n      };\n      var variableFilterPanelComponents = function (label, transform, min, value, max) {\n        return [\n          createBackButton(),\n          makeVariableSlider(label, transform, min, value, max),\n          createApplyButton()\n        ];\n      };\n      var createVariableFilterPanel = function (label, transform, min, value, max) {\n        var filterPanelComponents = variableFilterPanelComponents(label, transform, min, value, max);\n        return Container.sketch({\n          dom: panelDom,\n          components: filterPanelComponents.map(function (mem) {\n            return mem.asSpec();\n          }),\n          containerBehaviours: derive$1([config('image-tools-filter-panel-buttons-events', [\n              run$1(external.disable(), function (comp, _se) {\n                disableAllComponents(filterPanelComponents, comp);\n              }),\n              run$1(external.enable(), function (comp, _se) {\n                enableAllComponents(filterPanelComponents, comp);\n              })\n            ])])\n        });\n      };\n      var filterPanelComponents = [\n        createBackButton(),\n        createSpacer(),\n        createApplyButton()\n      ];\n      var FilterPanel = Container.sketch({\n        dom: panelDom,\n        components: filterPanelComponents.map(function (mem) {\n          return mem.asSpec();\n        })\n      });\n      var BrightnessPanel = createVariableFilterPanel('Brightness', brightness, -100, 0, 100);\n      var ContrastPanel = createVariableFilterPanel('Contrast', contrast, -100, 0, 100);\n      var GammaPanel = createVariableFilterPanel('Gamma', gamma, -100, 0, 100);\n      var makeColorTransform = function (red, green, blue) {\n        return function (ir) {\n          return colorize(ir, red, green, blue);\n        };\n      };\n      var makeColorSlider = function (label) {\n        var onChoose = function (slider, _thumb, _value) {\n          var redOpt = memRed.getOpt(slider);\n          var blueOpt = memBlue.getOpt(slider);\n          var greenOpt = memGreen.getOpt(slider);\n          redOpt.each(function (red) {\n            blueOpt.each(function (blue) {\n              greenOpt.each(function (green) {\n                var r = Representing.getValue(red).x / 100;\n                var g = Representing.getValue(green).x / 100;\n                var b = Representing.getValue(blue).x / 100;\n                var transform = makeColorTransform(r, g, b);\n                emitTransform(slider, transform);\n              });\n            });\n          });\n        };\n        return makeSlider(label, onChoose, 0, 100, 200);\n      };\n      var memRed = makeColorSlider('R');\n      var memGreen = makeColorSlider('G');\n      var memBlue = makeColorSlider('B');\n      var colorizePanelComponents = [\n        createBackButton(),\n        memRed,\n        memGreen,\n        memBlue,\n        createApplyButton()\n      ];\n      var ColorizePanel = Container.sketch({\n        dom: panelDom,\n        components: colorizePanelComponents.map(function (mem) {\n          return mem.asSpec();\n        })\n      });\n      var getTransformPanelEvent = function (panel, transform, update) {\n        return function (button) {\n          var swap = function () {\n            memContainer.getOpt(button).each(function (container) {\n              Replacing.set(container, [panel]);\n              update(container);\n            });\n          };\n          emit$1(button, internal.swap(), {\n            transform: transform,\n            swap: swap\n          });\n        };\n      };\n      var cropPanelUpdate = function (_anyInSystem) {\n        imagePanel.showCrop();\n      };\n      var resizePanelUpdate = function (anyInSystem) {\n        memSize.getOpt(anyInSystem).each(function (sizeInput) {\n          var measurements = imagePanel.getMeasurements();\n          var width = measurements.width;\n          var height = measurements.height;\n          Representing.setValue(sizeInput, {\n            width: width,\n            height: height\n          });\n        });\n      };\n      var sharpenTransform = Optional.some(sharpen);\n      var invertTransform = Optional.some(invert);\n      var buttonPanelComponents = [\n        createIconButton('crop', 'Crop', getTransformPanelEvent(CropPanel, Optional.none(), cropPanelUpdate), false),\n        createIconButton('resize', 'Resize', getTransformPanelEvent(ResizePanel, Optional.none(), resizePanelUpdate), false),\n        createIconButton('orientation', 'Orientation', getTransformPanelEvent(FlipRotatePanel, Optional.none(), noop$1), false),\n        createIconButton('brightness', 'Brightness', getTransformPanelEvent(BrightnessPanel, Optional.none(), noop$1), false),\n        createIconButton('sharpen', 'Sharpen', getTransformPanelEvent(FilterPanel, sharpenTransform, noop$1), false),\n        createIconButton('contrast', 'Contrast', getTransformPanelEvent(ContrastPanel, Optional.none(), noop$1), false),\n        createIconButton('color-levels', 'Color levels', getTransformPanelEvent(ColorizePanel, Optional.none(), noop$1), false),\n        createIconButton('gamma', 'Gamma', getTransformPanelEvent(GammaPanel, Optional.none(), noop$1), false),\n        createIconButton('invert', 'Invert', getTransformPanelEvent(FilterPanel, invertTransform, noop$1), false)\n      ];\n      var ButtonPanel = Container.sketch({\n        dom: panelDom,\n        components: buttonPanelComponents.map(function (mem) {\n          return mem.asSpec();\n        })\n      });\n      var container = Container.sketch({\n        dom: { tag: 'div' },\n        components: [ButtonPanel],\n        containerBehaviours: derive$1([Replacing.config({})])\n      });\n      var memContainer = record(container);\n      var getApplyButton = function (anyInSystem) {\n        return memContainer.getOpt(anyInSystem).map(function (container) {\n          var panel = container.components()[0];\n          return panel.components()[panel.components().length - 1];\n        });\n      };\n      return {\n        memContainer: memContainer,\n        getApplyButton: getApplyButton\n      };\n    };\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.geom.Rect');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.Observable');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var getDocumentSize = function (doc) {\n      var max = Math.max;\n      var documentElement = doc.documentElement;\n      var body = doc.body;\n      var scrollWidth = max(documentElement.scrollWidth, body.scrollWidth);\n      var clientWidth = max(documentElement.clientWidth, body.clientWidth);\n      var offsetWidth = max(documentElement.offsetWidth, body.offsetWidth);\n      var scrollHeight = max(documentElement.scrollHeight, body.scrollHeight);\n      var clientHeight = max(documentElement.clientHeight, body.clientHeight);\n      var offsetHeight = max(documentElement.offsetHeight, body.offsetHeight);\n      return {\n        width: scrollWidth < offsetWidth ? clientWidth : scrollWidth,\n        height: scrollHeight < offsetHeight ? clientHeight : scrollHeight\n      };\n    };\n    var isTouchEvent$1 = function (e) {\n      return isNonNullable(e.changedTouches);\n    };\n    var updateWithTouchData = function (e) {\n      if (isTouchEvent$1(e)) {\n        var keys = 'screenX screenY pageX pageY clientX clientY'.split(' ');\n        for (var i = 0; i < keys.length; i++) {\n          e[keys[i]] = e.changedTouches[0][keys[i]];\n        }\n      }\n    };\n    function DragHelper (id, settings) {\n      var _a, _b, _c;\n      var eventOverlay;\n      var handleEvents = [];\n      var overlayEvents = [];\n      var doc = (_a = settings.document) !== null && _a !== void 0 ? _a : document;\n      var root = (_b = settings.root) !== null && _b !== void 0 ? _b : doc;\n      var sugarDoc = SugarElement.fromDom(doc);\n      var downButton;\n      var startX;\n      var startY;\n      var handleElement = SugarElement.fromDom(root.getElementById((_c = settings.handle) !== null && _c !== void 0 ? _c : id));\n      var start = function (e) {\n        var rawEvent = e.raw;\n        var docSize = getDocumentSize(doc);\n        updateWithTouchData(rawEvent);\n        e.prevent();\n        downButton = rawEvent.button;\n        startX = rawEvent.screenX;\n        startY = rawEvent.screenY;\n        var cursor = get$c(handleElement, 'cursor');\n        eventOverlay = SugarElement.fromTag('div', doc);\n        setAll(eventOverlay, {\n          'position': 'absolute',\n          'top': '0',\n          'left': '0',\n          'width': docSize.width + 'px',\n          'height': docSize.height + 'px',\n          'z-index': 2147483647 + '',\n          'opacity': '0.0001',\n          cursor: cursor\n        });\n        append$2(getBody(sugarDoc), eventOverlay);\n        overlayEvents.push(bind(sugarDoc, 'mousemove', drag), bind(sugarDoc, 'touchmove', drag), bind(sugarDoc, 'mouseup', stop), bind(sugarDoc, 'touchend', stop));\n        settings.start(rawEvent);\n      };\n      var drag = function (e) {\n        var rawEvent = e.raw;\n        updateWithTouchData(rawEvent);\n        if (rawEvent.button !== downButton) {\n          return stop(e);\n        }\n        rawEvent.deltaX = rawEvent.screenX - startX;\n        rawEvent.deltaY = rawEvent.screenY - startY;\n        e.prevent();\n        settings.drag(rawEvent);\n      };\n      var stop = function (e) {\n        updateWithTouchData(e.raw);\n        each$1(overlayEvents, function (e) {\n          return e.unbind();\n        });\n        overlayEvents = [];\n        remove$5(eventOverlay);\n        if (settings.stop) {\n          settings.stop(e.raw);\n        }\n      };\n      var destroy = function () {\n        each$1(overlayEvents.concat(handleEvents), function (e) {\n          return e.unbind();\n        });\n        overlayEvents = [];\n        handleEvents = [];\n        if (isNonNullable(eventOverlay)) {\n          remove$5(eventOverlay);\n        }\n      };\n      handleEvents.push(bind(handleElement, 'mousedown', start), bind(handleElement, 'touchstart', start));\n      return { destroy: destroy };\n    }\n\n    var count = 0;\n    var create$1 = function (currentRect, viewPortRect, clampRect, containerElm, action) {\n      var dragHelpers;\n      var events = [];\n      var prefix = 'tox-';\n      var id = prefix + 'crid-' + count++;\n      var container = SugarElement.fromDom(containerElm);\n      var handles = [\n        {\n          name: 'move',\n          xMul: 0,\n          yMul: 0,\n          deltaX: 1,\n          deltaY: 1,\n          deltaW: 0,\n          deltaH: 0,\n          label: 'Crop Mask'\n        },\n        {\n          name: 'nw',\n          xMul: 0,\n          yMul: 0,\n          deltaX: 1,\n          deltaY: 1,\n          deltaW: -1,\n          deltaH: -1,\n          label: 'Top Left Crop Handle'\n        },\n        {\n          name: 'ne',\n          xMul: 1,\n          yMul: 0,\n          deltaX: 0,\n          deltaY: 1,\n          deltaW: 1,\n          deltaH: -1,\n          label: 'Top Right Crop Handle'\n        },\n        {\n          name: 'sw',\n          xMul: 0,\n          yMul: 1,\n          deltaX: 1,\n          deltaY: 0,\n          deltaW: -1,\n          deltaH: 1,\n          label: 'Bottom Left Crop Handle'\n        },\n        {\n          name: 'se',\n          xMul: 1,\n          yMul: 1,\n          deltaX: 0,\n          deltaY: 0,\n          deltaW: 1,\n          deltaH: 1,\n          label: 'Bottom Right Crop Handle'\n        }\n      ];\n      var blockers = [\n        'top',\n        'right',\n        'bottom',\n        'left'\n      ];\n      var getAbsoluteRect = function (outerRect, relativeRect) {\n        return {\n          x: relativeRect.x + outerRect.x,\n          y: relativeRect.y + outerRect.y,\n          w: relativeRect.w,\n          h: relativeRect.h\n        };\n      };\n      var getRelativeRect = function (outerRect, innerRect) {\n        return {\n          x: innerRect.x - outerRect.x,\n          y: innerRect.y - outerRect.y,\n          w: innerRect.w,\n          h: innerRect.h\n        };\n      };\n      var getInnerRect = function () {\n        return getRelativeRect(clampRect, currentRect);\n      };\n      var moveRect = function (handle, startRect, deltaX, deltaY) {\n        var x = startRect.x + deltaX * handle.deltaX;\n        var y = startRect.y + deltaY * handle.deltaY;\n        var w = Math.max(20, startRect.w + deltaX * handle.deltaW);\n        var h = Math.max(20, startRect.h + deltaY * handle.deltaH);\n        var rect = currentRect = global$4.clamp({\n          x: x,\n          y: y,\n          w: w,\n          h: h\n        }, clampRect, handle.name === 'move');\n        rect = getRelativeRect(clampRect, rect);\n        instance.fire('updateRect', { rect: rect });\n        setInnerRect(rect);\n      };\n      var render = function () {\n        var createDragHelper = function (handle) {\n          var startRect;\n          return DragHelper(id, {\n            document: containerElm.ownerDocument,\n            root: getRootNode(container).dom,\n            handle: id + '-' + handle.name,\n            start: function () {\n              startRect = currentRect;\n            },\n            drag: function (e) {\n              moveRect(handle, startRect, e.deltaX, e.deltaY);\n            }\n          });\n        };\n        var cropContainer = SugarElement.fromTag('div');\n        setAll$1(cropContainer, {\n          id: id,\n          'class': prefix + 'croprect-container',\n          'role': 'grid',\n          'aria-dropeffect': 'execute'\n        });\n        append$2(container, cropContainer);\n        each$1(blockers, function (blocker) {\n          descendant(container, '#' + id).each(function (blockerElm) {\n            var cropBlocker = SugarElement.fromTag('div');\n            setAll$1(cropBlocker, {\n              'id': id + '-' + blocker,\n              'class': prefix + 'croprect-block',\n              'data-mce-bogus': 'all'\n            });\n            set$7(cropBlocker, 'display', 'none');\n            append$2(blockerElm, cropBlocker);\n          });\n        });\n        each$1(handles, function (handle) {\n          descendant(container, '#' + id).each(function (handleElm) {\n            var cropHandle = SugarElement.fromTag('div');\n            setAll$1(cropHandle, {\n              'id': id + '-' + handle.name,\n              'aria-label': handle.label,\n              'aria-grabbed': 'false',\n              'data-mce-bogus': 'all',\n              'role': 'gridcell',\n              'tabindex': '-1',\n              'title': handle.label\n            });\n            add$1(cropHandle, [\n              prefix + 'croprect-handle',\n              prefix + 'croprect-handle-' + handle.name\n            ]);\n            set$7(cropHandle, 'display', 'none');\n            append$2(handleElm, cropHandle);\n          });\n        });\n        dragHelpers = map$2(handles, createDragHelper);\n        repaint(currentRect);\n        var handleFocus = function (e) {\n          set$8(e.target, 'aria-grabbed', e.raw.type === 'focus' ? 'true' : 'false');\n        };\n        var handleKeydown = function (e) {\n          var activeHandle;\n          each$1(handles, function (handle) {\n            if (get$d(e.target, 'id') === id + '-' + handle.name) {\n              activeHandle = handle;\n              return false;\n            }\n          });\n          var moveAndBlock = function (evt, handle, startRect, deltaX, deltaY) {\n            evt.stopPropagation();\n            evt.preventDefault();\n            moveRect(activeHandle, startRect, deltaX, deltaY);\n          };\n          switch (e.raw.keyCode) {\n          case global$2.LEFT:\n            moveAndBlock(e, activeHandle, currentRect, -10, 0);\n            break;\n          case global$2.RIGHT:\n            moveAndBlock(e, activeHandle, currentRect, 10, 0);\n            break;\n          case global$2.UP:\n            moveAndBlock(e, activeHandle, currentRect, 0, -10);\n            break;\n          case global$2.DOWN:\n            moveAndBlock(e, activeHandle, currentRect, 0, 10);\n            break;\n          case global$2.ENTER:\n          case global$2.SPACEBAR:\n            e.prevent();\n            action();\n            break;\n          }\n        };\n        events.push(bind(container, 'focusin', handleFocus), bind(container, 'focusout', handleFocus), bind(container, 'keydown', handleKeydown));\n      };\n      var toggleVisibility = function (state) {\n        var selectors = __spreadArray(__spreadArray([], map$2(handles, function (handle) {\n          return '#' + id + '-' + handle.name;\n        }), true), map$2(blockers, function (blocker) {\n          return '#' + id + '-' + blocker;\n        }), true).join(',');\n        var elems = descendants(container, selectors);\n        if (state) {\n          each$1(elems, function (elm) {\n            return remove$6(elm, 'display');\n          });\n        } else {\n          each$1(elems, function (elm) {\n            return set$7(elm, 'display', 'none');\n          });\n        }\n      };\n      var repaint = function (rect) {\n        var updateElementRect = function (name, newRect) {\n          descendant(container, '#' + id + '-' + name).each(function (elm) {\n            setAll(elm, {\n              left: newRect.x + 'px',\n              top: newRect.y + 'px',\n              width: Math.max(0, newRect.w) + 'px',\n              height: Math.max(0, newRect.h) + 'px'\n            });\n          });\n        };\n        each$1(handles, function (handle) {\n          descendant(container, '#' + id + '-' + handle.name).each(function (elm) {\n            setAll(elm, {\n              left: rect.w * handle.xMul + rect.x + 'px',\n              top: rect.h * handle.yMul + rect.y + 'px'\n            });\n          });\n        });\n        updateElementRect('top', {\n          x: viewPortRect.x,\n          y: viewPortRect.y,\n          w: viewPortRect.w,\n          h: rect.y - viewPortRect.y\n        });\n        updateElementRect('right', {\n          x: rect.x + rect.w,\n          y: rect.y,\n          w: viewPortRect.w - rect.x - rect.w + viewPortRect.x,\n          h: rect.h\n        });\n        updateElementRect('bottom', {\n          x: viewPortRect.x,\n          y: rect.y + rect.h,\n          w: viewPortRect.w,\n          h: viewPortRect.h - rect.y - rect.h + viewPortRect.y\n        });\n        updateElementRect('left', {\n          x: viewPortRect.x,\n          y: rect.y,\n          w: rect.x - viewPortRect.x,\n          h: rect.h\n        });\n        updateElementRect('move', rect);\n      };\n      var setRect = function (rect) {\n        currentRect = rect;\n        repaint(currentRect);\n      };\n      var setViewPortRect = function (rect) {\n        viewPortRect = rect;\n        repaint(currentRect);\n      };\n      var setInnerRect = function (rect) {\n        setRect(getAbsoluteRect(clampRect, rect));\n      };\n      var setClampRect = function (rect) {\n        clampRect = rect;\n        repaint(currentRect);\n      };\n      var destroy = function () {\n        each$1(dragHelpers, function (helper) {\n          return helper.destroy();\n        });\n        dragHelpers = [];\n        each$1(events, function (e) {\n          return e.unbind();\n        });\n        events = [];\n      };\n      render();\n      var instance = __assign(__assign({}, global$3), {\n        toggleVisibility: toggleVisibility,\n        setClampRect: setClampRect,\n        setRect: setRect,\n        getInnerRect: getInnerRect,\n        setInnerRect: setInnerRect,\n        setViewPortRect: setViewPortRect,\n        destroy: destroy\n      });\n      return instance;\n    };\n    var CropRect = { create: create$1 };\n\n    var loadImage = function (image) {\n      return new global$c(function (resolve) {\n        var loaded = function () {\n          image.removeEventListener('load', loaded);\n          resolve(image);\n        };\n        if (image.complete) {\n          resolve(image);\n        } else {\n          image.addEventListener('load', loaded);\n        }\n      });\n    };\n    var renderImagePanel = function (initialUrl) {\n      var memBg = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-image-tools__image-bg'],\n          attributes: { role: 'presentation' }\n        }\n      });\n      var zoomState = Cell(1);\n      var cropRect = api$1();\n      var rectState = Cell({\n        x: 0,\n        y: 0,\n        w: 1,\n        h: 1\n      });\n      var viewRectState = Cell({\n        x: 0,\n        y: 0,\n        w: 1,\n        h: 1\n      });\n      var repaintImg = function (anyInSystem, img) {\n        memContainer.getOpt(anyInSystem).each(function (panel) {\n          var zoom = zoomState.get();\n          var panelW = get$a(panel.element);\n          var panelH = get$b(panel.element);\n          var width = img.dom.naturalWidth * zoom;\n          var height = img.dom.naturalHeight * zoom;\n          var left = Math.max(0, panelW / 2 - width / 2);\n          var top = Math.max(0, panelH / 2 - height / 2);\n          var css = {\n            left: left.toString() + 'px',\n            top: top.toString() + 'px',\n            width: width.toString() + 'px',\n            height: height.toString() + 'px',\n            position: 'absolute'\n          };\n          setAll(img, css);\n          memBg.getOpt(panel).each(function (bg) {\n            setAll(bg.element, css);\n          });\n          cropRect.run(function (cRect) {\n            var rect = rectState.get();\n            cRect.setRect({\n              x: rect.x * zoom + left,\n              y: rect.y * zoom + top,\n              w: rect.w * zoom,\n              h: rect.h * zoom\n            });\n            cRect.setClampRect({\n              x: left,\n              y: top,\n              w: width,\n              h: height\n            });\n            cRect.setViewPortRect({\n              x: 0,\n              y: 0,\n              w: panelW,\n              h: panelH\n            });\n          });\n        });\n      };\n      var zoomFit = function (anyInSystem, img) {\n        memContainer.getOpt(anyInSystem).each(function (panel) {\n          var panelW = get$a(panel.element);\n          var panelH = get$b(panel.element);\n          var width = img.dom.naturalWidth;\n          var height = img.dom.naturalHeight;\n          var zoom = Math.min(panelW / width, panelH / height);\n          if (zoom >= 1) {\n            zoomState.set(1);\n          } else {\n            zoomState.set(zoom);\n          }\n        });\n      };\n      var updateSrc = function (anyInSystem, url) {\n        var img = SugarElement.fromTag('img');\n        set$8(img, 'src', url);\n        return loadImage(img.dom).then(function () {\n          if (anyInSystem.getSystem().isConnected()) {\n            memContainer.getOpt(anyInSystem).map(function (panel) {\n              var aImg = external$2({ element: img });\n              Replacing.replaceAt(panel, 1, Optional.some(aImg));\n              var lastViewRect = viewRectState.get();\n              var viewRect = {\n                x: 0,\n                y: 0,\n                w: img.dom.naturalWidth,\n                h: img.dom.naturalHeight\n              };\n              viewRectState.set(viewRect);\n              var rect = global$4.inflate(viewRect, -20, -20);\n              rectState.set(rect);\n              if (lastViewRect.w !== viewRect.w || lastViewRect.h !== viewRect.h) {\n                zoomFit(panel, img);\n              }\n              repaintImg(panel, img);\n            });\n          }\n        });\n      };\n      var zoom = function (anyInSystem, direction) {\n        var currentZoom = zoomState.get();\n        var newZoom = direction > 0 ? Math.min(2, currentZoom + 0.1) : Math.max(0.1, currentZoom - 0.1);\n        zoomState.set(newZoom);\n        memContainer.getOpt(anyInSystem).each(function (panel) {\n          var img = panel.components()[1].element;\n          repaintImg(panel, img);\n        });\n      };\n      var showCrop = function () {\n        cropRect.run(function (cRect) {\n          cRect.toggleVisibility(true);\n        });\n      };\n      var hideCrop = function () {\n        cropRect.run(function (cRect) {\n          cRect.toggleVisibility(false);\n        });\n      };\n      var getRect = function () {\n        return rectState.get();\n      };\n      var container = Container.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-image-tools__image']\n        },\n        components: [\n          memBg.asSpec(),\n          {\n            dom: {\n              tag: 'img',\n              attributes: { src: initialUrl }\n            }\n          },\n          {\n            dom: { tag: 'div' },\n            behaviours: derive$1([config('image-panel-crop-events', [\n                runOnAttached(function (comp) {\n                  memContainer.getOpt(comp).each(function (container) {\n                    var el = container.element.dom;\n                    var cRect = CropRect.create({\n                      x: 10,\n                      y: 10,\n                      w: 100,\n                      h: 100\n                    }, {\n                      x: 0,\n                      y: 0,\n                      w: 200,\n                      h: 200\n                    }, {\n                      x: 0,\n                      y: 0,\n                      w: 200,\n                      h: 200\n                    }, el, noop);\n                    cRect.toggleVisibility(false);\n                    cRect.on('updateRect', function (e) {\n                      var rect = e.rect;\n                      var zoom = zoomState.get();\n                      var newRect = {\n                        x: Math.round(rect.x / zoom),\n                        y: Math.round(rect.y / zoom),\n                        w: Math.round(rect.w / zoom),\n                        h: Math.round(rect.h / zoom)\n                      };\n                      rectState.set(newRect);\n                    });\n                    cropRect.set(cRect);\n                  });\n                }),\n                runOnDetached(function () {\n                  cropRect.clear();\n                })\n              ])])\n          }\n        ],\n        containerBehaviours: derive$1([\n          Replacing.config({}),\n          config('image-panel-events', [runOnAttached(function (comp) {\n              updateSrc(comp, initialUrl);\n            })])\n        ])\n      });\n      var memContainer = record(container);\n      var getMeasurements = function () {\n        var viewRect = viewRectState.get();\n        return {\n          width: viewRect.w,\n          height: viewRect.h\n        };\n      };\n      return {\n        memContainer: memContainer,\n        updateSrc: updateSrc,\n        zoom: zoom,\n        showCrop: showCrop,\n        hideCrop: hideCrop,\n        getRect: getRect,\n        getMeasurements: getMeasurements\n      };\n    };\n\n    var createButton = function (innerHtml, icon, disabled, action, providersBackstage) {\n      return renderIconButton({\n        name: innerHtml,\n        icon: Optional.some(icon),\n        disabled: disabled,\n        tooltip: Optional.some(innerHtml),\n        primary: false,\n        borderless: false\n      }, action, providersBackstage);\n    };\n    var setButtonEnabled = function (button, enabled) {\n      if (enabled) {\n        Disabling.enable(button);\n      } else {\n        Disabling.disable(button);\n      }\n    };\n    var renderSideBar = function (providersBackstage) {\n      var updateButtonUndoStates = function (anyInSystem, undoEnabled, redoEnabled) {\n        memUndo.getOpt(anyInSystem).each(function (undo) {\n          setButtonEnabled(undo, undoEnabled);\n        });\n        memRedo.getOpt(anyInSystem).each(function (redo) {\n          setButtonEnabled(redo, redoEnabled);\n        });\n      };\n      var memUndo = record(createButton('Undo', 'undo', true, function (button) {\n        emitWith(button, internal.undo(), { direction: 1 });\n      }, providersBackstage));\n      var memRedo = record(createButton('Redo', 'redo', true, function (button) {\n        emitWith(button, internal.redo(), { direction: 1 });\n      }, providersBackstage));\n      var container = Container.sketch({\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-image-tools__toolbar',\n            'tox-image-tools__sidebar'\n          ]\n        },\n        components: [\n          memUndo.asSpec(),\n          memRedo.asSpec(),\n          createButton('Zoom in', 'zoom-in', false, function (button) {\n            emitWith(button, internal.zoom(), { direction: 1 });\n          }, providersBackstage),\n          createButton('Zoom out', 'zoom-out', false, function (button) {\n            emitWith(button, internal.zoom(), { direction: -1 });\n          }, providersBackstage)\n        ]\n      });\n      return {\n        container: container,\n        updateButtonUndoStates: updateButtonUndoStates\n      };\n    };\n\n    function UndoStack () {\n      var data = [];\n      var index = -1;\n      var add = function (state) {\n        var removed = data.splice(++index);\n        data.push(state);\n        return {\n          state: state,\n          removed: removed\n        };\n      };\n      var undo = function () {\n        if (canUndo()) {\n          return data[--index];\n        }\n      };\n      var redo = function () {\n        if (canRedo()) {\n          return data[++index];\n        }\n      };\n      var canUndo = function () {\n        return index > 0;\n      };\n      var canRedo = function () {\n        return index !== -1 && index < data.length - 1;\n      };\n      return {\n        data: data,\n        add: add,\n        undo: undo,\n        redo: redo,\n        canUndo: canUndo,\n        canRedo: canRedo\n      };\n    }\n\n    var makeState = function (initialState) {\n      var blobState = Cell(initialState);\n      var tempState = value$1();\n      var undoStack = UndoStack();\n      undoStack.add(initialState);\n      var getBlobState = function () {\n        return blobState.get();\n      };\n      var setBlobState = function (state) {\n        blobState.set(state);\n      };\n      var getTempState = function () {\n        return tempState.get().getOrThunk(blobState.get);\n      };\n      var updateTempState = function (blob) {\n        var newTempState = createState(blob);\n        destroyTempState();\n        tempState.set(newTempState);\n        return newTempState.url;\n      };\n      var createState = function (blob) {\n        return {\n          blob: blob,\n          url: URL.createObjectURL(blob)\n        };\n      };\n      var destroyState = function (state) {\n        URL.revokeObjectURL(state.url);\n      };\n      var destroyStates = function (states) {\n        global$5.each(states, destroyState);\n      };\n      var destroyTempState = function () {\n        tempState.on(destroyState);\n        tempState.clear();\n      };\n      var addBlobState = function (blob) {\n        var newState = createState(blob);\n        setBlobState(newState);\n        var removed = undoStack.add(newState).removed;\n        destroyStates(removed);\n        return newState.url;\n      };\n      var addTempState = function (blob) {\n        var newState = createState(blob);\n        tempState.set(newState);\n        return newState.url;\n      };\n      var applyTempState = function (postApply) {\n        return tempState.get().fold(noop, function (temp) {\n          addBlobState(temp.blob);\n          postApply();\n        });\n      };\n      var undo = function () {\n        var currentState = undoStack.undo();\n        setBlobState(currentState);\n        return currentState.url;\n      };\n      var redo = function () {\n        var currentState = undoStack.redo();\n        setBlobState(currentState);\n        return currentState.url;\n      };\n      var getHistoryStates = function () {\n        var undoEnabled = undoStack.canUndo();\n        var redoEnabled = undoStack.canRedo();\n        return {\n          undoEnabled: undoEnabled,\n          redoEnabled: redoEnabled\n        };\n      };\n      return {\n        getBlobState: getBlobState,\n        setBlobState: setBlobState,\n        addBlobState: addBlobState,\n        getTempState: getTempState,\n        updateTempState: updateTempState,\n        addTempState: addTempState,\n        applyTempState: applyTempState,\n        destroyTempState: destroyTempState,\n        undo: undo,\n        redo: redo,\n        getHistoryStates: getHistoryStates\n      };\n    };\n\n    var renderImageTools = function (detail, providersBackstage) {\n      var state = makeState(detail.currentState);\n      var zoom = function (anyInSystem, simulatedEvent) {\n        var direction = simulatedEvent.event.direction;\n        imagePanel.zoom(anyInSystem, direction);\n      };\n      var updateButtonUndoStates = function (anyInSystem) {\n        var historyStates = state.getHistoryStates();\n        sideBar.updateButtonUndoStates(anyInSystem, historyStates.undoEnabled, historyStates.redoEnabled);\n        emitWith(anyInSystem, external.formActionEvent, {\n          name: external.saveState(),\n          value: historyStates.undoEnabled\n        });\n      };\n      var disableUndoRedo = function (anyInSystem) {\n        sideBar.updateButtonUndoStates(anyInSystem, false, false);\n      };\n      var undo = function (anyInSystem, _simulatedEvent) {\n        var url = state.undo();\n        updateSrc(anyInSystem, url).then(function (_oImg) {\n          unblock(anyInSystem);\n          updateButtonUndoStates(anyInSystem);\n        });\n      };\n      var redo = function (anyInSystem, _simulatedEvent) {\n        var url = state.redo();\n        updateSrc(anyInSystem, url).then(function (_oImg) {\n          unblock(anyInSystem);\n          updateButtonUndoStates(anyInSystem);\n        });\n      };\n      var imageResultToBlob = function (ir) {\n        return ir.toBlob();\n      };\n      var block = function (anyInSystem) {\n        emitWith(anyInSystem, external.formActionEvent, {\n          name: external.disable(),\n          value: {}\n        });\n      };\n      var unblock = function (anyInSystem) {\n        editPanel.getApplyButton(anyInSystem).each(function (applyButton) {\n          Disabling.enable(applyButton);\n        });\n        emitWith(anyInSystem, external.formActionEvent, {\n          name: external.enable(),\n          value: {}\n        });\n      };\n      var updateSrc = function (anyInSystem, src) {\n        block(anyInSystem);\n        return imagePanel.updateSrc(anyInSystem, src);\n      };\n      var blobManipulate = function (anyInSystem, blob, filter, action, swap) {\n        block(anyInSystem);\n        blobToImageResult(blob).then(filter).then(imageResultToBlob).then(action).then(function (url) {\n          return updateSrc(anyInSystem, url);\n        }).then(function () {\n          updateButtonUndoStates(anyInSystem);\n          swap();\n          unblock(anyInSystem);\n        }).catch(function (err) {\n          console.log(err);\n          if (anyInSystem.getSystem().isConnected()) {\n            unblock(anyInSystem);\n          }\n        });\n      };\n      var manipulate = function (anyInSystem, filter, swap) {\n        var blob = state.getBlobState().blob;\n        var action = function (blob) {\n          return state.updateTempState(blob);\n        };\n        blobManipulate(anyInSystem, blob, filter, action, swap);\n      };\n      var tempManipulate = function (anyInSystem, filter) {\n        var blob = state.getTempState().blob;\n        var action = function (blob) {\n          return state.addTempState(blob);\n        };\n        blobManipulate(anyInSystem, blob, filter, action, noop);\n      };\n      var manipulateApply = function (anyInSystem, filter, swap) {\n        var blob = state.getBlobState().blob;\n        var action = function (blob) {\n          var url = state.addBlobState(blob);\n          destroyTempState(anyInSystem);\n          return url;\n        };\n        blobManipulate(anyInSystem, blob, filter, action, swap);\n      };\n      var apply = function (anyInSystem, simulatedEvent) {\n        var postApply = function () {\n          destroyTempState(anyInSystem);\n          var swap = simulatedEvent.event.swap;\n          swap();\n        };\n        state.applyTempState(postApply);\n      };\n      var destroyTempState = function (anyInSystem) {\n        var currentUrl = state.getBlobState().url;\n        state.destroyTempState();\n        updateButtonUndoStates(anyInSystem);\n        return currentUrl;\n      };\n      var cancel = function (anyInSystem) {\n        var currentUrl = destroyTempState(anyInSystem);\n        updateSrc(anyInSystem, currentUrl).then(function (_oImg) {\n          unblock(anyInSystem);\n        });\n      };\n      var back = function (anyInSystem, simulatedEvent) {\n        cancel(anyInSystem);\n        var swap = simulatedEvent.event.swap;\n        swap();\n        imagePanel.hideCrop();\n      };\n      var transform = function (anyInSystem, simulatedEvent) {\n        return manipulate(anyInSystem, simulatedEvent.event.transform, noop);\n      };\n      var tempTransform = function (anyInSystem, simulatedEvent) {\n        return tempManipulate(anyInSystem, simulatedEvent.event.transform);\n      };\n      var transformApply = function (anyInSystem, simulatedEvent) {\n        return manipulateApply(anyInSystem, simulatedEvent.event.transform, simulatedEvent.event.swap);\n      };\n      var imagePanel = renderImagePanel(detail.currentState.url);\n      var sideBar = renderSideBar(providersBackstage);\n      var editPanel = renderEditPanel(imagePanel, providersBackstage);\n      var swap = function (anyInSystem, simulatedEvent) {\n        disableUndoRedo(anyInSystem);\n        var transform = simulatedEvent.event.transform;\n        var swap = simulatedEvent.event.swap;\n        transform.fold(function () {\n          swap();\n        }, function (transform) {\n          manipulate(anyInSystem, transform, swap);\n        });\n      };\n      return {\n        dom: {\n          tag: 'div',\n          attributes: { role: 'presentation' }\n        },\n        components: [\n          editPanel.memContainer.asSpec(),\n          imagePanel.memContainer.asSpec(),\n          sideBar.container\n        ],\n        behaviours: derive$1([\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function () {\n                return state.getBlobState();\n              }\n            }\n          }),\n          config('image-tools-events', [\n            run$1(internal.undo(), undo),\n            run$1(internal.redo(), redo),\n            run$1(internal.zoom(), zoom),\n            run$1(internal.back(), back),\n            run$1(internal.apply(), apply),\n            run$1(internal.transform(), transform),\n            run$1(internal.tempTransform(), tempTransform),\n            run$1(internal.transformApply(), transformApply),\n            run$1(internal.swap(), swap)\n          ]),\n          ComposingConfigs.self()\n        ])\n      };\n    };\n\n    var renderLabel = function (spec, backstageShared) {\n      var label = {\n        dom: {\n          tag: 'label',\n          innerHtml: backstageShared.providers.translate(spec.label),\n          classes: ['tox-label']\n        }\n      };\n      var comps = map$2(spec.items, backstageShared.interpreter);\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: [label].concat(comps),\n        behaviours: derive$1([\n          ComposingConfigs.self(),\n          Replacing.config({}),\n          RepresentingConfigs.domHtml(Optional.none()),\n          Keying.config({ mode: 'acyclic' })\n        ])\n      };\n    };\n\n    var isSingleListItem = function (item) {\n      return !has$2(item, 'items');\n    };\n    var dataAttribute = 'data-value';\n    var fetchItems = function (dropdownComp, name, items, selectedValue) {\n      return map$2(items, function (item) {\n        if (!isSingleListItem(item)) {\n          return {\n            type: 'nestedmenuitem',\n            text: item.text,\n            getSubmenuItems: function () {\n              return fetchItems(dropdownComp, name, item.items, selectedValue);\n            }\n          };\n        } else {\n          return {\n            type: 'togglemenuitem',\n            text: item.text,\n            value: item.value,\n            active: item.value === selectedValue,\n            onAction: function () {\n              Representing.setValue(dropdownComp, item.value);\n              emitWith(dropdownComp, formChangeEvent, { name: name });\n              Focusing.focus(dropdownComp);\n            }\n          };\n        }\n      });\n    };\n    var findItemByValue = function (items, value) {\n      return findMap(items, function (item) {\n        if (!isSingleListItem(item)) {\n          return findItemByValue(item.items, value);\n        } else {\n          return someIf(item.value === value, item);\n        }\n      });\n    };\n    var renderListBox = function (spec, backstage) {\n      var providersBackstage = backstage.shared.providers;\n      var initialItem = head(spec.items).filter(isSingleListItem);\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel$2(label, providersBackstage);\n      });\n      var pField = FormField.parts.field({\n        dom: {},\n        factory: {\n          sketch: function (sketchSpec) {\n            return renderCommonDropdown({\n              uid: sketchSpec.uid,\n              text: initialItem.map(function (item) {\n                return item.text;\n              }),\n              icon: Optional.none(),\n              tooltip: spec.label,\n              role: Optional.none(),\n              fetch: function (comp, callback) {\n                var items = fetchItems(comp, spec.name, spec.items, Representing.getValue(comp));\n                callback(build(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, false));\n              },\n              onSetup: constant$1(noop),\n              getApi: constant$1({}),\n              columns: 1,\n              presets: 'normal',\n              classes: [],\n              dropdownBehaviours: [\n                Tabstopping.config({}),\n                Representing.config({\n                  store: {\n                    mode: 'manual',\n                    initialValue: initialItem.map(function (item) {\n                      return item.value;\n                    }).getOr(''),\n                    getValue: function (comp) {\n                      return get$d(comp.element, dataAttribute);\n                    },\n                    setValue: function (comp, data) {\n                      findItemByValue(spec.items, data).each(function (item) {\n                        set$8(comp.element, dataAttribute, item.value);\n                        emitWith(comp, updateMenuText, { text: item.text });\n                      });\n                    }\n                  }\n                })\n              ]\n            }, 'tox-listbox', backstage.shared);\n          }\n        }\n      });\n      var listBoxWrap = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-listboxfield']\n        },\n        components: [pField]\n      };\n      return FormField.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: flatten([\n          pLabel.toArray(),\n          [listBoxWrap]\n        ]),\n        fieldBehaviours: derive$1([Disabling.config({\n            disabled: constant$1(spec.disabled),\n            onDisabled: function (comp) {\n              FormField.getField(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormField.getField(comp).each(Disabling.enable);\n            }\n          })])\n      });\n    };\n\n    var renderPanel = function (spec, backstage) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: spec.classes\n        },\n        components: map$2(spec.items, backstage.shared.interpreter)\n      };\n    };\n\n    var factory$e = function (detail, _spec) {\n      var options = map$2(detail.options, function (option) {\n        return {\n          dom: {\n            tag: 'option',\n            value: option.value,\n            innerHtml: option.text\n          }\n        };\n      });\n      var initialValues = detail.data.map(function (v) {\n        return wrap$1('initialValue', v);\n      }).getOr({});\n      return {\n        uid: detail.uid,\n        dom: {\n          tag: 'select',\n          classes: detail.selectClasses,\n          attributes: detail.selectAttributes\n        },\n        components: options,\n        behaviours: augment(detail.selectBehaviours, [\n          Focusing.config({}),\n          Representing.config({\n            store: __assign({\n              mode: 'manual',\n              getValue: function (select) {\n                return get$5(select.element);\n              },\n              setValue: function (select, newValue) {\n                var found = find$5(detail.options, function (opt) {\n                  return opt.value === newValue;\n                });\n                if (found.isSome()) {\n                  set$4(select.element, newValue);\n                }\n              }\n            }, initialValues)\n          })\n        ])\n      };\n    };\n    var HtmlSelect = single({\n      name: 'HtmlSelect',\n      configFields: [\n        required$1('options'),\n        field('selectBehaviours', [\n          Focusing,\n          Representing\n        ]),\n        defaulted('selectClasses', []),\n        defaulted('selectAttributes', {}),\n        option('data')\n      ],\n      factory: factory$e\n    });\n\n    var renderSelectBox = function (spec, providersBackstage) {\n      var translatedOptions = map$2(spec.items, function (item) {\n        return {\n          text: providersBackstage.translate(item.text),\n          value: item.value\n        };\n      });\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel$2(label, providersBackstage);\n      });\n      var pField = FormField.parts.field({\n        dom: {},\n        selectAttributes: { size: spec.size },\n        options: translatedOptions,\n        factory: HtmlSelect,\n        selectBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            }\n          }),\n          Tabstopping.config({}),\n          config('selectbox-change', [run$1(change(), function (component, _) {\n              emitWith(component, formChangeEvent, { name: spec.name });\n            })])\n        ])\n      });\n      var chevron = spec.size > 1 ? Optional.none() : Optional.some(render$3('chevron-down', {\n        tag: 'div',\n        classes: ['tox-selectfield__icon-js']\n      }, providersBackstage.icons));\n      var selectWrap = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-selectfield']\n        },\n        components: flatten([\n          [pField],\n          chevron.toArray()\n        ])\n      };\n      return FormField.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: flatten([\n          pLabel.toArray(),\n          [selectWrap]\n        ]),\n        fieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            },\n            onDisabled: function (comp) {\n              FormField.getField(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormField.getField(comp).each(Disabling.enable);\n            }\n          }),\n          receivingConfig()\n        ])\n      });\n    };\n\n    var renderTable = function (spec, providersBackstage) {\n      var renderTh = function (text) {\n        return {\n          dom: {\n            tag: 'th',\n            innerHtml: providersBackstage.translate(text)\n          }\n        };\n      };\n      var renderHeader = function (header) {\n        return {\n          dom: { tag: 'thead' },\n          components: [{\n              dom: { tag: 'tr' },\n              components: map$2(header, renderTh)\n            }]\n        };\n      };\n      var renderTd = function (text) {\n        return {\n          dom: {\n            tag: 'td',\n            innerHtml: providersBackstage.translate(text)\n          }\n        };\n      };\n      var renderTr = function (row) {\n        return {\n          dom: { tag: 'tr' },\n          components: map$2(row, renderTd)\n        };\n      };\n      var renderRows = function (rows) {\n        return {\n          dom: { tag: 'tbody' },\n          components: map$2(rows, renderTr)\n        };\n      };\n      return {\n        dom: {\n          tag: 'table',\n          classes: ['tox-dialog__table']\n        },\n        components: [\n          renderHeader(spec.header),\n          renderRows(spec.cells)\n        ],\n        behaviours: derive$1([\n          Tabstopping.config({}),\n          Focusing.config({})\n        ])\n      };\n    };\n\n    var renderTextField = function (spec, providersBackstage) {\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel$2(label, providersBackstage);\n      });\n      var baseInputBehaviours = [\n        Disabling.config({\n          disabled: function () {\n            return spec.disabled || providersBackstage.isDisabled();\n          }\n        }),\n        receivingConfig(),\n        Keying.config({\n          mode: 'execution',\n          useEnter: spec.multiline !== true,\n          useControlEnter: spec.multiline === true,\n          execute: function (comp) {\n            emit(comp, formSubmitEvent);\n            return Optional.some(true);\n          }\n        }),\n        config('textfield-change', [\n          run$1(input(), function (component, _) {\n            emitWith(component, formChangeEvent, { name: spec.name });\n          }),\n          run$1(postPaste(), function (component, _) {\n            emitWith(component, formChangeEvent, { name: spec.name });\n          })\n        ]),\n        Tabstopping.config({})\n      ];\n      var validatingBehaviours = spec.validation.map(function (vl) {\n        return Invalidating.config({\n          getRoot: function (input) {\n            return parent(input.element);\n          },\n          invalidClass: 'tox-invalid',\n          validator: {\n            validate: function (input) {\n              var v = Representing.getValue(input);\n              var result = vl.validator(v);\n              return Future.pure(result === true ? Result.value(v) : Result.error(result));\n            },\n            validateOnLoad: vl.validateOnLoad\n          }\n        });\n      }).toArray();\n      var placeholder = spec.placeholder.fold(constant$1({}), function (p) {\n        return { placeholder: providersBackstage.translate(p) };\n      });\n      var inputMode = spec.inputMode.fold(constant$1({}), function (mode) {\n        return { inputmode: mode };\n      });\n      var inputAttributes = __assign(__assign({}, placeholder), inputMode);\n      var pField = FormField.parts.field({\n        tag: spec.multiline === true ? 'textarea' : 'input',\n        inputAttributes: inputAttributes,\n        inputClasses: [spec.classname],\n        inputBehaviours: derive$1(flatten([\n          baseInputBehaviours,\n          validatingBehaviours\n        ])),\n        selectOnFocus: false,\n        factory: Input\n      });\n      var extraClasses = spec.flex ? ['tox-form__group--stretched'] : [];\n      var extraClasses2 = extraClasses.concat(spec.maximized ? ['tox-form-group--maximize'] : []);\n      var extraBehaviours = [\n        Disabling.config({\n          disabled: function () {\n            return spec.disabled || providersBackstage.isDisabled();\n          },\n          onDisabled: function (comp) {\n            FormField.getField(comp).each(Disabling.disable);\n          },\n          onEnabled: function (comp) {\n            FormField.getField(comp).each(Disabling.enable);\n          }\n        }),\n        receivingConfig()\n      ];\n      return renderFormFieldWith(pLabel, pField, extraClasses2, extraBehaviours);\n    };\n    var renderInput = function (spec, providersBackstage) {\n      return renderTextField({\n        name: spec.name,\n        multiline: false,\n        label: spec.label,\n        inputMode: spec.inputMode,\n        placeholder: spec.placeholder,\n        flex: false,\n        disabled: spec.disabled,\n        classname: 'tox-textfield',\n        validation: Optional.none(),\n        maximized: spec.maximized\n      }, providersBackstage);\n    };\n    var renderTextarea = function (spec, providersBackstage) {\n      return renderTextField({\n        name: spec.name,\n        multiline: true,\n        label: spec.label,\n        inputMode: Optional.none(),\n        placeholder: spec.placeholder,\n        flex: true,\n        disabled: spec.disabled,\n        classname: 'tox-textarea',\n        validation: Optional.none(),\n        maximized: spec.maximized\n      }, providersBackstage);\n    };\n\n    var events$6 = function (streamConfig, streamState) {\n      var streams = streamConfig.stream.streams;\n      var processor = streams.setup(streamConfig, streamState);\n      return derive$2([\n        run$1(streamConfig.event, processor),\n        runOnDetached(function () {\n          return streamState.cancel();\n        })\n      ].concat(streamConfig.cancelEvent.map(function (e) {\n        return [run$1(e, function () {\n            return streamState.cancel();\n          })];\n      }).getOr([])));\n    };\n\n    var ActiveStreaming = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$6\n    });\n\n    var throttle = function (_config) {\n      var state = Cell(null);\n      var readState = function () {\n        return { timer: state.get() !== null ? 'set' : 'unset' };\n      };\n      var setTimer = function (t) {\n        state.set(t);\n      };\n      var cancel = function () {\n        var t = state.get();\n        if (t !== null) {\n          t.cancel();\n        }\n      };\n      return nu$8({\n        readState: readState,\n        setTimer: setTimer,\n        cancel: cancel\n      });\n    };\n    var init$9 = function (spec) {\n      return spec.stream.streams.state(spec);\n    };\n\n    var StreamingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        throttle: throttle,\n        init: init$9\n    });\n\n    var setup$c = function (streamInfo, streamState) {\n      var sInfo = streamInfo.stream;\n      var throttler = last(streamInfo.onStream, sInfo.delay);\n      streamState.setTimer(throttler);\n      return function (component, simulatedEvent) {\n        throttler.throttle(component, simulatedEvent);\n        if (sInfo.stopEvent) {\n          simulatedEvent.stop();\n        }\n      };\n    };\n    var StreamingSchema = [\n      requiredOf('stream', choose$1('mode', {\n        throttle: [\n          required$1('delay'),\n          defaulted('stopEvent', true),\n          output$1('streams', {\n            setup: setup$c,\n            state: throttle\n          })\n        ]\n      })),\n      defaulted('event', 'input'),\n      option('cancelEvent'),\n      onStrictHandler('onStream')\n    ];\n\n    var Streaming = create$8({\n      fields: StreamingSchema,\n      name: 'streaming',\n      active: ActiveStreaming,\n      state: StreamingState\n    });\n\n    var setValueFromItem = function (model, input, item) {\n      var itemData = Representing.getValue(item);\n      Representing.setValue(input, itemData);\n      setCursorAtEnd(input);\n    };\n    var setSelectionOn = function (input, f) {\n      var el = input.element;\n      var value = get$5(el);\n      var node = el.dom;\n      if (get$d(el, 'type') !== 'number') {\n        f(node, value);\n      }\n    };\n    var setCursorAtEnd = function (input) {\n      setSelectionOn(input, function (node, value) {\n        return node.setSelectionRange(value.length, value.length);\n      });\n    };\n    var setSelectionToEnd = function (input, startOffset) {\n      setSelectionOn(input, function (node, value) {\n        return node.setSelectionRange(startOffset, value.length);\n      });\n    };\n    var attemptSelectOver = function (model, input, item) {\n      if (!model.selectsOver) {\n        return Optional.none();\n      } else {\n        var currentValue = Representing.getValue(input);\n        var inputDisplay_1 = model.getDisplayText(currentValue);\n        var itemValue = Representing.getValue(item);\n        var itemDisplay = model.getDisplayText(itemValue);\n        return itemDisplay.indexOf(inputDisplay_1) === 0 ? Optional.some(function () {\n          setValueFromItem(model, input, item);\n          setSelectionToEnd(input, inputDisplay_1.length);\n        }) : Optional.none();\n      }\n    };\n\n    var itemExecute = constant$1('alloy.typeahead.itemexecute');\n\n    var make$3 = function (detail, components, spec, externals) {\n      var navigateList = function (comp, simulatedEvent, highlighter) {\n        detail.previewing.set(false);\n        var sandbox = Coupling.getCoupled(comp, 'sandbox');\n        if (Sandboxing.isOpen(sandbox)) {\n          Composing.getCurrent(sandbox).each(function (menu) {\n            Highlighting.getHighlighted(menu).fold(function () {\n              highlighter(menu);\n            }, function () {\n              dispatchEvent(sandbox, menu.element, 'keydown', simulatedEvent);\n            });\n          });\n        } else {\n          var onOpenSync = function (sandbox) {\n            Composing.getCurrent(sandbox).each(highlighter);\n          };\n          open(detail, mapFetch(comp), comp, sandbox, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n        }\n      };\n      var focusBehaviours$1 = focusBehaviours(detail);\n      var mapFetch = function (comp) {\n        return function (tdata) {\n          return tdata.map(function (data) {\n            var menus = values(data.menus);\n            var items = bind$3(menus, function (menu) {\n              return filter$2(menu.items, function (item) {\n                return item.type === 'item';\n              });\n            });\n            var repState = Representing.getState(comp);\n            repState.update(map$2(items, function (item) {\n              return item.data;\n            }));\n            return data;\n          });\n        };\n      };\n      var behaviours = [\n        Focusing.config({}),\n        Representing.config({\n          onSetValue: detail.onSetValue,\n          store: __assign({\n            mode: 'dataset',\n            getDataKey: function (comp) {\n              return get$5(comp.element);\n            },\n            getFallbackEntry: function (itemString) {\n              return {\n                value: itemString,\n                meta: {}\n              };\n            },\n            setValue: function (comp, data) {\n              set$4(comp.element, detail.model.getDisplayText(data));\n            }\n          }, detail.initialData.map(function (d) {\n            return wrap$1('initialValue', d);\n          }).getOr({}))\n        }),\n        Streaming.config({\n          stream: {\n            mode: 'throttle',\n            delay: detail.responseTime,\n            stopEvent: false\n          },\n          onStream: function (component, _simulatedEvent) {\n            var sandbox = Coupling.getCoupled(component, 'sandbox');\n            var focusInInput = Focusing.isFocused(component);\n            if (focusInInput) {\n              if (get$5(component.element).length >= detail.minChars) {\n                var previousValue_1 = Composing.getCurrent(sandbox).bind(function (menu) {\n                  return Highlighting.getHighlighted(menu).map(Representing.getValue);\n                });\n                detail.previewing.set(true);\n                var onOpenSync = function (_sandbox) {\n                  Composing.getCurrent(sandbox).each(function (menu) {\n                    previousValue_1.fold(function () {\n                      if (detail.model.selectsOver) {\n                        Highlighting.highlightFirst(menu);\n                      }\n                    }, function (pv) {\n                      Highlighting.highlightBy(menu, function (item) {\n                        var itemData = Representing.getValue(item);\n                        return itemData.value === pv.value;\n                      });\n                      Highlighting.getHighlighted(menu).orThunk(function () {\n                        Highlighting.highlightFirst(menu);\n                        return Optional.none();\n                      });\n                    });\n                  });\n                };\n                open(detail, mapFetch(component), component, sandbox, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n              }\n            }\n          },\n          cancelEvent: typeaheadCancel()\n        }),\n        Keying.config({\n          mode: 'special',\n          onDown: function (comp, simulatedEvent) {\n            navigateList(comp, simulatedEvent, Highlighting.highlightFirst);\n            return Optional.some(true);\n          },\n          onEscape: function (comp) {\n            var sandbox = Coupling.getCoupled(comp, 'sandbox');\n            if (Sandboxing.isOpen(sandbox)) {\n              Sandboxing.close(sandbox);\n              return Optional.some(true);\n            }\n            return Optional.none();\n          },\n          onUp: function (comp, simulatedEvent) {\n            navigateList(comp, simulatedEvent, Highlighting.highlightLast);\n            return Optional.some(true);\n          },\n          onEnter: function (comp) {\n            var sandbox = Coupling.getCoupled(comp, 'sandbox');\n            var sandboxIsOpen = Sandboxing.isOpen(sandbox);\n            if (sandboxIsOpen && !detail.previewing.get()) {\n              return Composing.getCurrent(sandbox).bind(function (menu) {\n                return Highlighting.getHighlighted(menu);\n              }).map(function (item) {\n                emitWith(comp, itemExecute(), { item: item });\n                return true;\n              });\n            } else {\n              var currentValue = Representing.getValue(comp);\n              emit(comp, typeaheadCancel());\n              detail.onExecute(sandbox, comp, currentValue);\n              if (sandboxIsOpen) {\n                Sandboxing.close(sandbox);\n              }\n              return Optional.some(true);\n            }\n          }\n        }),\n        Toggling.config({\n          toggleClass: detail.markers.openClass,\n          aria: { mode: 'expanded' }\n        }),\n        Coupling.config({\n          others: {\n            sandbox: function (hotspot) {\n              return makeSandbox$1(detail, hotspot, {\n                onOpen: function () {\n                  return Toggling.on(hotspot);\n                },\n                onClose: function () {\n                  return Toggling.off(hotspot);\n                }\n              });\n            }\n          }\n        }),\n        config('typeaheadevents', [\n          runOnExecute$1(function (comp) {\n            var onOpenSync = noop;\n            togglePopup(detail, mapFetch(comp), comp, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n          }),\n          run$1(itemExecute(), function (comp, se) {\n            var sandbox = Coupling.getCoupled(comp, 'sandbox');\n            setValueFromItem(detail.model, comp, se.event.item);\n            emit(comp, typeaheadCancel());\n            detail.onItemExecute(comp, sandbox, se.event.item, Representing.getValue(comp));\n            Sandboxing.close(sandbox);\n            setCursorAtEnd(comp);\n          })\n        ].concat(detail.dismissOnBlur ? [run$1(postBlur(), function (typeahead) {\n            var sandbox = Coupling.getCoupled(typeahead, 'sandbox');\n            if (search(sandbox.element).isNone()) {\n              Sandboxing.close(sandbox);\n            }\n          })] : []))\n      ];\n      return {\n        uid: detail.uid,\n        dom: dom(deepMerge(detail, {\n          inputAttributes: {\n            'role': 'combobox',\n            'aria-autocomplete': 'list',\n            'aria-haspopup': 'true'\n          }\n        })),\n        behaviours: __assign(__assign({}, focusBehaviours$1), augment(detail.typeaheadBehaviours, behaviours)),\n        eventOrder: detail.eventOrder\n      };\n    };\n\n    var schema$g = constant$1([\n      option('lazySink'),\n      required$1('fetch'),\n      defaulted('minChars', 5),\n      defaulted('responseTime', 1000),\n      onHandler('onOpen'),\n      defaulted('getHotspot', Optional.some),\n      defaulted('getAnchorOverrides', constant$1({})),\n      defaulted('layouts', Optional.none()),\n      defaulted('eventOrder', {}),\n      defaultedObjOf('model', {}, [\n        defaulted('getDisplayText', function (itemData) {\n          return itemData.meta !== undefined && itemData.meta.text !== undefined ? itemData.meta.text : itemData.value;\n        }),\n        defaulted('selectsOver', true),\n        defaulted('populateFromBrowse', true)\n      ]),\n      onHandler('onSetValue'),\n      onKeyboardHandler('onExecute'),\n      onHandler('onItemExecute'),\n      defaulted('inputClasses', []),\n      defaulted('inputAttributes', {}),\n      defaulted('inputStyles', {}),\n      defaulted('matchWidth', true),\n      defaulted('useMinWidth', false),\n      defaulted('dismissOnBlur', true),\n      markers$1(['openClass']),\n      option('initialData'),\n      field('typeaheadBehaviours', [\n        Focusing,\n        Representing,\n        Streaming,\n        Keying,\n        Toggling,\n        Coupling\n      ]),\n      customField('previewing', function () {\n        return Cell(true);\n      })\n    ].concat(schema$k()).concat(sandboxFields()));\n    var parts$b = constant$1([external$1({\n        schema: [tieredMenuMarkers()],\n        name: 'menu',\n        overrides: function (detail) {\n          return {\n            fakeFocus: true,\n            onHighlight: function (menu, item) {\n              if (!detail.previewing.get()) {\n                menu.getSystem().getByUid(detail.uid).each(function (input) {\n                  if (detail.model.populateFromBrowse) {\n                    setValueFromItem(detail.model, input, item);\n                  }\n                });\n              } else {\n                menu.getSystem().getByUid(detail.uid).each(function (input) {\n                  attemptSelectOver(detail.model, input, item).fold(function () {\n                    return Highlighting.dehighlight(menu, item);\n                  }, function (fn) {\n                    return fn();\n                  });\n                });\n              }\n              detail.previewing.set(false);\n            },\n            onExecute: function (menu, item) {\n              return menu.getSystem().getByUid(detail.uid).toOptional().map(function (typeahead) {\n                emitWith(typeahead, itemExecute(), { item: item });\n                return true;\n              });\n            },\n            onHover: function (menu, item) {\n              detail.previewing.set(false);\n              menu.getSystem().getByUid(detail.uid).each(function (input) {\n                if (detail.model.populateFromBrowse) {\n                  setValueFromItem(detail.model, input, item);\n                }\n              });\n            }\n          };\n        }\n      })]);\n\n    var Typeahead = composite({\n      name: 'Typeahead',\n      configFields: schema$g(),\n      partFields: parts$b(),\n      factory: make$3\n    });\n\n    var wrap = function (delegate) {\n      var toCached = function () {\n        return wrap(delegate.toCached());\n      };\n      var bindFuture = function (f) {\n        return wrap(delegate.bind(function (resA) {\n          return resA.fold(function (err) {\n            return Future.pure(Result.error(err));\n          }, function (a) {\n            return f(a);\n          });\n        }));\n      };\n      var bindResult = function (f) {\n        return wrap(delegate.map(function (resA) {\n          return resA.bind(f);\n        }));\n      };\n      var mapResult = function (f) {\n        return wrap(delegate.map(function (resA) {\n          return resA.map(f);\n        }));\n      };\n      var mapError = function (f) {\n        return wrap(delegate.map(function (resA) {\n          return resA.mapError(f);\n        }));\n      };\n      var foldResult = function (whenError, whenValue) {\n        return delegate.map(function (res) {\n          return res.fold(whenError, whenValue);\n        });\n      };\n      var withTimeout = function (timeout, errorThunk) {\n        return wrap(Future.nu(function (callback) {\n          var timedOut = false;\n          var timer = setTimeout(function () {\n            timedOut = true;\n            callback(Result.error(errorThunk()));\n          }, timeout);\n          delegate.get(function (result) {\n            if (!timedOut) {\n              clearTimeout(timer);\n              callback(result);\n            }\n          });\n        }));\n      };\n      return __assign(__assign({}, delegate), {\n        toCached: toCached,\n        bindFuture: bindFuture,\n        bindResult: bindResult,\n        mapResult: mapResult,\n        mapError: mapError,\n        foldResult: foldResult,\n        withTimeout: withTimeout\n      });\n    };\n    var nu$1 = function (worker) {\n      return wrap(Future.nu(worker));\n    };\n    var value = function (value) {\n      return wrap(Future.pure(Result.value(value)));\n    };\n    var error = function (error) {\n      return wrap(Future.pure(Result.error(error)));\n    };\n    var fromResult = function (result) {\n      return wrap(Future.pure(result));\n    };\n    var fromFuture = function (future) {\n      return wrap(future.map(Result.value));\n    };\n    var fromPromise = function (promise) {\n      return nu$1(function (completer) {\n        promise.then(function (value) {\n          completer(Result.value(value));\n        }, function (error) {\n          completer(Result.error(error));\n        });\n      });\n    };\n    var FutureResult = {\n      nu: nu$1,\n      wrap: wrap,\n      pure: value,\n      value: value,\n      error: error,\n      fromResult: fromResult,\n      fromFuture: fromFuture,\n      fromPromise: fromPromise\n    };\n\n    var separator$1 = { type: 'separator' };\n    var toMenuItem = function (target) {\n      return {\n        type: 'menuitem',\n        value: target.url,\n        text: target.title,\n        meta: { attach: target.attach },\n        onAction: noop\n      };\n    };\n    var staticMenuItem = function (title, url) {\n      return {\n        type: 'menuitem',\n        value: url,\n        text: title,\n        meta: { attach: undefined },\n        onAction: noop\n      };\n    };\n    var toMenuItems = function (targets) {\n      return map$2(targets, toMenuItem);\n    };\n    var filterLinkTargets = function (type, targets) {\n      return filter$2(targets, function (target) {\n        return target.type === type;\n      });\n    };\n    var filteredTargets = function (type, targets) {\n      return toMenuItems(filterLinkTargets(type, targets));\n    };\n    var headerTargets = function (linkInfo) {\n      return filteredTargets('header', linkInfo.targets);\n    };\n    var anchorTargets = function (linkInfo) {\n      return filteredTargets('anchor', linkInfo.targets);\n    };\n    var anchorTargetTop = function (linkInfo) {\n      return Optional.from(linkInfo.anchorTop).map(function (url) {\n        return staticMenuItem('<top>', url);\n      }).toArray();\n    };\n    var anchorTargetBottom = function (linkInfo) {\n      return Optional.from(linkInfo.anchorBottom).map(function (url) {\n        return staticMenuItem('<bottom>', url);\n      }).toArray();\n    };\n    var historyTargets = function (history) {\n      return map$2(history, function (url) {\n        return staticMenuItem(url, url);\n      });\n    };\n    var joinMenuLists = function (items) {\n      return foldl(items, function (a, b) {\n        var bothEmpty = a.length === 0 || b.length === 0;\n        return bothEmpty ? a.concat(b) : a.concat(separator$1, b);\n      }, []);\n    };\n    var filterByQuery = function (term, menuItems) {\n      var lowerCaseTerm = term.toLowerCase();\n      return filter$2(menuItems, function (item) {\n        var text = item.meta !== undefined && item.meta.text !== undefined ? item.meta.text : item.text;\n        return contains$1(text.toLowerCase(), lowerCaseTerm) || contains$1(item.value.toLowerCase(), lowerCaseTerm);\n      });\n    };\n\n    var getItems = function (fileType, input, urlBackstage) {\n      var urlInputValue = Representing.getValue(input);\n      var term = urlInputValue.meta.text !== undefined ? urlInputValue.meta.text : urlInputValue.value;\n      var info = urlBackstage.getLinkInformation();\n      return info.fold(function () {\n        return [];\n      }, function (linkInfo) {\n        var history = filterByQuery(term, historyTargets(urlBackstage.getHistory(fileType)));\n        return fileType === 'file' ? joinMenuLists([\n          history,\n          filterByQuery(term, headerTargets(linkInfo)),\n          filterByQuery(term, flatten([\n            anchorTargetTop(linkInfo),\n            anchorTargets(linkInfo),\n            anchorTargetBottom(linkInfo)\n          ]))\n        ]) : history;\n      });\n    };\n    var errorId = generate$6('aria-invalid');\n    var renderUrlInput = function (spec, backstage, urlBackstage) {\n      var _a;\n      var providersBackstage = backstage.shared.providers;\n      var updateHistory = function (component) {\n        var urlEntry = Representing.getValue(component);\n        urlBackstage.addToHistory(urlEntry.value, spec.filetype);\n      };\n      var pField = FormField.parts.field({\n        factory: Typeahead,\n        dismissOnBlur: true,\n        inputClasses: ['tox-textfield'],\n        sandboxClasses: ['tox-dialog__popups'],\n        inputAttributes: {\n          'aria-errormessage': errorId,\n          'type': 'url'\n        },\n        minChars: 0,\n        responseTime: 0,\n        fetch: function (input) {\n          var items = getItems(spec.filetype, input, urlBackstage);\n          var tdata = build(items, ItemResponse$1.BUBBLE_TO_SANDBOX, backstage, false);\n          return Future.pure(tdata);\n        },\n        getHotspot: function (comp) {\n          return memUrlBox.getOpt(comp);\n        },\n        onSetValue: function (comp, _newValue) {\n          if (comp.hasConfigured(Invalidating)) {\n            Invalidating.run(comp).get(noop);\n          }\n        },\n        typeaheadBehaviours: derive$1(flatten([\n          urlBackstage.getValidationHandler().map(function (handler) {\n            return Invalidating.config({\n              getRoot: function (comp) {\n                return parent(comp.element);\n              },\n              invalidClass: 'tox-control-wrap--status-invalid',\n              notify: {\n                onInvalid: function (comp, err) {\n                  memInvalidIcon.getOpt(comp).each(function (invalidComp) {\n                    set$8(invalidComp.element, 'title', providersBackstage.translate(err));\n                  });\n                }\n              },\n              validator: {\n                validate: function (input) {\n                  var urlEntry = Representing.getValue(input);\n                  return FutureResult.nu(function (completer) {\n                    handler({\n                      type: spec.filetype,\n                      url: urlEntry.value\n                    }, function (validation) {\n                      if (validation.status === 'invalid') {\n                        var err = Result.error(validation.message);\n                        completer(err);\n                      } else {\n                        var val = Result.value(validation.message);\n                        completer(val);\n                      }\n                    });\n                  });\n                },\n                validateOnLoad: false\n              }\n            });\n          }).toArray(),\n          [\n            Disabling.config({\n              disabled: function () {\n                return spec.disabled || providersBackstage.isDisabled();\n              }\n            }),\n            Tabstopping.config({}),\n            config('urlinput-events', flatten([\n              spec.filetype === 'file' ? [run$1(input(), function (comp) {\n                  emitWith(comp, formChangeEvent, { name: spec.name });\n                })] : [],\n              [\n                run$1(change(), function (comp) {\n                  emitWith(comp, formChangeEvent, { name: spec.name });\n                  updateHistory(comp);\n                }),\n                run$1(postPaste(), function (comp) {\n                  emitWith(comp, formChangeEvent, { name: spec.name });\n                  updateHistory(comp);\n                })\n              ]\n            ]))\n          ]\n        ])),\n        eventOrder: (_a = {}, _a[input()] = [\n          'streaming',\n          'urlinput-events',\n          'invalidating'\n        ], _a),\n        model: {\n          getDisplayText: function (itemData) {\n            return itemData.value;\n          },\n          selectsOver: false,\n          populateFromBrowse: false\n        },\n        markers: { openClass: 'tox-textfield--popup-open' },\n        lazySink: backstage.shared.getSink,\n        parts: { menu: part(false, 1, 'normal') },\n        onExecute: function (_menu, component, _entry) {\n          emitWith(component, formSubmitEvent, {});\n        },\n        onItemExecute: function (typeahead, _sandbox, _item, _value) {\n          updateHistory(typeahead);\n          emitWith(typeahead, formChangeEvent, { name: spec.name });\n        }\n      });\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel$2(label, providersBackstage);\n      });\n      var makeIcon = function (name, errId, icon, label) {\n        if (icon === void 0) {\n          icon = name;\n        }\n        if (label === void 0) {\n          label = name;\n        }\n        return render$3(icon, {\n          tag: 'div',\n          classes: [\n            'tox-icon',\n            'tox-control-wrap__status-icon-' + name\n          ],\n          attributes: __assign({\n            'title': providersBackstage.translate(label),\n            'aria-live': 'polite'\n          }, errId.fold(function () {\n            return {};\n          }, function (id) {\n            return { id: id };\n          }))\n        }, providersBackstage.icons);\n      };\n      var memInvalidIcon = record(makeIcon('invalid', Optional.some(errorId), 'warning'));\n      var memStatus = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-control-wrap__status-icon-wrap']\n        },\n        components: [memInvalidIcon.asSpec()]\n      });\n      var optUrlPicker = urlBackstage.getUrlPicker(spec.filetype);\n      var browseUrlEvent = generate$6('browser.url.event');\n      var memUrlBox = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-control-wrap']\n        },\n        components: [\n          pField,\n          memStatus.asSpec()\n        ],\n        behaviours: derive$1([Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            }\n          })])\n      });\n      var memUrlPickerButton = record(renderButton({\n        name: spec.name,\n        icon: Optional.some('browse'),\n        text: spec.label.getOr(''),\n        disabled: spec.disabled,\n        primary: false,\n        borderless: true\n      }, function (component) {\n        return emit(component, browseUrlEvent);\n      }, providersBackstage, [], ['tox-browse-url']));\n      var controlHWrapper = function () {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__controls-h-stack']\n          },\n          components: flatten([\n            [memUrlBox.asSpec()],\n            optUrlPicker.map(function () {\n              return memUrlPickerButton.asSpec();\n            }).toArray()\n          ])\n        };\n      };\n      var openUrlPicker = function (comp) {\n        Composing.getCurrent(comp).each(function (field) {\n          var componentData = Representing.getValue(field);\n          var urlData = __assign({ fieldname: spec.name }, componentData);\n          optUrlPicker.each(function (picker) {\n            picker(urlData).get(function (chosenData) {\n              Representing.setValue(field, chosenData);\n              emitWith(comp, formChangeEvent, { name: spec.name });\n            });\n          });\n        });\n      };\n      return FormField.sketch({\n        dom: renderFormFieldDom(),\n        components: pLabel.toArray().concat([controlHWrapper()]),\n        fieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            },\n            onDisabled: function (comp) {\n              FormField.getField(comp).each(Disabling.disable);\n              memUrlPickerButton.getOpt(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormField.getField(comp).each(Disabling.enable);\n              memUrlPickerButton.getOpt(comp).each(Disabling.enable);\n            }\n          }),\n          receivingConfig(),\n          config('url-input-events', [run$1(browseUrlEvent, openUrlPicker)])\n        ])\n      });\n    };\n\n    var renderAlertBanner = function (spec, providersBackstage) {\n      return Container.sketch({\n        dom: {\n          tag: 'div',\n          attributes: { role: 'alert' },\n          classes: [\n            'tox-notification',\n            'tox-notification--in',\n            'tox-notification--' + spec.level\n          ]\n        },\n        components: [\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-notification__icon']\n            },\n            components: [Button.sketch({\n                dom: {\n                  tag: 'button',\n                  classes: [\n                    'tox-button',\n                    'tox-button--naked',\n                    'tox-button--icon'\n                  ],\n                  innerHtml: get$1(spec.icon, providersBackstage.icons),\n                  attributes: { title: providersBackstage.translate(spec.iconTooltip) }\n                },\n                action: function (comp) {\n                  emitWith(comp, formActionEvent, {\n                    name: 'alert-banner',\n                    value: spec.url\n                  });\n                },\n                buttonBehaviours: derive$1([addFocusableBehaviour()])\n              })]\n          },\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-notification__body'],\n              innerHtml: providersBackstage.translate(spec.text)\n            }\n          }\n        ]\n      });\n    };\n\n    var renderCheckbox = function (spec, providerBackstage) {\n      var repBehaviour = Representing.config({\n        store: {\n          mode: 'manual',\n          getValue: function (comp) {\n            var el = comp.element.dom;\n            return el.checked;\n          },\n          setValue: function (comp, value) {\n            var el = comp.element.dom;\n            el.checked = value;\n          }\n        }\n      });\n      var toggleCheckboxHandler = function (comp) {\n        comp.element.dom.click();\n        return Optional.some(true);\n      };\n      var pField = FormField.parts.field({\n        factory: { sketch: identity$1 },\n        dom: {\n          tag: 'input',\n          classes: ['tox-checkbox__input'],\n          attributes: { type: 'checkbox' }\n        },\n        behaviours: derive$1([\n          ComposingConfigs.self(),\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providerBackstage.isDisabled();\n            }\n          }),\n          Tabstopping.config({}),\n          Focusing.config({}),\n          repBehaviour,\n          Keying.config({\n            mode: 'special',\n            onEnter: toggleCheckboxHandler,\n            onSpace: toggleCheckboxHandler,\n            stopSpaceKeyup: true\n          }),\n          config('checkbox-events', [run$1(change(), function (component, _) {\n              emitWith(component, formChangeEvent, { name: spec.name });\n            })])\n        ])\n      });\n      var pLabel = FormField.parts.label({\n        dom: {\n          tag: 'span',\n          classes: ['tox-checkbox__label'],\n          innerHtml: providerBackstage.translate(spec.label)\n        },\n        behaviours: derive$1([Unselecting.config({})])\n      });\n      var makeIcon = function (className) {\n        var iconName = className === 'checked' ? 'selected' : 'unselected';\n        return render$3(iconName, {\n          tag: 'span',\n          classes: [\n            'tox-icon',\n            'tox-checkbox-icon__' + className\n          ]\n        }, providerBackstage.icons);\n      };\n      var memIcons = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-checkbox__icons']\n        },\n        components: [\n          makeIcon('checked'),\n          makeIcon('unchecked')\n        ]\n      });\n      return FormField.sketch({\n        dom: {\n          tag: 'label',\n          classes: ['tox-checkbox']\n        },\n        components: [\n          pField,\n          memIcons.asSpec(),\n          pLabel\n        ],\n        fieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providerBackstage.isDisabled();\n            },\n            disableClass: 'tox-checkbox--disabled',\n            onDisabled: function (comp) {\n              FormField.getField(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormField.getField(comp).each(Disabling.enable);\n            }\n          }),\n          receivingConfig()\n        ])\n      });\n    };\n\n    var renderHtmlPanel = function (spec) {\n      if (spec.presets === 'presentation') {\n        return Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__group'],\n            innerHtml: spec.html\n          }\n        });\n      } else {\n        return Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__group'],\n            innerHtml: spec.html,\n            attributes: { role: 'document' }\n          },\n          containerBehaviours: derive$1([\n            Tabstopping.config({}),\n            Focusing.config({})\n          ])\n        });\n      }\n    };\n\n    var make$2 = function (render) {\n      return function (parts, spec, backstage) {\n        return get$e(spec, 'name').fold(function () {\n          return render(spec, backstage);\n        }, function (fieldName) {\n          return parts.field(fieldName, render(spec, backstage));\n        });\n      };\n    };\n    var makeIframe = function (render) {\n      return function (parts, spec, backstage) {\n        var iframeSpec = deepMerge(spec, { source: 'dynamic' });\n        return make$2(render)(parts, iframeSpec, backstage);\n      };\n    };\n    var factories = {\n      bar: make$2(function (spec, backstage) {\n        return renderBar(spec, backstage.shared);\n      }),\n      collection: make$2(function (spec, backstage) {\n        return renderCollection(spec, backstage.shared.providers);\n      }),\n      alertbanner: make$2(function (spec, backstage) {\n        return renderAlertBanner(spec, backstage.shared.providers);\n      }),\n      input: make$2(function (spec, backstage) {\n        return renderInput(spec, backstage.shared.providers);\n      }),\n      textarea: make$2(function (spec, backstage) {\n        return renderTextarea(spec, backstage.shared.providers);\n      }),\n      label: make$2(function (spec, backstage) {\n        return renderLabel(spec, backstage.shared);\n      }),\n      iframe: makeIframe(function (spec, backstage) {\n        return renderIFrame(spec, backstage.shared.providers);\n      }),\n      button: make$2(function (spec, backstage) {\n        return renderDialogButton(spec, backstage.shared.providers);\n      }),\n      checkbox: make$2(function (spec, backstage) {\n        return renderCheckbox(spec, backstage.shared.providers);\n      }),\n      colorinput: make$2(function (spec, backstage) {\n        return renderColorInput(spec, backstage.shared, backstage.colorinput);\n      }),\n      colorpicker: make$2(renderColorPicker),\n      dropzone: make$2(function (spec, backstage) {\n        return renderDropZone(spec, backstage.shared.providers);\n      }),\n      grid: make$2(function (spec, backstage) {\n        return renderGrid(spec, backstage.shared);\n      }),\n      listbox: make$2(function (spec, backstage) {\n        return renderListBox(spec, backstage);\n      }),\n      selectbox: make$2(function (spec, backstage) {\n        return renderSelectBox(spec, backstage.shared.providers);\n      }),\n      sizeinput: make$2(function (spec, backstage) {\n        return renderSizeInput(spec, backstage.shared.providers);\n      }),\n      urlinput: make$2(function (spec, backstage) {\n        return renderUrlInput(spec, backstage, backstage.urlinput);\n      }),\n      customeditor: make$2(renderCustomEditor),\n      htmlpanel: make$2(renderHtmlPanel),\n      imagetools: make$2(function (spec, backstage) {\n        return renderImageTools(spec, backstage.shared.providers);\n      }),\n      table: make$2(function (spec, backstage) {\n        return renderTable(spec, backstage.shared.providers);\n      }),\n      panel: make$2(function (spec, backstage) {\n        return renderPanel(spec, backstage);\n      })\n    };\n    var noFormParts = {\n      field: function (_name, spec) {\n        return spec;\n      }\n    };\n    var interpretInForm = function (parts, spec, oldBackstage) {\n      var newBackstage = deepMerge(oldBackstage, {\n        shared: {\n          interpreter: function (childSpec) {\n            return interpretParts(parts, childSpec, newBackstage);\n          }\n        }\n      });\n      return interpretParts(parts, spec, newBackstage);\n    };\n    var interpretParts = function (parts, spec, backstage) {\n      return get$e(factories, spec.type).fold(function () {\n        console.error('Unknown factory type \"' + spec.type + '\", defaulting to container: ', spec);\n        return spec;\n      }, function (factory) {\n        return factory(parts, spec, backstage);\n      });\n    };\n    var interpretWithoutForm = function (spec, backstage) {\n      var parts = noFormParts;\n      return interpretParts(parts, spec, backstage);\n    };\n\n    var bubbleAlignments$2 = {\n      valignCentre: [],\n      alignCentre: [],\n      alignLeft: [],\n      alignRight: [],\n      right: [],\n      left: [],\n      bottom: [],\n      top: []\n    };\n    var getInlineDialogAnchor = function (contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor) {\n      var bubbleSize = 12;\n      var overrides = { maxHeightFunction: expandable$1() };\n      var editableAreaAnchor = function () {\n        return {\n          type: 'node',\n          root: getContentContainer(contentAreaElement()),\n          node: Optional.from(contentAreaElement()),\n          bubble: nu$5(bubbleSize, bubbleSize, bubbleAlignments$2),\n          layouts: {\n            onRtl: function () {\n              return [northeast];\n            },\n            onLtr: function () {\n              return [northwest];\n            }\n          },\n          overrides: overrides\n        };\n      };\n      var standardAnchor = function () {\n        return {\n          type: 'hotspot',\n          hotspot: lazyAnchorbar(),\n          bubble: nu$5(-bubbleSize, bubbleSize, bubbleAlignments$2),\n          layouts: {\n            onRtl: function () {\n              return [southeast$2];\n            },\n            onLtr: function () {\n              return [southwest$2];\n            }\n          },\n          overrides: overrides\n        };\n      };\n      return function () {\n        return lazyUseEditableAreaAnchor() ? editableAreaAnchor() : standardAnchor();\n      };\n    };\n    var getBannerAnchor = function (contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor) {\n      var editableAreaAnchor = function () {\n        return {\n          type: 'node',\n          root: getContentContainer(contentAreaElement()),\n          node: Optional.from(contentAreaElement()),\n          layouts: {\n            onRtl: function () {\n              return [north];\n            },\n            onLtr: function () {\n              return [north];\n            }\n          }\n        };\n      };\n      var standardAnchor = function () {\n        return {\n          type: 'hotspot',\n          hotspot: lazyAnchorbar(),\n          layouts: {\n            onRtl: function () {\n              return [south$2];\n            },\n            onLtr: function () {\n              return [south$2];\n            }\n          }\n        };\n      };\n      return function () {\n        return lazyUseEditableAreaAnchor() ? editableAreaAnchor() : standardAnchor();\n      };\n    };\n    var getCursorAnchor = function (editor, bodyElement) {\n      return function () {\n        return {\n          type: 'selection',\n          root: bodyElement(),\n          getSelection: function () {\n            var rng = editor.selection.getRng();\n            return Optional.some(SimSelection.range(SugarElement.fromDom(rng.startContainer), rng.startOffset, SugarElement.fromDom(rng.endContainer), rng.endOffset));\n          }\n        };\n      };\n    };\n    var getNodeAnchor$1 = function (bodyElement) {\n      return function (element) {\n        return {\n          type: 'node',\n          root: bodyElement(),\n          node: element\n        };\n      };\n    };\n    var getAnchors = function (editor, lazyAnchorbar, isToolbarTop) {\n      var useFixedToolbarContainer = useFixedContainer(editor);\n      var bodyElement = function () {\n        return SugarElement.fromDom(editor.getBody());\n      };\n      var contentAreaElement = function () {\n        return SugarElement.fromDom(editor.getContentAreaContainer());\n      };\n      var lazyUseEditableAreaAnchor = function () {\n        return useFixedToolbarContainer || !isToolbarTop();\n      };\n      return {\n        inlineDialog: getInlineDialogAnchor(contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor),\n        banner: getBannerAnchor(contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor),\n        cursor: getCursorAnchor(editor, bodyElement),\n        node: getNodeAnchor$1(bodyElement)\n      };\n    };\n\n    var colorPicker = function (editor) {\n      return function (callback, value) {\n        var dialog = colorPickerDialog(editor);\n        dialog(callback, value);\n      };\n    };\n    var hasCustomColors = function (editor) {\n      return function () {\n        return hasCustomColors$1(editor);\n      };\n    };\n    var getColors = function (editor) {\n      return function () {\n        return getColors$2(editor);\n      };\n    };\n    var getColorCols = function (editor) {\n      return function () {\n        return getColorCols$1(editor);\n      };\n    };\n    var ColorInputBackstage = function (editor) {\n      return {\n        colorPicker: colorPicker(editor),\n        hasCustomColors: hasCustomColors(editor),\n        getColors: getColors(editor),\n        getColorCols: getColorCols(editor)\n      };\n    };\n\n    var isDraggableModal = function (editor) {\n      return function () {\n        return isDraggableModal$1(editor);\n      };\n    };\n    var DialogBackstage = function (editor) {\n      return { isDraggableModal: isDraggableModal(editor) };\n    };\n\n    var HeaderBackstage = function (editor) {\n      var mode = Cell(isToolbarLocationBottom(editor) ? 'bottom' : 'top');\n      return {\n        isPositionedAtTop: function () {\n          return mode.get() === 'top';\n        },\n        getDockingMode: mode.get,\n        setDockingMode: mode.set\n      };\n    };\n\n    var defaultStyleFormats = [\n      {\n        title: 'Headings',\n        items: [\n          {\n            title: 'Heading 1',\n            format: 'h1'\n          },\n          {\n            title: 'Heading 2',\n            format: 'h2'\n          },\n          {\n            title: 'Heading 3',\n            format: 'h3'\n          },\n          {\n            title: 'Heading 4',\n            format: 'h4'\n          },\n          {\n            title: 'Heading 5',\n            format: 'h5'\n          },\n          {\n            title: 'Heading 6',\n            format: 'h6'\n          }\n        ]\n      },\n      {\n        title: 'Inline',\n        items: [\n          {\n            title: 'Bold',\n            format: 'bold'\n          },\n          {\n            title: 'Italic',\n            format: 'italic'\n          },\n          {\n            title: 'Underline',\n            format: 'underline'\n          },\n          {\n            title: 'Strikethrough',\n            format: 'strikethrough'\n          },\n          {\n            title: 'Superscript',\n            format: 'superscript'\n          },\n          {\n            title: 'Subscript',\n            format: 'subscript'\n          },\n          {\n            title: 'Code',\n            format: 'code'\n          }\n        ]\n      },\n      {\n        title: 'Blocks',\n        items: [\n          {\n            title: 'Paragraph',\n            format: 'p'\n          },\n          {\n            title: 'Blockquote',\n            format: 'blockquote'\n          },\n          {\n            title: 'Div',\n            format: 'div'\n          },\n          {\n            title: 'Pre',\n            format: 'pre'\n          }\n        ]\n      },\n      {\n        title: 'Align',\n        items: [\n          {\n            title: 'Left',\n            format: 'alignleft'\n          },\n          {\n            title: 'Center',\n            format: 'aligncenter'\n          },\n          {\n            title: 'Right',\n            format: 'alignright'\n          },\n          {\n            title: 'Justify',\n            format: 'alignjustify'\n          }\n        ]\n      }\n    ];\n    var isNestedFormat = function (format) {\n      return has$2(format, 'items');\n    };\n    var isBlockFormat = function (format) {\n      return has$2(format, 'block');\n    };\n    var isInlineFormat = function (format) {\n      return has$2(format, 'inline');\n    };\n    var isSelectorFormat = function (format) {\n      return has$2(format, 'selector');\n    };\n    var mapFormats = function (userFormats) {\n      return foldl(userFormats, function (acc, fmt) {\n        if (isNestedFormat(fmt)) {\n          var result = mapFormats(fmt.items);\n          return {\n            customFormats: acc.customFormats.concat(result.customFormats),\n            formats: acc.formats.concat([{\n                title: fmt.title,\n                items: result.formats\n              }])\n          };\n        } else if (isInlineFormat(fmt) || isBlockFormat(fmt) || isSelectorFormat(fmt)) {\n          var formatName = isString(fmt.name) ? fmt.name : fmt.title.toLowerCase();\n          var formatNameWithPrefix = 'custom-' + formatName;\n          return {\n            customFormats: acc.customFormats.concat([{\n                name: formatNameWithPrefix,\n                format: fmt\n              }]),\n            formats: acc.formats.concat([{\n                title: fmt.title,\n                format: formatNameWithPrefix,\n                icon: fmt.icon\n              }])\n          };\n        } else {\n          return __assign(__assign({}, acc), { formats: acc.formats.concat(fmt) });\n        }\n      }, {\n        customFormats: [],\n        formats: []\n      });\n    };\n    var registerCustomFormats = function (editor, userFormats) {\n      var result = mapFormats(userFormats);\n      var registerFormats = function (customFormats) {\n        each$1(customFormats, function (fmt) {\n          if (!editor.formatter.has(fmt.name)) {\n            editor.formatter.register(fmt.name, fmt.format);\n          }\n        });\n      };\n      if (editor.formatter) {\n        registerFormats(result.customFormats);\n      } else {\n        editor.on('init', function () {\n          registerFormats(result.customFormats);\n        });\n      }\n      return result.formats;\n    };\n    var getStyleFormats = function (editor) {\n      return getUserStyleFormats(editor).map(function (userFormats) {\n        var registeredUserFormats = registerCustomFormats(editor, userFormats);\n        return isMergeStyleFormats(editor) ? defaultStyleFormats.concat(registeredUserFormats) : registeredUserFormats;\n      }).getOr(defaultStyleFormats);\n    };\n\n    var processBasic = function (item, isSelectedFor, getPreviewFor) {\n      var formatterSpec = {\n        type: 'formatter',\n        isSelected: isSelectedFor(item.format),\n        getStylePreview: getPreviewFor(item.format)\n      };\n      return deepMerge(item, formatterSpec);\n    };\n    var register$8 = function (editor, formats, isSelectedFor, getPreviewFor) {\n      var enrichSupported = function (item) {\n        return processBasic(item, isSelectedFor, getPreviewFor);\n      };\n      var enrichMenu = function (item) {\n        var submenuSpec = { type: 'submenu' };\n        return deepMerge(item, submenuSpec);\n      };\n      var enrichCustom = function (item) {\n        var formatName = isString(item.name) ? item.name : generate$6(item.title);\n        var formatNameWithPrefix = 'custom-' + formatName;\n        var customSpec = {\n          type: 'formatter',\n          format: formatNameWithPrefix,\n          isSelected: isSelectedFor(formatNameWithPrefix),\n          getStylePreview: getPreviewFor(formatNameWithPrefix)\n        };\n        var newItem = deepMerge(item, customSpec);\n        editor.formatter.register(formatName, newItem);\n        return newItem;\n      };\n      var doEnrich = function (items) {\n        return map$2(items, function (item) {\n          var keys$1 = keys(item);\n          if (hasNonNullableKey(item, 'items')) {\n            var newItems = doEnrich(item.items);\n            return deepMerge(enrichMenu(item), { getStyleItems: constant$1(newItems) });\n          } else if (hasNonNullableKey(item, 'format')) {\n            return enrichSupported(item);\n          } else if (keys$1.length === 1 && contains$2(keys$1, 'title')) {\n            return deepMerge(item, { type: 'separator' });\n          } else {\n            return enrichCustom(item);\n          }\n        });\n      };\n      return doEnrich(formats);\n    };\n\n    var init$8 = function (editor) {\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (format) {\n        return function () {\n          var fmt = editor.formatter.get(format);\n          return fmt !== undefined ? Optional.some({\n            tag: fmt.length > 0 ? fmt[0].inline || fmt[0].block || 'div' : 'div',\n            styles: editor.dom.parseStyle(editor.formatter.getCssText(format))\n          }) : Optional.none();\n        };\n      };\n      var flatten = function (fmt) {\n        var subs = fmt.items;\n        return subs !== undefined && subs.length > 0 ? bind$3(subs, flatten) : [fmt.format];\n      };\n      var settingsFormats = Cell([]);\n      var settingsFlattenedFormats = Cell([]);\n      var eventsFormats = Cell([]);\n      var eventsFlattenedFormats = Cell([]);\n      var replaceSettings = Cell(false);\n      editor.on('PreInit', function (_e) {\n        var formats = getStyleFormats(editor);\n        var enriched = register$8(editor, formats, isSelectedFor, getPreviewFor);\n        settingsFormats.set(enriched);\n        settingsFlattenedFormats.set(bind$3(enriched, flatten));\n      });\n      editor.on('addStyleModifications', function (e) {\n        var modifications = register$8(editor, e.items, isSelectedFor, getPreviewFor);\n        eventsFormats.set(modifications);\n        replaceSettings.set(e.replace);\n        eventsFlattenedFormats.set(bind$3(modifications, flatten));\n      });\n      var getData = function () {\n        var fromSettings = replaceSettings.get() ? [] : settingsFormats.get();\n        var fromEvents = eventsFormats.get();\n        return fromSettings.concat(fromEvents);\n      };\n      var getFlattenedKeys = function () {\n        var fromSettings = replaceSettings.get() ? [] : settingsFlattenedFormats.get();\n        var fromEvents = eventsFlattenedFormats.get();\n        return fromSettings.concat(fromEvents);\n      };\n      return {\n        getData: getData,\n        getFlattenedKeys: getFlattenedKeys\n      };\n    };\n\n    var isElement = function (node) {\n      return isNonNullable(node) && node.nodeType === 1;\n    };\n    var trim = global$5.trim;\n    var hasContentEditableState = function (value) {\n      return function (node) {\n        if (isElement(node)) {\n          if (node.contentEditable === value) {\n            return true;\n          }\n          if (node.getAttribute('data-mce-contenteditable') === value) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    var isContentEditableTrue = hasContentEditableState('true');\n    var isContentEditableFalse = hasContentEditableState('false');\n    var create = function (type, title, url, level, attach) {\n      return {\n        type: type,\n        title: title,\n        url: url,\n        level: level,\n        attach: attach\n      };\n    };\n    var isChildOfContentEditableTrue = function (node) {\n      while (node = node.parentNode) {\n        var value = node.contentEditable;\n        if (value && value !== 'inherit') {\n          return isContentEditableTrue(node);\n        }\n      }\n      return false;\n    };\n    var select = function (selector, root) {\n      return map$2(descendants(SugarElement.fromDom(root), selector), function (element) {\n        return element.dom;\n      });\n    };\n    var getElementText = function (elm) {\n      return elm.innerText || elm.textContent;\n    };\n    var getOrGenerateId = function (elm) {\n      return elm.id ? elm.id : generate$6('h');\n    };\n    var isAnchor = function (elm) {\n      return elm && elm.nodeName === 'A' && (elm.id || elm.name) !== undefined;\n    };\n    var isValidAnchor = function (elm) {\n      return isAnchor(elm) && isEditable(elm);\n    };\n    var isHeader = function (elm) {\n      return elm && /^(H[1-6])$/.test(elm.nodeName);\n    };\n    var isEditable = function (elm) {\n      return isChildOfContentEditableTrue(elm) && !isContentEditableFalse(elm);\n    };\n    var isValidHeader = function (elm) {\n      return isHeader(elm) && isEditable(elm);\n    };\n    var getLevel = function (elm) {\n      return isHeader(elm) ? parseInt(elm.nodeName.substr(1), 10) : 0;\n    };\n    var headerTarget = function (elm) {\n      var headerId = getOrGenerateId(elm);\n      var attach = function () {\n        elm.id = headerId;\n      };\n      return create('header', getElementText(elm), '#' + headerId, getLevel(elm), attach);\n    };\n    var anchorTarget = function (elm) {\n      var anchorId = elm.id || elm.name;\n      var anchorText = getElementText(elm);\n      return create('anchor', anchorText ? anchorText : '#' + anchorId, '#' + anchorId, 0, noop);\n    };\n    var getHeaderTargets = function (elms) {\n      return map$2(filter$2(elms, isValidHeader), headerTarget);\n    };\n    var getAnchorTargets = function (elms) {\n      return map$2(filter$2(elms, isValidAnchor), anchorTarget);\n    };\n    var getTargetElements = function (elm) {\n      var elms = select('h1,h2,h3,h4,h5,h6,a:not([href])', elm);\n      return elms;\n    };\n    var hasTitle = function (target) {\n      return trim(target.title).length > 0;\n    };\n    var find = function (elm) {\n      var elms = getTargetElements(elm);\n      return filter$2(getHeaderTargets(elms).concat(getAnchorTargets(elms)), hasTitle);\n    };\n    var LinkTargets = { find: find };\n\n    var STORAGE_KEY = 'tinymce-url-history';\n    var HISTORY_LENGTH = 5;\n    var isHttpUrl = function (url) {\n      return isString(url) && /^https?/.test(url);\n    };\n    var isArrayOfUrl = function (a) {\n      return isArray(a) && a.length <= HISTORY_LENGTH && forall(a, isHttpUrl);\n    };\n    var isRecordOfUrlArray = function (r) {\n      return isObject(r) && find$4(r, function (value) {\n        return !isArrayOfUrl(value);\n      }).isNone();\n    };\n    var getAllHistory = function () {\n      var unparsedHistory = global$8.getItem(STORAGE_KEY);\n      if (unparsedHistory === null) {\n        return {};\n      }\n      var history;\n      try {\n        history = JSON.parse(unparsedHistory);\n      } catch (e) {\n        if (e instanceof SyntaxError) {\n          console.log('Local storage ' + STORAGE_KEY + ' was not valid JSON', e);\n          return {};\n        }\n        throw e;\n      }\n      if (!isRecordOfUrlArray(history)) {\n        console.log('Local storage ' + STORAGE_KEY + ' was not valid format', history);\n        return {};\n      }\n      return history;\n    };\n    var setAllHistory = function (history) {\n      if (!isRecordOfUrlArray(history)) {\n        throw new Error('Bad format for history:\\n' + JSON.stringify(history));\n      }\n      global$8.setItem(STORAGE_KEY, JSON.stringify(history));\n    };\n    var getHistory = function (fileType) {\n      var history = getAllHistory();\n      return get$e(history, fileType).getOr([]);\n    };\n    var addToHistory = function (url, fileType) {\n      if (!isHttpUrl(url)) {\n        return;\n      }\n      var history = getAllHistory();\n      var items = get$e(history, fileType).getOr([]);\n      var itemsWithoutUrl = filter$2(items, function (item) {\n        return item !== url;\n      });\n      history[fileType] = [url].concat(itemsWithoutUrl).slice(0, HISTORY_LENGTH);\n      setAllHistory(history);\n    };\n\n    var isTruthy = function (value) {\n      return !!value;\n    };\n    var makeMap = function (value) {\n      return map$1(global$5.makeMap(value, /[, ]/), isTruthy);\n    };\n    var getPicker = function (editor) {\n      return Optional.from(getFilePickerCallback(editor)).filter(isFunction);\n    };\n    var getPickerTypes = function (editor) {\n      var optFileTypes = Optional.some(getFilePickerTypes(editor)).filter(isTruthy);\n      var optLegacyTypes = Optional.some(getFileBrowserCallbackTypes(editor)).filter(isTruthy);\n      var optTypes = optFileTypes.or(optLegacyTypes).map(makeMap);\n      return getPicker(editor).fold(never, function (_picker) {\n        return optTypes.fold(always, function (types) {\n          return keys(types).length > 0 ? types : false;\n        });\n      });\n    };\n    var getPickerSetting = function (editor, filetype) {\n      var pickerTypes = getPickerTypes(editor);\n      if (isBoolean(pickerTypes)) {\n        return pickerTypes ? getPicker(editor) : Optional.none();\n      } else {\n        return pickerTypes[filetype] ? getPicker(editor) : Optional.none();\n      }\n    };\n    var getUrlPicker = function (editor, filetype) {\n      return getPickerSetting(editor, filetype).map(function (picker) {\n        return function (entry) {\n          return Future.nu(function (completer) {\n            var handler = function (value, meta) {\n              if (!isString(value)) {\n                throw new Error('Expected value to be string');\n              }\n              if (meta !== undefined && !isObject(meta)) {\n                throw new Error('Expected meta to be a object');\n              }\n              var r = {\n                value: value,\n                meta: meta\n              };\n              completer(r);\n            };\n            var meta = __assign({\n              filetype: filetype,\n              fieldname: entry.fieldname\n            }, Optional.from(entry.meta).getOr({}));\n            picker.call(editor, handler, entry.value, meta);\n          });\n        };\n      });\n    };\n    var getTextSetting = function (value) {\n      return Optional.from(value).filter(isString).getOrUndefined();\n    };\n    var getLinkInformation = function (editor) {\n      if (noTypeaheadUrls(editor)) {\n        return Optional.none();\n      }\n      return Optional.some({\n        targets: LinkTargets.find(editor.getBody()),\n        anchorTop: getTextSetting(getAnchorTop(editor)),\n        anchorBottom: getTextSetting(getAnchorBottom(editor))\n      });\n    };\n    var getValidationHandler = function (editor) {\n      return Optional.from(getFilePickerValidatorHandler(editor));\n    };\n    var UrlInputBackstage = function (editor) {\n      return {\n        getHistory: getHistory,\n        addToHistory: addToHistory,\n        getLinkInformation: function () {\n          return getLinkInformation(editor);\n        },\n        getValidationHandler: function () {\n          return getValidationHandler(editor);\n        },\n        getUrlPicker: function (filetype) {\n          return getUrlPicker(editor, filetype);\n        }\n      };\n    };\n\n    var init$7 = function (sink, editor, lazyAnchorbar) {\n      var contextMenuState = Cell(false);\n      var toolbar = HeaderBackstage(editor);\n      var backstage = {\n        shared: {\n          providers: {\n            icons: function () {\n              return editor.ui.registry.getAll().icons;\n            },\n            menuItems: function () {\n              return editor.ui.registry.getAll().menuItems;\n            },\n            translate: global$e.translate,\n            isDisabled: function () {\n              return editor.mode.isReadOnly() || editor.ui.isDisabled();\n            },\n            getSetting: editor.getParam.bind(editor)\n          },\n          interpreter: function (s) {\n            return interpretWithoutForm(s, backstage);\n          },\n          anchors: getAnchors(editor, lazyAnchorbar, toolbar.isPositionedAtTop),\n          header: toolbar,\n          getSink: function () {\n            return Result.value(sink);\n          }\n        },\n        urlinput: UrlInputBackstage(editor),\n        styleselect: init$8(editor),\n        colorinput: ColorInputBackstage(editor),\n        dialog: DialogBackstage(editor),\n        isContextMenuOpen: function () {\n          return contextMenuState.get();\n        },\n        setContextMenuState: function (state) {\n          return contextMenuState.set(state);\n        }\n      };\n      return backstage;\n    };\n\n    var setup$b = function (editor, mothership, uiMothership) {\n      var broadcastEvent = function (name, evt) {\n        each$1([\n          mothership,\n          uiMothership\n        ], function (ship) {\n          ship.broadcastEvent(name, evt);\n        });\n      };\n      var broadcastOn = function (channel, message) {\n        each$1([\n          mothership,\n          uiMothership\n        ], function (ship) {\n          ship.broadcastOn([channel], message);\n        });\n      };\n      var fireDismissPopups = function (evt) {\n        return broadcastOn(dismissPopups(), { target: evt.target });\n      };\n      var doc = getDocument();\n      var onTouchstart = bind(doc, 'touchstart', fireDismissPopups);\n      var onTouchmove = bind(doc, 'touchmove', function (evt) {\n        return broadcastEvent(documentTouchmove(), evt);\n      });\n      var onTouchend = bind(doc, 'touchend', function (evt) {\n        return broadcastEvent(documentTouchend(), evt);\n      });\n      var onMousedown = bind(doc, 'mousedown', fireDismissPopups);\n      var onMouseup = bind(doc, 'mouseup', function (evt) {\n        if (evt.raw.button === 0) {\n          broadcastOn(mouseReleased(), { target: evt.target });\n        }\n      });\n      var onContentClick = function (raw) {\n        return broadcastOn(dismissPopups(), { target: SugarElement.fromDom(raw.target) });\n      };\n      var onContentMouseup = function (raw) {\n        if (raw.button === 0) {\n          broadcastOn(mouseReleased(), { target: SugarElement.fromDom(raw.target) });\n        }\n      };\n      var onContentMousedown = function () {\n        each$1(editor.editorManager.get(), function (loopEditor) {\n          if (editor !== loopEditor) {\n            loopEditor.fire('DismissPopups', { relatedTarget: editor });\n          }\n        });\n      };\n      var onWindowScroll = function (evt) {\n        return broadcastEvent(windowScroll(), fromRawEvent(evt));\n      };\n      var onWindowResize = function (evt) {\n        broadcastOn(repositionPopups(), {});\n        broadcastEvent(windowResize(), fromRawEvent(evt));\n      };\n      var onEditorResize = function () {\n        return broadcastOn(repositionPopups(), {});\n      };\n      var onEditorProgress = function (evt) {\n        if (evt.state) {\n          broadcastOn(dismissPopups(), { target: SugarElement.fromDom(editor.getContainer()) });\n        }\n      };\n      var onDismissPopups = function (event) {\n        broadcastOn(dismissPopups(), { target: SugarElement.fromDom(event.relatedTarget.getContainer()) });\n      };\n      editor.on('PostRender', function () {\n        editor.on('click', onContentClick);\n        editor.on('tap', onContentClick);\n        editor.on('mouseup', onContentMouseup);\n        editor.on('mousedown', onContentMousedown);\n        editor.on('ScrollWindow', onWindowScroll);\n        editor.on('ResizeWindow', onWindowResize);\n        editor.on('ResizeEditor', onEditorResize);\n        editor.on('AfterProgressState', onEditorProgress);\n        editor.on('DismissPopups', onDismissPopups);\n      });\n      editor.on('remove', function () {\n        editor.off('click', onContentClick);\n        editor.off('tap', onContentClick);\n        editor.off('mouseup', onContentMouseup);\n        editor.off('mousedown', onContentMousedown);\n        editor.off('ScrollWindow', onWindowScroll);\n        editor.off('ResizeWindow', onWindowResize);\n        editor.off('ResizeEditor', onEditorResize);\n        editor.off('AfterProgressState', onEditorProgress);\n        editor.off('DismissPopups', onDismissPopups);\n        onMousedown.unbind();\n        onTouchstart.unbind();\n        onTouchmove.unbind();\n        onTouchend.unbind();\n        onMouseup.unbind();\n      });\n      editor.on('detach', function () {\n        detachSystem(mothership);\n        detachSystem(uiMothership);\n        mothership.destroy();\n        uiMothership.destroy();\n      });\n    };\n\n    var parts$a = AlloyParts;\n    var partType = PartType;\n\n    var schema$f = constant$1([\n      defaulted('shell', false),\n      required$1('makeItem'),\n      defaulted('setupItem', noop),\n      SketchBehaviours.field('listBehaviours', [Replacing])\n    ]);\n    var customListDetail = function () {\n      return { behaviours: derive$1([Replacing.config({})]) };\n    };\n    var itemsPart = optional({\n      name: 'items',\n      overrides: customListDetail\n    });\n    var parts$9 = constant$1([itemsPart]);\n    var name = constant$1('CustomList');\n\n    var factory$d = function (detail, components, _spec, _external) {\n      var setItems = function (list, items) {\n        getListContainer(list).fold(function () {\n          console.error('Custom List was defined to not be a shell, but no item container was specified in components');\n          throw new Error('Custom List was defined to not be a shell, but no item container was specified in components');\n        }, function (container) {\n          var itemComps = Replacing.contents(container);\n          var numListsRequired = items.length;\n          var numListsToAdd = numListsRequired - itemComps.length;\n          var itemsToAdd = numListsToAdd > 0 ? range$2(numListsToAdd, function () {\n            return detail.makeItem();\n          }) : [];\n          var itemsToRemove = itemComps.slice(numListsRequired);\n          each$1(itemsToRemove, function (item) {\n            return Replacing.remove(container, item);\n          });\n          each$1(itemsToAdd, function (item) {\n            return Replacing.append(container, item);\n          });\n          var builtLists = Replacing.contents(container);\n          each$1(builtLists, function (item, i) {\n            detail.setupItem(list, item, items[i], i);\n          });\n        });\n      };\n      var extra = detail.shell ? {\n        behaviours: [Replacing.config({})],\n        components: []\n      } : {\n        behaviours: [],\n        components: components\n      };\n      var getListContainer = function (component) {\n        return detail.shell ? Optional.some(component) : getPart(component, detail, 'items');\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: extra.components,\n        behaviours: augment(detail.listBehaviours, extra.behaviours),\n        apis: { setItems: setItems }\n      };\n    };\n    var CustomList = composite({\n      name: name(),\n      configFields: schema$f(),\n      partFields: parts$9(),\n      factory: factory$d,\n      apis: {\n        setItems: function (apis, list, items) {\n          apis.setItems(list, items);\n        }\n      }\n    });\n\n    var schema$e = constant$1([\n      required$1('dom'),\n      defaulted('shell', true),\n      field('toolbarBehaviours', [Replacing])\n    ]);\n    var enhanceGroups = function () {\n      return { behaviours: derive$1([Replacing.config({})]) };\n    };\n    var parts$8 = constant$1([optional({\n        name: 'groups',\n        overrides: enhanceGroups\n      })]);\n\n    var factory$c = function (detail, components, _spec, _externals) {\n      var setGroups = function (toolbar, groups) {\n        getGroupContainer(toolbar).fold(function () {\n          console.error('Toolbar was defined to not be a shell, but no groups container was specified in components');\n          throw new Error('Toolbar was defined to not be a shell, but no groups container was specified in components');\n        }, function (container) {\n          Replacing.set(container, groups);\n        });\n      };\n      var getGroupContainer = function (component) {\n        return detail.shell ? Optional.some(component) : getPart(component, detail, 'groups');\n      };\n      var extra = detail.shell ? {\n        behaviours: [Replacing.config({})],\n        components: []\n      } : {\n        behaviours: [],\n        components: components\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: extra.components,\n        behaviours: augment(detail.toolbarBehaviours, extra.behaviours),\n        apis: { setGroups: setGroups },\n        domModification: { attributes: { role: 'group' } }\n      };\n    };\n    var Toolbar = composite({\n      name: 'Toolbar',\n      configFields: schema$e(),\n      partFields: parts$8(),\n      factory: factory$c,\n      apis: {\n        setGroups: function (apis, toolbar, groups) {\n          apis.setGroups(toolbar, groups);\n        }\n      }\n    });\n\n    var setup$a = noop;\n    var isDocked$2 = never;\n    var getBehaviours$1 = constant$1([]);\n\n    var StaticHeader = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setup: setup$a,\n        isDocked: isDocked$2,\n        getBehaviours: getBehaviours$1\n    });\n\n    var getOffsetParent = function (element) {\n      var isFixed = is$1(getRaw(element, 'position'), 'fixed');\n      var offsetParent$1 = isFixed ? Optional.none() : offsetParent(element);\n      return offsetParent$1.orThunk(function () {\n        var marker = SugarElement.fromTag('span');\n        return parent(element).bind(function (parent) {\n          append$2(parent, marker);\n          var offsetParent$1 = offsetParent(marker);\n          remove$5(marker);\n          return offsetParent$1;\n        });\n      });\n    };\n    var getOrigin = function (element) {\n      return getOffsetParent(element).map(absolute$3).getOrThunk(function () {\n        return SugarPosition(0, 0);\n      });\n    };\n\n    var morphAdt = Adt.generate([\n      { static: [] },\n      { absolute: ['positionCss'] },\n      { fixed: ['positionCss'] }\n    ]);\n    var appear = function (component, contextualInfo) {\n      var elem = component.element;\n      add$2(elem, contextualInfo.transitionClass);\n      remove$2(elem, contextualInfo.fadeOutClass);\n      add$2(elem, contextualInfo.fadeInClass);\n      contextualInfo.onShow(component);\n    };\n    var disappear = function (component, contextualInfo) {\n      var elem = component.element;\n      add$2(elem, contextualInfo.transitionClass);\n      remove$2(elem, contextualInfo.fadeInClass);\n      add$2(elem, contextualInfo.fadeOutClass);\n      contextualInfo.onHide(component);\n    };\n    var isPartiallyVisible = function (box, viewport) {\n      return box.y < viewport.bottom && box.bottom > viewport.y;\n    };\n    var isTopCompletelyVisible = function (box, viewport) {\n      return box.y >= viewport.y;\n    };\n    var isBottomCompletelyVisible = function (box, viewport) {\n      return box.bottom <= viewport.bottom;\n    };\n    var isVisibleForModes = function (modes, box, viewport) {\n      return forall(modes, function (mode) {\n        switch (mode) {\n        case 'bottom':\n          return isBottomCompletelyVisible(box, viewport);\n        case 'top':\n          return isTopCompletelyVisible(box, viewport);\n        }\n      });\n    };\n    var getPrior = function (elem, state) {\n      return state.getInitialPos().map(function (pos) {\n        return bounds(pos.bounds.x, pos.bounds.y, get$a(elem), get$b(elem));\n      });\n    };\n    var storePrior = function (elem, box, state) {\n      state.setInitialPos({\n        style: getAllRaw(elem),\n        position: get$c(elem, 'position') || 'static',\n        bounds: box\n      });\n    };\n    var revertToOriginal = function (elem, box, state) {\n      return state.getInitialPos().bind(function (position) {\n        state.clearInitialPos();\n        switch (position.position) {\n        case 'static':\n          return Optional.some(morphAdt.static());\n        case 'absolute':\n          var offsetBox_1 = getOffsetParent(elem).map(box$1).getOrThunk(function () {\n            return box$1(body());\n          });\n          return Optional.some(morphAdt.absolute(NuPositionCss('absolute', get$e(position.style, 'left').map(function (_left) {\n            return box.x - offsetBox_1.x;\n          }), get$e(position.style, 'top').map(function (_top) {\n            return box.y - offsetBox_1.y;\n          }), get$e(position.style, 'right').map(function (_right) {\n            return offsetBox_1.right - box.right;\n          }), get$e(position.style, 'bottom').map(function (_bottom) {\n            return offsetBox_1.bottom - box.bottom;\n          }))));\n        default:\n          return Optional.none();\n        }\n      });\n    };\n    var morphToOriginal = function (elem, viewport, state) {\n      return getPrior(elem, state).filter(function (box) {\n        return isVisibleForModes(state.getModes(), box, viewport);\n      }).bind(function (box) {\n        return revertToOriginal(elem, box, state);\n      });\n    };\n    var morphToFixed = function (elem, viewport, state) {\n      var box = box$1(elem);\n      if (!isVisibleForModes(state.getModes(), box, viewport)) {\n        storePrior(elem, box, state);\n        var winBox = win();\n        var left = box.x - winBox.x;\n        var top_1 = viewport.y - winBox.y;\n        var bottom = winBox.bottom - viewport.bottom;\n        var isTop = box.y <= viewport.y;\n        return Optional.some(morphAdt.fixed(NuPositionCss('fixed', Optional.some(left), isTop ? Optional.some(top_1) : Optional.none(), Optional.none(), !isTop ? Optional.some(bottom) : Optional.none())));\n      } else {\n        return Optional.none();\n      }\n    };\n    var getMorph = function (component, viewport, state) {\n      var elem = component.element;\n      var isDocked = is$1(getRaw(elem, 'position'), 'fixed');\n      return isDocked ? morphToOriginal(elem, viewport, state) : morphToFixed(elem, viewport, state);\n    };\n    var getMorphToOriginal = function (component, state) {\n      var elem = component.element;\n      return getPrior(elem, state).bind(function (box) {\n        return revertToOriginal(elem, box, state);\n      });\n    };\n\n    var morphToStatic = function (component, config, state) {\n      state.setDocked(false);\n      each$1([\n        'left',\n        'right',\n        'top',\n        'bottom',\n        'position'\n      ], function (prop) {\n        return remove$6(component.element, prop);\n      });\n      config.onUndocked(component);\n    };\n    var morphToCoord = function (component, config, state, position) {\n      var isDocked = position.position === 'fixed';\n      state.setDocked(isDocked);\n      applyPositionCss(component.element, position);\n      var method = isDocked ? config.onDocked : config.onUndocked;\n      method(component);\n    };\n    var updateVisibility = function (component, config, state, viewport, morphToDocked) {\n      if (morphToDocked === void 0) {\n        morphToDocked = false;\n      }\n      config.contextual.each(function (contextInfo) {\n        contextInfo.lazyContext(component).each(function (box) {\n          var isVisible = isPartiallyVisible(box, viewport);\n          if (isVisible !== state.isVisible()) {\n            state.setVisible(isVisible);\n            if (morphToDocked && !isVisible) {\n              add$1(component.element, [contextInfo.fadeOutClass]);\n              contextInfo.onHide(component);\n            } else {\n              var method = isVisible ? appear : disappear;\n              method(component, contextInfo);\n            }\n          }\n        });\n      });\n    };\n    var refreshInternal = function (component, config, state) {\n      var viewport = config.lazyViewport(component);\n      var isDocked = state.isDocked();\n      if (isDocked) {\n        updateVisibility(component, config, state, viewport);\n      }\n      getMorph(component, viewport, state).each(function (morph) {\n        morph.fold(function () {\n          return morphToStatic(component, config, state);\n        }, function (position) {\n          return morphToCoord(component, config, state, position);\n        }, function (position) {\n          updateVisibility(component, config, state, viewport, true);\n          morphToCoord(component, config, state, position);\n        });\n      });\n    };\n    var resetInternal = function (component, config, state) {\n      var elem = component.element;\n      state.setDocked(false);\n      getMorphToOriginal(component, state).each(function (morph) {\n        morph.fold(function () {\n          return morphToStatic(component, config, state);\n        }, function (position) {\n          return morphToCoord(component, config, state, position);\n        }, noop);\n      });\n      state.setVisible(true);\n      config.contextual.each(function (contextInfo) {\n        remove$1(elem, [\n          contextInfo.fadeInClass,\n          contextInfo.fadeOutClass,\n          contextInfo.transitionClass\n        ]);\n        contextInfo.onShow(component);\n      });\n      refresh$4(component, config, state);\n    };\n    var refresh$4 = function (component, config, state) {\n      if (component.getSystem().isConnected()) {\n        refreshInternal(component, config, state);\n      }\n    };\n    var reset = function (component, config, state) {\n      if (state.isDocked()) {\n        resetInternal(component, config, state);\n      }\n    };\n    var isDocked$1 = function (component, config, state) {\n      return state.isDocked();\n    };\n    var setModes = function (component, config, state, modes) {\n      return state.setModes(modes);\n    };\n    var getModes = function (component, config, state) {\n      return state.getModes();\n    };\n\n    var DockingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        refresh: refresh$4,\n        reset: reset,\n        isDocked: isDocked$1,\n        getModes: getModes,\n        setModes: setModes\n    });\n\n    var events$5 = function (dockInfo, dockState) {\n      return derive$2([\n        runOnSource(transitionend(), function (component, simulatedEvent) {\n          dockInfo.contextual.each(function (contextInfo) {\n            if (has(component.element, contextInfo.transitionClass)) {\n              remove$1(component.element, [\n                contextInfo.transitionClass,\n                contextInfo.fadeInClass\n              ]);\n              var notify = dockState.isVisible() ? contextInfo.onShown : contextInfo.onHidden;\n              notify(component);\n            }\n            simulatedEvent.stop();\n          });\n        }),\n        run$1(windowScroll(), function (component, _) {\n          refresh$4(component, dockInfo, dockState);\n        }),\n        run$1(windowResize(), function (component, _) {\n          reset(component, dockInfo, dockState);\n        })\n      ]);\n    };\n\n    var ActiveDocking = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$5\n    });\n\n    var DockingSchema = [\n      optionObjOf('contextual', [\n        requiredString('fadeInClass'),\n        requiredString('fadeOutClass'),\n        requiredString('transitionClass'),\n        requiredFunction('lazyContext'),\n        onHandler('onShow'),\n        onHandler('onShown'),\n        onHandler('onHide'),\n        onHandler('onHidden')\n      ]),\n      defaultedFunction('lazyViewport', win),\n      defaultedArrayOf('modes', [\n        'top',\n        'bottom'\n      ], string),\n      onHandler('onDocked'),\n      onHandler('onUndocked')\n    ];\n\n    var init$6 = function (spec) {\n      var docked = Cell(false);\n      var visible = Cell(true);\n      var initialBounds = value$1();\n      var modes = Cell(spec.modes);\n      var readState = function () {\n        return 'docked:  ' + docked.get() + ', visible: ' + visible.get() + ', modes: ' + modes.get().join(',');\n      };\n      return nu$8({\n        isDocked: docked.get,\n        setDocked: docked.set,\n        getInitialPos: initialBounds.get,\n        setInitialPos: initialBounds.set,\n        clearInitialPos: initialBounds.clear,\n        isVisible: visible.get,\n        setVisible: visible.set,\n        getModes: modes.get,\n        setModes: modes.set,\n        readState: readState\n      });\n    };\n\n    var DockingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$6\n    });\n\n    var Docking = create$8({\n      fields: DockingSchema,\n      name: 'docking',\n      active: ActiveDocking,\n      apis: DockingApis,\n      state: DockingState\n    });\n\n    var toolbarHeightChange = constant$1(generate$6('toolbar-height-change'));\n\n    var visibility = {\n      fadeInClass: 'tox-editor-dock-fadein',\n      fadeOutClass: 'tox-editor-dock-fadeout',\n      transitionClass: 'tox-editor-dock-transition'\n    };\n    var editorStickyOnClass = 'tox-tinymce--toolbar-sticky-on';\n    var editorStickyOffClass = 'tox-tinymce--toolbar-sticky-off';\n    var scrollFromBehindHeader = function (e, containerHeader) {\n      var doc = owner$4(containerHeader);\n      var viewHeight = doc.dom.defaultView.innerHeight;\n      var scrollPos = get$9(doc);\n      var markerElement = SugarElement.fromDom(e.elm);\n      var markerPos = absolute$2(markerElement);\n      var markerHeight = get$b(markerElement);\n      var markerTop = markerPos.y;\n      var markerBottom = markerTop + markerHeight;\n      var editorHeaderPos = absolute$3(containerHeader);\n      var editorHeaderHeight = get$b(containerHeader);\n      var editorHeaderTop = editorHeaderPos.top;\n      var editorHeaderBottom = editorHeaderTop + editorHeaderHeight;\n      var editorHeaderDockedAtTop = Math.abs(editorHeaderTop - scrollPos.top) < 2;\n      var editorHeaderDockedAtBottom = Math.abs(editorHeaderBottom - (scrollPos.top + viewHeight)) < 2;\n      if (editorHeaderDockedAtTop && markerTop < editorHeaderBottom) {\n        to(scrollPos.left, markerTop - editorHeaderHeight, doc);\n      } else if (editorHeaderDockedAtBottom && markerBottom > editorHeaderTop) {\n        var y = markerTop - viewHeight + markerHeight + editorHeaderHeight;\n        to(scrollPos.left, y, doc);\n      }\n    };\n    var isDockedMode = function (header, mode) {\n      return contains$2(Docking.getModes(header), mode);\n    };\n    var updateIframeContentFlow = function (header) {\n      var getOccupiedHeight = function (elm) {\n        return getOuter$2(elm) + (parseInt(get$c(elm, 'margin-top'), 10) || 0) + (parseInt(get$c(elm, 'margin-bottom'), 10) || 0);\n      };\n      var elm = header.element;\n      parent(elm).each(function (parentElem) {\n        var padding = 'padding-' + Docking.getModes(header)[0];\n        if (Docking.isDocked(header)) {\n          var parentWidth = get$a(parentElem);\n          set$7(elm, 'width', parentWidth + 'px');\n          set$7(parentElem, padding, getOccupiedHeight(elm) + 'px');\n        } else {\n          remove$6(elm, 'width');\n          remove$6(parentElem, padding);\n        }\n      });\n    };\n    var updateSinkVisibility = function (sinkElem, visible) {\n      if (visible) {\n        remove$2(sinkElem, visibility.fadeOutClass);\n        add$1(sinkElem, [\n          visibility.transitionClass,\n          visibility.fadeInClass\n        ]);\n      } else {\n        remove$2(sinkElem, visibility.fadeInClass);\n        add$1(sinkElem, [\n          visibility.fadeOutClass,\n          visibility.transitionClass\n        ]);\n      }\n    };\n    var updateEditorClasses = function (editor, docked) {\n      var editorContainer = SugarElement.fromDom(editor.getContainer());\n      if (docked) {\n        add$2(editorContainer, editorStickyOnClass);\n        remove$2(editorContainer, editorStickyOffClass);\n      } else {\n        add$2(editorContainer, editorStickyOffClass);\n        remove$2(editorContainer, editorStickyOnClass);\n      }\n    };\n    var restoreFocus = function (headerElem, focusedElem) {\n      var ownerDoc = owner$4(focusedElem);\n      active(ownerDoc).filter(function (activeElm) {\n        return !eq(focusedElem, activeElm);\n      }).filter(function (activeElm) {\n        return eq(activeElm, SugarElement.fromDom(ownerDoc.dom.body)) || contains(headerElem, activeElm);\n      }).each(function () {\n        return focus$3(focusedElem);\n      });\n    };\n    var findFocusedElem = function (rootElm, lazySink) {\n      return search(rootElm).orThunk(function () {\n        return lazySink().toOptional().bind(function (sink) {\n          return search(sink.element);\n        });\n      });\n    };\n    var setup$9 = function (editor, sharedBackstage, lazyHeader) {\n      if (!editor.inline) {\n        if (!sharedBackstage.header.isPositionedAtTop()) {\n          editor.on('ResizeEditor', function () {\n            lazyHeader().each(Docking.reset);\n          });\n        }\n        editor.on('ResizeWindow ResizeEditor', function () {\n          lazyHeader().each(updateIframeContentFlow);\n        });\n        editor.on('SkinLoaded', function () {\n          lazyHeader().each(function (comp) {\n            Docking.isDocked(comp) ? Docking.reset(comp) : Docking.refresh(comp);\n          });\n        });\n        editor.on('FullscreenStateChanged', function () {\n          lazyHeader().each(Docking.reset);\n        });\n      }\n      editor.on('AfterScrollIntoView', function (e) {\n        lazyHeader().each(function (header) {\n          Docking.refresh(header);\n          var headerElem = header.element;\n          if (isVisible(headerElem)) {\n            scrollFromBehindHeader(e, headerElem);\n          }\n        });\n      });\n      editor.on('PostRender', function () {\n        updateEditorClasses(editor, false);\n      });\n    };\n    var isDocked = function (lazyHeader) {\n      return lazyHeader().map(Docking.isDocked).getOr(false);\n    };\n    var getIframeBehaviours = function () {\n      var _a;\n      return [Receiving.config({ channels: (_a = {}, _a[toolbarHeightChange()] = { onReceive: updateIframeContentFlow }, _a) })];\n    };\n    var getBehaviours = function (editor, sharedBackstage) {\n      var focusedElm = value$1();\n      var lazySink = sharedBackstage.getSink;\n      var runOnSinkElement = function (f) {\n        lazySink().each(function (sink) {\n          return f(sink.element);\n        });\n      };\n      var onDockingSwitch = function (comp) {\n        if (!editor.inline) {\n          updateIframeContentFlow(comp);\n        }\n        updateEditorClasses(editor, Docking.isDocked(comp));\n        comp.getSystem().broadcastOn([repositionPopups()], {});\n        lazySink().each(function (sink) {\n          return sink.getSystem().broadcastOn([repositionPopups()], {});\n        });\n      };\n      var additionalBehaviours = editor.inline ? [] : getIframeBehaviours();\n      return __spreadArray([\n        Focusing.config({}),\n        Docking.config({\n          contextual: __assign({\n            lazyContext: function (comp) {\n              var headerHeight = getOuter$2(comp.element);\n              var container = editor.inline ? editor.getContentAreaContainer() : editor.getContainer();\n              var box = box$1(SugarElement.fromDom(container));\n              var boxHeight = box.height - headerHeight;\n              var topBound = box.y + (isDockedMode(comp, 'top') ? 0 : headerHeight);\n              return Optional.some(bounds(box.x, topBound, box.width, boxHeight));\n            },\n            onShow: function () {\n              runOnSinkElement(function (elem) {\n                return updateSinkVisibility(elem, true);\n              });\n            },\n            onShown: function (comp) {\n              runOnSinkElement(function (elem) {\n                return remove$1(elem, [\n                  visibility.transitionClass,\n                  visibility.fadeInClass\n                ]);\n              });\n              focusedElm.get().each(function (elem) {\n                restoreFocus(comp.element, elem);\n                focusedElm.clear();\n              });\n            },\n            onHide: function (comp) {\n              findFocusedElem(comp.element, lazySink).fold(focusedElm.clear, focusedElm.set);\n              runOnSinkElement(function (elem) {\n                return updateSinkVisibility(elem, false);\n              });\n            },\n            onHidden: function () {\n              runOnSinkElement(function (elem) {\n                return remove$1(elem, [visibility.transitionClass]);\n              });\n            }\n          }, visibility),\n          lazyViewport: function (comp) {\n            var win$1 = win();\n            var offset = getStickyToolbarOffset(editor);\n            var top = win$1.y + (isDockedMode(comp, 'top') ? offset : 0);\n            var height = win$1.height - (isDockedMode(comp, 'bottom') ? offset : 0);\n            return bounds(win$1.x, top, win$1.width, height);\n          },\n          modes: [sharedBackstage.header.getDockingMode()],\n          onDocked: onDockingSwitch,\n          onUndocked: onDockingSwitch\n        })\n      ], additionalBehaviours, true);\n    };\n\n    var StickyHeader = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setup: setup$9,\n        isDocked: isDocked,\n        getBehaviours: getBehaviours\n    });\n\n    var renderHeader = function (spec) {\n      var editor = spec.editor;\n      var getBehaviours$2 = spec.sticky ? getBehaviours : getBehaviours$1;\n      return {\n        uid: spec.uid,\n        dom: spec.dom,\n        components: spec.components,\n        behaviours: derive$1(getBehaviours$2(editor, spec.sharedBackstage))\n      };\n    };\n\n    var groupToolbarButtonSchema = objOf([\n      requiredString('type'),\n      requiredOf('items', oneOf([\n        arrOfObj([\n          requiredString('name'),\n          requiredArrayOf('items', string)\n        ]),\n        string\n      ]))\n    ].concat(baseToolbarButtonFields));\n    var createGroupToolbarButton = function (spec) {\n      return asRaw('GroupToolbarButton', groupToolbarButtonSchema, spec);\n    };\n\n    var baseMenuButtonFields = [\n      optionString('text'),\n      optionString('tooltip'),\n      optionString('icon'),\n      requiredFunction('fetch'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      })\n    ];\n\n    var MenuButtonSchema = objOf(__spreadArray([requiredString('type')], baseMenuButtonFields, true));\n    var createMenuButton = function (spec) {\n      return asRaw('menubutton', MenuButtonSchema, spec);\n    };\n\n    var splitButtonSchema = objOf([\n      requiredString('type'),\n      optionString('tooltip'),\n      optionString('icon'),\n      optionString('text'),\n      optionFunction('select'),\n      requiredFunction('fetch'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      defaultedStringEnum('presets', 'normal', [\n        'normal',\n        'color',\n        'listpreview'\n      ]),\n      defaulted('columns', 1),\n      requiredFunction('onAction'),\n      requiredFunction('onItemAction')\n    ]);\n    var createSplitButton = function (spec) {\n      return asRaw('SplitButton', splitButtonSchema, spec);\n    };\n\n    var factory$b = function (detail, spec) {\n      var setMenus = function (comp, menus) {\n        var newMenus = map$2(menus, function (m) {\n          var buttonSpec = {\n            type: 'menubutton',\n            text: m.text,\n            fetch: function (callback) {\n              callback(m.getItems());\n            }\n          };\n          var internal = createMenuButton(buttonSpec).mapError(function (errInfo) {\n            return formatError(errInfo);\n          }).getOrDie();\n          return renderMenuButton(internal, 'tox-mbtn', spec.backstage, Optional.some('menuitem'));\n        });\n        Replacing.set(comp, newMenus);\n      };\n      var apis = {\n        focus: Keying.focusIn,\n        setMenus: setMenus\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: [],\n        behaviours: derive$1([\n          Replacing.config({}),\n          config('menubar-events', [\n            runOnAttached(function (component) {\n              detail.onSetup(component);\n            }),\n            run$1(mouseover(), function (comp, se) {\n              descendant(comp.element, '.' + 'tox-mbtn--active').each(function (activeButton) {\n                closest$1(se.event.target, '.' + 'tox-mbtn').each(function (hoveredButton) {\n                  if (!eq(activeButton, hoveredButton)) {\n                    comp.getSystem().getByDom(activeButton).each(function (activeComp) {\n                      comp.getSystem().getByDom(hoveredButton).each(function (hoveredComp) {\n                        Dropdown.expand(hoveredComp);\n                        Dropdown.close(activeComp);\n                        Focusing.focus(hoveredComp);\n                      });\n                    });\n                  }\n                });\n              });\n            }),\n            run$1(focusShifted(), function (comp, se) {\n              se.event.prevFocus.bind(function (prev) {\n                return comp.getSystem().getByDom(prev).toOptional();\n              }).each(function (prev) {\n                se.event.newFocus.bind(function (nu) {\n                  return comp.getSystem().getByDom(nu).toOptional();\n                }).each(function (nu) {\n                  if (Dropdown.isOpen(prev)) {\n                    Dropdown.expand(nu);\n                    Dropdown.close(prev);\n                  }\n                });\n              });\n            })\n          ]),\n          Keying.config({\n            mode: 'flow',\n            selector: '.' + 'tox-mbtn',\n            onEscape: function (comp) {\n              detail.onEscape(comp);\n              return Optional.some(true);\n            }\n          }),\n          Tabstopping.config({})\n        ]),\n        apis: apis,\n        domModification: { attributes: { role: 'menubar' } }\n      };\n    };\n    var SilverMenubar = single({\n      factory: factory$b,\n      name: 'silver.Menubar',\n      configFields: [\n        required$1('dom'),\n        required$1('uid'),\n        required$1('onEscape'),\n        required$1('backstage'),\n        defaulted('onSetup', noop)\n      ],\n      apis: {\n        focus: function (apis, comp) {\n          apis.focus(comp);\n        },\n        setMenus: function (apis, comp, menus) {\n          apis.setMenus(comp, menus);\n        }\n      }\n    });\n\n    var getAnimationRoot = function (component, slideConfig) {\n      return slideConfig.getAnimationRoot.fold(function () {\n        return component.element;\n      }, function (get) {\n        return get(component);\n      });\n    };\n\n    var getDimensionProperty = function (slideConfig) {\n      return slideConfig.dimension.property;\n    };\n    var getDimension = function (slideConfig, elem) {\n      return slideConfig.dimension.getDimension(elem);\n    };\n    var disableTransitions = function (component, slideConfig) {\n      var root = getAnimationRoot(component, slideConfig);\n      remove$1(root, [\n        slideConfig.shrinkingClass,\n        slideConfig.growingClass\n      ]);\n    };\n    var setShrunk = function (component, slideConfig) {\n      remove$2(component.element, slideConfig.openClass);\n      add$2(component.element, slideConfig.closedClass);\n      set$7(component.element, getDimensionProperty(slideConfig), '0px');\n      reflow(component.element);\n    };\n    var setGrown = function (component, slideConfig) {\n      remove$2(component.element, slideConfig.closedClass);\n      add$2(component.element, slideConfig.openClass);\n      remove$6(component.element, getDimensionProperty(slideConfig));\n    };\n    var doImmediateShrink = function (component, slideConfig, slideState, _calculatedSize) {\n      slideState.setCollapsed();\n      set$7(component.element, getDimensionProperty(slideConfig), getDimension(slideConfig, component.element));\n      reflow(component.element);\n      disableTransitions(component, slideConfig);\n      setShrunk(component, slideConfig);\n      slideConfig.onStartShrink(component);\n      slideConfig.onShrunk(component);\n    };\n    var doStartShrink = function (component, slideConfig, slideState, calculatedSize) {\n      var size = calculatedSize.getOrThunk(function () {\n        return getDimension(slideConfig, component.element);\n      });\n      slideState.setCollapsed();\n      set$7(component.element, getDimensionProperty(slideConfig), size);\n      reflow(component.element);\n      var root = getAnimationRoot(component, slideConfig);\n      remove$2(root, slideConfig.growingClass);\n      add$2(root, slideConfig.shrinkingClass);\n      setShrunk(component, slideConfig);\n      slideConfig.onStartShrink(component);\n    };\n    var doStartSmartShrink = function (component, slideConfig, slideState) {\n      var size = getDimension(slideConfig, component.element);\n      var shrinker = size === '0px' ? doImmediateShrink : doStartShrink;\n      shrinker(component, slideConfig, slideState, Optional.some(size));\n    };\n    var doStartGrow = function (component, slideConfig, slideState) {\n      var root = getAnimationRoot(component, slideConfig);\n      var wasShrinking = has(root, slideConfig.shrinkingClass);\n      var beforeSize = getDimension(slideConfig, component.element);\n      setGrown(component, slideConfig);\n      var fullSize = getDimension(slideConfig, component.element);\n      var startPartialGrow = function () {\n        set$7(component.element, getDimensionProperty(slideConfig), beforeSize);\n        reflow(component.element);\n      };\n      var startCompleteGrow = function () {\n        setShrunk(component, slideConfig);\n      };\n      var setStartSize = wasShrinking ? startPartialGrow : startCompleteGrow;\n      setStartSize();\n      remove$2(root, slideConfig.shrinkingClass);\n      add$2(root, slideConfig.growingClass);\n      setGrown(component, slideConfig);\n      set$7(component.element, getDimensionProperty(slideConfig), fullSize);\n      slideState.setExpanded();\n      slideConfig.onStartGrow(component);\n    };\n    var refresh$3 = function (component, slideConfig, slideState) {\n      if (slideState.isExpanded()) {\n        remove$6(component.element, getDimensionProperty(slideConfig));\n        var fullSize = getDimension(slideConfig, component.element);\n        set$7(component.element, getDimensionProperty(slideConfig), fullSize);\n      }\n    };\n    var grow = function (component, slideConfig, slideState) {\n      if (!slideState.isExpanded()) {\n        doStartGrow(component, slideConfig, slideState);\n      }\n    };\n    var shrink = function (component, slideConfig, slideState) {\n      if (slideState.isExpanded()) {\n        doStartSmartShrink(component, slideConfig, slideState);\n      }\n    };\n    var immediateShrink = function (component, slideConfig, slideState) {\n      if (slideState.isExpanded()) {\n        doImmediateShrink(component, slideConfig, slideState);\n      }\n    };\n    var hasGrown = function (component, slideConfig, slideState) {\n      return slideState.isExpanded();\n    };\n    var hasShrunk = function (component, slideConfig, slideState) {\n      return slideState.isCollapsed();\n    };\n    var isGrowing = function (component, slideConfig, _slideState) {\n      var root = getAnimationRoot(component, slideConfig);\n      return has(root, slideConfig.growingClass) === true;\n    };\n    var isShrinking = function (component, slideConfig, _slideState) {\n      var root = getAnimationRoot(component, slideConfig);\n      return has(root, slideConfig.shrinkingClass) === true;\n    };\n    var isTransitioning = function (component, slideConfig, slideState) {\n      return isGrowing(component, slideConfig) || isShrinking(component, slideConfig);\n    };\n    var toggleGrow = function (component, slideConfig, slideState) {\n      var f = slideState.isExpanded() ? doStartSmartShrink : doStartGrow;\n      f(component, slideConfig, slideState);\n    };\n\n    var SlidingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        refresh: refresh$3,\n        grow: grow,\n        shrink: shrink,\n        immediateShrink: immediateShrink,\n        hasGrown: hasGrown,\n        hasShrunk: hasShrunk,\n        isGrowing: isGrowing,\n        isShrinking: isShrinking,\n        isTransitioning: isTransitioning,\n        toggleGrow: toggleGrow,\n        disableTransitions: disableTransitions\n    });\n\n    var exhibit = function (base, slideConfig, _slideState) {\n      var expanded = slideConfig.expanded;\n      return expanded ? nu$7({\n        classes: [slideConfig.openClass],\n        styles: {}\n      }) : nu$7({\n        classes: [slideConfig.closedClass],\n        styles: wrap$1(slideConfig.dimension.property, '0px')\n      });\n    };\n    var events$4 = function (slideConfig, slideState) {\n      return derive$2([runOnSource(transitionend(), function (component, simulatedEvent) {\n          var raw = simulatedEvent.event.raw;\n          if (raw.propertyName === slideConfig.dimension.property) {\n            disableTransitions(component, slideConfig);\n            if (slideState.isExpanded()) {\n              remove$6(component.element, slideConfig.dimension.property);\n            }\n            var notify = slideState.isExpanded() ? slideConfig.onGrown : slideConfig.onShrunk;\n            notify(component);\n          }\n        })]);\n    };\n\n    var ActiveSliding = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit,\n        events: events$4\n    });\n\n    var SlidingSchema = [\n      required$1('closedClass'),\n      required$1('openClass'),\n      required$1('shrinkingClass'),\n      required$1('growingClass'),\n      option('getAnimationRoot'),\n      onHandler('onShrunk'),\n      onHandler('onStartShrink'),\n      onHandler('onGrown'),\n      onHandler('onStartGrow'),\n      defaulted('expanded', false),\n      requiredOf('dimension', choose$1('property', {\n        width: [\n          output$1('property', 'width'),\n          output$1('getDimension', function (elem) {\n            return get$a(elem) + 'px';\n          })\n        ],\n        height: [\n          output$1('property', 'height'),\n          output$1('getDimension', function (elem) {\n            return get$b(elem) + 'px';\n          })\n        ]\n      }))\n    ];\n\n    var init$5 = function (spec) {\n      var state = Cell(spec.expanded);\n      var readState = function () {\n        return 'expanded: ' + state.get();\n      };\n      return nu$8({\n        isExpanded: function () {\n          return state.get() === true;\n        },\n        isCollapsed: function () {\n          return state.get() === false;\n        },\n        setCollapsed: curry(state.set, false),\n        setExpanded: curry(state.set, true),\n        readState: readState\n      });\n    };\n\n    var SlidingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$5\n    });\n\n    var Sliding = create$8({\n      fields: SlidingSchema,\n      name: 'sliding',\n      active: ActiveSliding,\n      apis: SlidingApis,\n      state: SlidingState\n    });\n\n    var owner = 'container';\n    var schema$d = [field('slotBehaviours', [])];\n    var getPartName = function (name) {\n      return '<alloy.field.' + name + '>';\n    };\n    var sketch = function (sSpec) {\n      var parts = function () {\n        var record = [];\n        var slot = function (name, config) {\n          record.push(name);\n          return generateOne$1(owner, getPartName(name), config);\n        };\n        return {\n          slot: slot,\n          record: constant$1(record)\n        };\n      }();\n      var spec = sSpec(parts);\n      var partNames = parts.record();\n      var fieldParts = map$2(partNames, function (n) {\n        return required({\n          name: n,\n          pname: getPartName(n)\n        });\n      });\n      return composite$1(owner, schema$d, fieldParts, make$1, spec);\n    };\n    var make$1 = function (detail, components) {\n      var getSlotNames = function (_) {\n        return getAllPartNames(detail);\n      };\n      var getSlot = function (container, key) {\n        return getPart(container, detail, key);\n      };\n      var onSlot = function (f, def) {\n        return function (container, key) {\n          return getPart(container, detail, key).map(function (slot) {\n            return f(slot, key);\n          }).getOr(def);\n        };\n      };\n      var onSlots = function (f) {\n        return function (container, keys) {\n          each$1(keys, function (key) {\n            return f(container, key);\n          });\n        };\n      };\n      var doShowing = function (comp, _key) {\n        return get$d(comp.element, 'aria-hidden') !== 'true';\n      };\n      var doShow = function (comp, key) {\n        if (!doShowing(comp)) {\n          var element = comp.element;\n          remove$6(element, 'display');\n          remove$7(element, 'aria-hidden');\n          emitWith(comp, slotVisibility(), {\n            name: key,\n            visible: true\n          });\n        }\n      };\n      var doHide = function (comp, key) {\n        if (doShowing(comp)) {\n          var element = comp.element;\n          set$7(element, 'display', 'none');\n          set$8(element, 'aria-hidden', 'true');\n          emitWith(comp, slotVisibility(), {\n            name: key,\n            visible: false\n          });\n        }\n      };\n      var isShowing = onSlot(doShowing, false);\n      var hideSlot = onSlot(doHide);\n      var hideSlots = onSlots(hideSlot);\n      var hideAllSlots = function (container) {\n        return hideSlots(container, getSlotNames());\n      };\n      var showSlot = onSlot(doShow);\n      var apis = {\n        getSlotNames: getSlotNames,\n        getSlot: getSlot,\n        isShowing: isShowing,\n        hideSlot: hideSlot,\n        hideAllSlots: hideAllSlots,\n        showSlot: showSlot\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: get$2(detail.slotBehaviours),\n        apis: apis\n      };\n    };\n    var slotApis = map$1({\n      getSlotNames: function (apis, c) {\n        return apis.getSlotNames(c);\n      },\n      getSlot: function (apis, c, key) {\n        return apis.getSlot(c, key);\n      },\n      isShowing: function (apis, c, key) {\n        return apis.isShowing(c, key);\n      },\n      hideSlot: function (apis, c, key) {\n        return apis.hideSlot(c, key);\n      },\n      hideAllSlots: function (apis, c) {\n        return apis.hideAllSlots(c);\n      },\n      showSlot: function (apis, c, key) {\n        return apis.showSlot(c, key);\n      }\n    }, function (value) {\n      return makeApi(value);\n    });\n    var SlotContainer = __assign(__assign({}, slotApis), { sketch: sketch });\n\n    var sidebarSchema = objOf([\n      optionString('icon'),\n      optionString('tooltip'),\n      defaultedFunction('onShow', noop),\n      defaultedFunction('onHide', noop),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      })\n    ]);\n    var createSidebar = function (spec) {\n      return asRaw('sidebar', sidebarSchema, spec);\n    };\n\n    var setup$8 = function (editor) {\n      var sidebars = editor.ui.registry.getAll().sidebars;\n      each$1(keys(sidebars), function (name) {\n        var spec = sidebars[name];\n        var isActive = function () {\n          return is$1(Optional.from(editor.queryCommandValue('ToggleSidebar')), name);\n        };\n        editor.ui.registry.addToggleButton(name, {\n          icon: spec.icon,\n          tooltip: spec.tooltip,\n          onAction: function (buttonApi) {\n            editor.execCommand('ToggleSidebar', false, name);\n            buttonApi.setActive(isActive());\n          },\n          onSetup: function (buttonApi) {\n            var handleToggle = function () {\n              return buttonApi.setActive(isActive());\n            };\n            editor.on('ToggleSidebar', handleToggle);\n            return function () {\n              editor.off('ToggleSidebar', handleToggle);\n            };\n          }\n        });\n      });\n    };\n    var getApi = function (comp) {\n      return {\n        element: function () {\n          return comp.element.dom;\n        }\n      };\n    };\n    var makePanels = function (parts, panelConfigs) {\n      var specs = map$2(keys(panelConfigs), function (name) {\n        var spec = panelConfigs[name];\n        var bridged = getOrDie(createSidebar(spec));\n        return {\n          name: name,\n          getApi: getApi,\n          onSetup: bridged.onSetup,\n          onShow: bridged.onShow,\n          onHide: bridged.onHide\n        };\n      });\n      return map$2(specs, function (spec) {\n        var editorOffCell = Cell(noop);\n        return parts.slot(spec.name, {\n          dom: {\n            tag: 'div',\n            classes: ['tox-sidebar__pane']\n          },\n          behaviours: SimpleBehaviours.unnamedEvents([\n            onControlAttached(spec, editorOffCell),\n            onControlDetached(spec, editorOffCell),\n            run$1(slotVisibility(), function (sidepanel, se) {\n              var data = se.event;\n              var optSidePanelSpec = find$5(specs, function (config) {\n                return config.name === data.name;\n              });\n              optSidePanelSpec.each(function (sidePanelSpec) {\n                var handler = data.visible ? sidePanelSpec.onShow : sidePanelSpec.onHide;\n                handler(sidePanelSpec.getApi(sidepanel));\n              });\n            })\n          ])\n        });\n      });\n    };\n    var makeSidebar = function (panelConfigs) {\n      return SlotContainer.sketch(function (parts) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-sidebar__pane-container']\n          },\n          components: makePanels(parts, panelConfigs),\n          slotBehaviours: SimpleBehaviours.unnamedEvents([runOnAttached(function (slotContainer) {\n              return SlotContainer.hideAllSlots(slotContainer);\n            })])\n        };\n      });\n    };\n    var setSidebar = function (sidebar, panelConfigs) {\n      var optSlider = Composing.getCurrent(sidebar);\n      optSlider.each(function (slider) {\n        return Replacing.set(slider, [makeSidebar(panelConfigs)]);\n      });\n    };\n    var toggleSidebar = function (sidebar, name) {\n      var optSlider = Composing.getCurrent(sidebar);\n      optSlider.each(function (slider) {\n        var optSlotContainer = Composing.getCurrent(slider);\n        optSlotContainer.each(function (slotContainer) {\n          if (Sliding.hasGrown(slider)) {\n            if (SlotContainer.isShowing(slotContainer, name)) {\n              Sliding.shrink(slider);\n            } else {\n              SlotContainer.hideAllSlots(slotContainer);\n              SlotContainer.showSlot(slotContainer, name);\n            }\n          } else {\n            SlotContainer.hideAllSlots(slotContainer);\n            SlotContainer.showSlot(slotContainer, name);\n            Sliding.grow(slider);\n          }\n        });\n      });\n    };\n    var whichSidebar = function (sidebar) {\n      var optSlider = Composing.getCurrent(sidebar);\n      return optSlider.bind(function (slider) {\n        var sidebarOpen = Sliding.isGrowing(slider) || Sliding.hasGrown(slider);\n        if (sidebarOpen) {\n          var optSlotContainer = Composing.getCurrent(slider);\n          return optSlotContainer.bind(function (slotContainer) {\n            return find$5(SlotContainer.getSlotNames(slotContainer), function (name) {\n              return SlotContainer.isShowing(slotContainer, name);\n            });\n          });\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var fixSize = generate$6('FixSizeEvent');\n    var autoSize = generate$6('AutoSizeEvent');\n    var renderSidebar = function (spec) {\n      return {\n        uid: spec.uid,\n        dom: {\n          tag: 'div',\n          classes: ['tox-sidebar'],\n          attributes: { role: 'complementary' }\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-sidebar__slider']\n            },\n            components: [],\n            behaviours: derive$1([\n              Tabstopping.config({}),\n              Focusing.config({}),\n              Sliding.config({\n                dimension: { property: 'width' },\n                closedClass: 'tox-sidebar--sliding-closed',\n                openClass: 'tox-sidebar--sliding-open',\n                shrinkingClass: 'tox-sidebar--sliding-shrinking',\n                growingClass: 'tox-sidebar--sliding-growing',\n                onShrunk: function (slider) {\n                  var optSlotContainer = Composing.getCurrent(slider);\n                  optSlotContainer.each(SlotContainer.hideAllSlots);\n                  emit(slider, autoSize);\n                },\n                onGrown: function (slider) {\n                  emit(slider, autoSize);\n                },\n                onStartGrow: function (slider) {\n                  emitWith(slider, fixSize, { width: getRaw(slider.element, 'width').getOr('') });\n                },\n                onStartShrink: function (slider) {\n                  emitWith(slider, fixSize, { width: get$a(slider.element) + 'px' });\n                }\n              }),\n              Replacing.config({}),\n              Composing.config({\n                find: function (comp) {\n                  var children = Replacing.contents(comp);\n                  return head(children);\n                }\n              })\n            ])\n          }],\n        behaviours: derive$1([\n          ComposingConfigs.childAt(0),\n          config('sidebar-sliding-events', [\n            run$1(fixSize, function (comp, se) {\n              set$7(comp.element, 'width', se.event.width);\n            }),\n            run$1(autoSize, function (comp, _se) {\n              remove$6(comp.element, 'width');\n            })\n          ])\n        ])\n      };\n    };\n\n    var block = function (component, config, state, getBusySpec) {\n      set$8(component.element, 'aria-busy', true);\n      var root = config.getRoot(component).getOr(component);\n      var blockerBehaviours = derive$1([\n        Keying.config({\n          mode: 'special',\n          onTab: function () {\n            return Optional.some(true);\n          },\n          onShiftTab: function () {\n            return Optional.some(true);\n          }\n        }),\n        Focusing.config({})\n      ]);\n      var blockSpec = getBusySpec(root, blockerBehaviours);\n      var blocker = root.getSystem().build(blockSpec);\n      Replacing.append(root, premade(blocker));\n      if (blocker.hasConfigured(Keying) && config.focus) {\n        Keying.focusIn(blocker);\n      }\n      if (!state.isBlocked()) {\n        config.onBlock(component);\n      }\n      state.blockWith(function () {\n        return Replacing.remove(root, blocker);\n      });\n    };\n    var unblock = function (component, config, state) {\n      remove$7(component.element, 'aria-busy');\n      if (state.isBlocked()) {\n        config.onUnblock(component);\n      }\n      state.clear();\n    };\n\n    var BlockingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        block: block,\n        unblock: unblock\n    });\n\n    var BlockingSchema = [\n      defaultedFunction('getRoot', Optional.none),\n      defaultedBoolean('focus', true),\n      onHandler('onBlock'),\n      onHandler('onUnblock')\n    ];\n\n    var init$4 = function () {\n      var blocker = destroyable();\n      var blockWith = function (destroy) {\n        blocker.set({ destroy: destroy });\n      };\n      return nu$8({\n        readState: blocker.isSet,\n        blockWith: blockWith,\n        clear: blocker.clear,\n        isBlocked: blocker.isSet\n      });\n    };\n\n    var BlockingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$4\n    });\n\n    var Blocking = create$8({\n      fields: BlockingSchema,\n      name: 'blocking',\n      apis: BlockingApis,\n      state: BlockingState\n    });\n\n    var getBusySpec$1 = function (providerBackstage) {\n      return function (_root, _behaviours) {\n        return {\n          dom: {\n            tag: 'div',\n            attributes: {\n              'aria-label': providerBackstage.translate('Loading...'),\n              'tabindex': '0'\n            },\n            classes: ['tox-throbber__busy-spinner']\n          },\n          components: [{ dom: fromHtml('<div class=\"tox-spinner\"><div></div><div></div><div></div></div>') }]\n        };\n      };\n    };\n    var focusBusyComponent = function (throbber) {\n      return Composing.getCurrent(throbber).each(function (comp) {\n        return focus$3(comp.element);\n      });\n    };\n    var toggleEditorTabIndex = function (editor, state) {\n      var tabIndexAttr = 'tabindex';\n      var dataTabIndexAttr = 'data-mce-' + tabIndexAttr;\n      Optional.from(editor.iframeElement).map(SugarElement.fromDom).each(function (iframe) {\n        if (state) {\n          getOpt(iframe, tabIndexAttr).each(function (tabIndex) {\n            return set$8(iframe, dataTabIndexAttr, tabIndex);\n          });\n          set$8(iframe, tabIndexAttr, -1);\n        } else {\n          remove$7(iframe, tabIndexAttr);\n          getOpt(iframe, dataTabIndexAttr).each(function (tabIndex) {\n            set$8(iframe, tabIndexAttr, tabIndex);\n            remove$7(iframe, dataTabIndexAttr);\n          });\n        }\n      });\n    };\n    var toggleThrobber = function (editor, comp, state, providerBackstage) {\n      var element = comp.element;\n      toggleEditorTabIndex(editor, state);\n      if (state) {\n        Blocking.block(comp, getBusySpec$1(providerBackstage));\n        remove$6(element, 'display');\n        remove$7(element, 'aria-hidden');\n        if (editor.hasFocus()) {\n          focusBusyComponent(comp);\n        }\n      } else {\n        var throbberFocus = Composing.getCurrent(comp).exists(function (busyComp) {\n          return hasFocus(busyComp.element);\n        });\n        Blocking.unblock(comp);\n        set$7(element, 'display', 'none');\n        set$8(element, 'aria-hidden', 'true');\n        if (throbberFocus) {\n          editor.focus();\n        }\n      }\n    };\n    var renderThrobber = function (spec) {\n      return {\n        uid: spec.uid,\n        dom: {\n          tag: 'div',\n          attributes: { 'aria-hidden': 'true' },\n          classes: ['tox-throbber'],\n          styles: { display: 'none' }\n        },\n        behaviours: derive$1([\n          Replacing.config({}),\n          Blocking.config({ focus: false }),\n          Composing.config({\n            find: function (comp) {\n              return head(comp.components());\n            }\n          })\n        ]),\n        components: []\n      };\n    };\n    var isFocusEvent = function (event) {\n      return event.type === 'focusin';\n    };\n    var isPasteBinTarget = function (event) {\n      if (isFocusEvent(event)) {\n        var node = event.composed ? head(event.composedPath()) : Optional.from(event.target);\n        return node.map(SugarElement.fromDom).filter(isElement$2).exists(function (targetElm) {\n          return has(targetElm, 'mce-pastebin');\n        });\n      } else {\n        return false;\n      }\n    };\n    var setup$7 = function (editor, lazyThrobber, sharedBackstage) {\n      var throbberState = Cell(false);\n      var timer = value$1();\n      var stealFocus = function (e) {\n        if (throbberState.get() && !isPasteBinTarget(e)) {\n          e.preventDefault();\n          focusBusyComponent(lazyThrobber());\n          editor.editorManager.setActive(editor);\n        }\n      };\n      if (!editor.inline) {\n        editor.on('PreInit', function () {\n          editor.dom.bind(editor.getWin(), 'focusin', stealFocus);\n          editor.on('BeforeExecCommand', function (e) {\n            if (e.command.toLowerCase() === 'mcefocus' && e.value !== true) {\n              stealFocus(e);\n            }\n          });\n        });\n      }\n      var toggle = function (state) {\n        if (state !== throbberState.get()) {\n          throbberState.set(state);\n          toggleThrobber(editor, lazyThrobber(), state, sharedBackstage.providers);\n          editor.fire('AfterProgressState', { state: state });\n        }\n      };\n      editor.on('ProgressState', function (e) {\n        timer.on(global$f.clearTimeout);\n        if (isNumber(e.time)) {\n          var timerId = global$f.setEditorTimeout(editor, function () {\n            return toggle(e.state);\n          }, e.time);\n          timer.set(timerId);\n        } else {\n          toggle(e.state);\n          timer.clear();\n        }\n      });\n    };\n\n    var generate$1 = function (xs, f) {\n      var init = {\n        len: 0,\n        list: []\n      };\n      var r = foldl(xs, function (b, a) {\n        var value = f(a, b.len);\n        return value.fold(constant$1(b), function (v) {\n          return {\n            len: v.finish,\n            list: b.list.concat([v])\n          };\n        });\n      }, init);\n      return r.list;\n    };\n\n    var output = function (within, extra, withinWidth) {\n      return {\n        within: within,\n        extra: extra,\n        withinWidth: withinWidth\n      };\n    };\n    var apportion = function (units, total, len) {\n      var parray = generate$1(units, function (unit, current) {\n        var width = len(unit);\n        return Optional.some({\n          element: unit,\n          start: current,\n          finish: current + width,\n          width: width\n        });\n      });\n      var within = filter$2(parray, function (unit) {\n        return unit.finish <= total;\n      });\n      var withinWidth = foldr(within, function (acc, el) {\n        return acc + el.width;\n      }, 0);\n      var extra = parray.slice(within.length);\n      return {\n        within: within,\n        extra: extra,\n        withinWidth: withinWidth\n      };\n    };\n    var toUnit = function (parray) {\n      return map$2(parray, function (unit) {\n        return unit.element;\n      });\n    };\n    var fitLast = function (within, extra, withinWidth) {\n      var fits = toUnit(within.concat(extra));\n      return output(fits, [], withinWidth);\n    };\n    var overflow = function (within, extra, overflower, withinWidth) {\n      var fits = toUnit(within).concat([overflower]);\n      return output(fits, toUnit(extra), withinWidth);\n    };\n    var fitAll = function (within, extra, withinWidth) {\n      return output(toUnit(within), [], withinWidth);\n    };\n    var tryFit = function (total, units, len) {\n      var divide = apportion(units, total, len);\n      return divide.extra.length === 0 ? Optional.some(divide) : Optional.none();\n    };\n    var partition = function (total, units, len, overflower) {\n      var divide = tryFit(total, units, len).getOrThunk(function () {\n        return apportion(units, total - len(overflower), len);\n      });\n      var within = divide.within;\n      var extra = divide.extra;\n      var withinWidth = divide.withinWidth;\n      if (extra.length === 1 && extra[0].width <= len(overflower)) {\n        return fitLast(within, extra, withinWidth);\n      } else if (extra.length >= 1) {\n        return overflow(within, extra, overflower, withinWidth);\n      } else {\n        return fitAll(within, extra, withinWidth);\n      }\n    };\n\n    var setGroups$1 = function (toolbar, storedGroups) {\n      var bGroups = map$2(storedGroups, function (g) {\n        return premade(g);\n      });\n      Toolbar.setGroups(toolbar, bGroups);\n    };\n    var findFocusedComp = function (comps) {\n      return findMap(comps, function (comp) {\n        return search(comp.element).bind(function (focusedElm) {\n          return comp.getSystem().getByDom(focusedElm).toOptional();\n        });\n      });\n    };\n    var refresh$2 = function (toolbar, detail, setOverflow) {\n      var builtGroups = detail.builtGroups.get();\n      if (builtGroups.length === 0) {\n        return;\n      }\n      var primary = getPartOrDie(toolbar, detail, 'primary');\n      var overflowGroup = Coupling.getCoupled(toolbar, 'overflowGroup');\n      set$7(primary.element, 'visibility', 'hidden');\n      var groups = builtGroups.concat([overflowGroup]);\n      var focusedComp = findFocusedComp(groups);\n      setOverflow([]);\n      setGroups$1(primary, groups);\n      var availableWidth = get$a(primary.element);\n      var overflows = partition(availableWidth, detail.builtGroups.get(), function (comp) {\n        return get$a(comp.element);\n      }, overflowGroup);\n      if (overflows.extra.length === 0) {\n        Replacing.remove(primary, overflowGroup);\n        setOverflow([]);\n      } else {\n        setGroups$1(primary, overflows.within);\n        setOverflow(overflows.extra);\n      }\n      remove$6(primary.element, 'visibility');\n      reflow(primary.element);\n      focusedComp.each(Focusing.focus);\n    };\n\n    var schema$c = constant$1([\n      field('splitToolbarBehaviours', [Coupling]),\n      customField('builtGroups', function () {\n        return Cell([]);\n      })\n    ]);\n\n    var schema$b = constant$1([\n      markers$1(['overflowToggledClass']),\n      optionFunction('getOverflowBounds'),\n      required$1('lazySink'),\n      customField('overflowGroups', function () {\n        return Cell([]);\n      })\n    ].concat(schema$c()));\n    var parts$7 = constant$1([\n      required({\n        factory: Toolbar,\n        schema: schema$e(),\n        name: 'primary'\n      }),\n      external$1({\n        schema: schema$e(),\n        name: 'overflow'\n      }),\n      external$1({ name: 'overflow-button' }),\n      external$1({ name: 'overflow-group' })\n    ]);\n\n    var expandable = constant$1(function (element, available) {\n      setMax(element, Math.floor(available));\n    });\n\n    var schema$a = constant$1([\n      markers$1(['toggledClass']),\n      required$1('lazySink'),\n      requiredFunction('fetch'),\n      optionFunction('getBounds'),\n      optionObjOf('fireDismissalEventInstead', [defaulted('event', dismissRequested())]),\n      schema$y()\n    ]);\n    var parts$6 = constant$1([\n      external$1({\n        name: 'button',\n        overrides: function (detail) {\n          return {\n            dom: { attributes: { 'aria-haspopup': 'true' } },\n            buttonBehaviours: derive$1([Toggling.config({\n                toggleClass: detail.markers.toggledClass,\n                aria: { mode: 'expanded' },\n                toggleOnExecute: false\n              })])\n          };\n        }\n      }),\n      external$1({\n        factory: Toolbar,\n        schema: schema$e(),\n        name: 'toolbar',\n        overrides: function (detail) {\n          return {\n            toolbarBehaviours: derive$1([Keying.config({\n                mode: 'cyclic',\n                onEscape: function (comp) {\n                  getPart(comp, detail, 'button').each(Focusing.focus);\n                  return Optional.none();\n                }\n              })])\n          };\n        }\n      })\n    ]);\n\n    var toggle = function (button, externals) {\n      var toolbarSandbox = Coupling.getCoupled(button, 'toolbarSandbox');\n      if (Sandboxing.isOpen(toolbarSandbox)) {\n        Sandboxing.close(toolbarSandbox);\n      } else {\n        Sandboxing.open(toolbarSandbox, externals.toolbar());\n      }\n    };\n    var position = function (button, toolbar, detail, layouts) {\n      var bounds = detail.getBounds.map(function (bounder) {\n        return bounder();\n      });\n      var sink = detail.lazySink(button).getOrDie();\n      Positioning.positionWithinBounds(sink, toolbar, {\n        anchor: {\n          type: 'hotspot',\n          hotspot: button,\n          layouts: layouts,\n          overrides: { maxWidthFunction: expandable() }\n        }\n      }, bounds);\n    };\n    var setGroups = function (button, toolbar, detail, layouts, groups) {\n      Toolbar.setGroups(toolbar, groups);\n      position(button, toolbar, detail, layouts);\n      Toggling.on(button);\n    };\n    var makeSandbox = function (button, spec, detail) {\n      var ariaOwner = manager();\n      var onOpen = function (sandbox, toolbar) {\n        detail.fetch().get(function (groups) {\n          setGroups(button, toolbar, detail, spec.layouts, groups);\n          ariaOwner.link(button.element);\n          Keying.focusIn(toolbar);\n        });\n      };\n      var onClose = function () {\n        Toggling.off(button);\n        Focusing.focus(button);\n        ariaOwner.unlink(button.element);\n      };\n      return {\n        dom: {\n          tag: 'div',\n          attributes: { id: ariaOwner.id }\n        },\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'special',\n            onEscape: function (comp) {\n              Sandboxing.close(comp);\n              return Optional.some(true);\n            }\n          }),\n          Sandboxing.config({\n            onOpen: onOpen,\n            onClose: onClose,\n            isPartOf: function (container, data, queryElem) {\n              return isPartOf$1(data, queryElem) || isPartOf$1(button, queryElem);\n            },\n            getAttachPoint: function () {\n              return detail.lazySink(button).getOrDie();\n            }\n          }),\n          Receiving.config({\n            channels: __assign(__assign({}, receivingChannel$1(__assign({ isExtraPart: never }, detail.fireDismissalEventInstead.map(function (fe) {\n              return { fireEventInstead: { event: fe.event } };\n            }).getOr({})))), receivingChannel({\n              doReposition: function () {\n                Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox')).each(function (toolbar) {\n                  position(button, toolbar, detail, spec.layouts);\n                });\n              }\n            }))\n          })\n        ])\n      };\n    };\n    var factory$a = function (detail, components, spec, externals) {\n      return __assign(__assign({}, Button.sketch(__assign(__assign({}, externals.button()), {\n        action: function (button) {\n          toggle(button, externals);\n        },\n        buttonBehaviours: SketchBehaviours.augment({ dump: externals.button().buttonBehaviours }, [Coupling.config({\n            others: {\n              toolbarSandbox: function (button) {\n                return makeSandbox(button, spec, detail);\n              }\n            }\n          })])\n      }))), {\n        apis: {\n          setGroups: function (button, groups) {\n            Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox')).each(function (toolbar) {\n              setGroups(button, toolbar, detail, spec.layouts, groups);\n            });\n          },\n          reposition: function (button) {\n            Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox')).each(function (toolbar) {\n              position(button, toolbar, detail, spec.layouts);\n            });\n          },\n          toggle: function (button) {\n            toggle(button, externals);\n          },\n          getToolbar: function (button) {\n            return Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox'));\n          },\n          isOpen: function (button) {\n            return Sandboxing.isOpen(Coupling.getCoupled(button, 'toolbarSandbox'));\n          }\n        }\n      });\n    };\n    var FloatingToolbarButton = composite({\n      name: 'FloatingToolbarButton',\n      factory: factory$a,\n      configFields: schema$a(),\n      partFields: parts$6(),\n      apis: {\n        setGroups: function (apis, button, groups) {\n          apis.setGroups(button, groups);\n        },\n        reposition: function (apis, button) {\n          apis.reposition(button);\n        },\n        toggle: function (apis, button) {\n          apis.toggle(button);\n        },\n        getToolbar: function (apis, button) {\n          return apis.getToolbar(button);\n        },\n        isOpen: function (apis, button) {\n          return apis.isOpen(button);\n        }\n      }\n    });\n\n    var schema$9 = constant$1([\n      required$1('items'),\n      markers$1(['itemSelector']),\n      field('tgroupBehaviours', [Keying])\n    ]);\n    var parts$5 = constant$1([group({\n        name: 'items',\n        unit: 'item'\n      })]);\n\n    var factory$9 = function (detail, components, _spec, _externals) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.tgroupBehaviours, [Keying.config({\n            mode: 'flow',\n            selector: detail.markers.itemSelector\n          })]),\n        domModification: { attributes: { role: 'toolbar' } }\n      };\n    };\n    var ToolbarGroup = composite({\n      name: 'ToolbarGroup',\n      configFields: schema$9(),\n      partFields: parts$5(),\n      factory: factory$9\n    });\n\n    var buildGroups = function (comps) {\n      return map$2(comps, function (g) {\n        return premade(g);\n      });\n    };\n    var refresh$1 = function (toolbar, memFloatingToolbarButton, detail) {\n      refresh$2(toolbar, detail, function (overflowGroups) {\n        detail.overflowGroups.set(overflowGroups);\n        memFloatingToolbarButton.getOpt(toolbar).each(function (floatingToolbarButton) {\n          FloatingToolbarButton.setGroups(floatingToolbarButton, buildGroups(overflowGroups));\n        });\n      });\n    };\n    var factory$8 = function (detail, components, spec, externals) {\n      var memFloatingToolbarButton = record(FloatingToolbarButton.sketch({\n        fetch: function () {\n          return Future.nu(function (resolve) {\n            resolve(buildGroups(detail.overflowGroups.get()));\n          });\n        },\n        layouts: {\n          onLtr: function () {\n            return [\n              southwest$2,\n              southeast$2\n            ];\n          },\n          onRtl: function () {\n            return [\n              southeast$2,\n              southwest$2\n            ];\n          },\n          onBottomLtr: function () {\n            return [\n              northwest$2,\n              northeast$2\n            ];\n          },\n          onBottomRtl: function () {\n            return [\n              northeast$2,\n              northwest$2\n            ];\n          }\n        },\n        getBounds: spec.getOverflowBounds,\n        lazySink: detail.lazySink,\n        fireDismissalEventInstead: {},\n        markers: { toggledClass: detail.markers.overflowToggledClass },\n        parts: {\n          button: externals['overflow-button'](),\n          toolbar: externals.overflow()\n        }\n      }));\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.splitToolbarBehaviours, [Coupling.config({\n            others: {\n              overflowGroup: function () {\n                return ToolbarGroup.sketch(__assign(__assign({}, externals['overflow-group']()), { items: [memFloatingToolbarButton.asSpec()] }));\n              }\n            }\n          })]),\n        apis: {\n          setGroups: function (toolbar, groups) {\n            detail.builtGroups.set(map$2(groups, toolbar.getSystem().build));\n            refresh$1(toolbar, memFloatingToolbarButton, detail);\n          },\n          refresh: function (toolbar) {\n            return refresh$1(toolbar, memFloatingToolbarButton, detail);\n          },\n          toggle: function (toolbar) {\n            memFloatingToolbarButton.getOpt(toolbar).each(function (floatingToolbarButton) {\n              FloatingToolbarButton.toggle(floatingToolbarButton);\n            });\n          },\n          isOpen: function (toolbar) {\n            return memFloatingToolbarButton.getOpt(toolbar).map(FloatingToolbarButton.isOpen).getOr(false);\n          },\n          reposition: function (toolbar) {\n            memFloatingToolbarButton.getOpt(toolbar).each(function (floatingToolbarButton) {\n              FloatingToolbarButton.reposition(floatingToolbarButton);\n            });\n          },\n          getOverflow: function (toolbar) {\n            return memFloatingToolbarButton.getOpt(toolbar).bind(FloatingToolbarButton.getToolbar);\n          }\n        },\n        domModification: { attributes: { role: 'group' } }\n      };\n    };\n    var SplitFloatingToolbar = composite({\n      name: 'SplitFloatingToolbar',\n      configFields: schema$b(),\n      partFields: parts$7(),\n      factory: factory$8,\n      apis: {\n        setGroups: function (apis, toolbar, groups) {\n          apis.setGroups(toolbar, groups);\n        },\n        refresh: function (apis, toolbar) {\n          apis.refresh(toolbar);\n        },\n        reposition: function (apis, toolbar) {\n          apis.reposition(toolbar);\n        },\n        toggle: function (apis, toolbar) {\n          apis.toggle(toolbar);\n        },\n        isOpen: function (apis, toolbar) {\n          return apis.isOpen(toolbar);\n        },\n        getOverflow: function (apis, toolbar) {\n          return apis.getOverflow(toolbar);\n        }\n      }\n    });\n\n    var schema$8 = constant$1([\n      markers$1([\n        'closedClass',\n        'openClass',\n        'shrinkingClass',\n        'growingClass',\n        'overflowToggledClass'\n      ]),\n      onHandler('onOpened'),\n      onHandler('onClosed')\n    ].concat(schema$c()));\n    var parts$4 = constant$1([\n      required({\n        factory: Toolbar,\n        schema: schema$e(),\n        name: 'primary'\n      }),\n      required({\n        factory: Toolbar,\n        schema: schema$e(),\n        name: 'overflow',\n        overrides: function (detail) {\n          return {\n            toolbarBehaviours: derive$1([\n              Sliding.config({\n                dimension: { property: 'height' },\n                closedClass: detail.markers.closedClass,\n                openClass: detail.markers.openClass,\n                shrinkingClass: detail.markers.shrinkingClass,\n                growingClass: detail.markers.growingClass,\n                onShrunk: function (comp) {\n                  getPart(comp, detail, 'overflow-button').each(function (button) {\n                    Toggling.off(button);\n                    Focusing.focus(button);\n                  });\n                  detail.onClosed(comp);\n                },\n                onGrown: function (comp) {\n                  Keying.focusIn(comp);\n                  detail.onOpened(comp);\n                },\n                onStartGrow: function (comp) {\n                  getPart(comp, detail, 'overflow-button').each(Toggling.on);\n                }\n              }),\n              Keying.config({\n                mode: 'acyclic',\n                onEscape: function (comp) {\n                  getPart(comp, detail, 'overflow-button').each(Focusing.focus);\n                  return Optional.some(true);\n                }\n              })\n            ])\n          };\n        }\n      }),\n      external$1({\n        name: 'overflow-button',\n        overrides: function (detail) {\n          return {\n            buttonBehaviours: derive$1([Toggling.config({\n                toggleClass: detail.markers.overflowToggledClass,\n                aria: { mode: 'pressed' },\n                toggleOnExecute: false\n              })])\n          };\n        }\n      }),\n      external$1({ name: 'overflow-group' })\n    ]);\n\n    var isOpen = function (toolbar, detail) {\n      return getPart(toolbar, detail, 'overflow').map(Sliding.hasGrown).getOr(false);\n    };\n    var toggleToolbar = function (toolbar, detail) {\n      getPart(toolbar, detail, 'overflow-button').bind(function () {\n        return getPart(toolbar, detail, 'overflow');\n      }).each(function (overf) {\n        refresh(toolbar, detail);\n        Sliding.toggleGrow(overf);\n      });\n    };\n    var refresh = function (toolbar, detail) {\n      getPart(toolbar, detail, 'overflow').each(function (overflow) {\n        refresh$2(toolbar, detail, function (groups) {\n          var builtGroups = map$2(groups, function (g) {\n            return premade(g);\n          });\n          Toolbar.setGroups(overflow, builtGroups);\n        });\n        getPart(toolbar, detail, 'overflow-button').each(function (button) {\n          if (Sliding.hasGrown(overflow)) {\n            Toggling.on(button);\n          }\n        });\n        Sliding.refresh(overflow);\n      });\n    };\n    var factory$7 = function (detail, components, spec, externals) {\n      var toolbarToggleEvent = 'alloy.toolbar.toggle';\n      var doSetGroups = function (toolbar, groups) {\n        var built = map$2(groups, toolbar.getSystem().build);\n        detail.builtGroups.set(built);\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.splitToolbarBehaviours, [\n          Coupling.config({\n            others: {\n              overflowGroup: function (toolbar) {\n                return ToolbarGroup.sketch(__assign(__assign({}, externals['overflow-group']()), {\n                  items: [Button.sketch(__assign(__assign({}, externals['overflow-button']()), {\n                      action: function (_button) {\n                        emit(toolbar, toolbarToggleEvent);\n                      }\n                    }))]\n                }));\n              }\n            }\n          }),\n          config('toolbar-toggle-events', [run$1(toolbarToggleEvent, function (toolbar) {\n              toggleToolbar(toolbar, detail);\n            })])\n        ]),\n        apis: {\n          setGroups: function (toolbar, groups) {\n            doSetGroups(toolbar, groups);\n            refresh(toolbar, detail);\n          },\n          refresh: function (toolbar) {\n            return refresh(toolbar, detail);\n          },\n          toggle: function (toolbar) {\n            return toggleToolbar(toolbar, detail);\n          },\n          isOpen: function (toolbar) {\n            return isOpen(toolbar, detail);\n          }\n        },\n        domModification: { attributes: { role: 'group' } }\n      };\n    };\n    var SplitSlidingToolbar = composite({\n      name: 'SplitSlidingToolbar',\n      configFields: schema$8(),\n      partFields: parts$4(),\n      factory: factory$7,\n      apis: {\n        setGroups: function (apis, toolbar, groups) {\n          apis.setGroups(toolbar, groups);\n        },\n        refresh: function (apis, toolbar) {\n          apis.refresh(toolbar);\n        },\n        toggle: function (apis, toolbar) {\n          apis.toggle(toolbar);\n        },\n        isOpen: function (apis, toolbar) {\n          return apis.isOpen(toolbar);\n        }\n      }\n    });\n\n    var renderToolbarGroupCommon = function (toolbarGroup) {\n      var attributes = toolbarGroup.title.fold(function () {\n        return {};\n      }, function (title) {\n        return { attributes: { title: title } };\n      });\n      return {\n        dom: __assign({\n          tag: 'div',\n          classes: ['tox-toolbar__group']\n        }, attributes),\n        components: [ToolbarGroup.parts.items({})],\n        items: toolbarGroup.items,\n        markers: { itemSelector: '*:not(.tox-split-button) > .tox-tbtn:not([disabled]), ' + '.tox-split-button:not([disabled]), ' + '.tox-toolbar-nav-js:not([disabled])' },\n        tgroupBehaviours: derive$1([\n          Tabstopping.config({}),\n          Focusing.config({})\n        ])\n      };\n    };\n    var renderToolbarGroup = function (toolbarGroup) {\n      return ToolbarGroup.sketch(renderToolbarGroupCommon(toolbarGroup));\n    };\n    var getToolbarbehaviours = function (toolbarSpec, modeName) {\n      var onAttached = runOnAttached(function (component) {\n        var groups = map$2(toolbarSpec.initGroups, renderToolbarGroup);\n        Toolbar.setGroups(component, groups);\n      });\n      return derive$1([\n        DisablingConfigs.toolbarButton(toolbarSpec.providers.isDisabled),\n        receivingConfig(),\n        Keying.config({\n          mode: modeName,\n          onEscape: toolbarSpec.onEscape,\n          selector: '.tox-toolbar__group'\n        }),\n        config('toolbar-events', [onAttached])\n      ]);\n    };\n    var renderMoreToolbarCommon = function (toolbarSpec) {\n      var modeName = toolbarSpec.cyclicKeying ? 'cyclic' : 'acyclic';\n      return {\n        uid: toolbarSpec.uid,\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar-overlord']\n        },\n        parts: {\n          'overflow-group': renderToolbarGroupCommon({\n            title: Optional.none(),\n            items: []\n          }),\n          'overflow-button': renderIconButtonSpec({\n            name: 'more',\n            icon: Optional.some('more-drawer'),\n            disabled: false,\n            tooltip: Optional.some('More...'),\n            primary: false,\n            borderless: false\n          }, Optional.none(), toolbarSpec.providers)\n        },\n        splitToolbarBehaviours: getToolbarbehaviours(toolbarSpec, modeName)\n      };\n    };\n    var renderFloatingMoreToolbar = function (toolbarSpec) {\n      var baseSpec = renderMoreToolbarCommon(toolbarSpec);\n      var overflowXOffset = 4;\n      var primary = SplitFloatingToolbar.parts.primary({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar__primary']\n        }\n      });\n      return SplitFloatingToolbar.sketch(__assign(__assign({}, baseSpec), {\n        lazySink: toolbarSpec.getSink,\n        getOverflowBounds: function () {\n          var headerElem = toolbarSpec.moreDrawerData.lazyHeader().element;\n          var headerBounds = absolute$2(headerElem);\n          var docElem = documentElement(headerElem);\n          var docBounds = absolute$2(docElem);\n          var height = Math.max(docElem.dom.scrollHeight, docBounds.height);\n          return bounds(headerBounds.x + overflowXOffset, docBounds.y, headerBounds.width - overflowXOffset * 2, height);\n        },\n        parts: __assign(__assign({}, baseSpec.parts), {\n          overflow: {\n            dom: {\n              tag: 'div',\n              classes: ['tox-toolbar__overflow'],\n              attributes: toolbarSpec.attributes\n            }\n          }\n        }),\n        components: [primary],\n        markers: { overflowToggledClass: 'tox-tbtn--enabled' }\n      }));\n    };\n    var renderSlidingMoreToolbar = function (toolbarSpec) {\n      var primary = SplitSlidingToolbar.parts.primary({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar__primary']\n        }\n      });\n      var overflow = SplitSlidingToolbar.parts.overflow({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar__overflow']\n        }\n      });\n      var baseSpec = renderMoreToolbarCommon(toolbarSpec);\n      return SplitSlidingToolbar.sketch(__assign(__assign({}, baseSpec), {\n        components: [\n          primary,\n          overflow\n        ],\n        markers: {\n          openClass: 'tox-toolbar__overflow--open',\n          closedClass: 'tox-toolbar__overflow--closed',\n          growingClass: 'tox-toolbar__overflow--growing',\n          shrinkingClass: 'tox-toolbar__overflow--shrinking',\n          overflowToggledClass: 'tox-tbtn--enabled'\n        },\n        onOpened: function (comp) {\n          comp.getSystem().broadcastOn([toolbarHeightChange()], { type: 'opened' });\n        },\n        onClosed: function (comp) {\n          comp.getSystem().broadcastOn([toolbarHeightChange()], { type: 'closed' });\n        }\n      }));\n    };\n    var renderToolbar = function (toolbarSpec) {\n      var modeName = toolbarSpec.cyclicKeying ? 'cyclic' : 'acyclic';\n      return Toolbar.sketch({\n        uid: toolbarSpec.uid,\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar'].concat(toolbarSpec.type === ToolbarMode.scrolling ? ['tox-toolbar--scrolling'] : [])\n        },\n        components: [Toolbar.parts.groups({})],\n        toolbarBehaviours: getToolbarbehaviours(toolbarSpec, modeName)\n      });\n    };\n\n    var factory$6 = function (detail, components, _spec) {\n      var apis = {\n        getSocket: function (comp) {\n          return parts$a.getPart(comp, detail, 'socket');\n        },\n        setSidebar: function (comp, panelConfigs) {\n          parts$a.getPart(comp, detail, 'sidebar').each(function (sidebar) {\n            return setSidebar(sidebar, panelConfigs);\n          });\n        },\n        toggleSidebar: function (comp, name) {\n          parts$a.getPart(comp, detail, 'sidebar').each(function (sidebar) {\n            return toggleSidebar(sidebar, name);\n          });\n        },\n        whichSidebar: function (comp) {\n          return parts$a.getPart(comp, detail, 'sidebar').bind(whichSidebar).getOrNull();\n        },\n        getHeader: function (comp) {\n          return parts$a.getPart(comp, detail, 'header');\n        },\n        getToolbar: function (comp) {\n          return parts$a.getPart(comp, detail, 'toolbar');\n        },\n        setToolbar: function (comp, groups) {\n          parts$a.getPart(comp, detail, 'toolbar').each(function (toolbar) {\n            toolbar.getApis().setGroups(toolbar, groups);\n          });\n        },\n        setToolbars: function (comp, toolbars) {\n          parts$a.getPart(comp, detail, 'multiple-toolbar').each(function (mToolbar) {\n            CustomList.setItems(mToolbar, toolbars);\n          });\n        },\n        refreshToolbar: function (comp) {\n          var toolbar = parts$a.getPart(comp, detail, 'toolbar');\n          toolbar.each(function (toolbar) {\n            return toolbar.getApis().refresh(toolbar);\n          });\n        },\n        toggleToolbarDrawer: function (comp) {\n          parts$a.getPart(comp, detail, 'toolbar').each(function (toolbar) {\n            mapFrom(toolbar.getApis().toggle, function (toggle) {\n              return toggle(toolbar);\n            });\n          });\n        },\n        isToolbarDrawerToggled: function (comp) {\n          return parts$a.getPart(comp, detail, 'toolbar').bind(function (toolbar) {\n            return Optional.from(toolbar.getApis().isOpen).map(function (isOpen) {\n              return isOpen(toolbar);\n            });\n          }).getOr(false);\n        },\n        getThrobber: function (comp) {\n          return parts$a.getPart(comp, detail, 'throbber');\n        },\n        focusToolbar: function (comp) {\n          var optToolbar = parts$a.getPart(comp, detail, 'toolbar').orThunk(function () {\n            return parts$a.getPart(comp, detail, 'multiple-toolbar');\n          });\n          optToolbar.each(function (toolbar) {\n            Keying.focusIn(toolbar);\n          });\n        },\n        setMenubar: function (comp, menus) {\n          parts$a.getPart(comp, detail, 'menubar').each(function (menubar) {\n            SilverMenubar.setMenus(menubar, menus);\n          });\n        },\n        focusMenubar: function (comp) {\n          parts$a.getPart(comp, detail, 'menubar').each(function (menubar) {\n            SilverMenubar.focus(menubar);\n          });\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        apis: apis,\n        behaviours: detail.behaviours\n      };\n    };\n    var partMenubar = partType.optional({\n      factory: SilverMenubar,\n      name: 'menubar',\n      schema: [required$1('backstage')]\n    });\n    var toolbarFactory = function (spec) {\n      if (spec.type === ToolbarMode.sliding) {\n        return renderSlidingMoreToolbar;\n      } else if (spec.type === ToolbarMode.floating) {\n        return renderFloatingMoreToolbar;\n      } else {\n        return renderToolbar;\n      }\n    };\n    var partMultipleToolbar = partType.optional({\n      factory: {\n        sketch: function (spec) {\n          return CustomList.sketch({\n            uid: spec.uid,\n            dom: spec.dom,\n            listBehaviours: derive$1([Keying.config({\n                mode: 'acyclic',\n                selector: '.tox-toolbar'\n              })]),\n            makeItem: function () {\n              return renderToolbar({\n                type: spec.type,\n                uid: generate$6('multiple-toolbar-item'),\n                cyclicKeying: false,\n                initGroups: [],\n                providers: spec.providers,\n                onEscape: function () {\n                  spec.onEscape();\n                  return Optional.some(true);\n                }\n              });\n            },\n            setupItem: function (_mToolbar, tc, data, _index) {\n              Toolbar.setGroups(tc, data);\n            },\n            shell: true\n          });\n        }\n      },\n      name: 'multiple-toolbar',\n      schema: [\n        required$1('dom'),\n        required$1('onEscape')\n      ]\n    });\n    var partToolbar = partType.optional({\n      factory: {\n        sketch: function (spec) {\n          var renderer = toolbarFactory(spec);\n          var toolbarSpec = {\n            type: spec.type,\n            uid: spec.uid,\n            onEscape: function () {\n              spec.onEscape();\n              return Optional.some(true);\n            },\n            cyclicKeying: false,\n            initGroups: [],\n            getSink: spec.getSink,\n            providers: spec.providers,\n            moreDrawerData: {\n              lazyToolbar: spec.lazyToolbar,\n              lazyMoreButton: spec.lazyMoreButton,\n              lazyHeader: spec.lazyHeader\n            },\n            attributes: spec.attributes\n          };\n          return renderer(toolbarSpec);\n        }\n      },\n      name: 'toolbar',\n      schema: [\n        required$1('dom'),\n        required$1('onEscape'),\n        required$1('getSink')\n      ]\n    });\n    var partHeader = partType.optional({\n      factory: { sketch: renderHeader },\n      name: 'header',\n      schema: [required$1('dom')]\n    });\n    var partSocket = partType.optional({\n      name: 'socket',\n      schema: [required$1('dom')]\n    });\n    var partSidebar = partType.optional({\n      factory: { sketch: renderSidebar },\n      name: 'sidebar',\n      schema: [required$1('dom')]\n    });\n    var partThrobber = partType.optional({\n      factory: { sketch: renderThrobber },\n      name: 'throbber',\n      schema: [required$1('dom')]\n    });\n    var OuterContainer = composite({\n      name: 'OuterContainer',\n      factory: factory$6,\n      configFields: [\n        required$1('dom'),\n        required$1('behaviours')\n      ],\n      partFields: [\n        partHeader,\n        partMenubar,\n        partToolbar,\n        partMultipleToolbar,\n        partSocket,\n        partSidebar,\n        partThrobber\n      ],\n      apis: {\n        getSocket: function (apis, comp) {\n          return apis.getSocket(comp);\n        },\n        setSidebar: function (apis, comp, panelConfigs) {\n          apis.setSidebar(comp, panelConfigs);\n        },\n        toggleSidebar: function (apis, comp, name) {\n          apis.toggleSidebar(comp, name);\n        },\n        whichSidebar: function (apis, comp) {\n          return apis.whichSidebar(comp);\n        },\n        getHeader: function (apis, comp) {\n          return apis.getHeader(comp);\n        },\n        getToolbar: function (apis, comp) {\n          return apis.getToolbar(comp);\n        },\n        setToolbar: function (apis, comp, grps) {\n          var groups = map$2(grps, function (grp) {\n            return renderToolbarGroup(grp);\n          });\n          apis.setToolbar(comp, groups);\n        },\n        setToolbars: function (apis, comp, ts) {\n          var renderedToolbars = map$2(ts, function (g) {\n            return map$2(g, renderToolbarGroup);\n          });\n          apis.setToolbars(comp, renderedToolbars);\n        },\n        refreshToolbar: function (apis, comp) {\n          return apis.refreshToolbar(comp);\n        },\n        toggleToolbarDrawer: function (apis, comp) {\n          apis.toggleToolbarDrawer(comp);\n        },\n        isToolbarDrawerToggled: function (apis, comp) {\n          return apis.isToolbarDrawerToggled(comp);\n        },\n        getThrobber: function (apis, comp) {\n          return apis.getThrobber(comp);\n        },\n        setMenubar: function (apis, comp, menus) {\n          apis.setMenubar(comp, menus);\n        },\n        focusMenubar: function (apis, comp) {\n          apis.focusMenubar(comp);\n        },\n        focusToolbar: function (apis, comp) {\n          apis.focusToolbar(comp);\n        }\n      }\n    });\n\n    var defaultMenubar = 'file edit view insert format tools table help';\n    var defaultMenus = {\n      file: {\n        title: 'File',\n        items: 'newdocument restoredraft | preview | export print | deleteallconversations'\n      },\n      edit: {\n        title: 'Edit',\n        items: 'undo redo | cut copy paste pastetext | selectall | searchreplace'\n      },\n      view: {\n        title: 'View',\n        items: 'code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments'\n      },\n      insert: {\n        title: 'Insert',\n        items: 'image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime'\n      },\n      format: {\n        title: 'Format',\n        items: 'bold italic underline strikethrough superscript subscript codeformat | formats blockformats fontformats fontsizes align lineheight | forecolor backcolor | language | removeformat'\n      },\n      tools: {\n        title: 'Tools',\n        items: 'spellchecker spellcheckerlanguage | a11ycheck code wordcount'\n      },\n      table: {\n        title: 'Table',\n        items: 'inserttable | cell row column | advtablesort | tableprops deletetable'\n      },\n      help: {\n        title: 'Help',\n        items: 'help'\n      }\n    };\n    var make = function (menu, registry, editor) {\n      var removedMenuItems = getRemovedMenuItems(editor).split(/[ ,]/);\n      return {\n        text: menu.title,\n        getItems: function () {\n          return bind$3(menu.items, function (i) {\n            var itemName = i.toLowerCase();\n            if (itemName.trim().length === 0) {\n              return [];\n            } else if (exists(removedMenuItems, function (removedMenuItem) {\n                return removedMenuItem === itemName;\n              })) {\n              return [];\n            } else if (itemName === 'separator' || itemName === '|') {\n              return [{ type: 'separator' }];\n            } else if (registry.menuItems[itemName]) {\n              return [registry.menuItems[itemName]];\n            } else {\n              return [];\n            }\n          });\n        }\n      };\n    };\n    var parseItemsString = function (items) {\n      if (typeof items === 'string') {\n        return items.split(' ');\n      }\n      return items;\n    };\n    var identifyMenus = function (editor, registry) {\n      var rawMenuData = __assign(__assign({}, defaultMenus), registry.menus);\n      var userDefinedMenus = keys(registry.menus).length > 0;\n      var menubar = registry.menubar === undefined || registry.menubar === true ? parseItemsString(defaultMenubar) : parseItemsString(registry.menubar === false ? '' : registry.menubar);\n      var validMenus = filter$2(menubar, function (menuName) {\n        var isDefaultMenu = has$2(defaultMenus, menuName);\n        if (userDefinedMenus) {\n          return isDefaultMenu || get$e(registry.menus, menuName).exists(function (menu) {\n            return has$2(menu, 'items');\n          });\n        } else {\n          return isDefaultMenu;\n        }\n      });\n      var menus = map$2(validMenus, function (menuName) {\n        var menuData = rawMenuData[menuName];\n        return make({\n          title: menuData.title,\n          items: parseItemsString(menuData.items)\n        }, registry, editor);\n      });\n      return filter$2(menus, function (menu) {\n        var isNotSeparator = function (item) {\n          return item.type !== 'separator';\n        };\n        return menu.getItems().length > 0 && exists(menu.getItems(), isNotSeparator);\n      });\n    };\n\n    var fireSkinLoaded = function (editor) {\n      var done = function () {\n        editor._skinLoaded = true;\n        fireSkinLoaded$1(editor);\n      };\n      return function () {\n        if (editor.initialized) {\n          done();\n        } else {\n          editor.on('init', done);\n        }\n      };\n    };\n    var fireSkinLoadError = function (editor, err) {\n      return function () {\n        return fireSkinLoadError$1(editor, { message: err });\n      };\n    };\n\n    var loadStylesheet = function (editor, stylesheetUrl, styleSheetLoader) {\n      return new global$c(function (resolve, reject) {\n        styleSheetLoader.load(stylesheetUrl, resolve, reject);\n        editor.on('remove', function () {\n          return styleSheetLoader.unload(stylesheetUrl);\n        });\n      });\n    };\n    var loadUiSkins = function (editor, skinUrl) {\n      var skinUiCss = skinUrl + '/skin.min.css';\n      return loadStylesheet(editor, skinUiCss, editor.ui.styleSheetLoader);\n    };\n    var loadShadowDomUiSkins = function (editor, skinUrl) {\n      var isInShadowRoot$1 = isInShadowRoot(SugarElement.fromDom(editor.getElement()));\n      if (isInShadowRoot$1) {\n        var shadowDomSkinCss = skinUrl + '/skin.shadowdom.min.css';\n        return loadStylesheet(editor, shadowDomSkinCss, global$b.DOM.styleSheetLoader);\n      } else {\n        return global$c.resolve();\n      }\n    };\n    var loadSkin = function (isInline, editor) {\n      var skinUrl = getSkinUrl(editor);\n      if (skinUrl) {\n        editor.contentCSS.push(skinUrl + (isInline ? '/content.inline' : '/content') + '.min.css');\n      }\n      if (isSkinDisabled(editor) === false && isString(skinUrl)) {\n        global$c.all([\n          loadUiSkins(editor, skinUrl),\n          loadShadowDomUiSkins(editor, skinUrl)\n        ]).then(fireSkinLoaded(editor), fireSkinLoadError(editor, 'Skin could not be loaded'));\n      } else {\n        fireSkinLoaded(editor)();\n      }\n    };\n    var iframe = curry(loadSkin, false);\n    var inline = curry(loadSkin, true);\n\n    var onSetupFormatToggle = function (editor, name) {\n      return function (api) {\n        var boundCallback = unbindable();\n        var init = function () {\n          api.setActive(editor.formatter.match(name));\n          var binding = editor.formatter.formatChanged(name, api.setActive);\n          boundCallback.set(binding);\n        };\n        editor.initialized ? init() : editor.once('init', init);\n        return function () {\n          editor.off('init', init);\n          boundCallback.clear();\n        };\n      };\n    };\n    var onSetupEvent = function (editor, event, f) {\n      return function (api) {\n        var handleEvent = function () {\n          return f(api);\n        };\n        var init = function () {\n          f(api);\n          editor.on(event, handleEvent);\n        };\n        editor.initialized ? init() : editor.once('init', init);\n        return function () {\n          editor.off('init', init);\n          editor.off(event, handleEvent);\n        };\n      };\n    };\n    var onActionToggleFormat$1 = function (editor) {\n      return function (rawItem) {\n        return function () {\n          editor.undoManager.transact(function () {\n            editor.focus();\n            editor.execCommand('mceToggleFormat', false, rawItem.format);\n          });\n        };\n      };\n    };\n    var onActionExecCommand = function (editor, command) {\n      return function () {\n        return editor.execCommand(command);\n      };\n    };\n\n    var generateSelectItems = function (_editor, backstage, spec) {\n      var generateItem = function (rawItem, response, disabled, value) {\n        var translatedText = backstage.shared.providers.translate(rawItem.title);\n        if (rawItem.type === 'separator') {\n          return Optional.some({\n            type: 'separator',\n            text: translatedText\n          });\n        } else if (rawItem.type === 'submenu') {\n          var items = bind$3(rawItem.getStyleItems(), function (si) {\n            return validate(si, response, value);\n          });\n          if (response === 0 && items.length <= 0) {\n            return Optional.none();\n          } else {\n            return Optional.some({\n              type: 'nestedmenuitem',\n              text: translatedText,\n              disabled: items.length <= 0,\n              getSubmenuItems: function () {\n                return bind$3(rawItem.getStyleItems(), function (si) {\n                  return validate(si, response, value);\n                });\n              }\n            });\n          }\n        } else {\n          return Optional.some(__assign({\n            type: 'togglemenuitem',\n            text: translatedText,\n            icon: rawItem.icon,\n            active: rawItem.isSelected(value),\n            disabled: disabled,\n            onAction: spec.onAction(rawItem)\n          }, rawItem.getStylePreview().fold(function () {\n            return {};\n          }, function (preview) {\n            return { meta: { style: preview } };\n          })));\n        }\n      };\n      var validate = function (item, response, value) {\n        var invalid = item.type === 'formatter' && spec.isInvalid(item);\n        if (response === 0) {\n          return invalid ? [] : generateItem(item, response, false, value).toArray();\n        } else {\n          return generateItem(item, response, invalid, value).toArray();\n        }\n      };\n      var validateItems = function (preItems) {\n        var value = spec.getCurrentValue();\n        var response = spec.shouldHide ? 0 : 1;\n        return bind$3(preItems, function (item) {\n          return validate(item, response, value);\n        });\n      };\n      var getFetch = function (backstage, getStyleItems) {\n        return function (comp, callback) {\n          var preItems = getStyleItems();\n          var items = validateItems(preItems);\n          var menu = build(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, false);\n          callback(menu);\n        };\n      };\n      return {\n        validateItems: validateItems,\n        getFetch: getFetch\n      };\n    };\n    var createMenuItems = function (editor, backstage, spec) {\n      var dataset = spec.dataset;\n      var getStyleItems = dataset.type === 'basic' ? function () {\n        return map$2(dataset.data, function (d) {\n          return processBasic(d, spec.isSelectedFor, spec.getPreviewFor);\n        });\n      } : dataset.getData;\n      return {\n        items: generateSelectItems(editor, backstage, spec),\n        getStyleItems: getStyleItems\n      };\n    };\n    var createSelectButton = function (editor, backstage, spec) {\n      var _a = createMenuItems(editor, backstage, spec), items = _a.items, getStyleItems = _a.getStyleItems;\n      var getApi = function (comp) {\n        return { getComponent: constant$1(comp) };\n      };\n      var onSetup = onSetupEvent(editor, 'NodeChange', function (api) {\n        var comp = api.getComponent();\n        spec.updateText(comp);\n      });\n      return renderCommonDropdown({\n        text: spec.icon.isSome() ? Optional.none() : spec.text,\n        icon: spec.icon,\n        tooltip: Optional.from(spec.tooltip),\n        role: Optional.none(),\n        fetch: items.getFetch(backstage, getStyleItems),\n        onSetup: onSetup,\n        getApi: getApi,\n        columns: 1,\n        presets: 'normal',\n        classes: spec.icon.isSome() ? [] : ['bespoke'],\n        dropdownBehaviours: []\n      }, 'tox-tbtn', backstage.shared);\n    };\n\n    var process = function (rawFormats) {\n      return map$2(rawFormats, function (item) {\n        var title = item, format = item;\n        var values = item.split('=');\n        if (values.length > 1) {\n          title = values[0];\n          format = values[1];\n        }\n        return {\n          title: title,\n          format: format\n        };\n      });\n    };\n    var buildBasicStaticDataset = function (data) {\n      return {\n        type: 'basic',\n        data: data\n      };\n    };\n    var Delimiter;\n    (function (Delimiter) {\n      Delimiter[Delimiter['SemiColon'] = 0] = 'SemiColon';\n      Delimiter[Delimiter['Space'] = 1] = 'Space';\n    }(Delimiter || (Delimiter = {})));\n    var split = function (rawFormats, delimiter) {\n      if (delimiter === Delimiter.SemiColon) {\n        return rawFormats.replace(/;$/, '').split(';');\n      } else {\n        return rawFormats.split(' ');\n      }\n    };\n    var buildBasicSettingsDataset = function (editor, settingName, defaults, delimiter) {\n      var rawFormats = editor.getParam(settingName, defaults, 'string');\n      var data = process(split(rawFormats, delimiter));\n      return {\n        type: 'basic',\n        data: data\n      };\n    };\n\n    var alignMenuItems = [\n      {\n        title: 'Left',\n        icon: 'align-left',\n        format: 'alignleft',\n        command: 'JustifyLeft'\n      },\n      {\n        title: 'Center',\n        icon: 'align-center',\n        format: 'aligncenter',\n        command: 'JustifyCenter'\n      },\n      {\n        title: 'Right',\n        icon: 'align-right',\n        format: 'alignright',\n        command: 'JustifyRight'\n      },\n      {\n        title: 'Justify',\n        icon: 'align-justify',\n        format: 'alignjustify',\n        command: 'JustifyFull'\n      }\n    ];\n    var getSpec$4 = function (editor) {\n      var getMatchingValue = function () {\n        return find$5(alignMenuItems, function (item) {\n          return editor.formatter.match(item.format);\n        });\n      };\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (_format) {\n        return Optional.none;\n      };\n      var updateSelectMenuIcon = function (comp) {\n        var match = getMatchingValue();\n        var alignment = match.fold(constant$1('left'), function (item) {\n          return item.title.toLowerCase();\n        });\n        emitWith(comp, updateMenuIcon, { icon: 'align-' + alignment });\n      };\n      var dataset = buildBasicStaticDataset(alignMenuItems);\n      var onAction = function (rawItem) {\n        return function () {\n          return find$5(alignMenuItems, function (item) {\n            return item.format === rawItem.format;\n          }).each(function (item) {\n            return editor.execCommand(item.command);\n          });\n        };\n      };\n      return {\n        tooltip: 'Align',\n        text: Optional.none(),\n        icon: Optional.some('align-left'),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: Optional.none,\n        getPreviewFor: getPreviewFor,\n        onAction: onAction,\n        updateText: updateSelectMenuIcon,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: function (item) {\n          return !editor.formatter.canApply(item.format);\n        }\n      };\n    };\n    var createAlignSelect = function (editor, backstage) {\n      return createSelectButton(editor, backstage, getSpec$4(editor));\n    };\n    var alignSelectMenu = function (editor, backstage) {\n      var menuItems = createMenuItems(editor, backstage, getSpec$4(editor));\n      editor.ui.registry.addNestedMenuItem('align', {\n        text: backstage.shared.providers.translate('Align'),\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var defaultFontsFormats = 'Andale Mono=andale mono,monospace;' + 'Arial=arial,helvetica,sans-serif;' + 'Arial Black=arial black,sans-serif;' + 'Book Antiqua=book antiqua,palatino,serif;' + 'Comic Sans MS=comic sans ms,sans-serif;' + 'Courier New=courier new,courier,monospace;' + 'Georgia=georgia,palatino,serif;' + 'Helvetica=helvetica,arial,sans-serif;' + 'Impact=impact,sans-serif;' + 'Symbol=symbol;' + 'Tahoma=tahoma,arial,helvetica,sans-serif;' + 'Terminal=terminal,monaco,monospace;' + 'Times New Roman=times new roman,times,serif;' + 'Trebuchet MS=trebuchet ms,geneva,sans-serif;' + 'Verdana=verdana,geneva,sans-serif;' + 'Webdings=webdings;' + 'Wingdings=wingdings,zapf dingbats';\n    var systemStackFonts = [\n      '-apple-system',\n      'Segoe UI',\n      'Roboto',\n      'Helvetica Neue',\n      'sans-serif'\n    ];\n    var splitFonts = function (fontFamily) {\n      var fonts = fontFamily.split(/\\s*,\\s*/);\n      return map$2(fonts, function (font) {\n        return font.replace(/^['\"]+|['\"]+$/g, '');\n      });\n    };\n    var isSystemFontStack = function (fontFamily) {\n      var matchesSystemStack = function () {\n        var fonts = splitFonts(fontFamily.toLowerCase());\n        return forall(systemStackFonts, function (font) {\n          return fonts.indexOf(font.toLowerCase()) > -1;\n        });\n      };\n      return fontFamily.indexOf('-apple-system') === 0 && matchesSystemStack();\n    };\n    var getSpec$3 = function (editor) {\n      var systemFont = 'System Font';\n      var getMatchingValue = function () {\n        var getFirstFont = function (fontFamily) {\n          return fontFamily ? splitFonts(fontFamily)[0] : '';\n        };\n        var fontFamily = editor.queryCommandValue('FontName');\n        var items = dataset.data;\n        var font = fontFamily ? fontFamily.toLowerCase() : '';\n        var matchOpt = find$5(items, function (item) {\n          var format = item.format;\n          return format.toLowerCase() === font || getFirstFont(format).toLowerCase() === getFirstFont(font).toLowerCase();\n        }).orThunk(function () {\n          return someIf(isSystemFontStack(font), {\n            title: systemFont,\n            format: font\n          });\n        });\n        return {\n          matchOpt: matchOpt,\n          font: fontFamily\n        };\n      };\n      var isSelectedFor = function (item) {\n        return function (valueOpt) {\n          return valueOpt.exists(function (value) {\n            return value.format === item;\n          });\n        };\n      };\n      var getCurrentValue = function () {\n        var matchOpt = getMatchingValue().matchOpt;\n        return matchOpt;\n      };\n      var getPreviewFor = function (item) {\n        return function () {\n          return Optional.some({\n            tag: 'div',\n            styles: item.indexOf('dings') === -1 ? { 'font-family': item } : {}\n          });\n        };\n      };\n      var onAction = function (rawItem) {\n        return function () {\n          editor.undoManager.transact(function () {\n            editor.focus();\n            editor.execCommand('FontName', false, rawItem.format);\n          });\n        };\n      };\n      var updateSelectMenuText = function (comp) {\n        var _a = getMatchingValue(), matchOpt = _a.matchOpt, font = _a.font;\n        var text = matchOpt.fold(constant$1(font), function (item) {\n          return item.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      var dataset = buildBasicSettingsDataset(editor, 'font_formats', defaultFontsFormats, Delimiter.SemiColon);\n      return {\n        tooltip: 'Fonts',\n        text: Optional.some(systemFont),\n        icon: Optional.none(),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: getCurrentValue,\n        getPreviewFor: getPreviewFor,\n        onAction: onAction,\n        updateText: updateSelectMenuText,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: never\n      };\n    };\n    var createFontSelect = function (editor, backstage) {\n      return createSelectButton(editor, backstage, getSpec$3(editor));\n    };\n    var fontSelectMenu = function (editor, backstage) {\n      var menuItems = createMenuItems(editor, backstage, getSpec$3(editor));\n      editor.ui.registry.addNestedMenuItem('fontformats', {\n        text: backstage.shared.providers.translate('Fonts'),\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var defaultFontsizeFormats = '8pt 10pt 12pt 14pt 18pt 24pt 36pt';\n    var legacyFontSizes = {\n      '8pt': '1',\n      '10pt': '2',\n      '12pt': '3',\n      '14pt': '4',\n      '18pt': '5',\n      '24pt': '6',\n      '36pt': '7'\n    };\n    var keywordFontSizes = {\n      'xx-small': '7pt',\n      'x-small': '8pt',\n      'small': '10pt',\n      'medium': '12pt',\n      'large': '14pt',\n      'x-large': '18pt',\n      'xx-large': '24pt'\n    };\n    var round = function (number, precision) {\n      var factor = Math.pow(10, precision);\n      return Math.round(number * factor) / factor;\n    };\n    var toPt = function (fontSize, precision) {\n      if (/[0-9.]+px$/.test(fontSize)) {\n        return round(parseInt(fontSize, 10) * 72 / 96, precision || 0) + 'pt';\n      } else {\n        return get$e(keywordFontSizes, fontSize).getOr(fontSize);\n      }\n    };\n    var toLegacy = function (fontSize) {\n      return get$e(legacyFontSizes, fontSize).getOr('');\n    };\n    var getSpec$2 = function (editor) {\n      var getMatchingValue = function () {\n        var matchOpt = Optional.none();\n        var items = dataset.data;\n        var fontSize = editor.queryCommandValue('FontSize');\n        if (fontSize) {\n          var _loop_1 = function (precision) {\n            var pt = toPt(fontSize, precision);\n            var legacy = toLegacy(pt);\n            matchOpt = find$5(items, function (item) {\n              return item.format === fontSize || item.format === pt || item.format === legacy;\n            });\n          };\n          for (var precision = 3; matchOpt.isNone() && precision >= 0; precision--) {\n            _loop_1(precision);\n          }\n        }\n        return {\n          matchOpt: matchOpt,\n          size: fontSize\n        };\n      };\n      var isSelectedFor = function (item) {\n        return function (valueOpt) {\n          return valueOpt.exists(function (value) {\n            return value.format === item;\n          });\n        };\n      };\n      var getCurrentValue = function () {\n        var matchOpt = getMatchingValue().matchOpt;\n        return matchOpt;\n      };\n      var getPreviewFor = constant$1(Optional.none);\n      var onAction = function (rawItem) {\n        return function () {\n          editor.undoManager.transact(function () {\n            editor.focus();\n            editor.execCommand('FontSize', false, rawItem.format);\n          });\n        };\n      };\n      var updateSelectMenuText = function (comp) {\n        var _a = getMatchingValue(), matchOpt = _a.matchOpt, size = _a.size;\n        var text = matchOpt.fold(constant$1(size), function (match) {\n          return match.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      var dataset = buildBasicSettingsDataset(editor, 'fontsize_formats', defaultFontsizeFormats, Delimiter.Space);\n      return {\n        tooltip: 'Font sizes',\n        text: Optional.some('12pt'),\n        icon: Optional.none(),\n        isSelectedFor: isSelectedFor,\n        getPreviewFor: getPreviewFor,\n        getCurrentValue: getCurrentValue,\n        onAction: onAction,\n        updateText: updateSelectMenuText,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: never\n      };\n    };\n    var createFontsizeSelect = function (editor, backstage) {\n      return createSelectButton(editor, backstage, getSpec$2(editor));\n    };\n    var fontsizeSelectMenu = function (editor, backstage) {\n      var menuItems = createMenuItems(editor, backstage, getSpec$2(editor));\n      editor.ui.registry.addNestedMenuItem('fontsizes', {\n        text: 'Font sizes',\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var findNearest = function (editor, getStyles) {\n      var styles = getStyles();\n      var formats = map$2(styles, function (style) {\n        return style.format;\n      });\n      return Optional.from(editor.formatter.closest(formats)).bind(function (fmt) {\n        return find$5(styles, function (data) {\n          return data.format === fmt;\n        });\n      }).orThunk(function () {\n        return someIf(editor.formatter.match('p'), {\n          title: 'Paragraph',\n          format: 'p'\n        });\n      });\n    };\n\n    var defaultBlocks = 'Paragraph=p;' + 'Heading 1=h1;' + 'Heading 2=h2;' + 'Heading 3=h3;' + 'Heading 4=h4;' + 'Heading 5=h5;' + 'Heading 6=h6;' + 'Preformatted=pre';\n    var getSpec$1 = function (editor) {\n      var fallbackFormat = 'Paragraph';\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (format) {\n        return function () {\n          var fmt = editor.formatter.get(format);\n          return Optional.some({\n            tag: fmt.length > 0 ? fmt[0].inline || fmt[0].block || 'div' : 'div',\n            styles: editor.dom.parseStyle(editor.formatter.getCssText(format))\n          });\n        };\n      };\n      var updateSelectMenuText = function (comp) {\n        var detectedFormat = findNearest(editor, function () {\n          return dataset.data;\n        });\n        var text = detectedFormat.fold(constant$1(fallbackFormat), function (fmt) {\n          return fmt.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      var dataset = buildBasicSettingsDataset(editor, 'block_formats', defaultBlocks, Delimiter.SemiColon);\n      return {\n        tooltip: 'Blocks',\n        text: Optional.some(fallbackFormat),\n        icon: Optional.none(),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: Optional.none,\n        getPreviewFor: getPreviewFor,\n        onAction: onActionToggleFormat$1(editor),\n        updateText: updateSelectMenuText,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: function (item) {\n          return !editor.formatter.canApply(item.format);\n        }\n      };\n    };\n    var createFormatSelect = function (editor, backstage) {\n      return createSelectButton(editor, backstage, getSpec$1(editor));\n    };\n    var formatSelectMenu = function (editor, backstage) {\n      var menuItems = createMenuItems(editor, backstage, getSpec$1(editor));\n      editor.ui.registry.addNestedMenuItem('blockformats', {\n        text: 'Blocks',\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var getSpec = function (editor, dataset) {\n      var fallbackFormat = 'Paragraph';\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (format) {\n        return function () {\n          var fmt = editor.formatter.get(format);\n          return fmt !== undefined ? Optional.some({\n            tag: fmt.length > 0 ? fmt[0].inline || fmt[0].block || 'div' : 'div',\n            styles: editor.dom.parseStyle(editor.formatter.getCssText(format))\n          }) : Optional.none();\n        };\n      };\n      var updateSelectMenuText = function (comp) {\n        var getFormatItems = function (fmt) {\n          var subs = fmt.items;\n          return subs !== undefined && subs.length > 0 ? bind$3(subs, getFormatItems) : [{\n              title: fmt.title,\n              format: fmt.format\n            }];\n        };\n        var flattenedItems = bind$3(getStyleFormats(editor), getFormatItems);\n        var detectedFormat = findNearest(editor, constant$1(flattenedItems));\n        var text = detectedFormat.fold(constant$1(fallbackFormat), function (fmt) {\n          return fmt.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      return {\n        tooltip: 'Formats',\n        text: Optional.some(fallbackFormat),\n        icon: Optional.none(),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: Optional.none,\n        getPreviewFor: getPreviewFor,\n        onAction: onActionToggleFormat$1(editor),\n        updateText: updateSelectMenuText,\n        shouldHide: editor.getParam('style_formats_autohide', false, 'boolean'),\n        isInvalid: function (item) {\n          return !editor.formatter.canApply(item.format);\n        },\n        dataset: dataset\n      };\n    };\n    var createStyleSelect = function (editor, backstage) {\n      var dataset = __assign({ type: 'advanced' }, backstage.styleselect);\n      return createSelectButton(editor, backstage, getSpec(editor, dataset));\n    };\n    var styleSelectMenu = function (editor, backstage) {\n      var dataset = __assign({ type: 'advanced' }, backstage.styleselect);\n      var menuItems = createMenuItems(editor, backstage, getSpec(editor, dataset));\n      editor.ui.registry.addNestedMenuItem('formats', {\n        text: 'Formats',\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var events$3 = function (reflectingConfig, reflectingState) {\n      var update = function (component, data) {\n        reflectingConfig.updateState.each(function (updateState) {\n          var newState = updateState(component, data);\n          reflectingState.set(newState);\n        });\n        reflectingConfig.renderComponents.each(function (renderComponents) {\n          var newComponents = renderComponents(data, reflectingState.get());\n          var newChildren = map$2(newComponents, component.getSystem().build);\n          replaceChildren(component, newChildren);\n        });\n      };\n      return derive$2([\n        run$1(receive(), function (component, message) {\n          var receivingData = message;\n          if (!receivingData.universal) {\n            var channel = reflectingConfig.channel;\n            if (contains$2(receivingData.channels, channel)) {\n              update(component, receivingData.data);\n            }\n          }\n        }),\n        runOnAttached(function (comp, _se) {\n          reflectingConfig.initialData.each(function (rawData) {\n            update(comp, rawData);\n          });\n        })\n      ]);\n    };\n\n    var ActiveReflecting = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$3\n    });\n\n    var getState = function (component, replaceConfig, reflectState) {\n      return reflectState;\n    };\n\n    var ReflectingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getState: getState\n    });\n\n    var ReflectingSchema = [\n      required$1('channel'),\n      option('renderComponents'),\n      option('updateState'),\n      option('initialData')\n    ];\n\n    var init$3 = function () {\n      var cell = Cell(Optional.none());\n      var clear = function () {\n        return cell.set(Optional.none());\n      };\n      var readState = function () {\n        return cell.get().getOr('none');\n      };\n      return {\n        readState: readState,\n        get: cell.get,\n        set: cell.set,\n        clear: clear\n      };\n    };\n\n    var ReflectingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$3\n    });\n\n    var Reflecting = create$8({\n      fields: ReflectingSchema,\n      name: 'reflecting',\n      active: ActiveReflecting,\n      apis: ReflectingApis,\n      state: ReflectingState\n    });\n\n    var schema$7 = constant$1([\n      required$1('toggleClass'),\n      required$1('fetch'),\n      onStrictHandler('onExecute'),\n      defaulted('getHotspot', Optional.some),\n      defaulted('getAnchorOverrides', constant$1({})),\n      schema$y(),\n      onStrictHandler('onItemExecute'),\n      option('lazySink'),\n      required$1('dom'),\n      onHandler('onOpen'),\n      field('splitDropdownBehaviours', [\n        Coupling,\n        Keying,\n        Focusing\n      ]),\n      defaulted('matchWidth', false),\n      defaulted('useMinWidth', false),\n      defaulted('eventOrder', {}),\n      option('role')\n    ].concat(sandboxFields()));\n    var arrowPart = required({\n      factory: Button,\n      schema: [required$1('dom')],\n      name: 'arrow',\n      defaults: function () {\n        return { buttonBehaviours: derive$1([Focusing.revoke()]) };\n      },\n      overrides: function (detail) {\n        return {\n          dom: {\n            tag: 'span',\n            attributes: { role: 'presentation' }\n          },\n          action: function (arrow) {\n            arrow.getSystem().getByUid(detail.uid).each(emitExecute);\n          },\n          buttonBehaviours: derive$1([Toggling.config({\n              toggleOnExecute: false,\n              toggleClass: detail.toggleClass\n            })])\n        };\n      }\n    });\n    var buttonPart = required({\n      factory: Button,\n      schema: [required$1('dom')],\n      name: 'button',\n      defaults: function () {\n        return { buttonBehaviours: derive$1([Focusing.revoke()]) };\n      },\n      overrides: function (detail) {\n        return {\n          dom: {\n            tag: 'span',\n            attributes: { role: 'presentation' }\n          },\n          action: function (btn) {\n            btn.getSystem().getByUid(detail.uid).each(function (splitDropdown) {\n              detail.onExecute(splitDropdown, btn);\n            });\n          }\n        };\n      }\n    });\n    var parts$3 = constant$1([\n      arrowPart,\n      buttonPart,\n      optional({\n        factory: {\n          sketch: function (spec) {\n            return {\n              uid: spec.uid,\n              dom: {\n                tag: 'span',\n                styles: { display: 'none' },\n                attributes: { 'aria-hidden': 'true' },\n                innerHtml: spec.text\n              }\n            };\n          }\n        },\n        schema: [required$1('text')],\n        name: 'aria-descriptor'\n      }),\n      external$1({\n        schema: [tieredMenuMarkers()],\n        name: 'menu',\n        defaults: function (detail) {\n          return {\n            onExecute: function (tmenu, item) {\n              tmenu.getSystem().getByUid(detail.uid).each(function (splitDropdown) {\n                detail.onItemExecute(splitDropdown, tmenu, item);\n              });\n            }\n          };\n        }\n      }),\n      partType$1()\n    ]);\n\n    var factory$5 = function (detail, components, spec, externals) {\n      var _a;\n      var switchToMenu = function (sandbox) {\n        Composing.getCurrent(sandbox).each(function (current) {\n          Highlighting.highlightFirst(current);\n          Keying.focusIn(current);\n        });\n      };\n      var action = function (component) {\n        var onOpenSync = switchToMenu;\n        togglePopup(detail, identity$1, component, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n      };\n      var openMenu = function (comp) {\n        action(comp);\n        return Optional.some(true);\n      };\n      var executeOnButton = function (comp) {\n        var button = getPartOrDie(comp, detail, 'button');\n        emitExecute(button);\n        return Optional.some(true);\n      };\n      var buttonEvents = __assign(__assign({}, derive$2([runOnAttached(function (component, _simulatedEvent) {\n          var ariaDescriptor = getPart(component, detail, 'aria-descriptor');\n          ariaDescriptor.each(function (descriptor) {\n            var descriptorId = generate$6('aria');\n            set$8(descriptor.element, 'id', descriptorId);\n            set$8(component.element, 'aria-describedby', descriptorId);\n          });\n        })])), events$a(Optional.some(action)));\n      var apis = {\n        repositionMenus: function (comp) {\n          if (Toggling.isOn(comp)) {\n            repositionMenus(comp);\n          }\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        apis: apis,\n        eventOrder: __assign(__assign({}, detail.eventOrder), (_a = {}, _a[execute$5()] = [\n          'disabling',\n          'toggling',\n          'alloy.base.behaviour'\n        ], _a)),\n        events: buttonEvents,\n        behaviours: augment(detail.splitDropdownBehaviours, [\n          Coupling.config({\n            others: {\n              sandbox: function (hotspot) {\n                var arrow = getPartOrDie(hotspot, detail, 'arrow');\n                var extras = {\n                  onOpen: function () {\n                    Toggling.on(arrow);\n                    Toggling.on(hotspot);\n                  },\n                  onClose: function () {\n                    Toggling.off(arrow);\n                    Toggling.off(hotspot);\n                  }\n                };\n                return makeSandbox$1(detail, hotspot, extras);\n              }\n            }\n          }),\n          Keying.config({\n            mode: 'special',\n            onSpace: executeOnButton,\n            onEnter: executeOnButton,\n            onDown: openMenu\n          }),\n          Focusing.config({}),\n          Toggling.config({\n            toggleOnExecute: false,\n            aria: { mode: 'expanded' }\n          })\n        ]),\n        domModification: {\n          attributes: {\n            'role': detail.role.getOr('button'),\n            'aria-haspopup': true\n          }\n        }\n      };\n    };\n    var SplitDropdown = composite({\n      name: 'SplitDropdown',\n      configFields: schema$7(),\n      partFields: parts$3(),\n      factory: factory$5,\n      apis: {\n        repositionMenus: function (apis, comp) {\n          return apis.repositionMenus(comp);\n        }\n      }\n    });\n\n    var getButtonApi = function (component) {\n      return {\n        isDisabled: function () {\n          return Disabling.isDisabled(component);\n        },\n        setDisabled: function (state) {\n          return Disabling.set(component, state);\n        }\n      };\n    };\n    var getToggleApi = function (component) {\n      return {\n        setActive: function (state) {\n          Toggling.set(component, state);\n        },\n        isActive: function () {\n          return Toggling.isOn(component);\n        },\n        isDisabled: function () {\n          return Disabling.isDisabled(component);\n        },\n        setDisabled: function (state) {\n          return Disabling.set(component, state);\n        }\n      };\n    };\n    var getTooltipAttributes = function (tooltip, providersBackstage) {\n      return tooltip.map(function (tooltip) {\n        return {\n          'aria-label': providersBackstage.translate(tooltip),\n          'title': providersBackstage.translate(tooltip)\n        };\n      }).getOr({});\n    };\n    var focusButtonEvent = generate$6('focus-button');\n    var renderCommonStructure = function (icon, text, tooltip, receiver, behaviours, providersBackstage) {\n      var _d;\n      return {\n        dom: {\n          tag: 'button',\n          classes: ['tox-tbtn'].concat(text.isSome() ? ['tox-tbtn--select'] : []),\n          attributes: getTooltipAttributes(tooltip, providersBackstage)\n        },\n        components: componentRenderPipeline([\n          icon.map(function (iconName) {\n            return renderIconFromPack(iconName, providersBackstage.icons);\n          }),\n          text.map(function (text) {\n            return renderLabel$1(text, 'tox-tbtn', providersBackstage);\n          })\n        ]),\n        eventOrder: (_d = {}, _d[mousedown()] = [\n          'focusing',\n          'alloy.base.behaviour',\n          'common-button-display-events'\n        ], _d),\n        buttonBehaviours: derive$1([\n          DisablingConfigs.toolbarButton(providersBackstage.isDisabled),\n          receivingConfig(),\n          config('common-button-display-events', [run$1(mousedown(), function (button, se) {\n              se.event.prevent();\n              emit(button, focusButtonEvent);\n            })])\n        ].concat(receiver.map(function (r) {\n          return Reflecting.config({\n            channel: r,\n            initialData: {\n              icon: icon,\n              text: text\n            },\n            renderComponents: function (data, _state) {\n              return componentRenderPipeline([\n                data.icon.map(function (iconName) {\n                  return renderIconFromPack(iconName, providersBackstage.icons);\n                }),\n                data.text.map(function (text) {\n                  return renderLabel$1(text, 'tox-tbtn', providersBackstage);\n                })\n              ]);\n            }\n          });\n        }).toArray()).concat(behaviours.getOr([])))\n      };\n    };\n    var renderFloatingToolbarButton = function (spec, backstage, identifyButtons, attributes) {\n      var sharedBackstage = backstage.shared;\n      return FloatingToolbarButton.sketch({\n        lazySink: sharedBackstage.getSink,\n        fetch: function () {\n          return Future.nu(function (resolve) {\n            resolve(map$2(identifyButtons(spec.items), renderToolbarGroup));\n          });\n        },\n        markers: { toggledClass: 'tox-tbtn--enabled' },\n        parts: {\n          button: renderCommonStructure(spec.icon, spec.text, spec.tooltip, Optional.none(), Optional.none(), sharedBackstage.providers),\n          toolbar: {\n            dom: {\n              tag: 'div',\n              classes: ['tox-toolbar__overflow'],\n              attributes: attributes\n            }\n          }\n        }\n      });\n    };\n    var renderCommonToolbarButton = function (spec, specialisation, providersBackstage) {\n      var editorOffCell = Cell(noop);\n      var structure = renderCommonStructure(spec.icon, spec.text, spec.tooltip, Optional.none(), Optional.none(), providersBackstage);\n      return Button.sketch({\n        dom: structure.dom,\n        components: structure.components,\n        eventOrder: toolbarButtonEventOrder,\n        buttonBehaviours: derive$1([\n          config('toolbar-button-events', [\n            onToolbarButtonExecute({\n              onAction: spec.onAction,\n              getApi: specialisation.getApi\n            }),\n            onControlAttached(specialisation, editorOffCell),\n            onControlDetached(specialisation, editorOffCell)\n          ]),\n          DisablingConfigs.toolbarButton(function () {\n            return spec.disabled || providersBackstage.isDisabled();\n          }),\n          receivingConfig()\n        ].concat(specialisation.toolbarButtonBehaviours))\n      });\n    };\n    var renderToolbarButton = function (spec, providersBackstage) {\n      return renderToolbarButtonWith(spec, providersBackstage, []);\n    };\n    var renderToolbarButtonWith = function (spec, providersBackstage, bonusEvents) {\n      return renderCommonToolbarButton(spec, {\n        toolbarButtonBehaviours: [].concat(bonusEvents.length > 0 ? [config('toolbarButtonWith', bonusEvents)] : []),\n        getApi: getButtonApi,\n        onSetup: spec.onSetup\n      }, providersBackstage);\n    };\n    var renderToolbarToggleButton = function (spec, providersBackstage) {\n      return renderToolbarToggleButtonWith(spec, providersBackstage, []);\n    };\n    var renderToolbarToggleButtonWith = function (spec, providersBackstage, bonusEvents) {\n      return deepMerge(renderCommonToolbarButton(spec, {\n        toolbarButtonBehaviours: [\n          Replacing.config({}),\n          Toggling.config({\n            toggleClass: 'tox-tbtn--enabled',\n            aria: { mode: 'pressed' },\n            toggleOnExecute: false\n          })\n        ].concat(bonusEvents.length > 0 ? [config('toolbarToggleButtonWith', bonusEvents)] : []),\n        getApi: getToggleApi,\n        onSetup: spec.onSetup\n      }, providersBackstage));\n    };\n    var fetchChoices = function (getApi, spec, providersBackstage) {\n      return function (comp) {\n        return Future.nu(function (callback) {\n          return spec.fetch(callback);\n        }).map(function (items) {\n          return Optional.from(createTieredDataFrom(deepMerge(createPartialChoiceMenu(generate$6('menu-value'), items, function (value) {\n            spec.onItemAction(getApi(comp), value);\n          }, spec.columns, spec.presets, ItemResponse$1.CLOSE_ON_EXECUTE, spec.select.getOr(never), providersBackstage), {\n            movement: deriveMenuMovement(spec.columns, spec.presets),\n            menuBehaviours: SimpleBehaviours.unnamedEvents(spec.columns !== 'auto' ? [] : [runOnAttached(function (comp, _se) {\n                detectSize(comp, 4, classForPreset(spec.presets)).each(function (_d) {\n                  var numRows = _d.numRows, numColumns = _d.numColumns;\n                  Keying.setGridSize(comp, numRows, numColumns);\n                });\n              })])\n          })));\n        });\n      };\n    };\n    var renderSplitButton = function (spec, sharedBackstage) {\n      var _d;\n      var displayChannel = generate$6('channel-update-split-dropdown-display');\n      var getApi = function (comp) {\n        return {\n          isDisabled: function () {\n            return Disabling.isDisabled(comp);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(comp, state);\n          },\n          setIconFill: function (id, value) {\n            descendant(comp.element, 'svg path[id=\"' + id + '\"], rect[id=\"' + id + '\"]').each(function (underlinePath) {\n              set$8(underlinePath, 'fill', value);\n            });\n          },\n          setIconStroke: function (id, value) {\n            descendant(comp.element, 'svg path[id=\"' + id + '\"], rect[id=\"' + id + '\"]').each(function (underlinePath) {\n              set$8(underlinePath, 'stroke', value);\n            });\n          },\n          setActive: function (state) {\n            set$8(comp.element, 'aria-pressed', state);\n            descendant(comp.element, 'span').each(function (button) {\n              comp.getSystem().getByDom(button).each(function (buttonComp) {\n                return Toggling.set(buttonComp, state);\n              });\n            });\n          },\n          isActive: function () {\n            return descendant(comp.element, 'span').exists(function (button) {\n              return comp.getSystem().getByDom(button).exists(Toggling.isOn);\n            });\n          }\n        };\n      };\n      var editorOffCell = Cell(noop);\n      var specialisation = {\n        getApi: getApi,\n        onSetup: spec.onSetup\n      };\n      return SplitDropdown.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-split-button'],\n          attributes: __assign({ 'aria-pressed': false }, getTooltipAttributes(spec.tooltip, sharedBackstage.providers))\n        },\n        onExecute: function (button) {\n          spec.onAction(getApi(button));\n        },\n        onItemExecute: function (_a, _b, _c) {\n        },\n        splitDropdownBehaviours: derive$1([\n          DisablingConfigs.splitButton(sharedBackstage.providers.isDisabled),\n          receivingConfig(),\n          config('split-dropdown-events', [\n            run$1(focusButtonEvent, Focusing.focus),\n            onControlAttached(specialisation, editorOffCell),\n            onControlDetached(specialisation, editorOffCell)\n          ]),\n          Unselecting.config({})\n        ]),\n        eventOrder: (_d = {}, _d[attachedToDom()] = [\n          'alloy.base.behaviour',\n          'split-dropdown-events'\n        ], _d),\n        toggleClass: 'tox-tbtn--enabled',\n        lazySink: sharedBackstage.getSink,\n        fetch: fetchChoices(getApi, spec, sharedBackstage.providers),\n        parts: { menu: part(false, spec.columns, spec.presets) },\n        components: [\n          SplitDropdown.parts.button(renderCommonStructure(spec.icon, spec.text, Optional.none(), Optional.some(displayChannel), Optional.some([Toggling.config({\n              toggleClass: 'tox-tbtn--enabled',\n              toggleOnExecute: false\n            })]), sharedBackstage.providers)),\n          SplitDropdown.parts.arrow({\n            dom: {\n              tag: 'button',\n              classes: [\n                'tox-tbtn',\n                'tox-split-button__chevron'\n              ],\n              innerHtml: get$1('chevron-down', sharedBackstage.providers.icons)\n            },\n            buttonBehaviours: derive$1([\n              DisablingConfigs.splitButton(sharedBackstage.providers.isDisabled),\n              receivingConfig(),\n              addFocusableBehaviour()\n            ])\n          }),\n          SplitDropdown.parts['aria-descriptor']({ text: sharedBackstage.providers.translate('To open the popup, press Shift+Enter') })\n        ]\n      });\n    };\n\n    var defaultToolbar = [\n      {\n        name: 'history',\n        items: [\n          'undo',\n          'redo'\n        ]\n      },\n      {\n        name: 'styles',\n        items: ['styleselect']\n      },\n      {\n        name: 'formatting',\n        items: [\n          'bold',\n          'italic'\n        ]\n      },\n      {\n        name: 'alignment',\n        items: [\n          'alignleft',\n          'aligncenter',\n          'alignright',\n          'alignjustify'\n        ]\n      },\n      {\n        name: 'indentation',\n        items: [\n          'outdent',\n          'indent'\n        ]\n      },\n      {\n        name: 'permanent pen',\n        items: ['permanentpen']\n      },\n      {\n        name: 'comments',\n        items: ['addcomment']\n      }\n    ];\n    var renderFromBridge = function (bridgeBuilder, render) {\n      return function (spec, extras, editor) {\n        var internal = bridgeBuilder(spec).mapError(function (errInfo) {\n          return formatError(errInfo);\n        }).getOrDie();\n        return render(internal, extras, editor);\n      };\n    };\n    var types = {\n      button: renderFromBridge(createToolbarButton, function (s, extras) {\n        return renderToolbarButton(s, extras.backstage.shared.providers);\n      }),\n      togglebutton: renderFromBridge(createToggleButton, function (s, extras) {\n        return renderToolbarToggleButton(s, extras.backstage.shared.providers);\n      }),\n      menubutton: renderFromBridge(createMenuButton, function (s, extras) {\n        return renderMenuButton(s, 'tox-tbtn', extras.backstage, Optional.none());\n      }),\n      splitbutton: renderFromBridge(createSplitButton, function (s, extras) {\n        return renderSplitButton(s, extras.backstage.shared);\n      }),\n      grouptoolbarbutton: renderFromBridge(createGroupToolbarButton, function (s, extras, editor) {\n        var _a;\n        var buttons = editor.ui.registry.getAll().buttons;\n        var identify = function (toolbar) {\n          return identifyButtons(editor, {\n            buttons: buttons,\n            toolbar: toolbar,\n            allowToolbarGroups: false\n          }, extras, Optional.none());\n        };\n        var attributes = (_a = {}, _a[Attribute] = extras.backstage.shared.header.isPositionedAtTop() ? AttributeValue.TopToBottom : AttributeValue.BottomToTop, _a);\n        switch (getToolbarMode(editor)) {\n        case ToolbarMode.floating:\n          return renderFloatingToolbarButton(s, extras.backstage, identify, attributes);\n        default:\n          throw new Error('Toolbar groups are only supported when using floating toolbar mode');\n        }\n      }),\n      styleSelectButton: function (editor, extras) {\n        return createStyleSelect(editor, extras.backstage);\n      },\n      fontsizeSelectButton: function (editor, extras) {\n        return createFontsizeSelect(editor, extras.backstage);\n      },\n      fontSelectButton: function (editor, extras) {\n        return createFontSelect(editor, extras.backstage);\n      },\n      formatButton: function (editor, extras) {\n        return createFormatSelect(editor, extras.backstage);\n      },\n      alignMenuButton: function (editor, extras) {\n        return createAlignSelect(editor, extras.backstage);\n      }\n    };\n    var extractFrom = function (spec, extras, editor) {\n      return get$e(types, spec.type).fold(function () {\n        console.error('skipping button defined by', spec);\n        return Optional.none();\n      }, function (render) {\n        return Optional.some(render(spec, extras, editor));\n      });\n    };\n    var bespokeButtons = {\n      styleselect: types.styleSelectButton,\n      fontsizeselect: types.fontsizeSelectButton,\n      fontselect: types.fontSelectButton,\n      formatselect: types.formatButton,\n      align: types.alignMenuButton\n    };\n    var removeUnusedDefaults = function (buttons) {\n      var filteredItemGroups = map$2(defaultToolbar, function (group) {\n        var items = filter$2(group.items, function (subItem) {\n          return has$2(buttons, subItem) || has$2(bespokeButtons, subItem);\n        });\n        return {\n          name: group.name,\n          items: items\n        };\n      });\n      return filter$2(filteredItemGroups, function (group) {\n        return group.items.length > 0;\n      });\n    };\n    var convertStringToolbar = function (strToolbar) {\n      var groupsStrings = strToolbar.split('|');\n      return map$2(groupsStrings, function (g) {\n        return { items: g.trim().split(' ') };\n      });\n    };\n    var isToolbarGroupSettingArray = function (toolbar) {\n      return isArrayOf(toolbar, function (t) {\n        return has$2(t, 'name') && has$2(t, 'items');\n      });\n    };\n    var createToolbar = function (toolbarConfig) {\n      var toolbar = toolbarConfig.toolbar;\n      var buttons = toolbarConfig.buttons;\n      if (toolbar === false) {\n        return [];\n      } else if (toolbar === undefined || toolbar === true) {\n        return removeUnusedDefaults(buttons);\n      } else if (isString(toolbar)) {\n        return convertStringToolbar(toolbar);\n      } else if (isToolbarGroupSettingArray(toolbar)) {\n        return toolbar;\n      } else {\n        console.error('Toolbar type should be string, string[], boolean or ToolbarGroup[]');\n        return [];\n      }\n    };\n    var lookupButton = function (editor, buttons, toolbarItem, allowToolbarGroups, extras, prefixes) {\n      return get$e(buttons, toolbarItem.toLowerCase()).orThunk(function () {\n        return prefixes.bind(function (ps) {\n          return findMap(ps, function (prefix) {\n            return get$e(buttons, prefix + toolbarItem.toLowerCase());\n          });\n        });\n      }).fold(function () {\n        return get$e(bespokeButtons, toolbarItem.toLowerCase()).map(function (r) {\n          return r(editor, extras);\n        }).orThunk(function () {\n          return Optional.none();\n        });\n      }, function (spec) {\n        if (spec.type === 'grouptoolbarbutton' && !allowToolbarGroups) {\n          console.warn('Ignoring the \\'' + toolbarItem + '\\' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.');\n          return Optional.none();\n        } else {\n          return extractFrom(spec, extras, editor);\n        }\n      });\n    };\n    var identifyButtons = function (editor, toolbarConfig, extras, prefixes) {\n      var toolbarGroups = createToolbar(toolbarConfig);\n      var groups = map$2(toolbarGroups, function (group) {\n        var items = bind$3(group.items, function (toolbarItem) {\n          return toolbarItem.trim().length === 0 ? [] : lookupButton(editor, toolbarConfig.buttons, toolbarItem, toolbarConfig.allowToolbarGroups, extras, prefixes).toArray();\n        });\n        return {\n          title: Optional.from(editor.translate(group.name)),\n          items: items\n        };\n      });\n      return filter$2(groups, function (group) {\n        return group.items.length > 0;\n      });\n    };\n\n    var setToolbar = function (editor, uiComponents, rawUiConfig, backstage) {\n      var comp = uiComponents.outerContainer;\n      var toolbarConfig = rawUiConfig.toolbar;\n      var toolbarButtonsConfig = rawUiConfig.buttons;\n      if (isArrayOf(toolbarConfig, isString)) {\n        var toolbars = toolbarConfig.map(function (t) {\n          var config = {\n            toolbar: t,\n            buttons: toolbarButtonsConfig,\n            allowToolbarGroups: rawUiConfig.allowToolbarGroups\n          };\n          return identifyButtons(editor, config, { backstage: backstage }, Optional.none());\n        });\n        OuterContainer.setToolbars(comp, toolbars);\n      } else {\n        OuterContainer.setToolbar(comp, identifyButtons(editor, rawUiConfig, { backstage: backstage }, Optional.none()));\n      }\n    };\n\n    var detection = detect$1();\n    var isiOS12 = detection.os.isiOS() && detection.os.version.major <= 12;\n    var setupEvents$1 = function (editor, uiComponents) {\n      var dom = editor.dom;\n      var contentWindow = editor.getWin();\n      var initialDocEle = editor.getDoc().documentElement;\n      var lastWindowDimensions = Cell(SugarPosition(contentWindow.innerWidth, contentWindow.innerHeight));\n      var lastDocumentDimensions = Cell(SugarPosition(initialDocEle.offsetWidth, initialDocEle.offsetHeight));\n      var resizeWindow = function () {\n        var outer = lastWindowDimensions.get();\n        if (outer.left !== contentWindow.innerWidth || outer.top !== contentWindow.innerHeight) {\n          lastWindowDimensions.set(SugarPosition(contentWindow.innerWidth, contentWindow.innerHeight));\n          fireResizeContent(editor);\n        }\n      };\n      var resizeDocument = function () {\n        var docEle = editor.getDoc().documentElement;\n        var inner = lastDocumentDimensions.get();\n        if (inner.left !== docEle.offsetWidth || inner.top !== docEle.offsetHeight) {\n          lastDocumentDimensions.set(SugarPosition(docEle.offsetWidth, docEle.offsetHeight));\n          fireResizeContent(editor);\n        }\n      };\n      var scroll = function (e) {\n        return fireScrollContent(editor, e);\n      };\n      dom.bind(contentWindow, 'resize', resizeWindow);\n      dom.bind(contentWindow, 'scroll', scroll);\n      var elementLoad = capture(SugarElement.fromDom(editor.getBody()), 'load', resizeDocument);\n      var mothership = uiComponents.uiMothership.element;\n      editor.on('hide', function () {\n        set$7(mothership, 'display', 'none');\n      });\n      editor.on('show', function () {\n        remove$6(mothership, 'display');\n      });\n      editor.on('NodeChange', resizeDocument);\n      editor.on('remove', function () {\n        elementLoad.unbind();\n        dom.unbind(contentWindow, 'resize', resizeWindow);\n        dom.unbind(contentWindow, 'scroll', scroll);\n        contentWindow = null;\n      });\n    };\n    var render$1 = function (editor, uiComponents, rawUiConfig, backstage, args) {\n      var lastToolbarWidth = Cell(0);\n      var outerContainer = uiComponents.outerContainer;\n      iframe(editor);\n      var eTargetNode = SugarElement.fromDom(args.targetNode);\n      var uiRoot = getContentContainer(getRootNode(eTargetNode));\n      attachSystemAfter(eTargetNode, uiComponents.mothership);\n      attachSystem(uiRoot, uiComponents.uiMothership);\n      editor.on('PostRender', function () {\n        setToolbar(editor, uiComponents, rawUiConfig, backstage);\n        lastToolbarWidth.set(editor.getWin().innerWidth);\n        OuterContainer.setMenubar(outerContainer, identifyMenus(editor, rawUiConfig));\n        OuterContainer.setSidebar(outerContainer, rawUiConfig.sidebar);\n        setupEvents$1(editor, uiComponents);\n      });\n      var socket = OuterContainer.getSocket(outerContainer).getOrDie('Could not find expected socket element');\n      if (isiOS12) {\n        setAll(socket.element, {\n          'overflow': 'scroll',\n          '-webkit-overflow-scrolling': 'touch'\n        });\n        var limit = first(function () {\n          editor.fire('ScrollContent');\n        }, 20);\n        var unbinder = bind(socket.element, 'scroll', limit.throttle);\n        editor.on('remove', unbinder.unbind);\n      }\n      setupReadonlyModeSwitch(editor, uiComponents);\n      editor.addCommand('ToggleSidebar', function (_ui, value) {\n        OuterContainer.toggleSidebar(outerContainer, value);\n        editor.fire('ToggleSidebar');\n      });\n      editor.addQueryValueHandler('ToggleSidebar', function () {\n        return OuterContainer.whichSidebar(outerContainer);\n      });\n      var toolbarMode = getToolbarMode(editor);\n      var refreshDrawer = function () {\n        OuterContainer.refreshToolbar(uiComponents.outerContainer);\n      };\n      if (toolbarMode === ToolbarMode.sliding || toolbarMode === ToolbarMode.floating) {\n        editor.on('ResizeWindow ResizeEditor ResizeContent', function () {\n          var width = editor.getWin().innerWidth;\n          if (width !== lastToolbarWidth.get()) {\n            refreshDrawer();\n            lastToolbarWidth.set(width);\n          }\n        });\n      }\n      var api = {\n        enable: function () {\n          broadcastReadonly(uiComponents, false);\n        },\n        disable: function () {\n          broadcastReadonly(uiComponents, true);\n        },\n        isDisabled: function () {\n          return Disabling.isDisabled(outerContainer);\n        }\n      };\n      return {\n        iframeContainer: socket.element.dom,\n        editorContainer: outerContainer.element.dom,\n        api: api\n      };\n    };\n\n    var Iframe = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        render: render$1\n    });\n\n    var parseToInt = function (val) {\n      var re = /^[0-9\\.]+(|px)$/i;\n      if (re.test('' + val)) {\n        return Optional.some(parseInt('' + val, 10));\n      }\n      return Optional.none();\n    };\n    var numToPx = function (val) {\n      return isNumber(val) ? val + 'px' : val;\n    };\n    var calcCappedSize = function (size, minSize, maxSize) {\n      var minOverride = minSize.filter(function (min) {\n        return size < min;\n      });\n      var maxOverride = maxSize.filter(function (max) {\n        return size > max;\n      });\n      return minOverride.or(maxOverride).getOr(size);\n    };\n\n    var getHeight = function (editor) {\n      var baseHeight = getHeightSetting(editor);\n      var minHeight = getMinHeightSetting(editor);\n      var maxHeight = getMaxHeightSetting(editor);\n      return parseToInt(baseHeight).map(function (height) {\n        return calcCappedSize(height, minHeight, maxHeight);\n      });\n    };\n    var getHeightWithFallback = function (editor) {\n      var height = getHeight(editor);\n      return height.getOr(getHeightSetting(editor));\n    };\n    var getWidth = function (editor) {\n      var baseWidth = getWidthSetting(editor);\n      var minWidth = getMinWidthSetting(editor);\n      var maxWidth = getMaxWidthSetting(editor);\n      return parseToInt(baseWidth).map(function (width) {\n        return calcCappedSize(width, minWidth, maxWidth);\n      });\n    };\n    var getWidthWithFallback = function (editor) {\n      var width = getWidth(editor);\n      return width.getOr(getWidthSetting(editor));\n    };\n\n    var InlineHeader = function (editor, targetElm, uiComponents, backstage, floatContainer) {\n      var uiMothership = uiComponents.uiMothership, outerContainer = uiComponents.outerContainer;\n      var DOM = global$b.DOM;\n      var useFixedToolbarContainer = useFixedContainer(editor);\n      var isSticky = isStickyToolbar(editor);\n      var editorMaxWidthOpt = getMaxWidthSetting(editor).or(getWidth(editor));\n      var headerBackstage = backstage.shared.header;\n      var isPositionedAtTop = headerBackstage.isPositionedAtTop;\n      var toolbarMode = getToolbarMode(editor);\n      var isSplitToolbar = toolbarMode === ToolbarMode.sliding || toolbarMode === ToolbarMode.floating;\n      var visible = Cell(false);\n      var isVisible = function () {\n        return visible.get() && !editor.removed;\n      };\n      var calcToolbarOffset = function (toolbar) {\n        return isSplitToolbar ? toolbar.fold(constant$1(0), function (tbar) {\n          return tbar.components().length > 1 ? get$b(tbar.components()[1].element) : 0;\n        }) : 0;\n      };\n      var calcMode = function (container) {\n        switch (getToolbarLocation(editor)) {\n        case ToolbarLocation.auto:\n          var toolbar_1 = OuterContainer.getToolbar(outerContainer);\n          var offset = calcToolbarOffset(toolbar_1);\n          var toolbarHeight = get$b(container.element) - offset;\n          var targetBounds = box$1(targetElm);\n          var roomAtTop = targetBounds.y > toolbarHeight;\n          if (roomAtTop) {\n            return 'top';\n          } else {\n            var doc = documentElement(targetElm);\n            var docHeight = Math.max(doc.dom.scrollHeight, get$b(doc));\n            var roomAtBottom = targetBounds.bottom < docHeight - toolbarHeight;\n            if (roomAtBottom) {\n              return 'bottom';\n            } else {\n              var winBounds = win();\n              var isRoomAtBottomViewport = winBounds.bottom < targetBounds.bottom - toolbarHeight;\n              return isRoomAtBottomViewport ? 'bottom' : 'top';\n            }\n          }\n        case ToolbarLocation.bottom:\n          return 'bottom';\n        case ToolbarLocation.top:\n        default:\n          return 'top';\n        }\n      };\n      var setupMode = function (mode) {\n        var container = floatContainer.get();\n        Docking.setModes(container, [mode]);\n        headerBackstage.setDockingMode(mode);\n        var verticalDir = isPositionedAtTop() ? AttributeValue.TopToBottom : AttributeValue.BottomToTop;\n        set$8(container.element, Attribute, verticalDir);\n      };\n      var updateChromeWidth = function () {\n        var maxWidth = editorMaxWidthOpt.getOrThunk(function () {\n          var bodyMargin = parseToInt(get$c(body(), 'margin-left')).getOr(0);\n          return get$a(body()) - absolute$3(targetElm).left + bodyMargin;\n        });\n        set$7(floatContainer.get().element, 'max-width', maxWidth + 'px');\n      };\n      var updateChromePosition = function () {\n        var toolbar = OuterContainer.getToolbar(outerContainer);\n        var offset = calcToolbarOffset(toolbar);\n        var targetBounds = box$1(targetElm);\n        var top = isPositionedAtTop() ? Math.max(targetBounds.y - get$b(floatContainer.get().element) + offset, 0) : targetBounds.bottom;\n        setAll(outerContainer.element, {\n          position: 'absolute',\n          top: Math.round(top) + 'px',\n          left: Math.round(targetBounds.x) + 'px'\n        });\n      };\n      var repositionPopups$1 = function () {\n        uiMothership.broadcastOn([repositionPopups()], {});\n      };\n      var updateChromeUi = function (resetDocking) {\n        if (resetDocking === void 0) {\n          resetDocking = false;\n        }\n        if (!isVisible()) {\n          return;\n        }\n        if (!useFixedToolbarContainer) {\n          updateChromeWidth();\n        }\n        if (isSplitToolbar) {\n          OuterContainer.refreshToolbar(outerContainer);\n        }\n        if (!useFixedToolbarContainer) {\n          updateChromePosition();\n        }\n        if (isSticky) {\n          var floatContainerComp = floatContainer.get();\n          resetDocking ? Docking.reset(floatContainerComp) : Docking.refresh(floatContainerComp);\n        }\n        repositionPopups$1();\n      };\n      var updateMode = function (updateUi) {\n        if (updateUi === void 0) {\n          updateUi = true;\n        }\n        if (useFixedToolbarContainer || !isSticky || !isVisible()) {\n          return;\n        }\n        var currentMode = headerBackstage.getDockingMode();\n        var newMode = calcMode(floatContainer.get());\n        if (newMode !== currentMode) {\n          setupMode(newMode);\n          if (updateUi) {\n            updateChromeUi(true);\n          }\n        }\n      };\n      var show = function () {\n        visible.set(true);\n        set$7(outerContainer.element, 'display', 'flex');\n        DOM.addClass(editor.getBody(), 'mce-edit-focus');\n        remove$6(uiMothership.element, 'display');\n        updateMode(false);\n        updateChromeUi();\n      };\n      var hide = function () {\n        visible.set(false);\n        if (uiComponents.outerContainer) {\n          set$7(outerContainer.element, 'display', 'none');\n          DOM.removeClass(editor.getBody(), 'mce-edit-focus');\n        }\n        set$7(uiMothership.element, 'display', 'none');\n      };\n      return {\n        isVisible: isVisible,\n        isPositionedAtTop: isPositionedAtTop,\n        show: show,\n        hide: hide,\n        update: updateChromeUi,\n        updateMode: updateMode,\n        repositionPopups: repositionPopups$1\n      };\n    };\n\n    var getTargetPosAndBounds = function (targetElm, isToolbarTop) {\n      var bounds = box$1(targetElm);\n      return {\n        pos: isToolbarTop ? bounds.y : bounds.bottom,\n        bounds: bounds\n      };\n    };\n    var setupEvents = function (editor, targetElm, ui, toolbarPersist) {\n      var prevPosAndBounds = Cell(getTargetPosAndBounds(targetElm, ui.isPositionedAtTop()));\n      var resizeContent = function (e) {\n        var _a = getTargetPosAndBounds(targetElm, ui.isPositionedAtTop()), pos = _a.pos, bounds = _a.bounds;\n        var _b = prevPosAndBounds.get(), prevPos = _b.pos, prevBounds = _b.bounds;\n        var hasResized = bounds.height !== prevBounds.height || bounds.width !== prevBounds.width;\n        prevPosAndBounds.set({\n          pos: pos,\n          bounds: bounds\n        });\n        if (hasResized) {\n          fireResizeContent(editor, e);\n        }\n        if (ui.isVisible()) {\n          if (prevPos !== pos) {\n            ui.update(true);\n          } else if (hasResized) {\n            ui.updateMode();\n            ui.repositionPopups();\n          }\n        }\n      };\n      if (!toolbarPersist) {\n        editor.on('activate', ui.show);\n        editor.on('deactivate', ui.hide);\n      }\n      editor.on('SkinLoaded ResizeWindow', function () {\n        return ui.update(true);\n      });\n      editor.on('NodeChange keydown', function (e) {\n        global$f.requestAnimationFrame(function () {\n          return resizeContent(e);\n        });\n      });\n      editor.on('ScrollWindow', function () {\n        return ui.updateMode();\n      });\n      var elementLoad = unbindable();\n      elementLoad.set(capture(SugarElement.fromDom(editor.getBody()), 'load', resizeContent));\n      editor.on('remove', function () {\n        elementLoad.clear();\n      });\n    };\n    var render = function (editor, uiComponents, rawUiConfig, backstage, args) {\n      var mothership = uiComponents.mothership, uiMothership = uiComponents.uiMothership, outerContainer = uiComponents.outerContainer;\n      var floatContainer = Cell(null);\n      var targetElm = SugarElement.fromDom(args.targetNode);\n      var ui = InlineHeader(editor, targetElm, uiComponents, backstage, floatContainer);\n      var toolbarPersist = isToolbarPersist(editor);\n      inline(editor);\n      var render = function () {\n        if (floatContainer.get()) {\n          ui.show();\n          return;\n        }\n        floatContainer.set(OuterContainer.getHeader(outerContainer).getOrDie());\n        var uiContainer = getUiContainer(editor);\n        attachSystem(uiContainer, mothership);\n        attachSystem(uiContainer, uiMothership);\n        setToolbar(editor, uiComponents, rawUiConfig, backstage);\n        OuterContainer.setMenubar(outerContainer, identifyMenus(editor, rawUiConfig));\n        ui.show();\n        setupEvents(editor, targetElm, ui, toolbarPersist);\n        editor.nodeChanged();\n      };\n      editor.on('show', render);\n      editor.on('hide', ui.hide);\n      if (!toolbarPersist) {\n        editor.on('focus', render);\n        editor.on('blur', ui.hide);\n      }\n      editor.on('init', function () {\n        if (editor.hasFocus() || toolbarPersist) {\n          render();\n        }\n      });\n      setupReadonlyModeSwitch(editor, uiComponents);\n      var api = {\n        show: function () {\n          ui.show();\n        },\n        hide: function () {\n          ui.hide();\n        },\n        enable: function () {\n          broadcastReadonly(uiComponents, false);\n        },\n        disable: function () {\n          broadcastReadonly(uiComponents, true);\n        },\n        isDisabled: function () {\n          return Disabling.isDisabled(outerContainer);\n        }\n      };\n      return {\n        editorContainer: outerContainer.element.dom,\n        api: api\n      };\n    };\n\n    var Inline = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        render: render\n    });\n\n    var showContextToolbarEvent = 'contexttoolbar-show';\n    var hideContextToolbarEvent = 'contexttoolbar-hide';\n\n    var getFormApi = function (input) {\n      return {\n        hide: function () {\n          return emit(input, sandboxClose());\n        },\n        getValue: function () {\n          return Representing.getValue(input);\n        }\n      };\n    };\n    var runOnExecute = function (memInput, original) {\n      return run$1(internalToolbarButtonExecute, function (comp, se) {\n        var input = memInput.get(comp);\n        var formApi = getFormApi(input);\n        original.onAction(formApi, se.event.buttonApi);\n      });\n    };\n    var renderContextButton = function (memInput, button, extras) {\n      var _a = button.original; _a.primary; var rest = __rest(_a, ['primary']);\n      var bridged = getOrDie(createToolbarButton(__assign(__assign({}, rest), {\n        type: 'button',\n        onAction: noop\n      })));\n      return renderToolbarButtonWith(bridged, extras.backstage.shared.providers, [runOnExecute(memInput, button)]);\n    };\n    var renderContextToggleButton = function (memInput, button, extras) {\n      var _a = button.original; _a.primary; var rest = __rest(_a, ['primary']);\n      var bridged = getOrDie(createToggleButton(__assign(__assign({}, rest), {\n        type: 'togglebutton',\n        onAction: noop\n      })));\n      return renderToolbarToggleButtonWith(bridged, extras.backstage.shared.providers, [runOnExecute(memInput, button)]);\n    };\n    var generateOne = function (memInput, button, providersBackstage) {\n      var extras = { backstage: { shared: { providers: providersBackstage } } };\n      if (button.type === 'contextformtogglebutton') {\n        return renderContextToggleButton(memInput, button, extras);\n      } else {\n        return renderContextButton(memInput, button, extras);\n      }\n    };\n    var generate = function (memInput, buttons, providersBackstage) {\n      var mementos = map$2(buttons, function (button) {\n        return record(generateOne(memInput, button, providersBackstage));\n      });\n      var asSpecs = function () {\n        return map$2(mementos, function (mem) {\n          return mem.asSpec();\n        });\n      };\n      var findPrimary = function (compInSystem) {\n        return findMap(buttons, function (button, i) {\n          if (button.primary) {\n            return Optional.from(mementos[i]).bind(function (mem) {\n              return mem.getOpt(compInSystem);\n            }).filter(not(Disabling.isDisabled));\n          } else {\n            return Optional.none();\n          }\n        });\n      };\n      return {\n        asSpecs: asSpecs,\n        findPrimary: findPrimary\n      };\n    };\n\n    var buildInitGroups = function (ctx, providers) {\n      var inputAttributes = ctx.label.fold(function () {\n        return {};\n      }, function (label) {\n        return { 'aria-label': label };\n      });\n      var memInput = record(Input.sketch({\n        inputClasses: [\n          'tox-toolbar-textfield',\n          'tox-toolbar-nav-js'\n        ],\n        data: ctx.initValue(),\n        inputAttributes: inputAttributes,\n        selectOnFocus: true,\n        inputBehaviours: derive$1([Keying.config({\n            mode: 'special',\n            onEnter: function (input) {\n              return commands.findPrimary(input).map(function (primary) {\n                emitExecute(primary);\n                return true;\n              });\n            },\n            onLeft: function (comp, se) {\n              se.cut();\n              return Optional.none();\n            },\n            onRight: function (comp, se) {\n              se.cut();\n              return Optional.none();\n            }\n          })])\n      }));\n      var commands = generate(memInput, ctx.commands, providers);\n      return [\n        {\n          title: Optional.none(),\n          items: [memInput.asSpec()]\n        },\n        {\n          title: Optional.none(),\n          items: commands.asSpecs()\n        }\n      ];\n    };\n    var renderContextForm = function (toolbarType, ctx, providers) {\n      return renderToolbar({\n        type: toolbarType,\n        uid: generate$6('context-toolbar'),\n        initGroups: buildInitGroups(ctx, providers),\n        onEscape: Optional.none,\n        cyclicKeying: true,\n        providers: providers\n      });\n    };\n    var ContextForm = {\n      renderContextForm: renderContextForm,\n      buildInitGroups: buildInitGroups\n    };\n\n    var isVerticalOverlap = function (a, b, threshold) {\n      if (threshold === void 0) {\n        threshold = 0.01;\n      }\n      return b.bottom - a.y >= threshold && a.bottom - b.y >= threshold;\n    };\n    var getRangeRect = function (rng) {\n      var rect = rng.getBoundingClientRect();\n      if (rect.height <= 0 && rect.width <= 0) {\n        var leaf$1 = leaf(SugarElement.fromDom(rng.startContainer), rng.startOffset).element;\n        var elm = isText$1(leaf$1) ? parent(leaf$1) : Optional.some(leaf$1);\n        return elm.filter(isElement$2).map(function (e) {\n          return e.dom.getBoundingClientRect();\n        }).getOr(rect);\n      } else {\n        return rect;\n      }\n    };\n    var getSelectionBounds = function (editor) {\n      var rng = editor.selection.getRng();\n      var rect = getRangeRect(rng);\n      if (editor.inline) {\n        var scroll_1 = get$9();\n        return bounds(scroll_1.left + rect.left, scroll_1.top + rect.top, rect.width, rect.height);\n      } else {\n        var bodyPos = absolute$2(SugarElement.fromDom(editor.getBody()));\n        return bounds(bodyPos.x + rect.left, bodyPos.y + rect.top, rect.width, rect.height);\n      }\n    };\n    var getAnchorElementBounds = function (editor, lastElement) {\n      return lastElement.filter(inBody).map(absolute$2).getOrThunk(function () {\n        return getSelectionBounds(editor);\n      });\n    };\n    var getHorizontalBounds = function (contentAreaBox, viewportBounds, margin) {\n      var x = Math.max(contentAreaBox.x + margin, viewportBounds.x);\n      var right = Math.min(contentAreaBox.right - margin, viewportBounds.right);\n      return {\n        x: x,\n        width: right - x\n      };\n    };\n    var getVerticalBounds = function (editor, contentAreaBox, viewportBounds, isToolbarLocationTop, toolbarType, margin) {\n      var container = SugarElement.fromDom(editor.getContainer());\n      var header = descendant(container, '.tox-editor-header').getOr(container);\n      var headerBox = box$1(header);\n      var isToolbarBelowContentArea = headerBox.y >= contentAreaBox.bottom;\n      var isToolbarAbove = isToolbarLocationTop && !isToolbarBelowContentArea;\n      if (editor.inline && isToolbarAbove) {\n        return {\n          y: Math.max(headerBox.bottom + margin, viewportBounds.y),\n          bottom: viewportBounds.bottom\n        };\n      }\n      if (editor.inline && !isToolbarAbove) {\n        return {\n          y: viewportBounds.y,\n          bottom: Math.min(headerBox.y - margin, viewportBounds.bottom)\n        };\n      }\n      var containerBounds = toolbarType === 'line' ? box$1(container) : contentAreaBox;\n      if (isToolbarAbove) {\n        return {\n          y: Math.max(headerBox.bottom + margin, viewportBounds.y),\n          bottom: Math.min(containerBounds.bottom - margin, viewportBounds.bottom)\n        };\n      }\n      return {\n        y: Math.max(containerBounds.y + margin, viewportBounds.y),\n        bottom: Math.min(headerBox.y - margin, viewportBounds.bottom)\n      };\n    };\n    var getContextToolbarBounds = function (editor, sharedBackstage, toolbarType, margin) {\n      if (margin === void 0) {\n        margin = 0;\n      }\n      var viewportBounds = getBounds$3(window);\n      var contentAreaBox = box$1(SugarElement.fromDom(editor.getContentAreaContainer()));\n      var toolbarOrMenubarEnabled = isMenubarEnabled(editor) || isToolbarEnabled(editor) || isMultipleToolbars(editor);\n      var _a = getHorizontalBounds(contentAreaBox, viewportBounds, margin), x = _a.x, width = _a.width;\n      if (editor.inline && !toolbarOrMenubarEnabled) {\n        return bounds(x, viewportBounds.y, width, viewportBounds.height);\n      } else {\n        var isToolbarTop = sharedBackstage.header.isPositionedAtTop();\n        var _b = getVerticalBounds(editor, contentAreaBox, viewportBounds, isToolbarTop, toolbarType, margin), y = _b.y, bottom = _b.bottom;\n        return bounds(x, y, width, bottom - y);\n      }\n    };\n\n    var bubbleSize$1 = 12;\n    var bubbleAlignments$1 = {\n      valignCentre: [],\n      alignCentre: [],\n      alignLeft: ['tox-pop--align-left'],\n      alignRight: ['tox-pop--align-right'],\n      right: ['tox-pop--right'],\n      left: ['tox-pop--left'],\n      bottom: ['tox-pop--bottom'],\n      top: ['tox-pop--top'],\n      inset: ['tox-pop--inset']\n    };\n    var anchorOverrides = {\n      maxHeightFunction: expandable$1(),\n      maxWidthFunction: expandable()\n    };\n    var isEntireElementSelected = function (editor, elem) {\n      var rng = editor.selection.getRng();\n      var leaf$1 = leaf(SugarElement.fromDom(rng.startContainer), rng.startOffset);\n      return rng.startContainer === rng.endContainer && rng.startOffset === rng.endOffset - 1 && eq(leaf$1.element, elem);\n    };\n    var preservePosition = function (elem, position, f) {\n      var currentPosition = getRaw(elem, 'position');\n      set$7(elem, 'position', position);\n      var result = f(elem);\n      currentPosition.each(function (pos) {\n        return set$7(elem, 'position', pos);\n      });\n      return result;\n    };\n    var shouldUseInsetLayouts = function (position) {\n      return position === 'node';\n    };\n    var determineInsetLayout = function (editor, contextbar, elem, data, bounds) {\n      var selectionBounds = getSelectionBounds(editor);\n      var isSameAnchorElement = data.lastElement().exists(function (prev) {\n        return eq(elem, prev);\n      });\n      if (isEntireElementSelected(editor, elem)) {\n        return isSameAnchorElement ? preserve : north;\n      } else if (isSameAnchorElement) {\n        return preservePosition(contextbar, data.getMode(), function () {\n          var isOverlapping = isVerticalOverlap(selectionBounds, box$1(contextbar));\n          return isOverlapping && !data.isReposition() ? flip$2 : preserve;\n        });\n      } else {\n        var yBounds = data.getMode() === 'fixed' ? bounds.y + get$9().top : bounds.y;\n        var contextbarHeight = get$b(contextbar) + bubbleSize$1;\n        return yBounds + contextbarHeight <= selectionBounds.y ? north : south;\n      }\n    };\n    var getAnchorSpec$2 = function (editor, mobile, data, position) {\n      var smartInsetLayout = function (elem) {\n        return function (anchor, element, bubbles, placee, bounds) {\n          var layout = determineInsetLayout(editor, placee, elem, data, bounds);\n          var newAnchor = __assign(__assign({}, anchor), {\n            y: bounds.y,\n            height: bounds.height\n          });\n          return __assign(__assign({}, layout(newAnchor, element, bubbles, placee, bounds)), { alwaysFit: true });\n        };\n      };\n      var getInsetLayouts = function (elem) {\n        return shouldUseInsetLayouts(position) ? [smartInsetLayout(elem)] : [];\n      };\n      var desktopAnchorSpecLayouts = {\n        onLtr: function (elem) {\n          return [\n            north$2,\n            south$2,\n            northeast$2,\n            southeast$2,\n            northwest$2,\n            southwest$2\n          ].concat(getInsetLayouts(elem));\n        },\n        onRtl: function (elem) {\n          return [\n            north$2,\n            south$2,\n            northwest$2,\n            southwest$2,\n            northeast$2,\n            southeast$2\n          ].concat(getInsetLayouts(elem));\n        }\n      };\n      var mobileAnchorSpecLayouts = {\n        onLtr: function (elem) {\n          return [\n            south$2,\n            southeast$2,\n            southwest$2,\n            northeast$2,\n            northwest$2,\n            north$2\n          ].concat(getInsetLayouts(elem));\n        },\n        onRtl: function (elem) {\n          return [\n            south$2,\n            southwest$2,\n            southeast$2,\n            northwest$2,\n            northeast$2,\n            north$2\n          ].concat(getInsetLayouts(elem));\n        }\n      };\n      return mobile ? mobileAnchorSpecLayouts : desktopAnchorSpecLayouts;\n    };\n    var getAnchorLayout = function (editor, position, isTouch, data) {\n      if (position === 'line') {\n        return {\n          bubble: nu$5(bubbleSize$1, 0, bubbleAlignments$1),\n          layouts: {\n            onLtr: function () {\n              return [east$2];\n            },\n            onRtl: function () {\n              return [west$2];\n            }\n          },\n          overrides: anchorOverrides\n        };\n      } else {\n        return {\n          bubble: nu$5(0, bubbleSize$1, bubbleAlignments$1, 1 / bubbleSize$1),\n          layouts: getAnchorSpec$2(editor, isTouch, data, position),\n          overrides: anchorOverrides\n        };\n      }\n    };\n\n    var matchTargetWith = function (elem, candidates) {\n      var ctxs = filter$2(candidates, function (toolbarApi) {\n        return toolbarApi.predicate(elem.dom);\n      });\n      var _a = partition$3(ctxs, function (t) {\n          return t.type === 'contexttoolbar';\n        }), pass = _a.pass, fail = _a.fail;\n      return {\n        contextToolbars: pass,\n        contextForms: fail\n      };\n    };\n    var filterByPositionForStartNode = function (toolbars) {\n      if (toolbars.length <= 1) {\n        return toolbars;\n      } else {\n        var doesPositionExist = function (value) {\n          return exists(toolbars, function (t) {\n            return t.position === value;\n          });\n        };\n        var filterToolbarsByPosition = function (value) {\n          return filter$2(toolbars, function (t) {\n            return t.position === value;\n          });\n        };\n        var hasSelectionToolbars = doesPositionExist('selection');\n        var hasNodeToolbars = doesPositionExist('node');\n        if (hasSelectionToolbars || hasNodeToolbars) {\n          if (hasNodeToolbars && hasSelectionToolbars) {\n            var nodeToolbars = filterToolbarsByPosition('node');\n            var selectionToolbars = map$2(filterToolbarsByPosition('selection'), function (t) {\n              return __assign(__assign({}, t), { position: 'node' });\n            });\n            return nodeToolbars.concat(selectionToolbars);\n          } else {\n            return hasSelectionToolbars ? filterToolbarsByPosition('selection') : filterToolbarsByPosition('node');\n          }\n        } else {\n          return filterToolbarsByPosition('line');\n        }\n      }\n    };\n    var filterByPositionForAncestorNode = function (toolbars) {\n      if (toolbars.length <= 1) {\n        return toolbars;\n      } else {\n        var findPosition_1 = function (value) {\n          return find$5(toolbars, function (t) {\n            return t.position === value;\n          });\n        };\n        var basePosition = findPosition_1('selection').orThunk(function () {\n          return findPosition_1('node');\n        }).orThunk(function () {\n          return findPosition_1('line');\n        }).map(function (t) {\n          return t.position;\n        });\n        return basePosition.fold(function () {\n          return [];\n        }, function (pos) {\n          return filter$2(toolbars, function (t) {\n            return t.position === pos;\n          });\n        });\n      }\n    };\n    var matchStartNode = function (elem, nodeCandidates, editorCandidates) {\n      var nodeMatches = matchTargetWith(elem, nodeCandidates);\n      if (nodeMatches.contextForms.length > 0) {\n        return Optional.some({\n          elem: elem,\n          toolbars: [nodeMatches.contextForms[0]]\n        });\n      } else {\n        var editorMatches = matchTargetWith(elem, editorCandidates);\n        if (editorMatches.contextForms.length > 0) {\n          return Optional.some({\n            elem: elem,\n            toolbars: [editorMatches.contextForms[0]]\n          });\n        } else if (nodeMatches.contextToolbars.length > 0 || editorMatches.contextToolbars.length > 0) {\n          var toolbars = filterByPositionForStartNode(nodeMatches.contextToolbars.concat(editorMatches.contextToolbars));\n          return Optional.some({\n            elem: elem,\n            toolbars: toolbars\n          });\n        } else {\n          return Optional.none();\n        }\n      }\n    };\n    var matchAncestor = function (isRoot, startNode, scopes) {\n      if (isRoot(startNode)) {\n        return Optional.none();\n      } else {\n        return ancestor$2(startNode, function (ancestorElem) {\n          if (isElement$2(ancestorElem)) {\n            var _a = matchTargetWith(ancestorElem, scopes.inNodeScope), contextToolbars = _a.contextToolbars, contextForms = _a.contextForms;\n            var toolbars = contextForms.length > 0 ? contextForms : filterByPositionForAncestorNode(contextToolbars);\n            return toolbars.length > 0 ? Optional.some({\n              elem: ancestorElem,\n              toolbars: toolbars\n            }) : Optional.none();\n          } else {\n            return Optional.none();\n          }\n        }, isRoot);\n      }\n    };\n    var lookup$1 = function (scopes, editor) {\n      var rootElem = SugarElement.fromDom(editor.getBody());\n      var isRoot = function (elem) {\n        return eq(elem, rootElem);\n      };\n      var isOutsideRoot = function (startNode) {\n        return !isRoot(startNode) && !contains(rootElem, startNode);\n      };\n      var startNode = SugarElement.fromDom(editor.selection.getNode());\n      if (isOutsideRoot(startNode)) {\n        return Optional.none();\n      }\n      return matchStartNode(startNode, scopes.inNodeScope, scopes.inEditorScope).orThunk(function () {\n        return matchAncestor(isRoot, startNode, scopes);\n      });\n    };\n\n    var categorise = function (contextToolbars, navigate) {\n      var forms = {};\n      var inNodeScope = [];\n      var inEditorScope = [];\n      var formNavigators = {};\n      var lookupTable = {};\n      var registerForm = function (key, toolbarSpec) {\n        var contextForm = getOrDie(createContextForm(toolbarSpec));\n        forms[key] = contextForm;\n        contextForm.launch.map(function (launch) {\n          formNavigators['form:' + key + ''] = __assign(__assign({}, toolbarSpec.launch), {\n            type: launch.type === 'contextformtogglebutton' ? 'togglebutton' : 'button',\n            onAction: function () {\n              navigate(contextForm);\n            }\n          });\n        });\n        if (contextForm.scope === 'editor') {\n          inEditorScope.push(contextForm);\n        } else {\n          inNodeScope.push(contextForm);\n        }\n        lookupTable[key] = contextForm;\n      };\n      var registerToolbar = function (key, toolbarSpec) {\n        createContextToolbar(toolbarSpec).each(function (contextToolbar) {\n          if (toolbarSpec.scope === 'editor') {\n            inEditorScope.push(contextToolbar);\n          } else {\n            inNodeScope.push(contextToolbar);\n          }\n          lookupTable[key] = contextToolbar;\n        });\n      };\n      var keys$1 = keys(contextToolbars);\n      each$1(keys$1, function (key) {\n        var toolbarApi = contextToolbars[key];\n        if (toolbarApi.type === 'contextform') {\n          registerForm(key, toolbarApi);\n        } else if (toolbarApi.type === 'contexttoolbar') {\n          registerToolbar(key, toolbarApi);\n        }\n      });\n      return {\n        forms: forms,\n        inNodeScope: inNodeScope,\n        inEditorScope: inEditorScope,\n        lookupTable: lookupTable,\n        formNavigators: formNavigators\n      };\n    };\n\n    var forwardSlideEvent = generate$6('forward-slide');\n    var backSlideEvent = generate$6('backward-slide');\n    var changeSlideEvent = generate$6('change-slide-event');\n    var resizingClass = 'tox-pop--resizing';\n    var renderContextToolbar = function (spec) {\n      var stack = Cell([]);\n      return InlineView.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-pop']\n        },\n        fireDismissalEventInstead: { event: 'doNotDismissYet' },\n        onShow: function (comp) {\n          stack.set([]);\n          InlineView.getContent(comp).each(function (c) {\n            remove$6(c.element, 'visibility');\n          });\n          remove$2(comp.element, resizingClass);\n          remove$6(comp.element, 'width');\n        },\n        inlineBehaviours: derive$1([\n          config('context-toolbar-events', [\n            runOnSource(transitionend(), function (comp, se) {\n              if (se.event.raw.propertyName === 'width') {\n                remove$2(comp.element, resizingClass);\n                remove$6(comp.element, 'width');\n              }\n            }),\n            run$1(changeSlideEvent, function (comp, se) {\n              var elem = comp.element;\n              remove$6(elem, 'width');\n              var currentWidth = get$a(elem);\n              InlineView.setContent(comp, se.event.contents);\n              add$2(elem, resizingClass);\n              var newWidth = get$a(elem);\n              set$7(elem, 'width', currentWidth + 'px');\n              InlineView.getContent(comp).each(function (newContents) {\n                se.event.focus.bind(function (f) {\n                  focus$3(f);\n                  return search(elem);\n                }).orThunk(function () {\n                  Keying.focusIn(newContents);\n                  return active(getRootNode(elem));\n                });\n              });\n              global$f.setTimeout(function () {\n                set$7(comp.element, 'width', newWidth + 'px');\n              }, 0);\n            }),\n            run$1(forwardSlideEvent, function (comp, se) {\n              InlineView.getContent(comp).each(function (oldContents) {\n                stack.set(stack.get().concat([{\n                    bar: oldContents,\n                    focus: active(getRootNode(comp.element))\n                  }]));\n              });\n              emitWith(comp, changeSlideEvent, {\n                contents: se.event.forwardContents,\n                focus: Optional.none()\n              });\n            }),\n            run$1(backSlideEvent, function (comp, _se) {\n              last$2(stack.get()).each(function (last) {\n                stack.set(stack.get().slice(0, stack.get().length - 1));\n                emitWith(comp, changeSlideEvent, {\n                  contents: premade(last.bar),\n                  focus: last.focus\n                });\n              });\n            })\n          ]),\n          Keying.config({\n            mode: 'special',\n            onEscape: function (comp) {\n              return last$2(stack.get()).fold(function () {\n                return spec.onEscape();\n              }, function (_) {\n                emit(comp, backSlideEvent);\n                return Optional.some(true);\n              });\n            }\n          })\n        ]),\n        lazySink: function () {\n          return Result.value(spec.sink);\n        }\n      });\n    };\n\n    var transitionClass = 'tox-pop--transition';\n    var register$7 = function (editor, registryContextToolbars, sink, extras) {\n      var backstage = extras.backstage;\n      var sharedBackstage = backstage.shared;\n      var isTouch = detect$1().deviceType.isTouch;\n      var lastElement = value$1();\n      var lastTrigger = value$1();\n      var lastContextPosition = value$1();\n      var contextbar = build$1(renderContextToolbar({\n        sink: sink,\n        onEscape: function () {\n          editor.focus();\n          return Optional.some(true);\n        }\n      }));\n      var getBounds = function () {\n        var position = lastContextPosition.get().getOr('node');\n        var margin = shouldUseInsetLayouts(position) ? 1 : 0;\n        return getContextToolbarBounds(editor, sharedBackstage, position, margin);\n      };\n      var canLaunchToolbar = function () {\n        return !editor.removed && !(isTouch() && backstage.isContextMenuOpen());\n      };\n      var isSameLaunchElement = function (elem) {\n        return is$1(lift2(elem, lastElement.get(), eq), true);\n      };\n      var shouldContextToolbarHide = function () {\n        if (!canLaunchToolbar()) {\n          return true;\n        } else {\n          var contextToolbarBounds = getBounds();\n          var anchorBounds = is$1(lastContextPosition.get(), 'node') ? getAnchorElementBounds(editor, lastElement.get()) : getSelectionBounds(editor);\n          return contextToolbarBounds.height <= 0 || !isVerticalOverlap(anchorBounds, contextToolbarBounds);\n        }\n      };\n      var close = function () {\n        lastElement.clear();\n        lastTrigger.clear();\n        lastContextPosition.clear();\n        InlineView.hide(contextbar);\n      };\n      var hideOrRepositionIfNecessary = function () {\n        if (InlineView.isOpen(contextbar)) {\n          var contextBarEle = contextbar.element;\n          remove$6(contextBarEle, 'display');\n          if (shouldContextToolbarHide()) {\n            set$7(contextBarEle, 'display', 'none');\n          } else {\n            lastTrigger.set(0);\n            InlineView.reposition(contextbar);\n          }\n        }\n      };\n      var wrapInPopDialog = function (toolbarSpec) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-pop__dialog']\n          },\n          components: [toolbarSpec],\n          behaviours: derive$1([\n            Keying.config({ mode: 'acyclic' }),\n            config('pop-dialog-wrap-events', [\n              runOnAttached(function (comp) {\n                editor.shortcuts.add('ctrl+F9', 'focus statusbar', function () {\n                  return Keying.focusIn(comp);\n                });\n              }),\n              runOnDetached(function (_comp) {\n                editor.shortcuts.remove('ctrl+F9');\n              })\n            ])\n          ])\n        };\n      };\n      var getScopes = cached(function () {\n        return categorise(registryContextToolbars, function (toolbarApi) {\n          var alloySpec = buildToolbar([toolbarApi]);\n          emitWith(contextbar, forwardSlideEvent, { forwardContents: wrapInPopDialog(alloySpec) });\n        });\n      });\n      var buildContextToolbarGroups = function (allButtons, ctx) {\n        return identifyButtons(editor, {\n          buttons: allButtons,\n          toolbar: ctx.items,\n          allowToolbarGroups: false\n        }, extras, Optional.some(['form:']));\n      };\n      var buildContextFormGroups = function (ctx, providers) {\n        return ContextForm.buildInitGroups(ctx, providers);\n      };\n      var buildToolbar = function (toolbars) {\n        var buttons = editor.ui.registry.getAll().buttons;\n        var scopes = getScopes();\n        var allButtons = __assign(__assign({}, buttons), scopes.formNavigators);\n        var toolbarType = getToolbarMode(editor) === ToolbarMode.scrolling ? ToolbarMode.scrolling : ToolbarMode.default;\n        var initGroups = flatten(map$2(toolbars, function (ctx) {\n          return ctx.type === 'contexttoolbar' ? buildContextToolbarGroups(allButtons, ctx) : buildContextFormGroups(ctx, sharedBackstage.providers);\n        }));\n        return renderToolbar({\n          type: toolbarType,\n          uid: generate$6('context-toolbar'),\n          initGroups: initGroups,\n          onEscape: Optional.none,\n          cyclicKeying: true,\n          providers: sharedBackstage.providers\n        });\n      };\n      var getAnchor = function (position, element) {\n        var anchorage = position === 'node' ? sharedBackstage.anchors.node(element) : sharedBackstage.anchors.cursor();\n        var anchorLayout = getAnchorLayout(editor, position, isTouch(), {\n          lastElement: lastElement.get,\n          isReposition: function () {\n            return is$1(lastTrigger.get(), 0);\n          },\n          getMode: function () {\n            return Positioning.getMode(sink);\n          }\n        });\n        return deepMerge(anchorage, anchorLayout);\n      };\n      var launchContext = function (toolbarApi, elem) {\n        launchContextToolbar.cancel();\n        if (!canLaunchToolbar()) {\n          return;\n        }\n        var toolbarSpec = buildToolbar(toolbarApi);\n        var position = toolbarApi[0].position;\n        var anchor = getAnchor(position, elem);\n        lastContextPosition.set(position);\n        lastTrigger.set(1);\n        var contextBarEle = contextbar.element;\n        remove$6(contextBarEle, 'display');\n        if (!isSameLaunchElement(elem)) {\n          remove$2(contextBarEle, transitionClass);\n          Positioning.reset(sink, contextbar);\n        }\n        InlineView.showWithinBounds(contextbar, wrapInPopDialog(toolbarSpec), {\n          anchor: anchor,\n          transition: {\n            classes: [transitionClass],\n            mode: 'placement'\n          }\n        }, function () {\n          return Optional.some(getBounds());\n        });\n        elem.fold(lastElement.clear, lastElement.set);\n        if (shouldContextToolbarHide()) {\n          set$7(contextBarEle, 'display', 'none');\n        }\n      };\n      var launchContextToolbar = last(function () {\n        if (!editor.hasFocus() || editor.removed) {\n          return;\n        }\n        if (has(contextbar.element, transitionClass)) {\n          launchContextToolbar.throttle();\n        } else {\n          var scopes = getScopes();\n          lookup$1(scopes, editor).fold(close, function (info) {\n            launchContext(info.toolbars, Optional.some(info.elem));\n          });\n        }\n      }, 17);\n      editor.on('init', function () {\n        editor.on('remove', close);\n        editor.on('ScrollContent ScrollWindow ObjectResized ResizeEditor longpress', hideOrRepositionIfNecessary);\n        editor.on('click keyup focus SetContent', launchContextToolbar.throttle);\n        editor.on(hideContextToolbarEvent, close);\n        editor.on(showContextToolbarEvent, function (e) {\n          var scopes = getScopes();\n          get$e(scopes.lookupTable, e.toolbarKey).each(function (ctx) {\n            launchContext([ctx], someIf(e.target !== editor, e.target));\n            InlineView.getContent(contextbar).each(Keying.focusIn);\n          });\n        });\n        editor.on('focusout', function (_e) {\n          global$f.setEditorTimeout(editor, function () {\n            if (search(sink.element).isNone() && search(contextbar.element).isNone()) {\n              close();\n            }\n          }, 0);\n        });\n        editor.on('SwitchMode', function () {\n          if (editor.mode.isReadOnly()) {\n            close();\n          }\n        });\n        editor.on('AfterProgressState', function (event) {\n          if (event.state) {\n            close();\n          } else if (editor.hasFocus()) {\n            launchContextToolbar.throttle();\n          }\n        });\n        editor.on('NodeChange', function (_e) {\n          search(contextbar.element).fold(launchContextToolbar.throttle, noop);\n        });\n      });\n    };\n\n    var register$6 = function (editor) {\n      var alignToolbarButtons = [\n        {\n          name: 'alignleft',\n          text: 'Align left',\n          cmd: 'JustifyLeft',\n          icon: 'align-left'\n        },\n        {\n          name: 'aligncenter',\n          text: 'Align center',\n          cmd: 'JustifyCenter',\n          icon: 'align-center'\n        },\n        {\n          name: 'alignright',\n          text: 'Align right',\n          cmd: 'JustifyRight',\n          icon: 'align-right'\n        },\n        {\n          name: 'alignjustify',\n          text: 'Justify',\n          cmd: 'JustifyFull',\n          icon: 'align-justify'\n        }\n      ];\n      each$1(alignToolbarButtons, function (item) {\n        editor.ui.registry.addToggleButton(item.name, {\n          tooltip: item.text,\n          icon: item.icon,\n          onAction: onActionExecCommand(editor, item.cmd),\n          onSetup: onSetupFormatToggle(editor, item.name)\n        });\n      });\n      editor.ui.registry.addButton('alignnone', {\n        tooltip: 'No alignment',\n        icon: 'align-none',\n        onAction: onActionExecCommand(editor, 'JustifyNone')\n      });\n    };\n\n    var units = {\n      unsupportedLength: [\n        'em',\n        'ex',\n        'cap',\n        'ch',\n        'ic',\n        'rem',\n        'lh',\n        'rlh',\n        'vw',\n        'vh',\n        'vi',\n        'vb',\n        'vmin',\n        'vmax',\n        'cm',\n        'mm',\n        'Q',\n        'in',\n        'pc',\n        'pt',\n        'px'\n      ],\n      fixed: [\n        'px',\n        'pt'\n      ],\n      relative: ['%'],\n      empty: ['']\n    };\n    var pattern = function () {\n      var decimalDigits = '[0-9]+';\n      var signedInteger = '[+-]?' + decimalDigits;\n      var exponentPart = '[eE]' + signedInteger;\n      var dot = '\\\\.';\n      var opt = function (input) {\n        return '(?:' + input + ')?';\n      };\n      var unsignedDecimalLiteral = [\n        'Infinity',\n        decimalDigits + dot + opt(decimalDigits) + opt(exponentPart),\n        dot + decimalDigits + opt(exponentPart),\n        decimalDigits + opt(exponentPart)\n      ].join('|');\n      var float = '[+-]?(?:' + unsignedDecimalLiteral + ')';\n      return new RegExp('^(' + float + ')(.*)$');\n    }();\n    var isUnit = function (unit, accepted) {\n      return exists(accepted, function (acc) {\n        return exists(units[acc], function (check) {\n          return unit === check;\n        });\n      });\n    };\n    var parse = function (input, accepted) {\n      var match = Optional.from(pattern.exec(input));\n      return match.bind(function (array) {\n        var value = Number(array[1]);\n        var unitRaw = array[2];\n        if (isUnit(unitRaw, accepted)) {\n          return Optional.some({\n            value: value,\n            unit: unitRaw\n          });\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var normalise = function (input, accepted) {\n      return parse(input, accepted).map(function (_a) {\n        var value = _a.value, unit = _a.unit;\n        return value + unit;\n      });\n    };\n\n    var registerController = function (editor, spec) {\n      var getMenuItems = function () {\n        var options = spec.getOptions(editor);\n        var initial = spec.getCurrent(editor).map(spec.hash);\n        var current = value$1();\n        return map$2(options, function (value) {\n          return {\n            type: 'togglemenuitem',\n            text: spec.display(value),\n            onSetup: function (api) {\n              var setActive = function (active) {\n                if (active) {\n                  current.on(function (oldApi) {\n                    return oldApi.setActive(false);\n                  });\n                  current.set(api);\n                }\n                api.setActive(active);\n              };\n              setActive(is$1(initial, spec.hash(value)));\n              var unbindWatcher = spec.watcher(editor, value, setActive);\n              return function () {\n                current.clear();\n                unbindWatcher();\n              };\n            },\n            onAction: function () {\n              return spec.setCurrent(editor, value);\n            }\n          };\n        });\n      };\n      editor.ui.registry.addMenuButton(spec.name, {\n        tooltip: spec.text,\n        icon: spec.icon,\n        fetch: function (callback) {\n          return callback(getMenuItems());\n        },\n        onSetup: spec.onToolbarSetup\n      });\n      editor.ui.registry.addNestedMenuItem(spec.name, {\n        type: 'nestedmenuitem',\n        text: spec.text,\n        getSubmenuItems: getMenuItems,\n        onSetup: spec.onMenuSetup\n      });\n    };\n    var lineHeightSpec = {\n      name: 'lineheight',\n      text: 'Line height',\n      icon: 'line-height',\n      getOptions: getLineHeightFormats,\n      hash: function (input) {\n        return normalise(input, [\n          'fixed',\n          'relative',\n          'empty'\n        ]).getOr(input);\n      },\n      display: identity$1,\n      watcher: function (editor, value, callback) {\n        return editor.formatter.formatChanged('lineheight', callback, false, { value: value }).unbind;\n      },\n      getCurrent: function (editor) {\n        return Optional.from(editor.queryCommandValue('LineHeight'));\n      },\n      setCurrent: function (editor, value) {\n        return editor.execCommand('LineHeight', false, value);\n      }\n    };\n    var languageSpec = function (editor) {\n      var settingsOpt = Optional.from(getContentLanguages(editor));\n      return settingsOpt.map(function (settings) {\n        return {\n          name: 'language',\n          text: 'Language',\n          icon: 'language',\n          getOptions: constant$1(settings),\n          hash: function (input) {\n            return isUndefined(input.customCode) ? input.code : input.code + '/' + input.customCode;\n          },\n          display: function (input) {\n            return input.title;\n          },\n          watcher: function (editor, value, callback) {\n            return editor.formatter.formatChanged('lang', callback, false, {\n              value: value.code,\n              customValue: value.customCode\n            }).unbind;\n          },\n          getCurrent: function (editor) {\n            var node = SugarElement.fromDom(editor.selection.getNode());\n            return closest$4(node, function (n) {\n              return Optional.some(n).filter(isElement$2).bind(function (ele) {\n                var codeOpt = getOpt(ele, 'lang');\n                return codeOpt.map(function (code) {\n                  var customCode = getOpt(ele, 'data-mce-lang').getOrUndefined();\n                  return {\n                    code: code,\n                    customCode: customCode,\n                    title: ''\n                  };\n                });\n              });\n            });\n          },\n          setCurrent: function (editor, lang) {\n            return editor.execCommand('Lang', false, lang);\n          },\n          onToolbarSetup: function (api) {\n            var unbinder = unbindable();\n            api.setActive(editor.formatter.match('lang', {}, undefined, true));\n            unbinder.set(editor.formatter.formatChanged('lang', api.setActive, true));\n            return unbinder.clear;\n          }\n        };\n      });\n    };\n    var register$5 = function (editor) {\n      registerController(editor, lineHeightSpec);\n      languageSpec(editor).each(function (spec) {\n        return registerController(editor, spec);\n      });\n    };\n\n    var register$4 = function (editor, backstage) {\n      alignSelectMenu(editor, backstage);\n      fontSelectMenu(editor, backstage);\n      styleSelectMenu(editor, backstage);\n      formatSelectMenu(editor, backstage);\n      fontsizeSelectMenu(editor, backstage);\n    };\n\n    var onSetupOutdentState = function (editor) {\n      return onSetupEvent(editor, 'NodeChange', function (api) {\n        api.setDisabled(!editor.queryCommandState('outdent'));\n      });\n    };\n    var registerButtons$2 = function (editor) {\n      editor.ui.registry.addButton('outdent', {\n        tooltip: 'Decrease indent',\n        icon: 'outdent',\n        onSetup: onSetupOutdentState(editor),\n        onAction: onActionExecCommand(editor, 'outdent')\n      });\n      editor.ui.registry.addButton('indent', {\n        tooltip: 'Increase indent',\n        icon: 'indent',\n        onAction: onActionExecCommand(editor, 'indent')\n      });\n    };\n    var register$3 = function (editor) {\n      registerButtons$2(editor);\n    };\n\n    var onActionToggleFormat = function (editor, fmt) {\n      return function () {\n        editor.execCommand('mceToggleFormat', false, fmt);\n      };\n    };\n    var registerFormatButtons = function (editor) {\n      global$5.each([\n        {\n          name: 'bold',\n          text: 'Bold',\n          icon: 'bold'\n        },\n        {\n          name: 'italic',\n          text: 'Italic',\n          icon: 'italic'\n        },\n        {\n          name: 'underline',\n          text: 'Underline',\n          icon: 'underline'\n        },\n        {\n          name: 'strikethrough',\n          text: 'Strikethrough',\n          icon: 'strike-through'\n        },\n        {\n          name: 'subscript',\n          text: 'Subscript',\n          icon: 'subscript'\n        },\n        {\n          name: 'superscript',\n          text: 'Superscript',\n          icon: 'superscript'\n        }\n      ], function (btn, _idx) {\n        editor.ui.registry.addToggleButton(btn.name, {\n          tooltip: btn.text,\n          icon: btn.icon,\n          onSetup: onSetupFormatToggle(editor, btn.name),\n          onAction: onActionToggleFormat(editor, btn.name)\n        });\n      });\n      for (var i = 1; i <= 6; i++) {\n        var name_1 = 'h' + i;\n        editor.ui.registry.addToggleButton(name_1, {\n          text: name_1.toUpperCase(),\n          tooltip: 'Heading ' + i,\n          onSetup: onSetupFormatToggle(editor, name_1),\n          onAction: onActionToggleFormat(editor, name_1)\n        });\n      }\n    };\n    var registerCommandButtons = function (editor) {\n      global$5.each([\n        {\n          name: 'cut',\n          text: 'Cut',\n          action: 'Cut',\n          icon: 'cut'\n        },\n        {\n          name: 'copy',\n          text: 'Copy',\n          action: 'Copy',\n          icon: 'copy'\n        },\n        {\n          name: 'paste',\n          text: 'Paste',\n          action: 'Paste',\n          icon: 'paste'\n        },\n        {\n          name: 'help',\n          text: 'Help',\n          action: 'mceHelp',\n          icon: 'help'\n        },\n        {\n          name: 'selectall',\n          text: 'Select all',\n          action: 'SelectAll',\n          icon: 'select-all'\n        },\n        {\n          name: 'newdocument',\n          text: 'New document',\n          action: 'mceNewDocument',\n          icon: 'new-document'\n        },\n        {\n          name: 'removeformat',\n          text: 'Clear formatting',\n          action: 'RemoveFormat',\n          icon: 'remove-formatting'\n        },\n        {\n          name: 'remove',\n          text: 'Remove',\n          action: 'Delete',\n          icon: 'remove'\n        }\n      ], function (btn) {\n        editor.ui.registry.addButton(btn.name, {\n          tooltip: btn.text,\n          icon: btn.icon,\n          onAction: onActionExecCommand(editor, btn.action)\n        });\n      });\n    };\n    var registerCommandToggleButtons = function (editor) {\n      global$5.each([{\n          name: 'blockquote',\n          text: 'Blockquote',\n          action: 'mceBlockQuote',\n          icon: 'quote'\n        }], function (btn) {\n        editor.ui.registry.addToggleButton(btn.name, {\n          tooltip: btn.text,\n          icon: btn.icon,\n          onAction: onActionExecCommand(editor, btn.action),\n          onSetup: onSetupFormatToggle(editor, btn.name)\n        });\n      });\n    };\n    var registerButtons$1 = function (editor) {\n      registerFormatButtons(editor);\n      registerCommandButtons(editor);\n      registerCommandToggleButtons(editor);\n    };\n    var registerMenuItems$2 = function (editor) {\n      global$5.each([\n        {\n          name: 'bold',\n          text: 'Bold',\n          action: 'Bold',\n          icon: 'bold',\n          shortcut: 'Meta+B'\n        },\n        {\n          name: 'italic',\n          text: 'Italic',\n          action: 'Italic',\n          icon: 'italic',\n          shortcut: 'Meta+I'\n        },\n        {\n          name: 'underline',\n          text: 'Underline',\n          action: 'Underline',\n          icon: 'underline',\n          shortcut: 'Meta+U'\n        },\n        {\n          name: 'strikethrough',\n          text: 'Strikethrough',\n          action: 'Strikethrough',\n          icon: 'strike-through',\n          shortcut: ''\n        },\n        {\n          name: 'subscript',\n          text: 'Subscript',\n          action: 'Subscript',\n          icon: 'subscript',\n          shortcut: ''\n        },\n        {\n          name: 'superscript',\n          text: 'Superscript',\n          action: 'Superscript',\n          icon: 'superscript',\n          shortcut: ''\n        },\n        {\n          name: 'removeformat',\n          text: 'Clear formatting',\n          action: 'RemoveFormat',\n          icon: 'remove-formatting',\n          shortcut: ''\n        },\n        {\n          name: 'newdocument',\n          text: 'New document',\n          action: 'mceNewDocument',\n          icon: 'new-document',\n          shortcut: ''\n        },\n        {\n          name: 'cut',\n          text: 'Cut',\n          action: 'Cut',\n          icon: 'cut',\n          shortcut: 'Meta+X'\n        },\n        {\n          name: 'copy',\n          text: 'Copy',\n          action: 'Copy',\n          icon: 'copy',\n          shortcut: 'Meta+C'\n        },\n        {\n          name: 'paste',\n          text: 'Paste',\n          action: 'Paste',\n          icon: 'paste',\n          shortcut: 'Meta+V'\n        },\n        {\n          name: 'selectall',\n          text: 'Select all',\n          action: 'SelectAll',\n          icon: 'select-all',\n          shortcut: 'Meta+A'\n        }\n      ], function (btn) {\n        editor.ui.registry.addMenuItem(btn.name, {\n          text: btn.text,\n          icon: btn.icon,\n          shortcut: btn.shortcut,\n          onAction: onActionExecCommand(editor, btn.action)\n        });\n      });\n      editor.ui.registry.addMenuItem('codeformat', {\n        text: 'Code',\n        icon: 'sourcecode',\n        onAction: onActionToggleFormat(editor, 'code')\n      });\n    };\n    var register$2 = function (editor) {\n      registerButtons$1(editor);\n      registerMenuItems$2(editor);\n    };\n\n    var onSetupUndoRedoState = function (editor, type) {\n      return onSetupEvent(editor, 'Undo Redo AddUndo TypingUndo ClearUndos SwitchMode', function (api) {\n        api.setDisabled(editor.mode.isReadOnly() || !editor.undoManager[type]());\n      });\n    };\n    var registerMenuItems$1 = function (editor) {\n      editor.ui.registry.addMenuItem('undo', {\n        text: 'Undo',\n        icon: 'undo',\n        shortcut: 'Meta+Z',\n        onSetup: onSetupUndoRedoState(editor, 'hasUndo'),\n        onAction: onActionExecCommand(editor, 'undo')\n      });\n      editor.ui.registry.addMenuItem('redo', {\n        text: 'Redo',\n        icon: 'redo',\n        shortcut: 'Meta+Y',\n        onSetup: onSetupUndoRedoState(editor, 'hasRedo'),\n        onAction: onActionExecCommand(editor, 'redo')\n      });\n    };\n    var registerButtons = function (editor) {\n      editor.ui.registry.addButton('undo', {\n        tooltip: 'Undo',\n        icon: 'undo',\n        disabled: true,\n        onSetup: onSetupUndoRedoState(editor, 'hasUndo'),\n        onAction: onActionExecCommand(editor, 'undo')\n      });\n      editor.ui.registry.addButton('redo', {\n        tooltip: 'Redo',\n        icon: 'redo',\n        disabled: true,\n        onSetup: onSetupUndoRedoState(editor, 'hasRedo'),\n        onAction: onActionExecCommand(editor, 'redo')\n      });\n    };\n    var register$1 = function (editor) {\n      registerMenuItems$1(editor);\n      registerButtons(editor);\n    };\n\n    var onSetupVisualAidState = function (editor) {\n      return onSetupEvent(editor, 'VisualAid', function (api) {\n        api.setActive(editor.hasVisual);\n      });\n    };\n    var registerMenuItems = function (editor) {\n      editor.ui.registry.addToggleMenuItem('visualaid', {\n        text: 'Visual aids',\n        onSetup: onSetupVisualAidState(editor),\n        onAction: onActionExecCommand(editor, 'mceToggleVisualAid')\n      });\n    };\n    var registerToolbarButton = function (editor) {\n      editor.ui.registry.addButton('visualaid', {\n        tooltip: 'Visual aids',\n        text: 'Visual aids',\n        onAction: onActionExecCommand(editor, 'mceToggleVisualAid')\n      });\n    };\n    var register = function (editor) {\n      registerToolbarButton(editor);\n      registerMenuItems(editor);\n    };\n\n    var setup$6 = function (editor, backstage) {\n      register$6(editor);\n      register$2(editor);\n      register$4(editor, backstage);\n      register$1(editor);\n      register$a(editor);\n      register(editor);\n      register$3(editor);\n      register$5(editor);\n    };\n\n    var nu = function (x, y) {\n      return {\n        type: 'makeshift',\n        x: x,\n        y: y\n      };\n    };\n    var transpose = function (pos, dx, dy) {\n      return nu(pos.x + dx, pos.y + dy);\n    };\n    var isTouchEvent = function (e) {\n      return e.type === 'longpress' || e.type.indexOf('touch') === 0;\n    };\n    var fromPageXY = function (e) {\n      if (isTouchEvent(e)) {\n        var touch = e.touches[0];\n        return nu(touch.pageX, touch.pageY);\n      } else {\n        return nu(e.pageX, e.pageY);\n      }\n    };\n    var fromClientXY = function (e) {\n      if (isTouchEvent(e)) {\n        var touch = e.touches[0];\n        return nu(touch.clientX, touch.clientY);\n      } else {\n        return nu(e.clientX, e.clientY);\n      }\n    };\n    var transposeContentAreaContainer = function (element, pos) {\n      var containerPos = global$b.DOM.getPos(element);\n      return transpose(pos, containerPos.x, containerPos.y);\n    };\n    var getPointAnchor = function (editor, e) {\n      if (e.type === 'contextmenu' || e.type === 'longpress') {\n        if (editor.inline) {\n          return fromPageXY(e);\n        } else {\n          return transposeContentAreaContainer(editor.getContentAreaContainer(), fromClientXY(e));\n        }\n      } else {\n        return getSelectionAnchor(editor);\n      }\n    };\n    var getSelectionAnchor = function (editor) {\n      return {\n        type: 'selection',\n        root: SugarElement.fromDom(editor.selection.getNode())\n      };\n    };\n    var getNodeAnchor = function (editor) {\n      return {\n        type: 'node',\n        node: Optional.some(SugarElement.fromDom(editor.selection.getNode())),\n        root: SugarElement.fromDom(editor.getBody())\n      };\n    };\n    var getAnchorSpec$1 = function (editor, e, anchorType) {\n      switch (anchorType) {\n      case 'node':\n        return getNodeAnchor(editor);\n      case 'point':\n        return getPointAnchor(editor, e);\n      case 'selection':\n        return getSelectionAnchor(editor);\n      }\n    };\n\n    var initAndShow$1 = function (editor, e, buildMenu, backstage, contextmenu, anchorType) {\n      var items = buildMenu();\n      var anchorSpec = getAnchorSpec$1(editor, e, anchorType);\n      build(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, false).map(function (menuData) {\n        e.preventDefault();\n        InlineView.showMenuAt(contextmenu, { anchor: anchorSpec }, {\n          menu: { markers: markers('normal') },\n          data: menuData\n        });\n      });\n    };\n\n    var layouts = {\n      onLtr: function () {\n        return [\n          south$2,\n          southeast$2,\n          southwest$2,\n          northeast$2,\n          northwest$2,\n          north$2,\n          north,\n          south,\n          northeast,\n          southeast,\n          northwest,\n          southwest\n        ];\n      },\n      onRtl: function () {\n        return [\n          south$2,\n          southwest$2,\n          southeast$2,\n          northwest$2,\n          northeast$2,\n          north$2,\n          north,\n          south,\n          northwest,\n          southwest,\n          northeast,\n          southeast\n        ];\n      }\n    };\n    var bubbleSize = 12;\n    var bubbleAlignments = {\n      valignCentre: [],\n      alignCentre: [],\n      alignLeft: ['tox-pop--align-left'],\n      alignRight: ['tox-pop--align-right'],\n      right: ['tox-pop--right'],\n      left: ['tox-pop--left'],\n      bottom: ['tox-pop--bottom'],\n      top: ['tox-pop--top']\n    };\n    var isTouchWithinSelection = function (editor, e) {\n      var selection = editor.selection;\n      if (selection.isCollapsed() || e.touches.length < 1) {\n        return false;\n      } else {\n        var touch_1 = e.touches[0];\n        var rng = selection.getRng();\n        var rngRectOpt = getFirstRect(editor.getWin(), SimSelection.domRange(rng));\n        return rngRectOpt.exists(function (rngRect) {\n          return rngRect.left <= touch_1.clientX && rngRect.right >= touch_1.clientX && rngRect.top <= touch_1.clientY && rngRect.bottom >= touch_1.clientY;\n        });\n      }\n    };\n    var setupiOSOverrides = function (editor) {\n      var originalSelection = editor.selection.getRng();\n      var selectionReset = function () {\n        global$f.setEditorTimeout(editor, function () {\n          editor.selection.setRng(originalSelection);\n        }, 10);\n        unbindEventListeners();\n      };\n      editor.once('touchend', selectionReset);\n      var preventMousedown = function (e) {\n        e.preventDefault();\n        e.stopImmediatePropagation();\n      };\n      editor.on('mousedown', preventMousedown, true);\n      var clearSelectionReset = function () {\n        return unbindEventListeners();\n      };\n      editor.once('longpresscancel', clearSelectionReset);\n      var unbindEventListeners = function () {\n        editor.off('touchend', selectionReset);\n        editor.off('longpresscancel', clearSelectionReset);\n        editor.off('mousedown', preventMousedown);\n      };\n    };\n    var getAnchorSpec = function (editor, e, anchorType) {\n      var anchorSpec = getAnchorSpec$1(editor, e, anchorType);\n      var bubbleYOffset = anchorType === 'point' ? bubbleSize : 0;\n      return __assign({\n        bubble: nu$5(0, bubbleYOffset, bubbleAlignments),\n        layouts: layouts,\n        overrides: {\n          maxWidthFunction: expandable(),\n          maxHeightFunction: expandable$1()\n        }\n      }, anchorSpec);\n    };\n    var show = function (editor, e, items, backstage, contextmenu, anchorType, highlightImmediately) {\n      var anchorSpec = getAnchorSpec(editor, e, anchorType);\n      build(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, true).map(function (menuData) {\n        e.preventDefault();\n        InlineView.showMenuWithinBounds(contextmenu, { anchor: anchorSpec }, {\n          menu: {\n            markers: markers('normal'),\n            highlightImmediately: highlightImmediately\n          },\n          data: menuData,\n          type: 'horizontal'\n        }, function () {\n          return Optional.some(getContextToolbarBounds(editor, backstage.shared, anchorType === 'node' ? 'node' : 'selection'));\n        });\n        editor.fire(hideContextToolbarEvent);\n      });\n    };\n    var initAndShow = function (editor, e, buildMenu, backstage, contextmenu, anchorType) {\n      var detection = detect$1();\n      var isiOS = detection.os.isiOS();\n      var isOSX = detection.os.isOSX();\n      var isAndroid = detection.os.isAndroid();\n      var isTouch = detection.deviceType.isTouch();\n      var shouldHighlightImmediately = function () {\n        return !(isAndroid || isiOS || isOSX && isTouch);\n      };\n      var open = function () {\n        var items = buildMenu();\n        show(editor, e, items, backstage, contextmenu, anchorType, shouldHighlightImmediately());\n      };\n      if ((isOSX || isiOS) && anchorType !== 'node') {\n        var openiOS_1 = function () {\n          setupiOSOverrides(editor);\n          open();\n        };\n        if (isTouchWithinSelection(editor, e)) {\n          openiOS_1();\n        } else {\n          editor.once('selectionchange', openiOS_1);\n          editor.once('touchend', function () {\n            return editor.off('selectionchange', openiOS_1);\n          });\n        }\n      } else {\n        open();\n      }\n    };\n\n    var patchPipeConfig = function (config) {\n      return typeof config === 'string' ? config.split(/[ ,]/) : config;\n    };\n    var shouldNeverUseNative = function (editor) {\n      return editor.getParam('contextmenu_never_use_native', false, 'boolean');\n    };\n    var getMenuItems = function (editor, name, defaultItems) {\n      var contextMenus = editor.ui.registry.getAll().contextMenus;\n      return Optional.from(editor.getParam(name)).map(patchPipeConfig).getOrThunk(function () {\n        return filter$2(patchPipeConfig(defaultItems), function (item) {\n          return has$2(contextMenus, item);\n        });\n      });\n    };\n    var isContextMenuDisabled = function (editor) {\n      return editor.getParam('contextmenu') === false;\n    };\n    var getContextMenu = function (editor) {\n      return getMenuItems(editor, 'contextmenu', 'link linkchecker image imagetools table spellchecker configurepermanentpen');\n    };\n    var getAvoidOverlapSelector = function (editor) {\n      return editor.getParam('contextmenu_avoid_overlap', '', 'string');\n    };\n\n    var isSeparator = function (item) {\n      return isString(item) ? item === '|' : item.type === 'separator';\n    };\n    var separator = { type: 'separator' };\n    var makeContextItem = function (item) {\n      var commonMenuItem = function (item) {\n        return {\n          text: item.text,\n          icon: item.icon,\n          disabled: item.disabled,\n          shortcut: item.shortcut\n        };\n      };\n      if (isString(item)) {\n        return item;\n      } else {\n        switch (item.type) {\n        case 'separator':\n          return separator;\n        case 'submenu':\n          return __assign(__assign({ type: 'nestedmenuitem' }, commonMenuItem(item)), {\n            getSubmenuItems: function () {\n              var items = item.getSubmenuItems();\n              if (isString(items)) {\n                return items;\n              } else {\n                return map$2(items, makeContextItem);\n              }\n            }\n          });\n        default:\n          return __assign(__assign({ type: 'menuitem' }, commonMenuItem(item)), { onAction: noarg(item.onAction) });\n        }\n      }\n    };\n    var addContextMenuGroup = function (xs, groupItems) {\n      if (groupItems.length === 0) {\n        return xs;\n      }\n      var lastMenuItem = last$2(xs).filter(function (item) {\n        return !isSeparator(item);\n      });\n      var before = lastMenuItem.fold(function () {\n        return [];\n      }, function (_) {\n        return [separator];\n      });\n      return xs.concat(before).concat(groupItems).concat([separator]);\n    };\n    var generateContextMenu = function (contextMenus, menuConfig, selectedElement) {\n      var sections = foldl(menuConfig, function (acc, name) {\n        return get$e(contextMenus, name.toLowerCase()).map(function (menu) {\n          var items = menu.update(selectedElement);\n          if (isString(items)) {\n            return addContextMenuGroup(acc, items.split(' '));\n          } else if (items.length > 0) {\n            var allItems = map$2(items, makeContextItem);\n            return addContextMenuGroup(acc, allItems);\n          } else {\n            return acc;\n          }\n        }).getOrThunk(function () {\n          return acc.concat([name]);\n        });\n      }, []);\n      if (sections.length > 0 && isSeparator(sections[sections.length - 1])) {\n        sections.pop();\n      }\n      return sections;\n    };\n    var isNativeOverrideKeyEvent = function (editor, e) {\n      return e.ctrlKey && !shouldNeverUseNative(editor);\n    };\n    var isTriggeredByKeyboard = function (editor, e) {\n      return e.type !== 'longpress' && (e.button !== 2 || e.target === editor.getBody() && e.pointerType === '');\n    };\n    var getSelectedElement = function (editor, e) {\n      return isTriggeredByKeyboard(editor, e) ? editor.selection.getStart(true) : e.target;\n    };\n    var getAnchorType = function (editor, e) {\n      var selector = getAvoidOverlapSelector(editor);\n      var anchorType = isTriggeredByKeyboard(editor, e) ? 'selection' : 'point';\n      if (isNotEmpty(selector)) {\n        var target = getSelectedElement(editor, e);\n        var selectorExists = closest(SugarElement.fromDom(target), selector);\n        return selectorExists ? 'node' : anchorType;\n      } else {\n        return anchorType;\n      }\n    };\n    var setup$5 = function (editor, lazySink, backstage) {\n      var detection = detect$1();\n      var isTouch = detection.deviceType.isTouch;\n      var contextmenu = build$1(InlineView.sketch({\n        dom: { tag: 'div' },\n        lazySink: lazySink,\n        onEscape: function () {\n          return editor.focus();\n        },\n        onShow: function () {\n          return backstage.setContextMenuState(true);\n        },\n        onHide: function () {\n          return backstage.setContextMenuState(false);\n        },\n        fireDismissalEventInstead: {},\n        inlineBehaviours: derive$1([config('dismissContextMenu', [run$1(dismissRequested(), function (comp, _se) {\n              Sandboxing.close(comp);\n              editor.focus();\n            })])])\n      }));\n      var hideContextMenu = function (_e) {\n        return InlineView.hide(contextmenu);\n      };\n      var showContextMenu = function (e) {\n        if (shouldNeverUseNative(editor)) {\n          e.preventDefault();\n        }\n        if (isNativeOverrideKeyEvent(editor, e) || isContextMenuDisabled(editor)) {\n          return;\n        }\n        var anchorType = getAnchorType(editor, e);\n        var buildMenu = function () {\n          var selectedElement = getSelectedElement(editor, e);\n          var registry = editor.ui.registry.getAll();\n          var menuConfig = getContextMenu(editor);\n          return generateContextMenu(registry.contextMenus, menuConfig, selectedElement);\n        };\n        var initAndShow$2 = isTouch() ? initAndShow : initAndShow$1;\n        initAndShow$2(editor, e, buildMenu, backstage, contextmenu, anchorType);\n      };\n      editor.on('init', function () {\n        var hideEvents = 'ResizeEditor ScrollContent ScrollWindow longpresscancel' + (isTouch() ? '' : ' ResizeWindow');\n        editor.on(hideEvents, hideContextMenu);\n        editor.on('longpress contextmenu', showContextMenu);\n      });\n    };\n\n    var adt = Adt.generate([\n      {\n        offset: [\n          'x',\n          'y'\n        ]\n      },\n      {\n        absolute: [\n          'x',\n          'y'\n        ]\n      },\n      {\n        fixed: [\n          'x',\n          'y'\n        ]\n      }\n    ]);\n    var subtract = function (change) {\n      return function (point) {\n        return point.translate(-change.left, -change.top);\n      };\n    };\n    var add = function (change) {\n      return function (point) {\n        return point.translate(change.left, change.top);\n      };\n    };\n    var transform = function (changes) {\n      return function (x, y) {\n        return foldl(changes, function (rest, f) {\n          return f(rest);\n        }, SugarPosition(x, y));\n      };\n    };\n    var asFixed = function (coord, scroll, origin) {\n      return coord.fold(transform([\n        add(origin),\n        subtract(scroll)\n      ]), transform([subtract(scroll)]), transform([]));\n    };\n    var asAbsolute = function (coord, scroll, origin) {\n      return coord.fold(transform([add(origin)]), transform([]), transform([add(scroll)]));\n    };\n    var asOffset = function (coord, scroll, origin) {\n      return coord.fold(transform([]), transform([subtract(origin)]), transform([\n        add(scroll),\n        subtract(origin)\n      ]));\n    };\n    var withinRange = function (coord1, coord2, xRange, yRange, scroll, origin) {\n      var a1 = asAbsolute(coord1, scroll, origin);\n      var a2 = asAbsolute(coord2, scroll, origin);\n      return Math.abs(a1.left - a2.left) <= xRange && Math.abs(a1.top - a2.top) <= yRange;\n    };\n    var getDeltas = function (coord1, coord2, xRange, yRange, scroll, origin) {\n      var a1 = asAbsolute(coord1, scroll, origin);\n      var a2 = asAbsolute(coord2, scroll, origin);\n      var left = Math.abs(a1.left - a2.left);\n      var top = Math.abs(a1.top - a2.top);\n      return SugarPosition(left, top);\n    };\n    var toStyles = function (coord, scroll, origin) {\n      var stylesOpt = coord.fold(function (x, y) {\n        return {\n          position: Optional.some('absolute'),\n          left: Optional.some(x + 'px'),\n          top: Optional.some(y + 'px')\n        };\n      }, function (x, y) {\n        return {\n          position: Optional.some('absolute'),\n          left: Optional.some(x - origin.left + 'px'),\n          top: Optional.some(y - origin.top + 'px')\n        };\n      }, function (x, y) {\n        return {\n          position: Optional.some('fixed'),\n          left: Optional.some(x + 'px'),\n          top: Optional.some(y + 'px')\n        };\n      });\n      return __assign({\n        right: Optional.none(),\n        bottom: Optional.none()\n      }, stylesOpt);\n    };\n    var translate = function (coord, deltaX, deltaY) {\n      return coord.fold(function (x, y) {\n        return offset(x + deltaX, y + deltaY);\n      }, function (x, y) {\n        return absolute(x + deltaX, y + deltaY);\n      }, function (x, y) {\n        return fixed(x + deltaX, y + deltaY);\n      });\n    };\n    var absorb = function (partialCoord, originalCoord, scroll, origin) {\n      var absorbOne = function (stencil, nu) {\n        return function (optX, optY) {\n          var original = stencil(originalCoord, scroll, origin);\n          return nu(optX.getOr(original.left), optY.getOr(original.top));\n        };\n      };\n      return partialCoord.fold(absorbOne(asOffset, offset), absorbOne(asAbsolute, absolute), absorbOne(asFixed, fixed));\n    };\n    var offset = adt.offset;\n    var absolute = adt.absolute;\n    var fixed = adt.fixed;\n\n    var parseAttrToInt = function (element, name) {\n      var value = get$d(element, name);\n      return isUndefined(value) ? NaN : parseInt(value, 10);\n    };\n    var get = function (component, snapsInfo) {\n      var element = component.element;\n      var x = parseAttrToInt(element, snapsInfo.leftAttr);\n      var y = parseAttrToInt(element, snapsInfo.topAttr);\n      return isNaN(x) || isNaN(y) ? Optional.none() : Optional.some(SugarPosition(x, y));\n    };\n    var set = function (component, snapsInfo, pt) {\n      var element = component.element;\n      set$8(element, snapsInfo.leftAttr, pt.left + 'px');\n      set$8(element, snapsInfo.topAttr, pt.top + 'px');\n    };\n    var clear = function (component, snapsInfo) {\n      var element = component.element;\n      remove$7(element, snapsInfo.leftAttr);\n      remove$7(element, snapsInfo.topAttr);\n    };\n\n    var getCoords = function (component, snapInfo, coord, delta) {\n      return get(component, snapInfo).fold(function () {\n        return coord;\n      }, function (fixed$1) {\n        return fixed(fixed$1.left + delta.left, fixed$1.top + delta.top);\n      });\n    };\n    var moveOrSnap = function (component, snapInfo, coord, delta, scroll, origin) {\n      var newCoord = getCoords(component, snapInfo, coord, delta);\n      var snap = snapInfo.mustSnap ? findClosestSnap(component, snapInfo, newCoord, scroll, origin) : findSnap(component, snapInfo, newCoord, scroll, origin);\n      var fixedCoord = asFixed(newCoord, scroll, origin);\n      set(component, snapInfo, fixedCoord);\n      return snap.fold(function () {\n        return {\n          coord: fixed(fixedCoord.left, fixedCoord.top),\n          extra: Optional.none()\n        };\n      }, function (spanned) {\n        return {\n          coord: spanned.output,\n          extra: spanned.extra\n        };\n      });\n    };\n    var stopDrag = function (component, snapInfo) {\n      clear(component, snapInfo);\n    };\n    var findMatchingSnap = function (snaps, newCoord, scroll, origin) {\n      return findMap(snaps, function (snap) {\n        var sensor = snap.sensor;\n        var inRange = withinRange(newCoord, sensor, snap.range.left, snap.range.top, scroll, origin);\n        return inRange ? Optional.some({\n          output: absorb(snap.output, newCoord, scroll, origin),\n          extra: snap.extra\n        }) : Optional.none();\n      });\n    };\n    var findClosestSnap = function (component, snapInfo, newCoord, scroll, origin) {\n      var snaps = snapInfo.getSnapPoints(component);\n      var matchSnap = findMatchingSnap(snaps, newCoord, scroll, origin);\n      return matchSnap.orThunk(function () {\n        var bestSnap = foldl(snaps, function (acc, snap) {\n          var sensor = snap.sensor;\n          var deltas = getDeltas(newCoord, sensor, snap.range.left, snap.range.top, scroll, origin);\n          return acc.deltas.fold(function () {\n            return {\n              deltas: Optional.some(deltas),\n              snap: Optional.some(snap)\n            };\n          }, function (bestDeltas) {\n            var currAvg = (deltas.left + deltas.top) / 2;\n            var bestAvg = (bestDeltas.left + bestDeltas.top) / 2;\n            if (currAvg <= bestAvg) {\n              return {\n                deltas: Optional.some(deltas),\n                snap: Optional.some(snap)\n              };\n            } else {\n              return acc;\n            }\n          });\n        }, {\n          deltas: Optional.none(),\n          snap: Optional.none()\n        });\n        return bestSnap.snap.map(function (snap) {\n          return {\n            output: absorb(snap.output, newCoord, scroll, origin),\n            extra: snap.extra\n          };\n        });\n      });\n    };\n    var findSnap = function (component, snapInfo, newCoord, scroll, origin) {\n      var snaps = snapInfo.getSnapPoints(component);\n      return findMatchingSnap(snaps, newCoord, scroll, origin);\n    };\n    var snapTo$1 = function (snap, scroll, origin) {\n      return {\n        coord: absorb(snap.output, snap.output, scroll, origin),\n        extra: snap.extra\n      };\n    };\n\n    var snapTo = function (component, dragConfig, _state, snap) {\n      var target = dragConfig.getTarget(component.element);\n      if (dragConfig.repositionTarget) {\n        var doc = owner$4(component.element);\n        var scroll_1 = get$9(doc);\n        var origin_1 = getOrigin(target);\n        var snapPin = snapTo$1(snap, scroll_1, origin_1);\n        var styles = toStyles(snapPin.coord, scroll_1, origin_1);\n        setOptions(target, styles);\n      }\n    };\n\n    var DraggingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        snapTo: snapTo\n    });\n\n    var initialAttribute = 'data-initial-z-index';\n    var resetZIndex = function (blocker) {\n      parent(blocker.element).filter(isElement$2).each(function (root) {\n        getOpt(root, initialAttribute).fold(function () {\n          return remove$6(root, 'z-index');\n        }, function (zIndex) {\n          return set$7(root, 'z-index', zIndex);\n        });\n        remove$7(root, initialAttribute);\n      });\n    };\n    var changeZIndex = function (blocker) {\n      parent(blocker.element).filter(isElement$2).each(function (root) {\n        getRaw(root, 'z-index').each(function (zindex) {\n          set$8(root, initialAttribute, zindex);\n        });\n        set$7(root, 'z-index', get$c(blocker.element, 'z-index'));\n      });\n    };\n    var instigate = function (anyComponent, blocker) {\n      anyComponent.getSystem().addToGui(blocker);\n      changeZIndex(blocker);\n    };\n    var discard = function (blocker) {\n      resetZIndex(blocker);\n      blocker.getSystem().removeFromGui(blocker);\n    };\n    var createComponent = function (component, blockerClass, blockerEvents) {\n      return component.getSystem().build(Container.sketch({\n        dom: {\n          styles: {\n            'left': '0px',\n            'top': '0px',\n            'width': '100%',\n            'height': '100%',\n            'position': 'fixed',\n            'z-index': '1000000000000000'\n          },\n          classes: [blockerClass]\n        },\n        events: blockerEvents\n      }));\n    };\n\n    var SnapSchema = optionObjOf('snaps', [\n      required$1('getSnapPoints'),\n      onHandler('onSensor'),\n      required$1('leftAttr'),\n      required$1('topAttr'),\n      defaulted('lazyViewport', win),\n      defaulted('mustSnap', false)\n    ]);\n\n    var schema$6 = [\n      defaulted('useFixed', never),\n      required$1('blockerClass'),\n      defaulted('getTarget', identity$1),\n      defaulted('onDrag', noop),\n      defaulted('repositionTarget', true),\n      defaulted('onDrop', noop),\n      defaultedFunction('getBounds', win),\n      SnapSchema\n    ];\n\n    var getCurrentCoord = function (target) {\n      return lift3(getRaw(target, 'left'), getRaw(target, 'top'), getRaw(target, 'position'), function (left, top, position) {\n        var nu = position === 'fixed' ? fixed : offset;\n        return nu(parseInt(left, 10), parseInt(top, 10));\n      }).getOrThunk(function () {\n        var location = absolute$3(target);\n        return absolute(location.left, location.top);\n      });\n    };\n    var clampCoords = function (component, coords, scroll, origin, startData) {\n      var bounds = startData.bounds;\n      var absoluteCoord = asAbsolute(coords, scroll, origin);\n      var newX = clamp$1(absoluteCoord.left, bounds.x, bounds.x + bounds.width - startData.width);\n      var newY = clamp$1(absoluteCoord.top, bounds.y, bounds.y + bounds.height - startData.height);\n      var newCoords = absolute(newX, newY);\n      return coords.fold(function () {\n        var offset$1 = asOffset(newCoords, scroll, origin);\n        return offset(offset$1.left, offset$1.top);\n      }, constant$1(newCoords), function () {\n        var fixed$1 = asFixed(newCoords, scroll, origin);\n        return fixed(fixed$1.left, fixed$1.top);\n      });\n    };\n    var calcNewCoord = function (component, optSnaps, currentCoord, scroll, origin, delta, startData) {\n      var newCoord = optSnaps.fold(function () {\n        var translated = translate(currentCoord, delta.left, delta.top);\n        var fixedCoord = asFixed(translated, scroll, origin);\n        return fixed(fixedCoord.left, fixedCoord.top);\n      }, function (snapInfo) {\n        var snapping = moveOrSnap(component, snapInfo, currentCoord, delta, scroll, origin);\n        snapping.extra.each(function (extra) {\n          snapInfo.onSensor(component, extra);\n        });\n        return snapping.coord;\n      });\n      return clampCoords(component, newCoord, scroll, origin, startData);\n    };\n    var dragBy = function (component, dragConfig, startData, delta) {\n      var target = dragConfig.getTarget(component.element);\n      if (dragConfig.repositionTarget) {\n        var doc = owner$4(component.element);\n        var scroll_1 = get$9(doc);\n        var origin_1 = getOrigin(target);\n        var currentCoord = getCurrentCoord(target);\n        var newCoord = calcNewCoord(component, dragConfig.snaps, currentCoord, scroll_1, origin_1, delta, startData);\n        var styles = toStyles(newCoord, scroll_1, origin_1);\n        setOptions(target, styles);\n      }\n      dragConfig.onDrag(component, target, delta);\n    };\n\n    var calcStartData = function (dragConfig, comp) {\n      return {\n        bounds: dragConfig.getBounds(),\n        height: getOuter$2(comp.element),\n        width: getOuter$1(comp.element)\n      };\n    };\n    var move = function (component, dragConfig, dragState, dragMode, event) {\n      var delta = dragState.update(dragMode, event);\n      var dragStartData = dragState.getStartData().getOrThunk(function () {\n        return calcStartData(dragConfig, component);\n      });\n      delta.each(function (dlt) {\n        dragBy(component, dragConfig, dragStartData, dlt);\n      });\n    };\n    var stop = function (component, blocker, dragConfig, dragState) {\n      blocker.each(discard);\n      dragConfig.snaps.each(function (snapInfo) {\n        stopDrag(component, snapInfo);\n      });\n      var target = dragConfig.getTarget(component.element);\n      dragState.reset();\n      dragConfig.onDrop(component, target);\n    };\n    var handlers = function (events) {\n      return function (dragConfig, dragState) {\n        var updateStartState = function (comp) {\n          dragState.setStartData(calcStartData(dragConfig, comp));\n        };\n        return derive$2(__spreadArray([run$1(windowScroll(), function (comp) {\n            dragState.getStartData().each(function () {\n              return updateStartState(comp);\n            });\n          })], events(dragConfig, dragState, updateStartState), true));\n      };\n    };\n\n    var init$2 = function (dragApi) {\n      return derive$2([\n        run$1(mousedown(), dragApi.forceDrop),\n        run$1(mouseup(), dragApi.drop),\n        run$1(mousemove(), function (comp, simulatedEvent) {\n          dragApi.move(simulatedEvent.event);\n        }),\n        run$1(mouseout(), dragApi.delayDrop)\n      ]);\n    };\n\n    var getData$1 = function (event) {\n      return Optional.from(SugarPosition(event.x, event.y));\n    };\n    var getDelta$1 = function (old, nu) {\n      return SugarPosition(nu.left - old.left, nu.top - old.top);\n    };\n\n    var MouseData = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getData: getData$1,\n        getDelta: getDelta$1\n    });\n\n    var events$2 = function (dragConfig, dragState, updateStartState) {\n      return [run$1(mousedown(), function (component, simulatedEvent) {\n          var raw = simulatedEvent.event.raw;\n          if (raw.button !== 0) {\n            return;\n          }\n          simulatedEvent.stop();\n          var stop$1 = function () {\n            return stop(component, Optional.some(blocker), dragConfig, dragState);\n          };\n          var delayDrop = DelayedFunction(stop$1, 200);\n          var dragApi = {\n            drop: stop$1,\n            delayDrop: delayDrop.schedule,\n            forceDrop: stop$1,\n            move: function (event) {\n              delayDrop.cancel();\n              move(component, dragConfig, dragState, MouseData, event);\n            }\n          };\n          var blocker = createComponent(component, dragConfig.blockerClass, init$2(dragApi));\n          var start = function () {\n            updateStartState(component);\n            instigate(component, blocker);\n          };\n          start();\n        })];\n    };\n    var schema$5 = __spreadArray(__spreadArray([], schema$6, true), [output$1('dragger', { handlers: handlers(events$2) })], false);\n\n    var init$1 = function (dragApi) {\n      return derive$2([\n        run$1(touchstart(), dragApi.forceDrop),\n        run$1(touchend(), dragApi.drop),\n        run$1(touchcancel(), dragApi.drop),\n        run$1(touchmove(), function (comp, simulatedEvent) {\n          dragApi.move(simulatedEvent.event);\n        })\n      ]);\n    };\n\n    var getDataFrom = function (touches) {\n      var touch = touches[0];\n      return Optional.some(SugarPosition(touch.clientX, touch.clientY));\n    };\n    var getData = function (event) {\n      var raw = event.raw;\n      var touches = raw.touches;\n      return touches.length === 1 ? getDataFrom(touches) : Optional.none();\n    };\n    var getDelta = function (old, nu) {\n      return SugarPosition(nu.left - old.left, nu.top - old.top);\n    };\n\n    var TouchData = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getData: getData,\n        getDelta: getDelta\n    });\n\n    var events$1 = function (dragConfig, dragState, updateStartState) {\n      var blockerSingleton = value$1();\n      var stopBlocking = function (component) {\n        stop(component, blockerSingleton.get(), dragConfig, dragState);\n        blockerSingleton.clear();\n      };\n      return [\n        run$1(touchstart(), function (component, simulatedEvent) {\n          simulatedEvent.stop();\n          var stop = function () {\n            return stopBlocking(component);\n          };\n          var dragApi = {\n            drop: stop,\n            delayDrop: noop,\n            forceDrop: stop,\n            move: function (event) {\n              move(component, dragConfig, dragState, TouchData, event);\n            }\n          };\n          var blocker = createComponent(component, dragConfig.blockerClass, init$1(dragApi));\n          blockerSingleton.set(blocker);\n          var start = function () {\n            updateStartState(component);\n            instigate(component, blocker);\n          };\n          start();\n        }),\n        run$1(touchmove(), function (component, simulatedEvent) {\n          simulatedEvent.stop();\n          move(component, dragConfig, dragState, TouchData, simulatedEvent.event);\n        }),\n        run$1(touchend(), function (component, simulatedEvent) {\n          simulatedEvent.stop();\n          stopBlocking(component);\n        }),\n        run$1(touchcancel(), stopBlocking)\n      ];\n    };\n    var schema$4 = __spreadArray(__spreadArray([], schema$6, true), [output$1('dragger', { handlers: handlers(events$1) })], false);\n\n    var events = function (dragConfig, dragState, updateStartState) {\n      return __spreadArray(__spreadArray([], events$2(dragConfig, dragState, updateStartState), true), events$1(dragConfig, dragState, updateStartState), true);\n    };\n    var schema$3 = __spreadArray(__spreadArray([], schema$6, true), [output$1('dragger', { handlers: handlers(events) })], false);\n\n    var mouse = schema$5;\n    var touch = schema$4;\n    var mouseOrTouch = schema$3;\n\n    var DraggingBranches = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        mouse: mouse,\n        touch: touch,\n        mouseOrTouch: mouseOrTouch\n    });\n\n    var init = function () {\n      var previous = Optional.none();\n      var startData = Optional.none();\n      var reset = function () {\n        previous = Optional.none();\n        startData = Optional.none();\n      };\n      var calculateDelta = function (mode, nu) {\n        var result = previous.map(function (old) {\n          return mode.getDelta(old, nu);\n        });\n        previous = Optional.some(nu);\n        return result;\n      };\n      var update = function (mode, dragEvent) {\n        return mode.getData(dragEvent).bind(function (nuData) {\n          return calculateDelta(mode, nuData);\n        });\n      };\n      var setStartData = function (data) {\n        startData = Optional.some(data);\n      };\n      var getStartData = function () {\n        return startData;\n      };\n      var readState = constant$1({});\n      return nu$8({\n        readState: readState,\n        reset: reset,\n        update: update,\n        getStartData: getStartData,\n        setStartData: setStartData\n      });\n    };\n\n    var DragState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init\n    });\n\n    var Dragging = createModes({\n      branchKey: 'mode',\n      branches: DraggingBranches,\n      name: 'dragging',\n      active: {\n        events: function (dragConfig, dragState) {\n          var dragger = dragConfig.dragger;\n          return dragger.handlers(dragConfig, dragState);\n        }\n      },\n      extra: {\n        snap: function (sConfig) {\n          return {\n            sensor: sConfig.sensor,\n            range: sConfig.range,\n            output: sConfig.output,\n            extra: Optional.from(sConfig.extra)\n          };\n        }\n      },\n      state: DragState,\n      apis: DraggingApis\n    });\n\n    var snapWidth = 40;\n    var snapOffset = snapWidth / 2;\n    var calcSnap = function (selectorOpt, td, x, y, width, height) {\n      return selectorOpt.fold(function () {\n        return Dragging.snap({\n          sensor: absolute(x - snapOffset, y - snapOffset),\n          range: SugarPosition(width, height),\n          output: absolute(Optional.some(x), Optional.some(y)),\n          extra: { td: td }\n        });\n      }, function (selectorHandle) {\n        var sensorLeft = x - snapOffset;\n        var sensorTop = y - snapOffset;\n        var sensorWidth = snapWidth;\n        var sensorHeight = snapWidth;\n        var rect = selectorHandle.element.dom.getBoundingClientRect();\n        return Dragging.snap({\n          sensor: absolute(sensorLeft, sensorTop),\n          range: SugarPosition(sensorWidth, sensorHeight),\n          output: absolute(Optional.some(x - rect.width / 2), Optional.some(y - rect.height / 2)),\n          extra: { td: td }\n        });\n      });\n    };\n    var getSnapsConfig = function (getSnapPoints, cell, onChange) {\n      var isSameCell = function (cellOpt, td) {\n        return cellOpt.exists(function (currentTd) {\n          return eq(currentTd, td);\n        });\n      };\n      return {\n        getSnapPoints: getSnapPoints,\n        leftAttr: 'data-drag-left',\n        topAttr: 'data-drag-top',\n        onSensor: function (component, extra) {\n          var td = extra.td;\n          if (!isSameCell(cell.get(), td)) {\n            cell.set(td);\n            onChange(td);\n          }\n        },\n        mustSnap: true\n      };\n    };\n    var createSelector = function (snaps) {\n      return record(Button.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-selector']\n        },\n        buttonBehaviours: derive$1([\n          Dragging.config({\n            mode: 'mouseOrTouch',\n            blockerClass: 'blocker',\n            snaps: snaps\n          }),\n          Unselecting.config({})\n        ]),\n        eventOrder: {\n          mousedown: [\n            'dragging',\n            'alloy.base.behaviour'\n          ],\n          touchstart: [\n            'dragging',\n            'alloy.base.behaviour'\n          ]\n        }\n      }));\n    };\n    var setup$4 = function (editor, sink) {\n      var tlTds = Cell([]);\n      var brTds = Cell([]);\n      var isVisible = Cell(false);\n      var startCell = value$1();\n      var finishCell = value$1();\n      var getTopLeftSnap = function (td) {\n        var box = absolute$2(td);\n        return calcSnap(memTopLeft.getOpt(sink), td, box.x, box.y, box.width, box.height);\n      };\n      var getTopLeftSnaps = function () {\n        return map$2(tlTds.get(), function (td) {\n          return getTopLeftSnap(td);\n        });\n      };\n      var getBottomRightSnap = function (td) {\n        var box = absolute$2(td);\n        return calcSnap(memBottomRight.getOpt(sink), td, box.right, box.bottom, box.width, box.height);\n      };\n      var getBottomRightSnaps = function () {\n        return map$2(brTds.get(), function (td) {\n          return getBottomRightSnap(td);\n        });\n      };\n      var topLeftSnaps = getSnapsConfig(getTopLeftSnaps, startCell, function (start) {\n        finishCell.get().each(function (finish) {\n          editor.fire('TableSelectorChange', {\n            start: start,\n            finish: finish\n          });\n        });\n      });\n      var bottomRightSnaps = getSnapsConfig(getBottomRightSnaps, finishCell, function (finish) {\n        startCell.get().each(function (start) {\n          editor.fire('TableSelectorChange', {\n            start: start,\n            finish: finish\n          });\n        });\n      });\n      var memTopLeft = createSelector(topLeftSnaps);\n      var memBottomRight = createSelector(bottomRightSnaps);\n      var topLeft = build$1(memTopLeft.asSpec());\n      var bottomRight = build$1(memBottomRight.asSpec());\n      var showOrHideHandle = function (selector, cell, isAbove, isBelow) {\n        var cellRect = cell.dom.getBoundingClientRect();\n        remove$6(selector.element, 'display');\n        var viewportHeight = defaultView(SugarElement.fromDom(editor.getBody())).dom.innerHeight;\n        var aboveViewport = isAbove(cellRect);\n        var belowViewport = isBelow(cellRect, viewportHeight);\n        if (aboveViewport || belowViewport) {\n          set$7(selector.element, 'display', 'none');\n        }\n      };\n      var snapTo = function (selector, cell, getSnapConfig, pos) {\n        var snap = getSnapConfig(cell);\n        Dragging.snapTo(selector, snap);\n        var isAbove = function (rect) {\n          return rect[pos] < 0;\n        };\n        var isBelow = function (rect, viewportHeight) {\n          return rect[pos] > viewportHeight;\n        };\n        showOrHideHandle(selector, cell, isAbove, isBelow);\n      };\n      var snapTopLeft = function (cell) {\n        return snapTo(topLeft, cell, getTopLeftSnap, 'top');\n      };\n      var snapLastTopLeft = function () {\n        return startCell.get().each(snapTopLeft);\n      };\n      var snapBottomRight = function (cell) {\n        return snapTo(bottomRight, cell, getBottomRightSnap, 'bottom');\n      };\n      var snapLastBottomRight = function () {\n        return finishCell.get().each(snapBottomRight);\n      };\n      if (detect$1().deviceType.isTouch()) {\n        editor.on('TableSelectionChange', function (e) {\n          if (!isVisible.get()) {\n            attach(sink, topLeft);\n            attach(sink, bottomRight);\n            isVisible.set(true);\n          }\n          startCell.set(e.start);\n          finishCell.set(e.finish);\n          e.otherCells.each(function (otherCells) {\n            tlTds.set(otherCells.upOrLeftCells);\n            brTds.set(otherCells.downOrRightCells);\n            snapTopLeft(e.start);\n            snapBottomRight(e.finish);\n          });\n        });\n        editor.on('ResizeEditor ResizeWindow ScrollContent', function () {\n          snapLastTopLeft();\n          snapLastBottomRight();\n        });\n        editor.on('TableSelectionClear', function () {\n          if (isVisible.get()) {\n            detach(topLeft);\n            detach(bottomRight);\n            isVisible.set(false);\n          }\n          startCell.clear();\n          finishCell.clear();\n        });\n      }\n    };\n\n    var isHidden = function (elm) {\n      if (elm.nodeType === 1) {\n        if (elm.nodeName === 'BR' || !!elm.getAttribute('data-mce-bogus')) {\n          return true;\n        }\n        if (elm.getAttribute('data-mce-type') === 'bookmark') {\n          return true;\n        }\n      }\n      return false;\n    };\n    var renderElementPath = function (editor, settings, providersBackstage) {\n      if (!settings.delimiter) {\n        settings.delimiter = '\\xBB';\n      }\n      var getDataPath = function (data) {\n        var parts = data || [];\n        var newPathElements = map$2(parts, function (part, index) {\n          return Button.sketch({\n            dom: {\n              tag: 'div',\n              classes: ['tox-statusbar__path-item'],\n              attributes: {\n                'role': 'button',\n                'data-index': index,\n                'tab-index': -1,\n                'aria-level': index + 1\n              },\n              innerHtml: part.name\n            },\n            action: function (_btn) {\n              editor.focus();\n              editor.selection.select(part.element);\n              editor.nodeChanged();\n            },\n            buttonBehaviours: derive$1([\n              DisablingConfigs.button(providersBackstage.isDisabled),\n              receivingConfig()\n            ])\n          });\n        });\n        var divider = {\n          dom: {\n            tag: 'div',\n            classes: ['tox-statusbar__path-divider'],\n            attributes: { 'aria-hidden': true },\n            innerHtml: ' ' + settings.delimiter + ' '\n          }\n        };\n        return foldl(newPathElements.slice(1), function (acc, element) {\n          var newAcc = acc;\n          newAcc.push(divider);\n          newAcc.push(element);\n          return newAcc;\n        }, [newPathElements[0]]);\n      };\n      var updatePath = function (parents) {\n        var newPath = [];\n        var i = parents.length;\n        while (i-- > 0) {\n          var parent_1 = parents[i];\n          if (parent_1.nodeType === 1 && !isHidden(parent_1)) {\n            var args = editor.fire('ResolveName', {\n              name: parent_1.nodeName.toLowerCase(),\n              target: parent_1\n            });\n            if (!args.isDefaultPrevented()) {\n              newPath.push({\n                name: args.name,\n                element: parent_1\n              });\n            }\n            if (args.isPropagationStopped()) {\n              break;\n            }\n          }\n        }\n        return newPath;\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-statusbar__path'],\n          attributes: { role: 'navigation' }\n        },\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'flow',\n            selector: 'div[role=button]'\n          }),\n          Disabling.config({ disabled: providersBackstage.isDisabled }),\n          receivingConfig(),\n          Tabstopping.config({}),\n          Replacing.config({}),\n          config('elementPathEvents', [runOnAttached(function (comp, _e) {\n              editor.shortcuts.add('alt+F11', 'focus statusbar elementpath', function () {\n                return Keying.focusIn(comp);\n              });\n              editor.on('NodeChange', function (e) {\n                var newPath = updatePath(e.parents);\n                if (newPath.length > 0) {\n                  Replacing.set(comp, getDataPath(newPath));\n                } else {\n                  Replacing.set(comp, []);\n                }\n              });\n            })])\n        ]),\n        components: []\n      };\n    };\n\n    var ResizeTypes;\n    (function (ResizeTypes) {\n      ResizeTypes[ResizeTypes['None'] = 0] = 'None';\n      ResizeTypes[ResizeTypes['Both'] = 1] = 'Both';\n      ResizeTypes[ResizeTypes['Vertical'] = 2] = 'Vertical';\n    }(ResizeTypes || (ResizeTypes = {})));\n    var getDimensions = function (editor, deltas, resizeType, originalHeight, originalWidth) {\n      var dimensions = {};\n      dimensions.height = calcCappedSize(originalHeight + deltas.top, getMinHeightSetting(editor), getMaxHeightSetting(editor));\n      if (resizeType === ResizeTypes.Both) {\n        dimensions.width = calcCappedSize(originalWidth + deltas.left, getMinWidthSetting(editor), getMaxWidthSetting(editor));\n      }\n      return dimensions;\n    };\n    var resize = function (editor, deltas, resizeType) {\n      var container = SugarElement.fromDom(editor.getContainer());\n      var dimensions = getDimensions(editor, deltas, resizeType, get$b(container), get$a(container));\n      each(dimensions, function (val, dim) {\n        return set$7(container, dim, numToPx(val));\n      });\n      fireResizeEditor(editor);\n    };\n\n    var getResizeType = function (editor) {\n      var fallback = !editor.hasPlugin('autoresize');\n      var resize = editor.getParam('resize', fallback);\n      if (resize === false) {\n        return ResizeTypes.None;\n      } else if (resize === 'both') {\n        return ResizeTypes.Both;\n      } else {\n        return ResizeTypes.Vertical;\n      }\n    };\n    var keyboardHandler = function (editor, resizeType, x, y) {\n      var scale = 20;\n      var delta = SugarPosition(x * scale, y * scale);\n      resize(editor, delta, resizeType);\n      return Optional.some(true);\n    };\n    var renderResizeHandler = function (editor, providersBackstage) {\n      var resizeType = getResizeType(editor);\n      if (resizeType === ResizeTypes.None) {\n        return Optional.none();\n      }\n      return Optional.some(render$3('resize-handle', {\n        tag: 'div',\n        classes: ['tox-statusbar__resize-handle'],\n        attributes: { title: providersBackstage.translate('Resize') },\n        behaviours: [\n          Dragging.config({\n            mode: 'mouse',\n            repositionTarget: false,\n            onDrag: function (_comp, _target, delta) {\n              return resize(editor, delta, resizeType);\n            },\n            blockerClass: 'tox-blocker'\n          }),\n          Keying.config({\n            mode: 'special',\n            onLeft: function () {\n              return keyboardHandler(editor, resizeType, -1, 0);\n            },\n            onRight: function () {\n              return keyboardHandler(editor, resizeType, 1, 0);\n            },\n            onUp: function () {\n              return keyboardHandler(editor, resizeType, 0, -1);\n            },\n            onDown: function () {\n              return keyboardHandler(editor, resizeType, 0, 1);\n            }\n          }),\n          Tabstopping.config({}),\n          Focusing.config({})\n        ]\n      }, providersBackstage.icons));\n    };\n\n    var renderWordCount = function (editor, providersBackstage) {\n      var _a;\n      var replaceCountText = function (comp, count, mode) {\n        return Replacing.set(comp, [text$1(providersBackstage.translate([\n            '{0} ' + mode,\n            count[mode]\n          ]))]);\n      };\n      return Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: ['tox-statusbar__wordcount']\n        },\n        components: [],\n        buttonBehaviours: derive$1([\n          DisablingConfigs.button(providersBackstage.isDisabled),\n          receivingConfig(),\n          Tabstopping.config({}),\n          Replacing.config({}),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: {\n                mode: 'words',\n                count: {\n                  words: 0,\n                  characters: 0\n                }\n              }\n            }\n          }),\n          config('wordcount-events', [\n            runOnExecute$1(function (comp) {\n              var currentVal = Representing.getValue(comp);\n              var newMode = currentVal.mode === 'words' ? 'characters' : 'words';\n              Representing.setValue(comp, {\n                mode: newMode,\n                count: currentVal.count\n              });\n              replaceCountText(comp, currentVal.count, newMode);\n            }),\n            runOnAttached(function (comp) {\n              editor.on('wordCountUpdate', function (e) {\n                var mode = Representing.getValue(comp).mode;\n                Representing.setValue(comp, {\n                  mode: mode,\n                  count: e.wordCount\n                });\n                replaceCountText(comp, e.wordCount, mode);\n              });\n            })\n          ])\n        ]),\n        eventOrder: (_a = {}, _a[execute$5()] = [\n          'disabling',\n          'alloy.base.behaviour',\n          'wordcount-events'\n        ], _a)\n      });\n    };\n\n    var renderStatusbar = function (editor, providersBackstage) {\n      var renderBranding = function () {\n        var label = global$e.translate([\n          'Powered by {0}',\n          'Tiny'\n        ]);\n        var linkHtml = '<a href=\"https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce&amp;utm_content=v5\" rel=\"noopener\" target=\"_blank\" tabindex=\"-1\" aria-label=\"' + label + '\">' + label + '</a>';\n        return {\n          dom: {\n            tag: 'span',\n            classes: ['tox-statusbar__branding'],\n            innerHtml: linkHtml\n          }\n        };\n      };\n      var getTextComponents = function () {\n        var components = [];\n        if (editor.getParam('elementpath', true, 'boolean')) {\n          components.push(renderElementPath(editor, {}, providersBackstage));\n        }\n        if (editor.hasPlugin('wordcount')) {\n          components.push(renderWordCount(editor, providersBackstage));\n        }\n        if (editor.getParam('branding', true, 'boolean')) {\n          components.push(renderBranding());\n        }\n        if (components.length > 0) {\n          return [{\n              dom: {\n                tag: 'div',\n                classes: ['tox-statusbar__text-container']\n              },\n              components: components\n            }];\n        }\n        return [];\n      };\n      var getComponents = function () {\n        var components = getTextComponents();\n        var resizeHandler = renderResizeHandler(editor, providersBackstage);\n        return components.concat(resizeHandler.toArray());\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-statusbar']\n        },\n        components: getComponents()\n      };\n    };\n\n    var setup$3 = function (editor) {\n      var _a;\n      var isInline = editor.inline;\n      var mode = isInline ? Inline : Iframe;\n      var header = isStickyToolbar(editor) ? StickyHeader : StaticHeader;\n      var lazyOuterContainer = Optional.none();\n      var platform = detect$1();\n      var isIE = platform.browser.isIE();\n      var platformClasses = isIE ? ['tox-platform-ie'] : [];\n      var isTouch = platform.deviceType.isTouch();\n      var touchPlatformClass = 'tox-platform-touch';\n      var deviceClasses = isTouch ? [touchPlatformClass] : [];\n      var isToolbarBottom = isToolbarLocationBottom(editor);\n      var uiContainer = getUiContainer(editor);\n      var dirAttributes = global$e.isRtl() ? { attributes: { dir: 'rtl' } } : {};\n      var verticalDirAttributes = { attributes: (_a = {}, _a[Attribute] = isToolbarBottom ? AttributeValue.BottomToTop : AttributeValue.TopToBottom, _a) };\n      var lazyHeader = function () {\n        return lazyOuterContainer.bind(OuterContainer.getHeader);\n      };\n      var isHeaderDocked = function () {\n        return header.isDocked(lazyHeader);\n      };\n      var resizeUiMothership = function () {\n        set$7(uiMothership.element, 'width', document.body.clientWidth + 'px');\n      };\n      var makeSinkDefinition = function () {\n        var isGridUiContainer = eq(body(), uiContainer) && get$c(uiContainer, 'display') === 'grid';\n        var sinkSpec = {\n          dom: __assign({\n            tag: 'div',\n            classes: [\n              'tox',\n              'tox-silver-sink',\n              'tox-tinymce-aux'\n            ].concat(platformClasses).concat(deviceClasses)\n          }, dirAttributes),\n          behaviours: derive$1([Positioning.config({\n              useFixed: function () {\n                return isHeaderDocked();\n              }\n            })])\n        };\n        var reactiveWidthSpec = {\n          dom: { styles: { width: document.body.clientWidth + 'px' } },\n          events: derive$2([run$1(windowResize(), resizeUiMothership)])\n        };\n        return deepMerge(sinkSpec, isGridUiContainer ? reactiveWidthSpec : {});\n      };\n      var sink = build$1(makeSinkDefinition());\n      var lazySink = function () {\n        return Result.value(sink);\n      };\n      var memAnchorBar = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-anchorbar']\n        }\n      });\n      var lazyAnchorBar = function () {\n        return lazyOuterContainer.bind(function (container) {\n          return memAnchorBar.getOpt(container);\n        }).getOrDie('Could not find a anchor bar element');\n      };\n      var lazyToolbar = function () {\n        return lazyOuterContainer.bind(function (container) {\n          return OuterContainer.getToolbar(container);\n        }).getOrDie('Could not find more toolbar element');\n      };\n      var lazyThrobber = function () {\n        return lazyOuterContainer.bind(function (container) {\n          return OuterContainer.getThrobber(container);\n        }).getOrDie('Could not find throbber element');\n      };\n      var backstage = init$7(sink, editor, lazyAnchorBar);\n      var partMenubar = OuterContainer.parts.menubar({\n        dom: {\n          tag: 'div',\n          classes: ['tox-menubar']\n        },\n        backstage: backstage,\n        onEscape: function () {\n          editor.focus();\n        }\n      });\n      var toolbarMode = getToolbarMode(editor);\n      var partToolbar = OuterContainer.parts.toolbar(__assign({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar']\n        },\n        getSink: lazySink,\n        providers: backstage.shared.providers,\n        onEscape: function () {\n          editor.focus();\n        },\n        type: toolbarMode,\n        lazyToolbar: lazyToolbar,\n        lazyHeader: function () {\n          return lazyHeader().getOrDie('Could not find header element');\n        }\n      }, verticalDirAttributes));\n      var partMultipleToolbar = OuterContainer.parts['multiple-toolbar']({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar-overlord']\n        },\n        providers: backstage.shared.providers,\n        onEscape: function () {\n          editor.focus();\n        },\n        type: toolbarMode\n      });\n      var partSocket = OuterContainer.parts.socket({\n        dom: {\n          tag: 'div',\n          classes: ['tox-edit-area']\n        }\n      });\n      var partSidebar = OuterContainer.parts.sidebar({\n        dom: {\n          tag: 'div',\n          classes: ['tox-sidebar']\n        }\n      });\n      var partThrobber = OuterContainer.parts.throbber({\n        dom: {\n          tag: 'div',\n          classes: ['tox-throbber']\n        },\n        backstage: backstage\n      });\n      var sb = editor.getParam('statusbar', true, 'boolean');\n      var statusbar = sb && !isInline ? Optional.some(renderStatusbar(editor, backstage.shared.providers)) : Optional.none();\n      var socketSidebarContainer = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-sidebar-wrap']\n        },\n        components: [\n          partSocket,\n          partSidebar\n        ]\n      };\n      var hasMultipleToolbar = isMultipleToolbars(editor);\n      var hasToolbar = isToolbarEnabled(editor);\n      var hasMenubar = isMenubarEnabled(editor);\n      var getPartToolbar = function () {\n        if (hasMultipleToolbar) {\n          return [partMultipleToolbar];\n        } else if (hasToolbar) {\n          return [partToolbar];\n        } else {\n          return [];\n        }\n      };\n      var partHeader = OuterContainer.parts.header({\n        dom: __assign({\n          tag: 'div',\n          classes: ['tox-editor-header']\n        }, verticalDirAttributes),\n        components: flatten([\n          hasMenubar ? [partMenubar] : [],\n          getPartToolbar(),\n          useFixedContainer(editor) ? [] : [memAnchorBar.asSpec()]\n        ]),\n        sticky: isStickyToolbar(editor),\n        editor: editor,\n        sharedBackstage: backstage.shared\n      });\n      var editorComponents = flatten([\n        isToolbarBottom ? [] : [partHeader],\n        isInline ? [] : [socketSidebarContainer],\n        isToolbarBottom ? [partHeader] : []\n      ]);\n      var editorContainer = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-editor-container']\n        },\n        components: editorComponents\n      };\n      var containerComponents = flatten([\n        [editorContainer],\n        isInline ? [] : statusbar.toArray(),\n        [partThrobber]\n      ]);\n      var isHidden = isDistractionFree(editor);\n      var attributes = __assign(__assign({ role: 'application' }, global$e.isRtl() ? { dir: 'rtl' } : {}), isHidden ? { 'aria-hidden': 'true' } : {});\n      var outerContainer = build$1(OuterContainer.sketch({\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox',\n            'tox-tinymce'\n          ].concat(isInline ? ['tox-tinymce-inline'] : []).concat(isToolbarBottom ? ['tox-tinymce--toolbar-bottom'] : []).concat(deviceClasses).concat(platformClasses),\n          styles: __assign({ visibility: 'hidden' }, isHidden ? {\n            opacity: '0',\n            border: '0'\n          } : {}),\n          attributes: attributes\n        },\n        components: containerComponents,\n        behaviours: derive$1([\n          receivingConfig(),\n          Disabling.config({ disableClass: 'tox-tinymce--disabled' }),\n          Keying.config({\n            mode: 'cyclic',\n            selector: '.tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle'\n          })\n        ])\n      }));\n      lazyOuterContainer = Optional.some(outerContainer);\n      editor.shortcuts.add('alt+F9', 'focus menubar', function () {\n        OuterContainer.focusMenubar(outerContainer);\n      });\n      editor.shortcuts.add('alt+F10', 'focus toolbar', function () {\n        OuterContainer.focusToolbar(outerContainer);\n      });\n      editor.addCommand('ToggleToolbarDrawer', function () {\n        OuterContainer.toggleToolbarDrawer(outerContainer);\n      });\n      editor.addQueryStateHandler('ToggleToolbarDrawer', function () {\n        return OuterContainer.isToolbarDrawerToggled(outerContainer);\n      });\n      var mothership = takeover(outerContainer);\n      var uiMothership = takeover(sink);\n      setup$b(editor, mothership, uiMothership);\n      var getUi = function () {\n        var channels = {\n          broadcastAll: uiMothership.broadcast,\n          broadcastOn: uiMothership.broadcastOn,\n          register: noop\n        };\n        return { channels: channels };\n      };\n      var setEditorSize = function () {\n        var parsedHeight = numToPx(getHeightWithFallback(editor));\n        var parsedWidth = numToPx(getWidthWithFallback(editor));\n        if (!editor.inline) {\n          if (isValidValue('div', 'width', parsedWidth)) {\n            set$7(outerContainer.element, 'width', parsedWidth);\n          }\n          if (isValidValue('div', 'height', parsedHeight)) {\n            set$7(outerContainer.element, 'height', parsedHeight);\n          } else {\n            set$7(outerContainer.element, 'height', '200px');\n          }\n        }\n        return parsedHeight;\n      };\n      var renderUI = function () {\n        header.setup(editor, backstage.shared, lazyHeader);\n        setup$6(editor, backstage);\n        setup$5(editor, lazySink, backstage);\n        setup$8(editor);\n        setup$7(editor, lazyThrobber, backstage.shared);\n        map$1(getToolbarGroups(editor), function (toolbarGroupButtonConfig, name) {\n          editor.ui.registry.addGroupToolbarButton(name, toolbarGroupButtonConfig);\n        });\n        var _a = editor.ui.registry.getAll(), buttons = _a.buttons, menuItems = _a.menuItems, contextToolbars = _a.contextToolbars, sidebars = _a.sidebars;\n        var toolbarOpt = getMultipleToolbarsSetting(editor);\n        var rawUiConfig = {\n          menuItems: menuItems,\n          menus: getMenus(editor),\n          menubar: getMenubar(editor),\n          toolbar: toolbarOpt.getOrThunk(function () {\n            return getToolbar(editor);\n          }),\n          allowToolbarGroups: toolbarMode === ToolbarMode.floating,\n          buttons: buttons,\n          sidebar: sidebars\n        };\n        register$7(editor, contextToolbars, sink, { backstage: backstage });\n        setup$4(editor, sink);\n        var elm = editor.getElement();\n        var height = setEditorSize();\n        var uiComponents = {\n          mothership: mothership,\n          uiMothership: uiMothership,\n          outerContainer: outerContainer\n        };\n        var args = {\n          targetNode: elm,\n          height: height\n        };\n        return mode.render(editor, uiComponents, rawUiConfig, backstage, args);\n      };\n      return {\n        mothership: mothership,\n        uiMothership: uiMothership,\n        backstage: backstage,\n        renderUI: renderUI,\n        getUi: getUi\n      };\n    };\n\n    var describedBy = function (describedElement, describeElement) {\n      var describeId = Optional.from(get$d(describedElement, 'id')).fold(function () {\n        var id = generate$6('dialog-describe');\n        set$8(describeElement, 'id', id);\n        return id;\n      }, identity$1);\n      set$8(describedElement, 'aria-describedby', describeId);\n    };\n\n    var labelledBy = function (labelledElement, labelElement) {\n      var labelId = getOpt(labelledElement, 'id').fold(function () {\n        var id = generate$6('dialog-label');\n        set$8(labelElement, 'id', id);\n        return id;\n      }, identity$1);\n      set$8(labelledElement, 'aria-labelledby', labelId);\n    };\n\n    var schema$2 = constant$1([\n      required$1('lazySink'),\n      option('dragBlockClass'),\n      defaultedFunction('getBounds', win),\n      defaulted('useTabstopAt', always),\n      defaulted('eventOrder', {}),\n      field('modalBehaviours', [Keying]),\n      onKeyboardHandler('onExecute'),\n      onStrictKeyboardHandler('onEscape')\n    ]);\n    var basic = { sketch: identity$1 };\n    var parts$2 = constant$1([\n      optional({\n        name: 'draghandle',\n        overrides: function (detail, spec) {\n          return {\n            behaviours: derive$1([Dragging.config({\n                mode: 'mouse',\n                getTarget: function (handle) {\n                  return ancestor(handle, '[role=\"dialog\"]').getOr(handle);\n                },\n                blockerClass: detail.dragBlockClass.getOrDie(new Error('The drag blocker class was not specified for a dialog with a drag handle: \\n' + JSON.stringify(spec, null, 2)).message),\n                getBounds: detail.getDragBounds\n              })])\n          };\n        }\n      }),\n      required({\n        schema: [required$1('dom')],\n        name: 'title'\n      }),\n      required({\n        factory: basic,\n        schema: [required$1('dom')],\n        name: 'close'\n      }),\n      required({\n        factory: basic,\n        schema: [required$1('dom')],\n        name: 'body'\n      }),\n      optional({\n        factory: basic,\n        schema: [required$1('dom')],\n        name: 'footer'\n      }),\n      external$1({\n        factory: {\n          sketch: function (spec, detail) {\n            return __assign(__assign({}, spec), {\n              dom: detail.dom,\n              components: detail.components\n            });\n          }\n        },\n        schema: [\n          defaulted('dom', {\n            tag: 'div',\n            styles: {\n              position: 'fixed',\n              left: '0px',\n              top: '0px',\n              right: '0px',\n              bottom: '0px'\n            }\n          }),\n          defaulted('components', [])\n        ],\n        name: 'blocker'\n      })\n    ]);\n\n    var factory$4 = function (detail, components, spec, externals) {\n      var _a;\n      var dialogComp = value$1();\n      var showDialog = function (dialog) {\n        dialogComp.set(dialog);\n        var sink = detail.lazySink(dialog).getOrDie();\n        var externalBlocker = externals.blocker();\n        var blocker = sink.getSystem().build(__assign(__assign({}, externalBlocker), {\n          components: externalBlocker.components.concat([premade(dialog)]),\n          behaviours: derive$1([\n            Focusing.config({}),\n            config('dialog-blocker-events', [runOnSource(focusin(), function () {\n                Keying.focusIn(dialog);\n              })])\n          ])\n        }));\n        attach(sink, blocker);\n        Keying.focusIn(dialog);\n      };\n      var hideDialog = function (dialog) {\n        dialogComp.clear();\n        parent(dialog.element).each(function (blockerDom) {\n          dialog.getSystem().getByDom(blockerDom).each(function (blocker) {\n            detach(blocker);\n          });\n        });\n      };\n      var getDialogBody = function (dialog) {\n        return getPartOrDie(dialog, detail, 'body');\n      };\n      var getDialogFooter = function (dialog) {\n        return getPartOrDie(dialog, detail, 'footer');\n      };\n      var setBusy = function (dialog, getBusySpec) {\n        Blocking.block(dialog, getBusySpec);\n      };\n      var setIdle = function (dialog) {\n        Blocking.unblock(dialog);\n      };\n      var modalEventsId = generate$6('modal-events');\n      var eventOrder = __assign(__assign({}, detail.eventOrder), (_a = {}, _a[attachedToDom()] = [modalEventsId].concat(detail.eventOrder['alloy.system.attached'] || []), _a));\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        apis: {\n          show: showDialog,\n          hide: hideDialog,\n          getBody: getDialogBody,\n          getFooter: getDialogFooter,\n          setIdle: setIdle,\n          setBusy: setBusy\n        },\n        eventOrder: eventOrder,\n        domModification: {\n          attributes: {\n            'role': 'dialog',\n            'aria-modal': 'true'\n          }\n        },\n        behaviours: augment(detail.modalBehaviours, [\n          Replacing.config({}),\n          Keying.config({\n            mode: 'cyclic',\n            onEnter: detail.onExecute,\n            onEscape: detail.onEscape,\n            useTabstopAt: detail.useTabstopAt\n          }),\n          Blocking.config({ getRoot: dialogComp.get }),\n          config(modalEventsId, [runOnAttached(function (c) {\n              labelledBy(c.element, getPartOrDie(c, detail, 'title').element);\n              describedBy(c.element, getPartOrDie(c, detail, 'body').element);\n            })])\n        ])\n      };\n    };\n    var ModalDialog = composite({\n      name: 'ModalDialog',\n      configFields: schema$2(),\n      partFields: parts$2(),\n      factory: factory$4,\n      apis: {\n        show: function (apis, dialog) {\n          apis.show(dialog);\n        },\n        hide: function (apis, dialog) {\n          apis.hide(dialog);\n        },\n        getBody: function (apis, dialog) {\n          return apis.getBody(dialog);\n        },\n        getFooter: function (apis, dialog) {\n          return apis.getFooter(dialog);\n        },\n        setBusy: function (apis, dialog, getBusySpec) {\n          apis.setBusy(dialog, getBusySpec);\n        },\n        setIdle: function (apis, dialog) {\n          apis.setIdle(dialog);\n        }\n      }\n    });\n\n    var dialogToggleMenuItemSchema = objOf([\n      requiredString('type'),\n      requiredString('name')\n    ].concat(commonMenuItemFields));\n    var dialogToggleMenuItemDataProcessor = boolean;\n\n    var baseFooterButtonFields = [\n      field$1('name', 'name', defaultedThunk(function () {\n        return generate$6('button-name');\n      }), string),\n      optionString('icon'),\n      defaultedStringEnum('align', 'end', [\n        'start',\n        'end'\n      ]),\n      defaultedBoolean('primary', false),\n      defaultedBoolean('disabled', false)\n    ];\n    var dialogFooterButtonFields = __spreadArray(__spreadArray([], baseFooterButtonFields, true), [requiredString('text')], false);\n    var normalFooterButtonFields = __spreadArray([requiredStringEnum('type', [\n        'submit',\n        'cancel',\n        'custom'\n      ])], dialogFooterButtonFields, true);\n    var menuFooterButtonFields = __spreadArray([\n      requiredStringEnum('type', ['menu']),\n      optionString('text'),\n      optionString('tooltip'),\n      optionString('icon'),\n      requiredArrayOf('items', dialogToggleMenuItemSchema)\n    ], baseFooterButtonFields, true);\n    var dialogFooterButtonSchema = choose$1('type', {\n      submit: normalFooterButtonFields,\n      cancel: normalFooterButtonFields,\n      custom: normalFooterButtonFields,\n      menu: menuFooterButtonFields\n    });\n\n    var alertBannerFields = [\n      requiredString('type'),\n      requiredString('text'),\n      requiredStringEnum('level', [\n        'info',\n        'warn',\n        'error',\n        'success'\n      ]),\n      requiredString('icon'),\n      defaulted('url', '')\n    ];\n    var alertBannerSchema = objOf(alertBannerFields);\n\n    var createBarFields = function (itemsField) {\n      return [\n        requiredString('type'),\n        itemsField\n      ];\n    };\n\n    var buttonFields = [\n      requiredString('type'),\n      requiredString('text'),\n      defaultedBoolean('disabled', false),\n      defaultedBoolean('primary', false),\n      field$1('name', 'name', defaultedThunk(function () {\n        return generate$6('button-name');\n      }), string),\n      optionString('icon'),\n      defaultedBoolean('borderless', false)\n    ];\n    var buttonSchema = objOf(buttonFields);\n\n    var checkboxFields = [\n      requiredString('type'),\n      requiredString('name'),\n      requiredString('label'),\n      defaultedBoolean('disabled', false)\n    ];\n    var checkboxSchema = objOf(checkboxFields);\n    var checkboxDataProcessor = boolean;\n\n    var formComponentFields = [\n      requiredString('type'),\n      requiredString('name')\n    ];\n    var formComponentWithLabelFields = formComponentFields.concat([optionString('label')]);\n\n    var collectionFields = formComponentWithLabelFields.concat([defaulted('columns', 'auto')]);\n    var collectionSchema = objOf(collectionFields);\n    var collectionDataProcessor = arrOfObj([\n      requiredString('value'),\n      requiredString('text'),\n      requiredString('icon')\n    ]);\n\n    var colorInputFields = formComponentWithLabelFields;\n    var colorInputSchema = objOf(colorInputFields);\n    var colorInputDataProcessor = string;\n\n    var colorPickerFields = formComponentWithLabelFields;\n    var colorPickerSchema = objOf(colorPickerFields);\n    var colorPickerDataProcessor = string;\n\n    var customEditorFields = formComponentFields.concat([\n      defaultedString('tag', 'textarea'),\n      requiredString('scriptId'),\n      requiredString('scriptUrl'),\n      defaultedPostMsg('settings', undefined)\n    ]);\n    var customEditorFieldsOld = formComponentFields.concat([\n      defaultedString('tag', 'textarea'),\n      requiredFunction('init')\n    ]);\n    var customEditorSchema = valueOf(function (v) {\n      return asRaw('customeditor.old', objOfOnly(customEditorFieldsOld), v).orThunk(function () {\n        return asRaw('customeditor.new', objOfOnly(customEditorFields), v);\n      });\n    });\n    var customEditorDataProcessor = string;\n\n    var dropZoneFields = formComponentWithLabelFields;\n    var dropZoneSchema = objOf(dropZoneFields);\n    var dropZoneDataProcessor = arrOfVal();\n\n    var createGridFields = function (itemsField) {\n      return [\n        requiredString('type'),\n        requiredNumber('columns'),\n        itemsField\n      ];\n    };\n\n    var htmlPanelFields = [\n      requiredString('type'),\n      requiredString('html'),\n      defaultedStringEnum('presets', 'presentation', [\n        'presentation',\n        'document'\n      ])\n    ];\n    var htmlPanelSchema = objOf(htmlPanelFields);\n\n    var iframeFields = formComponentWithLabelFields.concat([defaultedBoolean('sandboxed', true)]);\n    var iframeSchema = objOf(iframeFields);\n    var iframeDataProcessor = string;\n\n    var imageToolsFields = formComponentWithLabelFields.concat([requiredOf('currentState', objOf([\n        required$1('blob'),\n        requiredString('url')\n      ]))]);\n    var imageToolsSchema = objOf(imageToolsFields);\n\n    var inputFields = formComponentWithLabelFields.concat([\n      optionString('inputMode'),\n      optionString('placeholder'),\n      defaultedBoolean('maximized', false),\n      defaultedBoolean('disabled', false)\n    ]);\n    var inputSchema = objOf(inputFields);\n    var inputDataProcessor = string;\n\n    var createLabelFields = function (itemsField) {\n      return [\n        requiredString('type'),\n        requiredString('label'),\n        itemsField\n      ];\n    };\n\n    var listBoxSingleItemFields = [\n      requiredString('text'),\n      requiredString('value')\n    ];\n    var listBoxNestedItemFields = [\n      requiredString('text'),\n      requiredArrayOf('items', thunkOf('items', function () {\n        return listBoxItemSchema;\n      }))\n    ];\n    var listBoxItemSchema = oneOf([\n      objOf(listBoxSingleItemFields),\n      objOf(listBoxNestedItemFields)\n    ]);\n    var listBoxFields = formComponentWithLabelFields.concat([\n      requiredArrayOf('items', listBoxItemSchema),\n      defaultedBoolean('disabled', false)\n    ]);\n    var listBoxSchema = objOf(listBoxFields);\n    var listBoxDataProcessor = string;\n\n    var selectBoxFields = formComponentWithLabelFields.concat([\n      requiredArrayOfObj('items', [\n        requiredString('text'),\n        requiredString('value')\n      ]),\n      defaultedNumber('size', 1),\n      defaultedBoolean('disabled', false)\n    ]);\n    var selectBoxSchema = objOf(selectBoxFields);\n    var selectBoxDataProcessor = string;\n\n    var sizeInputFields = formComponentWithLabelFields.concat([\n      defaultedBoolean('constrain', true),\n      defaultedBoolean('disabled', false)\n    ]);\n    var sizeInputSchema = objOf(sizeInputFields);\n    var sizeInputDataProcessor = objOf([\n      requiredString('width'),\n      requiredString('height')\n    ]);\n\n    var tableFields = [\n      requiredString('type'),\n      requiredArrayOf('header', string),\n      requiredArrayOf('cells', arrOf(string))\n    ];\n    var tableSchema = objOf(tableFields);\n\n    var textAreaFields = formComponentWithLabelFields.concat([\n      optionString('placeholder'),\n      defaultedBoolean('maximized', false),\n      defaultedBoolean('disabled', false)\n    ]);\n    var textAreaSchema = objOf(textAreaFields);\n    var textAreaDataProcessor = string;\n\n    var urlInputFields = formComponentWithLabelFields.concat([\n      defaultedStringEnum('filetype', 'file', [\n        'image',\n        'media',\n        'file'\n      ]),\n      defaulted('disabled', false)\n    ]);\n    var urlInputSchema = objOf(urlInputFields);\n    var urlInputDataProcessor = objOf([\n      requiredString('value'),\n      defaulted('meta', {})\n    ]);\n\n    var createItemsField = function (name) {\n      return field$1('items', 'items', required$2(), arrOf(valueOf(function (v) {\n        return asRaw('Checking item of ' + name, itemSchema, v).fold(function (sErr) {\n          return Result.error(formatError(sErr));\n        }, function (passValue) {\n          return Result.value(passValue);\n        });\n      })));\n    };\n    var itemSchema = valueThunk(function () {\n      return choose$2('type', {\n        alertbanner: alertBannerSchema,\n        bar: objOf(createBarFields(createItemsField('bar'))),\n        button: buttonSchema,\n        checkbox: checkboxSchema,\n        colorinput: colorInputSchema,\n        colorpicker: colorPickerSchema,\n        dropzone: dropZoneSchema,\n        grid: objOf(createGridFields(createItemsField('grid'))),\n        iframe: iframeSchema,\n        input: inputSchema,\n        listbox: listBoxSchema,\n        selectbox: selectBoxSchema,\n        sizeinput: sizeInputSchema,\n        textarea: textAreaSchema,\n        urlinput: urlInputSchema,\n        customeditor: customEditorSchema,\n        htmlpanel: htmlPanelSchema,\n        imagetools: imageToolsSchema,\n        collection: collectionSchema,\n        label: objOf(createLabelFields(createItemsField('label'))),\n        table: tableSchema,\n        panel: panelSchema\n      });\n    });\n    var panelFields = [\n      requiredString('type'),\n      defaulted('classes', []),\n      requiredArrayOf('items', itemSchema)\n    ];\n    var panelSchema = objOf(panelFields);\n\n    var tabFields = [\n      field$1('name', 'name', defaultedThunk(function () {\n        return generate$6('tab-name');\n      }), string),\n      requiredString('title'),\n      requiredArrayOf('items', itemSchema)\n    ];\n    var tabPanelFields = [\n      requiredString('type'),\n      requiredArrayOfObj('tabs', tabFields)\n    ];\n    var tabPanelSchema = objOf(tabPanelFields);\n\n    var dialogButtonFields = dialogFooterButtonFields;\n    var dialogButtonSchema = dialogFooterButtonSchema;\n    var dialogSchema = objOf([\n      requiredString('title'),\n      requiredOf('body', choose$2('type', {\n        panel: panelSchema,\n        tabpanel: tabPanelSchema\n      })),\n      defaultedString('size', 'normal'),\n      requiredArrayOf('buttons', dialogButtonSchema),\n      defaulted('initialData', {}),\n      defaultedFunction('onAction', noop),\n      defaultedFunction('onChange', noop),\n      defaultedFunction('onSubmit', noop),\n      defaultedFunction('onClose', noop),\n      defaultedFunction('onCancel', noop),\n      defaulted('onTabChange', noop)\n    ]);\n    var createDialog = function (spec) {\n      return asRaw('dialog', dialogSchema, spec);\n    };\n\n    var urlDialogButtonSchema = objOf(__spreadArray([requiredStringEnum('type', [\n        'cancel',\n        'custom'\n      ])], dialogButtonFields, true));\n    var urlDialogSchema = objOf([\n      requiredString('title'),\n      requiredString('url'),\n      optionNumber('height'),\n      optionNumber('width'),\n      optionArrayOf('buttons', urlDialogButtonSchema),\n      defaultedFunction('onAction', noop),\n      defaultedFunction('onCancel', noop),\n      defaultedFunction('onClose', noop),\n      defaultedFunction('onMessage', noop)\n    ]);\n    var createUrlDialog = function (spec) {\n      return asRaw('dialog', urlDialogSchema, spec);\n    };\n\n    var getAllObjects = function (obj) {\n      if (isObject(obj)) {\n        return [obj].concat(bind$3(values(obj), getAllObjects));\n      } else if (isArray(obj)) {\n        return bind$3(obj, getAllObjects);\n      } else {\n        return [];\n      }\n    };\n\n    var isNamedItem = function (obj) {\n      return isString(obj.type) && isString(obj.name);\n    };\n    var dataProcessors = {\n      checkbox: checkboxDataProcessor,\n      colorinput: colorInputDataProcessor,\n      colorpicker: colorPickerDataProcessor,\n      dropzone: dropZoneDataProcessor,\n      input: inputDataProcessor,\n      iframe: iframeDataProcessor,\n      sizeinput: sizeInputDataProcessor,\n      selectbox: selectBoxDataProcessor,\n      listbox: listBoxDataProcessor,\n      size: sizeInputDataProcessor,\n      textarea: textAreaDataProcessor,\n      urlinput: urlInputDataProcessor,\n      customeditor: customEditorDataProcessor,\n      collection: collectionDataProcessor,\n      togglemenuitem: dialogToggleMenuItemDataProcessor\n    };\n    var getDataProcessor = function (item) {\n      return Optional.from(dataProcessors[item.type]);\n    };\n    var getNamedItems = function (structure) {\n      return filter$2(getAllObjects(structure), isNamedItem);\n    };\n\n    var createDataValidator = function (structure) {\n      var namedItems = getNamedItems(structure);\n      var fields = bind$3(namedItems, function (item) {\n        return getDataProcessor(item).fold(function () {\n          return [];\n        }, function (schema) {\n          return [requiredOf(item.name, schema)];\n        });\n      });\n      return objOf(fields);\n    };\n\n    var extract = function (structure) {\n      var internalDialog = getOrDie(createDialog(structure));\n      var dataValidator = createDataValidator(structure);\n      var initialData = structure.initialData;\n      return {\n        internalDialog: internalDialog,\n        dataValidator: dataValidator,\n        initialData: initialData\n      };\n    };\n    var DialogManager = {\n      open: function (factory, structure) {\n        var extraction = extract(structure);\n        return factory(extraction.internalDialog, extraction.initialData, extraction.dataValidator);\n      },\n      openUrl: function (factory, structure) {\n        var internalDialog = getOrDie(createUrlDialog(structure));\n        return factory(internalDialog);\n      },\n      redial: function (structure) {\n        return extract(structure);\n      }\n    };\n\n    var toValidValues = function (values) {\n      var errors = [];\n      var result = {};\n      each(values, function (value, name) {\n        value.fold(function () {\n          errors.push(name);\n        }, function (v) {\n          result[name] = v;\n        });\n      });\n      return errors.length > 0 ? Result.error(errors) : Result.value(result);\n    };\n\n    var renderBodyPanel = function (spec, backstage) {\n      var memForm = record(Form.sketch(function (parts) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-form'].concat(spec.classes)\n          },\n          components: map$2(spec.items, function (item) {\n            return interpretInForm(parts, item, backstage);\n          })\n        };\n      }));\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__body']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-content']\n            },\n            components: [memForm.asSpec()]\n          }],\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'acyclic',\n            useTabstopAt: not(isPseudoStop)\n          }),\n          ComposingConfigs.memento(memForm),\n          RepresentingConfigs.memento(memForm, {\n            postprocess: function (formValue) {\n              return toValidValues(formValue).fold(function (err) {\n                console.error(err);\n                return {};\n              }, identity$1);\n            }\n          })\n        ])\n      };\n    };\n\n    var factory$3 = function (detail, _spec) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: detail.components,\n        events: events$a(detail.action),\n        behaviours: augment(detail.tabButtonBehaviours, [\n          Focusing.config({}),\n          Keying.config({\n            mode: 'execution',\n            useSpace: true,\n            useEnter: true\n          }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.value\n            }\n          })\n        ]),\n        domModification: detail.domModification\n      };\n    };\n    var TabButton = single({\n      name: 'TabButton',\n      configFields: [\n        defaulted('uid', undefined),\n        required$1('value'),\n        field$1('dom', 'dom', mergeWithThunk(function () {\n          return {\n            attributes: {\n              'role': 'tab',\n              'id': generate$6('aria'),\n              'aria-selected': 'false'\n            }\n          };\n        }), anyValue()),\n        option('action'),\n        defaulted('domModification', {}),\n        field('tabButtonBehaviours', [\n          Focusing,\n          Keying,\n          Representing\n        ]),\n        required$1('view')\n      ],\n      factory: factory$3\n    });\n\n    var schema$1 = constant$1([\n      required$1('tabs'),\n      required$1('dom'),\n      defaulted('clickToDismiss', false),\n      field('tabbarBehaviours', [\n        Highlighting,\n        Keying\n      ]),\n      markers$1([\n        'tabClass',\n        'selectedClass'\n      ])\n    ]);\n    var tabsPart = group({\n      factory: TabButton,\n      name: 'tabs',\n      unit: 'tab',\n      overrides: function (barDetail) {\n        var dismissTab$1 = function (tabbar, button) {\n          Highlighting.dehighlight(tabbar, button);\n          emitWith(tabbar, dismissTab(), {\n            tabbar: tabbar,\n            button: button\n          });\n        };\n        var changeTab$1 = function (tabbar, button) {\n          Highlighting.highlight(tabbar, button);\n          emitWith(tabbar, changeTab(), {\n            tabbar: tabbar,\n            button: button\n          });\n        };\n        return {\n          action: function (button) {\n            var tabbar = button.getSystem().getByUid(barDetail.uid).getOrDie();\n            var activeButton = Highlighting.isHighlighted(tabbar, button);\n            var response = function () {\n              if (activeButton && barDetail.clickToDismiss) {\n                return dismissTab$1;\n              } else if (!activeButton) {\n                return changeTab$1;\n              } else {\n                return noop;\n              }\n            }();\n            response(tabbar, button);\n          },\n          domModification: { classes: [barDetail.markers.tabClass] }\n        };\n      }\n    });\n    var parts$1 = constant$1([tabsPart]);\n\n    var factory$2 = function (detail, components, _spec, _externals) {\n      return {\n        'uid': detail.uid,\n        'dom': detail.dom,\n        components: components,\n        'debug.sketcher': 'Tabbar',\n        'domModification': { attributes: { role: 'tablist' } },\n        'behaviours': augment(detail.tabbarBehaviours, [\n          Highlighting.config({\n            highlightClass: detail.markers.selectedClass,\n            itemClass: detail.markers.tabClass,\n            onHighlight: function (tabbar, tab) {\n              set$8(tab.element, 'aria-selected', 'true');\n            },\n            onDehighlight: function (tabbar, tab) {\n              set$8(tab.element, 'aria-selected', 'false');\n            }\n          }),\n          Keying.config({\n            mode: 'flow',\n            getInitial: function (tabbar) {\n              return Highlighting.getHighlighted(tabbar).map(function (tab) {\n                return tab.element;\n              });\n            },\n            selector: '.' + detail.markers.tabClass,\n            executeOnMove: true\n          })\n        ])\n      };\n    };\n    var Tabbar = composite({\n      name: 'Tabbar',\n      configFields: schema$1(),\n      partFields: parts$1(),\n      factory: factory$2\n    });\n\n    var factory$1 = function (detail, _spec) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        behaviours: augment(detail.tabviewBehaviours, [Replacing.config({})]),\n        domModification: { attributes: { role: 'tabpanel' } }\n      };\n    };\n    var Tabview = single({\n      name: 'Tabview',\n      configFields: [field('tabviewBehaviours', [Replacing])],\n      factory: factory$1\n    });\n\n    var schema = constant$1([\n      defaulted('selectFirst', true),\n      onHandler('onChangeTab'),\n      onHandler('onDismissTab'),\n      defaulted('tabs', []),\n      field('tabSectionBehaviours', [])\n    ]);\n    var barPart = required({\n      factory: Tabbar,\n      schema: [\n        required$1('dom'),\n        requiredObjOf('markers', [\n          required$1('tabClass'),\n          required$1('selectedClass')\n        ])\n      ],\n      name: 'tabbar',\n      defaults: function (detail) {\n        return { tabs: detail.tabs };\n      }\n    });\n    var viewPart = required({\n      factory: Tabview,\n      name: 'tabview'\n    });\n    var parts = constant$1([\n      barPart,\n      viewPart\n    ]);\n\n    var factory = function (detail, components, _spec, _externals) {\n      var changeTab$1 = function (button) {\n        var tabValue = Representing.getValue(button);\n        getPart(button, detail, 'tabview').each(function (tabview) {\n          var tabWithValue = find$5(detail.tabs, function (t) {\n            return t.value === tabValue;\n          });\n          tabWithValue.each(function (tabData) {\n            var panel = tabData.view();\n            getOpt(button.element, 'id').each(function (id) {\n              set$8(tabview.element, 'aria-labelledby', id);\n            });\n            Replacing.set(tabview, panel);\n            detail.onChangeTab(tabview, button, panel);\n          });\n        });\n      };\n      var changeTabBy = function (section, byPred) {\n        getPart(section, detail, 'tabbar').each(function (tabbar) {\n          byPred(tabbar).each(emitExecute);\n        });\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: get$2(detail.tabSectionBehaviours),\n        events: derive$2(flatten([\n          detail.selectFirst ? [runOnAttached(function (section, _simulatedEvent) {\n              changeTabBy(section, Highlighting.getFirst);\n            })] : [],\n          [\n            run$1(changeTab(), function (section, simulatedEvent) {\n              var button = simulatedEvent.event.button;\n              changeTab$1(button);\n            }),\n            run$1(dismissTab(), function (section, simulatedEvent) {\n              var button = simulatedEvent.event.button;\n              detail.onDismissTab(section, button);\n            })\n          ]\n        ])),\n        apis: {\n          getViewItems: function (section) {\n            return getPart(section, detail, 'tabview').map(function (tabview) {\n              return Replacing.contents(tabview);\n            }).getOr([]);\n          },\n          showTab: function (section, tabKey) {\n            var getTabIfNotActive = function (tabbar) {\n              var candidates = Highlighting.getCandidates(tabbar);\n              var optTab = find$5(candidates, function (c) {\n                return Representing.getValue(c) === tabKey;\n              });\n              return optTab.filter(function (tab) {\n                return !Highlighting.isHighlighted(tabbar, tab);\n              });\n            };\n            changeTabBy(section, getTabIfNotActive);\n          }\n        }\n      };\n    };\n    var TabSection = composite({\n      name: 'TabSection',\n      configFields: schema(),\n      partFields: parts(),\n      factory: factory,\n      apis: {\n        getViewItems: function (apis, component) {\n          return apis.getViewItems(component);\n        },\n        showTab: function (apis, component, tabKey) {\n          apis.showTab(component, tabKey);\n        }\n      }\n    });\n\n    var measureHeights = function (allTabs, tabview, tabviewComp) {\n      return map$2(allTabs, function (_tab, i) {\n        Replacing.set(tabviewComp, allTabs[i].view());\n        var rect = tabview.dom.getBoundingClientRect();\n        Replacing.set(tabviewComp, []);\n        return rect.height;\n      });\n    };\n    var getMaxHeight = function (heights) {\n      return head(sort(heights, function (a, b) {\n        if (a > b) {\n          return -1;\n        } else if (a < b) {\n          return +1;\n        } else {\n          return 0;\n        }\n      }));\n    };\n    var getMaxTabviewHeight = function (dialog, tabview, tablist) {\n      var documentElement$1 = documentElement(dialog).dom;\n      var rootElm = ancestor(dialog, '.tox-dialog-wrap').getOr(dialog);\n      var isFixed = get$c(rootElm, 'position') === 'fixed';\n      var maxHeight;\n      if (isFixed) {\n        maxHeight = Math.max(documentElement$1.clientHeight, window.innerHeight);\n      } else {\n        maxHeight = Math.max(documentElement$1.offsetHeight, documentElement$1.scrollHeight);\n      }\n      var tabviewHeight = get$b(tabview);\n      var isTabListBeside = tabview.dom.offsetLeft >= tablist.dom.offsetLeft + get$a(tablist);\n      var currentTabHeight = isTabListBeside ? Math.max(get$b(tablist), tabviewHeight) : tabviewHeight;\n      var dialogTopMargin = parseInt(get$c(dialog, 'margin-top'), 10) || 0;\n      var dialogBottomMargin = parseInt(get$c(dialog, 'margin-bottom'), 10) || 0;\n      var dialogHeight = get$b(dialog) + dialogTopMargin + dialogBottomMargin;\n      var chromeHeight = dialogHeight - currentTabHeight;\n      return maxHeight - chromeHeight;\n    };\n    var showTab = function (allTabs, comp) {\n      head(allTabs).each(function (tab) {\n        return TabSection.showTab(comp, tab.value);\n      });\n    };\n    var setTabviewHeight = function (tabview, height) {\n      set$7(tabview, 'height', height + 'px');\n      if (!detect$1().browser.isIE()) {\n        set$7(tabview, 'flex-basis', height + 'px');\n      } else {\n        remove$6(tabview, 'flex-basis');\n      }\n    };\n    var updateTabviewHeight = function (dialogBody, tabview, maxTabHeight) {\n      ancestor(dialogBody, '[role=\"dialog\"]').each(function (dialog) {\n        descendant(dialog, '[role=\"tablist\"]').each(function (tablist) {\n          maxTabHeight.get().map(function (height) {\n            set$7(tabview, 'height', '0');\n            set$7(tabview, 'flex-basis', '0');\n            return Math.min(height, getMaxTabviewHeight(dialog, tabview, tablist));\n          }).each(function (height) {\n            setTabviewHeight(tabview, height);\n          });\n        });\n      });\n    };\n    var getTabview = function (dialog) {\n      return descendant(dialog, '[role=\"tabpanel\"]');\n    };\n    var setMode = function (allTabs) {\n      var smartTabHeight = function () {\n        var maxTabHeight = value$1();\n        var extraEvents = [\n          runOnAttached(function (comp) {\n            var dialog = comp.element;\n            getTabview(dialog).each(function (tabview) {\n              set$7(tabview, 'visibility', 'hidden');\n              comp.getSystem().getByDom(tabview).toOptional().each(function (tabviewComp) {\n                var heights = measureHeights(allTabs, tabview, tabviewComp);\n                var maxTabHeightOpt = getMaxHeight(heights);\n                maxTabHeightOpt.fold(maxTabHeight.clear, maxTabHeight.set);\n              });\n              updateTabviewHeight(dialog, tabview, maxTabHeight);\n              remove$6(tabview, 'visibility');\n              showTab(allTabs, comp);\n              global$f.requestAnimationFrame(function () {\n                updateTabviewHeight(dialog, tabview, maxTabHeight);\n              });\n            });\n          }),\n          run$1(windowResize(), function (comp) {\n            var dialog = comp.element;\n            getTabview(dialog).each(function (tabview) {\n              updateTabviewHeight(dialog, tabview, maxTabHeight);\n            });\n          }),\n          run$1(formResizeEvent, function (comp, _se) {\n            var dialog = comp.element;\n            getTabview(dialog).each(function (tabview) {\n              var oldFocus = active(getRootNode(tabview));\n              set$7(tabview, 'visibility', 'hidden');\n              var oldHeight = getRaw(tabview, 'height').map(function (h) {\n                return parseInt(h, 10);\n              });\n              remove$6(tabview, 'height');\n              remove$6(tabview, 'flex-basis');\n              var newHeight = tabview.dom.getBoundingClientRect().height;\n              var hasGrown = oldHeight.forall(function (h) {\n                return newHeight > h;\n              });\n              if (hasGrown) {\n                maxTabHeight.set(newHeight);\n                updateTabviewHeight(dialog, tabview, maxTabHeight);\n              } else {\n                oldHeight.each(function (h) {\n                  setTabviewHeight(tabview, h);\n                });\n              }\n              remove$6(tabview, 'visibility');\n              oldFocus.each(focus$3);\n            });\n          })\n        ];\n        var selectFirst = false;\n        return {\n          extraEvents: extraEvents,\n          selectFirst: selectFirst\n        };\n      }();\n      var naiveTabHeight = function () {\n        var extraEvents = [];\n        var selectFirst = true;\n        return {\n          extraEvents: extraEvents,\n          selectFirst: selectFirst\n        };\n      }();\n      return {\n        smartTabHeight: smartTabHeight,\n        naiveTabHeight: naiveTabHeight\n      };\n    };\n\n    var SendDataToSectionChannel = 'send-data-to-section';\n    var SendDataToViewChannel = 'send-data-to-view';\n    var renderTabPanel = function (spec, backstage) {\n      var storedValue = Cell({});\n      var updateDataWithForm = function (form) {\n        var formData = Representing.getValue(form);\n        var validData = toValidValues(formData).getOr({});\n        var currentData = storedValue.get();\n        var newData = deepMerge(currentData, validData);\n        storedValue.set(newData);\n      };\n      var setDataOnForm = function (form) {\n        var tabData = storedValue.get();\n        Representing.setValue(form, tabData);\n      };\n      var oldTab = Cell(null);\n      var allTabs = map$2(spec.tabs, function (tab) {\n        return {\n          value: tab.name,\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__body-nav-item'],\n            innerHtml: backstage.shared.providers.translate(tab.title)\n          },\n          view: function () {\n            return [Form.sketch(function (parts) {\n                return {\n                  dom: {\n                    tag: 'div',\n                    classes: ['tox-form']\n                  },\n                  components: map$2(tab.items, function (item) {\n                    return interpretInForm(parts, item, backstage);\n                  }),\n                  formBehaviours: derive$1([\n                    Keying.config({\n                      mode: 'acyclic',\n                      useTabstopAt: not(isPseudoStop)\n                    }),\n                    config('TabView.form.events', [\n                      runOnAttached(setDataOnForm),\n                      runOnDetached(updateDataWithForm)\n                    ]),\n                    Receiving.config({\n                      channels: wrapAll([\n                        {\n                          key: SendDataToSectionChannel,\n                          value: { onReceive: updateDataWithForm }\n                        },\n                        {\n                          key: SendDataToViewChannel,\n                          value: { onReceive: setDataOnForm }\n                        }\n                      ])\n                    })\n                  ])\n                };\n              })];\n          }\n        };\n      });\n      var tabMode = setMode(allTabs).smartTabHeight;\n      return TabSection.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__body']\n        },\n        onChangeTab: function (section, button, _viewItems) {\n          var name = Representing.getValue(button);\n          emitWith(section, formTabChangeEvent, {\n            name: name,\n            oldName: oldTab.get()\n          });\n          oldTab.set(name);\n        },\n        tabs: allTabs,\n        components: [\n          TabSection.parts.tabbar({\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-nav']\n            },\n            components: [Tabbar.parts.tabs({})],\n            markers: {\n              tabClass: 'tox-tab',\n              selectedClass: 'tox-dialog__body-nav-item--active'\n            },\n            tabbarBehaviours: derive$1([Tabstopping.config({})])\n          }),\n          TabSection.parts.tabview({\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-content']\n            }\n          })\n        ],\n        selectFirst: tabMode.selectFirst,\n        tabSectionBehaviours: derive$1([\n          config('tabpanel', tabMode.extraEvents),\n          Keying.config({ mode: 'acyclic' }),\n          Composing.config({\n            find: function (comp) {\n              return head(TabSection.getViewItems(comp));\n            }\n          }),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (tsection) {\n                tsection.getSystem().broadcastOn([SendDataToSectionChannel], {});\n                return storedValue.get();\n              },\n              setValue: function (tsection, value) {\n                storedValue.set(value);\n                tsection.getSystem().broadcastOn([SendDataToViewChannel], {});\n              }\n            }\n          })\n        ])\n      });\n    };\n\n    var dialogChannel = generate$6('update-dialog');\n    var titleChannel = generate$6('update-title');\n    var bodyChannel = generate$6('update-body');\n    var footerChannel = generate$6('update-footer');\n    var bodySendMessageChannel = generate$6('body-send-message');\n\n    var renderBody = function (spec, id, backstage, ariaAttrs) {\n      var renderComponents = function (incoming) {\n        switch (incoming.body.type) {\n        case 'tabpanel': {\n            return [renderTabPanel(incoming.body, backstage)];\n          }\n        default: {\n            return [renderBodyPanel(incoming.body, backstage)];\n          }\n        }\n      };\n      var updateState = function (_comp, incoming) {\n        return Optional.some({\n          isTabPanel: function () {\n            return incoming.body.type === 'tabpanel';\n          }\n        });\n      };\n      var ariaAttributes = { 'aria-live': 'polite' };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__content-js'],\n          attributes: __assign(__assign({}, id.map(function (x) {\n            return { id: x };\n          }).getOr({})), ariaAttrs ? ariaAttributes : {})\n        },\n        components: [],\n        behaviours: derive$1([\n          ComposingConfigs.childAt(0),\n          Reflecting.config({\n            channel: bodyChannel,\n            updateState: updateState,\n            renderComponents: renderComponents,\n            initialData: spec\n          })\n        ])\n      };\n    };\n    var renderInlineBody = function (spec, contentId, backstage, ariaAttrs) {\n      return renderBody(spec, Optional.some(contentId), backstage, ariaAttrs);\n    };\n    var renderModalBody = function (spec, backstage) {\n      var bodySpec = renderBody(spec, Optional.none(), backstage, false);\n      return ModalDialog.parts.body(bodySpec);\n    };\n    var renderIframeBody = function (spec) {\n      var bodySpec = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__content-js']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-iframe']\n            },\n            components: [craft({\n                dom: {\n                  tag: 'iframe',\n                  attributes: { src: spec.url }\n                },\n                behaviours: derive$1([\n                  Tabstopping.config({}),\n                  Focusing.config({})\n                ])\n              })]\n          }],\n        behaviours: derive$1([Keying.config({\n            mode: 'acyclic',\n            useTabstopAt: not(isPseudoStop)\n          })])\n      };\n      return ModalDialog.parts.body(bodySpec);\n    };\n\n    var isTouch = global$9.deviceType.isTouch();\n    var hiddenHeader = function (title, close) {\n      return {\n        dom: {\n          tag: 'div',\n          styles: { display: 'none' },\n          classes: ['tox-dialog__header']\n        },\n        components: [\n          title,\n          close\n        ]\n      };\n    };\n    var pClose = function (onClose, providersBackstage) {\n      return ModalDialog.parts.close(Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-button',\n            'tox-button--icon',\n            'tox-button--naked'\n          ],\n          attributes: {\n            'type': 'button',\n            'aria-label': providersBackstage.translate('Close')\n          }\n        },\n        action: onClose,\n        buttonBehaviours: derive$1([Tabstopping.config({})])\n      }));\n    };\n    var pUntitled = function () {\n      return ModalDialog.parts.title({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__title'],\n          innerHtml: '',\n          styles: { display: 'none' }\n        }\n      });\n    };\n    var pBodyMessage = function (message, providersBackstage) {\n      return ModalDialog.parts.body({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__body']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-content']\n            },\n            components: [{ dom: fromHtml('<p>' + sanitizeHtmlString(providersBackstage.translate(message)) + '</p>') }]\n          }]\n      });\n    };\n    var pFooter = function (buttons) {\n      return ModalDialog.parts.footer({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__footer']\n        },\n        components: buttons\n      });\n    };\n    var pFooterGroup = function (startButtons, endButtons) {\n      return [\n        Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__footer-start']\n          },\n          components: startButtons\n        }),\n        Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__footer-end']\n          },\n          components: endButtons\n        })\n      ];\n    };\n    var renderDialog$1 = function (spec) {\n      var _a;\n      var dialogClass = 'tox-dialog';\n      var blockerClass = dialogClass + '-wrap';\n      var blockerBackdropClass = blockerClass + '__backdrop';\n      var scrollLockClass = dialogClass + '__disable-scroll';\n      return ModalDialog.sketch({\n        lazySink: spec.lazySink,\n        onEscape: function (comp) {\n          spec.onEscape(comp);\n          return Optional.some(true);\n        },\n        useTabstopAt: function (elem) {\n          return !isPseudoStop(elem);\n        },\n        dom: {\n          tag: 'div',\n          classes: [dialogClass].concat(spec.extraClasses),\n          styles: __assign({ position: 'relative' }, spec.extraStyles)\n        },\n        components: __spreadArray([\n          spec.header,\n          spec.body\n        ], spec.footer.toArray(), true),\n        parts: {\n          blocker: {\n            dom: fromHtml('<div class=\"' + blockerClass + '\"></div>'),\n            components: [{\n                dom: {\n                  tag: 'div',\n                  classes: isTouch ? [\n                    blockerBackdropClass,\n                    blockerBackdropClass + '--opaque'\n                  ] : [blockerBackdropClass]\n                }\n              }]\n          }\n        },\n        dragBlockClass: blockerClass,\n        modalBehaviours: derive$1(__spreadArray([\n          Focusing.config({}),\n          config('dialog-events', spec.dialogEvents.concat([runOnSource(focusin(), function (comp, _se) {\n              Keying.focusIn(comp);\n            })])),\n          config('scroll-lock', [\n            runOnAttached(function () {\n              add$2(body(), scrollLockClass);\n            }),\n            runOnDetached(function () {\n              remove$2(body(), scrollLockClass);\n            })\n          ])\n        ], spec.extraBehaviours, true)),\n        eventOrder: __assign((_a = {}, _a[execute$5()] = ['dialog-events'], _a[attachedToDom()] = [\n          'scroll-lock',\n          'dialog-events',\n          'alloy.base.behaviour'\n        ], _a[detachedFromDom()] = [\n          'alloy.base.behaviour',\n          'dialog-events',\n          'scroll-lock'\n        ], _a), spec.eventOrder)\n      });\n    };\n\n    var renderClose = function (providersBackstage) {\n      return Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-button',\n            'tox-button--icon',\n            'tox-button--naked'\n          ],\n          attributes: {\n            'type': 'button',\n            'aria-label': providersBackstage.translate('Close'),\n            'title': providersBackstage.translate('Close')\n          }\n        },\n        components: [render$3('close', {\n            tag: 'div',\n            classes: ['tox-icon']\n          }, providersBackstage.icons)],\n        action: function (comp) {\n          emit(comp, formCancelEvent);\n        }\n      });\n    };\n    var renderTitle = function (spec, id, providersBackstage) {\n      var renderComponents = function (data) {\n        return [text$1(providersBackstage.translate(data.title))];\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__title'],\n          attributes: __assign({}, id.map(function (x) {\n            return { id: x };\n          }).getOr({}))\n        },\n        components: renderComponents(spec),\n        behaviours: derive$1([Reflecting.config({\n            channel: titleChannel,\n            renderComponents: renderComponents\n          })])\n      };\n    };\n    var renderDragHandle = function () {\n      return { dom: fromHtml('<div class=\"tox-dialog__draghandle\"></div>') };\n    };\n    var renderInlineHeader = function (spec, titleId, providersBackstage) {\n      return Container.sketch({\n        dom: fromHtml('<div class=\"tox-dialog__header\"></div>'),\n        components: [\n          renderTitle(spec, Optional.some(titleId), providersBackstage),\n          renderDragHandle(),\n          renderClose(providersBackstage)\n        ],\n        containerBehaviours: derive$1([Dragging.config({\n            mode: 'mouse',\n            blockerClass: 'blocker',\n            getTarget: function (handle) {\n              return closest$1(handle, '[role=\"dialog\"]').getOrDie();\n            },\n            snaps: {\n              getSnapPoints: function () {\n                return [];\n              },\n              leftAttr: 'data-drag-left',\n              topAttr: 'data-drag-top'\n            }\n          })])\n      });\n    };\n    var renderModalHeader = function (spec, providersBackstage) {\n      var pTitle = ModalDialog.parts.title(renderTitle(spec, Optional.none(), providersBackstage));\n      var pHandle = ModalDialog.parts.draghandle(renderDragHandle());\n      var pClose = ModalDialog.parts.close(renderClose(providersBackstage));\n      var components = [pTitle].concat(spec.draggable ? [pHandle] : []).concat([pClose]);\n      return Container.sketch({\n        dom: fromHtml('<div class=\"tox-dialog__header\"></div>'),\n        components: components\n      });\n    };\n\n    var getHeader = function (title, backstage) {\n      return renderModalHeader({\n        title: backstage.shared.providers.translate(title),\n        draggable: backstage.dialog.isDraggableModal()\n      }, backstage.shared.providers);\n    };\n    var getBusySpec = function (message, bs, providers) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__busy-spinner'],\n          attributes: { 'aria-label': providers.translate(message) },\n          styles: {\n            left: '0px',\n            right: '0px',\n            bottom: '0px',\n            top: '0px',\n            position: 'absolute'\n          }\n        },\n        behaviours: bs,\n        components: [{ dom: fromHtml('<div class=\"tox-spinner\"><div></div><div></div><div></div></div>') }]\n      };\n    };\n    var getEventExtras = function (lazyDialog, providers, extra) {\n      return {\n        onClose: function () {\n          return extra.closeWindow();\n        },\n        onBlock: function (blockEvent) {\n          ModalDialog.setBusy(lazyDialog(), function (_comp, bs) {\n            return getBusySpec(blockEvent.message, bs, providers);\n          });\n        },\n        onUnblock: function () {\n          ModalDialog.setIdle(lazyDialog());\n        }\n      };\n    };\n    var renderModalDialog = function (spec, initialData, dialogEvents, backstage) {\n      var _a;\n      var updateState = function (_comp, incoming) {\n        return Optional.some(incoming);\n      };\n      return build$1(renderDialog$1(__assign(__assign({}, spec), {\n        lazySink: backstage.shared.getSink,\n        extraBehaviours: __spreadArray([\n          Reflecting.config({\n            channel: dialogChannel,\n            updateState: updateState,\n            initialData: initialData\n          }),\n          RepresentingConfigs.memory({})\n        ], spec.extraBehaviours, true),\n        onEscape: function (comp) {\n          emit(comp, formCancelEvent);\n        },\n        dialogEvents: dialogEvents,\n        eventOrder: (_a = {}, _a[receive()] = [\n          Reflecting.name(),\n          Receiving.name()\n        ], _a[attachedToDom()] = [\n          'scroll-lock',\n          Reflecting.name(),\n          'messages',\n          'dialog-events',\n          'alloy.base.behaviour'\n        ], _a[detachedFromDom()] = [\n          'alloy.base.behaviour',\n          'dialog-events',\n          'messages',\n          Reflecting.name(),\n          'scroll-lock'\n        ], _a)\n      })));\n    };\n    var mapMenuButtons = function (buttons) {\n      var mapItems = function (button) {\n        var items = map$2(button.items, function (item) {\n          var cell = Cell(false);\n          return __assign(__assign({}, item), { storage: cell });\n        });\n        return __assign(__assign({}, button), { items: items });\n      };\n      return map$2(buttons, function (button) {\n        if (button.type === 'menu') {\n          return mapItems(button);\n        }\n        return button;\n      });\n    };\n    var extractCellsToObject = function (buttons) {\n      return foldl(buttons, function (acc, button) {\n        if (button.type === 'menu') {\n          var menuButton = button;\n          return foldl(menuButton.items, function (innerAcc, item) {\n            innerAcc[item.name] = item.storage;\n            return innerAcc;\n          }, acc);\n        }\n        return acc;\n      }, {});\n    };\n\n    var initCommonEvents = function (fireApiEvent, extras) {\n      return [\n        runWithTarget(focusin(), onFocus),\n        fireApiEvent(formCloseEvent, function (_api, spec) {\n          extras.onClose();\n          spec.onClose();\n        }),\n        fireApiEvent(formCancelEvent, function (api, spec, _event, self) {\n          spec.onCancel(api);\n          emit(self, formCloseEvent);\n        }),\n        run$1(formUnblockEvent, function (_c, _se) {\n          return extras.onUnblock();\n        }),\n        run$1(formBlockEvent, function (_c, se) {\n          return extras.onBlock(se.event);\n        })\n      ];\n    };\n    var initUrlDialog = function (getInstanceApi, extras) {\n      var fireApiEvent = function (eventName, f) {\n        return run$1(eventName, function (c, se) {\n          withSpec(c, function (spec, _c) {\n            f(getInstanceApi(), spec, se.event, c);\n          });\n        });\n      };\n      var withSpec = function (c, f) {\n        Reflecting.getState(c).get().each(function (currentDialog) {\n          f(currentDialog, c);\n        });\n      };\n      return __spreadArray(__spreadArray([], initCommonEvents(fireApiEvent, extras), true), [fireApiEvent(formActionEvent, function (api, spec, event) {\n          spec.onAction(api, { name: event.name });\n        })], false);\n    };\n    var initDialog = function (getInstanceApi, extras, getSink) {\n      var fireApiEvent = function (eventName, f) {\n        return run$1(eventName, function (c, se) {\n          withSpec(c, function (spec, _c) {\n            f(getInstanceApi(), spec, se.event, c);\n          });\n        });\n      };\n      var withSpec = function (c, f) {\n        Reflecting.getState(c).get().each(function (currentDialogInit) {\n          f(currentDialogInit.internalDialog, c);\n        });\n      };\n      return __spreadArray(__spreadArray([], initCommonEvents(fireApiEvent, extras), true), [\n        fireApiEvent(formSubmitEvent, function (api, spec) {\n          return spec.onSubmit(api);\n        }),\n        fireApiEvent(formChangeEvent, function (api, spec, event) {\n          spec.onChange(api, { name: event.name });\n        }),\n        fireApiEvent(formActionEvent, function (api, spec, event, component) {\n          var focusIn = function () {\n            return Keying.focusIn(component);\n          };\n          var isDisabled = function (focused) {\n            return has$1(focused, 'disabled') || getOpt(focused, 'aria-disabled').exists(function (val) {\n              return val === 'true';\n            });\n          };\n          var rootNode = getRootNode(component.element);\n          var current = active(rootNode);\n          spec.onAction(api, {\n            name: event.name,\n            value: event.value\n          });\n          active(rootNode).fold(focusIn, function (focused) {\n            if (isDisabled(focused)) {\n              focusIn();\n            } else if (current.exists(function (cur) {\n                return contains(focused, cur) && isDisabled(cur);\n              })) {\n              focusIn();\n            } else {\n              getSink().toOptional().filter(function (sink) {\n                return !contains(sink.element, focused);\n              }).each(focusIn);\n            }\n          });\n        }),\n        fireApiEvent(formTabChangeEvent, function (api, spec, event) {\n          spec.onTabChange(api, {\n            newTabName: event.name,\n            oldTabName: event.oldName\n          });\n        }),\n        runOnDetached(function (component) {\n          var api = getInstanceApi();\n          Representing.setValue(component, api.getData());\n        })\n      ], false);\n    };\n    var SilverDialogEvents = {\n      initUrlDialog: initUrlDialog,\n      initDialog: initDialog\n    };\n\n    var makeButton = function (button, backstage) {\n      return renderFooterButton(button, button.type, backstage);\n    };\n    var lookup = function (compInSystem, footerButtons, buttonName) {\n      return find$5(footerButtons, function (button) {\n        return button.name === buttonName;\n      }).bind(function (memButton) {\n        return memButton.memento.getOpt(compInSystem);\n      });\n    };\n    var renderComponents = function (_data, state) {\n      var footerButtons = state.map(function (s) {\n        return s.footerButtons;\n      }).getOr([]);\n      var buttonGroups = partition$3(footerButtons, function (button) {\n        return button.align === 'start';\n      });\n      var makeGroup = function (edge, buttons) {\n        return Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__footer-' + edge]\n          },\n          components: map$2(buttons, function (button) {\n            return button.memento.asSpec();\n          })\n        });\n      };\n      var startButtons = makeGroup('start', buttonGroups.pass);\n      var endButtons = makeGroup('end', buttonGroups.fail);\n      return [\n        startButtons,\n        endButtons\n      ];\n    };\n    var renderFooter = function (initSpec, backstage) {\n      var updateState = function (_comp, data) {\n        var footerButtons = map$2(data.buttons, function (button) {\n          var memButton = record(makeButton(button, backstage));\n          return {\n            name: button.name,\n            align: button.align,\n            memento: memButton\n          };\n        });\n        var lookupByName = function (compInSystem, buttonName) {\n          return lookup(compInSystem, footerButtons, buttonName);\n        };\n        return Optional.some({\n          lookupByName: lookupByName,\n          footerButtons: footerButtons\n        });\n      };\n      return {\n        dom: fromHtml('<div class=\"tox-dialog__footer\"></div>'),\n        components: [],\n        behaviours: derive$1([Reflecting.config({\n            channel: footerChannel,\n            initialData: initSpec,\n            updateState: updateState,\n            renderComponents: renderComponents\n          })])\n      };\n    };\n    var renderInlineFooter = function (initSpec, backstage) {\n      return renderFooter(initSpec, backstage);\n    };\n    var renderModalFooter = function (initSpec, backstage) {\n      return ModalDialog.parts.footer(renderFooter(initSpec, backstage));\n    };\n\n    var getCompByName = function (access, name) {\n      var root = access.getRoot();\n      if (root.getSystem().isConnected()) {\n        var form_1 = Composing.getCurrent(access.getFormWrapper()).getOr(access.getFormWrapper());\n        return Form.getField(form_1, name).fold(function () {\n          var footer = access.getFooter();\n          var footerState = Reflecting.getState(footer);\n          return footerState.get().bind(function (f) {\n            return f.lookupByName(form_1, name);\n          });\n        }, function (comp) {\n          return Optional.some(comp);\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n    var validateData$1 = function (access, data) {\n      var root = access.getRoot();\n      return Reflecting.getState(root).get().map(function (dialogState) {\n        return getOrDie(asRaw('data', dialogState.dataValidator, data));\n      }).getOr(data);\n    };\n    var getDialogApi = function (access, doRedial, menuItemStates) {\n      var withRoot = function (f) {\n        var root = access.getRoot();\n        if (root.getSystem().isConnected()) {\n          f(root);\n        }\n      };\n      var getData = function () {\n        var root = access.getRoot();\n        var valueComp = root.getSystem().isConnected() ? access.getFormWrapper() : root;\n        var representedValues = Representing.getValue(valueComp);\n        var menuItemCurrentState = map$1(menuItemStates, function (cell) {\n          return cell.get();\n        });\n        return __assign(__assign({}, representedValues), menuItemCurrentState);\n      };\n      var setData = function (newData) {\n        withRoot(function (_) {\n          var prevData = instanceApi.getData();\n          var mergedData = __assign(__assign({}, prevData), newData);\n          var newInternalData = validateData$1(access, mergedData);\n          var form = access.getFormWrapper();\n          Representing.setValue(form, newInternalData);\n          each(menuItemStates, function (v, k) {\n            if (has$2(mergedData, k)) {\n              v.set(mergedData[k]);\n            }\n          });\n        });\n      };\n      var disable = function (name) {\n        getCompByName(access, name).each(Disabling.disable);\n      };\n      var enable = function (name) {\n        getCompByName(access, name).each(Disabling.enable);\n      };\n      var focus = function (name) {\n        getCompByName(access, name).each(Focusing.focus);\n      };\n      var block = function (message) {\n        if (!isString(message)) {\n          throw new Error('The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument');\n        }\n        withRoot(function (root) {\n          emitWith(root, formBlockEvent, { message: message });\n        });\n      };\n      var unblock = function () {\n        withRoot(function (root) {\n          emit(root, formUnblockEvent);\n        });\n      };\n      var showTab = function (name) {\n        withRoot(function (_) {\n          var body = access.getBody();\n          var bodyState = Reflecting.getState(body);\n          if (bodyState.get().exists(function (b) {\n              return b.isTabPanel();\n            })) {\n            Composing.getCurrent(body).each(function (tabSection) {\n              TabSection.showTab(tabSection, name);\n            });\n          }\n        });\n      };\n      var redial = function (d) {\n        withRoot(function (root) {\n          var dialogInit = doRedial(d);\n          root.getSystem().broadcastOn([dialogChannel], dialogInit);\n          root.getSystem().broadcastOn([titleChannel], dialogInit.internalDialog);\n          root.getSystem().broadcastOn([bodyChannel], dialogInit.internalDialog);\n          root.getSystem().broadcastOn([footerChannel], dialogInit.internalDialog);\n          instanceApi.setData(dialogInit.initialData);\n        });\n      };\n      var close = function () {\n        withRoot(function (root) {\n          emit(root, formCloseEvent);\n        });\n      };\n      var instanceApi = {\n        getData: getData,\n        setData: setData,\n        disable: disable,\n        enable: enable,\n        focus: focus,\n        block: block,\n        unblock: unblock,\n        showTab: showTab,\n        redial: redial,\n        close: close\n      };\n      return instanceApi;\n    };\n\n    var getDialogSizeClasses = function (size) {\n      switch (size) {\n      case 'large':\n        return ['tox-dialog--width-lg'];\n      case 'medium':\n        return ['tox-dialog--width-md'];\n      default:\n        return [];\n      }\n    };\n    var renderDialog = function (dialogInit, extra, backstage) {\n      var header = getHeader(dialogInit.internalDialog.title, backstage);\n      var body = renderModalBody({ body: dialogInit.internalDialog.body }, backstage);\n      var storagedMenuButtons = mapMenuButtons(dialogInit.internalDialog.buttons);\n      var objOfCells = extractCellsToObject(storagedMenuButtons);\n      var footer = renderModalFooter({ buttons: storagedMenuButtons }, backstage);\n      var dialogEvents = SilverDialogEvents.initDialog(function () {\n        return instanceApi;\n      }, getEventExtras(function () {\n        return dialog;\n      }, backstage.shared.providers, extra), backstage.shared.getSink);\n      var dialogSize = getDialogSizeClasses(dialogInit.internalDialog.size);\n      var spec = {\n        header: header,\n        body: body,\n        footer: Optional.some(footer),\n        extraClasses: dialogSize,\n        extraBehaviours: [],\n        extraStyles: {}\n      };\n      var dialog = renderModalDialog(spec, dialogInit, dialogEvents, backstage);\n      var modalAccess = function () {\n        var getForm = function () {\n          var outerForm = ModalDialog.getBody(dialog);\n          return Composing.getCurrent(outerForm).getOr(outerForm);\n        };\n        return {\n          getRoot: constant$1(dialog),\n          getBody: function () {\n            return ModalDialog.getBody(dialog);\n          },\n          getFooter: function () {\n            return ModalDialog.getFooter(dialog);\n          },\n          getFormWrapper: getForm\n        };\n      }();\n      var instanceApi = getDialogApi(modalAccess, extra.redial, objOfCells);\n      return {\n        dialog: dialog,\n        instanceApi: instanceApi\n      };\n    };\n\n    var renderInlineDialog = function (dialogInit, extra, backstage, ariaAttrs) {\n      var _a, _b;\n      var dialogLabelId = generate$6('dialog-label');\n      var dialogContentId = generate$6('dialog-content');\n      var updateState = function (_comp, incoming) {\n        return Optional.some(incoming);\n      };\n      var memHeader = record(renderInlineHeader({\n        title: dialogInit.internalDialog.title,\n        draggable: true\n      }, dialogLabelId, backstage.shared.providers));\n      var memBody = record(renderInlineBody({ body: dialogInit.internalDialog.body }, dialogContentId, backstage, ariaAttrs));\n      var storagedMenuButtons = mapMenuButtons(dialogInit.internalDialog.buttons);\n      var objOfCells = extractCellsToObject(storagedMenuButtons);\n      var memFooter = record(renderInlineFooter({ buttons: storagedMenuButtons }, backstage));\n      var dialogEvents = SilverDialogEvents.initDialog(function () {\n        return instanceApi;\n      }, {\n        onBlock: function (event) {\n          Blocking.block(dialog, function (_comp, bs) {\n            return getBusySpec(event.message, bs, backstage.shared.providers);\n          });\n        },\n        onUnblock: function () {\n          Blocking.unblock(dialog);\n        },\n        onClose: function () {\n          return extra.closeWindow();\n        }\n      }, backstage.shared.getSink);\n      var dialog = build$1({\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-dialog',\n            'tox-dialog-inline'\n          ],\n          attributes: (_a = { role: 'dialog' }, _a['aria-labelledby'] = dialogLabelId, _a['aria-describedby'] = dialogContentId, _a)\n        },\n        eventOrder: (_b = {}, _b[receive()] = [\n          Reflecting.name(),\n          Receiving.name()\n        ], _b[execute$5()] = ['execute-on-form'], _b[attachedToDom()] = [\n          'reflecting',\n          'execute-on-form'\n        ], _b),\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'cyclic',\n            onEscape: function (c) {\n              emit(c, formCloseEvent);\n              return Optional.some(true);\n            },\n            useTabstopAt: function (elem) {\n              return !isPseudoStop(elem) && (name$2(elem) !== 'button' || get$d(elem, 'disabled') !== 'disabled');\n            }\n          }),\n          Reflecting.config({\n            channel: dialogChannel,\n            updateState: updateState,\n            initialData: dialogInit\n          }),\n          Focusing.config({}),\n          config('execute-on-form', dialogEvents.concat([runOnSource(focusin(), function (comp, _se) {\n              Keying.focusIn(comp);\n            })])),\n          Blocking.config({\n            getRoot: function () {\n              return Optional.some(dialog);\n            }\n          }),\n          Replacing.config({}),\n          RepresentingConfigs.memory({})\n        ]),\n        components: [\n          memHeader.asSpec(),\n          memBody.asSpec(),\n          memFooter.asSpec()\n        ]\n      });\n      var instanceApi = getDialogApi({\n        getRoot: constant$1(dialog),\n        getFooter: function () {\n          return memFooter.get(dialog);\n        },\n        getBody: function () {\n          return memBody.get(dialog);\n        },\n        getFormWrapper: function () {\n          var body = memBody.get(dialog);\n          return Composing.getCurrent(body).getOr(body);\n        }\n      }, extra.redial, objOfCells);\n      return {\n        dialog: dialog,\n        instanceApi: instanceApi\n      };\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.URI');\n\n    var getUrlDialogApi = function (root) {\n      var withRoot = function (f) {\n        if (root.getSystem().isConnected()) {\n          f(root);\n        }\n      };\n      var block = function (message) {\n        if (!isString(message)) {\n          throw new Error('The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument');\n        }\n        withRoot(function (root) {\n          emitWith(root, formBlockEvent, { message: message });\n        });\n      };\n      var unblock = function () {\n        withRoot(function (root) {\n          emit(root, formUnblockEvent);\n        });\n      };\n      var close = function () {\n        withRoot(function (root) {\n          emit(root, formCloseEvent);\n        });\n      };\n      var sendMessage = function (data) {\n        withRoot(function (root) {\n          root.getSystem().broadcastOn([bodySendMessageChannel], data);\n        });\n      };\n      return {\n        block: block,\n        unblock: unblock,\n        close: close,\n        sendMessage: sendMessage\n      };\n    };\n\n    var SUPPORTED_MESSAGE_ACTIONS = [\n      'insertContent',\n      'setContent',\n      'execCommand',\n      'close',\n      'block',\n      'unblock'\n    ];\n    var isSupportedMessage = function (data) {\n      return isObject(data) && SUPPORTED_MESSAGE_ACTIONS.indexOf(data.mceAction) !== -1;\n    };\n    var isCustomMessage = function (data) {\n      return !isSupportedMessage(data) && isObject(data) && has$2(data, 'mceAction');\n    };\n    var handleMessage = function (editor, api, data) {\n      switch (data.mceAction) {\n      case 'insertContent':\n        editor.insertContent(data.content);\n        break;\n      case 'setContent':\n        editor.setContent(data.content);\n        break;\n      case 'execCommand':\n        var ui = isBoolean(data.ui) ? data.ui : false;\n        editor.execCommand(data.cmd, ui, data.value);\n        break;\n      case 'close':\n        api.close();\n        break;\n      case 'block':\n        api.block(data.message);\n        break;\n      case 'unblock':\n        api.unblock();\n        break;\n      }\n    };\n    var renderUrlDialog = function (internalDialog, extra, editor, backstage) {\n      var _a;\n      var header = getHeader(internalDialog.title, backstage);\n      var body = renderIframeBody(internalDialog);\n      var footer = internalDialog.buttons.bind(function (buttons) {\n        if (buttons.length === 0) {\n          return Optional.none();\n        } else {\n          return Optional.some(renderModalFooter({ buttons: buttons }, backstage));\n        }\n      });\n      var dialogEvents = SilverDialogEvents.initUrlDialog(function () {\n        return instanceApi;\n      }, getEventExtras(function () {\n        return dialog;\n      }, backstage.shared.providers, extra));\n      var styles = __assign(__assign({}, internalDialog.height.fold(function () {\n        return {};\n      }, function (height) {\n        return {\n          'height': height + 'px',\n          'max-height': height + 'px'\n        };\n      })), internalDialog.width.fold(function () {\n        return {};\n      }, function (width) {\n        return {\n          'width': width + 'px',\n          'max-width': width + 'px'\n        };\n      }));\n      var classes = internalDialog.width.isNone() && internalDialog.height.isNone() ? ['tox-dialog--width-lg'] : [];\n      var iframeUri = new global$1(internalDialog.url, { base_uri: new global$1(window.location.href) });\n      var iframeDomain = iframeUri.protocol + '://' + iframeUri.host + (iframeUri.port ? ':' + iframeUri.port : '');\n      var messageHandlerUnbinder = unbindable();\n      var extraBehaviours = [\n        config('messages', [\n          runOnAttached(function () {\n            var unbind = bind(SugarElement.fromDom(window), 'message', function (e) {\n              if (iframeUri.isSameOrigin(new global$1(e.raw.origin))) {\n                var data = e.raw.data;\n                if (isSupportedMessage(data)) {\n                  handleMessage(editor, instanceApi, data);\n                } else if (isCustomMessage(data)) {\n                  internalDialog.onMessage(instanceApi, data);\n                }\n              }\n            });\n            messageHandlerUnbinder.set(unbind);\n          }),\n          runOnDetached(messageHandlerUnbinder.clear)\n        ]),\n        Receiving.config({\n          channels: (_a = {}, _a[bodySendMessageChannel] = {\n            onReceive: function (comp, data) {\n              descendant(comp.element, 'iframe').each(function (iframeEle) {\n                var iframeWin = iframeEle.dom.contentWindow;\n                iframeWin.postMessage(data, iframeDomain);\n              });\n            }\n          }, _a)\n        })\n      ];\n      var spec = {\n        header: header,\n        body: body,\n        footer: footer,\n        extraClasses: classes,\n        extraBehaviours: extraBehaviours,\n        extraStyles: styles\n      };\n      var dialog = renderModalDialog(spec, internalDialog, dialogEvents, backstage);\n      var instanceApi = getUrlDialogApi(dialog);\n      return {\n        dialog: dialog,\n        instanceApi: instanceApi\n      };\n    };\n\n    var setup$2 = function (extras) {\n      var sharedBackstage = extras.backstage.shared;\n      var open = function (message, callback) {\n        var closeDialog = function () {\n          ModalDialog.hide(alertDialog);\n          callback();\n        };\n        var memFooterClose = record(renderFooterButton({\n          name: 'close-alert',\n          text: 'OK',\n          primary: true,\n          align: 'end',\n          disabled: false,\n          icon: Optional.none()\n        }, 'cancel', extras.backstage));\n        var titleSpec = pUntitled();\n        var closeSpec = pClose(closeDialog, sharedBackstage.providers);\n        var alertDialog = build$1(renderDialog$1({\n          lazySink: function () {\n            return sharedBackstage.getSink();\n          },\n          header: hiddenHeader(titleSpec, closeSpec),\n          body: pBodyMessage(message, sharedBackstage.providers),\n          footer: Optional.some(pFooter(pFooterGroup([], [memFooterClose.asSpec()]))),\n          onEscape: closeDialog,\n          extraClasses: ['tox-alert-dialog'],\n          extraBehaviours: [],\n          extraStyles: {},\n          dialogEvents: [run$1(formCancelEvent, closeDialog)],\n          eventOrder: {}\n        }));\n        ModalDialog.show(alertDialog);\n        var footerCloseButton = memFooterClose.get(alertDialog);\n        Focusing.focus(footerCloseButton);\n      };\n      return { open: open };\n    };\n\n    var setup$1 = function (extras) {\n      var sharedBackstage = extras.backstage.shared;\n      var open = function (message, callback) {\n        var closeDialog = function (state) {\n          ModalDialog.hide(confirmDialog);\n          callback(state);\n        };\n        var memFooterYes = record(renderFooterButton({\n          name: 'yes',\n          text: 'Yes',\n          primary: true,\n          align: 'end',\n          disabled: false,\n          icon: Optional.none()\n        }, 'submit', extras.backstage));\n        var footerNo = renderFooterButton({\n          name: 'no',\n          text: 'No',\n          primary: false,\n          align: 'end',\n          disabled: false,\n          icon: Optional.none()\n        }, 'cancel', extras.backstage);\n        var titleSpec = pUntitled();\n        var closeSpec = pClose(function () {\n          return closeDialog(false);\n        }, sharedBackstage.providers);\n        var confirmDialog = build$1(renderDialog$1({\n          lazySink: function () {\n            return sharedBackstage.getSink();\n          },\n          header: hiddenHeader(titleSpec, closeSpec),\n          body: pBodyMessage(message, sharedBackstage.providers),\n          footer: Optional.some(pFooter(pFooterGroup([], [\n            footerNo,\n            memFooterYes.asSpec()\n          ]))),\n          onEscape: function () {\n            return closeDialog(false);\n          },\n          extraClasses: ['tox-confirm-dialog'],\n          extraBehaviours: [],\n          extraStyles: {},\n          dialogEvents: [\n            run$1(formCancelEvent, function () {\n              return closeDialog(false);\n            }),\n            run$1(formSubmitEvent, function () {\n              return closeDialog(true);\n            })\n          ],\n          eventOrder: {}\n        }));\n        ModalDialog.show(confirmDialog);\n        var footerYesButton = memFooterYes.get(confirmDialog);\n        Focusing.focus(footerYesButton);\n      };\n      return { open: open };\n    };\n\n    var validateData = function (data, validator) {\n      return getOrDie(asRaw('data', validator, data));\n    };\n    var isAlertOrConfirmDialog = function (target) {\n      return closest(target, '.tox-alert-dialog') || closest(target, '.tox-confirm-dialog');\n    };\n    var inlineAdditionalBehaviours = function (editor, isStickyToolbar, isToolbarLocationTop) {\n      if (isStickyToolbar && isToolbarLocationTop) {\n        return [];\n      } else {\n        return [Docking.config({\n            contextual: {\n              lazyContext: function () {\n                return Optional.some(box$1(SugarElement.fromDom(editor.getContentAreaContainer())));\n              },\n              fadeInClass: 'tox-dialog-dock-fadein',\n              fadeOutClass: 'tox-dialog-dock-fadeout',\n              transitionClass: 'tox-dialog-dock-transition'\n            },\n            modes: ['top']\n          })];\n      }\n    };\n    var setup = function (extras) {\n      var backstage = extras.backstage;\n      var editor = extras.editor;\n      var isStickyToolbar$1 = isStickyToolbar(editor);\n      var alertDialog = setup$2(extras);\n      var confirmDialog = setup$1(extras);\n      var open = function (config, params, closeWindow) {\n        if (params !== undefined && params.inline === 'toolbar') {\n          return openInlineDialog(config, backstage.shared.anchors.inlineDialog(), closeWindow, params.ariaAttrs);\n        } else if (params !== undefined && params.inline === 'cursor') {\n          return openInlineDialog(config, backstage.shared.anchors.cursor(), closeWindow, params.ariaAttrs);\n        } else {\n          return openModalDialog(config, closeWindow);\n        }\n      };\n      var openUrl = function (config, closeWindow) {\n        return openModalUrlDialog(config, closeWindow);\n      };\n      var openModalUrlDialog = function (config, closeWindow) {\n        var factory = function (contents) {\n          var dialog = renderUrlDialog(contents, {\n            closeWindow: function () {\n              ModalDialog.hide(dialog.dialog);\n              closeWindow(dialog.instanceApi);\n            }\n          }, editor, backstage);\n          ModalDialog.show(dialog.dialog);\n          return dialog.instanceApi;\n        };\n        return DialogManager.openUrl(factory, config);\n      };\n      var openModalDialog = function (config, closeWindow) {\n        var factory = function (contents, internalInitialData, dataValidator) {\n          var initialData = internalInitialData;\n          var dialogInit = {\n            dataValidator: dataValidator,\n            initialData: initialData,\n            internalDialog: contents\n          };\n          var dialog = renderDialog(dialogInit, {\n            redial: DialogManager.redial,\n            closeWindow: function () {\n              ModalDialog.hide(dialog.dialog);\n              closeWindow(dialog.instanceApi);\n            }\n          }, backstage);\n          ModalDialog.show(dialog.dialog);\n          dialog.instanceApi.setData(initialData);\n          return dialog.instanceApi;\n        };\n        return DialogManager.open(factory, config);\n      };\n      var openInlineDialog = function (config$1, anchor, closeWindow, ariaAttrs) {\n        var factory = function (contents, internalInitialData, dataValidator) {\n          var initialData = validateData(internalInitialData, dataValidator);\n          var inlineDialog = value$1();\n          var isToolbarLocationTop = backstage.shared.header.isPositionedAtTop();\n          var dialogInit = {\n            dataValidator: dataValidator,\n            initialData: initialData,\n            internalDialog: contents\n          };\n          var refreshDocking = function () {\n            return inlineDialog.on(function (dialog) {\n              InlineView.reposition(dialog);\n              Docking.refresh(dialog);\n            });\n          };\n          var dialogUi = renderInlineDialog(dialogInit, {\n            redial: DialogManager.redial,\n            closeWindow: function () {\n              inlineDialog.on(InlineView.hide);\n              editor.off('ResizeEditor', refreshDocking);\n              inlineDialog.clear();\n              closeWindow(dialogUi.instanceApi);\n            }\n          }, backstage, ariaAttrs);\n          var inlineDialogComp = build$1(InlineView.sketch(__assign(__assign({\n            lazySink: backstage.shared.getSink,\n            dom: {\n              tag: 'div',\n              classes: []\n            },\n            fireDismissalEventInstead: {}\n          }, isToolbarLocationTop ? {} : { fireRepositionEventInstead: {} }), {\n            inlineBehaviours: derive$1(__spreadArray([config('window-manager-inline-events', [run$1(dismissRequested(), function (_comp, _se) {\n                  emit(dialogUi.dialog, formCancelEvent);\n                })])], inlineAdditionalBehaviours(editor, isStickyToolbar$1, isToolbarLocationTop), true)),\n            isExtraPart: function (_comp, target) {\n              return isAlertOrConfirmDialog(target);\n            }\n          })));\n          inlineDialog.set(inlineDialogComp);\n          InlineView.showWithin(inlineDialogComp, premade(dialogUi.dialog), { anchor: anchor }, Optional.some(body()));\n          if (!isStickyToolbar$1 || !isToolbarLocationTop) {\n            Docking.refresh(inlineDialogComp);\n            editor.on('ResizeEditor', refreshDocking);\n          }\n          dialogUi.instanceApi.setData(initialData);\n          Keying.focusIn(dialogUi.dialog);\n          return dialogUi.instanceApi;\n        };\n        return DialogManager.open(factory, config$1);\n      };\n      var confirm = function (message, callback) {\n        confirmDialog.open(message, function (state) {\n          callback(state);\n        });\n      };\n      var alert = function (message, callback) {\n        alertDialog.open(message, function () {\n          callback();\n        });\n      };\n      var close = function (instanceApi) {\n        instanceApi.close();\n      };\n      return {\n        open: open,\n        openUrl: openUrl,\n        alert: alert,\n        close: close,\n        confirm: confirm\n      };\n    };\n\n    function Theme () {\n      global$g.add('silver', function (editor) {\n        var _a = setup$3(editor), uiMothership = _a.uiMothership, backstage = _a.backstage, renderUI = _a.renderUI, getUi = _a.getUi;\n        Autocompleter.register(editor, backstage.shared);\n        var windowMgr = setup({\n          editor: editor,\n          backstage: backstage\n        });\n        return {\n          renderUI: renderUI,\n          getWindowManagerImpl: constant$1(windowMgr),\n          getNotificationManagerImpl: function () {\n            return NotificationManagerImpl(editor, { backstage: backstage }, uiMothership);\n          },\n          ui: getUi()\n        };\n      });\n    }\n\n    Theme();\n\n}());\n","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.10.9 (2023-11-15)\n */\n(function () {\n    'use strict';\n\n    var typeOf$1 = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      if (x === undefined) {\n        return 'undefined';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isEquatableType = function (x) {\n      return [\n        'undefined',\n        'boolean',\n        'number',\n        'string',\n        'function',\n        'xml',\n        'null'\n      ].indexOf(x) !== -1;\n    };\n\n    var sort$1 = function (xs, compareFn) {\n      var clone = Array.prototype.slice.call(xs);\n      return clone.sort(compareFn);\n    };\n\n    var contramap = function (eqa, f) {\n      return eq$2(function (x, y) {\n        return eqa.eq(f(x), f(y));\n      });\n    };\n    var eq$2 = function (f) {\n      return { eq: f };\n    };\n    var tripleEq = eq$2(function (x, y) {\n      return x === y;\n    });\n    var eqString = tripleEq;\n    var eqArray = function (eqa) {\n      return eq$2(function (x, y) {\n        if (x.length !== y.length) {\n          return false;\n        }\n        var len = x.length;\n        for (var i = 0; i < len; i++) {\n          if (!eqa.eq(x[i], y[i])) {\n            return false;\n          }\n        }\n        return true;\n      });\n    };\n    var eqSortedArray = function (eqa, compareFn) {\n      return contramap(eqArray(eqa), function (xs) {\n        return sort$1(xs, compareFn);\n      });\n    };\n    var eqRecord = function (eqa) {\n      return eq$2(function (x, y) {\n        var kx = Object.keys(x);\n        var ky = Object.keys(y);\n        if (!eqSortedArray(eqString).eq(kx, ky)) {\n          return false;\n        }\n        var len = kx.length;\n        for (var i = 0; i < len; i++) {\n          var q = kx[i];\n          if (!eqa.eq(x[q], y[q])) {\n            return false;\n          }\n        }\n        return true;\n      });\n    };\n    var eqAny = eq$2(function (x, y) {\n      if (x === y) {\n        return true;\n      }\n      var tx = typeOf$1(x);\n      var ty = typeOf$1(y);\n      if (tx !== ty) {\n        return false;\n      }\n      if (isEquatableType(tx)) {\n        return x === y;\n      } else if (tx === 'array') {\n        return eqArray(eqAny).eq(x, y);\n      } else if (tx === 'object') {\n        return eqRecord(eqAny).eq(x, y);\n      }\n      return false;\n    });\n\n    var typeOf = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType$1 = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var eq$1 = function (t) {\n      return function (a) {\n        return t === a;\n      };\n    };\n    var isString$1 = isType$1('string');\n    var isObject = isType$1('object');\n    var isArray$1 = isType$1('array');\n    var isNull = eq$1(null);\n    var isBoolean = isSimpleType('boolean');\n    var isUndefined = eq$1(undefined);\n    var isNullable = function (a) {\n      return a === null || a === undefined;\n    };\n    var isNonNullable = function (a) {\n      return !isNullable(a);\n    };\n    var isFunction = isSimpleType('function');\n    var isNumber = isSimpleType('number');\n\n    var noop = function () {\n    };\n    var compose = function (fa, fb) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return fa(fb.apply(null, args));\n      };\n    };\n    var compose1 = function (fbc, fab) {\n      return function (a) {\n        return fbc(fab(a));\n      };\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity = function (x) {\n      return x;\n    };\n    var tripleEquals = function (a, b) {\n      return a === b;\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var not = function (f) {\n      return function (t) {\n        return !f(t);\n      };\n    };\n    var die = function (msg) {\n      return function () {\n        throw new Error(msg);\n      };\n    };\n    var apply = function (f) {\n      return f();\n    };\n    var call = function (f) {\n      f();\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = identity;\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: function () {\n          return none();\n        },\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        }\n      };\n      return me;\n    };\n    var from$1 = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none,\n      from: from$1\n    };\n\n    var nativeSlice = Array.prototype.slice;\n    var nativeIndexOf = Array.prototype.indexOf;\n    var nativePush = Array.prototype.push;\n    var rawIndexOf = function (ts, t) {\n      return nativeIndexOf.call(ts, t);\n    };\n    var indexOf$2 = function (xs, x) {\n      var r = rawIndexOf(xs, x);\n      return r === -1 ? Optional.none() : Optional.some(r);\n    };\n    var contains$3 = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var exists = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var map$3 = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each$k = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var eachr = function (xs, f) {\n      for (var i = xs.length - 1; i >= 0; i--) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var partition = function (xs, pred) {\n      var pass = [];\n      var fail = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        var arr = pred(x, i) ? pass : fail;\n        arr.push(x);\n      }\n      return {\n        pass: pass,\n        fail: fail\n      };\n    };\n    var filter$4 = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var foldr = function (xs, f, acc) {\n      eachr(xs, function (x, i) {\n        acc = f(acc, x, i);\n      });\n      return acc;\n    };\n    var foldl = function (xs, f, acc) {\n      each$k(xs, function (x, i) {\n        acc = f(acc, x, i);\n      });\n      return acc;\n    };\n    var findUntil$1 = function (xs, pred, until) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(x);\n        } else if (until(x, i)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var find$3 = function (xs, pred) {\n      return findUntil$1(xs, pred, never);\n    };\n    var findIndex$2 = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(i);\n        }\n      }\n      return Optional.none();\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray$1(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      return flatten(map$3(xs, f));\n    };\n    var forall = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        var x = xs[i];\n        if (pred(x, i) !== true) {\n          return false;\n        }\n      }\n      return true;\n    };\n    var reverse = function (xs) {\n      var r = nativeSlice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    var difference = function (a1, a2) {\n      return filter$4(a1, function (x) {\n        return !contains$3(a2, x);\n      });\n    };\n    var mapToObject = function (xs, f) {\n      var r = {};\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        r[String(x)] = f(x, i);\n      }\n      return r;\n    };\n    var sort = function (xs, comparator) {\n      var copy = nativeSlice.call(xs, 0);\n      copy.sort(comparator);\n      return copy;\n    };\n    var get$a = function (xs, i) {\n      return i >= 0 && i < xs.length ? Optional.some(xs[i]) : Optional.none();\n    };\n    var head = function (xs) {\n      return get$a(xs, 0);\n    };\n    var last$2 = function (xs) {\n      return get$a(xs, xs.length - 1);\n    };\n    var from = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Optional.none();\n    };\n\n    var keys = Object.keys;\n    var hasOwnProperty$1 = Object.hasOwnProperty;\n    var each$j = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var map$2 = function (obj, f) {\n      return tupleMap(obj, function (x, i) {\n        return {\n          k: i,\n          v: f(x, i)\n        };\n      });\n    };\n    var tupleMap = function (obj, f) {\n      var r = {};\n      each$j(obj, function (x, i) {\n        var tuple = f(x, i);\n        r[tuple.k] = tuple.v;\n      });\n      return r;\n    };\n    var objAcc = function (r) {\n      return function (x, i) {\n        r[i] = x;\n      };\n    };\n    var internalFilter = function (obj, pred, onTrue, onFalse) {\n      var r = {};\n      each$j(obj, function (x, i) {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n      return r;\n    };\n    var bifilter = function (obj, pred) {\n      var t = {};\n      var f = {};\n      internalFilter(obj, pred, objAcc(t), objAcc(f));\n      return {\n        t: t,\n        f: f\n      };\n    };\n    var filter$3 = function (obj, pred) {\n      var t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n    var mapToArray = function (obj, f) {\n      var r = [];\n      each$j(obj, function (value, name) {\n        r.push(f(value, name));\n      });\n      return r;\n    };\n    var values = function (obj) {\n      return mapToArray(obj, identity);\n    };\n    var get$9 = function (obj, key) {\n      return has$2(obj, key) ? Optional.from(obj[key]) : Optional.none();\n    };\n    var has$2 = function (obj, key) {\n      return hasOwnProperty$1.call(obj, key);\n    };\n    var hasNonNullableKey = function (obj, key) {\n      return has$2(obj, key) && obj[key] !== undefined && obj[key] !== null;\n    };\n    var equal$1 = function (a1, a2, eq) {\n      if (eq === void 0) {\n        eq = eqAny;\n      }\n      return eqRecord(eq).eq(a1, a2);\n    };\n\n    var isArray = Array.isArray;\n    var toArray$1 = function (obj) {\n      if (!isArray(obj)) {\n        var array = [];\n        for (var i = 0, l = obj.length; i < l; i++) {\n          array[i] = obj[i];\n        }\n        return array;\n      } else {\n        return obj;\n      }\n    };\n    var each$i = function (o, cb, s) {\n      var n, l;\n      if (!o) {\n        return false;\n      }\n      s = s || o;\n      if (o.length !== undefined) {\n        for (n = 0, l = o.length; n < l; n++) {\n          if (cb.call(s, o[n], n, o) === false) {\n            return false;\n          }\n        }\n      } else {\n        for (n in o) {\n          if (has$2(o, n)) {\n            if (cb.call(s, o[n], n, o) === false) {\n              return false;\n            }\n          }\n        }\n      }\n      return true;\n    };\n    var map$1 = function (array, callback) {\n      var out = [];\n      each$i(array, function (item, index) {\n        out.push(callback(item, index, array));\n      });\n      return out;\n    };\n    var filter$2 = function (a, f) {\n      var o = [];\n      each$i(a, function (v, index) {\n        if (!f || f(v, index, a)) {\n          o.push(v);\n        }\n      });\n      return o;\n    };\n    var indexOf$1 = function (a, v) {\n      if (a) {\n        for (var i = 0, l = a.length; i < l; i++) {\n          if (a[i] === v) {\n            return i;\n          }\n        }\n      }\n      return -1;\n    };\n    var reduce = function (collection, iteratee, accumulator, thisArg) {\n      var acc = isUndefined(accumulator) ? collection[0] : accumulator;\n      for (var i = 0; i < collection.length; i++) {\n        acc = iteratee.call(thisArg, acc, collection[i], i);\n      }\n      return acc;\n    };\n    var findIndex$1 = function (array, predicate, thisArg) {\n      var i, l;\n      for (i = 0, l = array.length; i < l; i++) {\n        if (predicate.call(thisArg, array[i], i, array)) {\n          return i;\n        }\n      }\n      return -1;\n    };\n    var last$1 = function (collection) {\n      return collection[collection.length - 1];\n    };\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n    function __rest(s, e) {\n      var t = {};\n      for (var p in s)\n        if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n          t[p] = s[p];\n      if (s != null && typeof Object.getOwnPropertySymbols === 'function')\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n            t[p[i]] = s[p[i]];\n        }\n      return t;\n    }\n    function __spreadArray(to, from, pack) {\n      if (pack || arguments.length === 2)\n        for (var i = 0, l = from.length, ar; i < l; i++) {\n          if (ar || !(i in from)) {\n            if (!ar)\n              ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n          }\n        }\n      return to.concat(ar || Array.prototype.slice.call(from));\n    }\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var DeviceType = function (os, browser, userAgent, mediaMatch) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isMobile = os.isiOS() || os.isAndroid();\n      var isTouch = isMobile || mediaMatch('(pointer:coarse)');\n      var isTablet = isiPad || !isiPhone && isMobile && mediaMatch('(min-device-width:768px)');\n      var isPhone = isiPhone || isMobile && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      var isDesktop = !isPhone && !isTablet && !iOSwebview;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview),\n        isDesktop: constant(isDesktop)\n      };\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find$2 = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu$4(group(1), group(2));\n    };\n    var detect$3 = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown$2();\n      }\n      return find$2(versionRegexes, cleanedAgent);\n    };\n    var unknown$2 = function () {\n      return nu$4(0, 0);\n    };\n    var nu$4 = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu$4,\n      detect: detect$3,\n      unknown: unknown$2\n    };\n\n    var detectBrowser$1 = function (browsers, userAgentData) {\n      return findMap(userAgentData.brands, function (uaBrand) {\n        var lcBrand = uaBrand.brand.toLowerCase();\n        return find$3(browsers, function (browser) {\n          var _a;\n          return lcBrand === ((_a = browser.brand) === null || _a === void 0 ? void 0 : _a.toLowerCase());\n        }).map(function (info) {\n          return {\n            current: info.name,\n            version: Version.nu(parseInt(uaBrand.version, 10), 0)\n          };\n        });\n      });\n    };\n\n    var detect$2 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find$3(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$2(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$2(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n\n    var removeFromStart = function (str, numChars) {\n      return str.substring(numChars);\n    };\n\n    var checkRange = function (str, substr, start) {\n      return substr === '' || str.length >= substr.length && str.substr(start, start + substr.length) === substr;\n    };\n    var removeLeading = function (str, prefix) {\n      return startsWith(str, prefix) ? removeFromStart(str, prefix.length) : str;\n    };\n    var contains$2 = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n    var startsWith = function (str, prefix) {\n      return checkRange(str, prefix, 0);\n    };\n    var blank = function (r) {\n      return function (s) {\n        return s.replace(r, '');\n      };\n    };\n    var trim$5 = blank(/^\\s+|\\s+$/g);\n    var lTrim = blank(/^\\s+/g);\n    var rTrim = blank(/\\s+$/g);\n    var isNotEmpty = function (s) {\n      return s.length > 0;\n    };\n    var isEmpty$3 = function (s) {\n      return !isNotEmpty(s);\n    };\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains$2(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains$2(uastring, 'edge/') && contains$2(uastring, 'chrome') && contains$2(uastring, 'safari') && contains$2(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        brand: 'Chromium',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains$2(uastring, 'chrome') && !contains$2(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains$2(uastring, 'msie') || contains$2(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains$2(uastring, 'safari') || contains$2(uastring, 'mobile/')) && contains$2(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains$2(uastring, 'iphone') || contains$2(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('mac os x'),\n        versionRegexes: [/.*?mac\\ os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      },\n      {\n        name: 'ChromeOS',\n        search: checkContains('cros'),\n        versionRegexes: [/.*?chrome\\/([0-9]+)\\.([0-9]+).*/]\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie$1 = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var unknown$1 = function () {\n      return nu$3({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$3 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isBrowser = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge),\n        isChrome: isBrowser(chrome),\n        isIE: isBrowser(ie$1),\n        isOpera: isBrowser(opera),\n        isFirefox: isBrowser(firefox),\n        isSafari: isBrowser(safari)\n      };\n    };\n    var Browser = {\n      unknown: unknown$1,\n      nu: nu$3,\n      edge: constant(edge),\n      chrome: constant(chrome),\n      ie: constant(ie$1),\n      opera: constant(opera),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var chromeos = 'ChromeOS';\n    var unknown = function () {\n      return nu$2({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$2 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isOS = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows),\n        isiOS: isOS(ios),\n        isAndroid: isOS(android),\n        isOSX: isOS(osx),\n        isLinux: isOS(linux),\n        isSolaris: isOS(solaris),\n        isFreeBSD: isOS(freebsd),\n        isChromeOS: isOS(chromeos)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown,\n      nu: nu$2,\n      windows: constant(windows),\n      ios: constant(ios),\n      android: constant(android),\n      linux: constant(linux),\n      osx: constant(osx),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd),\n      chromeos: constant(chromeos)\n    };\n\n    var detect$1 = function (userAgent, userAgentDataOpt, mediaMatch) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = userAgentDataOpt.bind(function (userAgentData) {\n        return detectBrowser$1(browsers, userAgentData);\n      }).orThunk(function () {\n        return detectBrowser(browsers, userAgent);\n      }).fold(Browser.unknown, Browser.nu);\n      var os = detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent, mediaMatch);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$1 };\n\n    var mediaMatch = function (query) {\n      return window.matchMedia(query).matches;\n    };\n    var platform$2 = cached(function () {\n      return PlatformDetection.detect(navigator.userAgent, Optional.from(navigator.userAgentData), mediaMatch);\n    });\n    var detect = function () {\n      return platform$2();\n    };\n\n    var userAgent = navigator.userAgent;\n    var platform$1 = detect();\n    var browser$4 = platform$1.browser;\n    var os = platform$1.os;\n    var deviceType = platform$1.deviceType;\n    var webkit = /WebKit/.test(userAgent) && !browser$4.isEdge();\n    var fileApi = 'FormData' in window && 'FileReader' in window && 'URL' in window && !!URL.createObjectURL;\n    var windowsPhone = userAgent.indexOf('Windows Phone') !== -1;\n    var Env = {\n      opera: browser$4.isOpera(),\n      webkit: webkit,\n      ie: browser$4.isIE() || browser$4.isEdge() ? browser$4.version.major : false,\n      gecko: browser$4.isFirefox(),\n      mac: os.isOSX() || os.isiOS(),\n      iOS: deviceType.isiPad() || deviceType.isiPhone(),\n      android: os.isAndroid(),\n      contentEditable: true,\n      transparentSrc: 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7',\n      caretAfter: true,\n      range: window.getSelection && 'Range' in window,\n      documentMode: browser$4.isIE() ? document.documentMode || 7 : 10,\n      fileApi: fileApi,\n      ceFalse: true,\n      cacheSuffix: null,\n      container: null,\n      experimentalShadowDom: false,\n      canHaveCSP: !browser$4.isIE(),\n      desktop: deviceType.isDesktop(),\n      windowsPhone: windowsPhone,\n      browser: {\n        current: browser$4.current,\n        version: browser$4.version,\n        isChrome: browser$4.isChrome,\n        isEdge: browser$4.isEdge,\n        isFirefox: browser$4.isFirefox,\n        isIE: browser$4.isIE,\n        isOpera: browser$4.isOpera,\n        isSafari: browser$4.isSafari\n      },\n      os: {\n        current: os.current,\n        version: os.version,\n        isAndroid: os.isAndroid,\n        isChromeOS: os.isChromeOS,\n        isFreeBSD: os.isFreeBSD,\n        isiOS: os.isiOS,\n        isLinux: os.isLinux,\n        isOSX: os.isOSX,\n        isSolaris: os.isSolaris,\n        isWindows: os.isWindows\n      },\n      deviceType: {\n        isDesktop: deviceType.isDesktop,\n        isiPad: deviceType.isiPad,\n        isiPhone: deviceType.isiPhone,\n        isPhone: deviceType.isPhone,\n        isTablet: deviceType.isTablet,\n        isTouch: deviceType.isTouch,\n        isWebView: deviceType.isWebView\n      }\n    };\n\n    var whiteSpaceRegExp$2 = /^\\s*|\\s*$/g;\n    var trim$4 = function (str) {\n      return str === null || str === undefined ? '' : ('' + str).replace(whiteSpaceRegExp$2, '');\n    };\n    var is$3 = function (obj, type) {\n      if (!type) {\n        return obj !== undefined;\n      }\n      if (type === 'array' && isArray(obj)) {\n        return true;\n      }\n      return typeof obj === type;\n    };\n    var makeMap$4 = function (items, delim, map) {\n      var i;\n      items = items || [];\n      delim = delim || ',';\n      if (typeof items === 'string') {\n        items = items.split(delim);\n      }\n      map = map || {};\n      i = items.length;\n      while (i--) {\n        map[items[i]] = {};\n      }\n      return map;\n    };\n    var hasOwnProperty = has$2;\n    var create$9 = function (s, p, root) {\n      var self = this;\n      var sp, scn, c, de = 0;\n      s = /^((static) )?([\\w.]+)(:([\\w.]+))?/.exec(s);\n      var cn = s[3].match(/(^|\\.)(\\w+)$/i)[2];\n      var ns = self.createNS(s[3].replace(/\\.\\w+$/, ''), root);\n      if (ns[cn]) {\n        return;\n      }\n      if (s[2] === 'static') {\n        ns[cn] = p;\n        if (this.onCreate) {\n          this.onCreate(s[2], s[3], ns[cn]);\n        }\n        return;\n      }\n      if (!p[cn]) {\n        p[cn] = function () {\n        };\n        de = 1;\n      }\n      ns[cn] = p[cn];\n      self.extend(ns[cn].prototype, p);\n      if (s[5]) {\n        sp = self.resolve(s[5]).prototype;\n        scn = s[5].match(/\\.(\\w+)$/i)[1];\n        c = ns[cn];\n        if (de) {\n          ns[cn] = function () {\n            return sp[scn].apply(this, arguments);\n          };\n        } else {\n          ns[cn] = function () {\n            this.parent = sp[scn];\n            return c.apply(this, arguments);\n          };\n        }\n        ns[cn].prototype[cn] = ns[cn];\n        self.each(sp, function (f, n) {\n          ns[cn].prototype[n] = sp[n];\n        });\n        self.each(p, function (f, n) {\n          if (sp[n]) {\n            ns[cn].prototype[n] = function () {\n              this.parent = sp[n];\n              return f.apply(this, arguments);\n            };\n          } else {\n            if (n !== cn) {\n              ns[cn].prototype[n] = f;\n            }\n          }\n        });\n      }\n      self.each(p.static, function (f, n) {\n        ns[cn][n] = f;\n      });\n    };\n    var extend$6 = function (obj) {\n      var exts = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        exts[_i - 1] = arguments[_i];\n      }\n      for (var i = 0; i < exts.length; i++) {\n        var ext = exts[i];\n        for (var name_1 in ext) {\n          if (has$2(ext, name_1)) {\n            var value = ext[name_1];\n            if (value !== undefined) {\n              obj[name_1] = value;\n            }\n          }\n        }\n      }\n      return obj;\n    };\n    var walk$3 = function (o, f, n, s) {\n      s = s || this;\n      if (o) {\n        if (n) {\n          o = o[n];\n        }\n        each$i(o, function (o, i) {\n          if (f.call(s, o, i, n) === false) {\n            return false;\n          }\n          walk$3(o, f, n, s);\n        });\n      }\n    };\n    var createNS = function (n, o) {\n      var i, v;\n      o = o || window;\n      n = n.split('.');\n      for (i = 0; i < n.length; i++) {\n        v = n[i];\n        if (!o[v]) {\n          o[v] = {};\n        }\n        o = o[v];\n      }\n      return o;\n    };\n    var resolve$3 = function (n, o) {\n      var i, l;\n      o = o || window;\n      n = n.split('.');\n      for (i = 0, l = n.length; i < l; i++) {\n        o = o[n[i]];\n        if (!o) {\n          break;\n        }\n      }\n      return o;\n    };\n    var explode$4 = function (s, d) {\n      if (!s || is$3(s, 'array')) {\n        return s;\n      }\n      return map$1(s.split(d || ','), trim$4);\n    };\n    var _addCacheSuffix = function (url) {\n      var cacheSuffix = Env.cacheSuffix;\n      if (cacheSuffix) {\n        url += (url.indexOf('?') === -1 ? '?' : '&') + cacheSuffix;\n      }\n      return url;\n    };\n    var Tools = {\n      trim: trim$4,\n      isArray: isArray,\n      is: is$3,\n      toArray: toArray$1,\n      makeMap: makeMap$4,\n      each: each$i,\n      map: map$1,\n      grep: filter$2,\n      inArray: indexOf$1,\n      hasOwn: hasOwnProperty,\n      extend: extend$6,\n      create: create$9,\n      walk: walk$3,\n      createNS: createNS,\n      resolve: resolve$3,\n      explode: explode$4,\n      _addCacheSuffix: _addCacheSuffix\n    };\n\n    var fromHtml$1 = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom$2(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || document;\n      var node = doc.createElement(tag);\n      return fromDom$2(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || document;\n      var node = doc.createTextNode(text);\n      return fromDom$2(node);\n    };\n    var fromDom$2 = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: node };\n    };\n    var fromPoint$1 = function (docElm, x, y) {\n      return Optional.from(docElm.dom.elementFromPoint(x, y)).map(fromDom$2);\n    };\n    var SugarElement = {\n      fromHtml: fromHtml$1,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom$2,\n      fromPoint: fromPoint$1\n    };\n\n    var toArray = function (target, f) {\n      var r = [];\n      var recurse = function (e) {\n        r.push(e);\n        return f(e);\n      };\n      var cur = f(target);\n      do {\n        cur = cur.bind(recurse);\n      } while (cur.isSome());\n      return r;\n    };\n\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, Node.DOCUMENT_POSITION_CONTAINED_BY);\n    };\n\n    var COMMENT = 8;\n    var DOCUMENT = 9;\n    var DOCUMENT_FRAGMENT = 11;\n    var ELEMENT = 1;\n    var TEXT = 3;\n\n    var is$2 = function (element, selector) {\n      var dom = element.dom;\n      if (dom.nodeType !== ELEMENT) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n    var bypassSelector = function (dom) {\n      return dom.nodeType !== ELEMENT && dom.nodeType !== DOCUMENT && dom.nodeType !== DOCUMENT_FRAGMENT || dom.childElementCount === 0;\n    };\n    var all = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? [] : map$3(base.querySelectorAll(selector), SugarElement.fromDom);\n    };\n    var one = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? Optional.none() : Optional.from(base.querySelector(selector)).map(SugarElement.fromDom);\n    };\n\n    var eq = function (e1, e2) {\n      return e1.dom === e2.dom;\n    };\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom;\n      var d2 = e2.dom;\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return documentPositionContainedBy(e1.dom, e2.dom);\n    };\n    var contains$1 = function (e1, e2) {\n      return detect().browser.isIE() ? ieContains(e1, e2) : regularContains(e1, e2);\n    };\n\n    typeof window !== 'undefined' ? window : Function('return this;')();\n\n    var name = function (element) {\n      var r = element.dom.nodeName;\n      return r.toLowerCase();\n    };\n    var type = function (element) {\n      return element.dom.nodeType;\n    };\n    var isType = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isComment$1 = function (element) {\n      return type(element) === COMMENT || name(element) === '#comment';\n    };\n    var isElement$6 = isType(ELEMENT);\n    var isText$8 = isType(TEXT);\n    var isDocument$2 = isType(DOCUMENT);\n    var isDocumentFragment$1 = isType(DOCUMENT_FRAGMENT);\n    var isTag = function (tag) {\n      return function (e) {\n        return isElement$6(e) && name(e) === tag;\n      };\n    };\n\n    var owner$1 = function (element) {\n      return SugarElement.fromDom(element.dom.ownerDocument);\n    };\n    var documentOrOwner = function (dos) {\n      return isDocument$2(dos) ? dos : owner$1(dos);\n    };\n    var documentElement = function (element) {\n      return SugarElement.fromDom(documentOrOwner(element).dom.documentElement);\n    };\n    var defaultView = function (element) {\n      return SugarElement.fromDom(documentOrOwner(element).dom.defaultView);\n    };\n    var parent = function (element) {\n      return Optional.from(element.dom.parentNode).map(SugarElement.fromDom);\n    };\n    var parents$1 = function (element, isRoot) {\n      var stop = isFunction(isRoot) ? isRoot : never;\n      var dom = element.dom;\n      var ret = [];\n      while (dom.parentNode !== null && dom.parentNode !== undefined) {\n        var rawParent = dom.parentNode;\n        var p = SugarElement.fromDom(rawParent);\n        ret.push(p);\n        if (stop(p) === true) {\n          break;\n        } else {\n          dom = rawParent;\n        }\n      }\n      return ret;\n    };\n    var siblings = function (element) {\n      var filterSelf = function (elements) {\n        return filter$4(elements, function (x) {\n          return !eq(element, x);\n        });\n      };\n      return parent(element).map(children).map(filterSelf).getOr([]);\n    };\n    var prevSibling = function (element) {\n      return Optional.from(element.dom.previousSibling).map(SugarElement.fromDom);\n    };\n    var nextSibling = function (element) {\n      return Optional.from(element.dom.nextSibling).map(SugarElement.fromDom);\n    };\n    var prevSiblings = function (element) {\n      return reverse(toArray(element, prevSibling));\n    };\n    var nextSiblings = function (element) {\n      return toArray(element, nextSibling);\n    };\n    var children = function (element) {\n      return map$3(element.dom.childNodes, SugarElement.fromDom);\n    };\n    var child$1 = function (element, index) {\n      var cs = element.dom.childNodes;\n      return Optional.from(cs[index]).map(SugarElement.fromDom);\n    };\n    var firstChild = function (element) {\n      return child$1(element, 0);\n    };\n    var lastChild = function (element) {\n      return child$1(element, element.dom.childNodes.length - 1);\n    };\n    var childNodesCount = function (element) {\n      return element.dom.childNodes.length;\n    };\n\n    var getHead = function (doc) {\n      var b = doc.dom.head;\n      if (b === null || b === undefined) {\n        throw new Error('Head is not available yet');\n      }\n      return SugarElement.fromDom(b);\n    };\n\n    var isShadowRoot = function (dos) {\n      return isDocumentFragment$1(dos) && isNonNullable(dos.dom.host);\n    };\n    var supported = isFunction(Element.prototype.attachShadow) && isFunction(Node.prototype.getRootNode);\n    var isSupported$1 = constant(supported);\n    var getRootNode = supported ? function (e) {\n      return SugarElement.fromDom(e.dom.getRootNode());\n    } : documentOrOwner;\n    var getStyleContainer = function (dos) {\n      return isShadowRoot(dos) ? dos : getHead(documentOrOwner(dos));\n    };\n    var getShadowRoot = function (e) {\n      var r = getRootNode(e);\n      return isShadowRoot(r) ? Optional.some(r) : Optional.none();\n    };\n    var getShadowHost = function (e) {\n      return SugarElement.fromDom(e.dom.host);\n    };\n    var getOriginalEventTarget = function (event) {\n      if (isSupported$1() && isNonNullable(event.target)) {\n        var el = SugarElement.fromDom(event.target);\n        if (isElement$6(el) && isOpenShadowHost(el)) {\n          if (event.composed && event.composedPath) {\n            var composedPath = event.composedPath();\n            if (composedPath) {\n              return head(composedPath);\n            }\n          }\n        }\n      }\n      return Optional.from(event.target);\n    };\n    var isOpenShadowHost = function (element) {\n      return isNonNullable(element.dom.shadowRoot);\n    };\n\n    var before$4 = function (marker, element) {\n      var parent$1 = parent(marker);\n      parent$1.each(function (v) {\n        v.dom.insertBefore(element.dom, marker.dom);\n      });\n    };\n    var after$3 = function (marker, element) {\n      var sibling = nextSibling(marker);\n      sibling.fold(function () {\n        var parent$1 = parent(marker);\n        parent$1.each(function (v) {\n          append$1(v, element);\n        });\n      }, function (v) {\n        before$4(v, element);\n      });\n    };\n    var prepend = function (parent, element) {\n      var firstChild$1 = firstChild(parent);\n      firstChild$1.fold(function () {\n        append$1(parent, element);\n      }, function (v) {\n        parent.dom.insertBefore(element.dom, v.dom);\n      });\n    };\n    var append$1 = function (parent, element) {\n      parent.dom.appendChild(element.dom);\n    };\n    var wrap$3 = function (element, wrapper) {\n      before$4(element, wrapper);\n      append$1(wrapper, element);\n    };\n\n    var before$3 = function (marker, elements) {\n      each$k(elements, function (x) {\n        before$4(marker, x);\n      });\n    };\n    var append = function (parent, elements) {\n      each$k(elements, function (x) {\n        append$1(parent, x);\n      });\n    };\n\n    var empty = function (element) {\n      element.dom.textContent = '';\n      each$k(children(element), function (rogue) {\n        remove$7(rogue);\n      });\n    };\n    var remove$7 = function (element) {\n      var dom = element.dom;\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n    var unwrap = function (wrapper) {\n      var children$1 = children(wrapper);\n      if (children$1.length > 0) {\n        before$3(wrapper, children$1);\n      }\n      remove$7(wrapper);\n    };\n\n    var inBody = function (element) {\n      var dom = isText$8(element) ? element.dom.parentNode : element.dom;\n      if (dom === undefined || dom === null || dom.ownerDocument === null) {\n        return false;\n      }\n      var doc = dom.ownerDocument;\n      return getShadowRoot(SugarElement.fromDom(dom)).fold(function () {\n        return doc.body.contains(dom);\n      }, compose1(inBody, getShadowHost));\n    };\n\n    var r = function (left, top) {\n      var translate = function (x, y) {\n        return r(left + x, top + y);\n      };\n      return {\n        left: left,\n        top: top,\n        translate: translate\n      };\n    };\n    var SugarPosition = r;\n\n    var boxPosition = function (dom) {\n      var box = dom.getBoundingClientRect();\n      return SugarPosition(box.left, box.top);\n    };\n    var firstDefinedOrZero = function (a, b) {\n      if (a !== undefined) {\n        return a;\n      } else {\n        return b !== undefined ? b : 0;\n      }\n    };\n    var absolute = function (element) {\n      var doc = element.dom.ownerDocument;\n      var body = doc.body;\n      var win = doc.defaultView;\n      var html = doc.documentElement;\n      if (body === element.dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      var scrollTop = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageYOffset, html.scrollTop);\n      var scrollLeft = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageXOffset, html.scrollLeft);\n      var clientTop = firstDefinedOrZero(html.clientTop, body.clientTop);\n      var clientLeft = firstDefinedOrZero(html.clientLeft, body.clientLeft);\n      return viewport(element).translate(scrollLeft - clientLeft, scrollTop - clientTop);\n    };\n    var viewport = function (element) {\n      var dom = element.dom;\n      var doc = dom.ownerDocument;\n      var body = doc.body;\n      if (body === dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      if (!inBody(element)) {\n        return SugarPosition(0, 0);\n      }\n      return boxPosition(dom);\n    };\n\n    var get$8 = function (_DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var x = doc.body.scrollLeft || doc.documentElement.scrollLeft;\n      var y = doc.body.scrollTop || doc.documentElement.scrollTop;\n      return SugarPosition(x, y);\n    };\n    var to = function (x, y, _DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var win = doc.defaultView;\n      if (win) {\n        win.scrollTo(x, y);\n      }\n    };\n    var intoView = function (element, alignToTop) {\n      var isSafari = detect().browser.isSafari();\n      if (isSafari && isFunction(element.dom.scrollIntoViewIfNeeded)) {\n        element.dom.scrollIntoViewIfNeeded(false);\n      } else {\n        element.dom.scrollIntoView(alignToTop);\n      }\n    };\n\n    var get$7 = function (_win) {\n      var win = _win === undefined ? window : _win;\n      if (detect().browser.isFirefox()) {\n        return Optional.none();\n      } else {\n        return Optional.from(win['visualViewport']);\n      }\n    };\n    var bounds = function (x, y, width, height) {\n      return {\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        right: x + width,\n        bottom: y + height\n      };\n    };\n    var getBounds = function (_win) {\n      var win = _win === undefined ? window : _win;\n      var doc = win.document;\n      var scroll = get$8(SugarElement.fromDom(doc));\n      return get$7(win).fold(function () {\n        var html = win.document.documentElement;\n        var width = html.clientWidth;\n        var height = html.clientHeight;\n        return bounds(scroll.left, scroll.top, width, height);\n      }, function (visualViewport) {\n        return bounds(Math.max(visualViewport.pageLeft, scroll.left), Math.max(visualViewport.pageTop, scroll.top), visualViewport.width, visualViewport.height);\n      });\n    };\n\n    var isNodeType = function (type) {\n      return function (node) {\n        return !!node && node.nodeType === type;\n      };\n    };\n    var isRestrictedNode = function (node) {\n      return !!node && !Object.getPrototypeOf(node);\n    };\n    var isElement$5 = isNodeType(1);\n    var matchNodeNames = function (names) {\n      var lowercasedNames = names.map(function (s) {\n        return s.toLowerCase();\n      });\n      return function (node) {\n        if (node && node.nodeName) {\n          var nodeName = node.nodeName.toLowerCase();\n          return contains$3(lowercasedNames, nodeName);\n        }\n        return false;\n      };\n    };\n    var matchStyleValues = function (name, values) {\n      var items = values.toLowerCase().split(' ');\n      return function (node) {\n        if (isElement$5(node)) {\n          for (var i = 0; i < items.length; i++) {\n            var computed = node.ownerDocument.defaultView.getComputedStyle(node, null);\n            var cssValue = computed ? computed.getPropertyValue(name) : null;\n            if (cssValue === items[i]) {\n              return true;\n            }\n          }\n        }\n        return false;\n      };\n    };\n    var hasAttribute = function (attrName) {\n      return function (node) {\n        return isElement$5(node) && node.hasAttribute(attrName);\n      };\n    };\n    var hasAttributeValue = function (attrName, attrValue) {\n      return function (node) {\n        return isElement$5(node) && node.getAttribute(attrName) === attrValue;\n      };\n    };\n    var isBogus$2 = function (node) {\n      return isElement$5(node) && node.hasAttribute('data-mce-bogus');\n    };\n    var isBogusAll$1 = function (node) {\n      return isElement$5(node) && node.getAttribute('data-mce-bogus') === 'all';\n    };\n    var isTable$3 = function (node) {\n      return isElement$5(node) && node.tagName === 'TABLE';\n    };\n    var hasContentEditableState = function (value) {\n      return function (node) {\n        if (isElement$5(node)) {\n          if (node.contentEditable === value) {\n            return true;\n          }\n          if (node.getAttribute('data-mce-contenteditable') === value) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    var isTextareaOrInput = matchNodeNames([\n      'textarea',\n      'input'\n    ]);\n    var isText$7 = isNodeType(3);\n    var isComment = isNodeType(8);\n    var isDocument$1 = isNodeType(9);\n    var isDocumentFragment = isNodeType(11);\n    var isBr$5 = matchNodeNames(['br']);\n    var isImg = matchNodeNames(['img']);\n    var isContentEditableTrue$4 = hasContentEditableState('true');\n    var isContentEditableFalse$b = hasContentEditableState('false');\n    var isTableCell$5 = matchNodeNames([\n      'td',\n      'th'\n    ]);\n    var isMedia$2 = matchNodeNames([\n      'video',\n      'audio',\n      'object',\n      'embed'\n    ]);\n\n    var is$1 = function (lhs, rhs, comparator) {\n      if (comparator === void 0) {\n        comparator = tripleEquals;\n      }\n      return lhs.exists(function (left) {\n        return comparator(left, rhs);\n      });\n    };\n    var cat = function (arr) {\n      var r = [];\n      var push = function (x) {\n        r.push(x);\n      };\n      for (var i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    var lift2 = function (oa, ob, f) {\n      return oa.isSome() && ob.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie())) : Optional.none();\n    };\n    var lift3 = function (oa, ob, oc, f) {\n      return oa.isSome() && ob.isSome() && oc.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie(), oc.getOrDie())) : Optional.none();\n    };\n    var someIf = function (b, a) {\n      return b ? Optional.some(a) : Optional.none();\n    };\n\n    var isSupported = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var rawSet = function (dom, key, value) {\n      if (isString$1(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        console.error('Invalid call to Attribute.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var set$1 = function (element, key, value) {\n      rawSet(element.dom, key, value);\n    };\n    var setAll$1 = function (element, attrs) {\n      var dom = element.dom;\n      each$j(attrs, function (v, k) {\n        rawSet(dom, k, v);\n      });\n    };\n    var get$6 = function (element, key) {\n      var v = element.dom.getAttribute(key);\n      return v === null ? undefined : v;\n    };\n    var getOpt = function (element, key) {\n      return Optional.from(get$6(element, key));\n    };\n    var has$1 = function (element, key) {\n      var dom = element.dom;\n      return dom && dom.hasAttribute ? dom.hasAttribute(key) : false;\n    };\n    var remove$6 = function (element, key) {\n      element.dom.removeAttribute(key);\n    };\n    var clone$3 = function (element) {\n      return foldl(element.dom.attributes, function (acc, attr) {\n        acc[attr.name] = attr.value;\n        return acc;\n      }, {});\n    };\n\n    var internalSet = function (dom, property, value) {\n      if (!isString$1(value)) {\n        console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    var setAll = function (element, css) {\n      var dom = element.dom;\n      each$j(css, function (v, k) {\n        internalSet(dom, k, v);\n      });\n    };\n    var get$5 = function (element, property) {\n      var dom = element.dom;\n      var styles = window.getComputedStyle(dom);\n      var r = styles.getPropertyValue(property);\n      return r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\n    };\n    var getUnsafeProperty = function (dom, property) {\n      return isSupported(dom) ? dom.style.getPropertyValue(property) : '';\n    };\n    var getRaw = function (element, property) {\n      var dom = element.dom;\n      var raw = getUnsafeProperty(dom, property);\n      return Optional.from(raw).filter(function (r) {\n        return r.length > 0;\n      });\n    };\n    var getAllRaw = function (element) {\n      var css = {};\n      var dom = element.dom;\n      if (isSupported(dom)) {\n        for (var i = 0; i < dom.style.length; i++) {\n          var ruleName = dom.style.item(i);\n          css[ruleName] = dom.style[ruleName];\n        }\n      }\n      return css;\n    };\n    var reflow = function (e) {\n      return e.dom.offsetWidth;\n    };\n\n    var browser$3 = detect().browser;\n    var firstElement = function (nodes) {\n      return find$3(nodes, isElement$6);\n    };\n    var getTableCaptionDeltaY = function (elm) {\n      if (browser$3.isFirefox() && name(elm) === 'table') {\n        return firstElement(children(elm)).filter(function (elm) {\n          return name(elm) === 'caption';\n        }).bind(function (caption) {\n          return firstElement(nextSiblings(caption)).map(function (body) {\n            var bodyTop = body.dom.offsetTop;\n            var captionTop = caption.dom.offsetTop;\n            var captionHeight = caption.dom.offsetHeight;\n            return bodyTop <= captionTop ? -captionHeight : 0;\n          });\n        }).getOr(0);\n      } else {\n        return 0;\n      }\n    };\n    var hasChild = function (elm, child) {\n      return elm.children && contains$3(elm.children, child);\n    };\n    var getPos = function (body, elm, rootElm) {\n      var x = 0, y = 0;\n      var doc = body.ownerDocument;\n      rootElm = rootElm ? rootElm : body;\n      if (elm) {\n        if (rootElm === body && elm.getBoundingClientRect && get$5(SugarElement.fromDom(body), 'position') === 'static') {\n          var pos = elm.getBoundingClientRect();\n          x = pos.left + (doc.documentElement.scrollLeft || body.scrollLeft) - doc.documentElement.clientLeft;\n          y = pos.top + (doc.documentElement.scrollTop || body.scrollTop) - doc.documentElement.clientTop;\n          return {\n            x: x,\n            y: y\n          };\n        }\n        var offsetParent = elm;\n        while (offsetParent && offsetParent !== rootElm && offsetParent.nodeType && !hasChild(offsetParent, rootElm)) {\n          var castOffsetParent = offsetParent;\n          x += castOffsetParent.offsetLeft || 0;\n          y += castOffsetParent.offsetTop || 0;\n          offsetParent = castOffsetParent.offsetParent;\n        }\n        offsetParent = elm.parentNode;\n        while (offsetParent && offsetParent !== rootElm && offsetParent.nodeType && !hasChild(offsetParent, rootElm)) {\n          x -= offsetParent.scrollLeft || 0;\n          y -= offsetParent.scrollTop || 0;\n          offsetParent = offsetParent.parentNode;\n        }\n        y += getTableCaptionDeltaY(SugarElement.fromDom(elm));\n      }\n      return {\n        x: x,\n        y: y\n      };\n    };\n\n    var exports$1 = {}, module$1 = { exports: exports$1 };\n    (function (define, exports, module, require) {\n      (function (global, factory) {\n        typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() : typeof define === 'function' && define.amd ? define(factory) : (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.EphoxContactWrapper = factory());\n      }(this, function () {\n        var commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n        var promise = { exports: {} };\n        (function (module) {\n          (function (root) {\n            var setTimeoutFunc = setTimeout;\n            function noop() {\n            }\n            function bind(fn, thisArg) {\n              return function () {\n                fn.apply(thisArg, arguments);\n              };\n            }\n            function Promise(fn) {\n              if (typeof this !== 'object')\n                throw new TypeError('Promises must be constructed via new');\n              if (typeof fn !== 'function')\n                throw new TypeError('not a function');\n              this._state = 0;\n              this._handled = false;\n              this._value = undefined;\n              this._deferreds = [];\n              doResolve(fn, this);\n            }\n            function handle(self, deferred) {\n              while (self._state === 3) {\n                self = self._value;\n              }\n              if (self._state === 0) {\n                self._deferreds.push(deferred);\n                return;\n              }\n              self._handled = true;\n              Promise._immediateFn(function () {\n                var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n                if (cb === null) {\n                  (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n                  return;\n                }\n                var ret;\n                try {\n                  ret = cb(self._value);\n                } catch (e) {\n                  reject(deferred.promise, e);\n                  return;\n                }\n                resolve(deferred.promise, ret);\n              });\n            }\n            function resolve(self, newValue) {\n              try {\n                if (newValue === self)\n                  throw new TypeError('A promise cannot be resolved with itself.');\n                if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n                  var then = newValue.then;\n                  if (newValue instanceof Promise) {\n                    self._state = 3;\n                    self._value = newValue;\n                    finale(self);\n                    return;\n                  } else if (typeof then === 'function') {\n                    doResolve(bind(then, newValue), self);\n                    return;\n                  }\n                }\n                self._state = 1;\n                self._value = newValue;\n                finale(self);\n              } catch (e) {\n                reject(self, e);\n              }\n            }\n            function reject(self, newValue) {\n              self._state = 2;\n              self._value = newValue;\n              finale(self);\n            }\n            function finale(self) {\n              if (self._state === 2 && self._deferreds.length === 0) {\n                Promise._immediateFn(function () {\n                  if (!self._handled) {\n                    Promise._unhandledRejectionFn(self._value);\n                  }\n                });\n              }\n              for (var i = 0, len = self._deferreds.length; i < len; i++) {\n                handle(self, self._deferreds[i]);\n              }\n              self._deferreds = null;\n            }\n            function Handler(onFulfilled, onRejected, promise) {\n              this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n              this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n              this.promise = promise;\n            }\n            function doResolve(fn, self) {\n              var done = false;\n              try {\n                fn(function (value) {\n                  if (done)\n                    return;\n                  done = true;\n                  resolve(self, value);\n                }, function (reason) {\n                  if (done)\n                    return;\n                  done = true;\n                  reject(self, reason);\n                });\n              } catch (ex) {\n                if (done)\n                  return;\n                done = true;\n                reject(self, ex);\n              }\n            }\n            Promise.prototype['catch'] = function (onRejected) {\n              return this.then(null, onRejected);\n            };\n            Promise.prototype.then = function (onFulfilled, onRejected) {\n              var prom = new this.constructor(noop);\n              handle(this, new Handler(onFulfilled, onRejected, prom));\n              return prom;\n            };\n            Promise.all = function (arr) {\n              var args = Array.prototype.slice.call(arr);\n              return new Promise(function (resolve, reject) {\n                if (args.length === 0)\n                  return resolve([]);\n                var remaining = args.length;\n                function res(i, val) {\n                  try {\n                    if (val && (typeof val === 'object' || typeof val === 'function')) {\n                      var then = val.then;\n                      if (typeof then === 'function') {\n                        then.call(val, function (val) {\n                          res(i, val);\n                        }, reject);\n                        return;\n                      }\n                    }\n                    args[i] = val;\n                    if (--remaining === 0) {\n                      resolve(args);\n                    }\n                  } catch (ex) {\n                    reject(ex);\n                  }\n                }\n                for (var i = 0; i < args.length; i++) {\n                  res(i, args[i]);\n                }\n              });\n            };\n            Promise.resolve = function (value) {\n              if (value && typeof value === 'object' && value.constructor === Promise) {\n                return value;\n              }\n              return new Promise(function (resolve) {\n                resolve(value);\n              });\n            };\n            Promise.reject = function (value) {\n              return new Promise(function (resolve, reject) {\n                reject(value);\n              });\n            };\n            Promise.race = function (values) {\n              return new Promise(function (resolve, reject) {\n                for (var i = 0, len = values.length; i < len; i++) {\n                  values[i].then(resolve, reject);\n                }\n              });\n            };\n            Promise._immediateFn = typeof setImmediate === 'function' ? function (fn) {\n              setImmediate(fn);\n            } : function (fn) {\n              setTimeoutFunc(fn, 0);\n            };\n            Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n              if (typeof console !== 'undefined' && console) {\n                console.warn('Possible Unhandled Promise Rejection:', err);\n              }\n            };\n            Promise._setImmediateFn = function _setImmediateFn(fn) {\n              Promise._immediateFn = fn;\n            };\n            Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {\n              Promise._unhandledRejectionFn = fn;\n            };\n            if (module.exports) {\n              module.exports = Promise;\n            } else if (!root.Promise) {\n              root.Promise = Promise;\n            }\n          }(commonjsGlobal));\n        }(promise));\n        var promisePolyfill = promise.exports;\n        var Global = function () {\n          if (typeof window !== 'undefined') {\n            return window;\n          } else {\n            return Function('return this;')();\n          }\n        }();\n        var promisePolyfill_1 = { boltExport: Global.Promise || promisePolyfill };\n        return promisePolyfill_1;\n      }));\n    }(undefined, exports$1, module$1));\n    var Promise$1 = module$1.exports.boltExport;\n\n    var nu$1 = function (baseFn) {\n      var data = Optional.none();\n      var callbacks = [];\n      var map = function (f) {\n        return nu$1(function (nCallback) {\n          get(function (data) {\n            nCallback(f(data));\n          });\n        });\n      };\n      var get = function (nCallback) {\n        if (isReady()) {\n          call(nCallback);\n        } else {\n          callbacks.push(nCallback);\n        }\n      };\n      var set = function (x) {\n        if (!isReady()) {\n          data = Optional.some(x);\n          run(callbacks);\n          callbacks = [];\n        }\n      };\n      var isReady = function () {\n        return data.isSome();\n      };\n      var run = function (cbs) {\n        each$k(cbs, call);\n      };\n      var call = function (cb) {\n        data.each(function (x) {\n          setTimeout(function () {\n            cb(x);\n          }, 0);\n        });\n      };\n      baseFn(set);\n      return {\n        get: get,\n        map: map,\n        isReady: isReady\n      };\n    };\n    var pure$1 = function (a) {\n      return nu$1(function (callback) {\n        callback(a);\n      });\n    };\n    var LazyValue = {\n      nu: nu$1,\n      pure: pure$1\n    };\n\n    var errorReporter = function (err) {\n      setTimeout(function () {\n        throw err;\n      }, 0);\n    };\n    var make = function (run) {\n      var get = function (callback) {\n        run().then(callback, errorReporter);\n      };\n      var map = function (fab) {\n        return make(function () {\n          return run().then(fab);\n        });\n      };\n      var bind = function (aFutureB) {\n        return make(function () {\n          return run().then(function (v) {\n            return aFutureB(v).toPromise();\n          });\n        });\n      };\n      var anonBind = function (futureB) {\n        return make(function () {\n          return run().then(function () {\n            return futureB.toPromise();\n          });\n        });\n      };\n      var toLazy = function () {\n        return LazyValue.nu(get);\n      };\n      var toCached = function () {\n        var cache = null;\n        return make(function () {\n          if (cache === null) {\n            cache = run();\n          }\n          return cache;\n        });\n      };\n      var toPromise = run;\n      return {\n        map: map,\n        bind: bind,\n        anonBind: anonBind,\n        toLazy: toLazy,\n        toCached: toCached,\n        toPromise: toPromise,\n        get: get\n      };\n    };\n    var nu = function (baseFn) {\n      return make(function () {\n        return new Promise$1(baseFn);\n      });\n    };\n    var pure = function (a) {\n      return make(function () {\n        return Promise$1.resolve(a);\n      });\n    };\n    var Future = {\n      nu: nu,\n      pure: pure\n    };\n\n    var par$1 = function (asyncValues, nu) {\n      return nu(function (callback) {\n        var r = [];\n        var count = 0;\n        var cb = function (i) {\n          return function (value) {\n            r[i] = value;\n            count++;\n            if (count >= asyncValues.length) {\n              callback(r);\n            }\n          };\n        };\n        if (asyncValues.length === 0) {\n          callback([]);\n        } else {\n          each$k(asyncValues, function (asyncValue, i) {\n            asyncValue.get(cb(i));\n          });\n        }\n      });\n    };\n\n    var par = function (futures) {\n      return par$1(futures, Future.nu);\n    };\n\n    var value$1 = function (o) {\n      var or = function (_opt) {\n        return value$1(o);\n      };\n      var orThunk = function (_f) {\n        return value$1(o);\n      };\n      var map = function (f) {\n        return value$1(f(o));\n      };\n      var mapError = function (_f) {\n        return value$1(o);\n      };\n      var each = function (f) {\n        f(o);\n      };\n      var bind = function (f) {\n        return f(o);\n      };\n      var fold = function (_, onValue) {\n        return onValue(o);\n      };\n      var exists = function (f) {\n        return f(o);\n      };\n      var forall = function (f) {\n        return f(o);\n      };\n      var toOptional = function () {\n        return Optional.some(o);\n      };\n      return {\n        isValue: always,\n        isError: never,\n        getOr: constant(o),\n        getOrThunk: constant(o),\n        getOrDie: constant(o),\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: each,\n        bind: bind,\n        exists: exists,\n        forall: forall,\n        toOptional: toOptional\n      };\n    };\n    var error = function (message) {\n      var getOrThunk = function (f) {\n        return f();\n      };\n      var getOrDie = function () {\n        return die(String(message))();\n      };\n      var or = identity;\n      var orThunk = function (f) {\n        return f();\n      };\n      var map = function (_f) {\n        return error(message);\n      };\n      var mapError = function (f) {\n        return error(f(message));\n      };\n      var bind = function (_f) {\n        return error(message);\n      };\n      var fold = function (onError, _) {\n        return onError(message);\n      };\n      return {\n        isValue: never,\n        isError: always,\n        getOr: identity,\n        getOrThunk: getOrThunk,\n        getOrDie: getOrDie,\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: noop,\n        bind: bind,\n        exists: never,\n        forall: always,\n        toOptional: Optional.none\n      };\n    };\n    var fromOption = function (opt, err) {\n      return opt.fold(function () {\n        return error(err);\n      }, value$1);\n    };\n    var Result = {\n      value: value$1,\n      error: error,\n      fromOption: fromOption\n    };\n\n    var generate$1 = function (cases) {\n      if (!isArray$1(cases)) {\n        throw new Error('cases must be an array');\n      }\n      if (cases.length === 0) {\n        throw new Error('there must be at least one case');\n      }\n      var constructors = [];\n      var adt = {};\n      each$k(cases, function (acase, count) {\n        var keys$1 = keys(acase);\n        if (keys$1.length !== 1) {\n          throw new Error('one and only one name per case');\n        }\n        var key = keys$1[0];\n        var value = acase[key];\n        if (adt[key] !== undefined) {\n          throw new Error('duplicate key detected:' + key);\n        } else if (key === 'cata') {\n          throw new Error('cannot have a case named cata (sorry)');\n        } else if (!isArray$1(value)) {\n          throw new Error('case arguments must be an array');\n        }\n        constructors.push(key);\n        adt[key] = function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          var argLength = args.length;\n          if (argLength !== value.length) {\n            throw new Error('Wrong number of arguments to case ' + key + '. Expected ' + value.length + ' (' + value + '), got ' + argLength);\n          }\n          var match = function (branches) {\n            var branchKeys = keys(branches);\n            if (constructors.length !== branchKeys.length) {\n              throw new Error('Wrong number of arguments to match. Expected: ' + constructors.join(',') + '\\nActual: ' + branchKeys.join(','));\n            }\n            var allReqd = forall(constructors, function (reqKey) {\n              return contains$3(branchKeys, reqKey);\n            });\n            if (!allReqd) {\n              throw new Error('Not all branches were specified when using match. Specified: ' + branchKeys.join(', ') + '\\nRequired: ' + constructors.join(', '));\n            }\n            return branches[key].apply(null, args);\n          };\n          return {\n            fold: function () {\n              var foldArgs = [];\n              for (var _i = 0; _i < arguments.length; _i++) {\n                foldArgs[_i] = arguments[_i];\n              }\n              if (foldArgs.length !== cases.length) {\n                throw new Error('Wrong number of arguments to fold. Expected ' + cases.length + ', got ' + foldArgs.length);\n              }\n              var target = foldArgs[count];\n              return target.apply(null, args);\n            },\n            match: match,\n            log: function (label) {\n              console.log(label, {\n                constructors: constructors,\n                constructor: key,\n                params: args\n              });\n            }\n          };\n        };\n      });\n      return adt;\n    };\n    var Adt = { generate: generate$1 };\n\n    Adt.generate([\n      {\n        bothErrors: [\n          'error1',\n          'error2'\n        ]\n      },\n      {\n        firstError: [\n          'error1',\n          'value2'\n        ]\n      },\n      {\n        secondError: [\n          'value1',\n          'error2'\n        ]\n      },\n      {\n        bothValues: [\n          'value1',\n          'value2'\n        ]\n      }\n    ]);\n    var unite = function (result) {\n      return result.fold(identity, identity);\n    };\n\n    function ClosestOrAncestor (is, ancestor, scope, a, isRoot) {\n      if (is(scope, a)) {\n        return Optional.some(scope);\n      } else if (isFunction(isRoot) && isRoot(scope)) {\n        return Optional.none();\n      } else {\n        return ancestor(scope, a, isRoot);\n      }\n    }\n\n    var ancestor$3 = function (scope, predicate, isRoot) {\n      var element = scope.dom;\n      var stop = isFunction(isRoot) ? isRoot : never;\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = SugarElement.fromDom(element);\n        if (predicate(el)) {\n          return Optional.some(el);\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var closest$3 = function (scope, predicate, isRoot) {\n      var is = function (s, test) {\n        return test(s);\n      };\n      return ClosestOrAncestor(is, ancestor$3, scope, predicate, isRoot);\n    };\n    var sibling$2 = function (scope, predicate) {\n      var element = scope.dom;\n      if (!element.parentNode) {\n        return Optional.none();\n      }\n      return child(SugarElement.fromDom(element.parentNode), function (x) {\n        return !eq(scope, x) && predicate(x);\n      });\n    };\n    var child = function (scope, predicate) {\n      var pred = function (node) {\n        return predicate(SugarElement.fromDom(node));\n      };\n      var result = find$3(scope.dom.childNodes, pred);\n      return result.map(SugarElement.fromDom);\n    };\n\n    var ancestor$2 = function (scope, selector, isRoot) {\n      return ancestor$3(scope, function (e) {\n        return is$2(e, selector);\n      }, isRoot);\n    };\n    var descendant = function (scope, selector) {\n      return one(selector, scope);\n    };\n    var closest$2 = function (scope, selector, isRoot) {\n      var is = function (element, selector) {\n        return is$2(element, selector);\n      };\n      return ClosestOrAncestor(is, ancestor$2, scope, selector, isRoot);\n    };\n\n    var promiseObj = window.Promise ? window.Promise : Promise$1;\n\n    var requestAnimationFramePromise;\n    var requestAnimationFrame = function (callback, element) {\n      var requestAnimationFrameFunc = window.requestAnimationFrame;\n      var vendors = [\n        'ms',\n        'moz',\n        'webkit'\n      ];\n      var featurefill = function (cb) {\n        window.setTimeout(cb, 0);\n      };\n      for (var i = 0; i < vendors.length && !requestAnimationFrameFunc; i++) {\n        requestAnimationFrameFunc = window[vendors[i] + 'RequestAnimationFrame'];\n      }\n      if (!requestAnimationFrameFunc) {\n        requestAnimationFrameFunc = featurefill;\n      }\n      requestAnimationFrameFunc(callback, element);\n    };\n    var wrappedSetTimeout = function (callback, time) {\n      if (typeof time !== 'number') {\n        time = 0;\n      }\n      return setTimeout(callback, time);\n    };\n    var wrappedSetInterval = function (callback, time) {\n      if (typeof time !== 'number') {\n        time = 1;\n      }\n      return setInterval(callback, time);\n    };\n    var wrappedClearTimeout = function (id) {\n      return clearTimeout(id);\n    };\n    var wrappedClearInterval = function (id) {\n      return clearInterval(id);\n    };\n    var debounce = function (callback, time) {\n      var timer;\n      var func = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        clearTimeout(timer);\n        timer = wrappedSetTimeout(function () {\n          callback.apply(this, args);\n        }, time);\n      };\n      func.stop = function () {\n        clearTimeout(timer);\n      };\n      return func;\n    };\n    var Delay = {\n      requestAnimationFrame: function (callback, element) {\n        if (requestAnimationFramePromise) {\n          requestAnimationFramePromise.then(callback);\n          return;\n        }\n        requestAnimationFramePromise = new promiseObj(function (resolve) {\n          if (!element) {\n            element = document.body;\n          }\n          requestAnimationFrame(resolve, element);\n        }).then(callback);\n      },\n      setTimeout: wrappedSetTimeout,\n      setInterval: wrappedSetInterval,\n      setEditorTimeout: function (editor, callback, time) {\n        return wrappedSetTimeout(function () {\n          if (!editor.removed) {\n            callback();\n          }\n        }, time);\n      },\n      setEditorInterval: function (editor, callback, time) {\n        var timer = wrappedSetInterval(function () {\n          if (!editor.removed) {\n            callback();\n          } else {\n            clearInterval(timer);\n          }\n        }, time);\n        return timer;\n      },\n      debounce: debounce,\n      throttle: debounce,\n      clearInterval: wrappedClearInterval,\n      clearTimeout: wrappedClearTimeout\n    };\n\n    var StyleSheetLoader = function (documentOrShadowRoot, settings) {\n      if (settings === void 0) {\n        settings = {};\n      }\n      var idCount = 0;\n      var loadedStates = {};\n      var edos = SugarElement.fromDom(documentOrShadowRoot);\n      var doc = documentOrOwner(edos);\n      var maxLoadTime = settings.maxLoadTime || 5000;\n      var _setReferrerPolicy = function (referrerPolicy) {\n        settings.referrerPolicy = referrerPolicy;\n      };\n      var addStyle = function (element) {\n        append$1(getStyleContainer(edos), element);\n      };\n      var removeStyle = function (id) {\n        var styleContainer = getStyleContainer(edos);\n        descendant(styleContainer, '#' + id).each(remove$7);\n      };\n      var getOrCreateState = function (url) {\n        return get$9(loadedStates, url).getOrThunk(function () {\n          return {\n            id: 'mce-u' + idCount++,\n            passed: [],\n            failed: [],\n            count: 0\n          };\n        });\n      };\n      var load = function (url, success, failure) {\n        var link;\n        var urlWithSuffix = Tools._addCacheSuffix(url);\n        var state = getOrCreateState(urlWithSuffix);\n        loadedStates[urlWithSuffix] = state;\n        state.count++;\n        var resolve = function (callbacks, status) {\n          var i = callbacks.length;\n          while (i--) {\n            callbacks[i]();\n          }\n          state.status = status;\n          state.passed = [];\n          state.failed = [];\n          if (link) {\n            link.onload = null;\n            link.onerror = null;\n            link = null;\n          }\n        };\n        var passed = function () {\n          return resolve(state.passed, 2);\n        };\n        var failed = function () {\n          return resolve(state.failed, 3);\n        };\n        var wait = function (testCallback, waitCallback) {\n          if (!testCallback()) {\n            if (Date.now() - startTime < maxLoadTime) {\n              Delay.setTimeout(waitCallback);\n            } else {\n              failed();\n            }\n          }\n        };\n        var waitForWebKitLinkLoaded = function () {\n          wait(function () {\n            var styleSheets = documentOrShadowRoot.styleSheets;\n            var i = styleSheets.length;\n            while (i--) {\n              var styleSheet = styleSheets[i];\n              var owner = styleSheet.ownerNode;\n              if (owner && owner.id === link.id) {\n                passed();\n                return true;\n              }\n            }\n            return false;\n          }, waitForWebKitLinkLoaded);\n        };\n        if (success) {\n          state.passed.push(success);\n        }\n        if (failure) {\n          state.failed.push(failure);\n        }\n        if (state.status === 1) {\n          return;\n        }\n        if (state.status === 2) {\n          passed();\n          return;\n        }\n        if (state.status === 3) {\n          failed();\n          return;\n        }\n        state.status = 1;\n        var linkElem = SugarElement.fromTag('link', doc.dom);\n        setAll$1(linkElem, {\n          rel: 'stylesheet',\n          type: 'text/css',\n          id: state.id\n        });\n        var startTime = Date.now();\n        if (settings.contentCssCors) {\n          set$1(linkElem, 'crossOrigin', 'anonymous');\n        }\n        if (settings.referrerPolicy) {\n          set$1(linkElem, 'referrerpolicy', settings.referrerPolicy);\n        }\n        link = linkElem.dom;\n        link.onload = waitForWebKitLinkLoaded;\n        link.onerror = failed;\n        addStyle(linkElem);\n        set$1(linkElem, 'href', urlWithSuffix);\n      };\n      var loadF = function (url) {\n        return Future.nu(function (resolve) {\n          load(url, compose(resolve, constant(Result.value(url))), compose(resolve, constant(Result.error(url))));\n        });\n      };\n      var loadAll = function (urls, success, failure) {\n        par(map$3(urls, loadF)).get(function (result) {\n          var parts = partition(result, function (r) {\n            return r.isValue();\n          });\n          if (parts.fail.length > 0) {\n            failure(parts.fail.map(unite));\n          } else {\n            success(parts.pass.map(unite));\n          }\n        });\n      };\n      var unload = function (url) {\n        var urlWithSuffix = Tools._addCacheSuffix(url);\n        get$9(loadedStates, urlWithSuffix).each(function (state) {\n          var count = --state.count;\n          if (count === 0) {\n            delete loadedStates[urlWithSuffix];\n            removeStyle(state.id);\n          }\n        });\n      };\n      var unloadAll = function (urls) {\n        each$k(urls, function (url) {\n          unload(url);\n        });\n      };\n      return {\n        load: load,\n        loadAll: loadAll,\n        unload: unload,\n        unloadAll: unloadAll,\n        _setReferrerPolicy: _setReferrerPolicy\n      };\n    };\n\n    var create$8 = function () {\n      var map = new WeakMap();\n      var forElement = function (referenceElement, settings) {\n        var root = getRootNode(referenceElement);\n        var rootDom = root.dom;\n        return Optional.from(map.get(rootDom)).getOrThunk(function () {\n          var sl = StyleSheetLoader(rootDom, settings);\n          map.set(rootDom, sl);\n          return sl;\n        });\n      };\n      return { forElement: forElement };\n    };\n    var instance = create$8();\n\n    var DomTreeWalker = function () {\n      function DomTreeWalker(startNode, rootNode) {\n        this.node = startNode;\n        this.rootNode = rootNode;\n        this.current = this.current.bind(this);\n        this.next = this.next.bind(this);\n        this.prev = this.prev.bind(this);\n        this.prev2 = this.prev2.bind(this);\n      }\n      DomTreeWalker.prototype.current = function () {\n        return this.node;\n      };\n      DomTreeWalker.prototype.next = function (shallow) {\n        this.node = this.findSibling(this.node, 'firstChild', 'nextSibling', shallow);\n        return this.node;\n      };\n      DomTreeWalker.prototype.prev = function (shallow) {\n        this.node = this.findSibling(this.node, 'lastChild', 'previousSibling', shallow);\n        return this.node;\n      };\n      DomTreeWalker.prototype.prev2 = function (shallow) {\n        this.node = this.findPreviousNode(this.node, 'lastChild', 'previousSibling', shallow);\n        return this.node;\n      };\n      DomTreeWalker.prototype.findSibling = function (node, startName, siblingName, shallow) {\n        var sibling, parent;\n        if (node) {\n          if (!shallow && node[startName]) {\n            return node[startName];\n          }\n          if (node !== this.rootNode) {\n            sibling = node[siblingName];\n            if (sibling) {\n              return sibling;\n            }\n            for (parent = node.parentNode; parent && parent !== this.rootNode; parent = parent.parentNode) {\n              sibling = parent[siblingName];\n              if (sibling) {\n                return sibling;\n              }\n            }\n          }\n        }\n      };\n      DomTreeWalker.prototype.findPreviousNode = function (node, startName, siblingName, shallow) {\n        var sibling, parent, child;\n        if (node) {\n          sibling = node[siblingName];\n          if (this.rootNode && sibling === this.rootNode) {\n            return;\n          }\n          if (sibling) {\n            if (!shallow) {\n              for (child = sibling[startName]; child; child = child[startName]) {\n                if (!child[startName]) {\n                  return child;\n                }\n              }\n            }\n            return sibling;\n          }\n          parent = node.parentNode;\n          if (parent && parent !== this.rootNode) {\n            return parent;\n          }\n        }\n      };\n      return DomTreeWalker;\n    }();\n\n    var blocks = [\n      'article',\n      'aside',\n      'details',\n      'div',\n      'dt',\n      'figcaption',\n      'footer',\n      'form',\n      'fieldset',\n      'header',\n      'hgroup',\n      'html',\n      'main',\n      'nav',\n      'section',\n      'summary',\n      'body',\n      'p',\n      'dl',\n      'multicol',\n      'dd',\n      'figure',\n      'address',\n      'center',\n      'blockquote',\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'listing',\n      'xmp',\n      'pre',\n      'plaintext',\n      'menu',\n      'dir',\n      'ul',\n      'ol',\n      'li',\n      'hr',\n      'table',\n      'tbody',\n      'thead',\n      'tfoot',\n      'th',\n      'tr',\n      'td',\n      'caption'\n    ];\n    var tableCells = [\n      'td',\n      'th'\n    ];\n    var tableSections = [\n      'thead',\n      'tbody',\n      'tfoot'\n    ];\n    var textBlocks = [\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'p',\n      'div',\n      'address',\n      'pre',\n      'form',\n      'blockquote',\n      'center',\n      'dir',\n      'fieldset',\n      'header',\n      'footer',\n      'article',\n      'section',\n      'hgroup',\n      'aside',\n      'nav',\n      'figure'\n    ];\n    var headings = [\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6'\n    ];\n    var listItems$1 = [\n      'li',\n      'dd',\n      'dt'\n    ];\n    var lists = [\n      'ul',\n      'ol',\n      'dl'\n    ];\n    var wsElements = [\n      'pre',\n      'script',\n      'textarea',\n      'style'\n    ];\n    var lazyLookup = function (items) {\n      var lookup;\n      return function (node) {\n        lookup = lookup ? lookup : mapToObject(items, always);\n        return has$2(lookup, name(node));\n      };\n    };\n    var isHeading = lazyLookup(headings);\n    var isBlock$2 = lazyLookup(blocks);\n    var isTable$2 = function (node) {\n      return name(node) === 'table';\n    };\n    var isInline$1 = function (node) {\n      return isElement$6(node) && !isBlock$2(node);\n    };\n    var isBr$4 = function (node) {\n      return isElement$6(node) && name(node) === 'br';\n    };\n    var isTextBlock$2 = lazyLookup(textBlocks);\n    var isList = lazyLookup(lists);\n    var isListItem = lazyLookup(listItems$1);\n    var isTableSection = lazyLookup(tableSections);\n    var isTableCell$4 = lazyLookup(tableCells);\n    var isWsPreserveElement = lazyLookup(wsElements);\n\n    var ancestor$1 = function (scope, selector, isRoot) {\n      return ancestor$2(scope, selector, isRoot).isSome();\n    };\n\n    var zeroWidth = '\\uFEFF';\n    var nbsp = '\\xA0';\n    var isZwsp$1 = function (char) {\n      return char === zeroWidth;\n    };\n    var removeZwsp = function (s) {\n      return s.replace(/\\uFEFF/g, '');\n    };\n\n    var ZWSP$1 = zeroWidth;\n    var isZwsp = isZwsp$1;\n    var trim$3 = removeZwsp;\n\n    var isElement$4 = isElement$5;\n    var isText$6 = isText$7;\n    var isCaretContainerBlock$1 = function (node) {\n      if (isText$6(node)) {\n        node = node.parentNode;\n      }\n      return isElement$4(node) && node.hasAttribute('data-mce-caret');\n    };\n    var isCaretContainerInline = function (node) {\n      return isText$6(node) && isZwsp(node.data);\n    };\n    var isCaretContainer$2 = function (node) {\n      return isCaretContainerBlock$1(node) || isCaretContainerInline(node);\n    };\n    var hasContent = function (node) {\n      return node.firstChild !== node.lastChild || !isBr$5(node.firstChild);\n    };\n    var insertInline$1 = function (node, before) {\n      var doc = node.ownerDocument;\n      var textNode = doc.createTextNode(ZWSP$1);\n      var parentNode = node.parentNode;\n      if (!before) {\n        var sibling = node.nextSibling;\n        if (isText$6(sibling)) {\n          if (isCaretContainer$2(sibling)) {\n            return sibling;\n          }\n          if (startsWithCaretContainer$1(sibling)) {\n            sibling.splitText(1);\n            return sibling;\n          }\n        }\n        if (node.nextSibling) {\n          parentNode.insertBefore(textNode, node.nextSibling);\n        } else {\n          parentNode.appendChild(textNode);\n        }\n      } else {\n        var sibling = node.previousSibling;\n        if (isText$6(sibling)) {\n          if (isCaretContainer$2(sibling)) {\n            return sibling;\n          }\n          if (endsWithCaretContainer$1(sibling)) {\n            return sibling.splitText(sibling.data.length - 1);\n          }\n        }\n        parentNode.insertBefore(textNode, node);\n      }\n      return textNode;\n    };\n    var isBeforeInline = function (pos) {\n      var container = pos.container();\n      if (!isText$7(container)) {\n        return false;\n      }\n      return container.data.charAt(pos.offset()) === ZWSP$1 || pos.isAtStart() && isCaretContainerInline(container.previousSibling);\n    };\n    var isAfterInline = function (pos) {\n      var container = pos.container();\n      if (!isText$7(container)) {\n        return false;\n      }\n      return container.data.charAt(pos.offset() - 1) === ZWSP$1 || pos.isAtEnd() && isCaretContainerInline(container.nextSibling);\n    };\n    var createBogusBr = function () {\n      var br = document.createElement('br');\n      br.setAttribute('data-mce-bogus', '1');\n      return br;\n    };\n    var insertBlock$1 = function (blockName, node, before) {\n      var doc = node.ownerDocument;\n      var blockNode = doc.createElement(blockName);\n      blockNode.setAttribute('data-mce-caret', before ? 'before' : 'after');\n      blockNode.setAttribute('data-mce-bogus', 'all');\n      blockNode.appendChild(createBogusBr());\n      var parentNode = node.parentNode;\n      if (!before) {\n        if (node.nextSibling) {\n          parentNode.insertBefore(blockNode, node.nextSibling);\n        } else {\n          parentNode.appendChild(blockNode);\n        }\n      } else {\n        parentNode.insertBefore(blockNode, node);\n      }\n      return blockNode;\n    };\n    var startsWithCaretContainer$1 = function (node) {\n      return isText$6(node) && node.data[0] === ZWSP$1;\n    };\n    var endsWithCaretContainer$1 = function (node) {\n      return isText$6(node) && node.data[node.data.length - 1] === ZWSP$1;\n    };\n    var trimBogusBr = function (elm) {\n      var brs = elm.getElementsByTagName('br');\n      var lastBr = brs[brs.length - 1];\n      if (isBogus$2(lastBr)) {\n        lastBr.parentNode.removeChild(lastBr);\n      }\n    };\n    var showCaretContainerBlock = function (caretContainer) {\n      if (caretContainer && caretContainer.hasAttribute('data-mce-caret')) {\n        trimBogusBr(caretContainer);\n        caretContainer.removeAttribute('data-mce-caret');\n        caretContainer.removeAttribute('data-mce-bogus');\n        caretContainer.removeAttribute('style');\n        caretContainer.removeAttribute('_moz_abspos');\n        return caretContainer;\n      }\n      return null;\n    };\n    var isRangeInCaretContainerBlock = function (range) {\n      return isCaretContainerBlock$1(range.startContainer);\n    };\n\n    var isContentEditableTrue$3 = isContentEditableTrue$4;\n    var isContentEditableFalse$a = isContentEditableFalse$b;\n    var isBr$3 = isBr$5;\n    var isText$5 = isText$7;\n    var isInvalidTextElement = matchNodeNames([\n      'script',\n      'style',\n      'textarea'\n    ]);\n    var isAtomicInline = matchNodeNames([\n      'img',\n      'input',\n      'textarea',\n      'hr',\n      'iframe',\n      'video',\n      'audio',\n      'object',\n      'embed'\n    ]);\n    var isTable$1 = matchNodeNames(['table']);\n    var isCaretContainer$1 = isCaretContainer$2;\n    var isCaretCandidate$3 = function (node) {\n      if (isCaretContainer$1(node)) {\n        return false;\n      }\n      if (isText$5(node)) {\n        return !isInvalidTextElement(node.parentNode);\n      }\n      return isAtomicInline(node) || isBr$3(node) || isTable$1(node) || isNonUiContentEditableFalse(node);\n    };\n    var isUnselectable = function (node) {\n      return isElement$5(node) && node.getAttribute('unselectable') === 'true';\n    };\n    var isNonUiContentEditableFalse = function (node) {\n      return isUnselectable(node) === false && isContentEditableFalse$a(node);\n    };\n    var isInEditable = function (node, root) {\n      for (node = node.parentNode; node && node !== root; node = node.parentNode) {\n        if (isNonUiContentEditableFalse(node)) {\n          return false;\n        }\n        if (isContentEditableTrue$3(node)) {\n          return true;\n        }\n      }\n      return true;\n    };\n    var isAtomicContentEditableFalse = function (node) {\n      if (!isNonUiContentEditableFalse(node)) {\n        return false;\n      }\n      return foldl(from(node.getElementsByTagName('*')), function (result, elm) {\n        return result || isContentEditableTrue$3(elm);\n      }, false) !== true;\n    };\n    var isAtomic$1 = function (node) {\n      return isAtomicInline(node) || isAtomicContentEditableFalse(node);\n    };\n    var isEditableCaretCandidate$1 = function (node, root) {\n      return isCaretCandidate$3(node) && isInEditable(node, root);\n    };\n\n    var whiteSpaceRegExp$1 = /^[ \\t\\r\\n]*$/;\n    var isWhitespaceText = function (text) {\n      return whiteSpaceRegExp$1.test(text);\n    };\n\n    var hasWhitespacePreserveParent = function (node, rootNode) {\n      var rootElement = SugarElement.fromDom(rootNode);\n      var startNode = SugarElement.fromDom(node);\n      return ancestor$1(startNode, 'pre,code', curry(eq, rootElement));\n    };\n    var isWhitespace = function (node, rootNode) {\n      return isText$7(node) && isWhitespaceText(node.data) && hasWhitespacePreserveParent(node, rootNode) === false;\n    };\n    var isNamedAnchor = function (node) {\n      return isElement$5(node) && node.nodeName === 'A' && !node.hasAttribute('href') && (node.hasAttribute('name') || node.hasAttribute('id'));\n    };\n    var isContent$1 = function (node, rootNode) {\n      return isCaretCandidate$3(node) && isWhitespace(node, rootNode) === false || isNamedAnchor(node) || isBookmark(node);\n    };\n    var isBookmark = hasAttribute('data-mce-bookmark');\n    var isBogus$1 = hasAttribute('data-mce-bogus');\n    var isBogusAll = hasAttributeValue('data-mce-bogus', 'all');\n    var isEmptyNode = function (targetNode, skipBogus) {\n      var brCount = 0;\n      if (isContent$1(targetNode, targetNode)) {\n        return false;\n      } else {\n        var node = targetNode.firstChild;\n        if (!node) {\n          return true;\n        }\n        var walker = new DomTreeWalker(node, targetNode);\n        do {\n          if (skipBogus) {\n            if (isBogusAll(node)) {\n              node = walker.next(true);\n              continue;\n            }\n            if (isBogus$1(node)) {\n              node = walker.next();\n              continue;\n            }\n          }\n          if (isBr$5(node)) {\n            brCount++;\n            node = walker.next();\n            continue;\n          }\n          if (isContent$1(node, targetNode)) {\n            return false;\n          }\n          node = walker.next();\n        } while (node);\n        return brCount <= 1;\n      }\n    };\n    var isEmpty$2 = function (elm, skipBogus) {\n      if (skipBogus === void 0) {\n        skipBogus = true;\n      }\n      return isEmptyNode(elm.dom, skipBogus);\n    };\n\n    var isSpan = function (node) {\n      return node.nodeName.toLowerCase() === 'span';\n    };\n    var isInlineContent = function (node, root) {\n      return isNonNullable(node) && (isContent$1(node, root) || isInline$1(SugarElement.fromDom(node)));\n    };\n    var surroundedByInlineContent = function (node, root) {\n      var prev = new DomTreeWalker(node, root).prev(false);\n      var next = new DomTreeWalker(node, root).next(false);\n      var prevIsInline = isUndefined(prev) || isInlineContent(prev, root);\n      var nextIsInline = isUndefined(next) || isInlineContent(next, root);\n      return prevIsInline && nextIsInline;\n    };\n    var isBookmarkNode$2 = function (node) {\n      return isSpan(node) && node.getAttribute('data-mce-type') === 'bookmark';\n    };\n    var isKeepTextNode = function (node, root) {\n      return isText$7(node) && node.data.length > 0 && surroundedByInlineContent(node, root);\n    };\n    var isKeepElement = function (node) {\n      return isElement$5(node) ? node.childNodes.length > 0 : false;\n    };\n    var isDocument = function (node) {\n      return isDocumentFragment(node) || isDocument$1(node);\n    };\n    var trimNode = function (dom, node, root) {\n      var rootNode = root || node;\n      if (isElement$5(node) && isBookmarkNode$2(node)) {\n        return node;\n      }\n      var children = node.childNodes;\n      for (var i = children.length - 1; i >= 0; i--) {\n        trimNode(dom, children[i], rootNode);\n      }\n      if (isElement$5(node)) {\n        var currentChildren = node.childNodes;\n        if (currentChildren.length === 1 && isBookmarkNode$2(currentChildren[0])) {\n          node.parentNode.insertBefore(currentChildren[0], node);\n        }\n      }\n      if (!isDocument(node) && !isContent$1(node, rootNode) && !isKeepElement(node) && !isKeepTextNode(node, rootNode)) {\n        dom.remove(node);\n      }\n      return node;\n    };\n\n    var makeMap$3 = Tools.makeMap;\n    var attrsCharsRegExp = /[&<>\\\"\\u0060\\u007E-\\uD7FF\\uE000-\\uFFEF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n    var textCharsRegExp = /[<>&\\u007E-\\uD7FF\\uE000-\\uFFEF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n    var rawCharsRegExp = /[<>&\\\"\\']/g;\n    var entityRegExp = /&#([a-z0-9]+);?|&([a-z0-9]+);/gi;\n    var asciiMap = {\n      128: '\\u20AC',\n      130: '\\u201A',\n      131: '\\u0192',\n      132: '\\u201E',\n      133: '\\u2026',\n      134: '\\u2020',\n      135: '\\u2021',\n      136: '\\u02c6',\n      137: '\\u2030',\n      138: '\\u0160',\n      139: '\\u2039',\n      140: '\\u0152',\n      142: '\\u017d',\n      145: '\\u2018',\n      146: '\\u2019',\n      147: '\\u201C',\n      148: '\\u201D',\n      149: '\\u2022',\n      150: '\\u2013',\n      151: '\\u2014',\n      152: '\\u02DC',\n      153: '\\u2122',\n      154: '\\u0161',\n      155: '\\u203A',\n      156: '\\u0153',\n      158: '\\u017e',\n      159: '\\u0178'\n    };\n    var baseEntities = {\n      '\"': '&quot;',\n      '\\'': '&#39;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '&': '&amp;',\n      '`': '&#96;'\n    };\n    var reverseEntities = {\n      '&lt;': '<',\n      '&gt;': '>',\n      '&amp;': '&',\n      '&quot;': '\"',\n      '&apos;': '\\''\n    };\n    var nativeDecode = function (text) {\n      var elm = SugarElement.fromTag('div').dom;\n      elm.innerHTML = text;\n      return elm.textContent || elm.innerText || text;\n    };\n    var buildEntitiesLookup = function (items, radix) {\n      var i, chr, entity;\n      var lookup = {};\n      if (items) {\n        items = items.split(',');\n        radix = radix || 10;\n        for (i = 0; i < items.length; i += 2) {\n          chr = String.fromCharCode(parseInt(items[i], radix));\n          if (!baseEntities[chr]) {\n            entity = '&' + items[i + 1] + ';';\n            lookup[chr] = entity;\n            lookup[entity] = chr;\n          }\n        }\n        return lookup;\n      }\n    };\n    var namedEntities = buildEntitiesLookup('50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,' + '5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,' + '5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,' + '5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,' + '68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,' + '6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,' + '6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,' + '75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,' + '7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,' + '7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,' + 'sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,' + 'st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,' + 't9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,' + 'tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,' + 'u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,' + '81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,' + '8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,' + '8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,' + '8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,' + '8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,' + 'nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,' + 'rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,' + 'Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,' + '80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,' + '811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro', 32);\n    var encodeRaw = function (text, attr) {\n      return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n        return baseEntities[chr] || chr;\n      });\n    };\n    var encodeAllRaw = function (text) {\n      return ('' + text).replace(rawCharsRegExp, function (chr) {\n        return baseEntities[chr] || chr;\n      });\n    };\n    var encodeNumeric = function (text, attr) {\n      return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n        if (chr.length > 1) {\n          return '&#' + ((chr.charCodeAt(0) - 55296) * 1024 + (chr.charCodeAt(1) - 56320) + 65536) + ';';\n        }\n        return baseEntities[chr] || '&#' + chr.charCodeAt(0) + ';';\n      });\n    };\n    var encodeNamed = function (text, attr, entities) {\n      entities = entities || namedEntities;\n      return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n        return baseEntities[chr] || entities[chr] || chr;\n      });\n    };\n    var getEncodeFunc = function (name, entities) {\n      var entitiesMap = buildEntitiesLookup(entities) || namedEntities;\n      var encodeNamedAndNumeric = function (text, attr) {\n        return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n          if (baseEntities[chr] !== undefined) {\n            return baseEntities[chr];\n          }\n          if (entitiesMap[chr] !== undefined) {\n            return entitiesMap[chr];\n          }\n          if (chr.length > 1) {\n            return '&#' + ((chr.charCodeAt(0) - 55296) * 1024 + (chr.charCodeAt(1) - 56320) + 65536) + ';';\n          }\n          return '&#' + chr.charCodeAt(0) + ';';\n        });\n      };\n      var encodeCustomNamed = function (text, attr) {\n        return encodeNamed(text, attr, entitiesMap);\n      };\n      var nameMap = makeMap$3(name.replace(/\\+/g, ','));\n      if (nameMap.named && nameMap.numeric) {\n        return encodeNamedAndNumeric;\n      }\n      if (nameMap.named) {\n        if (entities) {\n          return encodeCustomNamed;\n        }\n        return encodeNamed;\n      }\n      if (nameMap.numeric) {\n        return encodeNumeric;\n      }\n      return encodeRaw;\n    };\n    var decode = function (text) {\n      return text.replace(entityRegExp, function (all, numeric) {\n        if (numeric) {\n          if (numeric.charAt(0).toLowerCase() === 'x') {\n            numeric = parseInt(numeric.substr(1), 16);\n          } else {\n            numeric = parseInt(numeric, 10);\n          }\n          if (numeric > 65535) {\n            numeric -= 65536;\n            return String.fromCharCode(55296 + (numeric >> 10), 56320 + (numeric & 1023));\n          }\n          return asciiMap[numeric] || String.fromCharCode(numeric);\n        }\n        return reverseEntities[all] || namedEntities[all] || nativeDecode(all);\n      });\n    };\n    var Entities = {\n      encodeRaw: encodeRaw,\n      encodeAllRaw: encodeAllRaw,\n      encodeNumeric: encodeNumeric,\n      encodeNamed: encodeNamed,\n      getEncodeFunc: getEncodeFunc,\n      decode: decode\n    };\n\n    var mapCache = {}, dummyObj = {};\n    var makeMap$2 = Tools.makeMap, each$h = Tools.each, extend$5 = Tools.extend, explode$3 = Tools.explode, inArray$2 = Tools.inArray;\n    var split$1 = function (items, delim) {\n      items = Tools.trim(items);\n      return items ? items.split(delim || ' ') : [];\n    };\n    var createMap = function (defaultValue, extendWith) {\n      var value = makeMap$2(defaultValue, ' ', makeMap$2(defaultValue.toUpperCase(), ' '));\n      return extend$5(value, extendWith);\n    };\n    var getTextRootBlockElements = function (schema) {\n      return createMap('td th li dt dd figcaption caption details summary', schema.getTextBlockElements());\n    };\n    var compileSchema = function (type) {\n      var schema = {};\n      var globalAttributes, blockContent;\n      var phrasingContent, flowContent, html4BlockContent, html4PhrasingContent;\n      var add = function (name, attributes, children) {\n        var ni, attributesOrder, element;\n        var arrayToMap = function (array, obj) {\n          var map = {};\n          var i, l;\n          for (i = 0, l = array.length; i < l; i++) {\n            map[array[i]] = obj || {};\n          }\n          return map;\n        };\n        children = children || [];\n        attributes = attributes || '';\n        if (typeof children === 'string') {\n          children = split$1(children);\n        }\n        var names = split$1(name);\n        ni = names.length;\n        while (ni--) {\n          attributesOrder = split$1([\n            globalAttributes,\n            attributes\n          ].join(' '));\n          element = {\n            attributes: arrayToMap(attributesOrder),\n            attributesOrder: attributesOrder,\n            children: arrayToMap(children, dummyObj)\n          };\n          schema[names[ni]] = element;\n        }\n      };\n      var addAttrs = function (name, attributes) {\n        var ni, schemaItem, i, l;\n        var names = split$1(name);\n        ni = names.length;\n        var attrs = split$1(attributes);\n        while (ni--) {\n          schemaItem = schema[names[ni]];\n          for (i = 0, l = attrs.length; i < l; i++) {\n            schemaItem.attributes[attrs[i]] = {};\n            schemaItem.attributesOrder.push(attrs[i]);\n          }\n        }\n      };\n      if (mapCache[type]) {\n        return mapCache[type];\n      }\n      globalAttributes = 'id accesskey class dir lang style tabindex title role';\n      blockContent = 'address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul';\n      phrasingContent = 'a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd ' + 'label map noscript object q s samp script select small span strong sub sup ' + 'textarea u var #text #comment';\n      if (type !== 'html4') {\n        globalAttributes += ' contenteditable contextmenu draggable dropzone ' + 'hidden spellcheck translate';\n        blockContent += ' article aside details dialog figure main header footer hgroup section nav';\n        phrasingContent += ' audio canvas command datalist mark meter output picture ' + 'progress time wbr video ruby bdi keygen';\n      }\n      if (type !== 'html5-strict') {\n        globalAttributes += ' xml:lang';\n        html4PhrasingContent = 'acronym applet basefont big font strike tt';\n        phrasingContent = [\n          phrasingContent,\n          html4PhrasingContent\n        ].join(' ');\n        each$h(split$1(html4PhrasingContent), function (name) {\n          add(name, '', phrasingContent);\n        });\n        html4BlockContent = 'center dir isindex noframes';\n        blockContent = [\n          blockContent,\n          html4BlockContent\n        ].join(' ');\n        flowContent = [\n          blockContent,\n          phrasingContent\n        ].join(' ');\n        each$h(split$1(html4BlockContent), function (name) {\n          add(name, '', flowContent);\n        });\n      }\n      flowContent = flowContent || [\n        blockContent,\n        phrasingContent\n      ].join(' ');\n      add('html', 'manifest', 'head body');\n      add('head', '', 'base command link meta noscript script style title');\n      add('title hr noscript br');\n      add('base', 'href target');\n      add('link', 'href rel media hreflang type sizes hreflang');\n      add('meta', 'name http-equiv content charset');\n      add('style', 'media type scoped');\n      add('script', 'src async defer type charset');\n      add('body', 'onafterprint onbeforeprint onbeforeunload onblur onerror onfocus ' + 'onhashchange onload onmessage onoffline ononline onpagehide onpageshow ' + 'onpopstate onresize onscroll onstorage onunload', flowContent);\n      add('address dt dd div caption', '', flowContent);\n      add('h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn', '', phrasingContent);\n      add('blockquote', 'cite', flowContent);\n      add('ol', 'reversed start type', 'li');\n      add('ul', '', 'li');\n      add('li', 'value', flowContent);\n      add('dl', '', 'dt dd');\n      add('a', 'href target rel media hreflang type', phrasingContent);\n      add('q', 'cite', phrasingContent);\n      add('ins del', 'cite datetime', flowContent);\n      add('img', 'src sizes srcset alt usemap ismap width height');\n      add('iframe', 'src name width height', flowContent);\n      add('embed', 'src type width height');\n      add('object', 'data type typemustmatch name usemap form width height', [\n        flowContent,\n        'param'\n      ].join(' '));\n      add('param', 'name value');\n      add('map', 'name', [\n        flowContent,\n        'area'\n      ].join(' '));\n      add('area', 'alt coords shape href target rel media hreflang type');\n      add('table', 'border', 'caption colgroup thead tfoot tbody tr' + (type === 'html4' ? ' col' : ''));\n      add('colgroup', 'span', 'col');\n      add('col', 'span');\n      add('tbody thead tfoot', '', 'tr');\n      add('tr', '', 'td th');\n      add('td', 'colspan rowspan headers', flowContent);\n      add('th', 'colspan rowspan headers scope abbr', flowContent);\n      add('form', 'accept-charset action autocomplete enctype method name novalidate target', flowContent);\n      add('fieldset', 'disabled form name', [\n        flowContent,\n        'legend'\n      ].join(' '));\n      add('label', 'form for', phrasingContent);\n      add('input', 'accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate ' + 'formtarget height list max maxlength min multiple name pattern readonly required size src step type value width');\n      add('button', 'disabled form formaction formenctype formmethod formnovalidate formtarget name type value', type === 'html4' ? flowContent : phrasingContent);\n      add('select', 'disabled form multiple name required size', 'option optgroup');\n      add('optgroup', 'disabled label', 'option');\n      add('option', 'disabled label selected value');\n      add('textarea', 'cols dirname disabled form maxlength name readonly required rows wrap');\n      add('menu', 'type label', [\n        flowContent,\n        'li'\n      ].join(' '));\n      add('noscript', '', flowContent);\n      if (type !== 'html4') {\n        add('wbr');\n        add('ruby', '', [\n          phrasingContent,\n          'rt rp'\n        ].join(' '));\n        add('figcaption', '', flowContent);\n        add('mark rt rp summary bdi', '', phrasingContent);\n        add('canvas', 'width height', flowContent);\n        add('video', 'src crossorigin poster preload autoplay mediagroup loop ' + 'muted controls width height buffered', [\n          flowContent,\n          'track source'\n        ].join(' '));\n        add('audio', 'src crossorigin preload autoplay mediagroup loop muted controls ' + 'buffered volume', [\n          flowContent,\n          'track source'\n        ].join(' '));\n        add('picture', '', 'img source');\n        add('source', 'src srcset type media sizes');\n        add('track', 'kind src srclang label default');\n        add('datalist', '', [\n          phrasingContent,\n          'option'\n        ].join(' '));\n        add('article section nav aside main header footer', '', flowContent);\n        add('hgroup', '', 'h1 h2 h3 h4 h5 h6');\n        add('figure', '', [\n          flowContent,\n          'figcaption'\n        ].join(' '));\n        add('time', 'datetime', phrasingContent);\n        add('dialog', 'open', flowContent);\n        add('command', 'type label icon disabled checked radiogroup command');\n        add('output', 'for form name', phrasingContent);\n        add('progress', 'value max', phrasingContent);\n        add('meter', 'value min max low high optimum', phrasingContent);\n        add('details', 'open', [\n          flowContent,\n          'summary'\n        ].join(' '));\n        add('keygen', 'autofocus challenge disabled form keytype name');\n      }\n      if (type !== 'html5-strict') {\n        addAttrs('script', 'language xml:space');\n        addAttrs('style', 'xml:space');\n        addAttrs('object', 'declare classid code codebase codetype archive standby align border hspace vspace');\n        addAttrs('embed', 'align name hspace vspace');\n        addAttrs('param', 'valuetype type');\n        addAttrs('a', 'charset name rev shape coords');\n        addAttrs('br', 'clear');\n        addAttrs('applet', 'codebase archive code object alt name width height align hspace vspace');\n        addAttrs('img', 'name longdesc align border hspace vspace');\n        addAttrs('iframe', 'longdesc frameborder marginwidth marginheight scrolling align');\n        addAttrs('font basefont', 'size color face');\n        addAttrs('input', 'usemap align');\n        addAttrs('select');\n        addAttrs('textarea');\n        addAttrs('h1 h2 h3 h4 h5 h6 div p legend caption', 'align');\n        addAttrs('ul', 'type compact');\n        addAttrs('li', 'type');\n        addAttrs('ol dl menu dir', 'compact');\n        addAttrs('pre', 'width xml:space');\n        addAttrs('hr', 'align noshade size width');\n        addAttrs('isindex', 'prompt');\n        addAttrs('table', 'summary width frame rules cellspacing cellpadding align bgcolor');\n        addAttrs('col', 'width align char charoff valign');\n        addAttrs('colgroup', 'width align char charoff valign');\n        addAttrs('thead', 'align char charoff valign');\n        addAttrs('tr', 'align char charoff valign bgcolor');\n        addAttrs('th', 'axis align char charoff valign nowrap bgcolor width height');\n        addAttrs('form', 'accept');\n        addAttrs('td', 'abbr axis scope align char charoff valign nowrap bgcolor width height');\n        addAttrs('tfoot', 'align char charoff valign');\n        addAttrs('tbody', 'align char charoff valign');\n        addAttrs('area', 'nohref');\n        addAttrs('body', 'background bgcolor text link vlink alink');\n      }\n      if (type !== 'html4') {\n        addAttrs('input button select textarea', 'autofocus');\n        addAttrs('input textarea', 'placeholder');\n        addAttrs('a', 'download');\n        addAttrs('link script img', 'crossorigin');\n        addAttrs('img', 'loading');\n        addAttrs('iframe', 'sandbox seamless allowfullscreen loading');\n      }\n      each$h(split$1('a form meter progress dfn'), function (name) {\n        if (schema[name]) {\n          delete schema[name].children[name];\n        }\n      });\n      delete schema.caption.children.table;\n      delete schema.script;\n      mapCache[type] = schema;\n      return schema;\n    };\n    var compileElementMap = function (value, mode) {\n      var styles;\n      if (value) {\n        styles = {};\n        if (typeof value === 'string') {\n          value = { '*': value };\n        }\n        each$h(value, function (value, key) {\n          styles[key] = styles[key.toUpperCase()] = mode === 'map' ? makeMap$2(value, /[, ]/) : explode$3(value, /[, ]/);\n        });\n      }\n      return styles;\n    };\n    var Schema = function (settings) {\n      var elements = {};\n      var children = {};\n      var patternElements = [];\n      var customElementsMap = {}, specialElements = {};\n      var createLookupTable = function (option, defaultValue, extendWith) {\n        var value = settings[option];\n        if (!value) {\n          value = mapCache[option];\n          if (!value) {\n            value = createMap(defaultValue, extendWith);\n            mapCache[option] = value;\n          }\n        } else {\n          value = makeMap$2(value, /[, ]/, makeMap$2(value.toUpperCase(), /[, ]/));\n        }\n        return value;\n      };\n      settings = settings || {};\n      var schemaItems = compileSchema(settings.schema);\n      if (settings.verify_html === false) {\n        settings.valid_elements = '*[*]';\n      }\n      var validStyles = compileElementMap(settings.valid_styles);\n      var invalidStyles = compileElementMap(settings.invalid_styles, 'map');\n      var validClasses = compileElementMap(settings.valid_classes, 'map');\n      var whiteSpaceElementsMap = createLookupTable('whitespace_elements', 'pre script noscript style textarea video audio iframe object code');\n      var selfClosingElementsMap = createLookupTable('self_closing_elements', 'colgroup dd dt li option p td tfoot th thead tr');\n      var shortEndedElementsMap = createLookupTable('short_ended_elements', 'area base basefont br col frame hr img input isindex link ' + 'meta param embed source wbr track');\n      var boolAttrMap = createLookupTable('boolean_attributes', 'checked compact declare defer disabled ismap multiple nohref noresize ' + 'noshade nowrap readonly selected autoplay loop controls');\n      var nonEmptyOrMoveCaretBeforeOnEnter = 'td th iframe video audio object script code';\n      var nonEmptyElementsMap = createLookupTable('non_empty_elements', nonEmptyOrMoveCaretBeforeOnEnter + ' pre', shortEndedElementsMap);\n      var moveCaretBeforeOnEnterElementsMap = createLookupTable('move_caret_before_on_enter_elements', nonEmptyOrMoveCaretBeforeOnEnter + ' table', shortEndedElementsMap);\n      var textBlockElementsMap = createLookupTable('text_block_elements', 'h1 h2 h3 h4 h5 h6 p div address pre form ' + 'blockquote center dir fieldset header footer article section hgroup aside main nav figure');\n      var blockElementsMap = createLookupTable('block_elements', 'hr table tbody thead tfoot ' + 'th tr td li ol ul caption dl dt dd noscript menu isindex option ' + 'datalist select optgroup figcaption details summary', textBlockElementsMap);\n      var textInlineElementsMap = createLookupTable('text_inline_elements', 'span strong b em i font s strike u var cite ' + 'dfn code mark q sup sub samp');\n      each$h((settings.special || 'script noscript iframe noframes noembed title style textarea xmp').split(' '), function (name) {\n        specialElements[name] = new RegExp('</' + name + '[^>]*>', 'gi');\n      });\n      var patternToRegExp = function (str) {\n        return new RegExp('^' + str.replace(/([?+*])/g, '.$1') + '$');\n      };\n      var addValidElements = function (validElements) {\n        var ei, el, ai, al, matches, element, attr, attrData, elementName, attrName, attrType, attributes, attributesOrder, prefix, outputName, globalAttributes, globalAttributesOrder, value;\n        var elementRuleRegExp = /^([#+\\-])?([^\\[!\\/]+)(?:\\/([^\\[!]+))?(?:(!?)\\[([^\\]]+)])?$/, attrRuleRegExp = /^([!\\-])?(\\w+[\\\\:]:\\w+|[^=:<]+)?(?:([=:<])(.*))?$/, hasPatternsRegExp = /[*?+]/;\n        if (validElements) {\n          var validElementsArr = split$1(validElements, ',');\n          if (elements['@']) {\n            globalAttributes = elements['@'].attributes;\n            globalAttributesOrder = elements['@'].attributesOrder;\n          }\n          for (ei = 0, el = validElementsArr.length; ei < el; ei++) {\n            matches = elementRuleRegExp.exec(validElementsArr[ei]);\n            if (matches) {\n              prefix = matches[1];\n              elementName = matches[2];\n              outputName = matches[3];\n              attrData = matches[5];\n              attributes = {};\n              attributesOrder = [];\n              element = {\n                attributes: attributes,\n                attributesOrder: attributesOrder\n              };\n              if (prefix === '#') {\n                element.paddEmpty = true;\n              }\n              if (prefix === '-') {\n                element.removeEmpty = true;\n              }\n              if (matches[4] === '!') {\n                element.removeEmptyAttrs = true;\n              }\n              if (globalAttributes) {\n                each$j(globalAttributes, function (value, key) {\n                  attributes[key] = value;\n                });\n                attributesOrder.push.apply(attributesOrder, globalAttributesOrder);\n              }\n              if (attrData) {\n                attrData = split$1(attrData, '|');\n                for (ai = 0, al = attrData.length; ai < al; ai++) {\n                  matches = attrRuleRegExp.exec(attrData[ai]);\n                  if (matches) {\n                    attr = {};\n                    attrType = matches[1];\n                    attrName = matches[2].replace(/[\\\\:]:/g, ':');\n                    prefix = matches[3];\n                    value = matches[4];\n                    if (attrType === '!') {\n                      element.attributesRequired = element.attributesRequired || [];\n                      element.attributesRequired.push(attrName);\n                      attr.required = true;\n                    }\n                    if (attrType === '-') {\n                      delete attributes[attrName];\n                      attributesOrder.splice(inArray$2(attributesOrder, attrName), 1);\n                      continue;\n                    }\n                    if (prefix) {\n                      if (prefix === '=') {\n                        element.attributesDefault = element.attributesDefault || [];\n                        element.attributesDefault.push({\n                          name: attrName,\n                          value: value\n                        });\n                        attr.defaultValue = value;\n                      }\n                      if (prefix === ':') {\n                        element.attributesForced = element.attributesForced || [];\n                        element.attributesForced.push({\n                          name: attrName,\n                          value: value\n                        });\n                        attr.forcedValue = value;\n                      }\n                      if (prefix === '<') {\n                        attr.validValues = makeMap$2(value, '?');\n                      }\n                    }\n                    if (hasPatternsRegExp.test(attrName)) {\n                      element.attributePatterns = element.attributePatterns || [];\n                      attr.pattern = patternToRegExp(attrName);\n                      element.attributePatterns.push(attr);\n                    } else {\n                      if (!attributes[attrName]) {\n                        attributesOrder.push(attrName);\n                      }\n                      attributes[attrName] = attr;\n                    }\n                  }\n                }\n              }\n              if (!globalAttributes && elementName === '@') {\n                globalAttributes = attributes;\n                globalAttributesOrder = attributesOrder;\n              }\n              if (outputName) {\n                element.outputName = elementName;\n                elements[outputName] = element;\n              }\n              if (hasPatternsRegExp.test(elementName)) {\n                element.pattern = patternToRegExp(elementName);\n                patternElements.push(element);\n              } else {\n                elements[elementName] = element;\n              }\n            }\n          }\n        }\n      };\n      var setValidElements = function (validElements) {\n        elements = {};\n        patternElements = [];\n        addValidElements(validElements);\n        each$h(schemaItems, function (element, name) {\n          children[name] = element.children;\n        });\n      };\n      var addCustomElements = function (customElements) {\n        var customElementRegExp = /^(~)?(.+)$/;\n        if (customElements) {\n          mapCache.text_block_elements = mapCache.block_elements = null;\n          each$h(split$1(customElements, ','), function (rule) {\n            var matches = customElementRegExp.exec(rule), inline = matches[1] === '~', cloneName = inline ? 'span' : 'div', name = matches[2];\n            children[name] = children[cloneName];\n            customElementsMap[name] = cloneName;\n            if (!inline) {\n              blockElementsMap[name.toUpperCase()] = {};\n              blockElementsMap[name] = {};\n            }\n            if (!elements[name]) {\n              var customRule = elements[cloneName];\n              customRule = extend$5({}, customRule);\n              delete customRule.removeEmptyAttrs;\n              delete customRule.removeEmpty;\n              elements[name] = customRule;\n            }\n            each$h(children, function (element, elmName) {\n              if (element[cloneName]) {\n                children[elmName] = element = extend$5({}, children[elmName]);\n                element[name] = element[cloneName];\n              }\n            });\n          });\n        }\n      };\n      var addValidChildren = function (validChildren) {\n        var childRuleRegExp = /^([+\\-]?)([A-Za-z0-9_\\-.\\u00b7\\u00c0-\\u00d6\\u00d8-\\u00f6\\u00f8-\\u037d\\u037f-\\u1fff\\u200c-\\u200d\\u203f-\\u2040\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]+)\\[([^\\]]+)]$/;\n        mapCache[settings.schema] = null;\n        if (validChildren) {\n          each$h(split$1(validChildren, ','), function (rule) {\n            var matches = childRuleRegExp.exec(rule);\n            var parent, prefix;\n            if (matches) {\n              prefix = matches[1];\n              if (prefix) {\n                parent = children[matches[2]];\n              } else {\n                parent = children[matches[2]] = { '#comment': {} };\n              }\n              parent = children[matches[2]];\n              each$h(split$1(matches[3], '|'), function (child) {\n                if (prefix === '-') {\n                  delete parent[child];\n                } else {\n                  parent[child] = {};\n                }\n              });\n            }\n          });\n        }\n      };\n      var getElementRule = function (name) {\n        var element = elements[name], i;\n        if (element) {\n          return element;\n        }\n        i = patternElements.length;\n        while (i--) {\n          element = patternElements[i];\n          if (element.pattern.test(name)) {\n            return element;\n          }\n        }\n      };\n      if (!settings.valid_elements) {\n        each$h(schemaItems, function (element, name) {\n          elements[name] = {\n            attributes: element.attributes,\n            attributesOrder: element.attributesOrder\n          };\n          children[name] = element.children;\n        });\n        if (settings.schema !== 'html5') {\n          each$h(split$1('strong/b em/i'), function (item) {\n            var items = split$1(item, '/');\n            elements[items[1]].outputName = items[0];\n          });\n        }\n        each$h(textInlineElementsMap, function (_val, name) {\n          if (elements[name]) {\n            if (settings.padd_empty_block_inline_children) {\n              elements[name].paddInEmptyBlock = true;\n            }\n            elements[name].removeEmpty = true;\n          }\n        });\n        each$h(split$1('ol ul blockquote a table tbody'), function (name) {\n          if (elements[name]) {\n            elements[name].removeEmpty = true;\n          }\n        });\n        each$h(split$1('p h1 h2 h3 h4 h5 h6 th td pre div address caption li'), function (name) {\n          elements[name].paddEmpty = true;\n        });\n        each$h(split$1('span'), function (name) {\n          elements[name].removeEmptyAttrs = true;\n        });\n      } else {\n        setValidElements(settings.valid_elements);\n      }\n      addCustomElements(settings.custom_elements);\n      addValidChildren(settings.valid_children);\n      addValidElements(settings.extended_valid_elements);\n      addValidChildren('+ol[ul|ol],+ul[ul|ol]');\n      each$h({\n        dd: 'dl',\n        dt: 'dl',\n        li: 'ul ol',\n        td: 'tr',\n        th: 'tr',\n        tr: 'tbody thead tfoot',\n        tbody: 'table',\n        thead: 'table',\n        tfoot: 'table',\n        legend: 'fieldset',\n        area: 'map',\n        param: 'video audio object'\n      }, function (parents, item) {\n        if (elements[item]) {\n          elements[item].parentsRequired = split$1(parents);\n        }\n      });\n      if (settings.invalid_elements) {\n        each$h(explode$3(settings.invalid_elements), function (item) {\n          if (elements[item]) {\n            delete elements[item];\n          }\n        });\n      }\n      if (!getElementRule('span')) {\n        addValidElements('span[!data-mce-type|*]');\n      }\n      var getValidStyles = constant(validStyles);\n      var getInvalidStyles = constant(invalidStyles);\n      var getValidClasses = constant(validClasses);\n      var getBoolAttrs = constant(boolAttrMap);\n      var getBlockElements = constant(blockElementsMap);\n      var getTextBlockElements = constant(textBlockElementsMap);\n      var getTextInlineElements = constant(textInlineElementsMap);\n      var getShortEndedElements = constant(shortEndedElementsMap);\n      var getSelfClosingElements = constant(selfClosingElementsMap);\n      var getNonEmptyElements = constant(nonEmptyElementsMap);\n      var getMoveCaretBeforeOnEnterElements = constant(moveCaretBeforeOnEnterElementsMap);\n      var getWhiteSpaceElements = constant(whiteSpaceElementsMap);\n      var getSpecialElements = constant(specialElements);\n      var isValidChild = function (name, child) {\n        var parent = children[name.toLowerCase()];\n        return !!(parent && parent[child.toLowerCase()]);\n      };\n      var isValid = function (name, attr) {\n        var attrPatterns, i;\n        var rule = getElementRule(name);\n        if (rule) {\n          if (attr) {\n            if (rule.attributes[attr]) {\n              return true;\n            }\n            attrPatterns = rule.attributePatterns;\n            if (attrPatterns) {\n              i = attrPatterns.length;\n              while (i--) {\n                if (attrPatterns[i].pattern.test(name)) {\n                  return true;\n                }\n              }\n            }\n          } else {\n            return true;\n          }\n        }\n        return false;\n      };\n      var getCustomElements = constant(customElementsMap);\n      return {\n        children: children,\n        elements: elements,\n        getValidStyles: getValidStyles,\n        getValidClasses: getValidClasses,\n        getBlockElements: getBlockElements,\n        getInvalidStyles: getInvalidStyles,\n        getShortEndedElements: getShortEndedElements,\n        getTextBlockElements: getTextBlockElements,\n        getTextInlineElements: getTextInlineElements,\n        getBoolAttrs: getBoolAttrs,\n        getElementRule: getElementRule,\n        getSelfClosingElements: getSelfClosingElements,\n        getNonEmptyElements: getNonEmptyElements,\n        getMoveCaretBeforeOnEnterElements: getMoveCaretBeforeOnEnterElements,\n        getWhiteSpaceElements: getWhiteSpaceElements,\n        getSpecialElements: getSpecialElements,\n        isValidChild: isValidChild,\n        isValid: isValid,\n        getCustomElements: getCustomElements,\n        addValidElements: addValidElements,\n        setValidElements: setValidElements,\n        addCustomElements: addCustomElements,\n        addValidChildren: addValidChildren\n      };\n    };\n\n    var toHex = function (match, r, g, b) {\n      var hex = function (val) {\n        val = parseInt(val, 10).toString(16);\n        return val.length > 1 ? val : '0' + val;\n      };\n      return '#' + hex(r) + hex(g) + hex(b);\n    };\n    var Styles = function (settings, schema) {\n      var _this = this;\n      var rgbRegExp = /rgb\\s*\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*\\)/gi;\n      var urlOrStrRegExp = /(?:url(?:(?:\\(\\s*\\\"([^\\\"]+)\\\"\\s*\\))|(?:\\(\\s*\\'([^\\']+)\\'\\s*\\))|(?:\\(\\s*([^)\\s]+)\\s*\\))))|(?:\\'([^\\']+)\\')|(?:\\\"([^\\\"]+)\\\")/gi;\n      var styleRegExp = /\\s*([^:]+):\\s*([^;]+);?/g;\n      var trimRightRegExp = /\\s+$/;\n      var i;\n      var encodingLookup = {};\n      var validStyles;\n      var invalidStyles;\n      var invisibleChar = zeroWidth;\n      settings = settings || {};\n      if (schema) {\n        validStyles = schema.getValidStyles();\n        invalidStyles = schema.getInvalidStyles();\n      }\n      var encodingItems = ('\\\\\" \\\\\\' \\\\; \\\\: ; : ' + invisibleChar).split(' ');\n      for (i = 0; i < encodingItems.length; i++) {\n        encodingLookup[encodingItems[i]] = invisibleChar + i;\n        encodingLookup[invisibleChar + i] = encodingItems[i];\n      }\n      return {\n        toHex: function (color) {\n          return color.replace(rgbRegExp, toHex);\n        },\n        parse: function (css) {\n          var styles = {};\n          var matches, name, value, isEncoded;\n          var urlConverter = settings.url_converter;\n          var urlConverterScope = settings.url_converter_scope || _this;\n          var compress = function (prefix, suffix, noJoin) {\n            var top = styles[prefix + '-top' + suffix];\n            if (!top) {\n              return;\n            }\n            var right = styles[prefix + '-right' + suffix];\n            if (!right) {\n              return;\n            }\n            var bottom = styles[prefix + '-bottom' + suffix];\n            if (!bottom) {\n              return;\n            }\n            var left = styles[prefix + '-left' + suffix];\n            if (!left) {\n              return;\n            }\n            var box = [\n              top,\n              right,\n              bottom,\n              left\n            ];\n            i = box.length - 1;\n            while (i--) {\n              if (box[i] !== box[i + 1]) {\n                break;\n              }\n            }\n            if (i > -1 && noJoin) {\n              return;\n            }\n            styles[prefix + suffix] = i === -1 ? box[0] : box.join(' ');\n            delete styles[prefix + '-top' + suffix];\n            delete styles[prefix + '-right' + suffix];\n            delete styles[prefix + '-bottom' + suffix];\n            delete styles[prefix + '-left' + suffix];\n          };\n          var canCompress = function (key) {\n            var value = styles[key], i;\n            if (!value) {\n              return;\n            }\n            value = value.split(' ');\n            i = value.length;\n            while (i--) {\n              if (value[i] !== value[0]) {\n                return false;\n              }\n            }\n            styles[key] = value[0];\n            return true;\n          };\n          var compress2 = function (target, a, b, c) {\n            if (!canCompress(a)) {\n              return;\n            }\n            if (!canCompress(b)) {\n              return;\n            }\n            if (!canCompress(c)) {\n              return;\n            }\n            styles[target] = styles[a] + ' ' + styles[b] + ' ' + styles[c];\n            delete styles[a];\n            delete styles[b];\n            delete styles[c];\n          };\n          var encode = function (str) {\n            isEncoded = true;\n            return encodingLookup[str];\n          };\n          var decode = function (str, keepSlashes) {\n            if (isEncoded) {\n              str = str.replace(/\\uFEFF[0-9]/g, function (str) {\n                return encodingLookup[str];\n              });\n            }\n            if (!keepSlashes) {\n              str = str.replace(/\\\\([\\'\\\";:])/g, '$1');\n            }\n            return str;\n          };\n          var decodeSingleHexSequence = function (escSeq) {\n            return String.fromCharCode(parseInt(escSeq.slice(1), 16));\n          };\n          var decodeHexSequences = function (value) {\n            return value.replace(/\\\\[0-9a-f]+/gi, decodeSingleHexSequence);\n          };\n          var processUrl = function (match, url, url2, url3, str, str2) {\n            str = str || str2;\n            if (str) {\n              str = decode(str);\n              return '\\'' + str.replace(/\\'/g, '\\\\\\'') + '\\'';\n            }\n            url = decode(url || url2 || url3);\n            if (!settings.allow_script_urls) {\n              var scriptUrl = url.replace(/[\\s\\r\\n]+/g, '');\n              if (/(java|vb)script:/i.test(scriptUrl)) {\n                return '';\n              }\n              if (!settings.allow_svg_data_urls && /^data:image\\/svg/i.test(scriptUrl)) {\n                return '';\n              }\n            }\n            if (urlConverter) {\n              url = urlConverter.call(urlConverterScope, url, 'style');\n            }\n            return 'url(\\'' + url.replace(/\\'/g, '\\\\\\'') + '\\')';\n          };\n          if (css) {\n            css = css.replace(/[\\u0000-\\u001F]/g, '');\n            css = css.replace(/\\\\[\\\"\\';:\\uFEFF]/g, encode).replace(/\\\"[^\\\"]+\\\"|\\'[^\\']+\\'/g, function (str) {\n              return str.replace(/[;:]/g, encode);\n            });\n            while (matches = styleRegExp.exec(css)) {\n              styleRegExp.lastIndex = matches.index + matches[0].length;\n              name = matches[1].replace(trimRightRegExp, '').toLowerCase();\n              value = matches[2].replace(trimRightRegExp, '');\n              if (name && value) {\n                name = decodeHexSequences(name);\n                value = decodeHexSequences(value);\n                if (name.indexOf(invisibleChar) !== -1 || name.indexOf('\"') !== -1) {\n                  continue;\n                }\n                if (!settings.allow_script_urls && (name === 'behavior' || /expression\\s*\\(|\\/\\*|\\*\\//.test(value))) {\n                  continue;\n                }\n                if (name === 'font-weight' && value === '700') {\n                  value = 'bold';\n                } else if (name === 'color' || name === 'background-color') {\n                  value = value.toLowerCase();\n                }\n                value = value.replace(rgbRegExp, toHex);\n                value = value.replace(urlOrStrRegExp, processUrl);\n                styles[name] = isEncoded ? decode(value, true) : value;\n              }\n            }\n            compress('border', '', true);\n            compress('border', '-width');\n            compress('border', '-color');\n            compress('border', '-style');\n            compress('padding', '');\n            compress('margin', '');\n            compress2('border', 'border-width', 'border-style', 'border-color');\n            if (styles.border === 'medium none') {\n              delete styles.border;\n            }\n            if (styles['border-image'] === 'none') {\n              delete styles['border-image'];\n            }\n          }\n          return styles;\n        },\n        serialize: function (styles, elementName) {\n          var css = '';\n          var serializeStyles = function (name) {\n            var value;\n            var styleList = validStyles[name];\n            if (styleList) {\n              for (var i_1 = 0, l = styleList.length; i_1 < l; i_1++) {\n                name = styleList[i_1];\n                value = styles[name];\n                if (value) {\n                  css += (css.length > 0 ? ' ' : '') + name + ': ' + value + ';';\n                }\n              }\n            }\n          };\n          var isValid = function (name, elementName) {\n            var styleMap = invalidStyles['*'];\n            if (styleMap && styleMap[name]) {\n              return false;\n            }\n            styleMap = invalidStyles[elementName];\n            return !(styleMap && styleMap[name]);\n          };\n          if (elementName && validStyles) {\n            serializeStyles('*');\n            serializeStyles(elementName);\n          } else {\n            each$j(styles, function (value, name) {\n              if (value && (!invalidStyles || isValid(name, elementName))) {\n                css += (css.length > 0 ? ' ' : '') + name + ': ' + value + ';';\n              }\n            });\n          }\n          return css;\n        }\n      };\n    };\n\n    var deprecated = {\n      keyLocation: true,\n      layerX: true,\n      layerY: true,\n      returnValue: true,\n      webkitMovementX: true,\n      webkitMovementY: true,\n      keyIdentifier: true,\n      mozPressure: true\n    };\n    var isNativeEvent = function (event) {\n      return event instanceof Event || isFunction(event.initEvent);\n    };\n    var hasIsDefaultPrevented = function (event) {\n      return event.isDefaultPrevented === always || event.isDefaultPrevented === never;\n    };\n    var needsNormalizing = function (event) {\n      return isNullable(event.preventDefault) || isNativeEvent(event);\n    };\n    var clone$2 = function (originalEvent, data) {\n      var event = data !== null && data !== void 0 ? data : {};\n      for (var name_1 in originalEvent) {\n        if (!has$2(deprecated, name_1)) {\n          event[name_1] = originalEvent[name_1];\n        }\n      }\n      if (isNonNullable(event.composedPath)) {\n        event.composedPath = function () {\n          return originalEvent.composedPath();\n        };\n      }\n      return event;\n    };\n    var normalize$3 = function (type, originalEvent, fallbackTarget, data) {\n      var _a;\n      var event = clone$2(originalEvent, data);\n      event.type = type;\n      if (isNullable(event.target)) {\n        event.target = (_a = event.srcElement) !== null && _a !== void 0 ? _a : fallbackTarget;\n      }\n      if (needsNormalizing(originalEvent)) {\n        event.preventDefault = function () {\n          event.defaultPrevented = true;\n          event.isDefaultPrevented = always;\n          if (isFunction(originalEvent.preventDefault)) {\n            originalEvent.preventDefault();\n          } else if (isNativeEvent(originalEvent)) {\n            originalEvent.returnValue = false;\n          }\n        };\n        event.stopPropagation = function () {\n          event.cancelBubble = true;\n          event.isPropagationStopped = always;\n          if (isFunction(originalEvent.stopPropagation)) {\n            originalEvent.stopPropagation();\n          } else if (isNativeEvent(originalEvent)) {\n            originalEvent.cancelBubble = true;\n          }\n        };\n        event.stopImmediatePropagation = function () {\n          event.isImmediatePropagationStopped = always;\n          event.stopPropagation();\n        };\n        if (!hasIsDefaultPrevented(event)) {\n          event.isDefaultPrevented = event.defaultPrevented === true ? always : never;\n          event.isPropagationStopped = event.cancelBubble === true ? always : never;\n          event.isImmediatePropagationStopped = never;\n        }\n      }\n      return event;\n    };\n\n    var eventExpandoPrefix = 'mce-data-';\n    var mouseEventRe = /^(?:mouse|contextmenu)|click/;\n    var addEvent = function (target, name, callback, capture) {\n      if (target.addEventListener) {\n        target.addEventListener(name, callback, capture || false);\n      } else if (target.attachEvent) {\n        target.attachEvent('on' + name, callback);\n      }\n    };\n    var removeEvent = function (target, name, callback, capture) {\n      if (target.removeEventListener) {\n        target.removeEventListener(name, callback, capture || false);\n      } else if (target.detachEvent) {\n        target.detachEvent('on' + name, callback);\n      }\n    };\n    var isMouseEvent = function (event) {\n      return isNonNullable(event) && mouseEventRe.test(event.type);\n    };\n    var fix = function (originalEvent, data) {\n      var event = normalize$3(originalEvent.type, originalEvent, document, data);\n      if (isMouseEvent(originalEvent) && isUndefined(originalEvent.pageX) && !isUndefined(originalEvent.clientX)) {\n        var eventDoc = event.target.ownerDocument || document;\n        var doc = eventDoc.documentElement;\n        var body = eventDoc.body;\n        var mouseEvent = event;\n        mouseEvent.pageX = originalEvent.clientX + (doc && doc.scrollLeft || body && body.scrollLeft || 0) - (doc && doc.clientLeft || body && body.clientLeft || 0);\n        mouseEvent.pageY = originalEvent.clientY + (doc && doc.scrollTop || body && body.scrollTop || 0) - (doc && doc.clientTop || body && body.clientTop || 0);\n      }\n      if (isUndefined(event.metaKey)) {\n        event.metaKey = false;\n      }\n      return event;\n    };\n    var bindOnReady = function (win, callback, eventUtils) {\n      var doc = win.document, event = { type: 'ready' };\n      if (eventUtils.domLoaded) {\n        callback(event);\n        return;\n      }\n      var isDocReady = function () {\n        return doc.readyState === 'complete' || doc.readyState === 'interactive' && doc.body;\n      };\n      var readyHandler = function () {\n        removeEvent(win, 'DOMContentLoaded', readyHandler);\n        removeEvent(win, 'load', readyHandler);\n        if (!eventUtils.domLoaded) {\n          eventUtils.domLoaded = true;\n          callback(event);\n        }\n        win = null;\n      };\n      if (isDocReady()) {\n        readyHandler();\n      } else {\n        addEvent(win, 'DOMContentLoaded', readyHandler);\n      }\n      if (!eventUtils.domLoaded) {\n        addEvent(win, 'load', readyHandler);\n      }\n    };\n    var EventUtils = function () {\n      function EventUtils() {\n        this.domLoaded = false;\n        this.events = {};\n        this.count = 1;\n        this.expando = eventExpandoPrefix + (+new Date()).toString(32);\n        this.hasMouseEnterLeave = 'onmouseenter' in document.documentElement;\n        this.hasFocusIn = 'onfocusin' in document.documentElement;\n        this.count = 1;\n      }\n      EventUtils.prototype.bind = function (target, names, callback, scope) {\n        var self = this;\n        var id, callbackList, i, name, fakeName, nativeHandler, capture;\n        var win = window;\n        var defaultNativeHandler = function (evt) {\n          self.executeHandlers(fix(evt || win.event), id);\n        };\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return;\n        }\n        if (!target[self.expando]) {\n          id = self.count++;\n          target[self.expando] = id;\n          self.events[id] = {};\n        } else {\n          id = target[self.expando];\n        }\n        scope = scope || target;\n        var namesList = names.split(' ');\n        i = namesList.length;\n        while (i--) {\n          name = namesList[i];\n          nativeHandler = defaultNativeHandler;\n          fakeName = capture = false;\n          if (name === 'DOMContentLoaded') {\n            name = 'ready';\n          }\n          if (self.domLoaded && name === 'ready' && target.readyState === 'complete') {\n            callback.call(scope, fix({ type: name }));\n            continue;\n          }\n          if (!self.hasMouseEnterLeave) {\n            fakeName = self.mouseEnterLeave[name];\n            if (fakeName) {\n              nativeHandler = function (evt) {\n                var current = evt.currentTarget;\n                var related = evt.relatedTarget;\n                if (related && current.contains) {\n                  related = current.contains(related);\n                } else {\n                  while (related && related !== current) {\n                    related = related.parentNode;\n                  }\n                }\n                if (!related) {\n                  evt = fix(evt || win.event);\n                  evt.type = evt.type === 'mouseout' ? 'mouseleave' : 'mouseenter';\n                  evt.target = current;\n                  self.executeHandlers(evt, id);\n                }\n              };\n            }\n          }\n          if (!self.hasFocusIn && (name === 'focusin' || name === 'focusout')) {\n            capture = true;\n            fakeName = name === 'focusin' ? 'focus' : 'blur';\n            nativeHandler = function (evt) {\n              evt = fix(evt || win.event);\n              evt.type = evt.type === 'focus' ? 'focusin' : 'focusout';\n              self.executeHandlers(evt, id);\n            };\n          }\n          callbackList = self.events[id][name];\n          if (!callbackList) {\n            self.events[id][name] = callbackList = [{\n                func: callback,\n                scope: scope\n              }];\n            callbackList.fakeName = fakeName;\n            callbackList.capture = capture;\n            callbackList.nativeHandler = nativeHandler;\n            if (name === 'ready') {\n              bindOnReady(target, nativeHandler, self);\n            } else {\n              addEvent(target, fakeName || name, nativeHandler, capture);\n            }\n          } else {\n            if (name === 'ready' && self.domLoaded) {\n              callback(fix({ type: name }));\n            } else {\n              callbackList.push({\n                func: callback,\n                scope: scope\n              });\n            }\n          }\n        }\n        target = callbackList = null;\n        return callback;\n      };\n      EventUtils.prototype.unbind = function (target, names, callback) {\n        var callbackList, i, ci, name, eventMap;\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return this;\n        }\n        var id = target[this.expando];\n        if (id) {\n          eventMap = this.events[id];\n          if (names) {\n            var namesList = names.split(' ');\n            i = namesList.length;\n            while (i--) {\n              name = namesList[i];\n              callbackList = eventMap[name];\n              if (callbackList) {\n                if (callback) {\n                  ci = callbackList.length;\n                  while (ci--) {\n                    if (callbackList[ci].func === callback) {\n                      var nativeHandler = callbackList.nativeHandler;\n                      var fakeName = callbackList.fakeName, capture = callbackList.capture;\n                      callbackList = callbackList.slice(0, ci).concat(callbackList.slice(ci + 1));\n                      callbackList.nativeHandler = nativeHandler;\n                      callbackList.fakeName = fakeName;\n                      callbackList.capture = capture;\n                      eventMap[name] = callbackList;\n                    }\n                  }\n                }\n                if (!callback || callbackList.length === 0) {\n                  delete eventMap[name];\n                  removeEvent(target, callbackList.fakeName || name, callbackList.nativeHandler, callbackList.capture);\n                }\n              }\n            }\n          } else {\n            each$j(eventMap, function (callbackList, name) {\n              removeEvent(target, callbackList.fakeName || name, callbackList.nativeHandler, callbackList.capture);\n            });\n            eventMap = {};\n          }\n          for (name in eventMap) {\n            if (has$2(eventMap, name)) {\n              return this;\n            }\n          }\n          delete this.events[id];\n          try {\n            delete target[this.expando];\n          } catch (ex) {\n            target[this.expando] = null;\n          }\n        }\n        return this;\n      };\n      EventUtils.prototype.fire = function (target, name, args) {\n        var id;\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return this;\n        }\n        var event = fix({\n          type: name,\n          target: target\n        }, args);\n        do {\n          id = target[this.expando];\n          if (id) {\n            this.executeHandlers(event, id);\n          }\n          target = target.parentNode || target.ownerDocument || target.defaultView || target.parentWindow;\n        } while (target && !event.isPropagationStopped());\n        return this;\n      };\n      EventUtils.prototype.clean = function (target) {\n        var i, children;\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return this;\n        }\n        if (target[this.expando]) {\n          this.unbind(target);\n        }\n        if (!target.getElementsByTagName) {\n          target = target.document;\n        }\n        if (target && target.getElementsByTagName) {\n          this.unbind(target);\n          children = target.getElementsByTagName('*');\n          i = children.length;\n          while (i--) {\n            target = children[i];\n            if (target[this.expando]) {\n              this.unbind(target);\n            }\n          }\n        }\n        return this;\n      };\n      EventUtils.prototype.destroy = function () {\n        this.events = {};\n      };\n      EventUtils.prototype.cancel = function (e) {\n        if (e) {\n          e.preventDefault();\n          e.stopImmediatePropagation();\n        }\n        return false;\n      };\n      EventUtils.prototype.executeHandlers = function (evt, id) {\n        var container = this.events[id];\n        var callbackList = container && container[evt.type];\n        if (callbackList) {\n          for (var i = 0, l = callbackList.length; i < l; i++) {\n            var callback = callbackList[i];\n            if (callback && callback.func.call(callback.scope, evt) === false) {\n              evt.preventDefault();\n            }\n            if (evt.isImmediatePropagationStopped()) {\n              return;\n            }\n          }\n        }\n      };\n      EventUtils.Event = new EventUtils();\n      return EventUtils;\n    }();\n\n    var support, Expr, getText, isXML, tokenize, compile, select$1, outermostContext, sortInput, hasDuplicate, setDocument, document$1, docElem, documentIsHTML, rbuggyQSA, rbuggyMatches, matches, contains, expando = 'sizzle' + -new Date(), preferredDoc = window.document, dirruns = 0, done = 0, classCache = createCache(), tokenCache = createCache(), compilerCache = createCache(), sortOrder = function (a, b) {\n        if (a === b) {\n          hasDuplicate = true;\n        }\n        return 0;\n      }, strundefined = typeof undefined, MAX_NEGATIVE = 1 << 31, hasOwn = {}.hasOwnProperty, arr = [], pop = arr.pop, push_native = arr.push, push$1 = arr.push, slice$1 = arr.slice, indexOf = arr.indexOf || function (elem) {\n        var i = 0, len = this.length;\n        for (; i < len; i++) {\n          if (this[i] === elem) {\n            return i;\n          }\n        }\n        return -1;\n      }, booleans = 'checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped', whitespace = '[\\\\x20\\\\t\\\\r\\\\n\\\\f]', identifier = '(?:\\\\\\\\.|[\\\\w-]|[^\\\\x00-\\\\xa0])+', attributes = '\\\\[' + whitespace + '*(' + identifier + ')(?:' + whitespace + '*([*^$|!~]?=)' + whitespace + '*(?:\\'((?:\\\\\\\\.|[^\\\\\\\\\\'])*)\\'|\"((?:\\\\\\\\.|[^\\\\\\\\\"])*)\"|(' + identifier + '))|)' + whitespace + '*\\\\]', pseudos = ':(' + identifier + ')(?:\\\\((' + '(\\'((?:\\\\\\\\.|[^\\\\\\\\\\'])*)\\'|\"((?:\\\\\\\\.|[^\\\\\\\\\"])*)\")|' + '((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|' + attributes + ')*)|' + '.*' + ')\\\\)|)', rtrim = new RegExp('^' + whitespace + '+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)' + whitespace + '+$', 'g'), rcomma = new RegExp('^' + whitespace + '*,' + whitespace + '*'), rcombinators = new RegExp('^' + whitespace + '*([>+~]|' + whitespace + ')' + whitespace + '*'), rattributeQuotes = new RegExp('=' + whitespace + '*([^\\\\]\\'\"]*?)' + whitespace + '*\\\\]', 'g'), rpseudo = new RegExp(pseudos), ridentifier = new RegExp('^' + identifier + '$'), matchExpr = {\n        ID: new RegExp('^#(' + identifier + ')'),\n        CLASS: new RegExp('^\\\\.(' + identifier + ')'),\n        TAG: new RegExp('^(' + identifier + '|[*])'),\n        ATTR: new RegExp('^' + attributes),\n        PSEUDO: new RegExp('^' + pseudos),\n        CHILD: new RegExp('^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(' + whitespace + '*(even|odd|(([+-]|)(\\\\d*)n|)' + whitespace + '*(?:([+-]|)' + whitespace + '*(\\\\d+)|))' + whitespace + '*\\\\)|)', 'i'),\n        bool: new RegExp('^(?:' + booleans + ')$', 'i'),\n        needsContext: new RegExp('^' + whitespace + '*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(' + whitespace + '*((?:-\\\\d)?\\\\d*)' + whitespace + '*\\\\)|)(?=[^-]|$)', 'i')\n      }, rinputs = /^(?:input|select|textarea|button)$/i, rheader = /^h\\d$/i, rnative = /^[^{]+\\{\\s*\\[native \\w/, rquickExpr$1 = /^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/, rsibling = /[+~]/, rescape = /'|\\\\/g, runescape = new RegExp('\\\\\\\\([\\\\da-f]{1,6}' + whitespace + '?|(' + whitespace + ')|.)', 'ig'), funescape = function (_, escaped, escapedWhitespace) {\n        var high = '0x' + escaped - 65536;\n        return high !== high || escapedWhitespace ? escaped : high < 0 ? String.fromCharCode(high + 65536) : String.fromCharCode(high >> 10 | 55296, high & 1023 | 56320);\n      };\n    try {\n      push$1.apply(arr = slice$1.call(preferredDoc.childNodes), preferredDoc.childNodes);\n      arr[preferredDoc.childNodes.length].nodeType;\n    } catch (e) {\n      push$1 = {\n        apply: arr.length ? function (target, els) {\n          push_native.apply(target, slice$1.call(els));\n        } : function (target, els) {\n          var j = target.length, i = 0;\n          while (target[j++] = els[i++]) {\n          }\n          target.length = j - 1;\n        }\n      };\n    }\n    var Sizzle = function (selector, context, results, seed) {\n      var match, elem, m, nodeType, i, groups, old, nid, newContext, newSelector;\n      if ((context ? context.ownerDocument || context : preferredDoc) !== document$1) {\n        setDocument(context);\n      }\n      context = context || document$1;\n      results = results || [];\n      if (!selector || typeof selector !== 'string') {\n        return results;\n      }\n      if ((nodeType = context.nodeType) !== 1 && nodeType !== 9) {\n        return [];\n      }\n      if (documentIsHTML && !seed) {\n        if (match = rquickExpr$1.exec(selector)) {\n          if (m = match[1]) {\n            if (nodeType === 9) {\n              elem = context.getElementById(m);\n              if (elem && elem.parentNode) {\n                if (elem.id === m) {\n                  results.push(elem);\n                  return results;\n                }\n              } else {\n                return results;\n              }\n            } else {\n              if (context.ownerDocument && (elem = context.ownerDocument.getElementById(m)) && contains(context, elem) && elem.id === m) {\n                results.push(elem);\n                return results;\n              }\n            }\n          } else if (match[2]) {\n            push$1.apply(results, context.getElementsByTagName(selector));\n            return results;\n          } else if ((m = match[3]) && support.getElementsByClassName) {\n            push$1.apply(results, context.getElementsByClassName(m));\n            return results;\n          }\n        }\n        if (support.qsa && (!rbuggyQSA || !rbuggyQSA.test(selector))) {\n          nid = old = expando;\n          newContext = context;\n          newSelector = nodeType === 9 && selector;\n          if (nodeType === 1 && context.nodeName.toLowerCase() !== 'object') {\n            groups = tokenize(selector);\n            if (old = context.getAttribute('id')) {\n              nid = old.replace(rescape, '\\\\$&');\n            } else {\n              context.setAttribute('id', nid);\n            }\n            nid = '[id=\\'' + nid + '\\'] ';\n            i = groups.length;\n            while (i--) {\n              groups[i] = nid + toSelector(groups[i]);\n            }\n            newContext = rsibling.test(selector) && testContext(context.parentNode) || context;\n            newSelector = groups.join(',');\n          }\n          if (newSelector) {\n            try {\n              push$1.apply(results, newContext.querySelectorAll(newSelector));\n              return results;\n            } catch (qsaError) {\n            } finally {\n              if (!old) {\n                context.removeAttribute('id');\n              }\n            }\n          }\n        }\n      }\n      return select$1(selector.replace(rtrim, '$1'), context, results, seed);\n    };\n    function createCache() {\n      var keys = [];\n      function cache(key, value) {\n        if (keys.push(key + ' ') > Expr.cacheLength) {\n          delete cache[keys.shift()];\n        }\n        return cache[key + ' '] = value;\n      }\n      return cache;\n    }\n    function markFunction(fn) {\n      fn[expando] = true;\n      return fn;\n    }\n    function siblingCheck(a, b) {\n      var cur = b && a, diff = cur && a.nodeType === 1 && b.nodeType === 1 && (~b.sourceIndex || MAX_NEGATIVE) - (~a.sourceIndex || MAX_NEGATIVE);\n      if (diff) {\n        return diff;\n      }\n      if (cur) {\n        while (cur = cur.nextSibling) {\n          if (cur === b) {\n            return -1;\n          }\n        }\n      }\n      return a ? 1 : -1;\n    }\n    function createInputPseudo(type) {\n      return function (elem) {\n        var name = elem.nodeName.toLowerCase();\n        return name === 'input' && elem.type === type;\n      };\n    }\n    function createButtonPseudo(type) {\n      return function (elem) {\n        var name = elem.nodeName.toLowerCase();\n        return (name === 'input' || name === 'button') && elem.type === type;\n      };\n    }\n    function createPositionalPseudo(fn) {\n      return markFunction(function (argument) {\n        argument = +argument;\n        return markFunction(function (seed, matches) {\n          var j, matchIndexes = fn([], seed.length, argument), i = matchIndexes.length;\n          while (i--) {\n            if (seed[j = matchIndexes[i]]) {\n              seed[j] = !(matches[j] = seed[j]);\n            }\n          }\n        });\n      });\n    }\n    function testContext(context) {\n      return context && typeof context.getElementsByTagName !== strundefined && context;\n    }\n    support = Sizzle.support = {};\n    isXML = Sizzle.isXML = function (elem) {\n      var documentElement = elem && (elem.ownerDocument || elem).documentElement;\n      return documentElement ? documentElement.nodeName !== 'HTML' : false;\n    };\n    setDocument = Sizzle.setDocument = function (node) {\n      var hasCompare, doc = node ? node.ownerDocument || node : preferredDoc, parent = doc.defaultView;\n      function getTop(win) {\n        try {\n          return win.top;\n        } catch (ex) {\n        }\n        return null;\n      }\n      if (doc === document$1 || doc.nodeType !== 9 || !doc.documentElement) {\n        return document$1;\n      }\n      document$1 = doc;\n      docElem = doc.documentElement;\n      documentIsHTML = !isXML(doc);\n      if (parent && parent !== getTop(parent)) {\n        if (parent.addEventListener) {\n          parent.addEventListener('unload', function () {\n            setDocument();\n          }, false);\n        } else if (parent.attachEvent) {\n          parent.attachEvent('onunload', function () {\n            setDocument();\n          });\n        }\n      }\n      support.attributes = true;\n      support.getElementsByTagName = true;\n      support.getElementsByClassName = rnative.test(doc.getElementsByClassName);\n      support.getById = true;\n      Expr.find.ID = function (id, context) {\n        if (typeof context.getElementById !== strundefined && documentIsHTML) {\n          var m = context.getElementById(id);\n          return m && m.parentNode ? [m] : [];\n        }\n      };\n      Expr.filter.ID = function (id) {\n        var attrId = id.replace(runescape, funescape);\n        return function (elem) {\n          return elem.getAttribute('id') === attrId;\n        };\n      };\n      Expr.find.TAG = support.getElementsByTagName ? function (tag, context) {\n        if (typeof context.getElementsByTagName !== strundefined) {\n          return context.getElementsByTagName(tag);\n        }\n      } : function (tag, context) {\n        var elem, tmp = [], i = 0, results = context.getElementsByTagName(tag);\n        if (tag === '*') {\n          while (elem = results[i++]) {\n            if (elem.nodeType === 1) {\n              tmp.push(elem);\n            }\n          }\n          return tmp;\n        }\n        return results;\n      };\n      Expr.find.CLASS = support.getElementsByClassName && function (className, context) {\n        if (documentIsHTML) {\n          return context.getElementsByClassName(className);\n        }\n      };\n      rbuggyMatches = [];\n      rbuggyQSA = [];\n      support.disconnectedMatch = true;\n      rbuggyQSA = rbuggyQSA.length && new RegExp(rbuggyQSA.join('|'));\n      rbuggyMatches = rbuggyMatches.length && new RegExp(rbuggyMatches.join('|'));\n      hasCompare = rnative.test(docElem.compareDocumentPosition);\n      contains = hasCompare || rnative.test(docElem.contains) ? function (a, b) {\n        var adown = a.nodeType === 9 ? a.documentElement : a, bup = b && b.parentNode;\n        return a === bup || !!(bup && bup.nodeType === 1 && (adown.contains ? adown.contains(bup) : a.compareDocumentPosition && a.compareDocumentPosition(bup) & 16));\n      } : function (a, b) {\n        if (b) {\n          while (b = b.parentNode) {\n            if (b === a) {\n              return true;\n            }\n          }\n        }\n        return false;\n      };\n      sortOrder = hasCompare ? function (a, b) {\n        if (a === b) {\n          hasDuplicate = true;\n          return 0;\n        }\n        var compare = !a.compareDocumentPosition - !b.compareDocumentPosition;\n        if (compare) {\n          return compare;\n        }\n        compare = (a.ownerDocument || a) === (b.ownerDocument || b) ? a.compareDocumentPosition(b) : 1;\n        if (compare & 1 || !support.sortDetached && b.compareDocumentPosition(a) === compare) {\n          if (a === doc || a.ownerDocument === preferredDoc && contains(preferredDoc, a)) {\n            return -1;\n          }\n          if (b === doc || b.ownerDocument === preferredDoc && contains(preferredDoc, b)) {\n            return 1;\n          }\n          return sortInput ? indexOf.call(sortInput, a) - indexOf.call(sortInput, b) : 0;\n        }\n        return compare & 4 ? -1 : 1;\n      } : function (a, b) {\n        if (a === b) {\n          hasDuplicate = true;\n          return 0;\n        }\n        var cur, i = 0, aup = a.parentNode, bup = b.parentNode, ap = [a], bp = [b];\n        if (!aup || !bup) {\n          return a === doc ? -1 : b === doc ? 1 : aup ? -1 : bup ? 1 : sortInput ? indexOf.call(sortInput, a) - indexOf.call(sortInput, b) : 0;\n        } else if (aup === bup) {\n          return siblingCheck(a, b);\n        }\n        cur = a;\n        while (cur = cur.parentNode) {\n          ap.unshift(cur);\n        }\n        cur = b;\n        while (cur = cur.parentNode) {\n          bp.unshift(cur);\n        }\n        while (ap[i] === bp[i]) {\n          i++;\n        }\n        return i ? siblingCheck(ap[i], bp[i]) : ap[i] === preferredDoc ? -1 : bp[i] === preferredDoc ? 1 : 0;\n      };\n      return doc;\n    };\n    Sizzle.matches = function (expr, elements) {\n      return Sizzle(expr, null, null, elements);\n    };\n    Sizzle.matchesSelector = function (elem, expr) {\n      if ((elem.ownerDocument || elem) !== document$1) {\n        setDocument(elem);\n      }\n      expr = expr.replace(rattributeQuotes, '=\\'$1\\']');\n      if (support.matchesSelector && documentIsHTML && (!rbuggyMatches || !rbuggyMatches.test(expr)) && (!rbuggyQSA || !rbuggyQSA.test(expr))) {\n        try {\n          var ret = matches.call(elem, expr);\n          if (ret || support.disconnectedMatch || elem.document && elem.document.nodeType !== 11) {\n            return ret;\n          }\n        } catch (e) {\n        }\n      }\n      return Sizzle(expr, document$1, null, [elem]).length > 0;\n    };\n    Sizzle.contains = function (context, elem) {\n      if ((context.ownerDocument || context) !== document$1) {\n        setDocument(context);\n      }\n      return contains(context, elem);\n    };\n    Sizzle.attr = function (elem, name) {\n      if ((elem.ownerDocument || elem) !== document$1) {\n        setDocument(elem);\n      }\n      var fn = Expr.attrHandle[name.toLowerCase()], val = fn && hasOwn.call(Expr.attrHandle, name.toLowerCase()) ? fn(elem, name, !documentIsHTML) : undefined;\n      return val !== undefined ? val : support.attributes || !documentIsHTML ? elem.getAttribute(name) : (val = elem.getAttributeNode(name)) && val.specified ? val.value : null;\n    };\n    Sizzle.error = function (msg) {\n      throw new Error('Syntax error, unrecognized expression: ' + msg);\n    };\n    Sizzle.uniqueSort = function (results) {\n      var elem, duplicates = [], j = 0, i = 0;\n      hasDuplicate = !support.detectDuplicates;\n      sortInput = !support.sortStable && results.slice(0);\n      results.sort(sortOrder);\n      if (hasDuplicate) {\n        while (elem = results[i++]) {\n          if (elem === results[i]) {\n            j = duplicates.push(i);\n          }\n        }\n        while (j--) {\n          results.splice(duplicates[j], 1);\n        }\n      }\n      sortInput = null;\n      return results;\n    };\n    getText = Sizzle.getText = function (elem) {\n      var node, ret = '', i = 0, nodeType = elem.nodeType;\n      if (!nodeType) {\n        while (node = elem[i++]) {\n          ret += getText(node);\n        }\n      } else if (nodeType === 1 || nodeType === 9 || nodeType === 11) {\n        if (typeof elem.textContent === 'string') {\n          return elem.textContent;\n        } else {\n          for (elem = elem.firstChild; elem; elem = elem.nextSibling) {\n            ret += getText(elem);\n          }\n        }\n      } else if (nodeType === 3 || nodeType === 4) {\n        return elem.nodeValue;\n      }\n      return ret;\n    };\n    Expr = Sizzle.selectors = {\n      cacheLength: 50,\n      createPseudo: markFunction,\n      match: matchExpr,\n      attrHandle: {},\n      find: {},\n      relative: {\n        '>': {\n          dir: 'parentNode',\n          first: true\n        },\n        ' ': { dir: 'parentNode' },\n        '+': {\n          dir: 'previousSibling',\n          first: true\n        },\n        '~': { dir: 'previousSibling' }\n      },\n      preFilter: {\n        ATTR: function (match) {\n          match[1] = match[1].replace(runescape, funescape);\n          match[3] = (match[3] || match[4] || match[5] || '').replace(runescape, funescape);\n          if (match[2] === '~=') {\n            match[3] = ' ' + match[3] + ' ';\n          }\n          return match.slice(0, 4);\n        },\n        CHILD: function (match) {\n          match[1] = match[1].toLowerCase();\n          if (match[1].slice(0, 3) === 'nth') {\n            if (!match[3]) {\n              Sizzle.error(match[0]);\n            }\n            match[4] = +(match[4] ? match[5] + (match[6] || 1) : 2 * (match[3] === 'even' || match[3] === 'odd'));\n            match[5] = +(match[7] + match[8] || match[3] === 'odd');\n          } else if (match[3]) {\n            Sizzle.error(match[0]);\n          }\n          return match;\n        },\n        PSEUDO: function (match) {\n          var excess, unquoted = !match[6] && match[2];\n          if (matchExpr.CHILD.test(match[0])) {\n            return null;\n          }\n          if (match[3]) {\n            match[2] = match[4] || match[5] || '';\n          } else if (unquoted && rpseudo.test(unquoted) && (excess = tokenize(unquoted, true)) && (excess = unquoted.indexOf(')', unquoted.length - excess) - unquoted.length)) {\n            match[0] = match[0].slice(0, excess);\n            match[2] = unquoted.slice(0, excess);\n          }\n          return match.slice(0, 3);\n        }\n      },\n      filter: {\n        TAG: function (nodeNameSelector) {\n          var nodeName = nodeNameSelector.replace(runescape, funescape).toLowerCase();\n          return nodeNameSelector === '*' ? function () {\n            return true;\n          } : function (elem) {\n            return elem.nodeName && elem.nodeName.toLowerCase() === nodeName;\n          };\n        },\n        CLASS: function (className) {\n          var pattern = classCache[className + ' '];\n          return pattern || (pattern = new RegExp('(^|' + whitespace + ')' + className + '(' + whitespace + '|$)')) && classCache(className, function (elem) {\n            return pattern.test(typeof elem.className === 'string' && elem.className || typeof elem.getAttribute !== strundefined && elem.getAttribute('class') || '');\n          });\n        },\n        ATTR: function (name, operator, check) {\n          return function (elem) {\n            var result = Sizzle.attr(elem, name);\n            if (result == null) {\n              return operator === '!=';\n            }\n            if (!operator) {\n              return true;\n            }\n            result += '';\n            return operator === '=' ? result === check : operator === '!=' ? result !== check : operator === '^=' ? check && result.indexOf(check) === 0 : operator === '*=' ? check && result.indexOf(check) > -1 : operator === '$=' ? check && result.slice(-check.length) === check : operator === '~=' ? (' ' + result + ' ').indexOf(check) > -1 : operator === '|=' ? result === check || result.slice(0, check.length + 1) === check + '-' : false;\n          };\n        },\n        CHILD: function (type, what, argument, first, last) {\n          var simple = type.slice(0, 3) !== 'nth', forward = type.slice(-4) !== 'last', ofType = what === 'of-type';\n          return first === 1 && last === 0 ? function (elem) {\n            return !!elem.parentNode;\n          } : function (elem, context, xml) {\n            var cache, outerCache, node, diff, nodeIndex, start, dir = simple !== forward ? 'nextSibling' : 'previousSibling', parent = elem.parentNode, name = ofType && elem.nodeName.toLowerCase(), useCache = !xml && !ofType;\n            if (parent) {\n              if (simple) {\n                while (dir) {\n                  node = elem;\n                  while (node = node[dir]) {\n                    if (ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1) {\n                      return false;\n                    }\n                  }\n                  start = dir = type === 'only' && !start && 'nextSibling';\n                }\n                return true;\n              }\n              start = [forward ? parent.firstChild : parent.lastChild];\n              if (forward && useCache) {\n                outerCache = parent[expando] || (parent[expando] = {});\n                cache = outerCache[type] || [];\n                nodeIndex = cache[0] === dirruns && cache[1];\n                diff = cache[0] === dirruns && cache[2];\n                node = nodeIndex && parent.childNodes[nodeIndex];\n                while (node = ++nodeIndex && node && node[dir] || (diff = nodeIndex = 0) || start.pop()) {\n                  if (node.nodeType === 1 && ++diff && node === elem) {\n                    outerCache[type] = [\n                      dirruns,\n                      nodeIndex,\n                      diff\n                    ];\n                    break;\n                  }\n                }\n              } else if (useCache && (cache = (elem[expando] || (elem[expando] = {}))[type]) && cache[0] === dirruns) {\n                diff = cache[1];\n              } else {\n                while (node = ++nodeIndex && node && node[dir] || (diff = nodeIndex = 0) || start.pop()) {\n                  if ((ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1) && ++diff) {\n                    if (useCache) {\n                      (node[expando] || (node[expando] = {}))[type] = [\n                        dirruns,\n                        diff\n                      ];\n                    }\n                    if (node === elem) {\n                      break;\n                    }\n                  }\n                }\n              }\n              diff -= last;\n              return diff === first || diff % first === 0 && diff / first >= 0;\n            }\n          };\n        },\n        PSEUDO: function (pseudo, argument) {\n          var args, fn = Expr.pseudos[pseudo] || Expr.setFilters[pseudo.toLowerCase()] || Sizzle.error('unsupported pseudo: ' + pseudo);\n          if (fn[expando]) {\n            return fn(argument);\n          }\n          if (fn.length > 1) {\n            args = [\n              pseudo,\n              pseudo,\n              '',\n              argument\n            ];\n            return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase()) ? markFunction(function (seed, matches) {\n              var idx, matched = fn(seed, argument), i = matched.length;\n              while (i--) {\n                idx = indexOf.call(seed, matched[i]);\n                seed[idx] = !(matches[idx] = matched[i]);\n              }\n            }) : function (elem) {\n              return fn(elem, 0, args);\n            };\n          }\n          return fn;\n        }\n      },\n      pseudos: {\n        not: markFunction(function (selector) {\n          var input = [], results = [], matcher = compile(selector.replace(rtrim, '$1'));\n          return matcher[expando] ? markFunction(function (seed, matches, context, xml) {\n            var elem, unmatched = matcher(seed, null, xml, []), i = seed.length;\n            while (i--) {\n              if (elem = unmatched[i]) {\n                seed[i] = !(matches[i] = elem);\n              }\n            }\n          }) : function (elem, context, xml) {\n            input[0] = elem;\n            matcher(input, null, xml, results);\n            input[0] = null;\n            return !results.pop();\n          };\n        }),\n        has: markFunction(function (selector) {\n          return function (elem) {\n            return Sizzle(selector, elem).length > 0;\n          };\n        }),\n        contains: markFunction(function (text) {\n          text = text.replace(runescape, funescape);\n          return function (elem) {\n            return (elem.textContent || elem.innerText || getText(elem)).indexOf(text) > -1;\n          };\n        }),\n        lang: markFunction(function (lang) {\n          if (!ridentifier.test(lang || '')) {\n            Sizzle.error('unsupported lang: ' + lang);\n          }\n          lang = lang.replace(runescape, funescape).toLowerCase();\n          return function (elem) {\n            var elemLang;\n            do {\n              if (elemLang = documentIsHTML ? elem.lang : elem.getAttribute('xml:lang') || elem.getAttribute('lang')) {\n                elemLang = elemLang.toLowerCase();\n                return elemLang === lang || elemLang.indexOf(lang + '-') === 0;\n              }\n            } while ((elem = elem.parentNode) && elem.nodeType === 1);\n            return false;\n          };\n        }),\n        target: function (elem) {\n          var hash = window.location && window.location.hash;\n          return hash && hash.slice(1) === elem.id;\n        },\n        root: function (elem) {\n          return elem === docElem;\n        },\n        focus: function (elem) {\n          return elem === document$1.activeElement && (!document$1.hasFocus || document$1.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);\n        },\n        enabled: function (elem) {\n          return elem.disabled === false;\n        },\n        disabled: function (elem) {\n          return elem.disabled === true;\n        },\n        checked: function (elem) {\n          var nodeName = elem.nodeName.toLowerCase();\n          return nodeName === 'input' && !!elem.checked || nodeName === 'option' && !!elem.selected;\n        },\n        selected: function (elem) {\n          if (elem.parentNode) {\n            elem.parentNode.selectedIndex;\n          }\n          return elem.selected === true;\n        },\n        empty: function (elem) {\n          for (elem = elem.firstChild; elem; elem = elem.nextSibling) {\n            if (elem.nodeType < 6) {\n              return false;\n            }\n          }\n          return true;\n        },\n        parent: function (elem) {\n          return !Expr.pseudos.empty(elem);\n        },\n        header: function (elem) {\n          return rheader.test(elem.nodeName);\n        },\n        input: function (elem) {\n          return rinputs.test(elem.nodeName);\n        },\n        button: function (elem) {\n          var name = elem.nodeName.toLowerCase();\n          return name === 'input' && elem.type === 'button' || name === 'button';\n        },\n        text: function (elem) {\n          var attr;\n          return elem.nodeName.toLowerCase() === 'input' && elem.type === 'text' && ((attr = elem.getAttribute('type')) == null || attr.toLowerCase() === 'text');\n        },\n        first: createPositionalPseudo(function () {\n          return [0];\n        }),\n        last: createPositionalPseudo(function (matchIndexes, length) {\n          return [length - 1];\n        }),\n        eq: createPositionalPseudo(function (matchIndexes, length, argument) {\n          return [argument < 0 ? argument + length : argument];\n        }),\n        even: createPositionalPseudo(function (matchIndexes, length) {\n          var i = 0;\n          for (; i < length; i += 2) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        }),\n        odd: createPositionalPseudo(function (matchIndexes, length) {\n          var i = 1;\n          for (; i < length; i += 2) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        }),\n        lt: createPositionalPseudo(function (matchIndexes, length, argument) {\n          var i = argument < 0 ? argument + length : argument;\n          for (; --i >= 0;) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        }),\n        gt: createPositionalPseudo(function (matchIndexes, length, argument) {\n          var i = argument < 0 ? argument + length : argument;\n          for (; ++i < length;) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        })\n      }\n    };\n    Expr.pseudos.nth = Expr.pseudos.eq;\n    each$k([\n      'radio',\n      'checkbox',\n      'file',\n      'password',\n      'image'\n    ], function (i) {\n      Expr.pseudos[i] = createInputPseudo(i);\n    });\n    each$k([\n      'submit',\n      'reset'\n    ], function (i) {\n      Expr.pseudos[i] = createButtonPseudo(i);\n    });\n    function setFilters() {\n    }\n    setFilters.prototype = Expr.filters = Expr.pseudos;\n    Expr.setFilters = new setFilters();\n    tokenize = Sizzle.tokenize = function (selector, parseOnly) {\n      var matched, match, tokens, type, soFar, groups, preFilters, cached = tokenCache[selector + ' '];\n      if (cached) {\n        return parseOnly ? 0 : cached.slice(0);\n      }\n      soFar = selector;\n      groups = [];\n      preFilters = Expr.preFilter;\n      while (soFar) {\n        if (!matched || (match = rcomma.exec(soFar))) {\n          if (match) {\n            soFar = soFar.slice(match[0].length) || soFar;\n          }\n          groups.push(tokens = []);\n        }\n        matched = false;\n        if (match = rcombinators.exec(soFar)) {\n          matched = match.shift();\n          tokens.push({\n            value: matched,\n            type: match[0].replace(rtrim, ' ')\n          });\n          soFar = soFar.slice(matched.length);\n        }\n        for (type in Expr.filter) {\n          if (!Expr.filter.hasOwnProperty(type)) {\n            continue;\n          }\n          if ((match = matchExpr[type].exec(soFar)) && (!preFilters[type] || (match = preFilters[type](match)))) {\n            matched = match.shift();\n            tokens.push({\n              value: matched,\n              type: type,\n              matches: match\n            });\n            soFar = soFar.slice(matched.length);\n          }\n        }\n        if (!matched) {\n          break;\n        }\n      }\n      return parseOnly ? soFar.length : soFar ? Sizzle.error(selector) : tokenCache(selector, groups).slice(0);\n    };\n    function toSelector(tokens) {\n      var i = 0, len = tokens.length, selector = '';\n      for (; i < len; i++) {\n        selector += tokens[i].value;\n      }\n      return selector;\n    }\n    function addCombinator(matcher, combinator, base) {\n      var dir = combinator.dir, checkNonElements = base && dir === 'parentNode', doneName = done++;\n      return combinator.first ? function (elem, context, xml) {\n        while (elem = elem[dir]) {\n          if (elem.nodeType === 1 || checkNonElements) {\n            return matcher(elem, context, xml);\n          }\n        }\n      } : function (elem, context, xml) {\n        var oldCache, outerCache, newCache = [\n            dirruns,\n            doneName\n          ];\n        if (xml) {\n          while (elem = elem[dir]) {\n            if (elem.nodeType === 1 || checkNonElements) {\n              if (matcher(elem, context, xml)) {\n                return true;\n              }\n            }\n          }\n        } else {\n          while (elem = elem[dir]) {\n            if (elem.nodeType === 1 || checkNonElements) {\n              outerCache = elem[expando] || (elem[expando] = {});\n              if ((oldCache = outerCache[dir]) && oldCache[0] === dirruns && oldCache[1] === doneName) {\n                return newCache[2] = oldCache[2];\n              } else {\n                outerCache[dir] = newCache;\n                if (newCache[2] = matcher(elem, context, xml)) {\n                  return true;\n                }\n              }\n            }\n          }\n        }\n      };\n    }\n    function elementMatcher(matchers) {\n      return matchers.length > 1 ? function (elem, context, xml) {\n        var i = matchers.length;\n        while (i--) {\n          if (!matchers[i](elem, context, xml)) {\n            return false;\n          }\n        }\n        return true;\n      } : matchers[0];\n    }\n    function multipleContexts(selector, contexts, results) {\n      var i = 0, len = contexts.length;\n      for (; i < len; i++) {\n        Sizzle(selector, contexts[i], results);\n      }\n      return results;\n    }\n    function condense(unmatched, map, filter, context, xml) {\n      var elem, newUnmatched = [], i = 0, len = unmatched.length, mapped = map != null;\n      for (; i < len; i++) {\n        if (elem = unmatched[i]) {\n          if (!filter || filter(elem, context, xml)) {\n            newUnmatched.push(elem);\n            if (mapped) {\n              map.push(i);\n            }\n          }\n        }\n      }\n      return newUnmatched;\n    }\n    function setMatcher(preFilter, selector, matcher, postFilter, postFinder, postSelector) {\n      if (postFilter && !postFilter[expando]) {\n        postFilter = setMatcher(postFilter);\n      }\n      if (postFinder && !postFinder[expando]) {\n        postFinder = setMatcher(postFinder, postSelector);\n      }\n      return markFunction(function (seed, results, context, xml) {\n        var temp, i, elem, preMap = [], postMap = [], preexisting = results.length, elems = seed || multipleContexts(selector || '*', context.nodeType ? [context] : context, []), matcherIn = preFilter && (seed || !selector) ? condense(elems, preMap, preFilter, context, xml) : elems, matcherOut = matcher ? postFinder || (seed ? preFilter : preexisting || postFilter) ? [] : results : matcherIn;\n        if (matcher) {\n          matcher(matcherIn, matcherOut, context, xml);\n        }\n        if (postFilter) {\n          temp = condense(matcherOut, postMap);\n          postFilter(temp, [], context, xml);\n          i = temp.length;\n          while (i--) {\n            if (elem = temp[i]) {\n              matcherOut[postMap[i]] = !(matcherIn[postMap[i]] = elem);\n            }\n          }\n        }\n        if (seed) {\n          if (postFinder || preFilter) {\n            if (postFinder) {\n              temp = [];\n              i = matcherOut.length;\n              while (i--) {\n                if (elem = matcherOut[i]) {\n                  temp.push(matcherIn[i] = elem);\n                }\n              }\n              postFinder(null, matcherOut = [], temp, xml);\n            }\n            i = matcherOut.length;\n            while (i--) {\n              if ((elem = matcherOut[i]) && (temp = postFinder ? indexOf.call(seed, elem) : preMap[i]) > -1) {\n                seed[temp] = !(results[temp] = elem);\n              }\n            }\n          }\n        } else {\n          matcherOut = condense(matcherOut === results ? matcherOut.splice(preexisting, matcherOut.length) : matcherOut);\n          if (postFinder) {\n            postFinder(null, results, matcherOut, xml);\n          } else {\n            push$1.apply(results, matcherOut);\n          }\n        }\n      });\n    }\n    function matcherFromTokens(tokens) {\n      var checkContext, matcher, j, len = tokens.length, leadingRelative = Expr.relative[tokens[0].type], implicitRelative = leadingRelative || Expr.relative[' '], i = leadingRelative ? 1 : 0, matchContext = addCombinator(function (elem) {\n          return elem === checkContext;\n        }, implicitRelative, true), matchAnyContext = addCombinator(function (elem) {\n          return indexOf.call(checkContext, elem) > -1;\n        }, implicitRelative, true), matchers = [function (elem, context, xml) {\n            var ret = !leadingRelative && (xml || context !== outermostContext) || ((checkContext = context).nodeType ? matchContext(elem, context, xml) : matchAnyContext(elem, context, xml));\n            checkContext = null;\n            return ret;\n          }];\n      for (; i < len; i++) {\n        if (matcher = Expr.relative[tokens[i].type]) {\n          matchers = [addCombinator(elementMatcher(matchers), matcher)];\n        } else {\n          matcher = Expr.filter[tokens[i].type].apply(null, tokens[i].matches);\n          if (matcher[expando]) {\n            j = ++i;\n            for (; j < len; j++) {\n              if (Expr.relative[tokens[j].type]) {\n                break;\n              }\n            }\n            return setMatcher(i > 1 && elementMatcher(matchers), i > 1 && toSelector(tokens.slice(0, i - 1).concat({ value: tokens[i - 2].type === ' ' ? '*' : '' })).replace(rtrim, '$1'), matcher, i < j && matcherFromTokens(tokens.slice(i, j)), j < len && matcherFromTokens(tokens = tokens.slice(j)), j < len && toSelector(tokens));\n          }\n          matchers.push(matcher);\n        }\n      }\n      return elementMatcher(matchers);\n    }\n    function matcherFromGroupMatchers(elementMatchers, setMatchers) {\n      var bySet = setMatchers.length > 0, byElement = elementMatchers.length > 0, superMatcher = function (seed, context, xml, results, outermost) {\n          var elem, j, matcher, matchedCount = 0, i = '0', unmatched = seed && [], setMatched = [], contextBackup = outermostContext, elems = seed || byElement && Expr.find.TAG('*', outermost), dirrunsUnique = dirruns += contextBackup == null ? 1 : Math.random() || 0.1, len = elems.length;\n          if (outermost) {\n            outermostContext = context !== document$1 && context;\n          }\n          for (; i !== len && (elem = elems[i]) != null; i++) {\n            if (byElement && elem) {\n              j = 0;\n              while (matcher = elementMatchers[j++]) {\n                if (matcher(elem, context, xml)) {\n                  results.push(elem);\n                  break;\n                }\n              }\n              if (outermost) {\n                dirruns = dirrunsUnique;\n              }\n            }\n            if (bySet) {\n              if (elem = !matcher && elem) {\n                matchedCount--;\n              }\n              if (seed) {\n                unmatched.push(elem);\n              }\n            }\n          }\n          matchedCount += i;\n          if (bySet && i !== matchedCount) {\n            j = 0;\n            while (matcher = setMatchers[j++]) {\n              matcher(unmatched, setMatched, context, xml);\n            }\n            if (seed) {\n              if (matchedCount > 0) {\n                while (i--) {\n                  if (!(unmatched[i] || setMatched[i])) {\n                    setMatched[i] = pop.call(results);\n                  }\n                }\n              }\n              setMatched = condense(setMatched);\n            }\n            push$1.apply(results, setMatched);\n            if (outermost && !seed && setMatched.length > 0 && matchedCount + setMatchers.length > 1) {\n              Sizzle.uniqueSort(results);\n            }\n          }\n          if (outermost) {\n            dirruns = dirrunsUnique;\n            outermostContext = contextBackup;\n          }\n          return unmatched;\n        };\n      return bySet ? markFunction(superMatcher) : superMatcher;\n    }\n    compile = Sizzle.compile = function (selector, match) {\n      var i, setMatchers = [], elementMatchers = [], cached = compilerCache[selector + ' '];\n      if (!cached) {\n        if (!match) {\n          match = tokenize(selector);\n        }\n        i = match.length;\n        while (i--) {\n          cached = matcherFromTokens(match[i]);\n          if (cached[expando]) {\n            setMatchers.push(cached);\n          } else {\n            elementMatchers.push(cached);\n          }\n        }\n        cached = compilerCache(selector, matcherFromGroupMatchers(elementMatchers, setMatchers));\n        cached.selector = selector;\n      }\n      return cached;\n    };\n    select$1 = Sizzle.select = function (selector, context, results, seed) {\n      var i, tokens, token, type, find, compiled = typeof selector === 'function' && selector, match = !seed && tokenize(selector = compiled.selector || selector);\n      results = results || [];\n      if (match.length === 1) {\n        tokens = match[0] = match[0].slice(0);\n        if (tokens.length > 2 && (token = tokens[0]).type === 'ID' && support.getById && context.nodeType === 9 && documentIsHTML && Expr.relative[tokens[1].type]) {\n          context = (Expr.find.ID(token.matches[0].replace(runescape, funescape), context) || [])[0];\n          if (!context) {\n            return results;\n          } else if (compiled) {\n            context = context.parentNode;\n          }\n          selector = selector.slice(tokens.shift().value.length);\n        }\n        i = matchExpr.needsContext.test(selector) ? 0 : tokens.length;\n        while (i--) {\n          token = tokens[i];\n          if (Expr.relative[type = token.type]) {\n            break;\n          }\n          if (find = Expr.find[type]) {\n            if (seed = find(token.matches[0].replace(runescape, funescape), rsibling.test(tokens[0].type) && testContext(context.parentNode) || context)) {\n              tokens.splice(i, 1);\n              selector = seed.length && toSelector(tokens);\n              if (!selector) {\n                push$1.apply(results, seed);\n                return results;\n              }\n              break;\n            }\n          }\n        }\n      }\n      (compiled || compile(selector, match))(seed, context, !documentIsHTML, results, rsibling.test(selector) && testContext(context.parentNode) || context);\n      return results;\n    };\n    support.sortStable = expando.split('').sort(sortOrder).join('') === expando;\n    support.detectDuplicates = !!hasDuplicate;\n    setDocument();\n    support.sortDetached = true;\n\n    var doc = document;\n    var push = Array.prototype.push;\n    var slice = Array.prototype.slice;\n    var rquickExpr = /^(?:[^#<]*(<[\\w\\W]+>)[^>]*$|#([\\w\\-]*)$)/;\n    var Event$1 = EventUtils.Event;\n    var skipUniques = Tools.makeMap('children,contents,next,prev');\n    var isDefined = function (obj) {\n      return typeof obj !== 'undefined';\n    };\n    var isString = function (obj) {\n      return typeof obj === 'string';\n    };\n    var isWindow = function (obj) {\n      return obj && obj === obj.window;\n    };\n    var createFragment$1 = function (html, fragDoc) {\n      fragDoc = fragDoc || doc;\n      var container = fragDoc.createElement('div');\n      var frag = fragDoc.createDocumentFragment();\n      container.innerHTML = html;\n      var node;\n      while (node = container.firstChild) {\n        frag.appendChild(node);\n      }\n      return frag;\n    };\n    var domManipulate = function (targetNodes, sourceItem, callback, reverse) {\n      var i;\n      if (isString(sourceItem)) {\n        sourceItem = createFragment$1(sourceItem, getElementDocument(targetNodes[0]));\n      } else if (sourceItem.length && !sourceItem.nodeType) {\n        sourceItem = DomQuery.makeArray(sourceItem);\n        if (reverse) {\n          for (i = sourceItem.length - 1; i >= 0; i--) {\n            domManipulate(targetNodes, sourceItem[i], callback, reverse);\n          }\n        } else {\n          for (i = 0; i < sourceItem.length; i++) {\n            domManipulate(targetNodes, sourceItem[i], callback, reverse);\n          }\n        }\n        return targetNodes;\n      }\n      if (sourceItem.nodeType) {\n        i = targetNodes.length;\n        while (i--) {\n          callback.call(targetNodes[i], sourceItem);\n        }\n      }\n      return targetNodes;\n    };\n    var hasClass = function (node, className) {\n      return node && className && (' ' + node.className + ' ').indexOf(' ' + className + ' ') !== -1;\n    };\n    var wrap$2 = function (elements, wrapper, all) {\n      var lastParent, newWrapper;\n      wrapper = DomQuery(wrapper)[0];\n      elements.each(function () {\n        var self = this;\n        if (!all || lastParent !== self.parentNode) {\n          lastParent = self.parentNode;\n          newWrapper = wrapper.cloneNode(false);\n          self.parentNode.insertBefore(newWrapper, self);\n          newWrapper.appendChild(self);\n        } else {\n          newWrapper.appendChild(self);\n        }\n      });\n      return elements;\n    };\n    var numericCssMap = Tools.makeMap('fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom', ' ');\n    var booleanMap = Tools.makeMap('checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected', ' ');\n    var propFix = {\n      for: 'htmlFor',\n      class: 'className',\n      readonly: 'readOnly'\n    };\n    var cssFix = { float: 'cssFloat' };\n    var attrHooks = {}, cssHooks = {};\n    var DomQueryConstructor = function (selector, context) {\n      return new DomQuery.fn.init(selector, context);\n    };\n    var inArray$1 = function (item, array) {\n      var i;\n      if (array.indexOf) {\n        return array.indexOf(item);\n      }\n      i = array.length;\n      while (i--) {\n        if (array[i] === item) {\n          return i;\n        }\n      }\n      return -1;\n    };\n    var whiteSpaceRegExp = /^\\s*|\\s*$/g;\n    var trim$2 = function (str) {\n      return str === null || str === undefined ? '' : ('' + str).replace(whiteSpaceRegExp, '');\n    };\n    var each$g = function (obj, callback) {\n      var length, key, i, value;\n      if (obj) {\n        length = obj.length;\n        if (length === undefined) {\n          for (key in obj) {\n            if (obj.hasOwnProperty(key)) {\n              value = obj[key];\n              if (callback.call(value, key, value) === false) {\n                break;\n              }\n            }\n          }\n        } else {\n          for (i = 0; i < length; i++) {\n            value = obj[i];\n            if (callback.call(value, i, value) === false) {\n              break;\n            }\n          }\n        }\n      }\n      return obj;\n    };\n    var grep$2 = function (array, callback) {\n      var out = [];\n      each$g(array, function (i, item) {\n        if (callback(item, i)) {\n          out.push(item);\n        }\n      });\n      return out;\n    };\n    var getElementDocument = function (element) {\n      if (!element) {\n        return doc;\n      }\n      if (element.nodeType === 9) {\n        return element;\n      }\n      return element.ownerDocument;\n    };\n    DomQueryConstructor.fn = DomQueryConstructor.prototype = {\n      constructor: DomQueryConstructor,\n      selector: '',\n      context: null,\n      length: 0,\n      init: function (selector, context) {\n        var self = this;\n        var match, node;\n        if (!selector) {\n          return self;\n        }\n        if (selector.nodeType) {\n          self.context = self[0] = selector;\n          self.length = 1;\n          return self;\n        }\n        if (context && context.nodeType) {\n          self.context = context;\n        } else {\n          if (context) {\n            return DomQuery(selector).attr(context);\n          }\n          self.context = context = document;\n        }\n        if (isString(selector)) {\n          self.selector = selector;\n          if (selector.charAt(0) === '<' && selector.charAt(selector.length - 1) === '>' && selector.length >= 3) {\n            match = [\n              null,\n              selector,\n              null\n            ];\n          } else {\n            match = rquickExpr.exec(selector);\n          }\n          if (match) {\n            if (match[1]) {\n              node = createFragment$1(selector, getElementDocument(context)).firstChild;\n              while (node) {\n                push.call(self, node);\n                node = node.nextSibling;\n              }\n            } else {\n              node = getElementDocument(context).getElementById(match[2]);\n              if (!node) {\n                return self;\n              }\n              if (node.id !== match[2]) {\n                return self.find(selector);\n              }\n              self.length = 1;\n              self[0] = node;\n            }\n          } else {\n            return DomQuery(context).find(selector);\n          }\n        } else {\n          this.add(selector, false);\n        }\n        return self;\n      },\n      toArray: function () {\n        return Tools.toArray(this);\n      },\n      add: function (items, sort) {\n        var self = this;\n        var nodes, i;\n        if (isString(items)) {\n          return self.add(DomQuery(items));\n        }\n        if (sort !== false) {\n          nodes = DomQuery.unique(self.toArray().concat(DomQuery.makeArray(items)));\n          self.length = nodes.length;\n          for (i = 0; i < nodes.length; i++) {\n            self[i] = nodes[i];\n          }\n        } else {\n          push.apply(self, DomQuery.makeArray(items));\n        }\n        return self;\n      },\n      attr: function (name, value) {\n        var self = this;\n        var hook;\n        if (typeof name === 'object') {\n          each$g(name, function (name, value) {\n            self.attr(name, value);\n          });\n        } else if (isDefined(value)) {\n          this.each(function () {\n            var hook;\n            if (this.nodeType === 1) {\n              hook = attrHooks[name];\n              if (hook && hook.set) {\n                hook.set(this, value);\n                return;\n              }\n              if (value === null) {\n                this.removeAttribute(name, 2);\n              } else {\n                this.setAttribute(name, value, 2);\n              }\n            }\n          });\n        } else {\n          if (self[0] && self[0].nodeType === 1) {\n            hook = attrHooks[name];\n            if (hook && hook.get) {\n              return hook.get(self[0], name);\n            }\n            if (booleanMap[name]) {\n              return self.prop(name) ? name : undefined;\n            }\n            value = self[0].getAttribute(name, 2);\n            if (value === null) {\n              value = undefined;\n            }\n          }\n          return value;\n        }\n        return self;\n      },\n      removeAttr: function (name) {\n        return this.attr(name, null);\n      },\n      prop: function (name, value) {\n        var self = this;\n        name = propFix[name] || name;\n        if (typeof name === 'object') {\n          each$g(name, function (name, value) {\n            self.prop(name, value);\n          });\n        } else if (isDefined(value)) {\n          this.each(function () {\n            if (this.nodeType === 1) {\n              this[name] = value;\n            }\n          });\n        } else {\n          if (self[0] && self[0].nodeType && name in self[0]) {\n            return self[0][name];\n          }\n          return value;\n        }\n        return self;\n      },\n      css: function (name, value) {\n        var self = this;\n        var elm, hook;\n        var camel = function (name) {\n          return name.replace(/-(\\D)/g, function (a, b) {\n            return b.toUpperCase();\n          });\n        };\n        var dashed = function (name) {\n          return name.replace(/[A-Z]/g, function (a) {\n            return '-' + a;\n          });\n        };\n        if (typeof name === 'object') {\n          each$g(name, function (name, value) {\n            self.css(name, value);\n          });\n        } else {\n          if (isDefined(value)) {\n            name = camel(name);\n            if (typeof value === 'number' && !numericCssMap[name]) {\n              value = value.toString() + 'px';\n            }\n            self.each(function () {\n              var style = this.style;\n              hook = cssHooks[name];\n              if (hook && hook.set) {\n                hook.set(this, value);\n                return;\n              }\n              try {\n                this.style[cssFix[name] || name] = value;\n              } catch (ex) {\n              }\n              if (value === null || value === '') {\n                if (style.removeProperty) {\n                  style.removeProperty(dashed(name));\n                } else {\n                  style.removeAttribute(name);\n                }\n              }\n            });\n          } else {\n            elm = self[0];\n            hook = cssHooks[name];\n            if (hook && hook.get) {\n              return hook.get(elm);\n            }\n            if (elm.ownerDocument.defaultView) {\n              try {\n                return elm.ownerDocument.defaultView.getComputedStyle(elm, null).getPropertyValue(dashed(name));\n              } catch (ex) {\n                return undefined;\n              }\n            } else if (elm.currentStyle) {\n              return elm.currentStyle[camel(name)];\n            } else {\n              return '';\n            }\n          }\n        }\n        return self;\n      },\n      remove: function () {\n        var self = this;\n        var node, i = this.length;\n        while (i--) {\n          node = self[i];\n          Event$1.clean(node);\n          if (node.parentNode) {\n            node.parentNode.removeChild(node);\n          }\n        }\n        return this;\n      },\n      empty: function () {\n        var self = this;\n        var node, i = this.length;\n        while (i--) {\n          node = self[i];\n          while (node.firstChild) {\n            node.removeChild(node.firstChild);\n          }\n        }\n        return this;\n      },\n      html: function (value) {\n        var self = this;\n        var i;\n        if (isDefined(value)) {\n          i = self.length;\n          try {\n            while (i--) {\n              self[i].innerHTML = value;\n            }\n          } catch (ex) {\n            DomQuery(self[i]).empty().append(value);\n          }\n          return self;\n        }\n        return self[0] ? self[0].innerHTML : '';\n      },\n      text: function (value) {\n        var self = this;\n        var i;\n        if (isDefined(value)) {\n          i = self.length;\n          while (i--) {\n            if ('innerText' in self[i]) {\n              self[i].innerText = value;\n            } else {\n              self[0].textContent = value;\n            }\n          }\n          return self;\n        }\n        return self[0] ? self[0].innerText || self[0].textContent : '';\n      },\n      append: function () {\n        return domManipulate(this, arguments, function (node) {\n          if (this.nodeType === 1 || this.host && this.host.nodeType === 1) {\n            this.appendChild(node);\n          }\n        });\n      },\n      prepend: function () {\n        return domManipulate(this, arguments, function (node) {\n          if (this.nodeType === 1 || this.host && this.host.nodeType === 1) {\n            this.insertBefore(node, this.firstChild);\n          }\n        }, true);\n      },\n      before: function () {\n        var self = this;\n        if (self[0] && self[0].parentNode) {\n          return domManipulate(self, arguments, function (node) {\n            this.parentNode.insertBefore(node, this);\n          });\n        }\n        return self;\n      },\n      after: function () {\n        var self = this;\n        if (self[0] && self[0].parentNode) {\n          return domManipulate(self, arguments, function (node) {\n            this.parentNode.insertBefore(node, this.nextSibling);\n          }, true);\n        }\n        return self;\n      },\n      appendTo: function (val) {\n        DomQuery(val).append(this);\n        return this;\n      },\n      prependTo: function (val) {\n        DomQuery(val).prepend(this);\n        return this;\n      },\n      replaceWith: function (content) {\n        return this.before(content).remove();\n      },\n      wrap: function (content) {\n        return wrap$2(this, content);\n      },\n      wrapAll: function (content) {\n        return wrap$2(this, content, true);\n      },\n      wrapInner: function (content) {\n        this.each(function () {\n          DomQuery(this).contents().wrapAll(content);\n        });\n        return this;\n      },\n      unwrap: function () {\n        return this.parent().each(function () {\n          DomQuery(this).replaceWith(this.childNodes);\n        });\n      },\n      clone: function () {\n        var result = [];\n        this.each(function () {\n          result.push(this.cloneNode(true));\n        });\n        return DomQuery(result);\n      },\n      addClass: function (className) {\n        return this.toggleClass(className, true);\n      },\n      removeClass: function (className) {\n        return this.toggleClass(className, false);\n      },\n      toggleClass: function (className, state) {\n        var self = this;\n        if (typeof className !== 'string') {\n          return self;\n        }\n        if (className.indexOf(' ') !== -1) {\n          each$g(className.split(' '), function () {\n            self.toggleClass(this, state);\n          });\n        } else {\n          self.each(function (index, node) {\n            var classState = hasClass(node, className);\n            if (classState !== state) {\n              var existingClassName = node.className;\n              if (classState) {\n                node.className = trim$2((' ' + existingClassName + ' ').replace(' ' + className + ' ', ' '));\n              } else {\n                node.className += existingClassName ? ' ' + className : className;\n              }\n            }\n          });\n        }\n        return self;\n      },\n      hasClass: function (className) {\n        return hasClass(this[0], className);\n      },\n      each: function (callback) {\n        return each$g(this, callback);\n      },\n      on: function (name, callback) {\n        return this.each(function () {\n          Event$1.bind(this, name, callback);\n        });\n      },\n      off: function (name, callback) {\n        return this.each(function () {\n          Event$1.unbind(this, name, callback);\n        });\n      },\n      trigger: function (name) {\n        return this.each(function () {\n          if (typeof name === 'object') {\n            Event$1.fire(this, name.type, name);\n          } else {\n            Event$1.fire(this, name);\n          }\n        });\n      },\n      show: function () {\n        return this.css('display', '');\n      },\n      hide: function () {\n        return this.css('display', 'none');\n      },\n      slice: function () {\n        return DomQuery(slice.apply(this, arguments));\n      },\n      eq: function (index) {\n        return index === -1 ? this.slice(index) : this.slice(index, +index + 1);\n      },\n      first: function () {\n        return this.eq(0);\n      },\n      last: function () {\n        return this.eq(-1);\n      },\n      find: function (selector) {\n        var i, l;\n        var ret = [];\n        for (i = 0, l = this.length; i < l; i++) {\n          DomQuery.find(selector, this[i], ret);\n        }\n        return DomQuery(ret);\n      },\n      filter: function (selector) {\n        if (typeof selector === 'function') {\n          return DomQuery(grep$2(this.toArray(), function (item, i) {\n            return selector(i, item);\n          }));\n        }\n        return DomQuery(DomQuery.filter(selector, this.toArray()));\n      },\n      closest: function (selector) {\n        var result = [];\n        if (selector instanceof DomQuery) {\n          selector = selector[0];\n        }\n        this.each(function (i, node) {\n          while (node) {\n            if (typeof selector === 'string' && DomQuery(node).is(selector)) {\n              result.push(node);\n              break;\n            } else if (node === selector) {\n              result.push(node);\n              break;\n            }\n            node = node.parentNode;\n          }\n        });\n        return DomQuery(result);\n      },\n      offset: function (offset) {\n        var elm, doc, docElm;\n        var x = 0, y = 0, pos;\n        if (!offset) {\n          elm = this[0];\n          if (elm) {\n            doc = elm.ownerDocument;\n            docElm = doc.documentElement;\n            if (elm.getBoundingClientRect) {\n              pos = elm.getBoundingClientRect();\n              x = pos.left + (docElm.scrollLeft || doc.body.scrollLeft) - docElm.clientLeft;\n              y = pos.top + (docElm.scrollTop || doc.body.scrollTop) - docElm.clientTop;\n            }\n          }\n          return {\n            left: x,\n            top: y\n          };\n        }\n        return this.css(offset);\n      },\n      push: push,\n      sort: Array.prototype.sort,\n      splice: Array.prototype.splice\n    };\n    Tools.extend(DomQueryConstructor, {\n      extend: Tools.extend,\n      makeArray: function (object) {\n        if (isWindow(object) || object.nodeType) {\n          return [object];\n        }\n        return Tools.toArray(object);\n      },\n      inArray: inArray$1,\n      isArray: Tools.isArray,\n      each: each$g,\n      trim: trim$2,\n      grep: grep$2,\n      find: Sizzle,\n      expr: Sizzle.selectors,\n      unique: Sizzle.uniqueSort,\n      text: Sizzle.getText,\n      contains: Sizzle.contains,\n      filter: function (expr, elems, not) {\n        var i = elems.length;\n        if (not) {\n          expr = ':not(' + expr + ')';\n        }\n        while (i--) {\n          if (elems[i].nodeType !== 1) {\n            elems.splice(i, 1);\n          }\n        }\n        if (elems.length === 1) {\n          elems = DomQuery.find.matchesSelector(elems[0], expr) ? [elems[0]] : [];\n        } else {\n          elems = DomQuery.find.matches(expr, elems);\n        }\n        return elems;\n      }\n    });\n    var dir = function (el, prop, until) {\n      var matched = [];\n      var cur = el[prop];\n      if (typeof until !== 'string' && until instanceof DomQuery) {\n        until = until[0];\n      }\n      while (cur && cur.nodeType !== 9) {\n        if (until !== undefined) {\n          if (cur === until) {\n            break;\n          }\n          if (typeof until === 'string' && DomQuery(cur).is(until)) {\n            break;\n          }\n        }\n        if (cur.nodeType === 1) {\n          matched.push(cur);\n        }\n        cur = cur[prop];\n      }\n      return matched;\n    };\n    var sibling$1 = function (node, siblingName, nodeType, until) {\n      var result = [];\n      if (until instanceof DomQuery) {\n        until = until[0];\n      }\n      for (; node; node = node[siblingName]) {\n        if (nodeType && node.nodeType !== nodeType) {\n          continue;\n        }\n        if (until !== undefined) {\n          if (node === until) {\n            break;\n          }\n          if (typeof until === 'string' && DomQuery(node).is(until)) {\n            break;\n          }\n        }\n        result.push(node);\n      }\n      return result;\n    };\n    var firstSibling = function (node, siblingName, nodeType) {\n      for (node = node[siblingName]; node; node = node[siblingName]) {\n        if (node.nodeType === nodeType) {\n          return node;\n        }\n      }\n      return null;\n    };\n    each$g({\n      parent: function (node) {\n        var parent = node.parentNode;\n        return parent && parent.nodeType !== 11 ? parent : null;\n      },\n      parents: function (node) {\n        return dir(node, 'parentNode');\n      },\n      next: function (node) {\n        return firstSibling(node, 'nextSibling', 1);\n      },\n      prev: function (node) {\n        return firstSibling(node, 'previousSibling', 1);\n      },\n      children: function (node) {\n        return sibling$1(node.firstChild, 'nextSibling', 1);\n      },\n      contents: function (node) {\n        return Tools.toArray((node.nodeName === 'iframe' ? node.contentDocument || node.contentWindow.document : node).childNodes);\n      }\n    }, function (name, fn) {\n      DomQueryConstructor.fn[name] = function (selector) {\n        var self = this;\n        var result = [];\n        self.each(function () {\n          var nodes = fn.call(result, this, selector, result);\n          if (nodes) {\n            if (DomQuery.isArray(nodes)) {\n              result.push.apply(result, nodes);\n            } else {\n              result.push(nodes);\n            }\n          }\n        });\n        if (this.length > 1) {\n          if (!skipUniques[name]) {\n            result = DomQuery.unique(result);\n          }\n          if (name.indexOf('parents') === 0) {\n            result = result.reverse();\n          }\n        }\n        var wrappedResult = DomQuery(result);\n        if (selector) {\n          return wrappedResult.filter(selector);\n        }\n        return wrappedResult;\n      };\n    });\n    each$g({\n      parentsUntil: function (node, until) {\n        return dir(node, 'parentNode', until);\n      },\n      nextUntil: function (node, until) {\n        return sibling$1(node, 'nextSibling', 1, until).slice(1);\n      },\n      prevUntil: function (node, until) {\n        return sibling$1(node, 'previousSibling', 1, until).slice(1);\n      }\n    }, function (name, fn) {\n      DomQueryConstructor.fn[name] = function (selector, filter) {\n        var self = this;\n        var result = [];\n        self.each(function () {\n          var nodes = fn.call(result, this, selector, result);\n          if (nodes) {\n            if (DomQuery.isArray(nodes)) {\n              result.push.apply(result, nodes);\n            } else {\n              result.push(nodes);\n            }\n          }\n        });\n        if (this.length > 1) {\n          result = DomQuery.unique(result);\n          if (name.indexOf('parents') === 0 || name === 'prevUntil') {\n            result = result.reverse();\n          }\n        }\n        var wrappedResult = DomQuery(result);\n        if (filter) {\n          return wrappedResult.filter(filter);\n        }\n        return wrappedResult;\n      };\n    });\n    DomQueryConstructor.fn.is = function (selector) {\n      return !!selector && this.filter(selector).length > 0;\n    };\n    DomQueryConstructor.fn.init.prototype = DomQueryConstructor.fn;\n    DomQueryConstructor.overrideDefaults = function (callback) {\n      var defaults;\n      var sub = function (selector, context) {\n        defaults = defaults || callback();\n        if (arguments.length === 0) {\n          selector = defaults.element;\n        }\n        if (!context) {\n          context = defaults.context;\n        }\n        return new sub.fn.init(selector, context);\n      };\n      DomQuery.extend(sub, this);\n      return sub;\n    };\n    DomQueryConstructor.attrHooks = attrHooks;\n    DomQueryConstructor.cssHooks = cssHooks;\n    var DomQuery = DomQueryConstructor;\n\n    var each$f = Tools.each;\n    var grep$1 = Tools.grep;\n    var isIE = Env.ie;\n    var simpleSelectorRe = /^([a-z0-9],?)+$/i;\n    var setupAttrHooks = function (styles, settings, getContext) {\n      var keepValues = settings.keep_values;\n      var keepUrlHook = {\n        set: function ($elm, value, name) {\n          if (settings.url_converter && value !== null) {\n            value = settings.url_converter.call(settings.url_converter_scope || getContext(), value, name, $elm[0]);\n          }\n          $elm.attr('data-mce-' + name, value).attr(name, value);\n        },\n        get: function ($elm, name) {\n          return $elm.attr('data-mce-' + name) || $elm.attr(name);\n        }\n      };\n      var attrHooks = {\n        style: {\n          set: function ($elm, value) {\n            if (value !== null && typeof value === 'object') {\n              $elm.css(value);\n              return;\n            }\n            if (keepValues) {\n              $elm.attr('data-mce-style', value);\n            }\n            if (value !== null && typeof value === 'string') {\n              $elm.removeAttr('style');\n              $elm.css(styles.parse(value));\n            } else {\n              $elm.attr('style', value);\n            }\n          },\n          get: function ($elm) {\n            var value = $elm.attr('data-mce-style') || $elm.attr('style');\n            value = styles.serialize(styles.parse(value), $elm[0].nodeName);\n            return value;\n          }\n        }\n      };\n      if (keepValues) {\n        attrHooks.href = attrHooks.src = keepUrlHook;\n      }\n      return attrHooks;\n    };\n    var updateInternalStyleAttr = function (styles, $elm) {\n      var rawValue = $elm.attr('style');\n      var value = styles.serialize(styles.parse(rawValue), $elm[0].nodeName);\n      if (!value) {\n        value = null;\n      }\n      $elm.attr('data-mce-style', value);\n    };\n    var findNodeIndex = function (node, normalized) {\n      var idx = 0, lastNodeType, nodeType;\n      if (node) {\n        for (lastNodeType = node.nodeType, node = node.previousSibling; node; node = node.previousSibling) {\n          nodeType = node.nodeType;\n          if (normalized && nodeType === 3) {\n            if (nodeType === lastNodeType || !node.nodeValue.length) {\n              continue;\n            }\n          }\n          idx++;\n          lastNodeType = nodeType;\n        }\n      }\n      return idx;\n    };\n    var DOMUtils = function (doc, settings) {\n      if (settings === void 0) {\n        settings = {};\n      }\n      var addedStyles = {};\n      var win = window;\n      var files = {};\n      var counter = 0;\n      var stdMode = true;\n      var boxModel = true;\n      var styleSheetLoader = instance.forElement(SugarElement.fromDom(doc), {\n        contentCssCors: settings.contentCssCors,\n        referrerPolicy: settings.referrerPolicy\n      });\n      var boundEvents = [];\n      var schema = settings.schema ? settings.schema : Schema({});\n      var styles = Styles({\n        url_converter: settings.url_converter,\n        url_converter_scope: settings.url_converter_scope\n      }, settings.schema);\n      var events = settings.ownEvents ? new EventUtils() : EventUtils.Event;\n      var blockElementsMap = schema.getBlockElements();\n      var $ = DomQuery.overrideDefaults(function () {\n        return {\n          context: doc,\n          element: self.getRoot()\n        };\n      });\n      var isBlock = function (node) {\n        if (typeof node === 'string') {\n          return !!blockElementsMap[node];\n        } else if (node) {\n          var type = node.nodeType;\n          if (type) {\n            return !!(type === 1 && blockElementsMap[node.nodeName]);\n          }\n        }\n        return false;\n      };\n      var get = function (elm) {\n        return elm && doc && isString$1(elm) ? doc.getElementById(elm) : elm;\n      };\n      var $$ = function (elm) {\n        return $(typeof elm === 'string' ? get(elm) : elm);\n      };\n      var getAttrib = function (elm, name, defaultVal) {\n        var hook, value;\n        var $elm = $$(elm);\n        if ($elm.length) {\n          hook = attrHooks[name];\n          if (hook && hook.get) {\n            value = hook.get($elm, name);\n          } else {\n            value = $elm.attr(name);\n          }\n        }\n        if (typeof value === 'undefined') {\n          value = defaultVal || '';\n        }\n        return value;\n      };\n      var getAttribs = function (elm) {\n        var node = get(elm);\n        if (!node) {\n          return [];\n        }\n        return node.attributes;\n      };\n      var setAttrib = function (elm, name, value) {\n        if (value === '') {\n          value = null;\n        }\n        var $elm = $$(elm);\n        var originalValue = $elm.attr(name);\n        if (!$elm.length) {\n          return;\n        }\n        var hook = attrHooks[name];\n        if (hook && hook.set) {\n          hook.set($elm, value, name);\n        } else {\n          $elm.attr(name, value);\n        }\n        if (originalValue !== value && settings.onSetAttrib) {\n          settings.onSetAttrib({\n            attrElm: $elm,\n            attrName: name,\n            attrValue: value\n          });\n        }\n      };\n      var clone = function (node, deep) {\n        if (!isIE || node.nodeType !== 1 || deep) {\n          return node.cloneNode(deep);\n        } else {\n          var clone_1 = doc.createElement(node.nodeName);\n          each$f(getAttribs(node), function (attr) {\n            setAttrib(clone_1, attr.nodeName, getAttrib(node, attr.nodeName));\n          });\n          return clone_1;\n        }\n      };\n      var getRoot = function () {\n        return settings.root_element || doc.body;\n      };\n      var getViewPort = function (argWin) {\n        var vp = getBounds(argWin);\n        return {\n          x: vp.x,\n          y: vp.y,\n          w: vp.width,\n          h: vp.height\n        };\n      };\n      var getPos$1 = function (elm, rootElm) {\n        return getPos(doc.body, get(elm), rootElm);\n      };\n      var setStyle = function (elm, name, value) {\n        var $elm = isString$1(name) ? $$(elm).css(name, value) : $$(elm).css(name);\n        if (settings.update_styles) {\n          updateInternalStyleAttr(styles, $elm);\n        }\n      };\n      var setStyles = function (elm, stylesArg) {\n        var $elm = $$(elm).css(stylesArg);\n        if (settings.update_styles) {\n          updateInternalStyleAttr(styles, $elm);\n        }\n      };\n      var getStyle = function (elm, name, computed) {\n        var $elm = $$(elm);\n        if (computed) {\n          return $elm.css(name);\n        }\n        name = name.replace(/-(\\D)/g, function (a, b) {\n          return b.toUpperCase();\n        });\n        if (name === 'float') {\n          name = Env.browser.isIE() ? 'styleFloat' : 'cssFloat';\n        }\n        return $elm[0] && $elm[0].style ? $elm[0].style[name] : undefined;\n      };\n      var getSize = function (elm) {\n        var w, h;\n        elm = get(elm);\n        w = getStyle(elm, 'width');\n        h = getStyle(elm, 'height');\n        if (w.indexOf('px') === -1) {\n          w = 0;\n        }\n        if (h.indexOf('px') === -1) {\n          h = 0;\n        }\n        return {\n          w: parseInt(w, 10) || elm.offsetWidth || elm.clientWidth,\n          h: parseInt(h, 10) || elm.offsetHeight || elm.clientHeight\n        };\n      };\n      var getRect = function (elm) {\n        elm = get(elm);\n        var pos = getPos$1(elm);\n        var size = getSize(elm);\n        return {\n          x: pos.x,\n          y: pos.y,\n          w: size.w,\n          h: size.h\n        };\n      };\n      var is = function (elm, selector) {\n        var i;\n        if (!elm) {\n          return false;\n        }\n        if (!Array.isArray(elm)) {\n          if (selector === '*') {\n            return elm.nodeType === 1;\n          }\n          if (simpleSelectorRe.test(selector)) {\n            var selectors = selector.toLowerCase().split(/,/);\n            var elmName = elm.nodeName.toLowerCase();\n            for (i = selectors.length - 1; i >= 0; i--) {\n              if (selectors[i] === elmName) {\n                return true;\n              }\n            }\n            return false;\n          }\n          if (elm.nodeType && elm.nodeType !== 1) {\n            return false;\n          }\n        }\n        var elms = !Array.isArray(elm) ? [elm] : elm;\n        return Sizzle(selector, elms[0].ownerDocument || elms[0], null, elms).length > 0;\n      };\n      var getParents = function (elm, selector, root, collect) {\n        var result = [];\n        var selectorVal;\n        var node = get(elm);\n        collect = collect === undefined;\n        root = root || (getRoot().nodeName !== 'BODY' ? getRoot().parentNode : null);\n        if (Tools.is(selector, 'string')) {\n          selectorVal = selector;\n          if (selector === '*') {\n            selector = function (node) {\n              return node.nodeType === 1;\n            };\n          } else {\n            selector = function (node) {\n              return is(node, selectorVal);\n            };\n          }\n        }\n        while (node) {\n          if (node === root || isNullable(node.nodeType) || isDocument$1(node) || isDocumentFragment(node)) {\n            break;\n          }\n          if (!selector || typeof selector === 'function' && selector(node)) {\n            if (collect) {\n              result.push(node);\n            } else {\n              return [node];\n            }\n          }\n          node = node.parentNode;\n        }\n        return collect ? result : null;\n      };\n      var getParent = function (node, selector, root) {\n        var parents = getParents(node, selector, root, false);\n        return parents && parents.length > 0 ? parents[0] : null;\n      };\n      var _findSib = function (node, selector, name) {\n        var func = selector;\n        if (node) {\n          if (typeof selector === 'string') {\n            func = function (node) {\n              return is(node, selector);\n            };\n          }\n          for (node = node[name]; node; node = node[name]) {\n            if (typeof func === 'function' && func(node)) {\n              return node;\n            }\n          }\n        }\n        return null;\n      };\n      var getNext = function (node, selector) {\n        return _findSib(node, selector, 'nextSibling');\n      };\n      var getPrev = function (node, selector) {\n        return _findSib(node, selector, 'previousSibling');\n      };\n      var select = function (selector, scope) {\n        return Sizzle(selector, get(scope) || settings.root_element || doc, []);\n      };\n      var run = function (elm, func, scope) {\n        var result;\n        var node = typeof elm === 'string' ? get(elm) : elm;\n        if (!node) {\n          return false;\n        }\n        if (Tools.isArray(node) && (node.length || node.length === 0)) {\n          result = [];\n          each$f(node, function (elm, i) {\n            if (elm) {\n              result.push(func.call(scope, typeof elm === 'string' ? get(elm) : elm, i));\n            }\n          });\n          return result;\n        }\n        var context = scope ? scope : this;\n        return func.call(context, node);\n      };\n      var setAttribs = function (elm, attrs) {\n        $$(elm).each(function (i, node) {\n          each$f(attrs, function (value, name) {\n            setAttrib(node, name, value);\n          });\n        });\n      };\n      var setHTML = function (elm, html) {\n        var $elm = $$(elm);\n        if (isIE) {\n          $elm.each(function (i, target) {\n            if (target.canHaveHTML === false) {\n              return;\n            }\n            while (target.firstChild) {\n              target.removeChild(target.firstChild);\n            }\n            try {\n              target.innerHTML = '<br>' + html;\n              target.removeChild(target.firstChild);\n            } catch (ex) {\n              DomQuery('<div></div>').html('<br>' + html).contents().slice(1).appendTo(target);\n            }\n            return html;\n          });\n        } else {\n          $elm.html(html);\n        }\n      };\n      var add = function (parentElm, name, attrs, html, create) {\n        return run(parentElm, function (parentElm) {\n          var newElm = typeof name === 'string' ? doc.createElement(name) : name;\n          setAttribs(newElm, attrs);\n          if (html) {\n            if (typeof html !== 'string' && html.nodeType) {\n              newElm.appendChild(html);\n            } else if (typeof html === 'string') {\n              setHTML(newElm, html);\n            }\n          }\n          return !create ? parentElm.appendChild(newElm) : newElm;\n        });\n      };\n      var create = function (name, attrs, html) {\n        return add(doc.createElement(name), name, attrs, html, true);\n      };\n      var decode = Entities.decode;\n      var encode = Entities.encodeAllRaw;\n      var createHTML = function (name, attrs, html) {\n        var outHtml = '', key;\n        outHtml += '<' + name;\n        for (key in attrs) {\n          if (hasNonNullableKey(attrs, key)) {\n            outHtml += ' ' + key + '=\"' + encode(attrs[key]) + '\"';\n          }\n        }\n        if (typeof html !== 'undefined') {\n          return outHtml + '>' + html + '</' + name + '>';\n        }\n        return outHtml + ' />';\n      };\n      var createFragment = function (html) {\n        var node;\n        var container = doc.createElement('div');\n        var frag = doc.createDocumentFragment();\n        frag.appendChild(container);\n        if (html) {\n          container.innerHTML = html;\n        }\n        while (node = container.firstChild) {\n          frag.appendChild(node);\n        }\n        frag.removeChild(container);\n        return frag;\n      };\n      var remove = function (node, keepChildren) {\n        var $node = $$(node);\n        if (keepChildren) {\n          $node.each(function () {\n            var child;\n            while (child = this.firstChild) {\n              if (child.nodeType === 3 && child.data.length === 0) {\n                this.removeChild(child);\n              } else {\n                this.parentNode.insertBefore(child, this);\n              }\n            }\n          }).remove();\n        } else {\n          $node.remove();\n        }\n        return $node.length > 1 ? $node.toArray() : $node[0];\n      };\n      var removeAllAttribs = function (e) {\n        return run(e, function (e) {\n          var i;\n          var attrs = e.attributes;\n          for (i = attrs.length - 1; i >= 0; i--) {\n            e.removeAttributeNode(attrs.item(i));\n          }\n        });\n      };\n      var parseStyle = function (cssText) {\n        return styles.parse(cssText);\n      };\n      var serializeStyle = function (stylesArg, name) {\n        return styles.serialize(stylesArg, name);\n      };\n      var addStyle = function (cssText) {\n        var head, styleElm;\n        if (self !== DOMUtils.DOM && doc === document) {\n          if (addedStyles[cssText]) {\n            return;\n          }\n          addedStyles[cssText] = true;\n        }\n        styleElm = doc.getElementById('mceDefaultStyles');\n        if (!styleElm) {\n          styleElm = doc.createElement('style');\n          styleElm.id = 'mceDefaultStyles';\n          styleElm.type = 'text/css';\n          head = doc.getElementsByTagName('head')[0];\n          if (head.firstChild) {\n            head.insertBefore(styleElm, head.firstChild);\n          } else {\n            head.appendChild(styleElm);\n          }\n        }\n        if (styleElm.styleSheet) {\n          styleElm.styleSheet.cssText += cssText;\n        } else {\n          styleElm.appendChild(doc.createTextNode(cssText));\n        }\n      };\n      var loadCSS = function (urls) {\n        if (!urls) {\n          urls = '';\n        }\n        each$k(urls.split(','), function (url) {\n          files[url] = true;\n          styleSheetLoader.load(url, noop);\n        });\n      };\n      var toggleClass = function (elm, cls, state) {\n        $$(elm).toggleClass(cls, state).each(function () {\n          if (this.className === '') {\n            DomQuery(this).attr('class', null);\n          }\n        });\n      };\n      var addClass = function (elm, cls) {\n        $$(elm).addClass(cls);\n      };\n      var removeClass = function (elm, cls) {\n        toggleClass(elm, cls, false);\n      };\n      var hasClass = function (elm, cls) {\n        return $$(elm).hasClass(cls);\n      };\n      var show = function (elm) {\n        $$(elm).show();\n      };\n      var hide = function (elm) {\n        $$(elm).hide();\n      };\n      var isHidden = function (elm) {\n        return $$(elm).css('display') === 'none';\n      };\n      var uniqueId = function (prefix) {\n        return (!prefix ? 'mce_' : prefix) + counter++;\n      };\n      var getOuterHTML = function (elm) {\n        var node = typeof elm === 'string' ? get(elm) : elm;\n        return isElement$5(node) ? node.outerHTML : DomQuery('<div></div>').append(DomQuery(node).clone()).html();\n      };\n      var setOuterHTML = function (elm, html) {\n        $$(elm).each(function () {\n          try {\n            if ('outerHTML' in this) {\n              this.outerHTML = html;\n              return;\n            }\n          } catch (ex) {\n          }\n          remove(DomQuery(this).html(html), true);\n        });\n      };\n      var insertAfter = function (node, reference) {\n        var referenceNode = get(reference);\n        return run(node, function (node) {\n          var parent = referenceNode.parentNode;\n          var nextSibling = referenceNode.nextSibling;\n          if (nextSibling) {\n            parent.insertBefore(node, nextSibling);\n          } else {\n            parent.appendChild(node);\n          }\n          return node;\n        });\n      };\n      var replace = function (newElm, oldElm, keepChildren) {\n        return run(oldElm, function (oldElm) {\n          if (Tools.is(oldElm, 'array')) {\n            newElm = newElm.cloneNode(true);\n          }\n          if (keepChildren) {\n            each$f(grep$1(oldElm.childNodes), function (node) {\n              newElm.appendChild(node);\n            });\n          }\n          return oldElm.parentNode.replaceChild(newElm, oldElm);\n        });\n      };\n      var rename = function (elm, name) {\n        var newElm;\n        if (elm.nodeName !== name.toUpperCase()) {\n          newElm = create(name);\n          each$f(getAttribs(elm), function (attrNode) {\n            setAttrib(newElm, attrNode.nodeName, getAttrib(elm, attrNode.nodeName));\n          });\n          replace(newElm, elm, true);\n        }\n        return newElm || elm;\n      };\n      var findCommonAncestor = function (a, b) {\n        var ps = a, pe;\n        while (ps) {\n          pe = b;\n          while (pe && ps !== pe) {\n            pe = pe.parentNode;\n          }\n          if (ps === pe) {\n            break;\n          }\n          ps = ps.parentNode;\n        }\n        if (!ps && a.ownerDocument) {\n          return a.ownerDocument.documentElement;\n        }\n        return ps;\n      };\n      var toHex = function (rgbVal) {\n        return styles.toHex(Tools.trim(rgbVal));\n      };\n      var isNonEmptyElement = function (node) {\n        if (isElement$5(node)) {\n          var isNamedAnchor = node.nodeName.toLowerCase() === 'a' && !getAttrib(node, 'href') && getAttrib(node, 'id');\n          if (getAttrib(node, 'name') || getAttrib(node, 'data-mce-bookmark') || isNamedAnchor) {\n            return true;\n          }\n        }\n        return false;\n      };\n      var isEmpty = function (node, elements) {\n        var type, name, brCount = 0;\n        if (isNonEmptyElement(node)) {\n          return false;\n        }\n        node = node.firstChild;\n        if (node) {\n          var walker = new DomTreeWalker(node, node.parentNode);\n          var whitespace = schema ? schema.getWhiteSpaceElements() : {};\n          elements = elements || (schema ? schema.getNonEmptyElements() : null);\n          do {\n            type = node.nodeType;\n            if (isElement$5(node)) {\n              var bogusVal = node.getAttribute('data-mce-bogus');\n              if (bogusVal) {\n                node = walker.next(bogusVal === 'all');\n                continue;\n              }\n              name = node.nodeName.toLowerCase();\n              if (elements && elements[name]) {\n                if (name === 'br') {\n                  brCount++;\n                  node = walker.next();\n                  continue;\n                }\n                return false;\n              }\n              if (isNonEmptyElement(node)) {\n                return false;\n              }\n            }\n            if (type === 8) {\n              return false;\n            }\n            if (type === 3 && !isWhitespaceText(node.nodeValue)) {\n              return false;\n            }\n            if (type === 3 && node.parentNode && whitespace[node.parentNode.nodeName] && isWhitespaceText(node.nodeValue)) {\n              return false;\n            }\n            node = walker.next();\n          } while (node);\n        }\n        return brCount <= 1;\n      };\n      var createRng = function () {\n        return doc.createRange();\n      };\n      var split = function (parentElm, splitElm, replacementElm) {\n        var range = createRng();\n        var beforeFragment;\n        var afterFragment;\n        var parentNode;\n        if (parentElm && splitElm) {\n          range.setStart(parentElm.parentNode, findNodeIndex(parentElm));\n          range.setEnd(splitElm.parentNode, findNodeIndex(splitElm));\n          beforeFragment = range.extractContents();\n          range = createRng();\n          range.setStart(splitElm.parentNode, findNodeIndex(splitElm) + 1);\n          range.setEnd(parentElm.parentNode, findNodeIndex(parentElm) + 1);\n          afterFragment = range.extractContents();\n          parentNode = parentElm.parentNode;\n          parentNode.insertBefore(trimNode(self, beforeFragment), parentElm);\n          if (replacementElm) {\n            parentNode.insertBefore(replacementElm, parentElm);\n          } else {\n            parentNode.insertBefore(splitElm, parentElm);\n          }\n          parentNode.insertBefore(trimNode(self, afterFragment), parentElm);\n          remove(parentElm);\n          return replacementElm || splitElm;\n        }\n      };\n      var bind = function (target, name, func, scope) {\n        if (Tools.isArray(target)) {\n          var i = target.length;\n          var rv = [];\n          while (i--) {\n            rv[i] = bind(target[i], name, func, scope);\n          }\n          return rv;\n        }\n        if (settings.collect && (target === doc || target === win)) {\n          boundEvents.push([\n            target,\n            name,\n            func,\n            scope\n          ]);\n        }\n        var output = events.bind(target, name, func, scope || self);\n        return output;\n      };\n      var unbind = function (target, name, func) {\n        if (Tools.isArray(target)) {\n          var i = target.length;\n          var rv = [];\n          while (i--) {\n            rv[i] = unbind(target[i], name, func);\n          }\n          return rv;\n        } else {\n          if (boundEvents.length > 0 && (target === doc || target === win)) {\n            var i = boundEvents.length;\n            while (i--) {\n              var item = boundEvents[i];\n              if (target === item[0] && (!name || name === item[1]) && (!func || func === item[2])) {\n                events.unbind(item[0], item[1], item[2]);\n              }\n            }\n          }\n          return events.unbind(target, name, func);\n        }\n      };\n      var fire = function (target, name, evt) {\n        return events.fire(target, name, evt);\n      };\n      var getContentEditable = function (node) {\n        if (node && isElement$5(node)) {\n          var contentEditable = node.getAttribute('data-mce-contenteditable');\n          if (contentEditable && contentEditable !== 'inherit') {\n            return contentEditable;\n          }\n          return node.contentEditable !== 'inherit' ? node.contentEditable : null;\n        } else {\n          return null;\n        }\n      };\n      var getContentEditableParent = function (node) {\n        var root = getRoot();\n        var state = null;\n        for (; node && node !== root; node = node.parentNode) {\n          state = getContentEditable(node);\n          if (state !== null) {\n            break;\n          }\n        }\n        return state;\n      };\n      var destroy = function () {\n        if (boundEvents.length > 0) {\n          var i = boundEvents.length;\n          while (i--) {\n            var item = boundEvents[i];\n            events.unbind(item[0], item[1], item[2]);\n          }\n        }\n        each$j(files, function (_, url) {\n          styleSheetLoader.unload(url);\n          delete files[url];\n        });\n        if (Sizzle.setDocument) {\n          Sizzle.setDocument();\n        }\n      };\n      var isChildOf = function (node, parent) {\n        if (!isIE) {\n          return node === parent || parent.contains(node);\n        } else {\n          while (node) {\n            if (parent === node) {\n              return true;\n            }\n            node = node.parentNode;\n          }\n          return false;\n        }\n      };\n      var dumpRng = function (r) {\n        return 'startContainer: ' + r.startContainer.nodeName + ', startOffset: ' + r.startOffset + ', endContainer: ' + r.endContainer.nodeName + ', endOffset: ' + r.endOffset;\n      };\n      var self = {\n        doc: doc,\n        settings: settings,\n        win: win,\n        files: files,\n        stdMode: stdMode,\n        boxModel: boxModel,\n        styleSheetLoader: styleSheetLoader,\n        boundEvents: boundEvents,\n        styles: styles,\n        schema: schema,\n        events: events,\n        isBlock: isBlock,\n        $: $,\n        $$: $$,\n        root: null,\n        clone: clone,\n        getRoot: getRoot,\n        getViewPort: getViewPort,\n        getRect: getRect,\n        getSize: getSize,\n        getParent: getParent,\n        getParents: getParents,\n        get: get,\n        getNext: getNext,\n        getPrev: getPrev,\n        select: select,\n        is: is,\n        add: add,\n        create: create,\n        createHTML: createHTML,\n        createFragment: createFragment,\n        remove: remove,\n        setStyle: setStyle,\n        getStyle: getStyle,\n        setStyles: setStyles,\n        removeAllAttribs: removeAllAttribs,\n        setAttrib: setAttrib,\n        setAttribs: setAttribs,\n        getAttrib: getAttrib,\n        getPos: getPos$1,\n        parseStyle: parseStyle,\n        serializeStyle: serializeStyle,\n        addStyle: addStyle,\n        loadCSS: loadCSS,\n        addClass: addClass,\n        removeClass: removeClass,\n        hasClass: hasClass,\n        toggleClass: toggleClass,\n        show: show,\n        hide: hide,\n        isHidden: isHidden,\n        uniqueId: uniqueId,\n        setHTML: setHTML,\n        getOuterHTML: getOuterHTML,\n        setOuterHTML: setOuterHTML,\n        decode: decode,\n        encode: encode,\n        insertAfter: insertAfter,\n        replace: replace,\n        rename: rename,\n        findCommonAncestor: findCommonAncestor,\n        toHex: toHex,\n        run: run,\n        getAttribs: getAttribs,\n        isEmpty: isEmpty,\n        createRng: createRng,\n        nodeIndex: findNodeIndex,\n        split: split,\n        bind: bind,\n        unbind: unbind,\n        fire: fire,\n        getContentEditable: getContentEditable,\n        getContentEditableParent: getContentEditableParent,\n        destroy: destroy,\n        isChildOf: isChildOf,\n        dumpRng: dumpRng\n      };\n      var attrHooks = setupAttrHooks(styles, settings, constant(self));\n      return self;\n    };\n    DOMUtils.DOM = DOMUtils(document);\n    DOMUtils.nodeIndex = findNodeIndex;\n\n    var DOM$a = DOMUtils.DOM;\n    var each$e = Tools.each, grep = Tools.grep;\n    var QUEUED = 0;\n    var LOADING = 1;\n    var LOADED = 2;\n    var FAILED = 3;\n    var ScriptLoader = function () {\n      function ScriptLoader(settings) {\n        if (settings === void 0) {\n          settings = {};\n        }\n        this.states = {};\n        this.queue = [];\n        this.scriptLoadedCallbacks = {};\n        this.queueLoadedCallbacks = [];\n        this.loading = 0;\n        this.settings = settings;\n      }\n      ScriptLoader.prototype._setReferrerPolicy = function (referrerPolicy) {\n        this.settings.referrerPolicy = referrerPolicy;\n      };\n      ScriptLoader.prototype.loadScript = function (url, success, failure) {\n        var dom = DOM$a;\n        var elm;\n        var cleanup = function () {\n          dom.remove(id);\n          if (elm) {\n            elm.onerror = elm.onload = elm = null;\n          }\n        };\n        var done = function () {\n          cleanup();\n          success();\n        };\n        var error = function () {\n          cleanup();\n          if (isFunction(failure)) {\n            failure();\n          } else {\n            if (typeof console !== 'undefined' && console.log) {\n              console.log('Failed to load script: ' + url);\n            }\n          }\n        };\n        var id = dom.uniqueId();\n        elm = document.createElement('script');\n        elm.id = id;\n        elm.type = 'text/javascript';\n        elm.src = Tools._addCacheSuffix(url);\n        if (this.settings.referrerPolicy) {\n          dom.setAttrib(elm, 'referrerpolicy', this.settings.referrerPolicy);\n        }\n        elm.onload = done;\n        elm.onerror = error;\n        (document.getElementsByTagName('head')[0] || document.body).appendChild(elm);\n      };\n      ScriptLoader.prototype.isDone = function (url) {\n        return this.states[url] === LOADED;\n      };\n      ScriptLoader.prototype.markDone = function (url) {\n        this.states[url] = LOADED;\n      };\n      ScriptLoader.prototype.add = function (url, success, scope, failure) {\n        var state = this.states[url];\n        this.queue.push(url);\n        if (state === undefined) {\n          this.states[url] = QUEUED;\n        }\n        if (success) {\n          if (!this.scriptLoadedCallbacks[url]) {\n            this.scriptLoadedCallbacks[url] = [];\n          }\n          this.scriptLoadedCallbacks[url].push({\n            success: success,\n            failure: failure,\n            scope: scope || this\n          });\n        }\n      };\n      ScriptLoader.prototype.load = function (url, success, scope, failure) {\n        return this.add(url, success, scope, failure);\n      };\n      ScriptLoader.prototype.remove = function (url) {\n        delete this.states[url];\n        delete this.scriptLoadedCallbacks[url];\n      };\n      ScriptLoader.prototype.loadQueue = function (success, scope, failure) {\n        this.loadScripts(this.queue, success, scope, failure);\n      };\n      ScriptLoader.prototype.loadScripts = function (scripts, success, scope, failure) {\n        var self = this;\n        var failures = [];\n        var execCallbacks = function (name, url) {\n          each$e(self.scriptLoadedCallbacks[url], function (callback) {\n            if (isFunction(callback[name])) {\n              callback[name].call(callback.scope);\n            }\n          });\n          self.scriptLoadedCallbacks[url] = undefined;\n        };\n        self.queueLoadedCallbacks.push({\n          success: success,\n          failure: failure,\n          scope: scope || this\n        });\n        var loadScripts = function () {\n          var loadingScripts = grep(scripts);\n          scripts.length = 0;\n          each$e(loadingScripts, function (url) {\n            if (self.states[url] === LOADED) {\n              execCallbacks('success', url);\n              return;\n            }\n            if (self.states[url] === FAILED) {\n              execCallbacks('failure', url);\n              return;\n            }\n            if (self.states[url] !== LOADING) {\n              self.states[url] = LOADING;\n              self.loading++;\n              self.loadScript(url, function () {\n                self.states[url] = LOADED;\n                self.loading--;\n                execCallbacks('success', url);\n                loadScripts();\n              }, function () {\n                self.states[url] = FAILED;\n                self.loading--;\n                failures.push(url);\n                execCallbacks('failure', url);\n                loadScripts();\n              });\n            }\n          });\n          if (!self.loading) {\n            var notifyCallbacks = self.queueLoadedCallbacks.slice(0);\n            self.queueLoadedCallbacks.length = 0;\n            each$e(notifyCallbacks, function (callback) {\n              if (failures.length === 0) {\n                if (isFunction(callback.success)) {\n                  callback.success.call(callback.scope);\n                }\n              } else {\n                if (isFunction(callback.failure)) {\n                  callback.failure.call(callback.scope, failures);\n                }\n              }\n            });\n          }\n        };\n        loadScripts();\n      };\n      ScriptLoader.ScriptLoader = new ScriptLoader();\n      return ScriptLoader;\n    }();\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var isRaw = function (str) {\n      return isObject(str) && has$2(str, 'raw');\n    };\n    var isTokenised = function (str) {\n      return isArray$1(str) && str.length > 1;\n    };\n    var data = {};\n    var currentCode = Cell('en');\n    var getLanguageData = function () {\n      return get$9(data, currentCode.get());\n    };\n    var getData = function () {\n      return map$2(data, function (value) {\n        return __assign({}, value);\n      });\n    };\n    var setCode = function (newCode) {\n      if (newCode) {\n        currentCode.set(newCode);\n      }\n    };\n    var getCode = function () {\n      return currentCode.get();\n    };\n    var add$4 = function (code, items) {\n      var langData = data[code];\n      if (!langData) {\n        data[code] = langData = {};\n      }\n      each$j(items, function (translation, name) {\n        langData[name.toLowerCase()] = translation;\n      });\n    };\n    var translate = function (text) {\n      var langData = getLanguageData().getOr({});\n      var toString = function (obj) {\n        if (isFunction(obj)) {\n          return Object.prototype.toString.call(obj);\n        }\n        return !isEmpty(obj) ? '' + obj : '';\n      };\n      var isEmpty = function (text) {\n        return text === '' || text === null || text === undefined;\n      };\n      var getLangData = function (text) {\n        var textstr = toString(text);\n        return get$9(langData, textstr.toLowerCase()).map(toString).getOr(textstr);\n      };\n      var removeContext = function (str) {\n        return str.replace(/{context:\\w+}$/, '');\n      };\n      if (isEmpty(text)) {\n        return '';\n      }\n      if (isRaw(text)) {\n        return toString(text.raw);\n      }\n      if (isTokenised(text)) {\n        var values_1 = text.slice(1);\n        var substitued = getLangData(text[0]).replace(/\\{([0-9]+)\\}/g, function ($1, $2) {\n          return has$2(values_1, $2) ? toString(values_1[$2]) : $1;\n        });\n        return removeContext(substitued);\n      }\n      return removeContext(getLangData(text));\n    };\n    var isRtl$1 = function () {\n      return getLanguageData().bind(function (items) {\n        return get$9(items, '_dir');\n      }).exists(function (dir) {\n        return dir === 'rtl';\n      });\n    };\n    var hasCode = function (code) {\n      return has$2(data, code);\n    };\n    var I18n = {\n      getData: getData,\n      setCode: setCode,\n      getCode: getCode,\n      add: add$4,\n      translate: translate,\n      isRtl: isRtl$1,\n      hasCode: hasCode\n    };\n\n    var AddOnManager = function () {\n      var items = [];\n      var urls = {};\n      var lookup = {};\n      var _listeners = [];\n      var runListeners = function (name, state) {\n        var matchedListeners = filter$4(_listeners, function (listener) {\n          return listener.name === name && listener.state === state;\n        });\n        each$k(matchedListeners, function (listener) {\n          return listener.callback();\n        });\n      };\n      var get = function (name) {\n        if (lookup[name]) {\n          return lookup[name].instance;\n        }\n        return undefined;\n      };\n      var dependencies = function (name) {\n        var result;\n        if (lookup[name]) {\n          result = lookup[name].dependencies;\n        }\n        return result || [];\n      };\n      var requireLangPack = function (name, languages) {\n        if (AddOnManager.languageLoad !== false) {\n          waitFor(name, function () {\n            var language = I18n.getCode();\n            var wrappedLanguages = ',' + (languages || '') + ',';\n            if (!language || languages && wrappedLanguages.indexOf(',' + language + ',') === -1) {\n              return;\n            }\n            ScriptLoader.ScriptLoader.add(urls[name] + '/langs/' + language + '.js');\n          }, 'loaded');\n        }\n      };\n      var add = function (id, addOn, dependencies) {\n        var addOnConstructor = addOn;\n        items.push(addOnConstructor);\n        lookup[id] = {\n          instance: addOnConstructor,\n          dependencies: dependencies\n        };\n        runListeners(id, 'added');\n        return addOnConstructor;\n      };\n      var remove = function (name) {\n        delete urls[name];\n        delete lookup[name];\n      };\n      var createUrl = function (baseUrl, dep) {\n        if (typeof dep === 'object') {\n          return dep;\n        }\n        return typeof baseUrl === 'string' ? {\n          prefix: '',\n          resource: dep,\n          suffix: ''\n        } : {\n          prefix: baseUrl.prefix,\n          resource: dep,\n          suffix: baseUrl.suffix\n        };\n      };\n      var addComponents = function (pluginName, scripts) {\n        var pluginUrl = urls[pluginName];\n        each$k(scripts, function (script) {\n          ScriptLoader.ScriptLoader.add(pluginUrl + '/' + script);\n        });\n      };\n      var loadDependencies = function (name, addOnUrl, success, scope) {\n        var deps = dependencies(name);\n        each$k(deps, function (dep) {\n          var newUrl = createUrl(addOnUrl, dep);\n          load(newUrl.resource, newUrl, undefined, undefined);\n        });\n        if (success) {\n          if (scope) {\n            success.call(scope);\n          } else {\n            success.call(ScriptLoader);\n          }\n        }\n      };\n      var load = function (name, addOnUrl, success, scope, failure) {\n        if (urls[name]) {\n          return;\n        }\n        var urlString = typeof addOnUrl === 'string' ? addOnUrl : addOnUrl.prefix + addOnUrl.resource + addOnUrl.suffix;\n        if (urlString.indexOf('/') !== 0 && urlString.indexOf('://') === -1) {\n          urlString = AddOnManager.baseURL + '/' + urlString;\n        }\n        urls[name] = urlString.substring(0, urlString.lastIndexOf('/'));\n        var done = function () {\n          runListeners(name, 'loaded');\n          loadDependencies(name, addOnUrl, success, scope);\n        };\n        if (lookup[name]) {\n          done();\n        } else {\n          ScriptLoader.ScriptLoader.add(urlString, done, scope, failure);\n        }\n      };\n      var waitFor = function (name, callback, state) {\n        if (state === void 0) {\n          state = 'added';\n        }\n        if (has$2(lookup, name) && state === 'added') {\n          callback();\n        } else if (has$2(urls, name) && state === 'loaded') {\n          callback();\n        } else {\n          _listeners.push({\n            name: name,\n            state: state,\n            callback: callback\n          });\n        }\n      };\n      return {\n        items: items,\n        urls: urls,\n        lookup: lookup,\n        _listeners: _listeners,\n        get: get,\n        dependencies: dependencies,\n        requireLangPack: requireLangPack,\n        add: add,\n        remove: remove,\n        createUrl: createUrl,\n        addComponents: addComponents,\n        load: load,\n        waitFor: waitFor\n      };\n    };\n    AddOnManager.languageLoad = true;\n    AddOnManager.baseURL = '';\n    AddOnManager.PluginManager = AddOnManager();\n    AddOnManager.ThemeManager = AddOnManager();\n\n    var singleton = function (doRevoke) {\n      var subject = Cell(Optional.none());\n      var revoke = function () {\n        return subject.get().each(doRevoke);\n      };\n      var clear = function () {\n        revoke();\n        subject.set(Optional.none());\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      var get = function () {\n        return subject.get();\n      };\n      var set = function (s) {\n        revoke();\n        subject.set(Optional.some(s));\n      };\n      return {\n        clear: clear,\n        isSet: isSet,\n        get: get,\n        set: set\n      };\n    };\n    var value = function () {\n      var subject = singleton(noop);\n      var on = function (f) {\n        return subject.get().each(f);\n      };\n      return __assign(__assign({}, subject), { on: on });\n    };\n\n    var first = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (!isNull(timer)) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (isNull(timer)) {\n          timer = setTimeout(function () {\n            timer = null;\n            fn.apply(null, args);\n          }, rate);\n        }\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n    var last = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (!isNull(timer)) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        cancel();\n        timer = setTimeout(function () {\n          timer = null;\n          fn.apply(null, args);\n        }, rate);\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n\n    var read$4 = function (element, attr) {\n      var value = get$6(element, attr);\n      return value === undefined || value === '' ? [] : value.split(' ');\n    };\n    var add$3 = function (element, attr, id) {\n      var old = read$4(element, attr);\n      var nu = old.concat([id]);\n      set$1(element, attr, nu.join(' '));\n      return true;\n    };\n    var remove$5 = function (element, attr, id) {\n      var nu = filter$4(read$4(element, attr), function (v) {\n        return v !== id;\n      });\n      if (nu.length > 0) {\n        set$1(element, attr, nu.join(' '));\n      } else {\n        remove$6(element, attr);\n      }\n      return false;\n    };\n\n    var supports = function (element) {\n      return element.dom.classList !== undefined;\n    };\n    var get$4 = function (element) {\n      return read$4(element, 'class');\n    };\n    var add$2 = function (element, clazz) {\n      return add$3(element, 'class', clazz);\n    };\n    var remove$4 = function (element, clazz) {\n      return remove$5(element, 'class', clazz);\n    };\n\n    var add$1 = function (element, clazz) {\n      if (supports(element)) {\n        element.dom.classList.add(clazz);\n      } else {\n        add$2(element, clazz);\n      }\n    };\n    var cleanClass = function (element) {\n      var classList = supports(element) ? element.dom.classList : get$4(element);\n      if (classList.length === 0) {\n        remove$6(element, 'class');\n      }\n    };\n    var remove$3 = function (element, clazz) {\n      if (supports(element)) {\n        var classList = element.dom.classList;\n        classList.remove(clazz);\n      } else {\n        remove$4(element, clazz);\n      }\n      cleanClass(element);\n    };\n    var has = function (element, clazz) {\n      return supports(element) && element.dom.classList.contains(clazz);\n    };\n\n    var descendants$1 = function (scope, predicate) {\n      var result = [];\n      each$k(children(scope), function (x) {\n        if (predicate(x)) {\n          result = result.concat([x]);\n        }\n        result = result.concat(descendants$1(x, predicate));\n      });\n      return result;\n    };\n\n    var descendants = function (scope, selector) {\n      return all(selector, scope);\n    };\n\n    var annotation = constant('mce-annotation');\n    var dataAnnotation = constant('data-mce-annotation');\n    var dataAnnotationId = constant('data-mce-annotation-uid');\n\n    var identify = function (editor, annotationName) {\n      var rng = editor.selection.getRng();\n      var start = SugarElement.fromDom(rng.startContainer);\n      var root = SugarElement.fromDom(editor.getBody());\n      var selector = annotationName.fold(function () {\n        return '.' + annotation();\n      }, function (an) {\n        return '[' + dataAnnotation() + '=\"' + an + '\"]';\n      });\n      var newStart = child$1(start, rng.startOffset).getOr(start);\n      var closest = closest$2(newStart, selector, function (n) {\n        return eq(n, root);\n      });\n      var getAttr = function (c, property) {\n        if (has$1(c, property)) {\n          return Optional.some(get$6(c, property));\n        } else {\n          return Optional.none();\n        }\n      };\n      return closest.bind(function (c) {\n        return getAttr(c, '' + dataAnnotationId()).bind(function (uid) {\n          return getAttr(c, '' + dataAnnotation()).map(function (name) {\n            var elements = findMarkers(editor, uid);\n            return {\n              uid: uid,\n              name: name,\n              elements: elements\n            };\n          });\n        });\n      });\n    };\n    var isAnnotation = function (elem) {\n      return isElement$6(elem) && has(elem, annotation());\n    };\n    var findMarkers = function (editor, uid) {\n      var body = SugarElement.fromDom(editor.getBody());\n      return descendants(body, '[' + dataAnnotationId() + '=\"' + uid + '\"]');\n    };\n    var findAll = function (editor, name) {\n      var body = SugarElement.fromDom(editor.getBody());\n      var markers = descendants(body, '[' + dataAnnotation() + '=\"' + name + '\"]');\n      var directory = {};\n      each$k(markers, function (m) {\n        var uid = get$6(m, dataAnnotationId());\n        var nodesAlready = get$9(directory, uid).getOr([]);\n        directory[uid] = nodesAlready.concat([m]);\n      });\n      return directory;\n    };\n\n    var setup$n = function (editor, _registry) {\n      var changeCallbacks = Cell({});\n      var initData = function () {\n        return {\n          listeners: [],\n          previous: value()\n        };\n      };\n      var withCallbacks = function (name, f) {\n        updateCallbacks(name, function (data) {\n          f(data);\n          return data;\n        });\n      };\n      var updateCallbacks = function (name, f) {\n        var callbackMap = changeCallbacks.get();\n        var data = get$9(callbackMap, name).getOrThunk(initData);\n        var outputData = f(data);\n        callbackMap[name] = outputData;\n        changeCallbacks.set(callbackMap);\n      };\n      var fireCallbacks = function (name, uid, elements) {\n        withCallbacks(name, function (data) {\n          each$k(data.listeners, function (f) {\n            return f(true, name, {\n              uid: uid,\n              nodes: map$3(elements, function (elem) {\n                return elem.dom;\n              })\n            });\n          });\n        });\n      };\n      var fireNoAnnotation = function (name) {\n        withCallbacks(name, function (data) {\n          each$k(data.listeners, function (f) {\n            return f(false, name);\n          });\n        });\n      };\n      var onNodeChange = last(function () {\n        var callbackMap = changeCallbacks.get();\n        var annotations = sort(keys(callbackMap));\n        each$k(annotations, function (name) {\n          updateCallbacks(name, function (data) {\n            var prev = data.previous.get();\n            identify(editor, Optional.some(name)).fold(function () {\n              if (prev.isSome()) {\n                fireNoAnnotation(name);\n                data.previous.clear();\n              }\n            }, function (_a) {\n              var uid = _a.uid, name = _a.name, elements = _a.elements;\n              if (!is$1(prev, uid)) {\n                fireCallbacks(name, uid, elements);\n                data.previous.set(uid);\n              }\n            });\n            return {\n              previous: data.previous,\n              listeners: data.listeners\n            };\n          });\n        });\n      }, 30);\n      editor.on('remove', function () {\n        onNodeChange.cancel();\n      });\n      editor.on('NodeChange', function () {\n        onNodeChange.throttle();\n      });\n      var addListener = function (name, f) {\n        updateCallbacks(name, function (data) {\n          return {\n            previous: data.previous,\n            listeners: data.listeners.concat([f])\n          };\n        });\n      };\n      return { addListener: addListener };\n    };\n\n    var setup$m = function (editor, registry) {\n      var identifyParserNode = function (span) {\n        return Optional.from(span.attr(dataAnnotation())).bind(registry.lookup);\n      };\n      editor.on('init', function () {\n        editor.serializer.addNodeFilter('span', function (spans) {\n          each$k(spans, function (span) {\n            identifyParserNode(span).each(function (settings) {\n              if (settings.persistent === false) {\n                span.unwrap();\n              }\n            });\n          });\n        });\n      });\n    };\n\n    var create$7 = function () {\n      var annotations = {};\n      var register = function (name, settings) {\n        annotations[name] = {\n          name: name,\n          settings: settings\n        };\n      };\n      var lookup = function (name) {\n        return get$9(annotations, name).map(function (a) {\n          return a.settings;\n        });\n      };\n      return {\n        register: register,\n        lookup: lookup\n      };\n    };\n\n    var unique = 0;\n    var generate = function (prefix) {\n      var date = new Date();\n      var time = date.getTime();\n      var random = Math.floor(Math.random() * 1000000000);\n      unique++;\n      return prefix + '_' + random + unique + String(time);\n    };\n\n    var add = function (element, classes) {\n      each$k(classes, function (x) {\n        add$1(element, x);\n      });\n    };\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      return children(SugarElement.fromDom(div));\n    };\n    var fromDom$1 = function (nodes) {\n      return map$3(nodes, SugarElement.fromDom);\n    };\n\n    var get$3 = function (element) {\n      return element.dom.innerHTML;\n    };\n    var set = function (element, content) {\n      var owner = owner$1(element);\n      var docDom = owner.dom;\n      var fragment = SugarElement.fromDom(docDom.createDocumentFragment());\n      var contentElements = fromHtml(content, docDom);\n      append(fragment, contentElements);\n      empty(element);\n      append$1(element, fragment);\n    };\n\n    var clone$1 = function (original, isDeep) {\n      return SugarElement.fromDom(original.dom.cloneNode(isDeep));\n    };\n    var shallow = function (original) {\n      return clone$1(original, false);\n    };\n    var deep$1 = function (original) {\n      return clone$1(original, true);\n    };\n\n    var TextWalker = function (startNode, rootNode, isBoundary) {\n      if (isBoundary === void 0) {\n        isBoundary = never;\n      }\n      var walker = new DomTreeWalker(startNode, rootNode);\n      var walk = function (direction) {\n        var next;\n        do {\n          next = walker[direction]();\n        } while (next && !isText$7(next) && !isBoundary(next));\n        return Optional.from(next).filter(isText$7);\n      };\n      return {\n        current: function () {\n          return Optional.from(walker.current()).filter(isText$7);\n        },\n        next: function () {\n          return walk('next');\n        },\n        prev: function () {\n          return walk('prev');\n        },\n        prev2: function () {\n          return walk('prev2');\n        }\n      };\n    };\n\n    var TextSeeker = function (dom, isBoundary) {\n      var isBlockBoundary = isBoundary ? isBoundary : function (node) {\n        return dom.isBlock(node) || isBr$5(node) || isContentEditableFalse$b(node);\n      };\n      var walk = function (node, offset, walker, process) {\n        if (isText$7(node)) {\n          var newOffset = process(node, offset, node.data);\n          if (newOffset !== -1) {\n            return Optional.some({\n              container: node,\n              offset: newOffset\n            });\n          }\n        }\n        return walker().bind(function (next) {\n          return walk(next.container, next.offset, walker, process);\n        });\n      };\n      var backwards = function (node, offset, process, root) {\n        var walker = TextWalker(node, root, isBlockBoundary);\n        return walk(node, offset, function () {\n          return walker.prev().map(function (prev) {\n            return {\n              container: prev,\n              offset: prev.length\n            };\n          });\n        }, process).getOrNull();\n      };\n      var forwards = function (node, offset, process, root) {\n        var walker = TextWalker(node, root, isBlockBoundary);\n        return walk(node, offset, function () {\n          return walker.next().map(function (next) {\n            return {\n              container: next,\n              offset: 0\n            };\n          });\n        }, process).getOrNull();\n      };\n      return {\n        backwards: backwards,\n        forwards: forwards\n      };\n    };\n\n    var round$2 = Math.round;\n    var clone = function (rect) {\n      if (!rect) {\n        return {\n          left: 0,\n          top: 0,\n          bottom: 0,\n          right: 0,\n          width: 0,\n          height: 0\n        };\n      }\n      return {\n        left: round$2(rect.left),\n        top: round$2(rect.top),\n        bottom: round$2(rect.bottom),\n        right: round$2(rect.right),\n        width: round$2(rect.width),\n        height: round$2(rect.height)\n      };\n    };\n    var collapse = function (rect, toStart) {\n      rect = clone(rect);\n      if (toStart) {\n        rect.right = rect.left;\n      } else {\n        rect.left = rect.left + rect.width;\n        rect.right = rect.left;\n      }\n      rect.width = 0;\n      return rect;\n    };\n    var isEqual = function (rect1, rect2) {\n      return rect1.left === rect2.left && rect1.top === rect2.top && rect1.bottom === rect2.bottom && rect1.right === rect2.right;\n    };\n    var isValidOverflow = function (overflowY, rect1, rect2) {\n      return overflowY >= 0 && overflowY <= Math.min(rect1.height, rect2.height) / 2;\n    };\n    var isAbove$1 = function (rect1, rect2) {\n      var halfHeight = Math.min(rect2.height / 2, rect1.height / 2);\n      if (rect1.bottom - halfHeight < rect2.top) {\n        return true;\n      }\n      if (rect1.top > rect2.bottom) {\n        return false;\n      }\n      return isValidOverflow(rect2.top - rect1.bottom, rect1, rect2);\n    };\n    var isBelow$1 = function (rect1, rect2) {\n      if (rect1.top > rect2.bottom) {\n        return true;\n      }\n      if (rect1.bottom < rect2.top) {\n        return false;\n      }\n      return isValidOverflow(rect2.bottom - rect1.top, rect1, rect2);\n    };\n    var containsXY = function (rect, clientX, clientY) {\n      return clientX >= rect.left && clientX <= rect.right && clientY >= rect.top && clientY <= rect.bottom;\n    };\n\n    var clamp$2 = function (value, min, max) {\n      return Math.min(Math.max(value, min), max);\n    };\n\n    var getSelectedNode = function (range) {\n      var startContainer = range.startContainer, startOffset = range.startOffset;\n      if (startContainer.hasChildNodes() && range.endOffset === startOffset + 1) {\n        return startContainer.childNodes[startOffset];\n      }\n      return null;\n    };\n    var getNode$1 = function (container, offset) {\n      if (isElement$5(container) && container.hasChildNodes()) {\n        var childNodes = container.childNodes;\n        var safeOffset = clamp$2(offset, 0, childNodes.length - 1);\n        return childNodes[safeOffset];\n      } else {\n        return container;\n      }\n    };\n    var getNodeUnsafe = function (container, offset) {\n      if (offset < 0 && isElement$5(container) && container.hasChildNodes()) {\n        return undefined;\n      } else {\n        return getNode$1(container, offset);\n      }\n    };\n\n    var extendingChars = new RegExp('[\\u0300-\\u036f\\u0483-\\u0487\\u0488-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1-\\u05c2\\u05c4-\\u05c5\\u05c7\\u0610-\\u061a' + '\\u064b-\\u065f\\u0670\\u06d6-\\u06dc\\u06df-\\u06e4\\u06e7-\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0' + '\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0859-\\u085b\\u08e3-\\u0902\\u093a\\u093c' + '\\u0941-\\u0948\\u094d\\u0951-\\u0957\\u0962-\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2-\\u09e3' + '\\u0a01-\\u0a02\\u0a3c\\u0a41-\\u0a42\\u0a47-\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70-\\u0a71\\u0a75\\u0a81-\\u0a82\\u0abc' + '\\u0ac1-\\u0ac5\\u0ac7-\\u0ac8\\u0acd\\u0ae2-\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57' + '\\u0b62-\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c00\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55-\\u0c56' + '\\u0c62-\\u0c63\\u0c81\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc-\\u0ccd\\u0cd5-\\u0cd6\\u0ce2-\\u0ce3\\u0d01\\u0d3e\\u0d41-\\u0d44' + '\\u0d4d\\u0d57\\u0d62-\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9' + '\\u0ebb-\\u0ebc\\u0ec8-\\u0ecd\\u0f18-\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97' + '\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039-\\u103a\\u103d-\\u103e\\u1058-\\u1059\\u105e-\\u1060\\u1071-\\u1074' + '\\u1082\\u1085-\\u1086\\u108d\\u109d\\u135d-\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752-\\u1753\\u1772-\\u1773\\u17b4-\\u17b5' + '\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927-\\u1928\\u1932\\u1939-\\u193b\\u1a17-\\u1a18' + '\\u1a1b\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1ab0-\\u1abd\\u1ABE\\u1b00-\\u1b03\\u1b34' + '\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80-\\u1b81\\u1ba2-\\u1ba5\\u1ba8-\\u1ba9\\u1bab-\\u1bad\\u1be6\\u1be8-\\u1be9' + '\\u1bed\\u1bef-\\u1bf1\\u1c2c-\\u1c33\\u1c36-\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1cf4\\u1cf8-\\u1cf9' + '\\u1dc0-\\u1df5\\u1dfc-\\u1dff\\u200c-\\u200d\\u20d0-\\u20dc\\u20DD-\\u20E0\\u20e1\\u20E2-\\u20E4\\u20e5-\\u20f0\\u2cef-\\u2cf1' + '\\u2d7f\\u2de0-\\u2dff\\u302a-\\u302d\\u302e-\\u302f\\u3099-\\u309a\\ua66f\\uA670-\\uA672\\ua674-\\ua67d\\ua69e-\\ua69f\\ua6f0-\\ua6f1' + '\\ua802\\ua806\\ua80b\\ua825-\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc' + '\\ua9e5\\uaa29-\\uaa2e\\uaa31-\\uaa32\\uaa35-\\uaa36\\uaa43\\uaa4c\\uaa7c\\uaab0\\uaab2-\\uaab4\\uaab7-\\uaab8\\uaabe-\\uaabf\\uaac1' + '\\uaaec-\\uaaed\\uaaf6\\uabe5\\uabe8\\uabed\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe2f\\uff9e-\\uff9f]');\n    var isExtendingChar = function (ch) {\n      return typeof ch === 'string' && ch.charCodeAt(0) >= 768 && extendingChars.test(ch);\n    };\n\n    var or = function () {\n      var args = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n      return function (x) {\n        for (var i = 0; i < args.length; i++) {\n          if (args[i](x)) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    var and = function () {\n      var args = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n      return function (x) {\n        for (var i = 0; i < args.length; i++) {\n          if (!args[i](x)) {\n            return false;\n          }\n        }\n        return true;\n      };\n    };\n\n    var isElement$3 = isElement$5;\n    var isCaretCandidate$2 = isCaretCandidate$3;\n    var isBlock$1 = matchStyleValues('display', 'block table');\n    var isFloated = matchStyleValues('float', 'left right');\n    var isValidElementCaretCandidate = and(isElement$3, isCaretCandidate$2, not(isFloated));\n    var isNotPre = not(matchStyleValues('white-space', 'pre pre-line pre-wrap'));\n    var isText$4 = isText$7;\n    var isBr$2 = isBr$5;\n    var nodeIndex$1 = DOMUtils.nodeIndex;\n    var resolveIndex$1 = getNodeUnsafe;\n    var createRange$1 = function (doc) {\n      return 'createRange' in doc ? doc.createRange() : DOMUtils.DOM.createRng();\n    };\n    var isWhiteSpace$1 = function (chr) {\n      return chr && /[\\r\\n\\t ]/.test(chr);\n    };\n    var isRange = function (rng) {\n      return !!rng.setStart && !!rng.setEnd;\n    };\n    var isHiddenWhiteSpaceRange = function (range) {\n      var container = range.startContainer;\n      var offset = range.startOffset;\n      if (isWhiteSpace$1(range.toString()) && isNotPre(container.parentNode) && isText$7(container)) {\n        var text = container.data;\n        if (isWhiteSpace$1(text[offset - 1]) || isWhiteSpace$1(text[offset + 1])) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var getBrClientRect = function (brNode) {\n      var doc = brNode.ownerDocument;\n      var rng = createRange$1(doc);\n      var nbsp$1 = doc.createTextNode(nbsp);\n      var parentNode = brNode.parentNode;\n      parentNode.insertBefore(nbsp$1, brNode);\n      rng.setStart(nbsp$1, 0);\n      rng.setEnd(nbsp$1, 1);\n      var clientRect = clone(rng.getBoundingClientRect());\n      parentNode.removeChild(nbsp$1);\n      return clientRect;\n    };\n    var getBoundingClientRectWebKitText = function (rng) {\n      var sc = rng.startContainer;\n      var ec = rng.endContainer;\n      var so = rng.startOffset;\n      var eo = rng.endOffset;\n      if (sc === ec && isText$7(ec) && so === 0 && eo === 1) {\n        var newRng = rng.cloneRange();\n        newRng.setEndAfter(ec);\n        return getBoundingClientRect$1(newRng);\n      } else {\n        return null;\n      }\n    };\n    var isZeroRect = function (r) {\n      return r.left === 0 && r.right === 0 && r.top === 0 && r.bottom === 0;\n    };\n    var getBoundingClientRect$1 = function (item) {\n      var clientRect;\n      var clientRects = item.getClientRects();\n      if (clientRects.length > 0) {\n        clientRect = clone(clientRects[0]);\n      } else {\n        clientRect = clone(item.getBoundingClientRect());\n      }\n      if (!isRange(item) && isBr$2(item) && isZeroRect(clientRect)) {\n        return getBrClientRect(item);\n      }\n      if (isZeroRect(clientRect) && isRange(item)) {\n        return getBoundingClientRectWebKitText(item);\n      }\n      return clientRect;\n    };\n    var collapseAndInflateWidth = function (clientRect, toStart) {\n      var newClientRect = collapse(clientRect, toStart);\n      newClientRect.width = 1;\n      newClientRect.right = newClientRect.left + 1;\n      return newClientRect;\n    };\n    var getCaretPositionClientRects = function (caretPosition) {\n      var clientRects = [];\n      var addUniqueAndValidRect = function (clientRect) {\n        if (clientRect.height === 0) {\n          return;\n        }\n        if (clientRects.length > 0) {\n          if (isEqual(clientRect, clientRects[clientRects.length - 1])) {\n            return;\n          }\n        }\n        clientRects.push(clientRect);\n      };\n      var addCharacterOffset = function (container, offset) {\n        var range = createRange$1(container.ownerDocument);\n        if (offset < container.data.length) {\n          if (isExtendingChar(container.data[offset])) {\n            return clientRects;\n          }\n          if (isExtendingChar(container.data[offset - 1])) {\n            range.setStart(container, offset);\n            range.setEnd(container, offset + 1);\n            if (!isHiddenWhiteSpaceRange(range)) {\n              addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(range), false));\n              return clientRects;\n            }\n          }\n        }\n        if (offset > 0) {\n          range.setStart(container, offset - 1);\n          range.setEnd(container, offset);\n          if (!isHiddenWhiteSpaceRange(range)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(range), false));\n          }\n        }\n        if (offset < container.data.length) {\n          range.setStart(container, offset);\n          range.setEnd(container, offset + 1);\n          if (!isHiddenWhiteSpaceRange(range)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(range), true));\n          }\n        }\n      };\n      var container = caretPosition.container();\n      var offset = caretPosition.offset();\n      if (isText$4(container)) {\n        addCharacterOffset(container, offset);\n        return clientRects;\n      }\n      if (isElement$3(container)) {\n        if (caretPosition.isAtEnd()) {\n          var node = resolveIndex$1(container, offset);\n          if (isText$4(node)) {\n            addCharacterOffset(node, node.data.length);\n          }\n          if (isValidElementCaretCandidate(node) && !isBr$2(node)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(node), false));\n          }\n        } else {\n          var node = resolveIndex$1(container, offset);\n          if (isText$4(node)) {\n            addCharacterOffset(node, 0);\n          }\n          if (isValidElementCaretCandidate(node) && caretPosition.isAtEnd()) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(node), false));\n            return clientRects;\n          }\n          var beforeNode = resolveIndex$1(caretPosition.container(), caretPosition.offset() - 1);\n          if (isValidElementCaretCandidate(beforeNode) && !isBr$2(beforeNode)) {\n            if (isBlock$1(beforeNode) || isBlock$1(node) || !isValidElementCaretCandidate(node)) {\n              addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(beforeNode), false));\n            }\n          }\n          if (isValidElementCaretCandidate(node)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(node), true));\n          }\n        }\n      }\n      return clientRects;\n    };\n    var CaretPosition = function (container, offset, clientRects) {\n      var isAtStart = function () {\n        if (isText$4(container)) {\n          return offset === 0;\n        }\n        return offset === 0;\n      };\n      var isAtEnd = function () {\n        if (isText$4(container)) {\n          return offset >= container.data.length;\n        }\n        return offset >= container.childNodes.length;\n      };\n      var toRange = function () {\n        var range = createRange$1(container.ownerDocument);\n        range.setStart(container, offset);\n        range.setEnd(container, offset);\n        return range;\n      };\n      var getClientRects = function () {\n        if (!clientRects) {\n          clientRects = getCaretPositionClientRects(CaretPosition(container, offset));\n        }\n        return clientRects;\n      };\n      var isVisible = function () {\n        return getClientRects().length > 0;\n      };\n      var isEqual = function (caretPosition) {\n        return caretPosition && container === caretPosition.container() && offset === caretPosition.offset();\n      };\n      var getNode = function (before) {\n        return resolveIndex$1(container, before ? offset - 1 : offset);\n      };\n      return {\n        container: constant(container),\n        offset: constant(offset),\n        toRange: toRange,\n        getClientRects: getClientRects,\n        isVisible: isVisible,\n        isAtStart: isAtStart,\n        isAtEnd: isAtEnd,\n        isEqual: isEqual,\n        getNode: getNode\n      };\n    };\n    CaretPosition.fromRangeStart = function (range) {\n      return CaretPosition(range.startContainer, range.startOffset);\n    };\n    CaretPosition.fromRangeEnd = function (range) {\n      return CaretPosition(range.endContainer, range.endOffset);\n    };\n    CaretPosition.after = function (node) {\n      return CaretPosition(node.parentNode, nodeIndex$1(node) + 1);\n    };\n    CaretPosition.before = function (node) {\n      return CaretPosition(node.parentNode, nodeIndex$1(node));\n    };\n    CaretPosition.isAbove = function (pos1, pos2) {\n      return lift2(head(pos2.getClientRects()), last$2(pos1.getClientRects()), isAbove$1).getOr(false);\n    };\n    CaretPosition.isBelow = function (pos1, pos2) {\n      return lift2(last$2(pos2.getClientRects()), head(pos1.getClientRects()), isBelow$1).getOr(false);\n    };\n    CaretPosition.isAtStart = function (pos) {\n      return pos ? pos.isAtStart() : false;\n    };\n    CaretPosition.isAtEnd = function (pos) {\n      return pos ? pos.isAtEnd() : false;\n    };\n    CaretPosition.isTextPosition = function (pos) {\n      return pos ? isText$7(pos.container()) : false;\n    };\n    CaretPosition.isElementPosition = function (pos) {\n      return CaretPosition.isTextPosition(pos) === false;\n    };\n\n    var trimEmptyTextNode$1 = function (dom, node) {\n      if (isText$7(node) && node.data.length === 0) {\n        dom.remove(node);\n      }\n    };\n    var insertNode = function (dom, rng, node) {\n      rng.insertNode(node);\n      trimEmptyTextNode$1(dom, node.previousSibling);\n      trimEmptyTextNode$1(dom, node.nextSibling);\n    };\n    var insertFragment = function (dom, rng, frag) {\n      var firstChild = Optional.from(frag.firstChild);\n      var lastChild = Optional.from(frag.lastChild);\n      rng.insertNode(frag);\n      firstChild.each(function (child) {\n        return trimEmptyTextNode$1(dom, child.previousSibling);\n      });\n      lastChild.each(function (child) {\n        return trimEmptyTextNode$1(dom, child.nextSibling);\n      });\n    };\n    var rangeInsertNode = function (dom, rng, node) {\n      if (isDocumentFragment(node)) {\n        insertFragment(dom, rng, node);\n      } else {\n        insertNode(dom, rng, node);\n      }\n    };\n\n    var isText$3 = isText$7;\n    var isBogus = isBogus$2;\n    var nodeIndex = DOMUtils.nodeIndex;\n    var normalizedParent = function (node) {\n      var parentNode = node.parentNode;\n      if (isBogus(parentNode)) {\n        return normalizedParent(parentNode);\n      }\n      return parentNode;\n    };\n    var getChildNodes = function (node) {\n      if (!node) {\n        return [];\n      }\n      return reduce(node.childNodes, function (result, node) {\n        if (isBogus(node) && node.nodeName !== 'BR') {\n          result = result.concat(getChildNodes(node));\n        } else {\n          result.push(node);\n        }\n        return result;\n      }, []);\n    };\n    var normalizedTextOffset = function (node, offset) {\n      while (node = node.previousSibling) {\n        if (!isText$3(node)) {\n          break;\n        }\n        offset += node.data.length;\n      }\n      return offset;\n    };\n    var equal = function (a) {\n      return function (b) {\n        return a === b;\n      };\n    };\n    var normalizedNodeIndex = function (node) {\n      var nodes, index;\n      nodes = getChildNodes(normalizedParent(node));\n      index = findIndex$1(nodes, equal(node), node);\n      nodes = nodes.slice(0, index + 1);\n      var numTextFragments = reduce(nodes, function (result, node, i) {\n        if (isText$3(node) && isText$3(nodes[i - 1])) {\n          result++;\n        }\n        return result;\n      }, 0);\n      nodes = filter$2(nodes, matchNodeNames([node.nodeName]));\n      index = findIndex$1(nodes, equal(node), node);\n      return index - numTextFragments;\n    };\n    var createPathItem = function (node) {\n      var name;\n      if (isText$3(node)) {\n        name = 'text()';\n      } else {\n        name = node.nodeName.toLowerCase();\n      }\n      return name + '[' + normalizedNodeIndex(node) + ']';\n    };\n    var parentsUntil$1 = function (root, node, predicate) {\n      var parents = [];\n      for (node = node.parentNode; node !== root; node = node.parentNode) {\n        if (predicate && predicate(node)) {\n          break;\n        }\n        parents.push(node);\n      }\n      return parents;\n    };\n    var create$6 = function (root, caretPosition) {\n      var container, offset, path = [], outputOffset, childNodes, parents;\n      container = caretPosition.container();\n      offset = caretPosition.offset();\n      if (isText$3(container)) {\n        outputOffset = normalizedTextOffset(container, offset);\n      } else {\n        childNodes = container.childNodes;\n        if (offset >= childNodes.length) {\n          outputOffset = 'after';\n          offset = childNodes.length - 1;\n        } else {\n          outputOffset = 'before';\n        }\n        container = childNodes[offset];\n      }\n      path.push(createPathItem(container));\n      parents = parentsUntil$1(root, container);\n      parents = filter$2(parents, not(isBogus$2));\n      path = path.concat(map$1(parents, function (node) {\n        return createPathItem(node);\n      }));\n      return path.reverse().join('/') + ',' + outputOffset;\n    };\n    var resolvePathItem = function (node, name, index) {\n      var nodes = getChildNodes(node);\n      nodes = filter$2(nodes, function (node, index) {\n        return !isText$3(node) || !isText$3(nodes[index - 1]);\n      });\n      nodes = filter$2(nodes, matchNodeNames([name]));\n      return nodes[index];\n    };\n    var findTextPosition = function (container, offset) {\n      var node = container, targetOffset = 0, dataLen;\n      while (isText$3(node)) {\n        dataLen = node.data.length;\n        if (offset >= targetOffset && offset <= targetOffset + dataLen) {\n          container = node;\n          offset = offset - targetOffset;\n          break;\n        }\n        if (!isText$3(node.nextSibling)) {\n          container = node;\n          offset = dataLen;\n          break;\n        }\n        targetOffset += dataLen;\n        node = node.nextSibling;\n      }\n      if (isText$3(container) && offset > container.data.length) {\n        offset = container.data.length;\n      }\n      return CaretPosition(container, offset);\n    };\n    var resolve$2 = function (root, path) {\n      var offset;\n      if (!path) {\n        return null;\n      }\n      var parts = path.split(',');\n      var paths = parts[0].split('/');\n      offset = parts.length > 1 ? parts[1] : 'before';\n      var container = reduce(paths, function (result, value) {\n        var match = /([\\w\\-\\(\\)]+)\\[([0-9]+)\\]/.exec(value);\n        if (!match) {\n          return null;\n        }\n        if (match[1] === 'text()') {\n          match[1] = '#text';\n        }\n        return resolvePathItem(result, match[1], parseInt(match[2], 10));\n      }, root);\n      if (!container) {\n        return null;\n      }\n      if (!isText$3(container)) {\n        if (offset === 'after') {\n          offset = nodeIndex(container) + 1;\n        } else {\n          offset = nodeIndex(container);\n        }\n        return CaretPosition(container.parentNode, offset);\n      }\n      return findTextPosition(container, parseInt(offset, 10));\n    };\n\n    var isContentEditableFalse$9 = isContentEditableFalse$b;\n    var getNormalizedTextOffset = function (trim, container, offset) {\n      var node, trimmedOffset;\n      trimmedOffset = trim(container.data.slice(0, offset)).length;\n      for (node = container.previousSibling; node && isText$7(node); node = node.previousSibling) {\n        trimmedOffset += trim(node.data).length;\n      }\n      return trimmedOffset;\n    };\n    var getPoint = function (dom, trim, normalized, rng, start) {\n      var container = rng[start ? 'startContainer' : 'endContainer'];\n      var offset = rng[start ? 'startOffset' : 'endOffset'];\n      var point = [];\n      var childNodes, after = 0;\n      var root = dom.getRoot();\n      if (isText$7(container)) {\n        point.push(normalized ? getNormalizedTextOffset(trim, container, offset) : offset);\n      } else {\n        childNodes = container.childNodes;\n        if (offset >= childNodes.length && childNodes.length) {\n          after = 1;\n          offset = Math.max(0, childNodes.length - 1);\n        }\n        point.push(dom.nodeIndex(childNodes[offset], normalized) + after);\n      }\n      for (; container && container !== root; container = container.parentNode) {\n        point.push(dom.nodeIndex(container, normalized));\n      }\n      return point;\n    };\n    var getLocation = function (trim, selection, normalized, rng) {\n      var dom = selection.dom, bookmark = {};\n      bookmark.start = getPoint(dom, trim, normalized, rng, true);\n      if (!selection.isCollapsed()) {\n        bookmark.end = getPoint(dom, trim, normalized, rng, false);\n      }\n      if (isRangeInCaretContainerBlock(rng)) {\n        bookmark.isFakeCaret = true;\n      }\n      return bookmark;\n    };\n    var findIndex = function (dom, name, element) {\n      var count = 0;\n      Tools.each(dom.select(name), function (node) {\n        if (node.getAttribute('data-mce-bogus') === 'all') {\n          return;\n        }\n        if (node === element) {\n          return false;\n        }\n        count++;\n      });\n      return count;\n    };\n    var moveEndPoint$1 = function (rng, start) {\n      var container, offset, childNodes;\n      var prefix = start ? 'start' : 'end';\n      container = rng[prefix + 'Container'];\n      offset = rng[prefix + 'Offset'];\n      if (isElement$5(container) && container.nodeName === 'TR') {\n        childNodes = container.childNodes;\n        container = childNodes[Math.min(start ? offset : offset - 1, childNodes.length - 1)];\n        if (container) {\n          offset = start ? 0 : container.childNodes.length;\n          rng['set' + (start ? 'Start' : 'End')](container, offset);\n        }\n      }\n    };\n    var normalizeTableCellSelection = function (rng) {\n      moveEndPoint$1(rng, true);\n      moveEndPoint$1(rng, false);\n      return rng;\n    };\n    var findSibling = function (node, offset) {\n      var sibling;\n      if (isElement$5(node)) {\n        node = getNode$1(node, offset);\n        if (isContentEditableFalse$9(node)) {\n          return node;\n        }\n      }\n      if (isCaretContainer$2(node)) {\n        if (isText$7(node) && isCaretContainerBlock$1(node)) {\n          node = node.parentNode;\n        }\n        sibling = node.previousSibling;\n        if (isContentEditableFalse$9(sibling)) {\n          return sibling;\n        }\n        sibling = node.nextSibling;\n        if (isContentEditableFalse$9(sibling)) {\n          return sibling;\n        }\n      }\n    };\n    var findAdjacentContentEditableFalseElm = function (rng) {\n      return findSibling(rng.startContainer, rng.startOffset) || findSibling(rng.endContainer, rng.endOffset);\n    };\n    var getOffsetBookmark = function (trim, normalized, selection) {\n      var element = selection.getNode();\n      var name = element ? element.nodeName : null;\n      var rng = selection.getRng();\n      if (isContentEditableFalse$9(element) || name === 'IMG') {\n        return {\n          name: name,\n          index: findIndex(selection.dom, name, element)\n        };\n      }\n      var sibling = findAdjacentContentEditableFalseElm(rng);\n      if (sibling) {\n        name = sibling.tagName;\n        return {\n          name: name,\n          index: findIndex(selection.dom, name, sibling)\n        };\n      }\n      return getLocation(trim, selection, normalized, rng);\n    };\n    var getCaretBookmark = function (selection) {\n      var rng = selection.getRng();\n      return {\n        start: create$6(selection.dom.getRoot(), CaretPosition.fromRangeStart(rng)),\n        end: create$6(selection.dom.getRoot(), CaretPosition.fromRangeEnd(rng))\n      };\n    };\n    var getRangeBookmark = function (selection) {\n      return { rng: selection.getRng() };\n    };\n    var createBookmarkSpan = function (dom, id, filled) {\n      var args = {\n        'data-mce-type': 'bookmark',\n        id: id,\n        'style': 'overflow:hidden;line-height:0px'\n      };\n      return filled ? dom.create('span', args, '&#xFEFF;') : dom.create('span', args);\n    };\n    var getPersistentBookmark = function (selection, filled) {\n      var dom = selection.dom;\n      var rng = selection.getRng();\n      var id = dom.uniqueId();\n      var collapsed = selection.isCollapsed();\n      var element = selection.getNode();\n      var name = element.nodeName;\n      if (name === 'IMG') {\n        return {\n          name: name,\n          index: findIndex(dom, name, element)\n        };\n      }\n      var rng2 = normalizeTableCellSelection(rng.cloneRange());\n      if (!collapsed) {\n        rng2.collapse(false);\n        var endBookmarkNode = createBookmarkSpan(dom, id + '_end', filled);\n        rangeInsertNode(dom, rng2, endBookmarkNode);\n      }\n      rng = normalizeTableCellSelection(rng);\n      rng.collapse(true);\n      var startBookmarkNode = createBookmarkSpan(dom, id + '_start', filled);\n      rangeInsertNode(dom, rng, startBookmarkNode);\n      selection.moveToBookmark({\n        id: id,\n        keep: true\n      });\n      return { id: id };\n    };\n    var getBookmark$2 = function (selection, type, normalized) {\n      if (type === 2) {\n        return getOffsetBookmark(trim$3, normalized, selection);\n      } else if (type === 3) {\n        return getCaretBookmark(selection);\n      } else if (type) {\n        return getRangeBookmark(selection);\n      } else {\n        return getPersistentBookmark(selection, false);\n      }\n    };\n    var getUndoBookmark = curry(getOffsetBookmark, identity, true);\n\n    var DOM$9 = DOMUtils.DOM;\n    var defaultPreviewStyles = 'font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow';\n    var getBodySetting = function (editor, name, defaultValue) {\n      var value = editor.getParam(name, defaultValue);\n      if (value.indexOf('=') !== -1) {\n        var bodyObj = editor.getParam(name, '', 'hash');\n        return get$9(bodyObj, editor.id).getOr(defaultValue);\n      } else {\n        return value;\n      }\n    };\n    var getIframeAttrs = function (editor) {\n      return editor.getParam('iframe_attrs', {});\n    };\n    var getDocType = function (editor) {\n      return editor.getParam('doctype', '<!DOCTYPE html>');\n    };\n    var getDocumentBaseUrl = function (editor) {\n      return editor.getParam('document_base_url', '');\n    };\n    var getBodyId = function (editor) {\n      return getBodySetting(editor, 'body_id', 'tinymce');\n    };\n    var getBodyClass = function (editor) {\n      return getBodySetting(editor, 'body_class', '');\n    };\n    var getContentSecurityPolicy = function (editor) {\n      return editor.getParam('content_security_policy', '');\n    };\n    var shouldPutBrInPre$1 = function (editor) {\n      return editor.getParam('br_in_pre', true);\n    };\n    var getForcedRootBlock = function (editor) {\n      if (editor.getParam('force_p_newlines', false)) {\n        return 'p';\n      }\n      var block = editor.getParam('forced_root_block', 'p');\n      if (block === false) {\n        return '';\n      } else if (block === true) {\n        return 'p';\n      } else {\n        return block;\n      }\n    };\n    var getForcedRootBlockAttrs = function (editor) {\n      return editor.getParam('forced_root_block_attrs', {});\n    };\n    var getBrNewLineSelector = function (editor) {\n      return editor.getParam('br_newline_selector', '.mce-toc h2,figcaption,caption');\n    };\n    var getNoNewLineSelector = function (editor) {\n      return editor.getParam('no_newline_selector', '');\n    };\n    var shouldKeepStyles = function (editor) {\n      return editor.getParam('keep_styles', true);\n    };\n    var shouldEndContainerOnEmptyBlock = function (editor) {\n      return editor.getParam('end_container_on_empty_block', false);\n    };\n    var getFontStyleValues = function (editor) {\n      return Tools.explode(editor.getParam('font_size_style_values', 'xx-small,x-small,small,medium,large,x-large,xx-large'));\n    };\n    var getFontSizeClasses = function (editor) {\n      return Tools.explode(editor.getParam('font_size_classes', ''));\n    };\n    var getImagesDataImgFilter = function (editor) {\n      return editor.getParam('images_dataimg_filter', always, 'function');\n    };\n    var isAutomaticUploadsEnabled = function (editor) {\n      return editor.getParam('automatic_uploads', true, 'boolean');\n    };\n    var shouldReuseFileName = function (editor) {\n      return editor.getParam('images_reuse_filename', false, 'boolean');\n    };\n    var shouldReplaceBlobUris = function (editor) {\n      return editor.getParam('images_replace_blob_uris', true, 'boolean');\n    };\n    var getIconPackName = function (editor) {\n      return editor.getParam('icons', '', 'string');\n    };\n    var getIconsUrl = function (editor) {\n      return editor.getParam('icons_url', '', 'string');\n    };\n    var getImageUploadUrl = function (editor) {\n      return editor.getParam('images_upload_url', '', 'string');\n    };\n    var getImageUploadBasePath = function (editor) {\n      return editor.getParam('images_upload_base_path', '', 'string');\n    };\n    var getImagesUploadCredentials = function (editor) {\n      return editor.getParam('images_upload_credentials', false, 'boolean');\n    };\n    var getImagesUploadHandler = function (editor) {\n      return editor.getParam('images_upload_handler', null, 'function');\n    };\n    var shouldUseContentCssCors = function (editor) {\n      return editor.getParam('content_css_cors', false, 'boolean');\n    };\n    var getReferrerPolicy = function (editor) {\n      return editor.getParam('referrer_policy', '', 'string');\n    };\n    var getLanguageCode = function (editor) {\n      return editor.getParam('language', 'en', 'string');\n    };\n    var getLanguageUrl = function (editor) {\n      return editor.getParam('language_url', '', 'string');\n    };\n    var shouldIndentUseMargin = function (editor) {\n      return editor.getParam('indent_use_margin', false);\n    };\n    var getIndentation = function (editor) {\n      return editor.getParam('indentation', '40px', 'string');\n    };\n    var getContentCss = function (editor) {\n      var contentCss = editor.getParam('content_css');\n      if (isString$1(contentCss)) {\n        return map$3(contentCss.split(','), trim$5);\n      } else if (isArray$1(contentCss)) {\n        return contentCss;\n      } else if (contentCss === false || editor.inline) {\n        return [];\n      } else {\n        return ['default'];\n      }\n    };\n    var getFontCss = function (editor) {\n      var fontCss = editor.getParam('font_css', []);\n      return isArray$1(fontCss) ? fontCss : map$3(fontCss.split(','), trim$5);\n    };\n    var getDirectionality = function (editor) {\n      return editor.getParam('directionality', I18n.isRtl() ? 'rtl' : undefined);\n    };\n    var getInlineBoundarySelector = function (editor) {\n      return editor.getParam('inline_boundaries_selector', 'a[href],code,.mce-annotation', 'string');\n    };\n    var getObjectResizing = function (editor) {\n      var selector = editor.getParam('object_resizing');\n      if (selector === false || Env.iOS) {\n        return false;\n      } else {\n        return isString$1(selector) ? selector : 'table,img,figure.image,div,video,iframe';\n      }\n    };\n    var getResizeImgProportional = function (editor) {\n      return editor.getParam('resize_img_proportional', true, 'boolean');\n    };\n    var getPlaceholder = function (editor) {\n      return editor.getParam('placeholder', DOM$9.getAttrib(editor.getElement(), 'placeholder'), 'string');\n    };\n    var getEventRoot = function (editor) {\n      return editor.getParam('event_root');\n    };\n    var getServiceMessage = function (editor) {\n      return editor.getParam('service_message');\n    };\n    var getTheme = function (editor) {\n      return editor.getParam('theme');\n    };\n    var shouldValidate = function (editor) {\n      return editor.getParam('validate');\n    };\n    var isInlineBoundariesEnabled = function (editor) {\n      return editor.getParam('inline_boundaries') !== false;\n    };\n    var getFormats = function (editor) {\n      return editor.getParam('formats');\n    };\n    var getPreviewStyles = function (editor) {\n      var style = editor.getParam('preview_styles', defaultPreviewStyles);\n      if (isString$1(style)) {\n        return style;\n      } else {\n        return '';\n      }\n    };\n    var canFormatEmptyLines = function (editor) {\n      return editor.getParam('format_empty_lines', false, 'boolean');\n    };\n    var getCustomUiSelector = function (editor) {\n      return editor.getParam('custom_ui_selector', '', 'string');\n    };\n    var getThemeUrl = function (editor) {\n      return editor.getParam('theme_url');\n    };\n    var isInline = function (editor) {\n      return editor.getParam('inline');\n    };\n    var hasHiddenInput = function (editor) {\n      return editor.getParam('hidden_input');\n    };\n    var shouldPatchSubmit = function (editor) {\n      return editor.getParam('submit_patch');\n    };\n    var isEncodingXml = function (editor) {\n      return editor.getParam('encoding') === 'xml';\n    };\n    var shouldAddFormSubmitTrigger = function (editor) {\n      return editor.getParam('add_form_submit_trigger');\n    };\n    var shouldAddUnloadTrigger = function (editor) {\n      return editor.getParam('add_unload_trigger');\n    };\n    var hasForcedRootBlock = function (editor) {\n      return getForcedRootBlock(editor) !== '';\n    };\n    var getCustomUndoRedoLevels = function (editor) {\n      return editor.getParam('custom_undo_redo_levels', 0, 'number');\n    };\n    var shouldDisableNodeChange = function (editor) {\n      return editor.getParam('disable_nodechange');\n    };\n    var isReadOnly$1 = function (editor) {\n      return editor.getParam('readonly');\n    };\n    var hasContentCssCors = function (editor) {\n      return editor.getParam('content_css_cors');\n    };\n    var getPlugins = function (editor) {\n      return editor.getParam('plugins', '', 'string');\n    };\n    var getExternalPlugins$1 = function (editor) {\n      return editor.getParam('external_plugins');\n    };\n    var shouldBlockUnsupportedDrop = function (editor) {\n      return editor.getParam('block_unsupported_drop', true, 'boolean');\n    };\n    var isVisualAidsEnabled = function (editor) {\n      return editor.getParam('visual', true, 'boolean');\n    };\n    var getVisualAidsTableClass = function (editor) {\n      return editor.getParam('visual_table_class', 'mce-item-table', 'string');\n    };\n    var getVisualAidsAnchorClass = function (editor) {\n      return editor.getParam('visual_anchor_class', 'mce-item-anchor', 'string');\n    };\n    var getIframeAriaText = function (editor) {\n      return editor.getParam('iframe_aria_text', 'Rich Text Area. Press ALT-0 for help.', 'string');\n    };\n\n    var isElement$2 = isElement$5;\n    var isText$2 = isText$7;\n    var removeNode$1 = function (node) {\n      var parentNode = node.parentNode;\n      if (parentNode) {\n        parentNode.removeChild(node);\n      }\n    };\n    var trimCount = function (text) {\n      var trimmedText = trim$3(text);\n      return {\n        count: text.length - trimmedText.length,\n        text: trimmedText\n      };\n    };\n    var deleteZwspChars = function (caretContainer) {\n      var idx;\n      while ((idx = caretContainer.data.lastIndexOf(ZWSP$1)) !== -1) {\n        caretContainer.deleteData(idx, 1);\n      }\n    };\n    var removeUnchanged = function (caretContainer, pos) {\n      remove$2(caretContainer);\n      return pos;\n    };\n    var removeTextAndReposition = function (caretContainer, pos) {\n      var before = trimCount(caretContainer.data.substr(0, pos.offset()));\n      var after = trimCount(caretContainer.data.substr(pos.offset()));\n      var text = before.text + after.text;\n      if (text.length > 0) {\n        deleteZwspChars(caretContainer);\n        return CaretPosition(caretContainer, pos.offset() - before.count);\n      } else {\n        return pos;\n      }\n    };\n    var removeElementAndReposition = function (caretContainer, pos) {\n      var parentNode = pos.container();\n      var newPosition = indexOf$2(from(parentNode.childNodes), caretContainer).map(function (index) {\n        return index < pos.offset() ? CaretPosition(parentNode, pos.offset() - 1) : pos;\n      }).getOr(pos);\n      remove$2(caretContainer);\n      return newPosition;\n    };\n    var removeTextCaretContainer = function (caretContainer, pos) {\n      return isText$2(caretContainer) && pos.container() === caretContainer ? removeTextAndReposition(caretContainer, pos) : removeUnchanged(caretContainer, pos);\n    };\n    var removeElementCaretContainer = function (caretContainer, pos) {\n      return pos.container() === caretContainer.parentNode ? removeElementAndReposition(caretContainer, pos) : removeUnchanged(caretContainer, pos);\n    };\n    var removeAndReposition = function (container, pos) {\n      return CaretPosition.isTextPosition(pos) ? removeTextCaretContainer(container, pos) : removeElementCaretContainer(container, pos);\n    };\n    var remove$2 = function (caretContainerNode) {\n      if (isElement$2(caretContainerNode) && isCaretContainer$2(caretContainerNode)) {\n        if (hasContent(caretContainerNode)) {\n          caretContainerNode.removeAttribute('data-mce-caret');\n        } else {\n          removeNode$1(caretContainerNode);\n        }\n      }\n      if (isText$2(caretContainerNode)) {\n        deleteZwspChars(caretContainerNode);\n        if (caretContainerNode.data.length === 0) {\n          removeNode$1(caretContainerNode);\n        }\n      }\n    };\n\n    var browser$2 = detect().browser;\n    var isContentEditableFalse$8 = isContentEditableFalse$b;\n    var isMedia$1 = isMedia$2;\n    var isTableCell$3 = isTableCell$5;\n    var inlineFakeCaretSelector = '*[contentEditable=false],video,audio,embed,object';\n    var getAbsoluteClientRect = function (root, element, before) {\n      var clientRect = collapse(element.getBoundingClientRect(), before);\n      var scrollX;\n      var scrollY;\n      if (root.tagName === 'BODY') {\n        var docElm = root.ownerDocument.documentElement;\n        scrollX = root.scrollLeft || docElm.scrollLeft;\n        scrollY = root.scrollTop || docElm.scrollTop;\n      } else {\n        var rootRect = root.getBoundingClientRect();\n        scrollX = root.scrollLeft - rootRect.left;\n        scrollY = root.scrollTop - rootRect.top;\n      }\n      clientRect.left += scrollX;\n      clientRect.right += scrollX;\n      clientRect.top += scrollY;\n      clientRect.bottom += scrollY;\n      clientRect.width = 1;\n      var margin = element.offsetWidth - element.clientWidth;\n      if (margin > 0) {\n        if (before) {\n          margin *= -1;\n        }\n        clientRect.left += margin;\n        clientRect.right += margin;\n      }\n      return clientRect;\n    };\n    var trimInlineCaretContainers = function (root) {\n      var fakeCaretTargetNodes = descendants(SugarElement.fromDom(root), inlineFakeCaretSelector);\n      for (var i = 0; i < fakeCaretTargetNodes.length; i++) {\n        var node = fakeCaretTargetNodes[i].dom;\n        var sibling = node.previousSibling;\n        if (endsWithCaretContainer$1(sibling)) {\n          var data = sibling.data;\n          if (data.length === 1) {\n            sibling.parentNode.removeChild(sibling);\n          } else {\n            sibling.deleteData(data.length - 1, 1);\n          }\n        }\n        sibling = node.nextSibling;\n        if (startsWithCaretContainer$1(sibling)) {\n          var data = sibling.data;\n          if (data.length === 1) {\n            sibling.parentNode.removeChild(sibling);\n          } else {\n            sibling.deleteData(0, 1);\n          }\n        }\n      }\n    };\n    var FakeCaret = function (editor, root, isBlock, hasFocus) {\n      var lastVisualCaret = value();\n      var cursorInterval;\n      var caretContainerNode;\n      var rootBlock = getForcedRootBlock(editor);\n      var caretBlock = rootBlock.length > 0 ? rootBlock : 'p';\n      var show = function (before, element) {\n        var rng;\n        hide();\n        if (isTableCell$3(element)) {\n          return null;\n        }\n        if (isBlock(element)) {\n          caretContainerNode = insertBlock$1(caretBlock, element, before);\n          var clientRect = getAbsoluteClientRect(root, element, before);\n          DomQuery(caretContainerNode).css('top', clientRect.top);\n          var caret = DomQuery('<div class=\"mce-visual-caret\" data-mce-bogus=\"all\"></div>').css(__assign({}, clientRect)).appendTo(root)[0];\n          lastVisualCaret.set({\n            caret: caret,\n            element: element,\n            before: before\n          });\n          if (before) {\n            DomQuery(caret).addClass('mce-visual-caret-before');\n          }\n          startBlink();\n          rng = element.ownerDocument.createRange();\n          rng.setStart(caretContainerNode, 0);\n          rng.setEnd(caretContainerNode, 0);\n        } else {\n          caretContainerNode = insertInline$1(element, before);\n          rng = element.ownerDocument.createRange();\n          if (isInlineFakeCaretTarget(caretContainerNode.nextSibling)) {\n            rng.setStart(caretContainerNode, 0);\n            rng.setEnd(caretContainerNode, 0);\n          } else {\n            rng.setStart(caretContainerNode, 1);\n            rng.setEnd(caretContainerNode, 1);\n          }\n          return rng;\n        }\n        return rng;\n      };\n      var hide = function () {\n        trimInlineCaretContainers(root);\n        if (caretContainerNode) {\n          remove$2(caretContainerNode);\n          caretContainerNode = null;\n        }\n        lastVisualCaret.on(function (caretState) {\n          DomQuery(caretState.caret).remove();\n          lastVisualCaret.clear();\n        });\n        if (cursorInterval) {\n          Delay.clearInterval(cursorInterval);\n          cursorInterval = undefined;\n        }\n      };\n      var startBlink = function () {\n        cursorInterval = Delay.setInterval(function () {\n          if (hasFocus()) {\n            DomQuery('div.mce-visual-caret', root).toggleClass('mce-visual-caret-hidden');\n          } else {\n            DomQuery('div.mce-visual-caret', root).addClass('mce-visual-caret-hidden');\n          }\n        }, 500);\n      };\n      var reposition = function () {\n        lastVisualCaret.on(function (caretState) {\n          var clientRect = getAbsoluteClientRect(root, caretState.element, caretState.before);\n          DomQuery(caretState.caret).css(__assign({}, clientRect));\n        });\n      };\n      var destroy = function () {\n        return Delay.clearInterval(cursorInterval);\n      };\n      var getCss = function () {\n        return '.mce-visual-caret {' + 'position: absolute;' + 'background-color: black;' + 'background-color: currentcolor;' + '}' + '.mce-visual-caret-hidden {' + 'display: none;' + '}' + '*[data-mce-caret] {' + 'position: absolute;' + 'left: -1000px;' + 'right: auto;' + 'top: 0;' + 'margin: 0;' + 'padding: 0;' + '}';\n      };\n      return {\n        show: show,\n        hide: hide,\n        getCss: getCss,\n        reposition: reposition,\n        destroy: destroy\n      };\n    };\n    var isFakeCaretTableBrowser = function () {\n      return browser$2.isIE() || browser$2.isEdge() || browser$2.isFirefox();\n    };\n    var isInlineFakeCaretTarget = function (node) {\n      return isContentEditableFalse$8(node) || isMedia$1(node);\n    };\n    var isFakeCaretTarget = function (node) {\n      return isInlineFakeCaretTarget(node) || isTable$3(node) && isFakeCaretTableBrowser();\n    };\n\n    var isContentEditableFalse$7 = isContentEditableFalse$b;\n    var isMedia = isMedia$2;\n    var isBlockLike = matchStyleValues('display', 'block table table-cell table-caption list-item');\n    var isCaretContainer = isCaretContainer$2;\n    var isCaretContainerBlock = isCaretContainerBlock$1;\n    var isElement$1 = isElement$5;\n    var isCaretCandidate$1 = isCaretCandidate$3;\n    var isForwards = function (direction) {\n      return direction > 0;\n    };\n    var isBackwards = function (direction) {\n      return direction < 0;\n    };\n    var skipCaretContainers = function (walk, shallow) {\n      var node;\n      while (node = walk(shallow)) {\n        if (!isCaretContainerBlock(node)) {\n          return node;\n        }\n      }\n      return null;\n    };\n    var findNode$1 = function (node, direction, predicateFn, rootNode, shallow) {\n      var walker = new DomTreeWalker(node, rootNode);\n      var isCefOrCaretContainer = isContentEditableFalse$7(node) || isCaretContainerBlock(node);\n      if (isBackwards(direction)) {\n        if (isCefOrCaretContainer) {\n          node = skipCaretContainers(walker.prev.bind(walker), true);\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n        while (node = skipCaretContainers(walker.prev.bind(walker), shallow)) {\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n      }\n      if (isForwards(direction)) {\n        if (isCefOrCaretContainer) {\n          node = skipCaretContainers(walker.next.bind(walker), true);\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n        while (node = skipCaretContainers(walker.next.bind(walker), shallow)) {\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n      }\n      return null;\n    };\n    var getParentBlock$2 = function (node, rootNode) {\n      while (node && node !== rootNode) {\n        if (isBlockLike(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var isInSameBlock = function (caretPosition1, caretPosition2, rootNode) {\n      return getParentBlock$2(caretPosition1.container(), rootNode) === getParentBlock$2(caretPosition2.container(), rootNode);\n    };\n    var getChildNodeAtRelativeOffset = function (relativeOffset, caretPosition) {\n      if (!caretPosition) {\n        return null;\n      }\n      var container = caretPosition.container();\n      var offset = caretPosition.offset();\n      if (!isElement$1(container)) {\n        return null;\n      }\n      return container.childNodes[offset + relativeOffset];\n    };\n    var beforeAfter = function (before, node) {\n      var range = node.ownerDocument.createRange();\n      if (before) {\n        range.setStartBefore(node);\n        range.setEndBefore(node);\n      } else {\n        range.setStartAfter(node);\n        range.setEndAfter(node);\n      }\n      return range;\n    };\n    var isNodesInSameBlock = function (root, node1, node2) {\n      return getParentBlock$2(node1, root) === getParentBlock$2(node2, root);\n    };\n    var lean = function (left, root, node) {\n      var siblingName = left ? 'previousSibling' : 'nextSibling';\n      while (node && node !== root) {\n        var sibling = node[siblingName];\n        if (isCaretContainer(sibling)) {\n          sibling = sibling[siblingName];\n        }\n        if (isContentEditableFalse$7(sibling) || isMedia(sibling)) {\n          if (isNodesInSameBlock(root, sibling, node)) {\n            return sibling;\n          }\n          break;\n        }\n        if (isCaretCandidate$1(sibling)) {\n          break;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var before$2 = curry(beforeAfter, true);\n    var after$2 = curry(beforeAfter, false);\n    var normalizeRange = function (direction, root, range) {\n      var node;\n      var leanLeft = curry(lean, true, root);\n      var leanRight = curry(lean, false, root);\n      var container = range.startContainer;\n      var offset = range.startOffset;\n      if (isCaretContainerBlock$1(container)) {\n        if (!isElement$1(container)) {\n          container = container.parentNode;\n        }\n        var location_1 = container.getAttribute('data-mce-caret');\n        if (location_1 === 'before') {\n          node = container.nextSibling;\n          if (isFakeCaretTarget(node)) {\n            return before$2(node);\n          }\n        }\n        if (location_1 === 'after') {\n          node = container.previousSibling;\n          if (isFakeCaretTarget(node)) {\n            return after$2(node);\n          }\n        }\n      }\n      if (!range.collapsed) {\n        return range;\n      }\n      if (isText$7(container)) {\n        if (isCaretContainer(container)) {\n          if (direction === 1) {\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n            node = leanLeft(container);\n            if (node) {\n              return after$2(node);\n            }\n          }\n          if (direction === -1) {\n            node = leanLeft(container);\n            if (node) {\n              return after$2(node);\n            }\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n          }\n          return range;\n        }\n        if (endsWithCaretContainer$1(container) && offset >= container.data.length - 1) {\n          if (direction === 1) {\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n          }\n          return range;\n        }\n        if (startsWithCaretContainer$1(container) && offset <= 1) {\n          if (direction === -1) {\n            node = leanLeft(container);\n            if (node) {\n              return after$2(node);\n            }\n          }\n          return range;\n        }\n        if (offset === container.data.length) {\n          node = leanRight(container);\n          if (node) {\n            return before$2(node);\n          }\n          return range;\n        }\n        if (offset === 0) {\n          node = leanLeft(container);\n          if (node) {\n            return after$2(node);\n          }\n          return range;\n        }\n      }\n      return range;\n    };\n    var getRelativeCefElm = function (forward, caretPosition) {\n      return Optional.from(getChildNodeAtRelativeOffset(forward ? 0 : -1, caretPosition)).filter(isContentEditableFalse$7);\n    };\n    var getNormalizedRangeEndPoint = function (direction, root, range) {\n      var normalizedRange = normalizeRange(direction, root, range);\n      if (direction === -1) {\n        return CaretPosition.fromRangeStart(normalizedRange);\n      }\n      return CaretPosition.fromRangeEnd(normalizedRange);\n    };\n    var getElementFromPosition = function (pos) {\n      return Optional.from(pos.getNode()).map(SugarElement.fromDom);\n    };\n    var getElementFromPrevPosition = function (pos) {\n      return Optional.from(pos.getNode(true)).map(SugarElement.fromDom);\n    };\n    var getVisualCaretPosition = function (walkFn, caretPosition) {\n      while (caretPosition = walkFn(caretPosition)) {\n        if (caretPosition.isVisible()) {\n          return caretPosition;\n        }\n      }\n      return caretPosition;\n    };\n    var isMoveInsideSameBlock = function (from, to) {\n      var inSameBlock = isInSameBlock(from, to);\n      if (!inSameBlock && isBr$5(from.getNode())) {\n        return true;\n      }\n      return inSameBlock;\n    };\n\n    var HDirection;\n    (function (HDirection) {\n      HDirection[HDirection['Backwards'] = -1] = 'Backwards';\n      HDirection[HDirection['Forwards'] = 1] = 'Forwards';\n    }(HDirection || (HDirection = {})));\n    var isContentEditableFalse$6 = isContentEditableFalse$b;\n    var isText$1 = isText$7;\n    var isElement = isElement$5;\n    var isBr$1 = isBr$5;\n    var isCaretCandidate = isCaretCandidate$3;\n    var isAtomic = isAtomic$1;\n    var isEditableCaretCandidate = isEditableCaretCandidate$1;\n    var getParents$3 = function (node, root) {\n      var parents = [];\n      while (node && node !== root) {\n        parents.push(node);\n        node = node.parentNode;\n      }\n      return parents;\n    };\n    var nodeAtIndex = function (container, offset) {\n      if (container.hasChildNodes() && offset < container.childNodes.length) {\n        return container.childNodes[offset];\n      }\n      return null;\n    };\n    var getCaretCandidatePosition = function (direction, node) {\n      if (isForwards(direction)) {\n        if (isCaretCandidate(node.previousSibling) && !isText$1(node.previousSibling)) {\n          return CaretPosition.before(node);\n        }\n        if (isText$1(node)) {\n          return CaretPosition(node, 0);\n        }\n      }\n      if (isBackwards(direction)) {\n        if (isCaretCandidate(node.nextSibling) && !isText$1(node.nextSibling)) {\n          return CaretPosition.after(node);\n        }\n        if (isText$1(node)) {\n          return CaretPosition(node, node.data.length);\n        }\n      }\n      if (isBackwards(direction)) {\n        if (isBr$1(node)) {\n          return CaretPosition.before(node);\n        }\n        return CaretPosition.after(node);\n      }\n      return CaretPosition.before(node);\n    };\n    var moveForwardFromBr = function (root, nextNode) {\n      var nextSibling = nextNode.nextSibling;\n      if (nextSibling && isCaretCandidate(nextSibling)) {\n        if (isText$1(nextSibling)) {\n          return CaretPosition(nextSibling, 0);\n        } else {\n          return CaretPosition.before(nextSibling);\n        }\n      } else {\n        return findCaretPosition$1(HDirection.Forwards, CaretPosition.after(nextNode), root);\n      }\n    };\n    var findCaretPosition$1 = function (direction, startPos, root) {\n      var node;\n      var nextNode;\n      var innerNode;\n      var caretPosition;\n      if (!isElement(root) || !startPos) {\n        return null;\n      }\n      if (startPos.isEqual(CaretPosition.after(root)) && root.lastChild) {\n        caretPosition = CaretPosition.after(root.lastChild);\n        if (isBackwards(direction) && isCaretCandidate(root.lastChild) && isElement(root.lastChild)) {\n          return isBr$1(root.lastChild) ? CaretPosition.before(root.lastChild) : caretPosition;\n        }\n      } else {\n        caretPosition = startPos;\n      }\n      var container = caretPosition.container();\n      var offset = caretPosition.offset();\n      if (isText$1(container)) {\n        if (isBackwards(direction) && offset > 0) {\n          return CaretPosition(container, --offset);\n        }\n        if (isForwards(direction) && offset < container.length) {\n          return CaretPosition(container, ++offset);\n        }\n        node = container;\n      } else {\n        if (isBackwards(direction) && offset > 0) {\n          nextNode = nodeAtIndex(container, offset - 1);\n          if (isCaretCandidate(nextNode)) {\n            if (!isAtomic(nextNode)) {\n              innerNode = findNode$1(nextNode, direction, isEditableCaretCandidate, nextNode);\n              if (innerNode) {\n                if (isText$1(innerNode)) {\n                  return CaretPosition(innerNode, innerNode.data.length);\n                }\n                return CaretPosition.after(innerNode);\n              }\n            }\n            if (isText$1(nextNode)) {\n              return CaretPosition(nextNode, nextNode.data.length);\n            }\n            return CaretPosition.before(nextNode);\n          }\n        }\n        if (isForwards(direction) && offset < container.childNodes.length) {\n          nextNode = nodeAtIndex(container, offset);\n          if (isCaretCandidate(nextNode)) {\n            if (isBr$1(nextNode)) {\n              return moveForwardFromBr(root, nextNode);\n            }\n            if (!isAtomic(nextNode)) {\n              innerNode = findNode$1(nextNode, direction, isEditableCaretCandidate, nextNode);\n              if (innerNode) {\n                if (isText$1(innerNode)) {\n                  return CaretPosition(innerNode, 0);\n                }\n                return CaretPosition.before(innerNode);\n              }\n            }\n            if (isText$1(nextNode)) {\n              return CaretPosition(nextNode, 0);\n            }\n            return CaretPosition.after(nextNode);\n          }\n        }\n        node = nextNode ? nextNode : caretPosition.getNode();\n      }\n      if (isForwards(direction) && caretPosition.isAtEnd() || isBackwards(direction) && caretPosition.isAtStart()) {\n        node = findNode$1(node, direction, always, root, true);\n        if (isEditableCaretCandidate(node, root)) {\n          return getCaretCandidatePosition(direction, node);\n        }\n      }\n      nextNode = findNode$1(node, direction, isEditableCaretCandidate, root);\n      var rootContentEditableFalseElm = last$1(filter$4(getParents$3(container, root), isContentEditableFalse$6));\n      if (rootContentEditableFalseElm && (!nextNode || !rootContentEditableFalseElm.contains(nextNode))) {\n        if (isForwards(direction)) {\n          caretPosition = CaretPosition.after(rootContentEditableFalseElm);\n        } else {\n          caretPosition = CaretPosition.before(rootContentEditableFalseElm);\n        }\n        return caretPosition;\n      }\n      if (nextNode) {\n        return getCaretCandidatePosition(direction, nextNode);\n      }\n      return null;\n    };\n    var CaretWalker = function (root) {\n      return {\n        next: function (caretPosition) {\n          return findCaretPosition$1(HDirection.Forwards, caretPosition, root);\n        },\n        prev: function (caretPosition) {\n          return findCaretPosition$1(HDirection.Backwards, caretPosition, root);\n        }\n      };\n    };\n\n    var walkToPositionIn = function (forward, root, start) {\n      var position = forward ? CaretPosition.before(start) : CaretPosition.after(start);\n      return fromPosition(forward, root, position);\n    };\n    var afterElement = function (node) {\n      return isBr$5(node) ? CaretPosition.before(node) : CaretPosition.after(node);\n    };\n    var isBeforeOrStart = function (position) {\n      if (CaretPosition.isTextPosition(position)) {\n        return position.offset() === 0;\n      } else {\n        return isCaretCandidate$3(position.getNode());\n      }\n    };\n    var isAfterOrEnd = function (position) {\n      if (CaretPosition.isTextPosition(position)) {\n        var container = position.container();\n        return position.offset() === container.data.length;\n      } else {\n        return isCaretCandidate$3(position.getNode(true));\n      }\n    };\n    var isBeforeAfterSameElement = function (from, to) {\n      return !CaretPosition.isTextPosition(from) && !CaretPosition.isTextPosition(to) && from.getNode() === to.getNode(true);\n    };\n    var isAtBr = function (position) {\n      return !CaretPosition.isTextPosition(position) && isBr$5(position.getNode());\n    };\n    var shouldSkipPosition = function (forward, from, to) {\n      if (forward) {\n        return !isBeforeAfterSameElement(from, to) && !isAtBr(from) && isAfterOrEnd(from) && isBeforeOrStart(to);\n      } else {\n        return !isBeforeAfterSameElement(to, from) && isBeforeOrStart(from) && isAfterOrEnd(to);\n      }\n    };\n    var fromPosition = function (forward, root, pos) {\n      var walker = CaretWalker(root);\n      return Optional.from(forward ? walker.next(pos) : walker.prev(pos));\n    };\n    var navigate = function (forward, root, from) {\n      return fromPosition(forward, root, from).bind(function (to) {\n        if (isInSameBlock(from, to, root) && shouldSkipPosition(forward, from, to)) {\n          return fromPosition(forward, root, to);\n        } else {\n          return Optional.some(to);\n        }\n      });\n    };\n    var navigateIgnore = function (forward, root, from, ignoreFilter) {\n      return navigate(forward, root, from).bind(function (pos) {\n        return ignoreFilter(pos) ? navigateIgnore(forward, root, pos, ignoreFilter) : Optional.some(pos);\n      });\n    };\n    var positionIn = function (forward, element) {\n      var startNode = forward ? element.firstChild : element.lastChild;\n      if (isText$7(startNode)) {\n        return Optional.some(CaretPosition(startNode, forward ? 0 : startNode.data.length));\n      } else if (startNode) {\n        if (isCaretCandidate$3(startNode)) {\n          return Optional.some(forward ? CaretPosition.before(startNode) : afterElement(startNode));\n        } else {\n          return walkToPositionIn(forward, element, startNode);\n        }\n      } else {\n        return Optional.none();\n      }\n    };\n    var nextPosition = curry(fromPosition, true);\n    var prevPosition = curry(fromPosition, false);\n    var firstPositionIn = curry(positionIn, true);\n    var lastPositionIn = curry(positionIn, false);\n\n    var CARET_ID$1 = '_mce_caret';\n    var isCaretNode = function (node) {\n      return isElement$5(node) && node.id === CARET_ID$1;\n    };\n    var getParentCaretContainer = function (body, node) {\n      while (node && node !== body) {\n        if (node.id === CARET_ID$1) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n\n    var isStringPathBookmark = function (bookmark) {\n      return isString$1(bookmark.start);\n    };\n    var isRangeBookmark = function (bookmark) {\n      return has$2(bookmark, 'rng');\n    };\n    var isIdBookmark = function (bookmark) {\n      return has$2(bookmark, 'id');\n    };\n    var isIndexBookmark = function (bookmark) {\n      return has$2(bookmark, 'name');\n    };\n    var isPathBookmark = function (bookmark) {\n      return Tools.isArray(bookmark.start);\n    };\n\n    var addBogus = function (dom, node) {\n      if (isElement$5(node) && dom.isBlock(node) && !node.innerHTML && !Env.ie) {\n        node.innerHTML = '<br data-mce-bogus=\"1\" />';\n      }\n      return node;\n    };\n    var resolveCaretPositionBookmark = function (dom, bookmark) {\n      var pos;\n      var rng = dom.createRng();\n      pos = resolve$2(dom.getRoot(), bookmark.start);\n      rng.setStart(pos.container(), pos.offset());\n      pos = resolve$2(dom.getRoot(), bookmark.end);\n      rng.setEnd(pos.container(), pos.offset());\n      return rng;\n    };\n    var insertZwsp = function (node, rng) {\n      var textNode = node.ownerDocument.createTextNode(ZWSP$1);\n      node.appendChild(textNode);\n      rng.setStart(textNode, 0);\n      rng.setEnd(textNode, 0);\n    };\n    var isEmpty$1 = function (node) {\n      return node.hasChildNodes() === false;\n    };\n    var tryFindRangePosition = function (node, rng) {\n      return lastPositionIn(node).fold(never, function (pos) {\n        rng.setStart(pos.container(), pos.offset());\n        rng.setEnd(pos.container(), pos.offset());\n        return true;\n      });\n    };\n    var padEmptyCaretContainer = function (root, node, rng) {\n      if (isEmpty$1(node) && getParentCaretContainer(root, node)) {\n        insertZwsp(node, rng);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var setEndPoint = function (dom, start, bookmark, rng) {\n      var point = bookmark[start ? 'start' : 'end'];\n      var i, node, offset, children;\n      var root = dom.getRoot();\n      if (point) {\n        offset = point[0];\n        for (node = root, i = point.length - 1; i >= 1; i--) {\n          children = node.childNodes;\n          if (padEmptyCaretContainer(root, node, rng)) {\n            return true;\n          }\n          if (point[i] > children.length - 1) {\n            if (padEmptyCaretContainer(root, node, rng)) {\n              return true;\n            }\n            return tryFindRangePosition(node, rng);\n          }\n          node = children[point[i]];\n        }\n        if (node.nodeType === 3) {\n          offset = Math.min(point[0], node.nodeValue.length);\n        }\n        if (node.nodeType === 1) {\n          offset = Math.min(point[0], node.childNodes.length);\n        }\n        if (start) {\n          rng.setStart(node, offset);\n        } else {\n          rng.setEnd(node, offset);\n        }\n      }\n      return true;\n    };\n    var isValidTextNode = function (node) {\n      return isText$7(node) && node.data.length > 0;\n    };\n    var restoreEndPoint = function (dom, suffix, bookmark) {\n      var marker = dom.get(bookmark.id + '_' + suffix), node, idx, next, prev;\n      var keep = bookmark.keep;\n      var container, offset;\n      if (marker) {\n        node = marker.parentNode;\n        if (suffix === 'start') {\n          if (!keep) {\n            idx = dom.nodeIndex(marker);\n          } else {\n            if (marker.hasChildNodes()) {\n              node = marker.firstChild;\n              idx = 1;\n            } else if (isValidTextNode(marker.nextSibling)) {\n              node = marker.nextSibling;\n              idx = 0;\n            } else if (isValidTextNode(marker.previousSibling)) {\n              node = marker.previousSibling;\n              idx = marker.previousSibling.data.length;\n            } else {\n              node = marker.parentNode;\n              idx = dom.nodeIndex(marker) + 1;\n            }\n          }\n          container = node;\n          offset = idx;\n        } else {\n          if (!keep) {\n            idx = dom.nodeIndex(marker);\n          } else {\n            if (marker.hasChildNodes()) {\n              node = marker.firstChild;\n              idx = 1;\n            } else if (isValidTextNode(marker.previousSibling)) {\n              node = marker.previousSibling;\n              idx = marker.previousSibling.data.length;\n            } else {\n              node = marker.parentNode;\n              idx = dom.nodeIndex(marker);\n            }\n          }\n          container = node;\n          offset = idx;\n        }\n        if (!keep) {\n          prev = marker.previousSibling;\n          next = marker.nextSibling;\n          Tools.each(Tools.grep(marker.childNodes), function (node) {\n            if (isText$7(node)) {\n              node.nodeValue = node.nodeValue.replace(/\\uFEFF/g, '');\n            }\n          });\n          while (marker = dom.get(bookmark.id + '_' + suffix)) {\n            dom.remove(marker, true);\n          }\n          if (prev && next && prev.nodeType === next.nodeType && isText$7(prev) && !Env.opera) {\n            idx = prev.nodeValue.length;\n            prev.appendData(next.nodeValue);\n            dom.remove(next);\n            container = prev;\n            offset = idx;\n          }\n        }\n        return Optional.some(CaretPosition(container, offset));\n      } else {\n        return Optional.none();\n      }\n    };\n    var resolvePaths = function (dom, bookmark) {\n      var rng = dom.createRng();\n      if (setEndPoint(dom, true, bookmark, rng) && setEndPoint(dom, false, bookmark, rng)) {\n        return Optional.some(rng);\n      } else {\n        return Optional.none();\n      }\n    };\n    var resolveId = function (dom, bookmark) {\n      var startPos = restoreEndPoint(dom, 'start', bookmark);\n      var endPos = restoreEndPoint(dom, 'end', bookmark);\n      return lift2(startPos, endPos.or(startPos), function (spos, epos) {\n        var rng = dom.createRng();\n        rng.setStart(addBogus(dom, spos.container()), spos.offset());\n        rng.setEnd(addBogus(dom, epos.container()), epos.offset());\n        return rng;\n      });\n    };\n    var resolveIndex = function (dom, bookmark) {\n      return Optional.from(dom.select(bookmark.name)[bookmark.index]).map(function (elm) {\n        var rng = dom.createRng();\n        rng.selectNode(elm);\n        return rng;\n      });\n    };\n    var resolve$1 = function (selection, bookmark) {\n      var dom = selection.dom;\n      if (bookmark) {\n        if (isPathBookmark(bookmark)) {\n          return resolvePaths(dom, bookmark);\n        } else if (isStringPathBookmark(bookmark)) {\n          return Optional.some(resolveCaretPositionBookmark(dom, bookmark));\n        } else if (isIdBookmark(bookmark)) {\n          return resolveId(dom, bookmark);\n        } else if (isIndexBookmark(bookmark)) {\n          return resolveIndex(dom, bookmark);\n        } else if (isRangeBookmark(bookmark)) {\n          return Optional.some(bookmark.rng);\n        }\n      }\n      return Optional.none();\n    };\n\n    var getBookmark$1 = function (selection, type, normalized) {\n      return getBookmark$2(selection, type, normalized);\n    };\n    var moveToBookmark = function (selection, bookmark) {\n      resolve$1(selection, bookmark).each(function (rng) {\n        selection.setRng(rng);\n      });\n    };\n    var isBookmarkNode$1 = function (node) {\n      return isElement$5(node) && node.tagName === 'SPAN' && node.getAttribute('data-mce-type') === 'bookmark';\n    };\n\n    var is = function (expected) {\n      return function (actual) {\n        return expected === actual;\n      };\n    };\n    var isNbsp = is(nbsp);\n    var isWhiteSpace = function (chr) {\n      return chr !== '' && ' \\f\\n\\r\\t\\x0B'.indexOf(chr) !== -1;\n    };\n    var isContent = function (chr) {\n      return !isWhiteSpace(chr) && !isNbsp(chr);\n    };\n\n    var isNode = function (node) {\n      return !!node.nodeType;\n    };\n    var isInlineBlock = function (node) {\n      return node && /^(IMG)$/.test(node.nodeName);\n    };\n    var moveStart = function (dom, selection, rng) {\n      var offset = rng.startOffset;\n      var container = rng.startContainer;\n      if (container === rng.endContainer) {\n        if (isInlineBlock(container.childNodes[offset])) {\n          return;\n        }\n      }\n      if (isElement$5(container)) {\n        var nodes = container.childNodes;\n        var walker = void 0;\n        if (offset < nodes.length) {\n          container = nodes[offset];\n          walker = new DomTreeWalker(container, dom.getParent(container, dom.isBlock));\n        } else {\n          container = nodes[nodes.length - 1];\n          walker = new DomTreeWalker(container, dom.getParent(container, dom.isBlock));\n          walker.next(true);\n        }\n        for (var node = walker.current(); node; node = walker.next()) {\n          if (isText$7(node) && !isWhiteSpaceNode$1(node)) {\n            rng.setStart(node, 0);\n            selection.setRng(rng);\n            return;\n          }\n        }\n      }\n    };\n    var getNonWhiteSpaceSibling = function (node, next, inc) {\n      if (node) {\n        var nextName = next ? 'nextSibling' : 'previousSibling';\n        for (node = inc ? node : node[nextName]; node; node = node[nextName]) {\n          if (isElement$5(node) || !isWhiteSpaceNode$1(node)) {\n            return node;\n          }\n        }\n      }\n    };\n    var isTextBlock$1 = function (editor, name) {\n      if (isNode(name)) {\n        name = name.nodeName;\n      }\n      return !!editor.schema.getTextBlockElements()[name.toLowerCase()];\n    };\n    var isValid = function (ed, parent, child) {\n      return ed.schema.isValidChild(parent, child);\n    };\n    var isWhiteSpaceNode$1 = function (node, allowSpaces) {\n      if (allowSpaces === void 0) {\n        allowSpaces = false;\n      }\n      if (isNonNullable(node) && isText$7(node)) {\n        var data = allowSpaces ? node.data.replace(/ /g, '\\xA0') : node.data;\n        return isWhitespaceText(data);\n      } else {\n        return false;\n      }\n    };\n    var isEmptyTextNode$1 = function (node) {\n      return isNonNullable(node) && isText$7(node) && node.length === 0;\n    };\n    var replaceVars = function (value, vars) {\n      if (isFunction(value)) {\n        value = value(vars);\n      } else if (isNonNullable(vars)) {\n        value = value.replace(/%(\\w+)/g, function (str, name) {\n          return vars[name] || str;\n        });\n      }\n      return value;\n    };\n    var isEq$5 = function (str1, str2) {\n      str1 = str1 || '';\n      str2 = str2 || '';\n      str1 = '' + (str1.nodeName || str1);\n      str2 = '' + (str2.nodeName || str2);\n      return str1.toLowerCase() === str2.toLowerCase();\n    };\n    var normalizeStyleValue = function (dom, value, name) {\n      if (name === 'color' || name === 'backgroundColor') {\n        value = dom.toHex(value);\n      }\n      if (name === 'fontWeight' && value === 700) {\n        value = 'bold';\n      }\n      if (name === 'fontFamily') {\n        value = value.replace(/[\\'\\\"]/g, '').replace(/,\\s+/g, ',');\n      }\n      return '' + value;\n    };\n    var getStyle = function (dom, node, name) {\n      return normalizeStyleValue(dom, dom.getStyle(node, name), name);\n    };\n    var getTextDecoration = function (dom, node) {\n      var decoration;\n      dom.getParent(node, function (n) {\n        decoration = dom.getStyle(n, 'text-decoration');\n        return decoration && decoration !== 'none';\n      });\n      return decoration;\n    };\n    var getParents$2 = function (dom, node, selector) {\n      return dom.getParents(node, selector, dom.getRoot());\n    };\n    var isVariableFormatName = function (editor, formatName) {\n      var hasVariableValues = function (format) {\n        var isVariableValue = function (val) {\n          return val.length > 1 && val.charAt(0) === '%';\n        };\n        return exists([\n          'styles',\n          'attributes'\n        ], function (key) {\n          return get$9(format, key).exists(function (field) {\n            var fieldValues = isArray$1(field) ? field : values(field);\n            return exists(fieldValues, isVariableValue);\n          });\n        });\n      };\n      return exists(editor.formatter.get(formatName), hasVariableValues);\n    };\n    var areSimilarFormats = function (editor, formatName, otherFormatName) {\n      var validKeys = [\n        'inline',\n        'block',\n        'selector',\n        'attributes',\n        'styles',\n        'classes'\n      ];\n      var filterObj = function (format) {\n        return filter$3(format, function (_, key) {\n          return exists(validKeys, function (validKey) {\n            return validKey === key;\n          });\n        });\n      };\n      return exists(editor.formatter.get(formatName), function (fmt1) {\n        var filteredFmt1 = filterObj(fmt1);\n        return exists(editor.formatter.get(otherFormatName), function (fmt2) {\n          var filteredFmt2 = filterObj(fmt2);\n          return equal$1(filteredFmt1, filteredFmt2);\n        });\n      });\n    };\n    var isBlockFormat = function (format) {\n      return hasNonNullableKey(format, 'block');\n    };\n    var isSelectorFormat = function (format) {\n      return hasNonNullableKey(format, 'selector');\n    };\n    var isInlineFormat = function (format) {\n      return hasNonNullableKey(format, 'inline');\n    };\n    var isMixedFormat = function (format) {\n      return isSelectorFormat(format) && isInlineFormat(format) && is$1(get$9(format, 'mixed'), true);\n    };\n    var shouldExpandToSelector = function (format) {\n      return isSelectorFormat(format) && format.expand !== false && !isInlineFormat(format);\n    };\n\n    var isBookmarkNode = isBookmarkNode$1;\n    var getParents$1 = getParents$2;\n    var isWhiteSpaceNode = isWhiteSpaceNode$1;\n    var isTextBlock = isTextBlock$1;\n    var isBogusBr = function (node) {\n      return isBr$5(node) && node.getAttribute('data-mce-bogus') && !node.nextSibling;\n    };\n    var findParentContentEditable = function (dom, node) {\n      var parent = node;\n      while (parent) {\n        if (isElement$5(parent) && dom.getContentEditable(parent)) {\n          return dom.getContentEditable(parent) === 'false' ? parent : node;\n        }\n        parent = parent.parentNode;\n      }\n      return node;\n    };\n    var walkText = function (start, node, offset, predicate) {\n      var str = node.data;\n      for (var i = offset; start ? i >= 0 : i < str.length; start ? i-- : i++) {\n        if (predicate(str.charAt(i))) {\n          return start ? i + 1 : i;\n        }\n      }\n      return -1;\n    };\n    var findSpace = function (start, node, offset) {\n      return walkText(start, node, offset, function (c) {\n        return isNbsp(c) || isWhiteSpace(c);\n      });\n    };\n    var findContent = function (start, node, offset) {\n      return walkText(start, node, offset, isContent);\n    };\n    var findWordEndPoint = function (dom, body, container, offset, start, includeTrailingSpaces) {\n      var lastTextNode;\n      var rootNode = dom.getParent(container, dom.isBlock) || body;\n      var walk = function (container, offset, pred) {\n        var textSeeker = TextSeeker(dom);\n        var walker = start ? textSeeker.backwards : textSeeker.forwards;\n        return Optional.from(walker(container, offset, function (text, textOffset) {\n          if (isBookmarkNode(text.parentNode)) {\n            return -1;\n          } else {\n            lastTextNode = text;\n            return pred(start, text, textOffset);\n          }\n        }, rootNode));\n      };\n      var spaceResult = walk(container, offset, findSpace);\n      return spaceResult.bind(function (result) {\n        return includeTrailingSpaces ? walk(result.container, result.offset + (start ? -1 : 0), findContent) : Optional.some(result);\n      }).orThunk(function () {\n        return lastTextNode ? Optional.some({\n          container: lastTextNode,\n          offset: start ? 0 : lastTextNode.length\n        }) : Optional.none();\n      });\n    };\n    var findSelectorEndPoint = function (dom, formatList, rng, container, siblingName) {\n      if (isText$7(container) && isEmpty$3(container.data) && container[siblingName]) {\n        container = container[siblingName];\n      }\n      var parents = getParents$1(dom, container);\n      for (var i = 0; i < parents.length; i++) {\n        for (var y = 0; y < formatList.length; y++) {\n          var curFormat = formatList[y];\n          if (isNonNullable(curFormat.collapsed) && curFormat.collapsed !== rng.collapsed) {\n            continue;\n          }\n          if (isSelectorFormat(curFormat) && dom.is(parents[i], curFormat.selector)) {\n            return parents[i];\n          }\n        }\n      }\n      return container;\n    };\n    var findBlockEndPoint = function (editor, formatList, container, siblingName) {\n      var node = container;\n      var dom = editor.dom;\n      var root = dom.getRoot();\n      var format = formatList[0];\n      if (isBlockFormat(format)) {\n        node = format.wrapper ? null : dom.getParent(container, format.block, root);\n      }\n      if (!node) {\n        var scopeRoot = dom.getParent(container, 'LI,TD,TH');\n        node = dom.getParent(isText$7(container) ? container.parentNode : container, function (node) {\n          return node !== root && isTextBlock(editor, node);\n        }, scopeRoot);\n      }\n      if (node && isBlockFormat(format) && format.wrapper) {\n        node = getParents$1(dom, node, 'ul,ol').reverse()[0] || node;\n      }\n      if (!node) {\n        node = container;\n        while (node[siblingName] && !dom.isBlock(node[siblingName])) {\n          node = node[siblingName];\n          if (isEq$5(node, 'br')) {\n            break;\n          }\n        }\n      }\n      return node || container;\n    };\n    var isAtBlockBoundary$1 = function (dom, root, container, siblingName) {\n      var parent = container.parentNode;\n      if (isNonNullable(container[siblingName])) {\n        return false;\n      } else if (parent === root || isNullable(parent) || dom.isBlock(parent)) {\n        return true;\n      } else {\n        return isAtBlockBoundary$1(dom, root, parent, siblingName);\n      }\n    };\n    var findParentContainer = function (dom, formatList, container, offset, start) {\n      var parent = container;\n      var siblingName = start ? 'previousSibling' : 'nextSibling';\n      var root = dom.getRoot();\n      if (isText$7(container) && !isWhiteSpaceNode(container)) {\n        if (start ? offset > 0 : offset < container.data.length) {\n          return container;\n        }\n      }\n      while (true) {\n        if (!formatList[0].block_expand && dom.isBlock(parent)) {\n          return parent;\n        }\n        for (var sibling = parent[siblingName]; sibling; sibling = sibling[siblingName]) {\n          var allowSpaces = isText$7(sibling) && !isAtBlockBoundary$1(dom, root, sibling, siblingName);\n          if (!isBookmarkNode(sibling) && !isBogusBr(sibling) && !isWhiteSpaceNode(sibling, allowSpaces)) {\n            return parent;\n          }\n        }\n        if (parent === root || parent.parentNode === root) {\n          container = parent;\n          break;\n        }\n        parent = parent.parentNode;\n      }\n      return container;\n    };\n    var isSelfOrParentBookmark = function (container) {\n      return isBookmarkNode(container.parentNode) || isBookmarkNode(container);\n    };\n    var expandRng = function (editor, rng, formatList, includeTrailingSpace) {\n      if (includeTrailingSpace === void 0) {\n        includeTrailingSpace = false;\n      }\n      var startContainer = rng.startContainer, startOffset = rng.startOffset, endContainer = rng.endContainer, endOffset = rng.endOffset;\n      var dom = editor.dom;\n      var format = formatList[0];\n      if (isElement$5(startContainer) && startContainer.hasChildNodes()) {\n        startContainer = getNode$1(startContainer, startOffset);\n        if (isText$7(startContainer)) {\n          startOffset = 0;\n        }\n      }\n      if (isElement$5(endContainer) && endContainer.hasChildNodes()) {\n        endContainer = getNode$1(endContainer, rng.collapsed ? endOffset : endOffset - 1);\n        if (isText$7(endContainer)) {\n          endOffset = endContainer.nodeValue.length;\n        }\n      }\n      startContainer = findParentContentEditable(dom, startContainer);\n      endContainer = findParentContentEditable(dom, endContainer);\n      if (isSelfOrParentBookmark(startContainer)) {\n        startContainer = isBookmarkNode(startContainer) ? startContainer : startContainer.parentNode;\n        if (rng.collapsed) {\n          startContainer = startContainer.previousSibling || startContainer;\n        } else {\n          startContainer = startContainer.nextSibling || startContainer;\n        }\n        if (isText$7(startContainer)) {\n          startOffset = rng.collapsed ? startContainer.length : 0;\n        }\n      }\n      if (isSelfOrParentBookmark(endContainer)) {\n        endContainer = isBookmarkNode(endContainer) ? endContainer : endContainer.parentNode;\n        if (rng.collapsed) {\n          endContainer = endContainer.nextSibling || endContainer;\n        } else {\n          endContainer = endContainer.previousSibling || endContainer;\n        }\n        if (isText$7(endContainer)) {\n          endOffset = rng.collapsed ? 0 : endContainer.length;\n        }\n      }\n      if (rng.collapsed) {\n        var startPoint = findWordEndPoint(dom, editor.getBody(), startContainer, startOffset, true, includeTrailingSpace);\n        startPoint.each(function (_a) {\n          var container = _a.container, offset = _a.offset;\n          startContainer = container;\n          startOffset = offset;\n        });\n        var endPoint = findWordEndPoint(dom, editor.getBody(), endContainer, endOffset, false, includeTrailingSpace);\n        endPoint.each(function (_a) {\n          var container = _a.container, offset = _a.offset;\n          endContainer = container;\n          endOffset = offset;\n        });\n      }\n      if (isInlineFormat(format) || format.block_expand) {\n        if (!isInlineFormat(format) || (!isText$7(startContainer) || startOffset === 0)) {\n          startContainer = findParentContainer(dom, formatList, startContainer, startOffset, true);\n        }\n        if (!isInlineFormat(format) || (!isText$7(endContainer) || endOffset === endContainer.nodeValue.length)) {\n          endContainer = findParentContainer(dom, formatList, endContainer, endOffset, false);\n        }\n      }\n      if (shouldExpandToSelector(format)) {\n        startContainer = findSelectorEndPoint(dom, formatList, rng, startContainer, 'previousSibling');\n        endContainer = findSelectorEndPoint(dom, formatList, rng, endContainer, 'nextSibling');\n      }\n      if (isBlockFormat(format) || isSelectorFormat(format)) {\n        startContainer = findBlockEndPoint(editor, formatList, startContainer, 'previousSibling');\n        endContainer = findBlockEndPoint(editor, formatList, endContainer, 'nextSibling');\n        if (isBlockFormat(format)) {\n          if (!dom.isBlock(startContainer)) {\n            startContainer = findParentContainer(dom, formatList, startContainer, startOffset, true);\n          }\n          if (!dom.isBlock(endContainer)) {\n            endContainer = findParentContainer(dom, formatList, endContainer, endOffset, false);\n          }\n        }\n      }\n      if (isElement$5(startContainer)) {\n        startOffset = dom.nodeIndex(startContainer);\n        startContainer = startContainer.parentNode;\n      }\n      if (isElement$5(endContainer)) {\n        endOffset = dom.nodeIndex(endContainer) + 1;\n        endContainer = endContainer.parentNode;\n      }\n      return {\n        startContainer: startContainer,\n        startOffset: startOffset,\n        endContainer: endContainer,\n        endOffset: endOffset\n      };\n    };\n\n    var walk$2 = function (dom, rng, callback) {\n      var startOffset = rng.startOffset;\n      var startContainer = getNode$1(rng.startContainer, startOffset);\n      var endOffset = rng.endOffset;\n      var endContainer = getNode$1(rng.endContainer, endOffset - 1);\n      var exclude = function (nodes) {\n        var firstNode = nodes[0];\n        if (isText$7(firstNode) && firstNode === startContainer && startOffset >= firstNode.data.length) {\n          nodes.splice(0, 1);\n        }\n        var lastNode = nodes[nodes.length - 1];\n        if (endOffset === 0 && nodes.length > 0 && lastNode === endContainer && isText$7(lastNode)) {\n          nodes.splice(nodes.length - 1, 1);\n        }\n        return nodes;\n      };\n      var collectSiblings = function (node, name, endNode) {\n        var siblings = [];\n        for (; node && node !== endNode; node = node[name]) {\n          siblings.push(node);\n        }\n        return siblings;\n      };\n      var findEndPoint = function (node, root) {\n        return dom.getParent(node, function (node) {\n          return node.parentNode === root;\n        }, root);\n      };\n      var walkBoundary = function (startNode, endNode, next) {\n        var siblingName = next ? 'nextSibling' : 'previousSibling';\n        for (var node = startNode, parent_1 = node.parentNode; node && node !== endNode; node = parent_1) {\n          parent_1 = node.parentNode;\n          var siblings_1 = collectSiblings(node === startNode ? node : node[siblingName], siblingName);\n          if (siblings_1.length) {\n            if (!next) {\n              siblings_1.reverse();\n            }\n            callback(exclude(siblings_1));\n          }\n        }\n      };\n      if (startContainer === endContainer) {\n        return callback(exclude([startContainer]));\n      }\n      var ancestor = dom.findCommonAncestor(startContainer, endContainer);\n      if (dom.isChildOf(startContainer, endContainer)) {\n        return walkBoundary(startContainer, ancestor, true);\n      }\n      if (dom.isChildOf(endContainer, startContainer)) {\n        return walkBoundary(endContainer, ancestor);\n      }\n      var startPoint = findEndPoint(startContainer, ancestor) || startContainer;\n      var endPoint = findEndPoint(endContainer, ancestor) || endContainer;\n      walkBoundary(startContainer, startPoint, true);\n      var siblings = collectSiblings(startPoint === startContainer ? startPoint : startPoint.nextSibling, 'nextSibling', endPoint === endContainer ? endPoint.nextSibling : endPoint);\n      if (siblings.length) {\n        callback(exclude(siblings));\n      }\n      walkBoundary(endContainer, endPoint);\n    };\n\n    var getRanges = function (selection) {\n      var ranges = [];\n      if (selection) {\n        for (var i = 0; i < selection.rangeCount; i++) {\n          ranges.push(selection.getRangeAt(i));\n        }\n      }\n      return ranges;\n    };\n    var getSelectedNodes = function (ranges) {\n      return bind(ranges, function (range) {\n        var node = getSelectedNode(range);\n        return node ? [SugarElement.fromDom(node)] : [];\n      });\n    };\n    var hasMultipleRanges = function (selection) {\n      return getRanges(selection).length > 1;\n    };\n\n    var getCellsFromRanges = function (ranges) {\n      return filter$4(getSelectedNodes(ranges), isTableCell$4);\n    };\n    var getCellsFromElement = function (elm) {\n      return descendants(elm, 'td[data-mce-selected],th[data-mce-selected]');\n    };\n    var getCellsFromElementOrRanges = function (ranges, element) {\n      var selectedCells = getCellsFromElement(element);\n      return selectedCells.length > 0 ? selectedCells : getCellsFromRanges(ranges);\n    };\n    var getCellsFromEditor = function (editor) {\n      return getCellsFromElementOrRanges(getRanges(editor.selection.getSel()), SugarElement.fromDom(editor.getBody()));\n    };\n    var getClosestTable = function (cell, isRoot) {\n      return ancestor$2(cell, 'table', isRoot);\n    };\n\n    var getStartNode = function (rng) {\n      var sc = rng.startContainer, so = rng.startOffset;\n      if (isText$7(sc)) {\n        return so === 0 ? Optional.some(SugarElement.fromDom(sc)) : Optional.none();\n      } else {\n        return Optional.from(sc.childNodes[so]).map(SugarElement.fromDom);\n      }\n    };\n    var getEndNode = function (rng) {\n      var ec = rng.endContainer, eo = rng.endOffset;\n      if (isText$7(ec)) {\n        return eo === ec.data.length ? Optional.some(SugarElement.fromDom(ec)) : Optional.none();\n      } else {\n        return Optional.from(ec.childNodes[eo - 1]).map(SugarElement.fromDom);\n      }\n    };\n    var getFirstChildren = function (node) {\n      return firstChild(node).fold(constant([node]), function (child) {\n        return [node].concat(getFirstChildren(child));\n      });\n    };\n    var getLastChildren$1 = function (node) {\n      return lastChild(node).fold(constant([node]), function (child) {\n        if (name(child) === 'br') {\n          return prevSibling(child).map(function (sibling) {\n            return [node].concat(getLastChildren$1(sibling));\n          }).getOr([]);\n        } else {\n          return [node].concat(getLastChildren$1(child));\n        }\n      });\n    };\n    var hasAllContentsSelected = function (elm, rng) {\n      return lift2(getStartNode(rng), getEndNode(rng), function (startNode, endNode) {\n        var start = find$3(getFirstChildren(elm), curry(eq, startNode));\n        var end = find$3(getLastChildren$1(elm), curry(eq, endNode));\n        return start.isSome() && end.isSome();\n      }).getOr(false);\n    };\n    var moveEndPoint = function (dom, rng, node, start) {\n      var root = node, walker = new DomTreeWalker(node, root);\n      var moveCaretBeforeOnEnterElementsMap = filter$3(dom.schema.getMoveCaretBeforeOnEnterElements(), function (_, name) {\n        return !contains$3([\n          'td',\n          'th',\n          'table'\n        ], name.toLowerCase());\n      });\n      do {\n        if (isText$7(node) && Tools.trim(node.nodeValue).length !== 0) {\n          if (start) {\n            rng.setStart(node, 0);\n          } else {\n            rng.setEnd(node, node.nodeValue.length);\n          }\n          return;\n        }\n        if (moveCaretBeforeOnEnterElementsMap[node.nodeName]) {\n          if (start) {\n            rng.setStartBefore(node);\n          } else {\n            if (node.nodeName === 'BR') {\n              rng.setEndBefore(node);\n            } else {\n              rng.setEndAfter(node);\n            }\n          }\n          return;\n        }\n      } while (node = start ? walker.next() : walker.prev());\n      if (root.nodeName === 'BODY') {\n        if (start) {\n          rng.setStart(root, 0);\n        } else {\n          rng.setEnd(root, root.childNodes.length);\n        }\n      }\n    };\n    var hasAnyRanges = function (editor) {\n      var sel = editor.selection.getSel();\n      return sel && sel.rangeCount > 0;\n    };\n    var runOnRanges = function (editor, executor) {\n      var fakeSelectionNodes = getCellsFromEditor(editor);\n      if (fakeSelectionNodes.length > 0) {\n        each$k(fakeSelectionNodes, function (elem) {\n          var node = elem.dom;\n          var fakeNodeRng = editor.dom.createRng();\n          fakeNodeRng.setStartBefore(node);\n          fakeNodeRng.setEndAfter(node);\n          executor(fakeNodeRng, true);\n        });\n      } else {\n        executor(editor.selection.getRng(), false);\n      }\n    };\n    var preserve = function (selection, fillBookmark, executor) {\n      var bookmark = getPersistentBookmark(selection, fillBookmark);\n      executor(bookmark);\n      selection.moveToBookmark(bookmark);\n    };\n\n    var NodeValue = function (is, name) {\n      var get = function (element) {\n        if (!is(element)) {\n          throw new Error('Can only get ' + name + ' value of a ' + name + ' node');\n        }\n        return getOption(element).getOr('');\n      };\n      var getOption = function (element) {\n        return is(element) ? Optional.from(element.dom.nodeValue) : Optional.none();\n      };\n      var set = function (element, value) {\n        if (!is(element)) {\n          throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');\n        }\n        element.dom.nodeValue = value;\n      };\n      return {\n        get: get,\n        getOption: getOption,\n        set: set\n      };\n    };\n\n    var api$1 = NodeValue(isText$8, 'text');\n    var get$2 = function (element) {\n      return api$1.get(element);\n    };\n\n    var isZeroWidth = function (elem) {\n      return isText$8(elem) && get$2(elem) === ZWSP$1;\n    };\n    var context = function (editor, elem, wrapName, nodeName) {\n      return parent(elem).fold(function () {\n        return 'skipping';\n      }, function (parent) {\n        if (nodeName === 'br' || isZeroWidth(elem)) {\n          return 'valid';\n        } else if (isAnnotation(elem)) {\n          return 'existing';\n        } else if (isCaretNode(elem.dom)) {\n          return 'caret';\n        } else if (!isValid(editor, wrapName, nodeName) || !isValid(editor, name(parent), wrapName)) {\n          return 'invalid-child';\n        } else {\n          return 'valid';\n        }\n      });\n    };\n\n    var applyWordGrab = function (editor, rng) {\n      var r = expandRng(editor, rng, [{ inline: 'span' }]);\n      rng.setStart(r.startContainer, r.startOffset);\n      rng.setEnd(r.endContainer, r.endOffset);\n      editor.selection.setRng(rng);\n    };\n    var makeAnnotation = function (eDoc, _a, annotationName, decorate) {\n      var _b = _a.uid, uid = _b === void 0 ? generate('mce-annotation') : _b, data = __rest(_a, ['uid']);\n      var master = SugarElement.fromTag('span', eDoc);\n      add$1(master, annotation());\n      set$1(master, '' + dataAnnotationId(), uid);\n      set$1(master, '' + dataAnnotation(), annotationName);\n      var _c = decorate(uid, data), _d = _c.attributes, attributes = _d === void 0 ? {} : _d, _e = _c.classes, classes = _e === void 0 ? [] : _e;\n      setAll$1(master, attributes);\n      add(master, classes);\n      return master;\n    };\n    var annotate = function (editor, rng, annotationName, decorate, data) {\n      var newWrappers = [];\n      var master = makeAnnotation(editor.getDoc(), data, annotationName, decorate);\n      var wrapper = value();\n      var finishWrapper = function () {\n        wrapper.clear();\n      };\n      var getOrOpenWrapper = function () {\n        return wrapper.get().getOrThunk(function () {\n          var nu = shallow(master);\n          newWrappers.push(nu);\n          wrapper.set(nu);\n          return nu;\n        });\n      };\n      var processElements = function (elems) {\n        each$k(elems, processElement);\n      };\n      var processElement = function (elem) {\n        var ctx = context(editor, elem, 'span', name(elem));\n        switch (ctx) {\n        case 'invalid-child': {\n            finishWrapper();\n            var children$1 = children(elem);\n            processElements(children$1);\n            finishWrapper();\n            break;\n          }\n        case 'valid': {\n            var w = getOrOpenWrapper();\n            wrap$3(elem, w);\n            break;\n          }\n        }\n      };\n      var processNodes = function (nodes) {\n        var elems = map$3(nodes, SugarElement.fromDom);\n        processElements(elems);\n      };\n      walk$2(editor.dom, rng, function (nodes) {\n        finishWrapper();\n        processNodes(nodes);\n      });\n      return newWrappers;\n    };\n    var annotateWithBookmark = function (editor, name, settings, data) {\n      editor.undoManager.transact(function () {\n        var selection = editor.selection;\n        var initialRng = selection.getRng();\n        var hasFakeSelection = getCellsFromEditor(editor).length > 0;\n        if (initialRng.collapsed && !hasFakeSelection) {\n          applyWordGrab(editor, initialRng);\n        }\n        if (selection.getRng().collapsed && !hasFakeSelection) {\n          var wrapper = makeAnnotation(editor.getDoc(), data, name, settings.decorate);\n          set(wrapper, nbsp);\n          selection.getRng().insertNode(wrapper.dom);\n          selection.select(wrapper.dom);\n        } else {\n          preserve(selection, false, function () {\n            runOnRanges(editor, function (selectionRng) {\n              annotate(editor, selectionRng, name, settings.decorate, data);\n            });\n          });\n        }\n      });\n    };\n\n    var Annotator = function (editor) {\n      var registry = create$7();\n      setup$m(editor, registry);\n      var changes = setup$n(editor);\n      return {\n        register: function (name, settings) {\n          registry.register(name, settings);\n        },\n        annotate: function (name, data) {\n          registry.lookup(name).each(function (settings) {\n            annotateWithBookmark(editor, name, settings, data);\n          });\n        },\n        annotationChanged: function (name, callback) {\n          changes.addListener(name, callback);\n        },\n        remove: function (name) {\n          identify(editor, Optional.some(name)).each(function (_a) {\n            var elements = _a.elements;\n            each$k(elements, unwrap);\n          });\n        },\n        getAll: function (name) {\n          var directory = findAll(editor, name);\n          return map$2(directory, function (elems) {\n            return map$3(elems, function (elem) {\n              return elem.dom;\n            });\n          });\n        }\n      };\n    };\n\n    var BookmarkManager = function (selection) {\n      return {\n        getBookmark: curry(getBookmark$1, selection),\n        moveToBookmark: curry(moveToBookmark, selection)\n      };\n    };\n    BookmarkManager.isBookmarkNode = isBookmarkNode$1;\n\n    var getContentEditableRoot$1 = function (root, node) {\n      while (node && node !== root) {\n        if (isContentEditableTrue$4(node) || isContentEditableFalse$b(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n\n    var isXYWithinRange = function (clientX, clientY, range) {\n      if (range.collapsed) {\n        return false;\n      }\n      if (Env.browser.isIE() && range.startOffset === range.endOffset - 1 && range.startContainer === range.endContainer) {\n        var elm = range.startContainer.childNodes[range.startOffset];\n        if (isElement$5(elm)) {\n          return exists(elm.getClientRects(), function (rect) {\n            return containsXY(rect, clientX, clientY);\n          });\n        }\n      }\n      return exists(range.getClientRects(), function (rect) {\n        return containsXY(rect, clientX, clientY);\n      });\n    };\n\n    var firePreProcess = function (editor, args) {\n      return editor.fire('PreProcess', args);\n    };\n    var firePostProcess = function (editor, args) {\n      return editor.fire('PostProcess', args);\n    };\n    var fireRemove = function (editor) {\n      return editor.fire('remove');\n    };\n    var fireDetach = function (editor) {\n      return editor.fire('detach');\n    };\n    var fireSwitchMode = function (editor, mode) {\n      return editor.fire('SwitchMode', { mode: mode });\n    };\n    var fireObjectResizeStart = function (editor, target, width, height, origin) {\n      editor.fire('ObjectResizeStart', {\n        target: target,\n        width: width,\n        height: height,\n        origin: origin\n      });\n    };\n    var fireObjectResized = function (editor, target, width, height, origin) {\n      editor.fire('ObjectResized', {\n        target: target,\n        width: width,\n        height: height,\n        origin: origin\n      });\n    };\n    var firePreInit = function (editor) {\n      return editor.fire('PreInit');\n    };\n    var firePostRender = function (editor) {\n      return editor.fire('PostRender');\n    };\n    var fireInit = function (editor) {\n      return editor.fire('Init');\n    };\n    var firePlaceholderToggle = function (editor, state) {\n      return editor.fire('PlaceholderToggle', { state: state });\n    };\n    var fireError = function (editor, errorType, error) {\n      return editor.fire(errorType, error);\n    };\n    var fireFormatApply = function (editor, format, node, vars) {\n      return editor.fire('FormatApply', {\n        format: format,\n        node: node,\n        vars: vars\n      });\n    };\n    var fireFormatRemove = function (editor, format, node, vars) {\n      return editor.fire('FormatRemove', {\n        format: format,\n        node: node,\n        vars: vars\n      });\n    };\n\n    var VK = {\n      BACKSPACE: 8,\n      DELETE: 46,\n      DOWN: 40,\n      ENTER: 13,\n      ESC: 27,\n      LEFT: 37,\n      RIGHT: 39,\n      SPACEBAR: 32,\n      TAB: 9,\n      UP: 38,\n      PAGE_UP: 33,\n      PAGE_DOWN: 34,\n      END: 35,\n      HOME: 36,\n      modifierPressed: function (e) {\n        return e.shiftKey || e.ctrlKey || e.altKey || VK.metaKeyPressed(e);\n      },\n      metaKeyPressed: function (e) {\n        return Env.mac ? e.metaKey : e.ctrlKey && !e.altKey;\n      }\n    };\n\n    var isContentEditableFalse$5 = isContentEditableFalse$b;\n    var ControlSelection = function (selection, editor) {\n      var elementSelectionAttr = 'data-mce-selected';\n      var dom = editor.dom, each = Tools.each;\n      var selectedElm, selectedElmGhost, resizeHelper, selectedHandle, resizeBackdrop;\n      var startX, startY, selectedElmX, selectedElmY, startW, startH, ratio, resizeStarted;\n      var width, height;\n      var editableDoc = editor.getDoc(), rootDocument = document;\n      var abs = Math.abs, round = Math.round, rootElement = editor.getBody();\n      var startScrollWidth, startScrollHeight;\n      var resizeHandles = {\n        nw: [\n          0,\n          0,\n          -1,\n          -1\n        ],\n        ne: [\n          1,\n          0,\n          1,\n          -1\n        ],\n        se: [\n          1,\n          1,\n          1,\n          1\n        ],\n        sw: [\n          0,\n          1,\n          -1,\n          1\n        ]\n      };\n      var isImage = function (elm) {\n        return elm && (elm.nodeName === 'IMG' || editor.dom.is(elm, 'figure.image'));\n      };\n      var isMedia = function (elm) {\n        return isMedia$2(elm) || dom.hasClass(elm, 'mce-preview-object');\n      };\n      var isEventOnImageOutsideRange = function (evt, range) {\n        if (evt.type === 'longpress' || evt.type.indexOf('touch') === 0) {\n          var touch = evt.touches[0];\n          return isImage(evt.target) && !isXYWithinRange(touch.clientX, touch.clientY, range);\n        } else {\n          return isImage(evt.target) && !isXYWithinRange(evt.clientX, evt.clientY, range);\n        }\n      };\n      var contextMenuSelectImage = function (evt) {\n        var target = evt.target;\n        if (isEventOnImageOutsideRange(evt, editor.selection.getRng()) && !evt.isDefaultPrevented()) {\n          editor.selection.select(target);\n        }\n      };\n      var getResizeTargets = function (elm) {\n        if (dom.is(elm, 'figure.image')) {\n          return [elm.querySelector('img')];\n        } else if (dom.hasClass(elm, 'mce-preview-object') && isNonNullable(elm.firstElementChild)) {\n          return [\n            elm,\n            elm.firstElementChild\n          ];\n        } else {\n          return [elm];\n        }\n      };\n      var isResizable = function (elm) {\n        var selector = getObjectResizing(editor);\n        if (!selector) {\n          return false;\n        }\n        if (elm.getAttribute('data-mce-resize') === 'false') {\n          return false;\n        }\n        if (elm === editor.getBody()) {\n          return false;\n        }\n        if (dom.hasClass(elm, 'mce-preview-object')) {\n          return is$2(SugarElement.fromDom(elm.firstElementChild), selector);\n        } else {\n          return is$2(SugarElement.fromDom(elm), selector);\n        }\n      };\n      var createGhostElement = function (elm) {\n        if (isMedia(elm)) {\n          return dom.create('img', { src: Env.transparentSrc });\n        } else {\n          return elm.cloneNode(true);\n        }\n      };\n      var setSizeProp = function (element, name, value) {\n        if (isNonNullable(value)) {\n          var targets = getResizeTargets(element);\n          each$k(targets, function (target) {\n            if (target.style[name] || !editor.schema.isValid(target.nodeName.toLowerCase(), name)) {\n              dom.setStyle(target, name, value);\n            } else {\n              dom.setAttrib(target, name, '' + value);\n            }\n          });\n        }\n      };\n      var setGhostElmSize = function (ghostElm, width, height) {\n        setSizeProp(ghostElm, 'width', width);\n        setSizeProp(ghostElm, 'height', height);\n      };\n      var resizeGhostElement = function (e) {\n        var deltaX, deltaY, proportional;\n        var resizeHelperX, resizeHelperY;\n        deltaX = e.screenX - startX;\n        deltaY = e.screenY - startY;\n        width = deltaX * selectedHandle[2] + startW;\n        height = deltaY * selectedHandle[3] + startH;\n        width = width < 5 ? 5 : width;\n        height = height < 5 ? 5 : height;\n        if ((isImage(selectedElm) || isMedia(selectedElm)) && getResizeImgProportional(editor) !== false) {\n          proportional = !VK.modifierPressed(e);\n        } else {\n          proportional = VK.modifierPressed(e);\n        }\n        if (proportional) {\n          if (abs(deltaX) > abs(deltaY)) {\n            height = round(width * ratio);\n            width = round(height / ratio);\n          } else {\n            width = round(height / ratio);\n            height = round(width * ratio);\n          }\n        }\n        setGhostElmSize(selectedElmGhost, width, height);\n        resizeHelperX = selectedHandle.startPos.x + deltaX;\n        resizeHelperY = selectedHandle.startPos.y + deltaY;\n        resizeHelperX = resizeHelperX > 0 ? resizeHelperX : 0;\n        resizeHelperY = resizeHelperY > 0 ? resizeHelperY : 0;\n        dom.setStyles(resizeHelper, {\n          left: resizeHelperX,\n          top: resizeHelperY,\n          display: 'block'\n        });\n        resizeHelper.innerHTML = width + ' &times; ' + height;\n        if (selectedHandle[2] < 0 && selectedElmGhost.clientWidth <= width) {\n          dom.setStyle(selectedElmGhost, 'left', selectedElmX + (startW - width));\n        }\n        if (selectedHandle[3] < 0 && selectedElmGhost.clientHeight <= height) {\n          dom.setStyle(selectedElmGhost, 'top', selectedElmY + (startH - height));\n        }\n        deltaX = rootElement.scrollWidth - startScrollWidth;\n        deltaY = rootElement.scrollHeight - startScrollHeight;\n        if (deltaX + deltaY !== 0) {\n          dom.setStyles(resizeHelper, {\n            left: resizeHelperX - deltaX,\n            top: resizeHelperY - deltaY\n          });\n        }\n        if (!resizeStarted) {\n          fireObjectResizeStart(editor, selectedElm, startW, startH, 'corner-' + selectedHandle.name);\n          resizeStarted = true;\n        }\n      };\n      var endGhostResize = function () {\n        var wasResizeStarted = resizeStarted;\n        resizeStarted = false;\n        if (wasResizeStarted) {\n          setSizeProp(selectedElm, 'width', width);\n          setSizeProp(selectedElm, 'height', height);\n        }\n        dom.unbind(editableDoc, 'mousemove', resizeGhostElement);\n        dom.unbind(editableDoc, 'mouseup', endGhostResize);\n        if (rootDocument !== editableDoc) {\n          dom.unbind(rootDocument, 'mousemove', resizeGhostElement);\n          dom.unbind(rootDocument, 'mouseup', endGhostResize);\n        }\n        dom.remove(selectedElmGhost);\n        dom.remove(resizeHelper);\n        dom.remove(resizeBackdrop);\n        showResizeRect(selectedElm);\n        if (wasResizeStarted) {\n          fireObjectResized(editor, selectedElm, width, height, 'corner-' + selectedHandle.name);\n          dom.setAttrib(selectedElm, 'style', dom.getAttrib(selectedElm, 'style'));\n        }\n        editor.nodeChanged();\n      };\n      var showResizeRect = function (targetElm) {\n        unbindResizeHandleEvents();\n        var position = dom.getPos(targetElm, rootElement);\n        var selectedElmX = position.x;\n        var selectedElmY = position.y;\n        var rect = targetElm.getBoundingClientRect();\n        var targetWidth = rect.width || rect.right - rect.left;\n        var targetHeight = rect.height || rect.bottom - rect.top;\n        if (selectedElm !== targetElm) {\n          hideResizeRect();\n          selectedElm = targetElm;\n          width = height = 0;\n        }\n        var e = editor.fire('ObjectSelected', { target: targetElm });\n        var selectedValue = dom.getAttrib(selectedElm, elementSelectionAttr, '1');\n        if (isResizable(targetElm) && !e.isDefaultPrevented()) {\n          each(resizeHandles, function (handle, name) {\n            var handleElm;\n            var startDrag = function (e) {\n              var target = getResizeTargets(selectedElm)[0];\n              startX = e.screenX;\n              startY = e.screenY;\n              startW = target.clientWidth;\n              startH = target.clientHeight;\n              ratio = startH / startW;\n              selectedHandle = handle;\n              selectedHandle.name = name;\n              selectedHandle.startPos = {\n                x: targetWidth * handle[0] + selectedElmX,\n                y: targetHeight * handle[1] + selectedElmY\n              };\n              startScrollWidth = rootElement.scrollWidth;\n              startScrollHeight = rootElement.scrollHeight;\n              resizeBackdrop = dom.add(rootElement, 'div', {\n                'class': 'mce-resize-backdrop',\n                'data-mce-bogus': 'all'\n              });\n              dom.setStyles(resizeBackdrop, {\n                position: 'fixed',\n                left: '0',\n                top: '0',\n                width: '100%',\n                height: '100%'\n              });\n              selectedElmGhost = createGhostElement(selectedElm);\n              dom.addClass(selectedElmGhost, 'mce-clonedresizable');\n              dom.setAttrib(selectedElmGhost, 'data-mce-bogus', 'all');\n              selectedElmGhost.contentEditable = 'false';\n              dom.setStyles(selectedElmGhost, {\n                left: selectedElmX,\n                top: selectedElmY,\n                margin: 0\n              });\n              setGhostElmSize(selectedElmGhost, targetWidth, targetHeight);\n              selectedElmGhost.removeAttribute(elementSelectionAttr);\n              rootElement.appendChild(selectedElmGhost);\n              dom.bind(editableDoc, 'mousemove', resizeGhostElement);\n              dom.bind(editableDoc, 'mouseup', endGhostResize);\n              if (rootDocument !== editableDoc) {\n                dom.bind(rootDocument, 'mousemove', resizeGhostElement);\n                dom.bind(rootDocument, 'mouseup', endGhostResize);\n              }\n              resizeHelper = dom.add(rootElement, 'div', {\n                'class': 'mce-resize-helper',\n                'data-mce-bogus': 'all'\n              }, startW + ' &times; ' + startH);\n            };\n            handleElm = dom.get('mceResizeHandle' + name);\n            if (handleElm) {\n              dom.remove(handleElm);\n            }\n            handleElm = dom.add(rootElement, 'div', {\n              'id': 'mceResizeHandle' + name,\n              'data-mce-bogus': 'all',\n              'class': 'mce-resizehandle',\n              'unselectable': true,\n              'style': 'cursor:' + name + '-resize; margin:0; padding:0'\n            });\n            if (Env.ie === 11) {\n              handleElm.contentEditable = false;\n            }\n            dom.bind(handleElm, 'mousedown', function (e) {\n              e.stopImmediatePropagation();\n              e.preventDefault();\n              startDrag(e);\n            });\n            handle.elm = handleElm;\n            dom.setStyles(handleElm, {\n              left: targetWidth * handle[0] + selectedElmX - handleElm.offsetWidth / 2,\n              top: targetHeight * handle[1] + selectedElmY - handleElm.offsetHeight / 2\n            });\n          });\n        } else {\n          hideResizeRect();\n        }\n        if (!dom.getAttrib(selectedElm, elementSelectionAttr)) {\n          selectedElm.setAttribute(elementSelectionAttr, selectedValue);\n        }\n      };\n      var hideResizeRect = function () {\n        unbindResizeHandleEvents();\n        if (selectedElm) {\n          selectedElm.removeAttribute(elementSelectionAttr);\n        }\n        each$j(resizeHandles, function (value, name) {\n          var handleElm = dom.get('mceResizeHandle' + name);\n          if (handleElm) {\n            dom.unbind(handleElm);\n            dom.remove(handleElm);\n          }\n        });\n      };\n      var updateResizeRect = function (e) {\n        var startElm, controlElm;\n        var isChildOrEqual = function (node, parent) {\n          if (node) {\n            do {\n              if (node === parent) {\n                return true;\n              }\n            } while (node = node.parentNode);\n          }\n        };\n        if (resizeStarted || editor.removed) {\n          return;\n        }\n        each(dom.select('img[data-mce-selected],hr[data-mce-selected]'), function (img) {\n          img.removeAttribute(elementSelectionAttr);\n        });\n        controlElm = e.type === 'mousedown' ? e.target : selection.getNode();\n        controlElm = dom.$(controlElm).closest('table,img,figure.image,hr,video,span.mce-preview-object')[0];\n        if (isChildOrEqual(controlElm, rootElement)) {\n          disableGeckoResize();\n          startElm = selection.getStart(true);\n          if (isChildOrEqual(startElm, controlElm) && isChildOrEqual(selection.getEnd(true), controlElm)) {\n            showResizeRect(controlElm);\n            return;\n          }\n        }\n        hideResizeRect();\n      };\n      var isWithinContentEditableFalse = function (elm) {\n        return isContentEditableFalse$5(getContentEditableRoot$1(editor.getBody(), elm));\n      };\n      var unbindResizeHandleEvents = function () {\n        each$j(resizeHandles, function (handle) {\n          if (handle.elm) {\n            dom.unbind(handle.elm);\n            delete handle.elm;\n          }\n        });\n      };\n      var disableGeckoResize = function () {\n        try {\n          editor.getDoc().execCommand('enableObjectResizing', false, 'false');\n        } catch (ex) {\n        }\n      };\n      editor.on('init', function () {\n        disableGeckoResize();\n        if (Env.browser.isIE() || Env.browser.isEdge()) {\n          editor.on('mousedown click', function (e) {\n            var target = e.target, nodeName = target.nodeName;\n            if (!resizeStarted && /^(TABLE|IMG|HR)$/.test(nodeName) && !isWithinContentEditableFalse(target)) {\n              if (e.button !== 2) {\n                editor.selection.select(target, nodeName === 'TABLE');\n              }\n              if (e.type === 'mousedown') {\n                editor.nodeChanged();\n              }\n            }\n          });\n          var handleMSControlSelect_1 = function (e) {\n            var delayedSelect = function (node) {\n              Delay.setEditorTimeout(editor, function () {\n                return editor.selection.select(node);\n              });\n            };\n            if (isWithinContentEditableFalse(e.target) || isMedia$2(e.target)) {\n              e.preventDefault();\n              delayedSelect(e.target);\n              return;\n            }\n            if (/^(TABLE|IMG|HR)$/.test(e.target.nodeName)) {\n              e.preventDefault();\n              if (e.target.tagName === 'IMG') {\n                delayedSelect(e.target);\n              }\n            }\n          };\n          dom.bind(rootElement, 'mscontrolselect', handleMSControlSelect_1);\n          editor.on('remove', function () {\n            return dom.unbind(rootElement, 'mscontrolselect', handleMSControlSelect_1);\n          });\n        }\n        var throttledUpdateResizeRect = Delay.throttle(function (e) {\n          if (!editor.composing) {\n            updateResizeRect(e);\n          }\n        });\n        editor.on('NodeChange ResizeEditor ResizeWindow ResizeContent drop', throttledUpdateResizeRect);\n        editor.on('keyup compositionend', function (e) {\n          if (selectedElm && selectedElm.nodeName === 'TABLE') {\n            throttledUpdateResizeRect(e);\n          }\n        });\n        editor.on('hide blur', hideResizeRect);\n        editor.on('contextmenu longpress', contextMenuSelectImage, true);\n      });\n      editor.on('remove', unbindResizeHandleEvents);\n      var destroy = function () {\n        selectedElm = selectedElmGhost = resizeBackdrop = null;\n      };\n      return {\n        isResizable: isResizable,\n        showResizeRect: showResizeRect,\n        hideResizeRect: hideResizeRect,\n        updateResizeRect: updateResizeRect,\n        destroy: destroy\n      };\n    };\n\n    var hasCeProperty = function (node) {\n      return isContentEditableTrue$4(node) || isContentEditableFalse$b(node);\n    };\n    var findParent$1 = function (node, rootNode, predicate) {\n      while (node && node !== rootNode) {\n        if (predicate(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var findClosestIeRange = function (clientX, clientY, doc) {\n      var rects;\n      var element = doc.elementFromPoint(clientX, clientY);\n      var rng = doc.body.createTextRange();\n      if (!element || element.tagName === 'HTML') {\n        element = doc.body;\n      }\n      rng.moveToElementText(element);\n      rects = Tools.toArray(rng.getClientRects());\n      rects = rects.sort(function (a, b) {\n        a = Math.abs(Math.max(a.top - clientY, a.bottom - clientY));\n        b = Math.abs(Math.max(b.top - clientY, b.bottom - clientY));\n        return a - b;\n      });\n      if (rects.length > 0) {\n        clientY = (rects[0].bottom + rects[0].top) / 2;\n        try {\n          rng.moveToPoint(clientX, clientY);\n          rng.collapse(true);\n          return rng;\n        } catch (ex) {\n        }\n      }\n      return null;\n    };\n    var moveOutOfContentEditableFalse = function (rng, rootNode) {\n      var parentElement = rng && rng.parentElement ? rng.parentElement() : null;\n      return isContentEditableFalse$b(findParent$1(parentElement, rootNode, hasCeProperty)) ? null : rng;\n    };\n    var fromPoint = function (clientX, clientY, doc) {\n      var rng, point;\n      var pointDoc = doc;\n      if (pointDoc.caretPositionFromPoint) {\n        point = pointDoc.caretPositionFromPoint(clientX, clientY);\n        if (point) {\n          rng = doc.createRange();\n          rng.setStart(point.offsetNode, point.offset);\n          rng.collapse(true);\n        }\n      } else if (pointDoc.caretRangeFromPoint) {\n        rng = pointDoc.caretRangeFromPoint(clientX, clientY);\n      } else if (pointDoc.body.createTextRange) {\n        rng = pointDoc.body.createTextRange();\n        try {\n          rng.moveToPoint(clientX, clientY);\n          rng.collapse(true);\n        } catch (ex) {\n          rng = findClosestIeRange(clientX, clientY, doc);\n        }\n        return moveOutOfContentEditableFalse(rng, doc.body);\n      }\n      return rng;\n    };\n\n    var isEq$4 = function (rng1, rng2) {\n      return rng1 && rng2 && (rng1.startContainer === rng2.startContainer && rng1.startOffset === rng2.startOffset) && (rng1.endContainer === rng2.endContainer && rng1.endOffset === rng2.endOffset);\n    };\n\n    var findParent = function (node, rootNode, predicate) {\n      while (node && node !== rootNode) {\n        if (predicate(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var hasParent$1 = function (node, rootNode, predicate) {\n      return findParent(node, rootNode, predicate) !== null;\n    };\n    var hasParentWithName = function (node, rootNode, name) {\n      return hasParent$1(node, rootNode, function (node) {\n        return node.nodeName === name;\n      });\n    };\n    var isTable = function (node) {\n      return node && node.nodeName === 'TABLE';\n    };\n    var isTableCell$2 = function (node) {\n      return node && /^(TD|TH|CAPTION)$/.test(node.nodeName);\n    };\n    var isCeFalseCaretContainer = function (node, rootNode) {\n      return isCaretContainer$2(node) && hasParent$1(node, rootNode, isCaretNode) === false;\n    };\n    var hasBrBeforeAfter = function (dom, node, left) {\n      var walker = new DomTreeWalker(node, dom.getParent(node.parentNode, dom.isBlock) || dom.getRoot());\n      while (node = walker[left ? 'prev' : 'next']()) {\n        if (isBr$5(node)) {\n          return true;\n        }\n      }\n    };\n    var isPrevNode = function (node, name) {\n      return node.previousSibling && node.previousSibling.nodeName === name;\n    };\n    var hasContentEditableFalseParent = function (body, node) {\n      while (node && node !== body) {\n        if (isContentEditableFalse$b(node)) {\n          return true;\n        }\n        node = node.parentNode;\n      }\n      return false;\n    };\n    var findTextNodeRelative = function (dom, isAfterNode, collapsed, left, startNode) {\n      var lastInlineElement;\n      var body = dom.getRoot();\n      var node;\n      var nonEmptyElementsMap = dom.schema.getNonEmptyElements();\n      var parentBlockContainer = dom.getParent(startNode.parentNode, dom.isBlock) || body;\n      if (left && isBr$5(startNode) && isAfterNode && dom.isEmpty(parentBlockContainer)) {\n        return Optional.some(CaretPosition(startNode.parentNode, dom.nodeIndex(startNode)));\n      }\n      var walker = new DomTreeWalker(startNode, parentBlockContainer);\n      while (node = walker[left ? 'prev' : 'next']()) {\n        if (dom.getContentEditableParent(node) === 'false' || isCeFalseCaretContainer(node, body)) {\n          return Optional.none();\n        }\n        if (isText$7(node) && node.nodeValue.length > 0) {\n          if (hasParentWithName(node, body, 'A') === false) {\n            return Optional.some(CaretPosition(node, left ? node.nodeValue.length : 0));\n          }\n          return Optional.none();\n        }\n        if (dom.isBlock(node) || nonEmptyElementsMap[node.nodeName.toLowerCase()]) {\n          return Optional.none();\n        }\n        lastInlineElement = node;\n      }\n      if (collapsed && lastInlineElement) {\n        return Optional.some(CaretPosition(lastInlineElement, 0));\n      }\n      return Optional.none();\n    };\n    var normalizeEndPoint = function (dom, collapsed, start, rng) {\n      var container, offset;\n      var body = dom.getRoot();\n      var node;\n      var directionLeft, normalized = false;\n      container = rng[(start ? 'start' : 'end') + 'Container'];\n      offset = rng[(start ? 'start' : 'end') + 'Offset'];\n      var isAfterNode = isElement$5(container) && offset === container.childNodes.length;\n      var nonEmptyElementsMap = dom.schema.getNonEmptyElements();\n      directionLeft = start;\n      if (isCaretContainer$2(container)) {\n        return Optional.none();\n      }\n      if (isElement$5(container) && offset > container.childNodes.length - 1) {\n        directionLeft = false;\n      }\n      if (isDocument$1(container)) {\n        container = body;\n        offset = 0;\n      }\n      if (container === body) {\n        if (directionLeft) {\n          node = container.childNodes[offset > 0 ? offset - 1 : 0];\n          if (node) {\n            if (isCaretContainer$2(node)) {\n              return Optional.none();\n            }\n            if (nonEmptyElementsMap[node.nodeName] || isTable(node)) {\n              return Optional.none();\n            }\n          }\n        }\n        if (container.hasChildNodes()) {\n          offset = Math.min(!directionLeft && offset > 0 ? offset - 1 : offset, container.childNodes.length - 1);\n          container = container.childNodes[offset];\n          offset = isText$7(container) && isAfterNode ? container.data.length : 0;\n          if (!collapsed && container === body.lastChild && isTable(container)) {\n            return Optional.none();\n          }\n          if (hasContentEditableFalseParent(body, container) || isCaretContainer$2(container)) {\n            return Optional.none();\n          }\n          if (container.hasChildNodes() && isTable(container) === false) {\n            node = container;\n            var walker = new DomTreeWalker(container, body);\n            do {\n              if (isContentEditableFalse$b(node) || isCaretContainer$2(node)) {\n                normalized = false;\n                break;\n              }\n              if (isText$7(node) && node.nodeValue.length > 0) {\n                offset = directionLeft ? 0 : node.nodeValue.length;\n                container = node;\n                normalized = true;\n                break;\n              }\n              if (nonEmptyElementsMap[node.nodeName.toLowerCase()] && !isTableCell$2(node)) {\n                offset = dom.nodeIndex(node);\n                container = node.parentNode;\n                if (!directionLeft) {\n                  offset++;\n                }\n                normalized = true;\n                break;\n              }\n            } while (node = directionLeft ? walker.next() : walker.prev());\n          }\n        }\n      }\n      if (collapsed) {\n        if (isText$7(container) && offset === 0) {\n          findTextNodeRelative(dom, isAfterNode, collapsed, true, container).each(function (pos) {\n            container = pos.container();\n            offset = pos.offset();\n            normalized = true;\n          });\n        }\n        if (isElement$5(container)) {\n          node = container.childNodes[offset];\n          if (!node) {\n            node = container.childNodes[offset - 1];\n          }\n          if (node && isBr$5(node) && !isPrevNode(node, 'A') && !hasBrBeforeAfter(dom, node, false) && !hasBrBeforeAfter(dom, node, true)) {\n            findTextNodeRelative(dom, isAfterNode, collapsed, true, node).each(function (pos) {\n              container = pos.container();\n              offset = pos.offset();\n              normalized = true;\n            });\n          }\n        }\n      }\n      if (directionLeft && !collapsed && isText$7(container) && offset === container.nodeValue.length) {\n        findTextNodeRelative(dom, isAfterNode, collapsed, false, container).each(function (pos) {\n          container = pos.container();\n          offset = pos.offset();\n          normalized = true;\n        });\n      }\n      return normalized ? Optional.some(CaretPosition(container, offset)) : Optional.none();\n    };\n    var normalize$2 = function (dom, rng) {\n      var collapsed = rng.collapsed, normRng = rng.cloneRange();\n      var startPos = CaretPosition.fromRangeStart(rng);\n      normalizeEndPoint(dom, collapsed, true, normRng).each(function (pos) {\n        if (!collapsed || !CaretPosition.isAbove(startPos, pos)) {\n          normRng.setStart(pos.container(), pos.offset());\n        }\n      });\n      if (!collapsed) {\n        normalizeEndPoint(dom, collapsed, false, normRng).each(function (pos) {\n          normRng.setEnd(pos.container(), pos.offset());\n        });\n      }\n      if (collapsed) {\n        normRng.collapse(true);\n      }\n      return isEq$4(rng, normRng) ? Optional.none() : Optional.some(normRng);\n    };\n\n    var splitText = function (node, offset) {\n      return node.splitText(offset);\n    };\n    var split = function (rng) {\n      var startContainer = rng.startContainer, startOffset = rng.startOffset, endContainer = rng.endContainer, endOffset = rng.endOffset;\n      if (startContainer === endContainer && isText$7(startContainer)) {\n        if (startOffset > 0 && startOffset < startContainer.nodeValue.length) {\n          endContainer = splitText(startContainer, startOffset);\n          startContainer = endContainer.previousSibling;\n          if (endOffset > startOffset) {\n            endOffset = endOffset - startOffset;\n            startContainer = endContainer = splitText(endContainer, endOffset).previousSibling;\n            endOffset = endContainer.nodeValue.length;\n            startOffset = 0;\n          } else {\n            endOffset = 0;\n          }\n        }\n      } else {\n        if (isText$7(startContainer) && startOffset > 0 && startOffset < startContainer.nodeValue.length) {\n          startContainer = splitText(startContainer, startOffset);\n          startOffset = 0;\n        }\n        if (isText$7(endContainer) && endOffset > 0 && endOffset < endContainer.nodeValue.length) {\n          endContainer = splitText(endContainer, endOffset).previousSibling;\n          endOffset = endContainer.nodeValue.length;\n        }\n      }\n      return {\n        startContainer: startContainer,\n        startOffset: startOffset,\n        endContainer: endContainer,\n        endOffset: endOffset\n      };\n    };\n\n    var RangeUtils = function (dom) {\n      var walk = function (rng, callback) {\n        return walk$2(dom, rng, callback);\n      };\n      var split$1 = split;\n      var normalize = function (rng) {\n        return normalize$2(dom, rng).fold(never, function (normalizedRng) {\n          rng.setStart(normalizedRng.startContainer, normalizedRng.startOffset);\n          rng.setEnd(normalizedRng.endContainer, normalizedRng.endOffset);\n          return true;\n        });\n      };\n      return {\n        walk: walk,\n        split: split$1,\n        normalize: normalize\n      };\n    };\n    RangeUtils.compareRanges = isEq$4;\n    RangeUtils.getCaretRangeFromPoint = fromPoint;\n    RangeUtils.getSelectedNode = getSelectedNode;\n    RangeUtils.getNode = getNode$1;\n\n    var Dimension = function (name, getOffset) {\n      var set = function (element, h) {\n        if (!isNumber(h) && !h.match(/^[0-9]+$/)) {\n          throw new Error(name + '.set accepts only positive integer values. Value was ' + h);\n        }\n        var dom = element.dom;\n        if (isSupported(dom)) {\n          dom.style[name] = h + 'px';\n        }\n      };\n      var get = function (element) {\n        var r = getOffset(element);\n        if (r <= 0 || r === null) {\n          var css = get$5(element, name);\n          return parseFloat(css) || 0;\n        }\n        return r;\n      };\n      var getOuter = get;\n      var aggregate = function (element, properties) {\n        return foldl(properties, function (acc, property) {\n          var val = get$5(element, property);\n          var value = val === undefined ? 0 : parseInt(val, 10);\n          return isNaN(value) ? acc : acc + value;\n        }, 0);\n      };\n      var max = function (element, value, properties) {\n        var cumulativeInclusions = aggregate(element, properties);\n        var absoluteMax = value > cumulativeInclusions ? value - cumulativeInclusions : 0;\n        return absoluteMax;\n      };\n      return {\n        set: set,\n        get: get,\n        getOuter: getOuter,\n        aggregate: aggregate,\n        max: max\n      };\n    };\n\n    var api = Dimension('height', function (element) {\n      var dom = element.dom;\n      return inBody(element) ? dom.getBoundingClientRect().height : dom.offsetHeight;\n    });\n    var get$1 = function (element) {\n      return api.get(element);\n    };\n\n    var walkUp = function (navigation, doc) {\n      var frame = navigation.view(doc);\n      return frame.fold(constant([]), function (f) {\n        var parent = navigation.owner(f);\n        var rest = walkUp(navigation, parent);\n        return [f].concat(rest);\n      });\n    };\n    var pathTo = function (element, navigation) {\n      var d = navigation.owner(element);\n      return walkUp(navigation, d);\n    };\n\n    var view = function (doc) {\n      var _a;\n      var element = doc.dom === document ? Optional.none() : Optional.from((_a = doc.dom.defaultView) === null || _a === void 0 ? void 0 : _a.frameElement);\n      return element.map(SugarElement.fromDom);\n    };\n    var owner = function (element) {\n      return documentOrOwner(element);\n    };\n\n    var Navigation = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        view: view,\n        owner: owner\n    });\n\n    var find$1 = function (element) {\n      var doc = SugarElement.fromDom(document);\n      var scroll = get$8(doc);\n      var frames = pathTo(element, Navigation);\n      var offset = viewport(element);\n      var r = foldr(frames, function (b, a) {\n        var loc = viewport(a);\n        return {\n          left: b.left + loc.left,\n          top: b.top + loc.top\n        };\n      }, {\n        left: 0,\n        top: 0\n      });\n      return SugarPosition(r.left + offset.left + scroll.left, r.top + offset.top + scroll.top);\n    };\n\n    var excludeFromDescend = function (element) {\n      return name(element) === 'textarea';\n    };\n    var fireScrollIntoViewEvent = function (editor, data) {\n      var scrollEvent = editor.fire('ScrollIntoView', data);\n      return scrollEvent.isDefaultPrevented();\n    };\n    var fireAfterScrollIntoViewEvent = function (editor, data) {\n      editor.fire('AfterScrollIntoView', data);\n    };\n    var descend = function (element, offset) {\n      var children$1 = children(element);\n      if (children$1.length === 0 || excludeFromDescend(element)) {\n        return {\n          element: element,\n          offset: offset\n        };\n      } else if (offset < children$1.length && !excludeFromDescend(children$1[offset])) {\n        return {\n          element: children$1[offset],\n          offset: 0\n        };\n      } else {\n        var last = children$1[children$1.length - 1];\n        if (excludeFromDescend(last)) {\n          return {\n            element: element,\n            offset: offset\n          };\n        } else {\n          if (name(last) === 'img') {\n            return {\n              element: last,\n              offset: 1\n            };\n          } else if (isText$8(last)) {\n            return {\n              element: last,\n              offset: get$2(last).length\n            };\n          } else {\n            return {\n              element: last,\n              offset: children(last).length\n            };\n          }\n        }\n      }\n    };\n    var markerInfo = function (element, cleanupFun) {\n      var pos = absolute(element);\n      var height = get$1(element);\n      return {\n        element: element,\n        bottom: pos.top + height,\n        height: height,\n        pos: pos,\n        cleanup: cleanupFun\n      };\n    };\n    var createMarker = function (element, offset) {\n      var startPoint = descend(element, offset);\n      var span = SugarElement.fromHtml('<span data-mce-bogus=\"all\" style=\"display: inline-block;\">' + ZWSP$1 + '</span>');\n      before$4(startPoint.element, span);\n      return markerInfo(span, function () {\n        return remove$7(span);\n      });\n    };\n    var elementMarker = function (element) {\n      return markerInfo(SugarElement.fromDom(element), noop);\n    };\n    var withMarker = function (editor, f, rng, alignToTop) {\n      preserveWith(editor, function (_s, _e) {\n        return applyWithMarker(editor, f, rng, alignToTop);\n      }, rng);\n    };\n    var withScrollEvents = function (editor, doc, f, marker, alignToTop) {\n      var data = {\n        elm: marker.element.dom,\n        alignToTop: alignToTop\n      };\n      if (fireScrollIntoViewEvent(editor, data)) {\n        return;\n      }\n      var scrollTop = get$8(doc).top;\n      f(doc, scrollTop, marker, alignToTop);\n      fireAfterScrollIntoViewEvent(editor, data);\n    };\n    var applyWithMarker = function (editor, f, rng, alignToTop) {\n      var body = SugarElement.fromDom(editor.getBody());\n      var doc = SugarElement.fromDom(editor.getDoc());\n      reflow(body);\n      var marker = createMarker(SugarElement.fromDom(rng.startContainer), rng.startOffset);\n      withScrollEvents(editor, doc, f, marker, alignToTop);\n      marker.cleanup();\n    };\n    var withElement = function (editor, element, f, alignToTop) {\n      var doc = SugarElement.fromDom(editor.getDoc());\n      withScrollEvents(editor, doc, f, elementMarker(element), alignToTop);\n    };\n    var preserveWith = function (editor, f, rng) {\n      var startElement = rng.startContainer;\n      var startOffset = rng.startOffset;\n      var endElement = rng.endContainer;\n      var endOffset = rng.endOffset;\n      f(SugarElement.fromDom(startElement), SugarElement.fromDom(endElement));\n      var newRng = editor.dom.createRng();\n      newRng.setStart(startElement, startOffset);\n      newRng.setEnd(endElement, endOffset);\n      editor.selection.setRng(rng);\n    };\n    var scrollToMarker = function (marker, viewHeight, alignToTop, doc) {\n      var pos = marker.pos;\n      if (alignToTop) {\n        to(pos.left, pos.top, doc);\n      } else {\n        var y = pos.top - viewHeight + marker.height;\n        to(pos.left, y, doc);\n      }\n    };\n    var intoWindowIfNeeded = function (doc, scrollTop, viewHeight, marker, alignToTop) {\n      var viewportBottom = viewHeight + scrollTop;\n      var markerTop = marker.pos.top;\n      var markerBottom = marker.bottom;\n      var largerThanViewport = markerBottom - markerTop >= viewHeight;\n      if (markerTop < scrollTop) {\n        scrollToMarker(marker, viewHeight, alignToTop !== false, doc);\n      } else if (markerTop > viewportBottom) {\n        var align = largerThanViewport ? alignToTop !== false : alignToTop === true;\n        scrollToMarker(marker, viewHeight, align, doc);\n      } else if (markerBottom > viewportBottom && !largerThanViewport) {\n        scrollToMarker(marker, viewHeight, alignToTop === true, doc);\n      }\n    };\n    var intoWindow = function (doc, scrollTop, marker, alignToTop) {\n      var viewHeight = doc.dom.defaultView.innerHeight;\n      intoWindowIfNeeded(doc, scrollTop, viewHeight, marker, alignToTop);\n    };\n    var intoFrame = function (doc, scrollTop, marker, alignToTop) {\n      var frameViewHeight = doc.dom.defaultView.innerHeight;\n      intoWindowIfNeeded(doc, scrollTop, frameViewHeight, marker, alignToTop);\n      var op = find$1(marker.element);\n      var viewportBounds = getBounds(window);\n      if (op.top < viewportBounds.y) {\n        intoView(marker.element, alignToTop !== false);\n      } else if (op.top > viewportBounds.bottom) {\n        intoView(marker.element, alignToTop === true);\n      }\n    };\n    var rangeIntoWindow = function (editor, rng, alignToTop) {\n      return withMarker(editor, intoWindow, rng, alignToTop);\n    };\n    var elementIntoWindow = function (editor, element, alignToTop) {\n      return withElement(editor, element, intoWindow, alignToTop);\n    };\n    var rangeIntoFrame = function (editor, rng, alignToTop) {\n      return withMarker(editor, intoFrame, rng, alignToTop);\n    };\n    var elementIntoFrame = function (editor, element, alignToTop) {\n      return withElement(editor, element, intoFrame, alignToTop);\n    };\n    var scrollElementIntoView = function (editor, element, alignToTop) {\n      var scroller = editor.inline ? elementIntoWindow : elementIntoFrame;\n      scroller(editor, element, alignToTop);\n    };\n    var scrollRangeIntoView = function (editor, rng, alignToTop) {\n      var scroller = editor.inline ? rangeIntoWindow : rangeIntoFrame;\n      scroller(editor, rng, alignToTop);\n    };\n\n    var getDocument = function () {\n      return SugarElement.fromDom(document);\n    };\n\n    var focus$1 = function (element) {\n      return element.dom.focus();\n    };\n    var hasFocus$1 = function (element) {\n      var root = getRootNode(element).dom;\n      return element.dom === root.activeElement;\n    };\n    var active = function (root) {\n      if (root === void 0) {\n        root = getDocument();\n      }\n      return Optional.from(root.dom.activeElement).map(SugarElement.fromDom);\n    };\n    var search = function (element) {\n      return active(getRootNode(element)).filter(function (e) {\n        return element.dom.contains(e.dom);\n      });\n    };\n\n    var create$5 = function (start, soffset, finish, foffset) {\n      return {\n        start: start,\n        soffset: soffset,\n        finish: finish,\n        foffset: foffset\n      };\n    };\n    var SimRange = { create: create$5 };\n\n    var adt$1 = Adt.generate([\n      { before: ['element'] },\n      {\n        on: [\n          'element',\n          'offset'\n        ]\n      },\n      { after: ['element'] }\n    ]);\n    var cata = function (subject, onBefore, onOn, onAfter) {\n      return subject.fold(onBefore, onOn, onAfter);\n    };\n    var getStart$2 = function (situ) {\n      return situ.fold(identity, identity, identity);\n    };\n    var before$1 = adt$1.before;\n    var on = adt$1.on;\n    var after$1 = adt$1.after;\n    var Situ = {\n      before: before$1,\n      on: on,\n      after: after$1,\n      cata: cata,\n      getStart: getStart$2\n    };\n\n    var adt = Adt.generate([\n      { domRange: ['rng'] },\n      {\n        relative: [\n          'startSitu',\n          'finishSitu'\n        ]\n      },\n      {\n        exact: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var exactFromRange = function (simRange) {\n      return adt.exact(simRange.start, simRange.soffset, simRange.finish, simRange.foffset);\n    };\n    var getStart$1 = function (selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return SugarElement.fromDom(rng.startContainer);\n        },\n        relative: function (startSitu, _finishSitu) {\n          return Situ.getStart(startSitu);\n        },\n        exact: function (start, _soffset, _finish, _foffset) {\n          return start;\n        }\n      });\n    };\n    var domRange = adt.domRange;\n    var relative = adt.relative;\n    var exact = adt.exact;\n    var getWin = function (selection) {\n      var start = getStart$1(selection);\n      return defaultView(start);\n    };\n    var range = SimRange.create;\n    var SimSelection = {\n      domRange: domRange,\n      relative: relative,\n      exact: exact,\n      exactFromRange: exactFromRange,\n      getWin: getWin,\n      range: range\n    };\n\n    var browser$1 = detect().browser;\n    var clamp$1 = function (offset, element) {\n      var max = isText$8(element) ? get$2(element).length : children(element).length + 1;\n      if (offset > max) {\n        return max;\n      } else if (offset < 0) {\n        return 0;\n      }\n      return offset;\n    };\n    var normalizeRng = function (rng) {\n      return SimSelection.range(rng.start, clamp$1(rng.soffset, rng.start), rng.finish, clamp$1(rng.foffset, rng.finish));\n    };\n    var isOrContains = function (root, elm) {\n      return !isRestrictedNode(elm.dom) && (contains$1(root, elm) || eq(root, elm));\n    };\n    var isRngInRoot = function (root) {\n      return function (rng) {\n        return isOrContains(root, rng.start) && isOrContains(root, rng.finish);\n      };\n    };\n    var shouldStore = function (editor) {\n      return editor.inline === true || browser$1.isIE();\n    };\n    var nativeRangeToSelectionRange = function (r) {\n      return SimSelection.range(SugarElement.fromDom(r.startContainer), r.startOffset, SugarElement.fromDom(r.endContainer), r.endOffset);\n    };\n    var readRange = function (win) {\n      var selection = win.getSelection();\n      var rng = !selection || selection.rangeCount === 0 ? Optional.none() : Optional.from(selection.getRangeAt(0));\n      return rng.map(nativeRangeToSelectionRange);\n    };\n    var getBookmark = function (root) {\n      var win = defaultView(root);\n      return readRange(win.dom).filter(isRngInRoot(root));\n    };\n    var validate = function (root, bookmark) {\n      return Optional.from(bookmark).filter(isRngInRoot(root)).map(normalizeRng);\n    };\n    var bookmarkToNativeRng = function (bookmark) {\n      var rng = document.createRange();\n      try {\n        rng.setStart(bookmark.start.dom, bookmark.soffset);\n        rng.setEnd(bookmark.finish.dom, bookmark.foffset);\n        return Optional.some(rng);\n      } catch (_) {\n        return Optional.none();\n      }\n    };\n    var store = function (editor) {\n      var newBookmark = shouldStore(editor) ? getBookmark(SugarElement.fromDom(editor.getBody())) : Optional.none();\n      editor.bookmark = newBookmark.isSome() ? newBookmark : editor.bookmark;\n    };\n    var storeNative = function (editor, rng) {\n      var root = SugarElement.fromDom(editor.getBody());\n      var range = shouldStore(editor) ? Optional.from(rng) : Optional.none();\n      var newBookmark = range.map(nativeRangeToSelectionRange).filter(isRngInRoot(root));\n      editor.bookmark = newBookmark.isSome() ? newBookmark : editor.bookmark;\n    };\n    var getRng = function (editor) {\n      var bookmark = editor.bookmark ? editor.bookmark : Optional.none();\n      return bookmark.bind(function (x) {\n        return validate(SugarElement.fromDom(editor.getBody()), x);\n      }).bind(bookmarkToNativeRng);\n    };\n    var restore = function (editor) {\n      getRng(editor).each(function (rng) {\n        return editor.selection.setRng(rng);\n      });\n    };\n\n    var isEditorUIElement$1 = function (elm) {\n      var className = elm.className.toString();\n      return className.indexOf('tox-') !== -1 || className.indexOf('mce-') !== -1;\n    };\n    var FocusManager = { isEditorUIElement: isEditorUIElement$1 };\n\n    var isManualNodeChange = function (e) {\n      return e.type === 'nodechange' && e.selectionChange;\n    };\n    var registerPageMouseUp = function (editor, throttledStore) {\n      var mouseUpPage = function () {\n        throttledStore.throttle();\n      };\n      DOMUtils.DOM.bind(document, 'mouseup', mouseUpPage);\n      editor.on('remove', function () {\n        DOMUtils.DOM.unbind(document, 'mouseup', mouseUpPage);\n      });\n    };\n    var registerFocusOut = function (editor) {\n      editor.on('focusout', function () {\n        store(editor);\n      });\n    };\n    var registerMouseUp = function (editor, throttledStore) {\n      editor.on('mouseup touchend', function (_e) {\n        throttledStore.throttle();\n      });\n    };\n    var registerEditorEvents = function (editor, throttledStore) {\n      var browser = detect().browser;\n      if (browser.isIE()) {\n        registerFocusOut(editor);\n      } else {\n        registerMouseUp(editor, throttledStore);\n      }\n      editor.on('keyup NodeChange', function (e) {\n        if (!isManualNodeChange(e)) {\n          store(editor);\n        }\n      });\n    };\n    var register$3 = function (editor) {\n      var throttledStore = first(function () {\n        store(editor);\n      }, 0);\n      editor.on('init', function () {\n        if (editor.inline) {\n          registerPageMouseUp(editor, throttledStore);\n        }\n        registerEditorEvents(editor, throttledStore);\n      });\n      editor.on('remove', function () {\n        throttledStore.cancel();\n      });\n    };\n\n    var documentFocusInHandler;\n    var DOM$8 = DOMUtils.DOM;\n    var isEditorUIElement = function (elm) {\n      return FocusManager.isEditorUIElement(elm);\n    };\n    var isEditorContentAreaElement = function (elm) {\n      var classList = elm.classList;\n      if (classList !== undefined) {\n        return classList.contains('tox-edit-area') || classList.contains('tox-edit-area__iframe') || classList.contains('mce-content-body');\n      } else {\n        return false;\n      }\n    };\n    var isUIElement = function (editor, elm) {\n      var customSelector = getCustomUiSelector(editor);\n      var parent = DOM$8.getParent(elm, function (elm) {\n        return isEditorUIElement(elm) || (customSelector ? editor.dom.is(elm, customSelector) : false);\n      });\n      return parent !== null;\n    };\n    var getActiveElement = function (editor) {\n      try {\n        var root = getRootNode(SugarElement.fromDom(editor.getElement()));\n        return active(root).fold(function () {\n          return document.body;\n        }, function (x) {\n          return x.dom;\n        });\n      } catch (ex) {\n        return document.body;\n      }\n    };\n    var registerEvents$1 = function (editorManager, e) {\n      var editor = e.editor;\n      register$3(editor);\n      editor.on('focusin', function () {\n        var focusedEditor = editorManager.focusedEditor;\n        if (focusedEditor !== editor) {\n          if (focusedEditor) {\n            focusedEditor.fire('blur', { focusedEditor: editor });\n          }\n          editorManager.setActive(editor);\n          editorManager.focusedEditor = editor;\n          editor.fire('focus', { blurredEditor: focusedEditor });\n          editor.focus(true);\n        }\n      });\n      editor.on('focusout', function () {\n        Delay.setEditorTimeout(editor, function () {\n          var focusedEditor = editorManager.focusedEditor;\n          if (!isUIElement(editor, getActiveElement(editor)) && focusedEditor === editor) {\n            editor.fire('blur', { focusedEditor: null });\n            editorManager.focusedEditor = null;\n          }\n        });\n      });\n      if (!documentFocusInHandler) {\n        documentFocusInHandler = function (e) {\n          var activeEditor = editorManager.activeEditor;\n          if (activeEditor) {\n            getOriginalEventTarget(e).each(function (target) {\n              if (target.ownerDocument === document) {\n                if (target !== document.body && !isUIElement(activeEditor, target) && editorManager.focusedEditor === activeEditor) {\n                  activeEditor.fire('blur', { focusedEditor: null });\n                  editorManager.focusedEditor = null;\n                }\n              }\n            });\n          }\n        };\n        DOM$8.bind(document, 'focusin', documentFocusInHandler);\n      }\n    };\n    var unregisterDocumentEvents = function (editorManager, e) {\n      if (editorManager.focusedEditor === e.editor) {\n        editorManager.focusedEditor = null;\n      }\n      if (!editorManager.activeEditor) {\n        DOM$8.unbind(document, 'focusin', documentFocusInHandler);\n        documentFocusInHandler = null;\n      }\n    };\n    var setup$l = function (editorManager) {\n      editorManager.on('AddEditor', curry(registerEvents$1, editorManager));\n      editorManager.on('RemoveEditor', curry(unregisterDocumentEvents, editorManager));\n    };\n\n    var getContentEditableHost = function (editor, node) {\n      return editor.dom.getParent(node, function (node) {\n        return editor.dom.getContentEditable(node) === 'true';\n      });\n    };\n    var getCollapsedNode = function (rng) {\n      return rng.collapsed ? Optional.from(getNode$1(rng.startContainer, rng.startOffset)).map(SugarElement.fromDom) : Optional.none();\n    };\n    var getFocusInElement = function (root, rng) {\n      return getCollapsedNode(rng).bind(function (node) {\n        if (isTableSection(node)) {\n          return Optional.some(node);\n        } else if (contains$1(root, node) === false) {\n          return Optional.some(root);\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var normalizeSelection$1 = function (editor, rng) {\n      getFocusInElement(SugarElement.fromDom(editor.getBody()), rng).bind(function (elm) {\n        return firstPositionIn(elm.dom);\n      }).fold(function () {\n        editor.selection.normalize();\n        return;\n      }, function (caretPos) {\n        return editor.selection.setRng(caretPos.toRange());\n      });\n    };\n    var focusBody = function (body) {\n      if (body.setActive) {\n        try {\n          body.setActive();\n        } catch (ex) {\n          body.focus();\n        }\n      } else {\n        body.focus();\n      }\n    };\n    var hasElementFocus = function (elm) {\n      return hasFocus$1(elm) || search(elm).isSome();\n    };\n    var hasIframeFocus = function (editor) {\n      return editor.iframeElement && hasFocus$1(SugarElement.fromDom(editor.iframeElement));\n    };\n    var hasInlineFocus = function (editor) {\n      var rawBody = editor.getBody();\n      return rawBody && hasElementFocus(SugarElement.fromDom(rawBody));\n    };\n    var hasUiFocus = function (editor) {\n      var dos = getRootNode(SugarElement.fromDom(editor.getElement()));\n      return active(dos).filter(function (elem) {\n        return !isEditorContentAreaElement(elem.dom) && isUIElement(editor, elem.dom);\n      }).isSome();\n    };\n    var hasFocus = function (editor) {\n      return editor.inline ? hasInlineFocus(editor) : hasIframeFocus(editor);\n    };\n    var hasEditorOrUiFocus = function (editor) {\n      return hasFocus(editor) || hasUiFocus(editor);\n    };\n    var focusEditor = function (editor) {\n      var selection = editor.selection;\n      var body = editor.getBody();\n      var rng = selection.getRng();\n      editor.quirks.refreshContentEditable();\n      if (editor.bookmark !== undefined && hasFocus(editor) === false) {\n        getRng(editor).each(function (bookmarkRng) {\n          editor.selection.setRng(bookmarkRng);\n          rng = bookmarkRng;\n        });\n      }\n      var contentEditableHost = getContentEditableHost(editor, selection.getNode());\n      if (editor.$.contains(body, contentEditableHost)) {\n        focusBody(contentEditableHost);\n        normalizeSelection$1(editor, rng);\n        activateEditor(editor);\n        return;\n      }\n      if (!editor.inline) {\n        if (!Env.opera) {\n          focusBody(body);\n        }\n        editor.getWin().focus();\n      }\n      if (Env.gecko || editor.inline) {\n        focusBody(body);\n        normalizeSelection$1(editor, rng);\n      }\n      activateEditor(editor);\n    };\n    var activateEditor = function (editor) {\n      return editor.editorManager.setActive(editor);\n    };\n    var focus = function (editor, skipFocus) {\n      if (editor.removed) {\n        return;\n      }\n      if (skipFocus) {\n        activateEditor(editor);\n      } else {\n        focusEditor(editor);\n      }\n    };\n\n    var getEndpointElement = function (root, rng, start, real, resolve) {\n      var container = start ? rng.startContainer : rng.endContainer;\n      var offset = start ? rng.startOffset : rng.endOffset;\n      return Optional.from(container).map(SugarElement.fromDom).map(function (elm) {\n        return !real || !rng.collapsed ? child$1(elm, resolve(elm, offset)).getOr(elm) : elm;\n      }).bind(function (elm) {\n        return isElement$6(elm) ? Optional.some(elm) : parent(elm).filter(isElement$6);\n      }).map(function (elm) {\n        return elm.dom;\n      }).getOr(root);\n    };\n    var getStart = function (root, rng, real) {\n      return getEndpointElement(root, rng, true, real, function (elm, offset) {\n        return Math.min(childNodesCount(elm), offset);\n      });\n    };\n    var getEnd = function (root, rng, real) {\n      return getEndpointElement(root, rng, false, real, function (elm, offset) {\n        return offset > 0 ? offset - 1 : offset;\n      });\n    };\n    var skipEmptyTextNodes = function (node, forwards) {\n      var orig = node;\n      while (node && isText$7(node) && node.length === 0) {\n        node = forwards ? node.nextSibling : node.previousSibling;\n      }\n      return node || orig;\n    };\n    var getNode = function (root, rng) {\n      var elm, startContainer, endContainer;\n      if (!rng) {\n        return root;\n      }\n      startContainer = rng.startContainer;\n      endContainer = rng.endContainer;\n      var startOffset = rng.startOffset;\n      var endOffset = rng.endOffset;\n      elm = rng.commonAncestorContainer;\n      if (!rng.collapsed) {\n        if (startContainer === endContainer) {\n          if (endOffset - startOffset < 2) {\n            if (startContainer.hasChildNodes()) {\n              elm = startContainer.childNodes[startOffset];\n            }\n          }\n        }\n        if (startContainer.nodeType === 3 && endContainer.nodeType === 3) {\n          if (startContainer.length === startOffset) {\n            startContainer = skipEmptyTextNodes(startContainer.nextSibling, true);\n          } else {\n            startContainer = startContainer.parentNode;\n          }\n          if (endOffset === 0) {\n            endContainer = skipEmptyTextNodes(endContainer.previousSibling, false);\n          } else {\n            endContainer = endContainer.parentNode;\n          }\n          if (startContainer && startContainer === endContainer) {\n            return startContainer;\n          }\n        }\n      }\n      if (elm && elm.nodeType === 3) {\n        return elm.parentNode;\n      }\n      return elm;\n    };\n    var getSelectedBlocks = function (dom, rng, startElm, endElm) {\n      var node;\n      var selectedBlocks = [];\n      var root = dom.getRoot();\n      startElm = dom.getParent(startElm || getStart(root, rng, rng.collapsed), dom.isBlock);\n      endElm = dom.getParent(endElm || getEnd(root, rng, rng.collapsed), dom.isBlock);\n      if (startElm && startElm !== root) {\n        selectedBlocks.push(startElm);\n      }\n      if (startElm && endElm && startElm !== endElm) {\n        node = startElm;\n        var walker = new DomTreeWalker(startElm, root);\n        while ((node = walker.next()) && node !== endElm) {\n          if (dom.isBlock(node)) {\n            selectedBlocks.push(node);\n          }\n        }\n      }\n      if (endElm && startElm !== endElm && endElm !== root) {\n        selectedBlocks.push(endElm);\n      }\n      return selectedBlocks;\n    };\n    var select = function (dom, node, content) {\n      return Optional.from(node).map(function (node) {\n        var idx = dom.nodeIndex(node);\n        var rng = dom.createRng();\n        rng.setStart(node.parentNode, idx);\n        rng.setEnd(node.parentNode, idx + 1);\n        if (content) {\n          moveEndPoint(dom, rng, node, true);\n          moveEndPoint(dom, rng, node, false);\n        }\n        return rng;\n      });\n    };\n\n    var processRanges = function (editor, ranges) {\n      return map$3(ranges, function (range) {\n        var evt = editor.fire('GetSelectionRange', { range: range });\n        return evt.range !== range ? evt.range : range;\n      });\n    };\n\n    var typeLookup = {\n      '#text': 3,\n      '#comment': 8,\n      '#cdata': 4,\n      '#pi': 7,\n      '#doctype': 10,\n      '#document-fragment': 11\n    };\n    var walk$1 = function (node, root, prev) {\n      var startName = prev ? 'lastChild' : 'firstChild';\n      var siblingName = prev ? 'prev' : 'next';\n      if (node[startName]) {\n        return node[startName];\n      }\n      if (node !== root) {\n        var sibling = node[siblingName];\n        if (sibling) {\n          return sibling;\n        }\n        for (var parent_1 = node.parent; parent_1 && parent_1 !== root; parent_1 = parent_1.parent) {\n          sibling = parent_1[siblingName];\n          if (sibling) {\n            return sibling;\n          }\n        }\n      }\n    };\n    var isEmptyTextNode = function (node) {\n      if (!isWhitespaceText(node.value)) {\n        return false;\n      }\n      var parentNode = node.parent;\n      if (parentNode && (parentNode.name !== 'span' || parentNode.attr('style')) && /^[ ]+$/.test(node.value)) {\n        return false;\n      }\n      return true;\n    };\n    var isNonEmptyElement = function (node) {\n      var isNamedAnchor = node.name === 'a' && !node.attr('href') && node.attr('id');\n      return node.attr('name') || node.attr('id') && !node.firstChild || node.attr('data-mce-bookmark') || isNamedAnchor;\n    };\n    var AstNode = function () {\n      function AstNode(name, type) {\n        this.name = name;\n        this.type = type;\n        if (type === 1) {\n          this.attributes = [];\n          this.attributes.map = {};\n        }\n      }\n      AstNode.create = function (name, attrs) {\n        var node = new AstNode(name, typeLookup[name] || 1);\n        if (attrs) {\n          each$j(attrs, function (value, attrName) {\n            node.attr(attrName, value);\n          });\n        }\n        return node;\n      };\n      AstNode.prototype.replace = function (node) {\n        var self = this;\n        if (node.parent) {\n          node.remove();\n        }\n        self.insert(node, self);\n        self.remove();\n        return self;\n      };\n      AstNode.prototype.attr = function (name, value) {\n        var self = this;\n        var attrs;\n        if (typeof name !== 'string') {\n          if (name !== undefined && name !== null) {\n            each$j(name, function (value, key) {\n              self.attr(key, value);\n            });\n          }\n          return self;\n        }\n        if (attrs = self.attributes) {\n          if (value !== undefined) {\n            if (value === null) {\n              if (name in attrs.map) {\n                delete attrs.map[name];\n                var i = attrs.length;\n                while (i--) {\n                  if (attrs[i].name === name) {\n                    attrs.splice(i, 1);\n                    return self;\n                  }\n                }\n              }\n              return self;\n            }\n            if (name in attrs.map) {\n              var i = attrs.length;\n              while (i--) {\n                if (attrs[i].name === name) {\n                  attrs[i].value = value;\n                  break;\n                }\n              }\n            } else {\n              attrs.push({\n                name: name,\n                value: value\n              });\n            }\n            attrs.map[name] = value;\n            return self;\n          }\n          return attrs.map[name];\n        }\n      };\n      AstNode.prototype.clone = function () {\n        var self = this;\n        var clone = new AstNode(self.name, self.type);\n        var selfAttrs;\n        if (selfAttrs = self.attributes) {\n          var cloneAttrs = [];\n          cloneAttrs.map = {};\n          for (var i = 0, l = selfAttrs.length; i < l; i++) {\n            var selfAttr = selfAttrs[i];\n            if (selfAttr.name !== 'id') {\n              cloneAttrs[cloneAttrs.length] = {\n                name: selfAttr.name,\n                value: selfAttr.value\n              };\n              cloneAttrs.map[selfAttr.name] = selfAttr.value;\n            }\n          }\n          clone.attributes = cloneAttrs;\n        }\n        clone.value = self.value;\n        clone.shortEnded = self.shortEnded;\n        return clone;\n      };\n      AstNode.prototype.wrap = function (wrapper) {\n        var self = this;\n        self.parent.insert(wrapper, self);\n        wrapper.append(self);\n        return self;\n      };\n      AstNode.prototype.unwrap = function () {\n        var self = this;\n        for (var node = self.firstChild; node;) {\n          var next = node.next;\n          self.insert(node, self, true);\n          node = next;\n        }\n        self.remove();\n      };\n      AstNode.prototype.remove = function () {\n        var self = this, parent = self.parent, next = self.next, prev = self.prev;\n        if (parent) {\n          if (parent.firstChild === self) {\n            parent.firstChild = next;\n            if (next) {\n              next.prev = null;\n            }\n          } else {\n            prev.next = next;\n          }\n          if (parent.lastChild === self) {\n            parent.lastChild = prev;\n            if (prev) {\n              prev.next = null;\n            }\n          } else {\n            next.prev = prev;\n          }\n          self.parent = self.next = self.prev = null;\n        }\n        return self;\n      };\n      AstNode.prototype.append = function (node) {\n        var self = this;\n        if (node.parent) {\n          node.remove();\n        }\n        var last = self.lastChild;\n        if (last) {\n          last.next = node;\n          node.prev = last;\n          self.lastChild = node;\n        } else {\n          self.lastChild = self.firstChild = node;\n        }\n        node.parent = self;\n        return node;\n      };\n      AstNode.prototype.insert = function (node, refNode, before) {\n        if (node.parent) {\n          node.remove();\n        }\n        var parent = refNode.parent || this;\n        if (before) {\n          if (refNode === parent.firstChild) {\n            parent.firstChild = node;\n          } else {\n            refNode.prev.next = node;\n          }\n          node.prev = refNode.prev;\n          node.next = refNode;\n          refNode.prev = node;\n        } else {\n          if (refNode === parent.lastChild) {\n            parent.lastChild = node;\n          } else {\n            refNode.next.prev = node;\n          }\n          node.next = refNode.next;\n          node.prev = refNode;\n          refNode.next = node;\n        }\n        node.parent = parent;\n        return node;\n      };\n      AstNode.prototype.getAll = function (name) {\n        var self = this;\n        var collection = [];\n        for (var node = self.firstChild; node; node = walk$1(node, self)) {\n          if (node.name === name) {\n            collection.push(node);\n          }\n        }\n        return collection;\n      };\n      AstNode.prototype.children = function () {\n        var self = this;\n        var collection = [];\n        for (var node = self.firstChild; node; node = node.next) {\n          collection.push(node);\n        }\n        return collection;\n      };\n      AstNode.prototype.empty = function () {\n        var self = this;\n        if (self.firstChild) {\n          var nodes = [];\n          for (var node = self.firstChild; node; node = walk$1(node, self)) {\n            nodes.push(node);\n          }\n          var i = nodes.length;\n          while (i--) {\n            var node = nodes[i];\n            node.parent = node.firstChild = node.lastChild = node.next = node.prev = null;\n          }\n        }\n        self.firstChild = self.lastChild = null;\n        return self;\n      };\n      AstNode.prototype.isEmpty = function (elements, whitespace, predicate) {\n        if (whitespace === void 0) {\n          whitespace = {};\n        }\n        var self = this;\n        var node = self.firstChild;\n        if (isNonEmptyElement(self)) {\n          return false;\n        }\n        if (node) {\n          do {\n            if (node.type === 1) {\n              if (node.attr('data-mce-bogus')) {\n                continue;\n              }\n              if (elements[node.name]) {\n                return false;\n              }\n              if (isNonEmptyElement(node)) {\n                return false;\n              }\n            }\n            if (node.type === 8) {\n              return false;\n            }\n            if (node.type === 3 && !isEmptyTextNode(node)) {\n              return false;\n            }\n            if (node.type === 3 && node.parent && whitespace[node.parent.name] && isWhitespaceText(node.value)) {\n              return false;\n            }\n            if (predicate && predicate(node)) {\n              return false;\n            }\n          } while (node = walk$1(node, self));\n        }\n        return true;\n      };\n      AstNode.prototype.walk = function (prev) {\n        return walk$1(this, null, prev);\n      };\n      return AstNode;\n    }();\n\n    var unescapedTextParents = Tools.makeMap('NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT', ' ');\n    var containsZwsp = function (node) {\n      return isString$1(node.nodeValue) && contains$2(node.nodeValue, ZWSP$1);\n    };\n    var getTemporaryNodeSelector = function (tempAttrs) {\n      return (tempAttrs.length === 0 ? '' : map$3(tempAttrs, function (attr) {\n        return '[' + attr + ']';\n      }).join(',') + ',') + '[data-mce-bogus=\"all\"]';\n    };\n    var getTemporaryNodes = function (tempAttrs, body) {\n      return body.querySelectorAll(getTemporaryNodeSelector(tempAttrs));\n    };\n    var createWalker = function (body, whatToShow, filter) {\n      return document.createTreeWalker(body, whatToShow, filter, false);\n    };\n    var createZwspCommentWalker = function (body) {\n      return createWalker(body, NodeFilter.SHOW_COMMENT, function (node) {\n        return containsZwsp(node) ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_SKIP;\n      });\n    };\n    var createUnescapedZwspTextWalker = function (body) {\n      return createWalker(body, NodeFilter.SHOW_TEXT, function (node) {\n        if (containsZwsp(node)) {\n          var parent_1 = node.parentNode;\n          return parent_1 && has$2(unescapedTextParents, parent_1.nodeName) ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_SKIP;\n        } else {\n          return NodeFilter.FILTER_SKIP;\n        }\n      });\n    };\n    var hasZwspComment = function (body) {\n      return createZwspCommentWalker(body).nextNode() !== null;\n    };\n    var hasUnescapedZwspText = function (body) {\n      return createUnescapedZwspTextWalker(body).nextNode() !== null;\n    };\n    var hasTemporaryNode = function (tempAttrs, body) {\n      return body.querySelector(getTemporaryNodeSelector(tempAttrs)) !== null;\n    };\n    var trimTemporaryNodes = function (tempAttrs, body) {\n      each$k(getTemporaryNodes(tempAttrs, body), function (elm) {\n        var element = SugarElement.fromDom(elm);\n        if (get$6(element, 'data-mce-bogus') === 'all') {\n          remove$7(element);\n        } else {\n          each$k(tempAttrs, function (attr) {\n            if (has$1(element, attr)) {\n              remove$6(element, attr);\n            }\n          });\n        }\n      });\n    };\n    var emptyAllNodeValuesInWalker = function (walker) {\n      var curr = walker.nextNode();\n      while (curr !== null) {\n        curr.nodeValue = null;\n        curr = walker.nextNode();\n      }\n    };\n    var emptyZwspComments = compose(emptyAllNodeValuesInWalker, createZwspCommentWalker);\n    var emptyUnescapedZwspTexts = compose(emptyAllNodeValuesInWalker, createUnescapedZwspTextWalker);\n    var trim$1 = function (body, tempAttrs) {\n      var conditionalTrims = [\n        {\n          condition: curry(hasTemporaryNode, tempAttrs),\n          action: curry(trimTemporaryNodes, tempAttrs)\n        },\n        {\n          condition: hasZwspComment,\n          action: emptyZwspComments\n        },\n        {\n          condition: hasUnescapedZwspText,\n          action: emptyUnescapedZwspTexts\n        }\n      ];\n      var trimmed = body;\n      var cloned = false;\n      each$k(conditionalTrims, function (_a) {\n        var condition = _a.condition, action = _a.action;\n        if (condition(trimmed)) {\n          if (!cloned) {\n            trimmed = body.cloneNode(true);\n            cloned = true;\n          }\n          action(trimmed);\n        }\n      });\n      return trimmed;\n    };\n\n    var trimEmptyContents = function (editor, html) {\n      var blockName = getForcedRootBlock(editor);\n      var emptyRegExp = new RegExp('^(<' + blockName + '[^>]*>(&nbsp;|&#160;|\\\\s|\\xA0|<br \\\\/>|)<\\\\/' + blockName + '>[\\r\\n]*|<br \\\\/>[\\r\\n]*)$');\n      return html.replace(emptyRegExp, '');\n    };\n    var setupArgs$3 = function (args, format) {\n      return __assign(__assign({}, args), {\n        format: format,\n        get: true,\n        getInner: true\n      });\n    };\n    var getContentFromBody = function (editor, args, format, body) {\n      var defaultedArgs = setupArgs$3(args, format);\n      var updatedArgs = args.no_events ? defaultedArgs : editor.fire('BeforeGetContent', defaultedArgs);\n      var content;\n      if (updatedArgs.format === 'raw') {\n        content = Tools.trim(trim$3(trim$1(body, editor.serializer.getTempAttrs()).innerHTML));\n      } else if (updatedArgs.format === 'text') {\n        content = editor.dom.isEmpty(body) ? '' : trim$3(body.innerText || body.textContent);\n      } else if (updatedArgs.format === 'tree') {\n        content = editor.serializer.serialize(body, updatedArgs);\n      } else {\n        content = trimEmptyContents(editor, editor.serializer.serialize(body, updatedArgs));\n      }\n      if (!contains$3([\n          'text',\n          'tree'\n        ], updatedArgs.format) && !isWsPreserveElement(SugarElement.fromDom(body))) {\n        updatedArgs.content = Tools.trim(content);\n      } else {\n        updatedArgs.content = content;\n      }\n      if (updatedArgs.no_events) {\n        return updatedArgs.content;\n      } else {\n        return editor.fire('GetContent', updatedArgs).content;\n      }\n    };\n    var getContentInternal = function (editor, args, format) {\n      return Optional.from(editor.getBody()).fold(constant(args.format === 'tree' ? new AstNode('body', 11) : ''), function (body) {\n        return getContentFromBody(editor, args, format, body);\n      });\n    };\n\n    var each$d = Tools.each;\n    var ElementUtils = function (dom) {\n      var compare = function (node1, node2) {\n        if (node1.nodeName !== node2.nodeName) {\n          return false;\n        }\n        var getAttribs = function (node) {\n          var attribs = {};\n          each$d(dom.getAttribs(node), function (attr) {\n            var name = attr.nodeName.toLowerCase();\n            if (name.indexOf('_') !== 0 && name !== 'style' && name.indexOf('data-') !== 0) {\n              attribs[name] = dom.getAttrib(node, name);\n            }\n          });\n          return attribs;\n        };\n        var compareObjects = function (obj1, obj2) {\n          var value, name;\n          for (name in obj1) {\n            if (has$2(obj1, name)) {\n              value = obj2[name];\n              if (typeof value === 'undefined') {\n                return false;\n              }\n              if (obj1[name] !== value) {\n                return false;\n              }\n              delete obj2[name];\n            }\n          }\n          for (name in obj2) {\n            if (has$2(obj2, name)) {\n              return false;\n            }\n          }\n          return true;\n        };\n        if (!compareObjects(getAttribs(node1), getAttribs(node2))) {\n          return false;\n        }\n        if (!compareObjects(dom.parseStyle(dom.getAttrib(node1, 'style')), dom.parseStyle(dom.getAttrib(node2, 'style')))) {\n          return false;\n        }\n        return !isBookmarkNode$1(node1) && !isBookmarkNode$1(node2);\n      };\n      return { compare: compare };\n    };\n\n    var makeMap$1 = Tools.makeMap;\n    var Writer = function (settings) {\n      var html = [];\n      settings = settings || {};\n      var indent = settings.indent;\n      var indentBefore = makeMap$1(settings.indent_before || '');\n      var indentAfter = makeMap$1(settings.indent_after || '');\n      var encode = Entities.getEncodeFunc(settings.entity_encoding || 'raw', settings.entities);\n      var htmlOutput = settings.element_format === 'html';\n      return {\n        start: function (name, attrs, empty) {\n          var i, l, attr, value;\n          if (indent && indentBefore[name] && html.length > 0) {\n            value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n          html.push('<', name);\n          if (attrs) {\n            for (i = 0, l = attrs.length; i < l; i++) {\n              attr = attrs[i];\n              html.push(' ', attr.name, '=\"', encode(attr.value, true), '\"');\n            }\n          }\n          if (!empty || htmlOutput) {\n            html[html.length] = '>';\n          } else {\n            html[html.length] = ' />';\n          }\n          if (empty && indent && indentAfter[name] && html.length > 0) {\n            value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n        },\n        end: function (name) {\n          var value;\n          html.push('</', name, '>');\n          if (indent && indentAfter[name] && html.length > 0) {\n            value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n        },\n        text: function (text, raw) {\n          if (text.length > 0) {\n            html[html.length] = raw ? text : encode(text);\n          }\n        },\n        cdata: function (text) {\n          html.push('<![CDATA[', text, ']]>');\n        },\n        comment: function (text) {\n          html.push('<!--', text, '-->');\n        },\n        pi: function (name, text) {\n          if (text) {\n            html.push('<?', name, ' ', encode(text), '?>');\n          } else {\n            html.push('<?', name, '?>');\n          }\n          if (indent) {\n            html.push('\\n');\n          }\n        },\n        doctype: function (text) {\n          html.push('<!DOCTYPE', text, '>', indent ? '\\n' : '');\n        },\n        reset: function () {\n          html.length = 0;\n        },\n        getContent: function () {\n          return html.join('').replace(/\\n$/, '');\n        }\n      };\n    };\n\n    var HtmlSerializer = function (settings, schema) {\n      if (schema === void 0) {\n        schema = Schema();\n      }\n      var writer = Writer(settings);\n      settings = settings || {};\n      settings.validate = 'validate' in settings ? settings.validate : true;\n      var serialize = function (node) {\n        var validate = settings.validate;\n        var handlers = {\n          3: function (node) {\n            writer.text(node.value, node.raw);\n          },\n          8: function (node) {\n            writer.comment(node.value);\n          },\n          7: function (node) {\n            writer.pi(node.name, node.value);\n          },\n          10: function (node) {\n            writer.doctype(node.value);\n          },\n          4: function (node) {\n            writer.cdata(node.value);\n          },\n          11: function (node) {\n            if (node = node.firstChild) {\n              do {\n                walk(node);\n              } while (node = node.next);\n            }\n          }\n        };\n        writer.reset();\n        var walk = function (node) {\n          var handler = handlers[node.type];\n          if (!handler) {\n            var name_1 = node.name;\n            var isEmpty = node.shortEnded;\n            var attrs = node.attributes;\n            if (validate && attrs && attrs.length > 1) {\n              var sortedAttrs = [];\n              sortedAttrs.map = {};\n              var elementRule = schema.getElementRule(node.name);\n              if (elementRule) {\n                for (var i = 0, l = elementRule.attributesOrder.length; i < l; i++) {\n                  var attrName = elementRule.attributesOrder[i];\n                  if (attrName in attrs.map) {\n                    var attrValue = attrs.map[attrName];\n                    sortedAttrs.map[attrName] = attrValue;\n                    sortedAttrs.push({\n                      name: attrName,\n                      value: attrValue\n                    });\n                  }\n                }\n                for (var i = 0, l = attrs.length; i < l; i++) {\n                  var attrName = attrs[i].name;\n                  if (!(attrName in sortedAttrs.map)) {\n                    var attrValue = attrs.map[attrName];\n                    sortedAttrs.map[attrName] = attrValue;\n                    sortedAttrs.push({\n                      name: attrName,\n                      value: attrValue\n                    });\n                  }\n                }\n                attrs = sortedAttrs;\n              }\n            }\n            writer.start(node.name, attrs, isEmpty);\n            if (!isEmpty) {\n              if (node = node.firstChild) {\n                do {\n                  walk(node);\n                } while (node = node.next);\n              }\n              writer.end(name_1);\n            }\n          } else {\n            handler(node);\n          }\n        };\n        if (node.type === 1 && !settings.inner) {\n          walk(node);\n        } else {\n          handlers[11](node);\n        }\n        return writer.getContent();\n      };\n      return { serialize: serialize };\n    };\n\n    var nonInheritableStyles = new Set();\n    (function () {\n      var nonInheritableStylesArr = [\n        'margin',\n        'margin-left',\n        'margin-right',\n        'margin-top',\n        'margin-bottom',\n        'padding',\n        'padding-left',\n        'padding-right',\n        'padding-top',\n        'padding-bottom',\n        'border',\n        'border-width',\n        'border-style',\n        'border-color',\n        'background',\n        'background-attachment',\n        'background-clip',\n        'background-color',\n        'background-image',\n        'background-origin',\n        'background-position',\n        'background-repeat',\n        'background-size',\n        'float',\n        'position',\n        'left',\n        'right',\n        'top',\n        'bottom',\n        'z-index',\n        'display',\n        'transform',\n        'width',\n        'max-width',\n        'min-width',\n        'height',\n        'max-height',\n        'min-height',\n        'overflow',\n        'overflow-x',\n        'overflow-y',\n        'text-overflow',\n        'vertical-align',\n        'transition',\n        'transition-delay',\n        'transition-duration',\n        'transition-property',\n        'transition-timing-function'\n      ];\n      each$k(nonInheritableStylesArr, function (style) {\n        nonInheritableStyles.add(style);\n      });\n    }());\n    var shorthandStyleProps = [\n      'font',\n      'text-decoration',\n      'text-emphasis'\n    ];\n    var getStyleProps = function (dom, node) {\n      return keys(dom.parseStyle(dom.getAttrib(node, 'style')));\n    };\n    var isNonInheritableStyle = function (style) {\n      return nonInheritableStyles.has(style);\n    };\n    var hasInheritableStyles = function (dom, node) {\n      return forall(getStyleProps(dom, node), function (style) {\n        return !isNonInheritableStyle(style);\n      });\n    };\n    var getLonghandStyleProps = function (styles) {\n      return filter$4(styles, function (style) {\n        return exists(shorthandStyleProps, function (prop) {\n          return startsWith(style, prop);\n        });\n      });\n    };\n    var hasStyleConflict = function (dom, node, parentNode) {\n      var nodeStyleProps = getStyleProps(dom, node);\n      var parentNodeStyleProps = getStyleProps(dom, parentNode);\n      var valueMismatch = function (prop) {\n        var nodeValue = dom.getStyle(node, prop);\n        var parentValue = dom.getStyle(parentNode, prop);\n        return isNotEmpty(nodeValue) && isNotEmpty(parentValue) && nodeValue !== parentValue;\n      };\n      return exists(nodeStyleProps, function (nodeStyleProp) {\n        var propExists = function (props) {\n          return exists(props, function (prop) {\n            return prop === nodeStyleProp;\n          });\n        };\n        if (!propExists(parentNodeStyleProps) && propExists(shorthandStyleProps)) {\n          var longhandProps = getLonghandStyleProps(parentNodeStyleProps);\n          return exists(longhandProps, valueMismatch);\n        } else {\n          return valueMismatch(nodeStyleProp);\n        }\n      });\n    };\n\n    var isChar = function (forward, predicate, pos) {\n      return Optional.from(pos.container()).filter(isText$7).exists(function (text) {\n        var delta = forward ? 0 : -1;\n        return predicate(text.data.charAt(pos.offset() + delta));\n      });\n    };\n    var isBeforeSpace = curry(isChar, true, isWhiteSpace);\n    var isAfterSpace = curry(isChar, false, isWhiteSpace);\n    var isEmptyText = function (pos) {\n      var container = pos.container();\n      return isText$7(container) && (container.data.length === 0 || isZwsp(container.data) && BookmarkManager.isBookmarkNode(container.parentNode));\n    };\n    var matchesElementPosition = function (before, predicate) {\n      return function (pos) {\n        return Optional.from(getChildNodeAtRelativeOffset(before ? 0 : -1, pos)).filter(predicate).isSome();\n      };\n    };\n    var isImageBlock = function (node) {\n      return isImg(node) && get$5(SugarElement.fromDom(node), 'display') === 'block';\n    };\n    var isCefNode = function (node) {\n      return isContentEditableFalse$b(node) && !isBogusAll$1(node);\n    };\n    var isBeforeImageBlock = matchesElementPosition(true, isImageBlock);\n    var isAfterImageBlock = matchesElementPosition(false, isImageBlock);\n    var isBeforeMedia = matchesElementPosition(true, isMedia$2);\n    var isAfterMedia = matchesElementPosition(false, isMedia$2);\n    var isBeforeTable = matchesElementPosition(true, isTable$3);\n    var isAfterTable = matchesElementPosition(false, isTable$3);\n    var isBeforeContentEditableFalse = matchesElementPosition(true, isCefNode);\n    var isAfterContentEditableFalse = matchesElementPosition(false, isCefNode);\n\n    var getLastChildren = function (elm) {\n      var children = [];\n      var rawNode = elm.dom;\n      while (rawNode) {\n        children.push(SugarElement.fromDom(rawNode));\n        rawNode = rawNode.lastChild;\n      }\n      return children;\n    };\n    var removeTrailingBr = function (elm) {\n      var allBrs = descendants(elm, 'br');\n      var brs = filter$4(getLastChildren(elm).slice(-1), isBr$4);\n      if (allBrs.length === brs.length) {\n        each$k(brs, remove$7);\n      }\n    };\n    var fillWithPaddingBr = function (elm) {\n      empty(elm);\n      append$1(elm, SugarElement.fromHtml('<br data-mce-bogus=\"1\">'));\n    };\n    var trimBlockTrailingBr = function (elm) {\n      lastChild(elm).each(function (lastChild) {\n        prevSibling(lastChild).each(function (lastChildPrevSibling) {\n          if (isBlock$2(elm) && isBr$4(lastChild) && isBlock$2(lastChildPrevSibling)) {\n            remove$7(lastChild);\n          }\n        });\n      });\n    };\n\n    var dropLast = function (xs) {\n      return xs.slice(0, -1);\n    };\n    var parentsUntil = function (start, root, predicate) {\n      if (contains$1(root, start)) {\n        return dropLast(parents$1(start, function (elm) {\n          return predicate(elm) || eq(elm, root);\n        }));\n      } else {\n        return [];\n      }\n    };\n    var parents = function (start, root) {\n      return parentsUntil(start, root, never);\n    };\n    var parentsAndSelf = function (start, root) {\n      return [start].concat(parents(start, root));\n    };\n\n    var navigateIgnoreEmptyTextNodes = function (forward, root, from) {\n      return navigateIgnore(forward, root, from, isEmptyText);\n    };\n    var getClosestBlock$1 = function (root, pos) {\n      return find$3(parentsAndSelf(SugarElement.fromDom(pos.container()), root), isBlock$2);\n    };\n    var isAtBeforeAfterBlockBoundary = function (forward, root, pos) {\n      return navigateIgnoreEmptyTextNodes(forward, root.dom, pos).forall(function (newPos) {\n        return getClosestBlock$1(root, pos).fold(function () {\n          return isInSameBlock(newPos, pos, root.dom) === false;\n        }, function (fromBlock) {\n          return isInSameBlock(newPos, pos, root.dom) === false && contains$1(fromBlock, SugarElement.fromDom(newPos.container()));\n        });\n      });\n    };\n    var isAtBlockBoundary = function (forward, root, pos) {\n      return getClosestBlock$1(root, pos).fold(function () {\n        return navigateIgnoreEmptyTextNodes(forward, root.dom, pos).forall(function (newPos) {\n          return isInSameBlock(newPos, pos, root.dom) === false;\n        });\n      }, function (parent) {\n        return navigateIgnoreEmptyTextNodes(forward, parent.dom, pos).isNone();\n      });\n    };\n    var isAtStartOfBlock = curry(isAtBlockBoundary, false);\n    var isAtEndOfBlock = curry(isAtBlockBoundary, true);\n    var isBeforeBlock = curry(isAtBeforeAfterBlockBoundary, false);\n    var isAfterBlock = curry(isAtBeforeAfterBlockBoundary, true);\n\n    var isBr = function (pos) {\n      return getElementFromPosition(pos).exists(isBr$4);\n    };\n    var findBr = function (forward, root, pos) {\n      var parentBlocks = filter$4(parentsAndSelf(SugarElement.fromDom(pos.container()), root), isBlock$2);\n      var scope = head(parentBlocks).getOr(root);\n      return fromPosition(forward, scope.dom, pos).filter(isBr);\n    };\n    var isBeforeBr$1 = function (root, pos) {\n      return getElementFromPosition(pos).exists(isBr$4) || findBr(true, root, pos).isSome();\n    };\n    var isAfterBr = function (root, pos) {\n      return getElementFromPrevPosition(pos).exists(isBr$4) || findBr(false, root, pos).isSome();\n    };\n    var findPreviousBr = curry(findBr, false);\n    var findNextBr = curry(findBr, true);\n\n    var isInMiddleOfText = function (pos) {\n      return CaretPosition.isTextPosition(pos) && !pos.isAtStart() && !pos.isAtEnd();\n    };\n    var getClosestBlock = function (root, pos) {\n      var parentBlocks = filter$4(parentsAndSelf(SugarElement.fromDom(pos.container()), root), isBlock$2);\n      return head(parentBlocks).getOr(root);\n    };\n    var hasSpaceBefore = function (root, pos) {\n      if (isInMiddleOfText(pos)) {\n        return isAfterSpace(pos);\n      } else {\n        return isAfterSpace(pos) || prevPosition(getClosestBlock(root, pos).dom, pos).exists(isAfterSpace);\n      }\n    };\n    var hasSpaceAfter = function (root, pos) {\n      if (isInMiddleOfText(pos)) {\n        return isBeforeSpace(pos);\n      } else {\n        return isBeforeSpace(pos) || nextPosition(getClosestBlock(root, pos).dom, pos).exists(isBeforeSpace);\n      }\n    };\n    var isPreValue = function (value) {\n      return contains$3([\n        'pre',\n        'pre-wrap'\n      ], value);\n    };\n    var isInPre = function (pos) {\n      return getElementFromPosition(pos).bind(function (elm) {\n        return closest$3(elm, isElement$6);\n      }).exists(function (elm) {\n        return isPreValue(get$5(elm, 'white-space'));\n      });\n    };\n    var isAtBeginningOfBody = function (root, pos) {\n      return prevPosition(root.dom, pos).isNone();\n    };\n    var isAtEndOfBody = function (root, pos) {\n      return nextPosition(root.dom, pos).isNone();\n    };\n    var isAtLineBoundary = function (root, pos) {\n      return isAtBeginningOfBody(root, pos) || isAtEndOfBody(root, pos) || isAtStartOfBlock(root, pos) || isAtEndOfBlock(root, pos) || isAfterBr(root, pos) || isBeforeBr$1(root, pos);\n    };\n    var needsToHaveNbsp = function (root, pos) {\n      if (isInPre(pos)) {\n        return false;\n      } else {\n        return isAtLineBoundary(root, pos) || hasSpaceBefore(root, pos) || hasSpaceAfter(root, pos);\n      }\n    };\n    var needsToBeNbspLeft = function (root, pos) {\n      if (isInPre(pos)) {\n        return false;\n      } else {\n        return isAtStartOfBlock(root, pos) || isBeforeBlock(root, pos) || isAfterBr(root, pos) || hasSpaceBefore(root, pos);\n      }\n    };\n    var leanRight = function (pos) {\n      var container = pos.container();\n      var offset = pos.offset();\n      if (isText$7(container) && offset < container.data.length) {\n        return CaretPosition(container, offset + 1);\n      } else {\n        return pos;\n      }\n    };\n    var needsToBeNbspRight = function (root, pos) {\n      if (isInPre(pos)) {\n        return false;\n      } else {\n        return isAtEndOfBlock(root, pos) || isAfterBlock(root, pos) || isBeforeBr$1(root, pos) || hasSpaceAfter(root, pos);\n      }\n    };\n    var needsToBeNbsp = function (root, pos) {\n      return needsToBeNbspLeft(root, pos) || needsToBeNbspRight(root, leanRight(pos));\n    };\n    var isNbspAt = function (text, offset) {\n      return isNbsp(text.charAt(offset));\n    };\n    var hasNbsp = function (pos) {\n      var container = pos.container();\n      return isText$7(container) && contains$2(container.data, nbsp);\n    };\n    var normalizeNbspMiddle = function (text) {\n      var chars = text.split('');\n      return map$3(chars, function (chr, i) {\n        if (isNbsp(chr) && i > 0 && i < chars.length - 1 && isContent(chars[i - 1]) && isContent(chars[i + 1])) {\n          return ' ';\n        } else {\n          return chr;\n        }\n      }).join('');\n    };\n    var normalizeNbspAtStart = function (root, node) {\n      var text = node.data;\n      var firstPos = CaretPosition(node, 0);\n      if (isNbspAt(text, 0) && !needsToBeNbsp(root, firstPos)) {\n        node.data = ' ' + text.slice(1);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var normalizeNbspInMiddleOfTextNode = function (node) {\n      var text = node.data;\n      var newText = normalizeNbspMiddle(text);\n      if (newText !== text) {\n        node.data = newText;\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var normalizeNbspAtEnd = function (root, node) {\n      var text = node.data;\n      var lastPos = CaretPosition(node, text.length - 1);\n      if (isNbspAt(text, text.length - 1) && !needsToBeNbsp(root, lastPos)) {\n        node.data = text.slice(0, -1) + ' ';\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var normalizeNbsps = function (root, pos) {\n      return Optional.some(pos).filter(hasNbsp).bind(function (pos) {\n        var container = pos.container();\n        var normalized = normalizeNbspAtStart(root, container) || normalizeNbspInMiddleOfTextNode(container) || normalizeNbspAtEnd(root, container);\n        return normalized ? Optional.some(pos) : Optional.none();\n      });\n    };\n    var normalizeNbspsInEditor = function (editor) {\n      var root = SugarElement.fromDom(editor.getBody());\n      if (editor.selection.isCollapsed()) {\n        normalizeNbsps(root, CaretPosition.fromRangeStart(editor.selection.getRng())).each(function (pos) {\n          editor.selection.setRng(pos.toRange());\n        });\n      }\n    };\n\n    var normalizeContent = function (content, isStartOfContent, isEndOfContent) {\n      var result = foldl(content, function (acc, c) {\n        if (isWhiteSpace(c) || isNbsp(c)) {\n          if (acc.previousCharIsSpace || acc.str === '' && isStartOfContent || acc.str.length === content.length - 1 && isEndOfContent) {\n            return {\n              previousCharIsSpace: false,\n              str: acc.str + nbsp\n            };\n          } else {\n            return {\n              previousCharIsSpace: true,\n              str: acc.str + ' '\n            };\n          }\n        } else {\n          return {\n            previousCharIsSpace: false,\n            str: acc.str + c\n          };\n        }\n      }, {\n        previousCharIsSpace: false,\n        str: ''\n      });\n      return result.str;\n    };\n    var normalize$1 = function (node, offset, count) {\n      if (count === 0) {\n        return;\n      }\n      var elm = SugarElement.fromDom(node);\n      var root = ancestor$3(elm, isBlock$2).getOr(elm);\n      var whitespace = node.data.slice(offset, offset + count);\n      var isEndOfContent = offset + count >= node.data.length && needsToBeNbspRight(root, CaretPosition(node, node.data.length));\n      var isStartOfContent = offset === 0 && needsToBeNbspLeft(root, CaretPosition(node, 0));\n      node.replaceData(offset, count, normalizeContent(whitespace, isStartOfContent, isEndOfContent));\n    };\n    var normalizeWhitespaceAfter = function (node, offset) {\n      var content = node.data.slice(offset);\n      var whitespaceCount = content.length - lTrim(content).length;\n      normalize$1(node, offset, whitespaceCount);\n    };\n    var normalizeWhitespaceBefore = function (node, offset) {\n      var content = node.data.slice(0, offset);\n      var whitespaceCount = content.length - rTrim(content).length;\n      normalize$1(node, offset - whitespaceCount, whitespaceCount);\n    };\n    var mergeTextNodes = function (prevNode, nextNode, normalizeWhitespace, mergeToPrev) {\n      if (mergeToPrev === void 0) {\n        mergeToPrev = true;\n      }\n      var whitespaceOffset = rTrim(prevNode.data).length;\n      var newNode = mergeToPrev ? prevNode : nextNode;\n      var removeNode = mergeToPrev ? nextNode : prevNode;\n      if (mergeToPrev) {\n        newNode.appendData(removeNode.data);\n      } else {\n        newNode.insertData(0, removeNode.data);\n      }\n      remove$7(SugarElement.fromDom(removeNode));\n      if (normalizeWhitespace) {\n        normalizeWhitespaceAfter(newNode, whitespaceOffset);\n      }\n      return newNode;\n    };\n\n    var needsReposition = function (pos, elm) {\n      var container = pos.container();\n      var offset = pos.offset();\n      return CaretPosition.isTextPosition(pos) === false && container === elm.parentNode && offset > CaretPosition.before(elm).offset();\n    };\n    var reposition = function (elm, pos) {\n      return needsReposition(pos, elm) ? CaretPosition(pos.container(), pos.offset() - 1) : pos;\n    };\n    var beforeOrStartOf = function (node) {\n      return isText$7(node) ? CaretPosition(node, 0) : CaretPosition.before(node);\n    };\n    var afterOrEndOf = function (node) {\n      return isText$7(node) ? CaretPosition(node, node.data.length) : CaretPosition.after(node);\n    };\n    var getPreviousSiblingCaretPosition = function (elm) {\n      if (isCaretCandidate$3(elm.previousSibling)) {\n        return Optional.some(afterOrEndOf(elm.previousSibling));\n      } else {\n        return elm.previousSibling ? lastPositionIn(elm.previousSibling) : Optional.none();\n      }\n    };\n    var getNextSiblingCaretPosition = function (elm) {\n      if (isCaretCandidate$3(elm.nextSibling)) {\n        return Optional.some(beforeOrStartOf(elm.nextSibling));\n      } else {\n        return elm.nextSibling ? firstPositionIn(elm.nextSibling) : Optional.none();\n      }\n    };\n    var findCaretPositionBackwardsFromElm = function (rootElement, elm) {\n      var startPosition = CaretPosition.before(elm.previousSibling ? elm.previousSibling : elm.parentNode);\n      return prevPosition(rootElement, startPosition).fold(function () {\n        return nextPosition(rootElement, CaretPosition.after(elm));\n      }, Optional.some);\n    };\n    var findCaretPositionForwardsFromElm = function (rootElement, elm) {\n      return nextPosition(rootElement, CaretPosition.after(elm)).fold(function () {\n        return prevPosition(rootElement, CaretPosition.before(elm));\n      }, Optional.some);\n    };\n    var findCaretPositionBackwards = function (rootElement, elm) {\n      return getPreviousSiblingCaretPosition(elm).orThunk(function () {\n        return getNextSiblingCaretPosition(elm);\n      }).orThunk(function () {\n        return findCaretPositionBackwardsFromElm(rootElement, elm);\n      });\n    };\n    var findCaretPositionForward = function (rootElement, elm) {\n      return getNextSiblingCaretPosition(elm).orThunk(function () {\n        return getPreviousSiblingCaretPosition(elm);\n      }).orThunk(function () {\n        return findCaretPositionForwardsFromElm(rootElement, elm);\n      });\n    };\n    var findCaretPosition = function (forward, rootElement, elm) {\n      return forward ? findCaretPositionForward(rootElement, elm) : findCaretPositionBackwards(rootElement, elm);\n    };\n    var findCaretPosOutsideElmAfterDelete = function (forward, rootElement, elm) {\n      return findCaretPosition(forward, rootElement, elm).map(curry(reposition, elm));\n    };\n    var setSelection$1 = function (editor, forward, pos) {\n      pos.fold(function () {\n        editor.focus();\n      }, function (pos) {\n        editor.selection.setRng(pos.toRange(), forward);\n      });\n    };\n    var eqRawNode = function (rawNode) {\n      return function (elm) {\n        return elm.dom === rawNode;\n      };\n    };\n    var isBlock = function (editor, elm) {\n      return elm && has$2(editor.schema.getBlockElements(), name(elm));\n    };\n    var paddEmptyBlock = function (elm) {\n      if (isEmpty$2(elm)) {\n        var br = SugarElement.fromHtml('<br data-mce-bogus=\"1\">');\n        empty(elm);\n        append$1(elm, br);\n        return Optional.some(CaretPosition.before(br.dom));\n      } else {\n        return Optional.none();\n      }\n    };\n    var deleteNormalized = function (elm, afterDeletePosOpt, normalizeWhitespace) {\n      var prevTextOpt = prevSibling(elm).filter(isText$8);\n      var nextTextOpt = nextSibling(elm).filter(isText$8);\n      remove$7(elm);\n      return lift3(prevTextOpt, nextTextOpt, afterDeletePosOpt, function (prev, next, pos) {\n        var prevNode = prev.dom, nextNode = next.dom;\n        var offset = prevNode.data.length;\n        mergeTextNodes(prevNode, nextNode, normalizeWhitespace);\n        return pos.container() === nextNode ? CaretPosition(prevNode, offset) : pos;\n      }).orThunk(function () {\n        if (normalizeWhitespace) {\n          prevTextOpt.each(function (elm) {\n            return normalizeWhitespaceBefore(elm.dom, elm.dom.length);\n          });\n          nextTextOpt.each(function (elm) {\n            return normalizeWhitespaceAfter(elm.dom, 0);\n          });\n        }\n        return afterDeletePosOpt;\n      });\n    };\n    var isInlineElement = function (editor, element) {\n      return has$2(editor.schema.getTextInlineElements(), name(element));\n    };\n    var deleteElement$2 = function (editor, forward, elm, moveCaret) {\n      if (moveCaret === void 0) {\n        moveCaret = true;\n      }\n      var afterDeletePos = findCaretPosOutsideElmAfterDelete(forward, editor.getBody(), elm.dom);\n      var parentBlock = ancestor$3(elm, curry(isBlock, editor), eqRawNode(editor.getBody()));\n      var normalizedAfterDeletePos = deleteNormalized(elm, afterDeletePos, isInlineElement(editor, elm));\n      if (editor.dom.isEmpty(editor.getBody())) {\n        editor.setContent('');\n        editor.selection.setCursorLocation();\n      } else {\n        parentBlock.bind(paddEmptyBlock).fold(function () {\n          if (moveCaret) {\n            setSelection$1(editor, forward, normalizedAfterDeletePos);\n          }\n        }, function (paddPos) {\n          if (moveCaret) {\n            setSelection$1(editor, forward, Optional.some(paddPos));\n          }\n        });\n      }\n    };\n\n    var isRootFromElement = function (root) {\n      return function (cur) {\n        return eq(root, cur);\n      };\n    };\n    var getTableCells = function (table) {\n      return descendants(table, 'td,th');\n    };\n    var getTableDetailsFromRange = function (rng, isRoot) {\n      var getTable = function (node) {\n        return getClosestTable(SugarElement.fromDom(node), isRoot);\n      };\n      var startTable = getTable(rng.startContainer);\n      var endTable = getTable(rng.endContainer);\n      var isStartInTable = startTable.isSome();\n      var isEndInTable = endTable.isSome();\n      var isSameTable = lift2(startTable, endTable, eq).getOr(false);\n      var isMultiTable = !isSameTable && isStartInTable && isEndInTable;\n      return {\n        startTable: startTable,\n        endTable: endTable,\n        isStartInTable: isStartInTable,\n        isEndInTable: isEndInTable,\n        isSameTable: isSameTable,\n        isMultiTable: isMultiTable\n      };\n    };\n\n    var tableCellRng = function (start, end) {\n      return {\n        start: start,\n        end: end\n      };\n    };\n    var tableSelection = function (rng, table, cells) {\n      return {\n        rng: rng,\n        table: table,\n        cells: cells\n      };\n    };\n    var deleteAction = Adt.generate([\n      {\n        singleCellTable: [\n          'rng',\n          'cell'\n        ]\n      },\n      { fullTable: ['table'] },\n      {\n        partialTable: [\n          'cells',\n          'outsideDetails'\n        ]\n      },\n      {\n        multiTable: [\n          'startTableCells',\n          'endTableCells',\n          'betweenRng'\n        ]\n      }\n    ]);\n    var getClosestCell$1 = function (container, isRoot) {\n      return closest$2(SugarElement.fromDom(container), 'td,th', isRoot);\n    };\n    var isExpandedCellRng = function (cellRng) {\n      return !eq(cellRng.start, cellRng.end);\n    };\n    var getTableFromCellRng = function (cellRng, isRoot) {\n      return getClosestTable(cellRng.start, isRoot).bind(function (startParentTable) {\n        return getClosestTable(cellRng.end, isRoot).bind(function (endParentTable) {\n          return someIf(eq(startParentTable, endParentTable), startParentTable);\n        });\n      });\n    };\n    var isSingleCellTable = function (cellRng, isRoot) {\n      return !isExpandedCellRng(cellRng) && getTableFromCellRng(cellRng, isRoot).exists(function (table) {\n        var rows = table.dom.rows;\n        return rows.length === 1 && rows[0].cells.length === 1;\n      });\n    };\n    var getCellRng = function (rng, isRoot) {\n      var startCell = getClosestCell$1(rng.startContainer, isRoot);\n      var endCell = getClosestCell$1(rng.endContainer, isRoot);\n      return lift2(startCell, endCell, tableCellRng);\n    };\n    var getCellRangeFromStartTable = function (isRoot) {\n      return function (startCell) {\n        return getClosestTable(startCell, isRoot).bind(function (table) {\n          return last$2(getTableCells(table)).map(function (endCell) {\n            return tableCellRng(startCell, endCell);\n          });\n        });\n      };\n    };\n    var getCellRangeFromEndTable = function (isRoot) {\n      return function (endCell) {\n        return getClosestTable(endCell, isRoot).bind(function (table) {\n          return head(getTableCells(table)).map(function (startCell) {\n            return tableCellRng(startCell, endCell);\n          });\n        });\n      };\n    };\n    var getTableSelectionFromCellRng = function (isRoot) {\n      return function (cellRng) {\n        return getTableFromCellRng(cellRng, isRoot).map(function (table) {\n          return tableSelection(cellRng, table, getTableCells(table));\n        });\n      };\n    };\n    var getTableSelections = function (cellRng, selectionDetails, rng, isRoot) {\n      if (rng.collapsed || !cellRng.forall(isExpandedCellRng)) {\n        return Optional.none();\n      } else if (selectionDetails.isSameTable) {\n        var sameTableSelection = cellRng.bind(getTableSelectionFromCellRng(isRoot));\n        return Optional.some({\n          start: sameTableSelection,\n          end: sameTableSelection\n        });\n      } else {\n        var startCell = getClosestCell$1(rng.startContainer, isRoot);\n        var endCell = getClosestCell$1(rng.endContainer, isRoot);\n        var startTableSelection = startCell.bind(getCellRangeFromStartTable(isRoot)).bind(getTableSelectionFromCellRng(isRoot));\n        var endTableSelection = endCell.bind(getCellRangeFromEndTable(isRoot)).bind(getTableSelectionFromCellRng(isRoot));\n        return Optional.some({\n          start: startTableSelection,\n          end: endTableSelection\n        });\n      }\n    };\n    var getCellIndex = function (cells, cell) {\n      return findIndex$2(cells, function (x) {\n        return eq(x, cell);\n      });\n    };\n    var getSelectedCells = function (tableSelection) {\n      return lift2(getCellIndex(tableSelection.cells, tableSelection.rng.start), getCellIndex(tableSelection.cells, tableSelection.rng.end), function (startIndex, endIndex) {\n        return tableSelection.cells.slice(startIndex, endIndex + 1);\n      });\n    };\n    var isSingleCellTableContentSelected = function (optCellRng, rng, isRoot) {\n      return optCellRng.exists(function (cellRng) {\n        return isSingleCellTable(cellRng, isRoot) && hasAllContentsSelected(cellRng.start, rng);\n      });\n    };\n    var unselectCells = function (rng, selectionDetails) {\n      var startTable = selectionDetails.startTable, endTable = selectionDetails.endTable;\n      var otherContentRng = rng.cloneRange();\n      startTable.each(function (table) {\n        return otherContentRng.setStartAfter(table.dom);\n      });\n      endTable.each(function (table) {\n        return otherContentRng.setEndBefore(table.dom);\n      });\n      return otherContentRng;\n    };\n    var handleSingleTable = function (cellRng, selectionDetails, rng, isRoot) {\n      return getTableSelections(cellRng, selectionDetails, rng, isRoot).bind(function (_a) {\n        var start = _a.start, end = _a.end;\n        return start.or(end);\n      }).bind(function (tableSelection) {\n        var isSameTable = selectionDetails.isSameTable;\n        var selectedCells = getSelectedCells(tableSelection).getOr([]);\n        if (isSameTable && tableSelection.cells.length === selectedCells.length) {\n          return Optional.some(deleteAction.fullTable(tableSelection.table));\n        } else if (selectedCells.length > 0) {\n          if (isSameTable) {\n            return Optional.some(deleteAction.partialTable(selectedCells, Optional.none()));\n          } else {\n            var otherContentRng = unselectCells(rng, selectionDetails);\n            return Optional.some(deleteAction.partialTable(selectedCells, Optional.some(__assign(__assign({}, selectionDetails), { rng: otherContentRng }))));\n          }\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var handleMultiTable = function (cellRng, selectionDetails, rng, isRoot) {\n      return getTableSelections(cellRng, selectionDetails, rng, isRoot).bind(function (_a) {\n        var start = _a.start, end = _a.end;\n        var startTableSelectedCells = start.bind(getSelectedCells).getOr([]);\n        var endTableSelectedCells = end.bind(getSelectedCells).getOr([]);\n        if (startTableSelectedCells.length > 0 && endTableSelectedCells.length > 0) {\n          var otherContentRng = unselectCells(rng, selectionDetails);\n          return Optional.some(deleteAction.multiTable(startTableSelectedCells, endTableSelectedCells, otherContentRng));\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var getActionFromRange = function (root, rng) {\n      var isRoot = isRootFromElement(root);\n      var optCellRng = getCellRng(rng, isRoot);\n      var selectionDetails = getTableDetailsFromRange(rng, isRoot);\n      if (isSingleCellTableContentSelected(optCellRng, rng, isRoot)) {\n        return optCellRng.map(function (cellRng) {\n          return deleteAction.singleCellTable(rng, cellRng.start);\n        });\n      } else if (selectionDetails.isMultiTable) {\n        return handleMultiTable(optCellRng, selectionDetails, rng, isRoot);\n      } else {\n        return handleSingleTable(optCellRng, selectionDetails, rng, isRoot);\n      }\n    };\n\n    var freefallRtl = function (root) {\n      var child = isComment$1(root) ? prevSibling(root) : lastChild(root);\n      return child.bind(freefallRtl).orThunk(function () {\n        return Optional.some(root);\n      });\n    };\n    var cleanCells = function (cells) {\n      return each$k(cells, function (cell) {\n        remove$6(cell, 'contenteditable');\n        fillWithPaddingBr(cell);\n      });\n    };\n    var getOutsideBlock = function (editor, container) {\n      return Optional.from(editor.dom.getParent(container, editor.dom.isBlock)).map(SugarElement.fromDom);\n    };\n    var handleEmptyBlock = function (editor, startInTable, emptyBlock) {\n      emptyBlock.each(function (block) {\n        if (startInTable) {\n          remove$7(block);\n        } else {\n          fillWithPaddingBr(block);\n          editor.selection.setCursorLocation(block.dom, 0);\n        }\n      });\n    };\n    var deleteContentInsideCell = function (editor, cell, rng, isFirstCellInSelection) {\n      var insideTableRng = rng.cloneRange();\n      if (isFirstCellInSelection) {\n        insideTableRng.setStart(rng.startContainer, rng.startOffset);\n        insideTableRng.setEndAfter(cell.dom.lastChild);\n      } else {\n        insideTableRng.setStartBefore(cell.dom.firstChild);\n        insideTableRng.setEnd(rng.endContainer, rng.endOffset);\n      }\n      deleteCellContents(editor, insideTableRng, cell, false);\n    };\n    var collapseAndRestoreCellSelection = function (editor) {\n      var selectedCells = getCellsFromEditor(editor);\n      var selectedNode = SugarElement.fromDom(editor.selection.getNode());\n      if (isTableCell$5(selectedNode.dom) && isEmpty$2(selectedNode)) {\n        editor.selection.setCursorLocation(selectedNode.dom, 0);\n      } else {\n        editor.selection.collapse(true);\n      }\n      if (selectedCells.length > 1 && exists(selectedCells, function (cell) {\n          return eq(cell, selectedNode);\n        })) {\n        set$1(selectedNode, 'data-mce-selected', '1');\n      }\n    };\n    var emptySingleTableCells = function (editor, cells, outsideDetails) {\n      var editorRng = editor.selection.getRng();\n      var cellsToClean = outsideDetails.bind(function (_a) {\n        var rng = _a.rng, isStartInTable = _a.isStartInTable;\n        var outsideBlock = getOutsideBlock(editor, isStartInTable ? rng.endContainer : rng.startContainer);\n        rng.deleteContents();\n        handleEmptyBlock(editor, isStartInTable, outsideBlock.filter(isEmpty$2));\n        var endPointCell = isStartInTable ? cells[0] : cells[cells.length - 1];\n        deleteContentInsideCell(editor, endPointCell, editorRng, isStartInTable);\n        if (!isEmpty$2(endPointCell)) {\n          return Optional.some(isStartInTable ? cells.slice(1) : cells.slice(0, -1));\n        } else {\n          return Optional.none();\n        }\n      }).getOr(cells);\n      cleanCells(cellsToClean);\n      collapseAndRestoreCellSelection(editor);\n      return true;\n    };\n    var emptyMultiTableCells = function (editor, startTableCells, endTableCells, betweenRng) {\n      var rng = editor.selection.getRng();\n      var startCell = startTableCells[0];\n      var endCell = endTableCells[endTableCells.length - 1];\n      deleteContentInsideCell(editor, startCell, rng, true);\n      deleteContentInsideCell(editor, endCell, rng, false);\n      var startTableCellsToClean = isEmpty$2(startCell) ? startTableCells : startTableCells.slice(1);\n      var endTableCellsToClean = isEmpty$2(endCell) ? endTableCells : endTableCells.slice(0, -1);\n      cleanCells(startTableCellsToClean.concat(endTableCellsToClean));\n      betweenRng.deleteContents();\n      collapseAndRestoreCellSelection(editor);\n      return true;\n    };\n    var deleteCellContents = function (editor, rng, cell, moveSelection) {\n      if (moveSelection === void 0) {\n        moveSelection = true;\n      }\n      rng.deleteContents();\n      var lastNode = freefallRtl(cell).getOr(cell);\n      var lastBlock = SugarElement.fromDom(editor.dom.getParent(lastNode.dom, editor.dom.isBlock));\n      if (isEmpty$2(lastBlock)) {\n        fillWithPaddingBr(lastBlock);\n        if (moveSelection) {\n          editor.selection.setCursorLocation(lastBlock.dom, 0);\n        }\n      }\n      if (!eq(cell, lastBlock)) {\n        var additionalCleanupNodes = is$1(parent(lastBlock), cell) ? [] : siblings(lastBlock);\n        each$k(additionalCleanupNodes.concat(children(cell)), function (node) {\n          if (!eq(node, lastBlock) && !contains$1(node, lastBlock) && isEmpty$2(node)) {\n            remove$7(node);\n          }\n        });\n      }\n      return true;\n    };\n    var deleteTableElement = function (editor, table) {\n      deleteElement$2(editor, false, table);\n      return true;\n    };\n    var deleteCellRange = function (editor, rootElm, rng) {\n      return getActionFromRange(rootElm, rng).map(function (action) {\n        return action.fold(curry(deleteCellContents, editor), curry(deleteTableElement, editor), curry(emptySingleTableCells, editor), curry(emptyMultiTableCells, editor));\n      });\n    };\n    var deleteCaptionRange = function (editor, caption) {\n      return emptyElement(editor, caption);\n    };\n    var deleteTableRange = function (editor, rootElm, rng, startElm) {\n      return getParentCaption(rootElm, startElm).fold(function () {\n        return deleteCellRange(editor, rootElm, rng);\n      }, function (caption) {\n        return deleteCaptionRange(editor, caption);\n      }).getOr(false);\n    };\n    var deleteRange$2 = function (editor, startElm, selectedCells) {\n      var rootNode = SugarElement.fromDom(editor.getBody());\n      var rng = editor.selection.getRng();\n      return selectedCells.length !== 0 ? emptySingleTableCells(editor, selectedCells, Optional.none()) : deleteTableRange(editor, rootNode, rng, startElm);\n    };\n    var getParentCell = function (rootElm, elm) {\n      return find$3(parentsAndSelf(elm, rootElm), isTableCell$4);\n    };\n    var getParentCaption = function (rootElm, elm) {\n      return find$3(parentsAndSelf(elm, rootElm), isTag('caption'));\n    };\n    var deleteBetweenCells = function (editor, rootElm, forward, fromCell, from) {\n      return navigate(forward, editor.getBody(), from).bind(function (to) {\n        return getParentCell(rootElm, SugarElement.fromDom(to.getNode())).map(function (toCell) {\n          return eq(toCell, fromCell) === false;\n        });\n      });\n    };\n    var emptyElement = function (editor, elm) {\n      fillWithPaddingBr(elm);\n      editor.selection.setCursorLocation(elm.dom, 0);\n      return Optional.some(true);\n    };\n    var isDeleteOfLastCharPos = function (fromCaption, forward, from, to) {\n      return firstPositionIn(fromCaption.dom).bind(function (first) {\n        return lastPositionIn(fromCaption.dom).map(function (last) {\n          return forward ? from.isEqual(first) && to.isEqual(last) : from.isEqual(last) && to.isEqual(first);\n        });\n      }).getOr(true);\n    };\n    var emptyCaretCaption = function (editor, elm) {\n      return emptyElement(editor, elm);\n    };\n    var validateCaretCaption = function (rootElm, fromCaption, to) {\n      return getParentCaption(rootElm, SugarElement.fromDom(to.getNode())).map(function (toCaption) {\n        return eq(toCaption, fromCaption) === false;\n      });\n    };\n    var deleteCaretInsideCaption = function (editor, rootElm, forward, fromCaption, from) {\n      return navigate(forward, editor.getBody(), from).bind(function (to) {\n        return isDeleteOfLastCharPos(fromCaption, forward, from, to) ? emptyCaretCaption(editor, fromCaption) : validateCaretCaption(rootElm, fromCaption, to);\n      }).or(Optional.some(true));\n    };\n    var deleteCaretCells = function (editor, forward, rootElm, startElm) {\n      var from = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return getParentCell(rootElm, startElm).bind(function (fromCell) {\n        return isEmpty$2(fromCell) ? emptyElement(editor, fromCell) : deleteBetweenCells(editor, rootElm, forward, fromCell, from);\n      }).getOr(false);\n    };\n    var deleteCaretCaption = function (editor, forward, rootElm, fromCaption) {\n      var from = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return isEmpty$2(fromCaption) ? emptyElement(editor, fromCaption) : deleteCaretInsideCaption(editor, rootElm, forward, fromCaption, from);\n    };\n    var isNearTable = function (forward, pos) {\n      return forward ? isBeforeTable(pos) : isAfterTable(pos);\n    };\n    var isBeforeOrAfterTable = function (editor, forward) {\n      var fromPos = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return isNearTable(forward, fromPos) || fromPosition(forward, editor.getBody(), fromPos).exists(function (pos) {\n        return isNearTable(forward, pos);\n      });\n    };\n    var deleteCaret$3 = function (editor, forward, startElm) {\n      var rootElm = SugarElement.fromDom(editor.getBody());\n      return getParentCaption(rootElm, startElm).fold(function () {\n        return deleteCaretCells(editor, forward, rootElm, startElm) || isBeforeOrAfterTable(editor, forward);\n      }, function (fromCaption) {\n        return deleteCaretCaption(editor, forward, rootElm, fromCaption).getOr(false);\n      });\n    };\n    var backspaceDelete$9 = function (editor, forward) {\n      var startElm = SugarElement.fromDom(editor.selection.getStart(true));\n      var cells = getCellsFromEditor(editor);\n      return editor.selection.isCollapsed() && cells.length === 0 ? deleteCaret$3(editor, forward, startElm) : deleteRange$2(editor, startElm, cells);\n    };\n\n    var createRange = function (sc, so, ec, eo) {\n      var rng = document.createRange();\n      rng.setStart(sc, so);\n      rng.setEnd(ec, eo);\n      return rng;\n    };\n    var normalizeBlockSelectionRange = function (rng) {\n      var startPos = CaretPosition.fromRangeStart(rng);\n      var endPos = CaretPosition.fromRangeEnd(rng);\n      var rootNode = rng.commonAncestorContainer;\n      return fromPosition(false, rootNode, endPos).map(function (newEndPos) {\n        if (!isInSameBlock(startPos, endPos, rootNode) && isInSameBlock(startPos, newEndPos, rootNode)) {\n          return createRange(startPos.container(), startPos.offset(), newEndPos.container(), newEndPos.offset());\n        } else {\n          return rng;\n        }\n      }).getOr(rng);\n    };\n    var normalize = function (rng) {\n      return rng.collapsed ? rng : normalizeBlockSelectionRange(rng);\n    };\n\n    var hasOnlyOneChild$1 = function (node) {\n      return node.firstChild && node.firstChild === node.lastChild;\n    };\n    var isPaddingNode = function (node) {\n      return node.name === 'br' || node.value === nbsp;\n    };\n    var isPaddedEmptyBlock = function (schema, node) {\n      var blockElements = schema.getBlockElements();\n      return blockElements[node.name] && hasOnlyOneChild$1(node) && isPaddingNode(node.firstChild);\n    };\n    var isEmptyFragmentElement = function (schema, node) {\n      var nonEmptyElements = schema.getNonEmptyElements();\n      return node && (node.isEmpty(nonEmptyElements) || isPaddedEmptyBlock(schema, node));\n    };\n    var isListFragment = function (schema, fragment) {\n      var firstChild = fragment.firstChild;\n      var lastChild = fragment.lastChild;\n      if (firstChild && firstChild.name === 'meta') {\n        firstChild = firstChild.next;\n      }\n      if (lastChild && lastChild.attr('id') === 'mce_marker') {\n        lastChild = lastChild.prev;\n      }\n      if (isEmptyFragmentElement(schema, lastChild)) {\n        lastChild = lastChild.prev;\n      }\n      if (!firstChild || firstChild !== lastChild) {\n        return false;\n      }\n      return firstChild.name === 'ul' || firstChild.name === 'ol';\n    };\n    var cleanupDomFragment = function (domFragment) {\n      var firstChild = domFragment.firstChild;\n      var lastChild = domFragment.lastChild;\n      if (firstChild && firstChild.nodeName === 'META') {\n        firstChild.parentNode.removeChild(firstChild);\n      }\n      if (lastChild && lastChild.id === 'mce_marker') {\n        lastChild.parentNode.removeChild(lastChild);\n      }\n      return domFragment;\n    };\n    var toDomFragment = function (dom, serializer, fragment) {\n      var html = serializer.serialize(fragment);\n      var domFragment = dom.createFragment(html);\n      return cleanupDomFragment(domFragment);\n    };\n    var listItems = function (elm) {\n      return filter$4(elm.childNodes, function (child) {\n        return child.nodeName === 'LI';\n      });\n    };\n    var isPadding = function (node) {\n      return node.data === nbsp || isBr$5(node);\n    };\n    var isListItemPadded = function (node) {\n      return node && node.firstChild && node.firstChild === node.lastChild && isPadding(node.firstChild);\n    };\n    var isEmptyOrPadded = function (elm) {\n      return !elm.firstChild || isListItemPadded(elm);\n    };\n    var trimListItems = function (elms) {\n      return elms.length > 0 && isEmptyOrPadded(elms[elms.length - 1]) ? elms.slice(0, -1) : elms;\n    };\n    var getParentLi = function (dom, node) {\n      var parentBlock = dom.getParent(node, dom.isBlock);\n      return parentBlock && parentBlock.nodeName === 'LI' ? parentBlock : null;\n    };\n    var isParentBlockLi = function (dom, node) {\n      return !!getParentLi(dom, node);\n    };\n    var getSplit = function (parentNode, rng) {\n      var beforeRng = rng.cloneRange();\n      var afterRng = rng.cloneRange();\n      beforeRng.setStartBefore(parentNode);\n      afterRng.setEndAfter(parentNode);\n      return [\n        beforeRng.cloneContents(),\n        afterRng.cloneContents()\n      ];\n    };\n    var findFirstIn = function (node, rootNode) {\n      var caretPos = CaretPosition.before(node);\n      var caretWalker = CaretWalker(rootNode);\n      var newCaretPos = caretWalker.next(caretPos);\n      return newCaretPos ? newCaretPos.toRange() : null;\n    };\n    var findLastOf = function (node, rootNode) {\n      var caretPos = CaretPosition.after(node);\n      var caretWalker = CaretWalker(rootNode);\n      var newCaretPos = caretWalker.prev(caretPos);\n      return newCaretPos ? newCaretPos.toRange() : null;\n    };\n    var insertMiddle = function (target, elms, rootNode, rng) {\n      var parts = getSplit(target, rng);\n      var parentElm = target.parentNode;\n      parentElm.insertBefore(parts[0], target);\n      Tools.each(elms, function (li) {\n        parentElm.insertBefore(li, target);\n      });\n      parentElm.insertBefore(parts[1], target);\n      parentElm.removeChild(target);\n      return findLastOf(elms[elms.length - 1], rootNode);\n    };\n    var insertBefore$1 = function (target, elms, rootNode) {\n      var parentElm = target.parentNode;\n      Tools.each(elms, function (elm) {\n        parentElm.insertBefore(elm, target);\n      });\n      return findFirstIn(target, rootNode);\n    };\n    var insertAfter$1 = function (target, elms, rootNode, dom) {\n      dom.insertAfter(elms.reverse(), target);\n      return findLastOf(elms[0], rootNode);\n    };\n    var insertAtCaret$1 = function (serializer, dom, rng, fragment) {\n      var domFragment = toDomFragment(dom, serializer, fragment);\n      var liTarget = getParentLi(dom, rng.startContainer);\n      var liElms = trimListItems(listItems(domFragment.firstChild));\n      var BEGINNING = 1, END = 2;\n      var rootNode = dom.getRoot();\n      var isAt = function (location) {\n        var caretPos = CaretPosition.fromRangeStart(rng);\n        var caretWalker = CaretWalker(dom.getRoot());\n        var newPos = location === BEGINNING ? caretWalker.prev(caretPos) : caretWalker.next(caretPos);\n        return newPos ? getParentLi(dom, newPos.getNode()) !== liTarget : true;\n      };\n      if (isAt(BEGINNING)) {\n        return insertBefore$1(liTarget, liElms, rootNode);\n      } else if (isAt(END)) {\n        return insertAfter$1(liTarget, liElms, rootNode, dom);\n      }\n      return insertMiddle(liTarget, liElms, rootNode, rng);\n    };\n\n    var trimOrPadLeftRight = function (dom, rng, html) {\n      var root = SugarElement.fromDom(dom.getRoot());\n      if (needsToBeNbspLeft(root, CaretPosition.fromRangeStart(rng))) {\n        html = html.replace(/^ /, '&nbsp;');\n      } else {\n        html = html.replace(/^&nbsp;/, ' ');\n      }\n      if (needsToBeNbspRight(root, CaretPosition.fromRangeEnd(rng))) {\n        html = html.replace(/(&nbsp;| )(<br( \\/)>)?$/, '&nbsp;');\n      } else {\n        html = html.replace(/&nbsp;(<br( \\/)?>)?$/, ' ');\n      }\n      return html;\n    };\n\n    var isTableCell$1 = isTableCell$5;\n    var isTableCellContentSelected = function (dom, rng, cell) {\n      if (cell !== null) {\n        var endCell = dom.getParent(rng.endContainer, isTableCell$1);\n        return cell === endCell && hasAllContentsSelected(SugarElement.fromDom(cell), rng);\n      } else {\n        return false;\n      }\n    };\n    var validInsertion = function (editor, value, parentNode) {\n      if (parentNode.getAttribute('data-mce-bogus') === 'all') {\n        parentNode.parentNode.insertBefore(editor.dom.createFragment(value), parentNode);\n      } else {\n        var node = parentNode.firstChild;\n        var node2 = parentNode.lastChild;\n        if (!node || node === node2 && node.nodeName === 'BR') {\n          editor.dom.setHTML(parentNode, value);\n        } else {\n          editor.selection.setContent(value);\n        }\n      }\n    };\n    var trimBrsFromTableCell = function (dom, elm) {\n      Optional.from(dom.getParent(elm, 'td,th')).map(SugarElement.fromDom).each(trimBlockTrailingBr);\n    };\n    var reduceInlineTextElements = function (editor, merge) {\n      var textInlineElements = editor.schema.getTextInlineElements();\n      var dom = editor.dom;\n      if (merge) {\n        var root_1 = editor.getBody();\n        var elementUtils_1 = ElementUtils(dom);\n        Tools.each(dom.select('*[data-mce-fragment]'), function (node) {\n          var isInline = isNonNullable(textInlineElements[node.nodeName.toLowerCase()]);\n          if (isInline && hasInheritableStyles(dom, node)) {\n            for (var parentNode = node.parentNode; isNonNullable(parentNode) && parentNode !== root_1; parentNode = parentNode.parentNode) {\n              var styleConflict = hasStyleConflict(dom, node, parentNode);\n              if (styleConflict) {\n                break;\n              }\n              if (elementUtils_1.compare(parentNode, node)) {\n                dom.remove(node, true);\n                break;\n              }\n            }\n          }\n        });\n      }\n    };\n    var markFragmentElements = function (fragment) {\n      var node = fragment;\n      while (node = node.walk()) {\n        if (node.type === 1) {\n          node.attr('data-mce-fragment', '1');\n        }\n      }\n    };\n    var unmarkFragmentElements = function (elm) {\n      Tools.each(elm.getElementsByTagName('*'), function (elm) {\n        elm.removeAttribute('data-mce-fragment');\n      });\n    };\n    var isPartOfFragment = function (node) {\n      return !!node.getAttribute('data-mce-fragment');\n    };\n    var canHaveChildren = function (editor, node) {\n      return node && !editor.schema.getShortEndedElements()[node.nodeName];\n    };\n    var moveSelectionToMarker = function (editor, marker) {\n      var nextRng;\n      var dom = editor.dom;\n      var selection = editor.selection;\n      if (!marker) {\n        return;\n      }\n      selection.scrollIntoView(marker);\n      var parentEditableElm = getContentEditableRoot$1(editor.getBody(), marker);\n      if (dom.getContentEditable(parentEditableElm) === 'false') {\n        dom.remove(marker);\n        selection.select(parentEditableElm);\n        return;\n      }\n      var rng = dom.createRng();\n      var node = marker.previousSibling;\n      if (isText$7(node)) {\n        rng.setStart(node, node.nodeValue.length);\n        if (!Env.ie) {\n          var node2 = marker.nextSibling;\n          if (isText$7(node2)) {\n            node.appendData(node2.data);\n            node2.parentNode.removeChild(node2);\n          }\n        }\n      } else {\n        rng.setStartBefore(marker);\n        rng.setEndBefore(marker);\n      }\n      var findNextCaretRng = function (rng) {\n        var caretPos = CaretPosition.fromRangeStart(rng);\n        var caretWalker = CaretWalker(editor.getBody());\n        caretPos = caretWalker.next(caretPos);\n        if (caretPos) {\n          return caretPos.toRange();\n        }\n      };\n      var parentBlock = dom.getParent(marker, dom.isBlock);\n      dom.remove(marker);\n      if (parentBlock && dom.isEmpty(parentBlock)) {\n        editor.$(parentBlock).empty();\n        rng.setStart(parentBlock, 0);\n        rng.setEnd(parentBlock, 0);\n        if (!isTableCell$1(parentBlock) && !isPartOfFragment(parentBlock) && (nextRng = findNextCaretRng(rng))) {\n          rng = nextRng;\n          dom.remove(parentBlock);\n        } else {\n          dom.add(parentBlock, dom.create('br', { 'data-mce-bogus': '1' }));\n        }\n      }\n      selection.setRng(rng);\n    };\n    var deleteSelectedContent = function (editor) {\n      var dom = editor.dom;\n      var rng = normalize(editor.selection.getRng());\n      editor.selection.setRng(rng);\n      var startCell = dom.getParent(rng.startContainer, isTableCell$1);\n      if (isTableCellContentSelected(dom, rng, startCell)) {\n        deleteCellContents(editor, rng, SugarElement.fromDom(startCell));\n      } else {\n        editor.getDoc().execCommand('Delete', false, null);\n      }\n    };\n    var insertHtmlAtCaret = function (editor, value, details) {\n      var parentNode;\n      var rng, node;\n      var selection = editor.selection;\n      var dom = editor.dom;\n      if (/^ | $/.test(value)) {\n        value = trimOrPadLeftRight(dom, selection.getRng(), value);\n      }\n      var parser = editor.parser;\n      var merge = details.merge;\n      var serializer = HtmlSerializer({ validate: shouldValidate(editor) }, editor.schema);\n      var bookmarkHtml = '<span id=\"mce_marker\" data-mce-type=\"bookmark\">&#xFEFF;</span>';\n      var args = editor.fire('BeforeSetContent', {\n        content: value,\n        format: 'html',\n        selection: true,\n        paste: details.paste\n      });\n      if (args.isDefaultPrevented()) {\n        editor.fire('SetContent', {\n          content: args.content,\n          format: 'html',\n          selection: true,\n          paste: details.paste\n        });\n        return;\n      }\n      value = args.content;\n      if (!details.preserve_zwsp) {\n        value = trim$3(value);\n      }\n      if (value.indexOf('{$caret}') === -1) {\n        value += '{$caret}';\n      }\n      value = value.replace(/\\{\\$caret\\}/, bookmarkHtml);\n      rng = selection.getRng();\n      var caretElement = rng.startContainer || (rng.parentElement ? rng.parentElement() : null);\n      var body = editor.getBody();\n      if (caretElement === body && selection.isCollapsed()) {\n        if (dom.isBlock(body.firstChild) && canHaveChildren(editor, body.firstChild) && dom.isEmpty(body.firstChild)) {\n          rng = dom.createRng();\n          rng.setStart(body.firstChild, 0);\n          rng.setEnd(body.firstChild, 0);\n          selection.setRng(rng);\n        }\n      }\n      if (!selection.isCollapsed()) {\n        deleteSelectedContent(editor);\n      }\n      parentNode = selection.getNode();\n      var parserArgs = {\n        context: parentNode.nodeName.toLowerCase(),\n        data: details.data,\n        insert: true\n      };\n      var fragment = parser.parse(value, parserArgs);\n      if (details.paste === true && isListFragment(editor.schema, fragment) && isParentBlockLi(dom, parentNode)) {\n        rng = insertAtCaret$1(serializer, dom, selection.getRng(), fragment);\n        selection.setRng(rng);\n        editor.fire('SetContent', args);\n        return;\n      }\n      markFragmentElements(fragment);\n      node = fragment.lastChild;\n      if (node.attr('id') === 'mce_marker') {\n        var marker = node;\n        for (node = node.prev; node; node = node.walk(true)) {\n          if (node.type === 3 || !dom.isBlock(node.name)) {\n            if (editor.schema.isValidChild(node.parent.name, 'span')) {\n              node.parent.insert(marker, node, node.name === 'br');\n            }\n            break;\n          }\n        }\n      }\n      editor._selectionOverrides.showBlockCaretContainer(parentNode);\n      if (!parserArgs.invalid) {\n        value = serializer.serialize(fragment);\n        validInsertion(editor, value, parentNode);\n      } else {\n        editor.selection.setContent(bookmarkHtml);\n        parentNode = selection.getNode();\n        var rootNode = editor.getBody();\n        if (parentNode.nodeType === 9) {\n          parentNode = node = rootNode;\n        } else {\n          node = parentNode;\n        }\n        while (node !== rootNode) {\n          parentNode = node;\n          node = node.parentNode;\n        }\n        value = parentNode === rootNode ? rootNode.innerHTML : dom.getOuterHTML(parentNode);\n        value = serializer.serialize(parser.parse(value.replace(/<span (id=\"mce_marker\"|id=mce_marker).+?<\\/span>/i, function () {\n          return serializer.serialize(fragment);\n        })));\n        if (parentNode === rootNode) {\n          dom.setHTML(rootNode, value);\n        } else {\n          dom.setOuterHTML(parentNode, value);\n        }\n      }\n      reduceInlineTextElements(editor, merge);\n      moveSelectionToMarker(editor, dom.get('mce_marker'));\n      unmarkFragmentElements(editor.getBody());\n      trimBrsFromTableCell(dom, selection.getStart());\n      editor.fire('SetContent', args);\n      editor.addVisual();\n    };\n\n    var traverse = function (node, fn) {\n      fn(node);\n      if (node.firstChild) {\n        traverse(node.firstChild, fn);\n      }\n      if (node.next) {\n        traverse(node.next, fn);\n      }\n    };\n    var findMatchingNodes = function (nodeFilters, attributeFilters, node) {\n      var nodeMatches = {};\n      var attrMatches = {};\n      var matches = [];\n      if (node.firstChild) {\n        traverse(node.firstChild, function (node) {\n          each$k(nodeFilters, function (filter) {\n            if (filter.name === node.name) {\n              if (nodeMatches[filter.name]) {\n                nodeMatches[filter.name].nodes.push(node);\n              } else {\n                nodeMatches[filter.name] = {\n                  filter: filter,\n                  nodes: [node]\n                };\n              }\n            }\n          });\n          each$k(attributeFilters, function (filter) {\n            if (typeof node.attr(filter.name) === 'string') {\n              if (attrMatches[filter.name]) {\n                attrMatches[filter.name].nodes.push(node);\n              } else {\n                attrMatches[filter.name] = {\n                  filter: filter,\n                  nodes: [node]\n                };\n              }\n            }\n          });\n        });\n      }\n      for (var name_1 in nodeMatches) {\n        if (has$2(nodeMatches, name_1)) {\n          matches.push(nodeMatches[name_1]);\n        }\n      }\n      for (var name_2 in attrMatches) {\n        if (has$2(attrMatches, name_2)) {\n          matches.push(attrMatches[name_2]);\n        }\n      }\n      return matches;\n    };\n    var filter$1 = function (nodeFilters, attributeFilters, node) {\n      var matches = findMatchingNodes(nodeFilters, attributeFilters, node);\n      each$k(matches, function (match) {\n        each$k(match.filter.callbacks, function (callback) {\n          callback(match.nodes, match.filter.name, {});\n        });\n      });\n    };\n\n    var defaultFormat$1 = 'html';\n    var isTreeNode = function (content) {\n      return content instanceof AstNode;\n    };\n    var moveSelection = function (editor) {\n      if (hasFocus(editor)) {\n        firstPositionIn(editor.getBody()).each(function (pos) {\n          var node = pos.getNode();\n          var caretPos = isTable$3(node) ? firstPositionIn(node).getOr(pos) : pos;\n          editor.selection.setRng(caretPos.toRange());\n        });\n      }\n    };\n    var setEditorHtml = function (editor, html, noSelection) {\n      editor.dom.setHTML(editor.getBody(), html);\n      if (noSelection !== true) {\n        moveSelection(editor);\n      }\n    };\n    var setContentString = function (editor, body, content, args) {\n      content = trim$3(content);\n      if (content.length === 0 || /^\\s+$/.test(content)) {\n        var padd = '<br data-mce-bogus=\"1\">';\n        if (body.nodeName === 'TABLE') {\n          content = '<tr><td>' + padd + '</td></tr>';\n        } else if (/^(UL|OL)$/.test(body.nodeName)) {\n          content = '<li>' + padd + '</li>';\n        }\n        var forcedRootBlockName = getForcedRootBlock(editor);\n        if (forcedRootBlockName && editor.schema.isValidChild(body.nodeName.toLowerCase(), forcedRootBlockName.toLowerCase())) {\n          content = padd;\n          content = editor.dom.createHTML(forcedRootBlockName, getForcedRootBlockAttrs(editor), content);\n        } else if (!content) {\n          content = '<br data-mce-bogus=\"1\">';\n        }\n        setEditorHtml(editor, content, args.no_selection);\n        editor.fire('SetContent', args);\n      } else {\n        if (args.format !== 'raw') {\n          content = HtmlSerializer({ validate: editor.validate }, editor.schema).serialize(editor.parser.parse(content, {\n            isRootContent: true,\n            insert: true\n          }));\n        }\n        args.content = isWsPreserveElement(SugarElement.fromDom(body)) ? content : Tools.trim(content);\n        setEditorHtml(editor, args.content, args.no_selection);\n        if (!args.no_events) {\n          editor.fire('SetContent', args);\n        }\n      }\n      return args.content;\n    };\n    var setContentTree = function (editor, body, content, args) {\n      filter$1(editor.parser.getNodeFilters(), editor.parser.getAttributeFilters(), content);\n      var html = HtmlSerializer({ validate: editor.validate }, editor.schema).serialize(content);\n      args.content = trim$3(isWsPreserveElement(SugarElement.fromDom(body)) ? html : Tools.trim(html));\n      setEditorHtml(editor, args.content, args.no_selection);\n      if (!args.no_events) {\n        editor.fire('SetContent', args);\n      }\n      return content;\n    };\n    var setupArgs$2 = function (args, content) {\n      return __assign(__assign({ format: defaultFormat$1 }, args), {\n        set: true,\n        content: isTreeNode(content) ? '' : content\n      });\n    };\n    var setContentInternal = function (editor, content, args) {\n      var defaultedArgs = setupArgs$2(args, content);\n      var updatedArgs = args.no_events ? defaultedArgs : editor.fire('BeforeSetContent', defaultedArgs);\n      if (!isTreeNode(content)) {\n        content = updatedArgs.content;\n      }\n      return Optional.from(editor.getBody()).fold(constant(content), function (body) {\n        return isTreeNode(content) ? setContentTree(editor, body, content, updatedArgs) : setContentString(editor, body, content, updatedArgs);\n      });\n    };\n\n    var sibling = function (scope, predicate) {\n      return sibling$2(scope, predicate).isSome();\n    };\n\n    var ensureIsRoot = function (isRoot) {\n      return isFunction(isRoot) ? isRoot : never;\n    };\n    var ancestor = function (scope, transform, isRoot) {\n      var element = scope.dom;\n      var stop = ensureIsRoot(isRoot);\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = SugarElement.fromDom(element);\n        var transformed = transform(el);\n        if (transformed.isSome()) {\n          return transformed;\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var closest$1 = function (scope, transform, isRoot) {\n      var current = transform(scope);\n      var stop = ensureIsRoot(isRoot);\n      return current.orThunk(function () {\n        return stop(scope) ? Optional.none() : ancestor(scope, transform, stop);\n      });\n    };\n\n    var isEq$3 = isEq$5;\n    var matchesUnInheritedFormatSelector = function (ed, node, name) {\n      var formatList = ed.formatter.get(name);\n      if (formatList) {\n        for (var i = 0; i < formatList.length; i++) {\n          var format = formatList[i];\n          if (isSelectorFormat(format) && format.inherit === false && ed.dom.is(node, format.selector)) {\n            return true;\n          }\n        }\n      }\n      return false;\n    };\n    var matchParents = function (editor, node, name, vars, similar) {\n      var root = editor.dom.getRoot();\n      if (node === root) {\n        return false;\n      }\n      node = editor.dom.getParent(node, function (node) {\n        if (matchesUnInheritedFormatSelector(editor, node, name)) {\n          return true;\n        }\n        return node.parentNode === root || !!matchNode(editor, node, name, vars, true);\n      });\n      return !!matchNode(editor, node, name, vars, similar);\n    };\n    var matchName$1 = function (dom, node, format) {\n      if (isEq$3(node, format.inline)) {\n        return true;\n      }\n      if (isEq$3(node, format.block)) {\n        return true;\n      }\n      if (format.selector) {\n        return node.nodeType === 1 && dom.is(node, format.selector);\n      }\n    };\n    var matchItems = function (dom, node, format, itemName, similar, vars) {\n      var items = format[itemName];\n      if (isFunction(format.onmatch)) {\n        return format.onmatch(node, format, itemName);\n      }\n      if (items) {\n        if (isUndefined(items.length)) {\n          for (var key in items) {\n            if (has$2(items, key)) {\n              var value = itemName === 'attributes' ? dom.getAttrib(node, key) : getStyle(dom, node, key);\n              var expectedValue = replaceVars(items[key], vars);\n              var isEmptyValue = isNullable(value) || isEmpty$3(value);\n              if (isEmptyValue && isNullable(expectedValue)) {\n                continue;\n              }\n              if (similar && isEmptyValue && !format.exact) {\n                return false;\n              }\n              if ((!similar || format.exact) && !isEq$3(value, normalizeStyleValue(dom, expectedValue, key))) {\n                return false;\n              }\n            }\n          }\n        } else {\n          for (var i = 0; i < items.length; i++) {\n            if (itemName === 'attributes' ? dom.getAttrib(node, items[i]) : getStyle(dom, node, items[i])) {\n              return true;\n            }\n          }\n        }\n      }\n      return true;\n    };\n    var matchNode = function (ed, node, name, vars, similar) {\n      var formatList = ed.formatter.get(name);\n      var dom = ed.dom;\n      if (formatList && node) {\n        for (var i = 0; i < formatList.length; i++) {\n          var format = formatList[i];\n          if (matchName$1(ed.dom, node, format) && matchItems(dom, node, format, 'attributes', similar, vars) && matchItems(dom, node, format, 'styles', similar, vars)) {\n            var classes = format.classes;\n            if (classes) {\n              for (var x = 0; x < classes.length; x++) {\n                if (!ed.dom.hasClass(node, replaceVars(classes[x], vars))) {\n                  return;\n                }\n              }\n            }\n            return format;\n          }\n        }\n      }\n    };\n    var match$2 = function (editor, name, vars, node, similar) {\n      if (node) {\n        return matchParents(editor, node, name, vars, similar);\n      }\n      node = editor.selection.getNode();\n      if (matchParents(editor, node, name, vars, similar)) {\n        return true;\n      }\n      var startNode = editor.selection.getStart();\n      if (startNode !== node) {\n        if (matchParents(editor, startNode, name, vars, similar)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var matchAll = function (editor, names, vars) {\n      var matchedFormatNames = [];\n      var checkedMap = {};\n      var startElement = editor.selection.getStart();\n      editor.dom.getParent(startElement, function (node) {\n        for (var i = 0; i < names.length; i++) {\n          var name_1 = names[i];\n          if (!checkedMap[name_1] && matchNode(editor, node, name_1, vars)) {\n            checkedMap[name_1] = true;\n            matchedFormatNames.push(name_1);\n          }\n        }\n      }, editor.dom.getRoot());\n      return matchedFormatNames;\n    };\n    var closest = function (editor, names) {\n      var isRoot = function (elm) {\n        return eq(elm, SugarElement.fromDom(editor.getBody()));\n      };\n      var match = function (elm, name) {\n        return matchNode(editor, elm.dom, name) ? Optional.some(name) : Optional.none();\n      };\n      return Optional.from(editor.selection.getStart(true)).bind(function (rawElm) {\n        return closest$1(SugarElement.fromDom(rawElm), function (elm) {\n          return findMap(names, function (name) {\n            return match(elm, name);\n          });\n        }, isRoot);\n      }).getOrNull();\n    };\n    var canApply = function (editor, name) {\n      var formatList = editor.formatter.get(name);\n      var dom = editor.dom;\n      if (formatList) {\n        var startNode = editor.selection.getStart();\n        var parents = getParents$2(dom, startNode);\n        for (var x = formatList.length - 1; x >= 0; x--) {\n          var format = formatList[x];\n          if (!isSelectorFormat(format) || isNonNullable(format.defaultBlock)) {\n            return true;\n          }\n          for (var i = parents.length - 1; i >= 0; i--) {\n            if (dom.is(parents[i], format.selector)) {\n              return true;\n            }\n          }\n        }\n      }\n      return false;\n    };\n    var matchAllOnNode = function (editor, node, formatNames) {\n      return foldl(formatNames, function (acc, name) {\n        var matchSimilar = isVariableFormatName(editor, name);\n        if (editor.formatter.matchNode(node, name, {}, matchSimilar)) {\n          return acc.concat([name]);\n        } else {\n          return acc;\n        }\n      }, []);\n    };\n\n    var ZWSP = ZWSP$1, CARET_ID = '_mce_caret';\n    var importNode = function (ownerDocument, node) {\n      return ownerDocument.importNode(node, true);\n    };\n    var getEmptyCaretContainers = function (node) {\n      var nodes = [];\n      while (node) {\n        if (node.nodeType === 3 && node.nodeValue !== ZWSP || node.childNodes.length > 1) {\n          return [];\n        }\n        if (node.nodeType === 1) {\n          nodes.push(node);\n        }\n        node = node.firstChild;\n      }\n      return nodes;\n    };\n    var isCaretContainerEmpty = function (node) {\n      return getEmptyCaretContainers(node).length > 0;\n    };\n    var findFirstTextNode = function (node) {\n      if (node) {\n        var walker = new DomTreeWalker(node, node);\n        for (node = walker.current(); node; node = walker.next()) {\n          if (isText$7(node)) {\n            return node;\n          }\n        }\n      }\n      return null;\n    };\n    var createCaretContainer = function (fill) {\n      var caretContainer = SugarElement.fromTag('span');\n      setAll$1(caretContainer, {\n        'id': CARET_ID,\n        'data-mce-bogus': '1',\n        'data-mce-type': 'format-caret'\n      });\n      if (fill) {\n        append$1(caretContainer, SugarElement.fromText(ZWSP));\n      }\n      return caretContainer;\n    };\n    var trimZwspFromCaretContainer = function (caretContainerNode) {\n      var textNode = findFirstTextNode(caretContainerNode);\n      if (textNode && textNode.nodeValue.charAt(0) === ZWSP) {\n        textNode.deleteData(0, 1);\n      }\n      return textNode;\n    };\n    var removeCaretContainerNode = function (editor, node, moveCaret) {\n      if (moveCaret === void 0) {\n        moveCaret = true;\n      }\n      var dom = editor.dom, selection = editor.selection;\n      if (isCaretContainerEmpty(node)) {\n        deleteElement$2(editor, false, SugarElement.fromDom(node), moveCaret);\n      } else {\n        var rng = selection.getRng();\n        var block = dom.getParent(node, dom.isBlock);\n        var startContainer = rng.startContainer;\n        var startOffset = rng.startOffset;\n        var endContainer = rng.endContainer;\n        var endOffset = rng.endOffset;\n        var textNode = trimZwspFromCaretContainer(node);\n        dom.remove(node, true);\n        if (startContainer === textNode && startOffset > 0) {\n          rng.setStart(textNode, startOffset - 1);\n        }\n        if (endContainer === textNode && endOffset > 0) {\n          rng.setEnd(textNode, endOffset - 1);\n        }\n        if (block && dom.isEmpty(block)) {\n          fillWithPaddingBr(SugarElement.fromDom(block));\n        }\n        selection.setRng(rng);\n      }\n    };\n    var removeCaretContainer = function (editor, node, moveCaret) {\n      if (moveCaret === void 0) {\n        moveCaret = true;\n      }\n      var dom = editor.dom, selection = editor.selection;\n      if (!node) {\n        node = getParentCaretContainer(editor.getBody(), selection.getStart());\n        if (!node) {\n          while (node = dom.get(CARET_ID)) {\n            removeCaretContainerNode(editor, node, false);\n          }\n        }\n      } else {\n        removeCaretContainerNode(editor, node, moveCaret);\n      }\n    };\n    var insertCaretContainerNode = function (editor, caretContainer, formatNode) {\n      var dom = editor.dom, block = dom.getParent(formatNode, curry(isTextBlock$1, editor));\n      if (block && dom.isEmpty(block)) {\n        formatNode.parentNode.replaceChild(caretContainer, formatNode);\n      } else {\n        removeTrailingBr(SugarElement.fromDom(formatNode));\n        if (dom.isEmpty(formatNode)) {\n          formatNode.parentNode.replaceChild(caretContainer, formatNode);\n        } else {\n          dom.insertAfter(caretContainer, formatNode);\n        }\n      }\n    };\n    var appendNode = function (parentNode, node) {\n      parentNode.appendChild(node);\n      return node;\n    };\n    var insertFormatNodesIntoCaretContainer = function (formatNodes, caretContainer) {\n      var innerMostFormatNode = foldr(formatNodes, function (parentNode, formatNode) {\n        return appendNode(parentNode, formatNode.cloneNode(false));\n      }, caretContainer);\n      return appendNode(innerMostFormatNode, innerMostFormatNode.ownerDocument.createTextNode(ZWSP));\n    };\n    var cleanFormatNode = function (editor, caretContainer, formatNode, name, vars, similar) {\n      var formatter = editor.formatter;\n      var dom = editor.dom;\n      var validFormats = filter$4(keys(formatter.get()), function (formatName) {\n        return formatName !== name && !contains$2(formatName, 'removeformat');\n      });\n      var matchedFormats = matchAllOnNode(editor, formatNode, validFormats);\n      var uniqueFormats = filter$4(matchedFormats, function (fmtName) {\n        return !areSimilarFormats(editor, fmtName, name);\n      });\n      if (uniqueFormats.length > 0) {\n        var clonedFormatNode = formatNode.cloneNode(false);\n        dom.add(caretContainer, clonedFormatNode);\n        formatter.remove(name, vars, clonedFormatNode, similar);\n        dom.remove(clonedFormatNode);\n        return Optional.some(clonedFormatNode);\n      } else {\n        return Optional.none();\n      }\n    };\n    var applyCaretFormat = function (editor, name, vars) {\n      var caretContainer, textNode;\n      var selection = editor.selection;\n      var selectionRng = selection.getRng();\n      var offset = selectionRng.startOffset;\n      var container = selectionRng.startContainer;\n      var text = container.nodeValue;\n      caretContainer = getParentCaretContainer(editor.getBody(), selection.getStart());\n      if (caretContainer) {\n        textNode = findFirstTextNode(caretContainer);\n      }\n      var wordcharRegex = /[^\\s\\u00a0\\u00ad\\u200b\\ufeff]/;\n      if (text && offset > 0 && offset < text.length && wordcharRegex.test(text.charAt(offset)) && wordcharRegex.test(text.charAt(offset - 1))) {\n        var bookmark = selection.getBookmark();\n        selectionRng.collapse(true);\n        var rng = expandRng(editor, selectionRng, editor.formatter.get(name));\n        rng = split(rng);\n        editor.formatter.apply(name, vars, rng);\n        selection.moveToBookmark(bookmark);\n      } else {\n        if (!caretContainer || textNode.nodeValue !== ZWSP) {\n          caretContainer = importNode(editor.getDoc(), createCaretContainer(true).dom);\n          textNode = caretContainer.firstChild;\n          selectionRng.insertNode(caretContainer);\n          offset = 1;\n          editor.formatter.apply(name, vars, caretContainer);\n        } else {\n          editor.formatter.apply(name, vars, caretContainer);\n        }\n        selection.setCursorLocation(textNode, offset);\n      }\n    };\n    var removeCaretFormat = function (editor, name, vars, similar) {\n      var dom = editor.dom;\n      var selection = editor.selection;\n      var hasContentAfter, node, formatNode;\n      var parents = [];\n      var rng = selection.getRng();\n      var container = rng.startContainer;\n      var offset = rng.startOffset;\n      node = container;\n      if (container.nodeType === 3) {\n        if (offset !== container.nodeValue.length) {\n          hasContentAfter = true;\n        }\n        node = node.parentNode;\n      }\n      while (node) {\n        if (matchNode(editor, node, name, vars, similar)) {\n          formatNode = node;\n          break;\n        }\n        if (node.nextSibling) {\n          hasContentAfter = true;\n        }\n        parents.push(node);\n        node = node.parentNode;\n      }\n      if (!formatNode) {\n        return;\n      }\n      if (hasContentAfter) {\n        var bookmark = selection.getBookmark();\n        rng.collapse(true);\n        var expandedRng = expandRng(editor, rng, editor.formatter.get(name), true);\n        expandedRng = split(expandedRng);\n        editor.formatter.remove(name, vars, expandedRng, similar);\n        selection.moveToBookmark(bookmark);\n      } else {\n        var caretContainer = getParentCaretContainer(editor.getBody(), formatNode);\n        var newCaretContainer = createCaretContainer(false).dom;\n        insertCaretContainerNode(editor, newCaretContainer, caretContainer !== null ? caretContainer : formatNode);\n        var cleanedFormatNode = cleanFormatNode(editor, newCaretContainer, formatNode, name, vars, similar);\n        var caretTextNode = insertFormatNodesIntoCaretContainer(parents.concat(cleanedFormatNode.toArray()), newCaretContainer);\n        removeCaretContainerNode(editor, caretContainer, false);\n        selection.setCursorLocation(caretTextNode, 1);\n        if (dom.isEmpty(formatNode)) {\n          dom.remove(formatNode);\n        }\n      }\n    };\n    var disableCaretContainer = function (editor, keyCode) {\n      var selection = editor.selection, body = editor.getBody();\n      removeCaretContainer(editor, null, false);\n      if ((keyCode === 8 || keyCode === 46) && selection.isCollapsed() && selection.getStart().innerHTML === ZWSP) {\n        removeCaretContainer(editor, getParentCaretContainer(body, selection.getStart()));\n      }\n      if (keyCode === 37 || keyCode === 39) {\n        removeCaretContainer(editor, getParentCaretContainer(body, selection.getStart()));\n      }\n    };\n    var setup$k = function (editor) {\n      editor.on('mouseup keydown', function (e) {\n        disableCaretContainer(editor, e.keyCode);\n      });\n    };\n    var replaceWithCaretFormat = function (targetNode, formatNodes) {\n      var caretContainer = createCaretContainer(false);\n      var innerMost = insertFormatNodesIntoCaretContainer(formatNodes, caretContainer.dom);\n      before$4(SugarElement.fromDom(targetNode), caretContainer);\n      remove$7(SugarElement.fromDom(targetNode));\n      return CaretPosition(innerMost, 0);\n    };\n    var isFormatElement = function (editor, element) {\n      var inlineElements = editor.schema.getTextInlineElements();\n      return has$2(inlineElements, name(element)) && !isCaretNode(element.dom) && !isBogus$2(element.dom);\n    };\n    var isEmptyCaretFormatElement = function (element) {\n      return isCaretNode(element.dom) && isCaretContainerEmpty(element.dom);\n    };\n\n    var postProcessHooks = {};\n    var filter = filter$2;\n    var each$c = each$i;\n    var addPostProcessHook = function (name, hook) {\n      var hooks = postProcessHooks[name];\n      if (!hooks) {\n        postProcessHooks[name] = [];\n      }\n      postProcessHooks[name].push(hook);\n    };\n    var postProcess$1 = function (name, editor) {\n      each$c(postProcessHooks[name], function (hook) {\n        hook(editor);\n      });\n    };\n    addPostProcessHook('pre', function (editor) {\n      var rng = editor.selection.getRng();\n      var blocks;\n      var hasPreSibling = function (pre) {\n        return isPre(pre.previousSibling) && indexOf$1(blocks, pre.previousSibling) !== -1;\n      };\n      var joinPre = function (pre1, pre2) {\n        DomQuery(pre2).remove();\n        DomQuery(pre1).append('<br><br>').append(pre2.childNodes);\n      };\n      var isPre = matchNodeNames(['pre']);\n      if (!rng.collapsed) {\n        blocks = editor.selection.getSelectedBlocks();\n        each$c(filter(filter(blocks, isPre), hasPreSibling), function (pre) {\n          joinPre(pre.previousSibling, pre);\n        });\n      }\n    });\n\n    var each$b = Tools.each;\n    var isElementNode$1 = function (node) {\n      return isElement$5(node) && !isBookmarkNode$1(node) && !isCaretNode(node) && !isBogus$2(node);\n    };\n    var findElementSibling = function (node, siblingName) {\n      for (var sibling = node; sibling; sibling = sibling[siblingName]) {\n        if (isText$7(sibling) && isNotEmpty(sibling.data)) {\n          return node;\n        }\n        if (isElement$5(sibling) && !isBookmarkNode$1(sibling)) {\n          return sibling;\n        }\n      }\n      return node;\n    };\n    var mergeSiblingsNodes = function (dom, prev, next) {\n      var elementUtils = ElementUtils(dom);\n      if (prev && next) {\n        prev = findElementSibling(prev, 'previousSibling');\n        next = findElementSibling(next, 'nextSibling');\n        if (elementUtils.compare(prev, next)) {\n          for (var sibling = prev.nextSibling; sibling && sibling !== next;) {\n            var tmpSibling = sibling;\n            sibling = sibling.nextSibling;\n            prev.appendChild(tmpSibling);\n          }\n          dom.remove(next);\n          Tools.each(Tools.grep(next.childNodes), function (node) {\n            prev.appendChild(node);\n          });\n          return prev;\n        }\n      }\n      return next;\n    };\n    var mergeSiblings = function (dom, format, vars, node) {\n      if (node && format.merge_siblings !== false) {\n        var newNode = mergeSiblingsNodes(dom, getNonWhiteSpaceSibling(node), node);\n        mergeSiblingsNodes(dom, newNode, getNonWhiteSpaceSibling(newNode, true));\n      }\n    };\n    var clearChildStyles = function (dom, format, node) {\n      if (format.clear_child_styles) {\n        var selector = format.links ? '*:not(a)' : '*';\n        each$b(dom.select(selector, node), function (node) {\n          if (isElementNode$1(node)) {\n            each$b(format.styles, function (value, name) {\n              dom.setStyle(node, name, '');\n            });\n          }\n        });\n      }\n    };\n    var processChildElements = function (node, filter, process) {\n      each$b(node.childNodes, function (node) {\n        if (isElementNode$1(node)) {\n          if (filter(node)) {\n            process(node);\n          }\n          if (node.hasChildNodes()) {\n            processChildElements(node, filter, process);\n          }\n        }\n      });\n    };\n    var unwrapEmptySpan = function (dom, node) {\n      if (node.nodeName === 'SPAN' && dom.getAttribs(node).length === 0) {\n        dom.remove(node, true);\n      }\n    };\n    var hasStyle = function (dom, name) {\n      return function (node) {\n        return !!(node && getStyle(dom, node, name));\n      };\n    };\n    var applyStyle = function (dom, name, value) {\n      return function (node) {\n        dom.setStyle(node, name, value);\n        if (node.getAttribute('style') === '') {\n          node.removeAttribute('style');\n        }\n        unwrapEmptySpan(dom, node);\n      };\n    };\n\n    var removeResult = Adt.generate([\n      { keep: [] },\n      { rename: ['name'] },\n      { removed: [] }\n    ]);\n    var MCE_ATTR_RE = /^(src|href|style)$/;\n    var each$a = Tools.each;\n    var isEq$2 = isEq$5;\n    var isTableCellOrRow = function (node) {\n      return /^(TR|TH|TD)$/.test(node.nodeName);\n    };\n    var isChildOfInlineParent = function (dom, node, parent) {\n      return dom.isChildOf(node, parent) && node !== parent && !dom.isBlock(parent);\n    };\n    var getContainer = function (ed, rng, start) {\n      var container = rng[start ? 'startContainer' : 'endContainer'];\n      var offset = rng[start ? 'startOffset' : 'endOffset'];\n      if (isElement$5(container)) {\n        var lastIdx = container.childNodes.length - 1;\n        if (!start && offset) {\n          offset--;\n        }\n        container = container.childNodes[offset > lastIdx ? lastIdx : offset];\n      }\n      if (isText$7(container) && start && offset >= container.nodeValue.length) {\n        container = new DomTreeWalker(container, ed.getBody()).next() || container;\n      }\n      if (isText$7(container) && !start && offset === 0) {\n        container = new DomTreeWalker(container, ed.getBody()).prev() || container;\n      }\n      return container;\n    };\n    var normalizeTableSelection = function (node, start) {\n      var prop = start ? 'firstChild' : 'lastChild';\n      if (isTableCellOrRow(node) && node[prop]) {\n        var childNode = node[prop];\n        if (node.nodeName === 'TR') {\n          return childNode[prop] || childNode;\n        } else {\n          return childNode;\n        }\n      }\n      return node;\n    };\n    var wrap$1 = function (dom, node, name, attrs) {\n      var wrapper = dom.create(name, attrs);\n      node.parentNode.insertBefore(wrapper, node);\n      wrapper.appendChild(node);\n      return wrapper;\n    };\n    var wrapWithSiblings = function (dom, node, next, name, attrs) {\n      var start = SugarElement.fromDom(node);\n      var wrapper = SugarElement.fromDom(dom.create(name, attrs));\n      var siblings = next ? nextSiblings(start) : prevSiblings(start);\n      append(wrapper, siblings);\n      if (next) {\n        before$4(start, wrapper);\n        prepend(wrapper, start);\n      } else {\n        after$3(start, wrapper);\n        append$1(wrapper, start);\n      }\n      return wrapper.dom;\n    };\n    var matchName = function (dom, node, format) {\n      if (isInlineFormat(format) && isEq$2(node, format.inline)) {\n        return true;\n      }\n      if (isBlockFormat(format) && isEq$2(node, format.block)) {\n        return true;\n      }\n      if (isSelectorFormat(format)) {\n        return isElement$5(node) && dom.is(node, format.selector);\n      }\n    };\n    var isColorFormatAndAnchor = function (node, format) {\n      return format.links && node.nodeName === 'A';\n    };\n    var find = function (dom, node, next, inc) {\n      var sibling = getNonWhiteSpaceSibling(node, next, inc);\n      return isNullable(sibling) || sibling.nodeName === 'BR' || dom.isBlock(sibling);\n    };\n    var removeNode = function (ed, node, format) {\n      var parentNode = node.parentNode;\n      var rootBlockElm;\n      var dom = ed.dom, forcedRootBlock = getForcedRootBlock(ed);\n      if (isBlockFormat(format)) {\n        if (!forcedRootBlock) {\n          if (dom.isBlock(node) && !dom.isBlock(parentNode)) {\n            if (!find(dom, node, false) && !find(dom, node.firstChild, true, true)) {\n              node.insertBefore(dom.create('br'), node.firstChild);\n            }\n            if (!find(dom, node, true) && !find(dom, node.lastChild, false, true)) {\n              node.appendChild(dom.create('br'));\n            }\n          }\n        } else {\n          if (parentNode === dom.getRoot()) {\n            if (!format.list_block || !isEq$2(node, format.list_block)) {\n              each$k(from(node.childNodes), function (node) {\n                if (isValid(ed, forcedRootBlock, node.nodeName.toLowerCase())) {\n                  if (!rootBlockElm) {\n                    rootBlockElm = wrap$1(dom, node, forcedRootBlock);\n                    dom.setAttribs(rootBlockElm, ed.settings.forced_root_block_attrs);\n                  } else {\n                    rootBlockElm.appendChild(node);\n                  }\n                } else {\n                  rootBlockElm = null;\n                }\n              });\n            }\n          }\n        }\n      }\n      if (isMixedFormat(format) && !isEq$2(format.inline, node)) {\n        return;\n      }\n      dom.remove(node, true);\n    };\n    var removeFormatInternal = function (ed, format, vars, node, compareNode) {\n      var stylesModified;\n      var dom = ed.dom;\n      if (!matchName(dom, node, format) && !isColorFormatAndAnchor(node, format)) {\n        return removeResult.keep();\n      }\n      var elm = node;\n      if (isInlineFormat(format) && format.remove === 'all' && isArray$1(format.preserve_attributes)) {\n        var attrsToPreserve = filter$4(dom.getAttribs(elm), function (attr) {\n          return contains$3(format.preserve_attributes, attr.name.toLowerCase());\n        });\n        dom.removeAllAttribs(elm);\n        each$k(attrsToPreserve, function (attr) {\n          return dom.setAttrib(elm, attr.name, attr.value);\n        });\n        if (attrsToPreserve.length > 0) {\n          return removeResult.rename('span');\n        }\n      }\n      if (format.remove !== 'all') {\n        each$a(format.styles, function (value, name) {\n          value = normalizeStyleValue(dom, replaceVars(value, vars), name + '');\n          if (isNumber(name)) {\n            name = value;\n            compareNode = null;\n          }\n          if (format.remove_similar || (!compareNode || isEq$2(getStyle(dom, compareNode, name), value))) {\n            dom.setStyle(elm, name, '');\n          }\n          stylesModified = true;\n        });\n        if (stylesModified && dom.getAttrib(elm, 'style') === '') {\n          elm.removeAttribute('style');\n          elm.removeAttribute('data-mce-style');\n        }\n        each$a(format.attributes, function (value, name) {\n          var valueOut;\n          value = replaceVars(value, vars);\n          if (isNumber(name)) {\n            name = value;\n            compareNode = null;\n          }\n          if (format.remove_similar || (!compareNode || isEq$2(dom.getAttrib(compareNode, name), value))) {\n            if (name === 'class') {\n              value = dom.getAttrib(elm, name);\n              if (value) {\n                valueOut = '';\n                each$k(value.split(/\\s+/), function (cls) {\n                  if (/mce\\-\\w+/.test(cls)) {\n                    valueOut += (valueOut ? ' ' : '') + cls;\n                  }\n                });\n                if (valueOut) {\n                  dom.setAttrib(elm, name, valueOut);\n                  return;\n                }\n              }\n            }\n            if (MCE_ATTR_RE.test(name)) {\n              elm.removeAttribute('data-mce-' + name);\n            }\n            if (name === 'style' && matchNodeNames(['li'])(elm) && dom.getStyle(elm, 'list-style-type') === 'none') {\n              elm.removeAttribute(name);\n              dom.setStyle(elm, 'list-style-type', 'none');\n              return;\n            }\n            if (name === 'class') {\n              elm.removeAttribute('className');\n            }\n            elm.removeAttribute(name);\n          }\n        });\n        each$a(format.classes, function (value) {\n          value = replaceVars(value, vars);\n          if (!compareNode || dom.hasClass(compareNode, value)) {\n            dom.removeClass(elm, value);\n          }\n        });\n        var attrs = dom.getAttribs(elm);\n        for (var i = 0; i < attrs.length; i++) {\n          var attrName = attrs[i].nodeName;\n          if (attrName.indexOf('_') !== 0 && attrName.indexOf('data-') !== 0) {\n            return removeResult.keep();\n          }\n        }\n      }\n      if (format.remove !== 'none') {\n        removeNode(ed, elm, format);\n        return removeResult.removed();\n      }\n      return removeResult.keep();\n    };\n    var removeFormat$1 = function (ed, format, vars, node, compareNode) {\n      return removeFormatInternal(ed, format, vars, node, compareNode).fold(never, function (newName) {\n        ed.dom.rename(node, newName);\n        return true;\n      }, always);\n    };\n    var findFormatRoot = function (editor, container, name, vars, similar) {\n      var formatRoot;\n      each$k(getParents$2(editor.dom, container.parentNode).reverse(), function (parent) {\n        if (!formatRoot && parent.id !== '_start' && parent.id !== '_end') {\n          var format = matchNode(editor, parent, name, vars, similar);\n          if (format && format.split !== false) {\n            formatRoot = parent;\n          }\n        }\n      });\n      return formatRoot;\n    };\n    var removeFormatFromClone = function (editor, format, vars, clone) {\n      return removeFormatInternal(editor, format, vars, clone, clone).fold(constant(clone), function (newName) {\n        var fragment = editor.dom.createFragment();\n        fragment.appendChild(clone);\n        return editor.dom.rename(clone, newName);\n      }, constant(null));\n    };\n    var wrapAndSplit = function (editor, formatList, formatRoot, container, target, split, format, vars) {\n      var clone, lastClone, firstClone;\n      var dom = editor.dom;\n      if (formatRoot) {\n        var formatRootParent = formatRoot.parentNode;\n        for (var parent_1 = container.parentNode; parent_1 && parent_1 !== formatRootParent; parent_1 = parent_1.parentNode) {\n          clone = dom.clone(parent_1, false);\n          for (var i = 0; i < formatList.length; i++) {\n            clone = removeFormatFromClone(editor, formatList[i], vars, clone);\n            if (clone === null) {\n              break;\n            }\n          }\n          if (clone) {\n            if (lastClone) {\n              clone.appendChild(lastClone);\n            }\n            if (!firstClone) {\n              firstClone = clone;\n            }\n            lastClone = clone;\n          }\n        }\n        if (split && (!format.mixed || !dom.isBlock(formatRoot))) {\n          container = dom.split(formatRoot, container);\n        }\n        if (lastClone) {\n          target.parentNode.insertBefore(lastClone, target);\n          firstClone.appendChild(target);\n          if (isInlineFormat(format)) {\n            mergeSiblings(dom, format, vars, lastClone);\n          }\n        }\n      }\n      return container;\n    };\n    var remove$1 = function (ed, name, vars, node, similar) {\n      var formatList = ed.formatter.get(name);\n      var format = formatList[0];\n      var contentEditable = true;\n      var dom = ed.dom;\n      var selection = ed.selection;\n      var splitToFormatRoot = function (container) {\n        var formatRoot = findFormatRoot(ed, container, name, vars, similar);\n        return wrapAndSplit(ed, formatList, formatRoot, container, container, true, format, vars);\n      };\n      var isRemoveBookmarkNode = function (node) {\n        return isBookmarkNode$1(node) && isElement$5(node) && (node.id === '_start' || node.id === '_end');\n      };\n      var removeNodeFormat = function (node) {\n        return exists(formatList, function (fmt) {\n          return removeFormat$1(ed, fmt, vars, node, node);\n        });\n      };\n      var process = function (node) {\n        var lastContentEditable = true;\n        var hasContentEditableState = false;\n        if (isElement$5(node) && dom.getContentEditable(node)) {\n          lastContentEditable = contentEditable;\n          contentEditable = dom.getContentEditable(node) === 'true';\n          hasContentEditableState = true;\n        }\n        var children = from(node.childNodes);\n        if (contentEditable && !hasContentEditableState) {\n          var removed = removeNodeFormat(node);\n          var currentNodeMatches = removed || exists(formatList, function (f) {\n            return matchName$1(dom, node, f);\n          });\n          var parentNode = node.parentNode;\n          if (!currentNodeMatches && isNonNullable(parentNode) && shouldExpandToSelector(format)) {\n            removeNodeFormat(parentNode);\n          }\n        }\n        if (format.deep) {\n          if (children.length) {\n            for (var i = 0; i < children.length; i++) {\n              process(children[i]);\n            }\n            if (hasContentEditableState) {\n              contentEditable = lastContentEditable;\n            }\n          }\n        }\n        var textDecorations = [\n          'underline',\n          'line-through',\n          'overline'\n        ];\n        each$k(textDecorations, function (decoration) {\n          if (isElement$5(node) && ed.dom.getStyle(node, 'text-decoration') === decoration && node.parentNode && getTextDecoration(dom, node.parentNode) === decoration) {\n            removeFormat$1(ed, {\n              deep: false,\n              exact: true,\n              inline: 'span',\n              styles: { textDecoration: decoration }\n            }, null, node);\n          }\n        });\n      };\n      var unwrap = function (start) {\n        var node = dom.get(start ? '_start' : '_end');\n        var out = node[start ? 'firstChild' : 'lastChild'];\n        if (isRemoveBookmarkNode(out)) {\n          out = out[start ? 'firstChild' : 'lastChild'];\n        }\n        if (isText$7(out) && out.data.length === 0) {\n          out = start ? node.previousSibling || node.nextSibling : node.nextSibling || node.previousSibling;\n        }\n        dom.remove(node, true);\n        return out;\n      };\n      var removeRngStyle = function (rng) {\n        var startContainer, endContainer;\n        var expandedRng = expandRng(ed, rng, formatList, rng.collapsed);\n        if (format.split) {\n          expandedRng = split(expandedRng);\n          startContainer = getContainer(ed, expandedRng, true);\n          endContainer = getContainer(ed, expandedRng);\n          if (startContainer !== endContainer) {\n            startContainer = normalizeTableSelection(startContainer, true);\n            endContainer = normalizeTableSelection(endContainer, false);\n            if (isChildOfInlineParent(dom, startContainer, endContainer)) {\n              var marker = Optional.from(startContainer.firstChild).getOr(startContainer);\n              splitToFormatRoot(wrapWithSiblings(dom, marker, true, 'span', {\n                'id': '_start',\n                'data-mce-type': 'bookmark'\n              }));\n              unwrap(true);\n              return;\n            }\n            if (isChildOfInlineParent(dom, endContainer, startContainer)) {\n              var marker = Optional.from(endContainer.lastChild).getOr(endContainer);\n              splitToFormatRoot(wrapWithSiblings(dom, marker, false, 'span', {\n                'id': '_end',\n                'data-mce-type': 'bookmark'\n              }));\n              unwrap(false);\n              return;\n            }\n            startContainer = wrap$1(dom, startContainer, 'span', {\n              'id': '_start',\n              'data-mce-type': 'bookmark'\n            });\n            endContainer = wrap$1(dom, endContainer, 'span', {\n              'id': '_end',\n              'data-mce-type': 'bookmark'\n            });\n            var newRng = dom.createRng();\n            newRng.setStartAfter(startContainer);\n            newRng.setEndBefore(endContainer);\n            walk$2(dom, newRng, function (nodes) {\n              each$k(nodes, function (n) {\n                if (!isBookmarkNode$1(n) && !isBookmarkNode$1(n.parentNode)) {\n                  splitToFormatRoot(n);\n                }\n              });\n            });\n            splitToFormatRoot(startContainer);\n            splitToFormatRoot(endContainer);\n            startContainer = unwrap(true);\n            endContainer = unwrap();\n          } else {\n            startContainer = endContainer = splitToFormatRoot(startContainer);\n          }\n          expandedRng.startContainer = startContainer.parentNode ? startContainer.parentNode : startContainer;\n          expandedRng.startOffset = dom.nodeIndex(startContainer);\n          expandedRng.endContainer = endContainer.parentNode ? endContainer.parentNode : endContainer;\n          expandedRng.endOffset = dom.nodeIndex(endContainer) + 1;\n        }\n        walk$2(dom, expandedRng, function (nodes) {\n          each$k(nodes, process);\n        });\n      };\n      if (node) {\n        if (isNode(node)) {\n          var rng = dom.createRng();\n          rng.setStartBefore(node);\n          rng.setEndAfter(node);\n          removeRngStyle(rng);\n        } else {\n          removeRngStyle(node);\n        }\n        fireFormatRemove(ed, name, node, vars);\n        return;\n      }\n      if (dom.getContentEditable(selection.getNode()) === 'false') {\n        node = selection.getNode();\n        for (var i = 0; i < formatList.length; i++) {\n          if (formatList[i].ceFalseOverride) {\n            if (removeFormat$1(ed, formatList[i], vars, node, node)) {\n              break;\n            }\n          }\n        }\n        fireFormatRemove(ed, name, node, vars);\n        return;\n      }\n      if (!selection.isCollapsed() || !isInlineFormat(format) || getCellsFromEditor(ed).length) {\n        preserve(selection, true, function () {\n          runOnRanges(ed, removeRngStyle);\n        });\n        if (isInlineFormat(format) && match$2(ed, name, vars, selection.getStart())) {\n          moveStart(dom, selection, selection.getRng());\n        }\n        ed.nodeChanged();\n      } else {\n        removeCaretFormat(ed, name, vars, similar);\n      }\n      fireFormatRemove(ed, name, node, vars);\n    };\n\n    var each$9 = Tools.each;\n    var mergeTextDecorationsAndColor = function (dom, format, vars, node) {\n      var processTextDecorationsAndColor = function (n) {\n        if (n.nodeType === 1 && n.parentNode && n.parentNode.nodeType === 1) {\n          var textDecoration = getTextDecoration(dom, n.parentNode);\n          if (dom.getStyle(n, 'color') && textDecoration) {\n            dom.setStyle(n, 'text-decoration', textDecoration);\n          } else if (dom.getStyle(n, 'text-decoration') === textDecoration) {\n            dom.setStyle(n, 'text-decoration', null);\n          }\n        }\n      };\n      if (format.styles && (format.styles.color || format.styles.textDecoration)) {\n        Tools.walk(node, processTextDecorationsAndColor, 'childNodes');\n        processTextDecorationsAndColor(node);\n      }\n    };\n    var mergeBackgroundColorAndFontSize = function (dom, format, vars, node) {\n      if (format.styles && format.styles.backgroundColor) {\n        processChildElements(node, hasStyle(dom, 'fontSize'), applyStyle(dom, 'backgroundColor', replaceVars(format.styles.backgroundColor, vars)));\n      }\n    };\n    var mergeSubSup = function (dom, format, vars, node) {\n      if (isInlineFormat(format) && (format.inline === 'sub' || format.inline === 'sup')) {\n        processChildElements(node, hasStyle(dom, 'fontSize'), applyStyle(dom, 'fontSize', ''));\n        dom.remove(dom.select(format.inline === 'sup' ? 'sub' : 'sup', node), true);\n      }\n    };\n    var mergeWithChildren = function (editor, formatList, vars, node) {\n      each$9(formatList, function (format) {\n        if (isInlineFormat(format)) {\n          each$9(editor.dom.select(format.inline, node), function (child) {\n            if (!isElementNode$1(child)) {\n              return;\n            }\n            removeFormat$1(editor, format, vars, child, format.exact ? child : null);\n          });\n        }\n        clearChildStyles(editor.dom, format, node);\n      });\n    };\n    var mergeWithParents = function (editor, format, name, vars, node) {\n      if (matchNode(editor, node.parentNode, name, vars)) {\n        if (removeFormat$1(editor, format, vars, node)) {\n          return;\n        }\n      }\n      if (format.merge_with_parents) {\n        editor.dom.getParent(node.parentNode, function (parent) {\n          if (matchNode(editor, parent, name, vars)) {\n            removeFormat$1(editor, format, vars, node);\n            return true;\n          }\n        });\n      }\n    };\n\n    var each$8 = Tools.each;\n    var isElementNode = function (node) {\n      return isElement$5(node) && !isBookmarkNode$1(node) && !isCaretNode(node) && !isBogus$2(node);\n    };\n    var canFormatBR = function (editor, format, node, parentName) {\n      if (canFormatEmptyLines(editor) && isInlineFormat(format)) {\n        var validBRParentElements = getTextRootBlockElements(editor.schema);\n        var hasCaretNodeSibling = sibling(SugarElement.fromDom(node), function (sibling) {\n          return isCaretNode(sibling.dom);\n        });\n        return hasNonNullableKey(validBRParentElements, parentName) && isEmpty$2(SugarElement.fromDom(node.parentNode), false) && !hasCaretNodeSibling;\n      } else {\n        return false;\n      }\n    };\n    var applyFormat$1 = function (ed, name, vars, node) {\n      var formatList = ed.formatter.get(name);\n      var format = formatList[0];\n      var isCollapsed = !node && ed.selection.isCollapsed();\n      var dom = ed.dom;\n      var selection = ed.selection;\n      var setElementFormat = function (elm, fmt) {\n        if (fmt === void 0) {\n          fmt = format;\n        }\n        if (isFunction(fmt.onformat)) {\n          fmt.onformat(elm, fmt, vars, node);\n        }\n        each$8(fmt.styles, function (value, name) {\n          dom.setStyle(elm, name, replaceVars(value, vars));\n        });\n        if (fmt.styles) {\n          var styleVal = dom.getAttrib(elm, 'style');\n          if (styleVal) {\n            dom.setAttrib(elm, 'data-mce-style', styleVal);\n          }\n        }\n        each$8(fmt.attributes, function (value, name) {\n          dom.setAttrib(elm, name, replaceVars(value, vars));\n        });\n        each$8(fmt.classes, function (value) {\n          value = replaceVars(value, vars);\n          if (!dom.hasClass(elm, value)) {\n            dom.addClass(elm, value);\n          }\n        });\n      };\n      var applyNodeStyle = function (formatList, node) {\n        var found = false;\n        each$8(formatList, function (format) {\n          if (!isSelectorFormat(format)) {\n            return false;\n          }\n          if (isNonNullable(format.collapsed) && format.collapsed !== isCollapsed) {\n            return;\n          }\n          if (dom.is(node, format.selector) && !isCaretNode(node)) {\n            setElementFormat(node, format);\n            found = true;\n            return false;\n          }\n        });\n        return found;\n      };\n      var createWrapElement = function (wrapName) {\n        if (isString$1(wrapName)) {\n          var wrapElm = dom.create(wrapName);\n          setElementFormat(wrapElm);\n          return wrapElm;\n        } else {\n          return null;\n        }\n      };\n      var applyRngStyle = function (dom, rng, nodeSpecific) {\n        var newWrappers = [];\n        var contentEditable = true;\n        var wrapName = format.inline || format.block;\n        var wrapElm = createWrapElement(wrapName);\n        walk$2(dom, rng, function (nodes) {\n          var currentWrapElm;\n          var process = function (node) {\n            var hasContentEditableState = false;\n            var lastContentEditable = contentEditable;\n            var nodeName = node.nodeName.toLowerCase();\n            var parentNode = node.parentNode;\n            var parentName = parentNode.nodeName.toLowerCase();\n            if (isElement$5(node) && dom.getContentEditable(node)) {\n              lastContentEditable = contentEditable;\n              contentEditable = dom.getContentEditable(node) === 'true';\n              hasContentEditableState = true;\n            }\n            if (isBr$5(node) && !canFormatBR(ed, format, node, parentName)) {\n              currentWrapElm = null;\n              if (isBlockFormat(format)) {\n                dom.remove(node);\n              }\n              return;\n            }\n            if (isBlockFormat(format) && format.wrapper && matchNode(ed, node, name, vars)) {\n              currentWrapElm = null;\n              return;\n            }\n            if (contentEditable && !hasContentEditableState && isBlockFormat(format) && !format.wrapper && isTextBlock$1(ed, nodeName) && isValid(ed, parentName, wrapName)) {\n              var elm = dom.rename(node, wrapName);\n              setElementFormat(elm);\n              newWrappers.push(elm);\n              currentWrapElm = null;\n              return;\n            }\n            if (isSelectorFormat(format)) {\n              var found = applyNodeStyle(formatList, node);\n              if (!found && isNonNullable(parentNode) && shouldExpandToSelector(format)) {\n                found = applyNodeStyle(formatList, parentNode);\n              }\n              if (!isInlineFormat(format) || found) {\n                currentWrapElm = null;\n                return;\n              }\n            }\n            if (contentEditable && !hasContentEditableState && isValid(ed, wrapName, nodeName) && isValid(ed, parentName, wrapName) && !(!nodeSpecific && isText$7(node) && isZwsp(node.data)) && !isCaretNode(node) && (!isInlineFormat(format) || !dom.isBlock(node))) {\n              if (!currentWrapElm) {\n                currentWrapElm = dom.clone(wrapElm, false);\n                node.parentNode.insertBefore(currentWrapElm, node);\n                newWrappers.push(currentWrapElm);\n              }\n              currentWrapElm.appendChild(node);\n            } else {\n              currentWrapElm = null;\n              each$k(from(node.childNodes), process);\n              if (hasContentEditableState) {\n                contentEditable = lastContentEditable;\n              }\n              currentWrapElm = null;\n            }\n          };\n          each$k(nodes, process);\n        });\n        if (format.links === true) {\n          each$k(newWrappers, function (node) {\n            var process = function (node) {\n              if (node.nodeName === 'A') {\n                setElementFormat(node, format);\n              }\n              each$k(from(node.childNodes), process);\n            };\n            process(node);\n          });\n        }\n        each$k(newWrappers, function (node) {\n          var getChildCount = function (node) {\n            var count = 0;\n            each$k(node.childNodes, function (node) {\n              if (!isEmptyTextNode$1(node) && !isBookmarkNode$1(node)) {\n                count++;\n              }\n            });\n            return count;\n          };\n          var mergeStyles = function (node) {\n            var childElement = find$3(node.childNodes, isElementNode).filter(function (child) {\n              return matchName$1(dom, child, format);\n            });\n            return childElement.map(function (child) {\n              var clone = dom.clone(child, false);\n              setElementFormat(clone);\n              dom.replace(clone, node, true);\n              dom.remove(child, true);\n              return clone;\n            }).getOr(node);\n          };\n          var childCount = getChildCount(node);\n          if ((newWrappers.length > 1 || !dom.isBlock(node)) && childCount === 0) {\n            dom.remove(node, true);\n            return;\n          }\n          if (isInlineFormat(format) || isBlockFormat(format) && format.wrapper) {\n            if (!format.exact && childCount === 1) {\n              node = mergeStyles(node);\n            }\n            mergeWithChildren(ed, formatList, vars, node);\n            mergeWithParents(ed, format, name, vars, node);\n            mergeBackgroundColorAndFontSize(dom, format, vars, node);\n            mergeTextDecorationsAndColor(dom, format, vars, node);\n            mergeSubSup(dom, format, vars, node);\n            mergeSiblings(dom, format, vars, node);\n          }\n        });\n      };\n      if (dom.getContentEditable(selection.getNode()) === 'false') {\n        node = selection.getNode();\n        for (var i = 0, l = formatList.length; i < l; i++) {\n          var formatItem = formatList[i];\n          if (formatItem.ceFalseOverride && isSelectorFormat(formatItem) && dom.is(node, formatItem.selector)) {\n            setElementFormat(node, formatItem);\n            break;\n          }\n        }\n        fireFormatApply(ed, name, node, vars);\n        return;\n      }\n      if (format) {\n        if (node) {\n          if (isNode(node)) {\n            if (!applyNodeStyle(formatList, node)) {\n              var rng = dom.createRng();\n              rng.setStartBefore(node);\n              rng.setEndAfter(node);\n              applyRngStyle(dom, expandRng(ed, rng, formatList), true);\n            }\n          } else {\n            applyRngStyle(dom, node, true);\n          }\n        } else {\n          if (!isCollapsed || !isInlineFormat(format) || getCellsFromEditor(ed).length) {\n            var curSelNode = selection.getNode();\n            var firstFormat = formatList[0];\n            if (!ed.settings.forced_root_block && firstFormat.defaultBlock && !dom.getParent(curSelNode, dom.isBlock)) {\n              applyFormat$1(ed, firstFormat.defaultBlock);\n            }\n            selection.setRng(normalize(selection.getRng()));\n            preserve(selection, true, function () {\n              runOnRanges(ed, function (selectionRng, fake) {\n                var expandedRng = fake ? selectionRng : expandRng(ed, selectionRng, formatList);\n                applyRngStyle(dom, expandedRng, false);\n              });\n            });\n            moveStart(dom, selection, selection.getRng());\n            ed.nodeChanged();\n          } else {\n            applyCaretFormat(ed, name, vars);\n          }\n        }\n        postProcess$1(name, ed);\n      }\n      fireFormatApply(ed, name, node, vars);\n    };\n\n    var hasVars = function (value) {\n      return has$2(value, 'vars');\n    };\n    var setup$j = function (registeredFormatListeners, editor) {\n      registeredFormatListeners.set({});\n      editor.on('NodeChange', function (e) {\n        updateAndFireChangeCallbacks(editor, e.element, registeredFormatListeners.get());\n      });\n      editor.on('FormatApply FormatRemove', function (e) {\n        var element = Optional.from(e.node).map(function (nodeOrRange) {\n          return isNode(nodeOrRange) ? nodeOrRange : nodeOrRange.startContainer;\n        }).bind(function (node) {\n          return isElement$5(node) ? Optional.some(node) : Optional.from(node.parentElement);\n        }).getOrThunk(function () {\n          return fallbackElement(editor);\n        });\n        updateAndFireChangeCallbacks(editor, element, registeredFormatListeners.get());\n      });\n    };\n    var fallbackElement = function (editor) {\n      return editor.selection.getStart();\n    };\n    var matchingNode = function (editor, parents, format, similar, vars) {\n      var isMatchingNode = function (node) {\n        var matchingFormat = editor.formatter.matchNode(node, format, vars !== null && vars !== void 0 ? vars : {}, similar);\n        return !isUndefined(matchingFormat);\n      };\n      var isUnableToMatch = function (node) {\n        if (matchesUnInheritedFormatSelector(editor, node, format)) {\n          return true;\n        } else {\n          if (!similar) {\n            return isNonNullable(editor.formatter.matchNode(node, format, vars, true));\n          } else {\n            return false;\n          }\n        }\n      };\n      return findUntil$1(parents, isMatchingNode, isUnableToMatch);\n    };\n    var getParents = function (editor, elm) {\n      var element = elm !== null && elm !== void 0 ? elm : fallbackElement(editor);\n      return filter$4(getParents$2(editor.dom, element), function (node) {\n        return isElement$5(node) && !isBogus$2(node);\n      });\n    };\n    var updateAndFireChangeCallbacks = function (editor, elm, registeredCallbacks) {\n      var parents = getParents(editor, elm);\n      each$j(registeredCallbacks, function (data, format) {\n        var runIfChanged = function (spec) {\n          var match = matchingNode(editor, parents, format, spec.similar, hasVars(spec) ? spec.vars : undefined);\n          var isSet = match.isSome();\n          if (spec.state.get() !== isSet) {\n            spec.state.set(isSet);\n            var node_1 = match.getOr(elm);\n            if (hasVars(spec)) {\n              spec.callback(isSet, {\n                node: node_1,\n                format: format,\n                parents: parents\n              });\n            } else {\n              each$k(spec.callbacks, function (callback) {\n                return callback(isSet, {\n                  node: node_1,\n                  format: format,\n                  parents: parents\n                });\n              });\n            }\n          }\n        };\n        each$k([\n          data.withSimilar,\n          data.withoutSimilar\n        ], runIfChanged);\n        each$k(data.withVars, runIfChanged);\n      });\n    };\n    var addListeners = function (editor, registeredFormatListeners, formats, callback, similar, vars) {\n      var formatChangeItems = registeredFormatListeners.get();\n      each$k(formats.split(','), function (format) {\n        var group = get$9(formatChangeItems, format).getOrThunk(function () {\n          var base = {\n            withSimilar: {\n              state: Cell(false),\n              similar: true,\n              callbacks: []\n            },\n            withoutSimilar: {\n              state: Cell(false),\n              similar: false,\n              callbacks: []\n            },\n            withVars: []\n          };\n          formatChangeItems[format] = base;\n          return base;\n        });\n        var getCurrent = function () {\n          var parents = getParents(editor);\n          return matchingNode(editor, parents, format, similar, vars).isSome();\n        };\n        if (isUndefined(vars)) {\n          var toAppendTo = similar ? group.withSimilar : group.withoutSimilar;\n          toAppendTo.callbacks.push(callback);\n          if (toAppendTo.callbacks.length === 1) {\n            toAppendTo.state.set(getCurrent());\n          }\n        } else {\n          group.withVars.push({\n            state: Cell(getCurrent()),\n            similar: similar,\n            vars: vars,\n            callback: callback\n          });\n        }\n      });\n      registeredFormatListeners.set(formatChangeItems);\n    };\n    var removeListeners = function (registeredFormatListeners, formats, callback) {\n      var formatChangeItems = registeredFormatListeners.get();\n      each$k(formats.split(','), function (format) {\n        return get$9(formatChangeItems, format).each(function (group) {\n          formatChangeItems[format] = {\n            withSimilar: __assign(__assign({}, group.withSimilar), {\n              callbacks: filter$4(group.withSimilar.callbacks, function (cb) {\n                return cb !== callback;\n              })\n            }),\n            withoutSimilar: __assign(__assign({}, group.withoutSimilar), {\n              callbacks: filter$4(group.withoutSimilar.callbacks, function (cb) {\n                return cb !== callback;\n              })\n            }),\n            withVars: filter$4(group.withVars, function (item) {\n              return item.callback !== callback;\n            })\n          };\n        });\n      });\n      registeredFormatListeners.set(formatChangeItems);\n    };\n    var formatChangedInternal = function (editor, registeredFormatListeners, formats, callback, similar, vars) {\n      if (registeredFormatListeners.get() === null) {\n        setup$j(registeredFormatListeners, editor);\n      }\n      addListeners(editor, registeredFormatListeners, formats, callback, similar, vars);\n      return {\n        unbind: function () {\n          return removeListeners(registeredFormatListeners, formats, callback);\n        }\n      };\n    };\n\n    var toggle = function (editor, name, vars, node) {\n      var fmt = editor.formatter.get(name);\n      if (match$2(editor, name, vars, node) && (!('toggle' in fmt[0]) || fmt[0].toggle)) {\n        remove$1(editor, name, vars, node);\n      } else {\n        applyFormat$1(editor, name, vars, node);\n      }\n    };\n\n    var fromElements = function (elements, scope) {\n      var doc = scope || document;\n      var fragment = doc.createDocumentFragment();\n      each$k(elements, function (element) {\n        fragment.appendChild(element.dom);\n      });\n      return SugarElement.fromDom(fragment);\n    };\n\n    var tableModel = function (element, width, rows) {\n      return {\n        element: element,\n        width: width,\n        rows: rows\n      };\n    };\n    var tableRow = function (element, cells) {\n      return {\n        element: element,\n        cells: cells\n      };\n    };\n    var cellPosition = function (x, y) {\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var getSpan = function (td, key) {\n      var value = parseInt(get$6(td, key), 10);\n      return isNaN(value) ? 1 : value;\n    };\n    var fillout = function (table, x, y, tr, td) {\n      var rowspan = getSpan(td, 'rowspan');\n      var colspan = getSpan(td, 'colspan');\n      var rows = table.rows;\n      for (var y2 = y; y2 < y + rowspan; y2++) {\n        if (!rows[y2]) {\n          rows[y2] = tableRow(deep$1(tr), []);\n        }\n        for (var x2 = x; x2 < x + colspan; x2++) {\n          var cells = rows[y2].cells;\n          cells[x2] = y2 === y && x2 === x ? td : shallow(td);\n        }\n      }\n    };\n    var cellExists = function (table, x, y) {\n      var rows = table.rows;\n      var cells = rows[y] ? rows[y].cells : [];\n      return !!cells[x];\n    };\n    var skipCellsX = function (table, x, y) {\n      while (cellExists(table, x, y)) {\n        x++;\n      }\n      return x;\n    };\n    var getWidth = function (rows) {\n      return foldl(rows, function (acc, row) {\n        return row.cells.length > acc ? row.cells.length : acc;\n      }, 0);\n    };\n    var findElementPos = function (table, element) {\n      var rows = table.rows;\n      for (var y = 0; y < rows.length; y++) {\n        var cells = rows[y].cells;\n        for (var x = 0; x < cells.length; x++) {\n          if (eq(cells[x], element)) {\n            return Optional.some(cellPosition(x, y));\n          }\n        }\n      }\n      return Optional.none();\n    };\n    var extractRows = function (table, sx, sy, ex, ey) {\n      var newRows = [];\n      var rows = table.rows;\n      for (var y = sy; y <= ey; y++) {\n        var cells = rows[y].cells;\n        var slice = sx < ex ? cells.slice(sx, ex + 1) : cells.slice(ex, sx + 1);\n        newRows.push(tableRow(rows[y].element, slice));\n      }\n      return newRows;\n    };\n    var subTable = function (table, startPos, endPos) {\n      var sx = startPos.x, sy = startPos.y;\n      var ex = endPos.x, ey = endPos.y;\n      var newRows = sy < ey ? extractRows(table, sx, sy, ex, ey) : extractRows(table, sx, ey, ex, sy);\n      return tableModel(table.element, getWidth(newRows), newRows);\n    };\n    var createDomTable = function (table, rows) {\n      var tableElement = shallow(table.element);\n      var tableBody = SugarElement.fromTag('tbody');\n      append(tableBody, rows);\n      append$1(tableElement, tableBody);\n      return tableElement;\n    };\n    var modelRowsToDomRows = function (table) {\n      return map$3(table.rows, function (row) {\n        var cells = map$3(row.cells, function (cell) {\n          var td = deep$1(cell);\n          remove$6(td, 'colspan');\n          remove$6(td, 'rowspan');\n          return td;\n        });\n        var tr = shallow(row.element);\n        append(tr, cells);\n        return tr;\n      });\n    };\n    var fromDom = function (tableElm) {\n      var table = tableModel(shallow(tableElm), 0, []);\n      each$k(descendants(tableElm, 'tr'), function (tr, y) {\n        each$k(descendants(tr, 'td,th'), function (td, x) {\n          fillout(table, skipCellsX(table, x, y), y, tr, td);\n        });\n      });\n      return tableModel(table.element, getWidth(table.rows), table.rows);\n    };\n    var toDom = function (table) {\n      return createDomTable(table, modelRowsToDomRows(table));\n    };\n    var subsection = function (table, startElement, endElement) {\n      return findElementPos(table, startElement).bind(function (startPos) {\n        return findElementPos(table, endElement).map(function (endPos) {\n          return subTable(table, startPos, endPos);\n        });\n      });\n    };\n\n    var findParentListContainer = function (parents) {\n      return find$3(parents, function (elm) {\n        return name(elm) === 'ul' || name(elm) === 'ol';\n      });\n    };\n    var getFullySelectedListWrappers = function (parents, rng) {\n      return find$3(parents, function (elm) {\n        return name(elm) === 'li' && hasAllContentsSelected(elm, rng);\n      }).fold(constant([]), function (_li) {\n        return findParentListContainer(parents).map(function (listCont) {\n          var listElm = SugarElement.fromTag(name(listCont));\n          var listStyles = filter$3(getAllRaw(listCont), function (_style, name) {\n            return startsWith(name, 'list-style');\n          });\n          setAll(listElm, listStyles);\n          return [\n            SugarElement.fromTag('li'),\n            listElm\n          ];\n        }).getOr([]);\n      });\n    };\n    var wrap = function (innerElm, elms) {\n      var wrapped = foldl(elms, function (acc, elm) {\n        append$1(elm, acc);\n        return elm;\n      }, innerElm);\n      return elms.length > 0 ? fromElements([wrapped]) : wrapped;\n    };\n    var directListWrappers = function (commonAnchorContainer) {\n      if (isListItem(commonAnchorContainer)) {\n        return parent(commonAnchorContainer).filter(isList).fold(constant([]), function (listElm) {\n          return [\n            commonAnchorContainer,\n            listElm\n          ];\n        });\n      } else {\n        return isList(commonAnchorContainer) ? [commonAnchorContainer] : [];\n      }\n    };\n    var getWrapElements = function (rootNode, rng) {\n      var commonAnchorContainer = SugarElement.fromDom(rng.commonAncestorContainer);\n      var parents = parentsAndSelf(commonAnchorContainer, rootNode);\n      var wrapElements = filter$4(parents, function (elm) {\n        return isInline$1(elm) || isHeading(elm);\n      });\n      var listWrappers = getFullySelectedListWrappers(parents, rng);\n      var allWrappers = wrapElements.concat(listWrappers.length ? listWrappers : directListWrappers(commonAnchorContainer));\n      return map$3(allWrappers, shallow);\n    };\n    var emptyFragment = function () {\n      return fromElements([]);\n    };\n    var getFragmentFromRange = function (rootNode, rng) {\n      return wrap(SugarElement.fromDom(rng.cloneContents()), getWrapElements(rootNode, rng));\n    };\n    var getParentTable = function (rootElm, cell) {\n      return ancestor$2(cell, 'table', curry(eq, rootElm));\n    };\n    var getTableFragment = function (rootNode, selectedTableCells) {\n      return getParentTable(rootNode, selectedTableCells[0]).bind(function (tableElm) {\n        var firstCell = selectedTableCells[0];\n        var lastCell = selectedTableCells[selectedTableCells.length - 1];\n        var fullTableModel = fromDom(tableElm);\n        return subsection(fullTableModel, firstCell, lastCell).map(function (sectionedTableModel) {\n          return fromElements([toDom(sectionedTableModel)]);\n        });\n      }).getOrThunk(emptyFragment);\n    };\n    var getSelectionFragment = function (rootNode, ranges) {\n      return ranges.length > 0 && ranges[0].collapsed ? emptyFragment() : getFragmentFromRange(rootNode, ranges[0]);\n    };\n    var read$3 = function (rootNode, ranges) {\n      var selectedCells = getCellsFromElementOrRanges(ranges, rootNode);\n      return selectedCells.length > 0 ? getTableFragment(rootNode, selectedCells) : getSelectionFragment(rootNode, ranges);\n    };\n\n    var trimLeadingCollapsibleText = function (text) {\n      return text.replace(/^[ \\f\\n\\r\\t\\v]+/, '');\n    };\n    var isCollapsibleWhitespace = function (text, index) {\n      return index >= 0 && index < text.length && isWhiteSpace(text.charAt(index));\n    };\n    var getInnerText = function (bin, shouldTrim) {\n      var text = trim$3(bin.innerText);\n      return shouldTrim ? trimLeadingCollapsibleText(text) : text;\n    };\n    var getContextNodeName = function (parentBlockOpt) {\n      return parentBlockOpt.map(function (block) {\n        return block.nodeName;\n      }).getOr('div').toLowerCase();\n    };\n    var getTextContent = function (editor) {\n      return Optional.from(editor.selection.getRng()).map(function (rng) {\n        var parentBlockOpt = Optional.from(editor.dom.getParent(rng.commonAncestorContainer, editor.dom.isBlock));\n        var body = editor.getBody();\n        var contextNodeName = getContextNodeName(parentBlockOpt);\n        var shouldTrimSpaces = Env.browser.isIE() && contextNodeName !== 'pre';\n        var bin = editor.dom.add(body, contextNodeName, {\n          'data-mce-bogus': 'all',\n          'style': 'overflow: hidden; opacity: 0;'\n        }, rng.cloneContents());\n        var text = getInnerText(bin, shouldTrimSpaces);\n        var nonRenderedText = trim$3(bin.textContent);\n        editor.dom.remove(bin);\n        if (isCollapsibleWhitespace(nonRenderedText, 0) || isCollapsibleWhitespace(nonRenderedText, nonRenderedText.length - 1)) {\n          var parentBlock = parentBlockOpt.getOr(body);\n          var parentBlockText = getInnerText(parentBlock, shouldTrimSpaces);\n          var textIndex = parentBlockText.indexOf(text);\n          if (textIndex === -1) {\n            return text;\n          } else {\n            var hasProceedingSpace = isCollapsibleWhitespace(parentBlockText, textIndex - 1);\n            var hasTrailingSpace = isCollapsibleWhitespace(parentBlockText, textIndex + text.length);\n            return (hasProceedingSpace ? ' ' : '') + text + (hasTrailingSpace ? ' ' : '');\n          }\n        } else {\n          return text;\n        }\n      }).getOr('');\n    };\n    var getSerializedContent = function (editor, args) {\n      var rng = editor.selection.getRng(), tmpElm = editor.dom.create('body');\n      var sel = editor.selection.getSel();\n      var ranges = processRanges(editor, getRanges(sel));\n      var fragment = args.contextual ? read$3(SugarElement.fromDom(editor.getBody()), ranges).dom : rng.cloneContents();\n      if (fragment) {\n        tmpElm.appendChild(fragment);\n      }\n      return editor.selection.serializer.serialize(tmpElm, args);\n    };\n    var setupArgs$1 = function (args, format) {\n      return __assign(__assign({}, args), {\n        format: format,\n        get: true,\n        selection: true\n      });\n    };\n    var getSelectedContentInternal = function (editor, format, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      var defaultedArgs = setupArgs$1(args, format);\n      var updatedArgs = editor.fire('BeforeGetContent', defaultedArgs);\n      if (updatedArgs.isDefaultPrevented()) {\n        editor.fire('GetContent', updatedArgs);\n        return updatedArgs.content;\n      }\n      if (updatedArgs.format === 'text') {\n        return getTextContent(editor);\n      } else {\n        updatedArgs.getInner = true;\n        var content = getSerializedContent(editor, updatedArgs);\n        if (updatedArgs.format === 'tree') {\n          return content;\n        } else {\n          updatedArgs.content = editor.selection.isCollapsed() ? '' : content;\n          editor.fire('GetContent', updatedArgs);\n          return updatedArgs.content;\n        }\n      }\n    };\n\n    var KEEP = 0, INSERT = 1, DELETE = 2;\n    var diff = function (left, right) {\n      var size = left.length + right.length + 2;\n      var vDown = new Array(size);\n      var vUp = new Array(size);\n      var snake = function (start, end, diag) {\n        return {\n          start: start,\n          end: end,\n          diag: diag\n        };\n      };\n      var buildScript = function (start1, end1, start2, end2, script) {\n        var middle = getMiddleSnake(start1, end1, start2, end2);\n        if (middle === null || middle.start === end1 && middle.diag === end1 - end2 || middle.end === start1 && middle.diag === start1 - start2) {\n          var i = start1;\n          var j = start2;\n          while (i < end1 || j < end2) {\n            if (i < end1 && j < end2 && left[i] === right[j]) {\n              script.push([\n                KEEP,\n                left[i]\n              ]);\n              ++i;\n              ++j;\n            } else {\n              if (end1 - start1 > end2 - start2) {\n                script.push([\n                  DELETE,\n                  left[i]\n                ]);\n                ++i;\n              } else {\n                script.push([\n                  INSERT,\n                  right[j]\n                ]);\n                ++j;\n              }\n            }\n          }\n        } else {\n          buildScript(start1, middle.start, start2, middle.start - middle.diag, script);\n          for (var i2 = middle.start; i2 < middle.end; ++i2) {\n            script.push([\n              KEEP,\n              left[i2]\n            ]);\n          }\n          buildScript(middle.end, end1, middle.end - middle.diag, end2, script);\n        }\n      };\n      var buildSnake = function (start, diag, end1, end2) {\n        var end = start;\n        while (end - diag < end2 && end < end1 && left[end] === right[end - diag]) {\n          ++end;\n        }\n        return snake(start, end, diag);\n      };\n      var getMiddleSnake = function (start1, end1, start2, end2) {\n        var m = end1 - start1;\n        var n = end2 - start2;\n        if (m === 0 || n === 0) {\n          return null;\n        }\n        var delta = m - n;\n        var sum = n + m;\n        var offset = (sum % 2 === 0 ? sum : sum + 1) / 2;\n        vDown[1 + offset] = start1;\n        vUp[1 + offset] = end1 + 1;\n        var d, k, i, x, y;\n        for (d = 0; d <= offset; ++d) {\n          for (k = -d; k <= d; k += 2) {\n            i = k + offset;\n            if (k === -d || k !== d && vDown[i - 1] < vDown[i + 1]) {\n              vDown[i] = vDown[i + 1];\n            } else {\n              vDown[i] = vDown[i - 1] + 1;\n            }\n            x = vDown[i];\n            y = x - start1 + start2 - k;\n            while (x < end1 && y < end2 && left[x] === right[y]) {\n              vDown[i] = ++x;\n              ++y;\n            }\n            if (delta % 2 !== 0 && delta - d <= k && k <= delta + d) {\n              if (vUp[i - delta] <= vDown[i]) {\n                return buildSnake(vUp[i - delta], k + start1 - start2, end1, end2);\n              }\n            }\n          }\n          for (k = delta - d; k <= delta + d; k += 2) {\n            i = k + offset - delta;\n            if (k === delta - d || k !== delta + d && vUp[i + 1] <= vUp[i - 1]) {\n              vUp[i] = vUp[i + 1] - 1;\n            } else {\n              vUp[i] = vUp[i - 1];\n            }\n            x = vUp[i] - 1;\n            y = x - start1 + start2 - k;\n            while (x >= start1 && y >= start2 && left[x] === right[y]) {\n              vUp[i] = x--;\n              y--;\n            }\n            if (delta % 2 === 0 && -d <= k && k <= d) {\n              if (vUp[i] <= vDown[i + delta]) {\n                return buildSnake(vUp[i], k + start1 - start2, end1, end2);\n              }\n            }\n          }\n        }\n      };\n      var script = [];\n      buildScript(0, left.length, 0, right.length, script);\n      return script;\n    };\n\n    var getOuterHtml = function (elm) {\n      if (isElement$5(elm)) {\n        return elm.outerHTML;\n      } else if (isText$7(elm)) {\n        return Entities.encodeRaw(elm.data, false);\n      } else if (isComment(elm)) {\n        return '<!--' + elm.data + '-->';\n      }\n      return '';\n    };\n    var createFragment = function (html) {\n      var node;\n      var container = document.createElement('div');\n      var frag = document.createDocumentFragment();\n      if (html) {\n        container.innerHTML = html;\n      }\n      while (node = container.firstChild) {\n        frag.appendChild(node);\n      }\n      return frag;\n    };\n    var insertAt = function (elm, html, index) {\n      var fragment = createFragment(html);\n      if (elm.hasChildNodes() && index < elm.childNodes.length) {\n        var target = elm.childNodes[index];\n        target.parentNode.insertBefore(fragment, target);\n      } else {\n        elm.appendChild(fragment);\n      }\n    };\n    var removeAt = function (elm, index) {\n      if (elm.hasChildNodes() && index < elm.childNodes.length) {\n        var target = elm.childNodes[index];\n        target.parentNode.removeChild(target);\n      }\n    };\n    var applyDiff = function (diff, elm) {\n      var index = 0;\n      each$k(diff, function (action) {\n        if (action[0] === KEEP) {\n          index++;\n        } else if (action[0] === INSERT) {\n          insertAt(elm, action[1], index);\n          index++;\n        } else if (action[0] === DELETE) {\n          removeAt(elm, index);\n        }\n      });\n    };\n    var read$2 = function (elm, trimZwsp) {\n      return filter$4(map$3(from(elm.childNodes), trimZwsp ? compose(trim$3, getOuterHtml) : getOuterHtml), function (item) {\n        return item.length > 0;\n      });\n    };\n    var write = function (fragments, elm) {\n      var currentFragments = map$3(from(elm.childNodes), getOuterHtml);\n      applyDiff(diff(currentFragments, fragments), elm);\n      return elm;\n    };\n\n    var lazyTempDocument$1 = cached(function () {\n      return document.implementation.createHTMLDocument('undo');\n    });\n    var hasIframes = function (body) {\n      return body.querySelector('iframe') !== null;\n    };\n    var createFragmentedLevel = function (fragments) {\n      return {\n        type: 'fragmented',\n        fragments: fragments,\n        content: '',\n        bookmark: null,\n        beforeBookmark: null\n      };\n    };\n    var createCompleteLevel = function (content) {\n      return {\n        type: 'complete',\n        fragments: null,\n        content: content,\n        bookmark: null,\n        beforeBookmark: null\n      };\n    };\n    var createFromEditor = function (editor) {\n      var tempAttrs = editor.serializer.getTempAttrs();\n      var body = trim$1(editor.getBody(), tempAttrs);\n      return hasIframes(body) ? createFragmentedLevel(read$2(body, true)) : createCompleteLevel(trim$3(body.innerHTML));\n    };\n    var applyToEditor = function (editor, level, before) {\n      var bookmark = before ? level.beforeBookmark : level.bookmark;\n      if (level.type === 'fragmented') {\n        write(level.fragments, editor.getBody());\n      } else {\n        editor.setContent(level.content, {\n          format: 'raw',\n          no_selection: isNonNullable(bookmark) && isPathBookmark(bookmark) ? !bookmark.isFakeCaret : true\n        });\n      }\n      editor.selection.moveToBookmark(bookmark);\n    };\n    var getLevelContent = function (level) {\n      return level.type === 'fragmented' ? level.fragments.join('') : level.content;\n    };\n    var getCleanLevelContent = function (level) {\n      var elm = SugarElement.fromTag('body', lazyTempDocument$1());\n      set(elm, getLevelContent(level));\n      each$k(descendants(elm, '*[data-mce-bogus]'), unwrap);\n      return get$3(elm);\n    };\n    var hasEqualContent = function (level1, level2) {\n      return getLevelContent(level1) === getLevelContent(level2);\n    };\n    var hasEqualCleanedContent = function (level1, level2) {\n      return getCleanLevelContent(level1) === getCleanLevelContent(level2);\n    };\n    var isEq$1 = function (level1, level2) {\n      if (!level1 || !level2) {\n        return false;\n      } else if (hasEqualContent(level1, level2)) {\n        return true;\n      } else {\n        return hasEqualCleanedContent(level1, level2);\n      }\n    };\n\n    var isUnlocked = function (locks) {\n      return locks.get() === 0;\n    };\n\n    var setTyping = function (undoManager, typing, locks) {\n      if (isUnlocked(locks)) {\n        undoManager.typing = typing;\n      }\n    };\n    var endTyping = function (undoManager, locks) {\n      if (undoManager.typing) {\n        setTyping(undoManager, false, locks);\n        undoManager.add();\n      }\n    };\n    var endTypingLevelIgnoreLocks = function (undoManager) {\n      if (undoManager.typing) {\n        undoManager.typing = false;\n        undoManager.add();\n      }\n    };\n\n    var beforeChange$1 = function (editor, locks, beforeBookmark) {\n      if (isUnlocked(locks)) {\n        beforeBookmark.set(getUndoBookmark(editor.selection));\n      }\n    };\n    var addUndoLevel$1 = function (editor, undoManager, index, locks, beforeBookmark, level, event) {\n      var currentLevel = createFromEditor(editor);\n      level = level || {};\n      level = Tools.extend(level, currentLevel);\n      if (isUnlocked(locks) === false || editor.removed) {\n        return null;\n      }\n      var lastLevel = undoManager.data[index.get()];\n      if (editor.fire('BeforeAddUndo', {\n          level: level,\n          lastLevel: lastLevel,\n          originalEvent: event\n        }).isDefaultPrevented()) {\n        return null;\n      }\n      if (lastLevel && isEq$1(lastLevel, level)) {\n        return null;\n      }\n      if (undoManager.data[index.get()]) {\n        beforeBookmark.get().each(function (bm) {\n          undoManager.data[index.get()].beforeBookmark = bm;\n        });\n      }\n      var customUndoRedoLevels = getCustomUndoRedoLevels(editor);\n      if (customUndoRedoLevels) {\n        if (undoManager.data.length > customUndoRedoLevels) {\n          for (var i = 0; i < undoManager.data.length - 1; i++) {\n            undoManager.data[i] = undoManager.data[i + 1];\n          }\n          undoManager.data.length--;\n          index.set(undoManager.data.length);\n        }\n      }\n      level.bookmark = getUndoBookmark(editor.selection);\n      if (index.get() < undoManager.data.length - 1) {\n        undoManager.data.length = index.get() + 1;\n      }\n      undoManager.data.push(level);\n      index.set(undoManager.data.length - 1);\n      var args = {\n        level: level,\n        lastLevel: lastLevel,\n        originalEvent: event\n      };\n      if (index.get() > 0) {\n        editor.setDirty(true);\n        editor.fire('AddUndo', args);\n        editor.fire('change', args);\n      } else {\n        editor.fire('AddUndo', args);\n      }\n      return level;\n    };\n    var clear$1 = function (editor, undoManager, index) {\n      undoManager.data = [];\n      index.set(0);\n      undoManager.typing = false;\n      editor.fire('ClearUndos');\n    };\n    var extra$1 = function (editor, undoManager, index, callback1, callback2) {\n      if (undoManager.transact(callback1)) {\n        var bookmark = undoManager.data[index.get()].bookmark;\n        var lastLevel = undoManager.data[index.get() - 1];\n        applyToEditor(editor, lastLevel, true);\n        if (undoManager.transact(callback2)) {\n          undoManager.data[index.get() - 1].beforeBookmark = bookmark;\n        }\n      }\n    };\n    var redo$1 = function (editor, index, data) {\n      var level;\n      if (index.get() < data.length - 1) {\n        index.set(index.get() + 1);\n        level = data[index.get()];\n        applyToEditor(editor, level, false);\n        editor.setDirty(true);\n        editor.fire('Redo', { level: level });\n      }\n      return level;\n    };\n    var undo$1 = function (editor, undoManager, locks, index) {\n      var level;\n      if (undoManager.typing) {\n        undoManager.add();\n        undoManager.typing = false;\n        setTyping(undoManager, false, locks);\n      }\n      if (index.get() > 0) {\n        index.set(index.get() - 1);\n        level = undoManager.data[index.get()];\n        applyToEditor(editor, level, true);\n        editor.setDirty(true);\n        editor.fire('Undo', { level: level });\n      }\n      return level;\n    };\n    var reset$1 = function (undoManager) {\n      undoManager.clear();\n      undoManager.add();\n    };\n    var hasUndo$1 = function (editor, undoManager, index) {\n      return index.get() > 0 || undoManager.typing && undoManager.data[0] && !isEq$1(createFromEditor(editor), undoManager.data[0]);\n    };\n    var hasRedo$1 = function (undoManager, index) {\n      return index.get() < undoManager.data.length - 1 && !undoManager.typing;\n    };\n    var transact$1 = function (undoManager, locks, callback) {\n      endTyping(undoManager, locks);\n      undoManager.beforeChange();\n      undoManager.ignore(callback);\n      return undoManager.add();\n    };\n    var ignore$1 = function (locks, callback) {\n      try {\n        locks.set(locks.get() + 1);\n        callback();\n      } finally {\n        locks.set(locks.get() - 1);\n      }\n    };\n\n    var addVisualInternal = function (editor, elm) {\n      var dom = editor.dom;\n      var scope = isNonNullable(elm) ? elm : editor.getBody();\n      if (isUndefined(editor.hasVisual)) {\n        editor.hasVisual = isVisualAidsEnabled(editor);\n      }\n      each$k(dom.select('table,a', scope), function (matchedElm) {\n        switch (matchedElm.nodeName) {\n        case 'TABLE':\n          var cls = getVisualAidsTableClass(editor);\n          var value = dom.getAttrib(matchedElm, 'border');\n          if ((!value || value === '0') && editor.hasVisual) {\n            dom.addClass(matchedElm, cls);\n          } else {\n            dom.removeClass(matchedElm, cls);\n          }\n          break;\n        case 'A':\n          if (!dom.getAttrib(matchedElm, 'href')) {\n            var value_1 = dom.getAttrib(matchedElm, 'name') || matchedElm.id;\n            var cls_1 = getVisualAidsAnchorClass(editor);\n            if (value_1 && editor.hasVisual) {\n              dom.addClass(matchedElm, cls_1);\n            } else {\n              dom.removeClass(matchedElm, cls_1);\n            }\n          }\n          break;\n        }\n      });\n      editor.fire('VisualAid', {\n        element: elm,\n        hasVisual: editor.hasVisual\n      });\n    };\n\n    var makePlainAdaptor = function (editor) {\n      return {\n        undoManager: {\n          beforeChange: function (locks, beforeBookmark) {\n            return beforeChange$1(editor, locks, beforeBookmark);\n          },\n          add: function (undoManager, index, locks, beforeBookmark, level, event) {\n            return addUndoLevel$1(editor, undoManager, index, locks, beforeBookmark, level, event);\n          },\n          undo: function (undoManager, locks, index) {\n            return undo$1(editor, undoManager, locks, index);\n          },\n          redo: function (index, data) {\n            return redo$1(editor, index, data);\n          },\n          clear: function (undoManager, index) {\n            return clear$1(editor, undoManager, index);\n          },\n          reset: function (undoManager) {\n            return reset$1(undoManager);\n          },\n          hasUndo: function (undoManager, index) {\n            return hasUndo$1(editor, undoManager, index);\n          },\n          hasRedo: function (undoManager, index) {\n            return hasRedo$1(undoManager, index);\n          },\n          transact: function (undoManager, locks, callback) {\n            return transact$1(undoManager, locks, callback);\n          },\n          ignore: function (locks, callback) {\n            return ignore$1(locks, callback);\n          },\n          extra: function (undoManager, index, callback1, callback2) {\n            return extra$1(editor, undoManager, index, callback1, callback2);\n          }\n        },\n        formatter: {\n          match: function (name, vars, node, similar) {\n            return match$2(editor, name, vars, node, similar);\n          },\n          matchAll: function (names, vars) {\n            return matchAll(editor, names, vars);\n          },\n          matchNode: function (node, name, vars, similar) {\n            return matchNode(editor, node, name, vars, similar);\n          },\n          canApply: function (name) {\n            return canApply(editor, name);\n          },\n          closest: function (names) {\n            return closest(editor, names);\n          },\n          apply: function (name, vars, node) {\n            return applyFormat$1(editor, name, vars, node);\n          },\n          remove: function (name, vars, node, similar) {\n            return remove$1(editor, name, vars, node, similar);\n          },\n          toggle: function (name, vars, node) {\n            return toggle(editor, name, vars, node);\n          },\n          formatChanged: function (registeredFormatListeners, formats, callback, similar, vars) {\n            return formatChangedInternal(editor, registeredFormatListeners, formats, callback, similar, vars);\n          }\n        },\n        editor: {\n          getContent: function (args, format) {\n            return getContentInternal(editor, args, format);\n          },\n          setContent: function (content, args) {\n            return setContentInternal(editor, content, args);\n          },\n          insertContent: function (value, details) {\n            return insertHtmlAtCaret(editor, value, details);\n          },\n          addVisual: function (elm) {\n            return addVisualInternal(editor, elm);\n          }\n        },\n        selection: {\n          getContent: function (format, args) {\n            return getSelectedContentInternal(editor, format, args);\n          }\n        },\n        raw: {\n          getModel: function () {\n            return Optional.none();\n          }\n        }\n      };\n    };\n    var makeRtcAdaptor = function (rtcEditor) {\n      var defaultVars = function (vars) {\n        return isObject(vars) ? vars : {};\n      };\n      var undoManager = rtcEditor.undoManager, formatter = rtcEditor.formatter, editor = rtcEditor.editor, selection = rtcEditor.selection, raw = rtcEditor.raw;\n      return {\n        undoManager: {\n          beforeChange: undoManager.beforeChange,\n          add: undoManager.add,\n          undo: undoManager.undo,\n          redo: undoManager.redo,\n          clear: undoManager.clear,\n          reset: undoManager.reset,\n          hasUndo: undoManager.hasUndo,\n          hasRedo: undoManager.hasRedo,\n          transact: function (_undoManager, _locks, fn) {\n            return undoManager.transact(fn);\n          },\n          ignore: function (_locks, callback) {\n            return undoManager.ignore(callback);\n          },\n          extra: function (_undoManager, _index, callback1, callback2) {\n            return undoManager.extra(callback1, callback2);\n          }\n        },\n        formatter: {\n          match: function (name, vars, _node, similar) {\n            return formatter.match(name, defaultVars(vars), similar);\n          },\n          matchAll: formatter.matchAll,\n          matchNode: formatter.matchNode,\n          canApply: function (name) {\n            return formatter.canApply(name);\n          },\n          closest: function (names) {\n            return formatter.closest(names);\n          },\n          apply: function (name, vars, _node) {\n            return formatter.apply(name, defaultVars(vars));\n          },\n          remove: function (name, vars, _node, _similar) {\n            return formatter.remove(name, defaultVars(vars));\n          },\n          toggle: function (name, vars, _node) {\n            return formatter.toggle(name, defaultVars(vars));\n          },\n          formatChanged: function (_rfl, formats, callback, similar, vars) {\n            return formatter.formatChanged(formats, callback, similar, vars);\n          }\n        },\n        editor: {\n          getContent: function (args, _format) {\n            return editor.getContent(args);\n          },\n          setContent: function (content, args) {\n            return editor.setContent(content, args);\n          },\n          insertContent: function (content, _details) {\n            return editor.insertContent(content);\n          },\n          addVisual: editor.addVisual\n        },\n        selection: {\n          getContent: function (_format, args) {\n            return selection.getContent(args);\n          }\n        },\n        raw: {\n          getModel: function () {\n            return Optional.some(raw.getRawModel());\n          }\n        }\n      };\n    };\n    var makeNoopAdaptor = function () {\n      var nul = constant(null);\n      var empty = constant('');\n      return {\n        undoManager: {\n          beforeChange: noop,\n          add: nul,\n          undo: nul,\n          redo: nul,\n          clear: noop,\n          reset: noop,\n          hasUndo: never,\n          hasRedo: never,\n          transact: nul,\n          ignore: noop,\n          extra: noop\n        },\n        formatter: {\n          match: never,\n          matchAll: constant([]),\n          matchNode: constant(undefined),\n          canApply: never,\n          closest: empty,\n          apply: noop,\n          remove: noop,\n          toggle: noop,\n          formatChanged: constant({ unbind: noop })\n        },\n        editor: {\n          getContent: empty,\n          setContent: empty,\n          insertContent: noop,\n          addVisual: noop\n        },\n        selection: { getContent: empty },\n        raw: { getModel: constant(Optional.none()) }\n      };\n    };\n    var isRtc = function (editor) {\n      return has$2(editor.plugins, 'rtc');\n    };\n    var getRtcSetup = function (editor) {\n      return get$9(editor.plugins, 'rtc').bind(function (rtcPlugin) {\n        return Optional.from(rtcPlugin.setup);\n      });\n    };\n    var setup$i = function (editor) {\n      var editorCast = editor;\n      return getRtcSetup(editor).fold(function () {\n        editorCast.rtcInstance = makePlainAdaptor(editor);\n        return Optional.none();\n      }, function (setup) {\n        editorCast.rtcInstance = makeNoopAdaptor();\n        return Optional.some(function () {\n          return setup().then(function (rtcEditor) {\n            editorCast.rtcInstance = makeRtcAdaptor(rtcEditor);\n            return rtcEditor.rtc.isRemote;\n          });\n        });\n      });\n    };\n    var getRtcInstanceWithFallback = function (editor) {\n      return editor.rtcInstance ? editor.rtcInstance : makePlainAdaptor(editor);\n    };\n    var getRtcInstanceWithError = function (editor) {\n      var rtcInstance = editor.rtcInstance;\n      if (!rtcInstance) {\n        throw new Error('Failed to get RTC instance not yet initialized.');\n      } else {\n        return rtcInstance;\n      }\n    };\n    var beforeChange = function (editor, locks, beforeBookmark) {\n      getRtcInstanceWithError(editor).undoManager.beforeChange(locks, beforeBookmark);\n    };\n    var addUndoLevel = function (editor, undoManager, index, locks, beforeBookmark, level, event) {\n      return getRtcInstanceWithError(editor).undoManager.add(undoManager, index, locks, beforeBookmark, level, event);\n    };\n    var undo = function (editor, undoManager, locks, index) {\n      return getRtcInstanceWithError(editor).undoManager.undo(undoManager, locks, index);\n    };\n    var redo = function (editor, index, data) {\n      return getRtcInstanceWithError(editor).undoManager.redo(index, data);\n    };\n    var clear = function (editor, undoManager, index) {\n      getRtcInstanceWithError(editor).undoManager.clear(undoManager, index);\n    };\n    var reset = function (editor, undoManager) {\n      getRtcInstanceWithError(editor).undoManager.reset(undoManager);\n    };\n    var hasUndo = function (editor, undoManager, index) {\n      return getRtcInstanceWithError(editor).undoManager.hasUndo(undoManager, index);\n    };\n    var hasRedo = function (editor, undoManager, index) {\n      return getRtcInstanceWithError(editor).undoManager.hasRedo(undoManager, index);\n    };\n    var transact = function (editor, undoManager, locks, callback) {\n      return getRtcInstanceWithError(editor).undoManager.transact(undoManager, locks, callback);\n    };\n    var ignore = function (editor, locks, callback) {\n      getRtcInstanceWithError(editor).undoManager.ignore(locks, callback);\n    };\n    var extra = function (editor, undoManager, index, callback1, callback2) {\n      getRtcInstanceWithError(editor).undoManager.extra(undoManager, index, callback1, callback2);\n    };\n    var matchFormat = function (editor, name, vars, node, similar) {\n      return getRtcInstanceWithError(editor).formatter.match(name, vars, node, similar);\n    };\n    var matchAllFormats = function (editor, names, vars) {\n      return getRtcInstanceWithError(editor).formatter.matchAll(names, vars);\n    };\n    var matchNodeFormat = function (editor, node, name, vars, similar) {\n      return getRtcInstanceWithError(editor).formatter.matchNode(node, name, vars, similar);\n    };\n    var canApplyFormat = function (editor, name) {\n      return getRtcInstanceWithError(editor).formatter.canApply(name);\n    };\n    var closestFormat = function (editor, names) {\n      return getRtcInstanceWithError(editor).formatter.closest(names);\n    };\n    var applyFormat = function (editor, name, vars, node) {\n      getRtcInstanceWithError(editor).formatter.apply(name, vars, node);\n    };\n    var removeFormat = function (editor, name, vars, node, similar) {\n      getRtcInstanceWithError(editor).formatter.remove(name, vars, node, similar);\n    };\n    var toggleFormat = function (editor, name, vars, node) {\n      getRtcInstanceWithError(editor).formatter.toggle(name, vars, node);\n    };\n    var formatChanged = function (editor, registeredFormatListeners, formats, callback, similar, vars) {\n      return getRtcInstanceWithError(editor).formatter.formatChanged(registeredFormatListeners, formats, callback, similar, vars);\n    };\n    var getContent$2 = function (editor, args, format) {\n      return getRtcInstanceWithFallback(editor).editor.getContent(args, format);\n    };\n    var setContent$2 = function (editor, content, args) {\n      return getRtcInstanceWithFallback(editor).editor.setContent(content, args);\n    };\n    var insertContent = function (editor, value, details) {\n      return getRtcInstanceWithFallback(editor).editor.insertContent(value, details);\n    };\n    var getSelectedContent = function (editor, format, args) {\n      return getRtcInstanceWithError(editor).selection.getContent(format, args);\n    };\n    var addVisual$1 = function (editor, elm) {\n      return getRtcInstanceWithError(editor).editor.addVisual(elm);\n    };\n\n    var getContent$1 = function (editor, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      var format = args.format ? args.format : 'html';\n      return getSelectedContent(editor, format, args);\n    };\n\n    var removeEmpty = function (text) {\n      if (text.dom.length === 0) {\n        remove$7(text);\n        return Optional.none();\n      } else {\n        return Optional.some(text);\n      }\n    };\n    var walkPastBookmark = function (node, start) {\n      return node.filter(function (elm) {\n        return BookmarkManager.isBookmarkNode(elm.dom);\n      }).bind(start ? nextSibling : prevSibling);\n    };\n    var merge = function (outer, inner, rng, start) {\n      var outerElm = outer.dom;\n      var innerElm = inner.dom;\n      var oldLength = start ? outerElm.length : innerElm.length;\n      if (start) {\n        mergeTextNodes(outerElm, innerElm, false, !start);\n        rng.setStart(innerElm, oldLength);\n      } else {\n        mergeTextNodes(innerElm, outerElm, false, !start);\n        rng.setEnd(innerElm, oldLength);\n      }\n    };\n    var normalizeTextIfRequired = function (inner, start) {\n      parent(inner).each(function (root) {\n        var text = inner.dom;\n        if (start && needsToBeNbspLeft(root, CaretPosition(text, 0))) {\n          normalizeWhitespaceAfter(text, 0);\n        } else if (!start && needsToBeNbspRight(root, CaretPosition(text, text.length))) {\n          normalizeWhitespaceBefore(text, text.length);\n        }\n      });\n    };\n    var mergeAndNormalizeText = function (outerNode, innerNode, rng, start) {\n      outerNode.bind(function (outer) {\n        var normalizer = start ? normalizeWhitespaceBefore : normalizeWhitespaceAfter;\n        normalizer(outer.dom, start ? outer.dom.length : 0);\n        return innerNode.filter(isText$8).map(function (inner) {\n          return merge(outer, inner, rng, start);\n        });\n      }).orThunk(function () {\n        var innerTextNode = walkPastBookmark(innerNode, start).or(innerNode).filter(isText$8);\n        return innerTextNode.map(function (inner) {\n          return normalizeTextIfRequired(inner, start);\n        });\n      });\n    };\n    var rngSetContent = function (rng, fragment) {\n      var firstChild = Optional.from(fragment.firstChild).map(SugarElement.fromDom);\n      var lastChild = Optional.from(fragment.lastChild).map(SugarElement.fromDom);\n      rng.deleteContents();\n      rng.insertNode(fragment);\n      var prevText = firstChild.bind(prevSibling).filter(isText$8).bind(removeEmpty);\n      var nextText = lastChild.bind(nextSibling).filter(isText$8).bind(removeEmpty);\n      mergeAndNormalizeText(prevText, firstChild, rng, true);\n      mergeAndNormalizeText(nextText, lastChild, rng, false);\n      rng.collapse(false);\n    };\n    var setupArgs = function (args, content) {\n      return __assign(__assign({ format: 'html' }, args), {\n        set: true,\n        selection: true,\n        content: content\n      });\n    };\n    var cleanContent = function (editor, args) {\n      if (args.format !== 'raw') {\n        var rng = editor.selection.getRng();\n        var contextBlock = editor.dom.getParent(rng.commonAncestorContainer, editor.dom.isBlock);\n        var contextArgs = contextBlock ? { context: contextBlock.nodeName.toLowerCase() } : {};\n        var node = editor.parser.parse(args.content, __assign(__assign({\n          isRootContent: true,\n          forced_root_block: false\n        }, contextArgs), args));\n        return HtmlSerializer({ validate: editor.validate }, editor.schema).serialize(node);\n      } else {\n        return args.content;\n      }\n    };\n    var setContent$1 = function (editor, content, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      var defaultedArgs = setupArgs(args, content);\n      var updatedArgs = defaultedArgs;\n      if (!defaultedArgs.no_events) {\n        var eventArgs = editor.fire('BeforeSetContent', defaultedArgs);\n        if (eventArgs.isDefaultPrevented()) {\n          editor.fire('SetContent', eventArgs);\n          return;\n        } else {\n          updatedArgs = eventArgs;\n        }\n      }\n      updatedArgs.content = cleanContent(editor, updatedArgs);\n      var rng = editor.selection.getRng();\n      rngSetContent(rng, rng.createContextualFragment(updatedArgs.content));\n      editor.selection.setRng(rng);\n      scrollRangeIntoView(editor, rng);\n      if (!updatedArgs.no_events) {\n        editor.fire('SetContent', updatedArgs);\n      }\n    };\n\n    var deleteFromCallbackMap = function (callbackMap, selector, callback) {\n      if (callbackMap && has$2(callbackMap, selector)) {\n        var newCallbacks = filter$4(callbackMap[selector], function (cb) {\n          return cb !== callback;\n        });\n        if (newCallbacks.length === 0) {\n          delete callbackMap[selector];\n        } else {\n          callbackMap[selector] = newCallbacks;\n        }\n      }\n    };\n    function SelectorChanged (dom, editor) {\n      var selectorChangedData;\n      var currentSelectors;\n      var findMatchingNode = function (selector, nodes) {\n        return find$3(nodes, function (node) {\n          return dom.is(node, selector);\n        });\n      };\n      var getParents = function (elem) {\n        return dom.getParents(elem, null, dom.getRoot());\n      };\n      return {\n        selectorChangedWithUnbind: function (selector, callback) {\n          if (!selectorChangedData) {\n            selectorChangedData = {};\n            currentSelectors = {};\n            editor.on('NodeChange', function (e) {\n              var node = e.element;\n              var parents = getParents(node);\n              var matchedSelectors = {};\n              Tools.each(selectorChangedData, function (callbacks, selector) {\n                findMatchingNode(selector, parents).each(function (node) {\n                  if (!currentSelectors[selector]) {\n                    each$k(callbacks, function (callback) {\n                      callback(true, {\n                        node: node,\n                        selector: selector,\n                        parents: parents\n                      });\n                    });\n                    currentSelectors[selector] = callbacks;\n                  }\n                  matchedSelectors[selector] = callbacks;\n                });\n              });\n              Tools.each(currentSelectors, function (callbacks, selector) {\n                if (!matchedSelectors[selector]) {\n                  delete currentSelectors[selector];\n                  Tools.each(callbacks, function (callback) {\n                    callback(false, {\n                      node: node,\n                      selector: selector,\n                      parents: parents\n                    });\n                  });\n                }\n              });\n            });\n          }\n          if (!selectorChangedData[selector]) {\n            selectorChangedData[selector] = [];\n          }\n          selectorChangedData[selector].push(callback);\n          findMatchingNode(selector, getParents(editor.selection.getStart())).each(function () {\n            currentSelectors[selector] = selectorChangedData[selector];\n          });\n          return {\n            unbind: function () {\n              deleteFromCallbackMap(selectorChangedData, selector, callback);\n              deleteFromCallbackMap(currentSelectors, selector, callback);\n            }\n          };\n        }\n      };\n    }\n\n    var isNativeIeSelection = function (rng) {\n      return !!rng.select;\n    };\n    var isAttachedToDom = function (node) {\n      return !!(node && node.ownerDocument) && contains$1(SugarElement.fromDom(node.ownerDocument), SugarElement.fromDom(node));\n    };\n    var isValidRange = function (rng) {\n      if (!rng) {\n        return false;\n      } else if (isNativeIeSelection(rng)) {\n        return true;\n      } else {\n        return isAttachedToDom(rng.startContainer) && isAttachedToDom(rng.endContainer);\n      }\n    };\n    var EditorSelection = function (dom, win, serializer, editor) {\n      var selectedRange;\n      var explicitRange;\n      var selectorChangedWithUnbind = SelectorChanged(dom, editor).selectorChangedWithUnbind;\n      var setCursorLocation = function (node, offset) {\n        var rng = dom.createRng();\n        if (isNonNullable(node) && isNonNullable(offset)) {\n          rng.setStart(node, offset);\n          rng.setEnd(node, offset);\n          setRng(rng);\n          collapse(false);\n        } else {\n          moveEndPoint(dom, rng, editor.getBody(), true);\n          setRng(rng);\n        }\n      };\n      var getContent = function (args) {\n        return getContent$1(editor, args);\n      };\n      var setContent = function (content, args) {\n        return setContent$1(editor, content, args);\n      };\n      var getStart$1 = function (real) {\n        return getStart(editor.getBody(), getRng$1(), real);\n      };\n      var getEnd$1 = function (real) {\n        return getEnd(editor.getBody(), getRng$1(), real);\n      };\n      var getBookmark = function (type, normalized) {\n        return bookmarkManager.getBookmark(type, normalized);\n      };\n      var moveToBookmark = function (bookmark) {\n        return bookmarkManager.moveToBookmark(bookmark);\n      };\n      var select$1 = function (node, content) {\n        select(dom, node, content).each(setRng);\n        return node;\n      };\n      var isCollapsed = function () {\n        var rng = getRng$1(), sel = getSel();\n        if (!rng || rng.item) {\n          return false;\n        }\n        if (rng.compareEndPoints) {\n          return rng.compareEndPoints('StartToEnd', rng) === 0;\n        }\n        return !sel || rng.collapsed;\n      };\n      var collapse = function (toStart) {\n        var rng = getRng$1();\n        rng.collapse(!!toStart);\n        setRng(rng);\n      };\n      var getSel = function () {\n        return win.getSelection ? win.getSelection() : win.document.selection;\n      };\n      var getRng$1 = function () {\n        var selection, rng, elm;\n        var tryCompareBoundaryPoints = function (how, sourceRange, destinationRange) {\n          try {\n            return sourceRange.compareBoundaryPoints(how, destinationRange);\n          } catch (ex) {\n            return -1;\n          }\n        };\n        var doc = win.document;\n        if (editor.bookmark !== undefined && hasFocus(editor) === false) {\n          var bookmark = getRng(editor);\n          if (bookmark.isSome()) {\n            return bookmark.map(function (r) {\n              return processRanges(editor, [r])[0];\n            }).getOr(doc.createRange());\n          }\n        }\n        try {\n          if ((selection = getSel()) && !isRestrictedNode(selection.anchorNode)) {\n            if (selection.rangeCount > 0) {\n              rng = selection.getRangeAt(0);\n            } else {\n              rng = selection.createRange ? selection.createRange() : doc.createRange();\n            }\n            rng = processRanges(editor, [rng])[0];\n          }\n        } catch (ex) {\n        }\n        if (!rng) {\n          rng = doc.createRange ? doc.createRange() : doc.body.createTextRange();\n        }\n        if (rng.setStart && rng.startContainer.nodeType === 9 && rng.collapsed) {\n          elm = dom.getRoot();\n          rng.setStart(elm, 0);\n          rng.setEnd(elm, 0);\n        }\n        if (selectedRange && explicitRange) {\n          if (tryCompareBoundaryPoints(rng.START_TO_START, rng, selectedRange) === 0 && tryCompareBoundaryPoints(rng.END_TO_END, rng, selectedRange) === 0) {\n            rng = explicitRange;\n          } else {\n            selectedRange = null;\n            explicitRange = null;\n          }\n        }\n        return rng;\n      };\n      var setRng = function (rng, forward) {\n        var node;\n        if (!isValidRange(rng)) {\n          return;\n        }\n        var ieRange = isNativeIeSelection(rng) ? rng : null;\n        if (ieRange) {\n          explicitRange = null;\n          try {\n            ieRange.select();\n          } catch (ex) {\n          }\n          return;\n        }\n        var sel = getSel();\n        var evt = editor.fire('SetSelectionRange', {\n          range: rng,\n          forward: forward\n        });\n        rng = evt.range;\n        if (sel) {\n          explicitRange = rng;\n          try {\n            sel.removeAllRanges();\n            sel.addRange(rng);\n          } catch (ex) {\n          }\n          if (forward === false && sel.extend) {\n            sel.collapse(rng.endContainer, rng.endOffset);\n            sel.extend(rng.startContainer, rng.startOffset);\n          }\n          selectedRange = sel.rangeCount > 0 ? sel.getRangeAt(0) : null;\n        }\n        if (!rng.collapsed && rng.startContainer === rng.endContainer && sel.setBaseAndExtent && !Env.ie) {\n          if (rng.endOffset - rng.startOffset < 2) {\n            if (rng.startContainer.hasChildNodes()) {\n              node = rng.startContainer.childNodes[rng.startOffset];\n              if (node && node.tagName === 'IMG') {\n                sel.setBaseAndExtent(rng.startContainer, rng.startOffset, rng.endContainer, rng.endOffset);\n                if (sel.anchorNode !== rng.startContainer || sel.focusNode !== rng.endContainer) {\n                  sel.setBaseAndExtent(node, 0, node, 1);\n                }\n              }\n            }\n          }\n        }\n        editor.fire('AfterSetSelectionRange', {\n          range: rng,\n          forward: forward\n        });\n      };\n      var setNode = function (elm) {\n        setContent(dom.getOuterHTML(elm));\n        return elm;\n      };\n      var getNode$1 = function () {\n        return getNode(editor.getBody(), getRng$1());\n      };\n      var getSelectedBlocks$1 = function (startElm, endElm) {\n        return getSelectedBlocks(dom, getRng$1(), startElm, endElm);\n      };\n      var isForward = function () {\n        var sel = getSel();\n        var anchorNode = sel === null || sel === void 0 ? void 0 : sel.anchorNode;\n        var focusNode = sel === null || sel === void 0 ? void 0 : sel.focusNode;\n        if (!sel || !anchorNode || !focusNode || isRestrictedNode(anchorNode) || isRestrictedNode(focusNode)) {\n          return true;\n        }\n        var anchorRange = dom.createRng();\n        anchorRange.setStart(anchorNode, sel.anchorOffset);\n        anchorRange.collapse(true);\n        var focusRange = dom.createRng();\n        focusRange.setStart(focusNode, sel.focusOffset);\n        focusRange.collapse(true);\n        return anchorRange.compareBoundaryPoints(anchorRange.START_TO_START, focusRange) <= 0;\n      };\n      var normalize = function () {\n        var rng = getRng$1();\n        var sel = getSel();\n        if (!hasMultipleRanges(sel) && hasAnyRanges(editor)) {\n          var normRng = normalize$2(dom, rng);\n          normRng.each(function (normRng) {\n            setRng(normRng, isForward());\n          });\n          return normRng.getOr(rng);\n        }\n        return rng;\n      };\n      var selectorChanged = function (selector, callback) {\n        selectorChangedWithUnbind(selector, callback);\n        return exports;\n      };\n      var getScrollContainer = function () {\n        var scrollContainer;\n        var node = dom.getRoot();\n        while (node && node.nodeName !== 'BODY') {\n          if (node.scrollHeight > node.clientHeight) {\n            scrollContainer = node;\n            break;\n          }\n          node = node.parentNode;\n        }\n        return scrollContainer;\n      };\n      var scrollIntoView = function (elm, alignToTop) {\n        if (isNonNullable(elm)) {\n          scrollElementIntoView(editor, elm, alignToTop);\n        } else {\n          scrollRangeIntoView(editor, getRng$1(), alignToTop);\n        }\n      };\n      var placeCaretAt = function (clientX, clientY) {\n        return setRng(fromPoint(clientX, clientY, editor.getDoc()));\n      };\n      var getBoundingClientRect = function () {\n        var rng = getRng$1();\n        return rng.collapsed ? CaretPosition.fromRangeStart(rng).getClientRects()[0] : rng.getBoundingClientRect();\n      };\n      var destroy = function () {\n        win = selectedRange = explicitRange = null;\n        controlSelection.destroy();\n      };\n      var exports = {\n        bookmarkManager: null,\n        controlSelection: null,\n        dom: dom,\n        win: win,\n        serializer: serializer,\n        editor: editor,\n        collapse: collapse,\n        setCursorLocation: setCursorLocation,\n        getContent: getContent,\n        setContent: setContent,\n        getBookmark: getBookmark,\n        moveToBookmark: moveToBookmark,\n        select: select$1,\n        isCollapsed: isCollapsed,\n        isForward: isForward,\n        setNode: setNode,\n        getNode: getNode$1,\n        getSel: getSel,\n        setRng: setRng,\n        getRng: getRng$1,\n        getStart: getStart$1,\n        getEnd: getEnd$1,\n        getSelectedBlocks: getSelectedBlocks$1,\n        normalize: normalize,\n        selectorChanged: selectorChanged,\n        selectorChangedWithUnbind: selectorChangedWithUnbind,\n        getScrollContainer: getScrollContainer,\n        scrollIntoView: scrollIntoView,\n        placeCaretAt: placeCaretAt,\n        getBoundingClientRect: getBoundingClientRect,\n        destroy: destroy\n      };\n      var bookmarkManager = BookmarkManager(exports);\n      var controlSelection = ControlSelection(exports, editor);\n      exports.bookmarkManager = bookmarkManager;\n      exports.controlSelection = controlSelection;\n      return exports;\n    };\n\n    var removeAttrs = function (node, names) {\n      each$k(names, function (name) {\n        node.attr(name, null);\n      });\n    };\n    var addFontToSpansFilter = function (domParser, styles, fontSizes) {\n      domParser.addNodeFilter('font', function (nodes) {\n        each$k(nodes, function (node) {\n          var props = styles.parse(node.attr('style'));\n          var color = node.attr('color');\n          var face = node.attr('face');\n          var size = node.attr('size');\n          if (color) {\n            props.color = color;\n          }\n          if (face) {\n            props['font-family'] = face;\n          }\n          if (size) {\n            props['font-size'] = fontSizes[parseInt(node.attr('size'), 10) - 1];\n          }\n          node.name = 'span';\n          node.attr('style', styles.serialize(props));\n          removeAttrs(node, [\n            'color',\n            'face',\n            'size'\n          ]);\n        });\n      });\n    };\n    var addStrikeToSpanFilter = function (domParser, styles) {\n      domParser.addNodeFilter('strike', function (nodes) {\n        each$k(nodes, function (node) {\n          var props = styles.parse(node.attr('style'));\n          props['text-decoration'] = 'line-through';\n          node.name = 'span';\n          node.attr('style', styles.serialize(props));\n        });\n      });\n    };\n    var addFilters = function (domParser, settings) {\n      var styles = Styles();\n      if (settings.convert_fonts_to_spans) {\n        addFontToSpansFilter(domParser, styles, Tools.explode(settings.font_size_legacy_values));\n      }\n      addStrikeToSpanFilter(domParser, styles);\n    };\n    var register$2 = function (domParser, settings) {\n      if (settings.inline_styles) {\n        addFilters(domParser, settings);\n      }\n    };\n\n    var blobUriToBlob = function (url) {\n      return new promiseObj(function (resolve, reject) {\n        var rejectWithError = function () {\n          reject('Cannot convert ' + url + ' to Blob. Resource might not exist or is inaccessible.');\n        };\n        try {\n          var xhr_1 = new XMLHttpRequest();\n          xhr_1.open('GET', url, true);\n          xhr_1.responseType = 'blob';\n          xhr_1.onload = function () {\n            if (xhr_1.status === 200) {\n              resolve(xhr_1.response);\n            } else {\n              rejectWithError();\n            }\n          };\n          xhr_1.onerror = rejectWithError;\n          xhr_1.send();\n        } catch (ex) {\n          rejectWithError();\n        }\n      });\n    };\n    var parseDataUri$1 = function (uri) {\n      var type;\n      var uriParts = decodeURIComponent(uri).split(',');\n      var matches = /data:([^;]+)/.exec(uriParts[0]);\n      if (matches) {\n        type = matches[1];\n      }\n      return {\n        type: type,\n        data: uriParts[1]\n      };\n    };\n    var buildBlob = function (type, data) {\n      var str;\n      try {\n        str = atob(data);\n      } catch (e) {\n        return Optional.none();\n      }\n      var arr = new Uint8Array(str.length);\n      for (var i = 0; i < arr.length; i++) {\n        arr[i] = str.charCodeAt(i);\n      }\n      return Optional.some(new Blob([arr], { type: type }));\n    };\n    var dataUriToBlob = function (uri) {\n      return new promiseObj(function (resolve) {\n        var _a = parseDataUri$1(uri), type = _a.type, data = _a.data;\n        buildBlob(type, data).fold(function () {\n          return resolve(new Blob([]));\n        }, resolve);\n      });\n    };\n    var uriToBlob = function (url) {\n      if (url.indexOf('blob:') === 0) {\n        return blobUriToBlob(url);\n      }\n      if (url.indexOf('data:') === 0) {\n        return dataUriToBlob(url);\n      }\n      return null;\n    };\n    var blobToDataUri = function (blob) {\n      return new promiseObj(function (resolve) {\n        var reader = new FileReader();\n        reader.onloadend = function () {\n          resolve(reader.result);\n        };\n        reader.readAsDataURL(blob);\n      });\n    };\n\n    var count$1 = 0;\n    var uniqueId = function (prefix) {\n      return (prefix || 'blobid') + count$1++;\n    };\n    var imageToBlobInfo = function (blobCache, img, resolve, reject) {\n      var base64, blobInfo;\n      if (img.src.indexOf('blob:') === 0) {\n        blobInfo = blobCache.getByUri(img.src);\n        if (blobInfo) {\n          resolve({\n            image: img,\n            blobInfo: blobInfo\n          });\n        } else {\n          uriToBlob(img.src).then(function (blob) {\n            blobToDataUri(blob).then(function (dataUri) {\n              base64 = parseDataUri$1(dataUri).data;\n              blobInfo = blobCache.create(uniqueId(), blob, base64);\n              blobCache.add(blobInfo);\n              resolve({\n                image: img,\n                blobInfo: blobInfo\n              });\n            });\n          }, function (err) {\n            reject(err);\n          });\n        }\n        return;\n      }\n      var _a = parseDataUri$1(img.src), data = _a.data, type = _a.type;\n      base64 = data;\n      blobInfo = blobCache.getByData(base64, type);\n      if (blobInfo) {\n        resolve({\n          image: img,\n          blobInfo: blobInfo\n        });\n      } else {\n        uriToBlob(img.src).then(function (blob) {\n          blobInfo = blobCache.create(uniqueId(), blob, base64);\n          blobCache.add(blobInfo);\n          resolve({\n            image: img,\n            blobInfo: blobInfo\n          });\n        }, function (err) {\n          reject(err);\n        });\n      }\n    };\n    var getAllImages = function (elm) {\n      return elm ? from(elm.getElementsByTagName('img')) : [];\n    };\n    var ImageScanner = function (uploadStatus, blobCache) {\n      var cachedPromises = {};\n      var findAll = function (elm, predicate) {\n        if (!predicate) {\n          predicate = always;\n        }\n        var images = filter$4(getAllImages(elm), function (img) {\n          var src = img.src;\n          if (!Env.fileApi) {\n            return false;\n          }\n          if (img.hasAttribute('data-mce-bogus')) {\n            return false;\n          }\n          if (img.hasAttribute('data-mce-placeholder')) {\n            return false;\n          }\n          if (!src || src === Env.transparentSrc) {\n            return false;\n          }\n          if (src.indexOf('blob:') === 0) {\n            return !uploadStatus.isUploaded(src) && predicate(img);\n          }\n          if (src.indexOf('data:') === 0) {\n            return predicate(img);\n          }\n          return false;\n        });\n        var promises = map$3(images, function (img) {\n          if (cachedPromises[img.src] !== undefined) {\n            return new promiseObj(function (resolve) {\n              cachedPromises[img.src].then(function (imageInfo) {\n                if (typeof imageInfo === 'string') {\n                  return imageInfo;\n                }\n                resolve({\n                  image: img,\n                  blobInfo: imageInfo.blobInfo\n                });\n              });\n            });\n          }\n          var newPromise = new promiseObj(function (resolve, reject) {\n            imageToBlobInfo(blobCache, img, resolve, reject);\n          }).then(function (result) {\n            delete cachedPromises[result.image.src];\n            return result;\n          }).catch(function (error) {\n            delete cachedPromises[img.src];\n            return error;\n          });\n          cachedPromises[img.src] = newPromise;\n          return newPromise;\n        });\n        return promiseObj.all(promises);\n      };\n      return { findAll: findAll };\n    };\n\n    var extractBase64DataUris = function (html) {\n      var dataImageUri = /data:[^;<\"'\\s]+;base64,([a-z0-9\\+\\/=\\s]+)/gi;\n      var chunks = [];\n      var uris = {};\n      var prefix = generate('img');\n      var matches;\n      var index = 0;\n      var count = 0;\n      while (matches = dataImageUri.exec(html)) {\n        var uri = matches[0];\n        var imageId = prefix + '_' + count++;\n        uris[imageId] = uri;\n        if (index < matches.index) {\n          chunks.push(html.substr(index, matches.index - index));\n        }\n        chunks.push(imageId);\n        index = matches.index + uri.length;\n      }\n      var re = new RegExp(prefix + '_[0-9]+', 'g');\n      if (index === 0) {\n        return {\n          prefix: prefix,\n          uris: uris,\n          html: html,\n          re: re\n        };\n      } else {\n        if (index < html.length) {\n          chunks.push(html.substr(index));\n        }\n        return {\n          prefix: prefix,\n          uris: uris,\n          html: chunks.join(''),\n          re: re\n        };\n      }\n    };\n    var restoreDataUris = function (html, result) {\n      return html.replace(result.re, function (imageId) {\n        return get$9(result.uris, imageId).getOr(imageId);\n      });\n    };\n    var parseDataUri = function (uri) {\n      var matches = /data:([^;]+);base64,([a-z0-9\\+\\/=\\s]+)/i.exec(uri);\n      if (matches) {\n        return Optional.some({\n          type: matches[1],\n          data: decodeURIComponent(matches[2])\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n\n    var paddEmptyNode = function (settings, args, blockElements, node) {\n      var brPreferred = settings.padd_empty_with_br || args.insert;\n      if (brPreferred && blockElements[node.name]) {\n        node.empty().append(new AstNode('br', 1)).shortEnded = true;\n      } else {\n        node.empty().append(new AstNode('#text', 3)).value = nbsp;\n      }\n    };\n    var isPaddedWithNbsp = function (node) {\n      return hasOnlyChild(node, '#text') && node.firstChild.value === nbsp;\n    };\n    var hasOnlyChild = function (node, name) {\n      return node && node.firstChild && node.firstChild === node.lastChild && node.firstChild.name === name;\n    };\n    var isPadded = function (schema, node) {\n      var rule = schema.getElementRule(node.name);\n      return rule && rule.paddEmpty;\n    };\n    var isEmpty = function (schema, nonEmptyElements, whitespaceElements, node) {\n      return node.isEmpty(nonEmptyElements, whitespaceElements, function (node) {\n        return isPadded(schema, node);\n      });\n    };\n    var isLineBreakNode = function (node, blockElements) {\n      return node && (has$2(blockElements, node.name) || node.name === 'br');\n    };\n\n    var isBogusImage = function (img) {\n      return isNonNullable(img.attr('data-mce-bogus'));\n    };\n    var isInternalImageSource = function (img) {\n      return img.attr('src') === Env.transparentSrc || isNonNullable(img.attr('data-mce-placeholder'));\n    };\n    var isValidDataImg = function (img, settings) {\n      if (settings.images_dataimg_filter) {\n        var imgElem_1 = new Image();\n        imgElem_1.src = img.attr('src');\n        each$j(img.attributes.map, function (value, key) {\n          imgElem_1.setAttribute(key, value);\n        });\n        return settings.images_dataimg_filter(imgElem_1);\n      } else {\n        return true;\n      }\n    };\n    var registerBase64ImageFilter = function (parser, settings) {\n      var blobCache = settings.blob_cache;\n      var processImage = function (img) {\n        var inputSrc = img.attr('src');\n        if (isInternalImageSource(img) || isBogusImage(img)) {\n          return;\n        }\n        parseDataUri(inputSrc).filter(function () {\n          return isValidDataImg(img, settings);\n        }).bind(function (_a) {\n          var type = _a.type, data = _a.data;\n          return Optional.from(blobCache.getByData(data, type)).orThunk(function () {\n            return buildBlob(type, data).map(function (blob) {\n              var blobInfo = blobCache.create(uniqueId(), blob, data);\n              blobCache.add(blobInfo);\n              return blobInfo;\n            });\n          });\n        }).each(function (blobInfo) {\n          img.attr('src', blobInfo.blobUri());\n        });\n      };\n      if (blobCache) {\n        parser.addAttributeFilter('src', function (nodes) {\n          return each$k(nodes, processImage);\n        });\n      }\n    };\n    var register$1 = function (parser, settings) {\n      var schema = parser.schema;\n      if (settings.remove_trailing_brs) {\n        parser.addNodeFilter('br', function (nodes, _, args) {\n          var i;\n          var l = nodes.length;\n          var node;\n          var blockElements = Tools.extend({}, schema.getBlockElements());\n          var nonEmptyElements = schema.getNonEmptyElements();\n          var parent, lastParent, prev, prevName;\n          var whiteSpaceElements = schema.getWhiteSpaceElements();\n          var elementRule, textNode;\n          blockElements.body = 1;\n          for (i = 0; i < l; i++) {\n            node = nodes[i];\n            parent = node.parent;\n            if (blockElements[node.parent.name] && node === parent.lastChild) {\n              prev = node.prev;\n              while (prev) {\n                prevName = prev.name;\n                if (prevName !== 'span' || prev.attr('data-mce-type') !== 'bookmark') {\n                  if (prevName === 'br') {\n                    node = null;\n                  }\n                  break;\n                }\n                prev = prev.prev;\n              }\n              if (node) {\n                node.remove();\n                if (isEmpty(schema, nonEmptyElements, whiteSpaceElements, parent)) {\n                  elementRule = schema.getElementRule(parent.name);\n                  if (elementRule) {\n                    if (elementRule.removeEmpty) {\n                      parent.remove();\n                    } else if (elementRule.paddEmpty) {\n                      paddEmptyNode(settings, args, blockElements, parent);\n                    }\n                  }\n                }\n              }\n            } else {\n              lastParent = node;\n              while (parent && parent.firstChild === lastParent && parent.lastChild === lastParent) {\n                lastParent = parent;\n                if (blockElements[parent.name]) {\n                  break;\n                }\n                parent = parent.parent;\n              }\n              if (lastParent === parent && settings.padd_empty_with_br !== true) {\n                textNode = new AstNode('#text', 3);\n                textNode.value = nbsp;\n                node.replace(textNode);\n              }\n            }\n          }\n        });\n      }\n      parser.addAttributeFilter('href', function (nodes) {\n        var i = nodes.length;\n        var appendRel = function (rel) {\n          var parts = rel.split(' ').filter(function (p) {\n            return p.length > 0;\n          });\n          return parts.concat(['noopener']).sort().join(' ');\n        };\n        var addNoOpener = function (rel) {\n          var newRel = rel ? Tools.trim(rel) : '';\n          if (!/\\b(noopener)\\b/g.test(newRel)) {\n            return appendRel(newRel);\n          } else {\n            return newRel;\n          }\n        };\n        if (!settings.allow_unsafe_link_target) {\n          while (i--) {\n            var node = nodes[i];\n            if (node.name === 'a' && node.attr('target') === '_blank') {\n              node.attr('rel', addNoOpener(node.attr('rel')));\n            }\n          }\n        }\n      });\n      if (!settings.allow_html_in_named_anchor) {\n        parser.addAttributeFilter('id,name', function (nodes) {\n          var i = nodes.length, sibling, prevSibling, parent, node;\n          while (i--) {\n            node = nodes[i];\n            if (node.name === 'a' && node.firstChild && !node.attr('href')) {\n              parent = node.parent;\n              sibling = node.lastChild;\n              do {\n                prevSibling = sibling.prev;\n                parent.insert(sibling, node);\n                sibling = prevSibling;\n              } while (sibling);\n            }\n          }\n        });\n      }\n      if (settings.fix_list_elements) {\n        parser.addNodeFilter('ul,ol', function (nodes) {\n          var i = nodes.length, node, parentNode;\n          while (i--) {\n            node = nodes[i];\n            parentNode = node.parent;\n            if (parentNode.name === 'ul' || parentNode.name === 'ol') {\n              if (node.prev && node.prev.name === 'li') {\n                node.prev.append(node);\n              } else {\n                var li = new AstNode('li', 1);\n                li.attr('style', 'list-style-type: none');\n                node.wrap(li);\n              }\n            }\n          }\n        });\n      }\n      if (settings.validate && schema.getValidClasses()) {\n        parser.addAttributeFilter('class', function (nodes) {\n          var validClasses = schema.getValidClasses();\n          var i = nodes.length;\n          while (i--) {\n            var node = nodes[i];\n            var classList = node.attr('class').split(' ');\n            var classValue = '';\n            for (var ci = 0; ci < classList.length; ci++) {\n              var className = classList[ci];\n              var valid = false;\n              var validClassesMap = validClasses['*'];\n              if (validClassesMap && validClassesMap[className]) {\n                valid = true;\n              }\n              validClassesMap = validClasses[node.name];\n              if (!valid && validClassesMap && validClassesMap[className]) {\n                valid = true;\n              }\n              if (valid) {\n                if (classValue) {\n                  classValue += ' ';\n                }\n                classValue += className;\n              }\n            }\n            if (!classValue.length) {\n              classValue = null;\n            }\n            node.attr('class', classValue);\n          }\n        });\n      }\n      registerBase64ImageFilter(parser, settings);\n    };\n\n    var each$7 = Tools.each, trim = Tools.trim;\n    var queryParts = 'source protocol authority userInfo user password host port relative path directory file query anchor'.split(' ');\n    var DEFAULT_PORTS = {\n      ftp: 21,\n      http: 80,\n      https: 443,\n      mailto: 25\n    };\n    var safeSvgDataUrlElements = [\n      'img',\n      'video'\n    ];\n    var blockSvgDataUris = function (allowSvgDataUrls, tagName) {\n      if (isNonNullable(allowSvgDataUrls)) {\n        return !allowSvgDataUrls;\n      } else {\n        return isNonNullable(tagName) ? !contains$3(safeSvgDataUrlElements, tagName) : true;\n      }\n    };\n    var isInvalidUri = function (settings, uri, tagName) {\n      if (settings.allow_html_data_urls) {\n        return false;\n      } else if (/^data:image\\//i.test(uri)) {\n        return blockSvgDataUris(settings.allow_svg_data_urls, tagName) && /^data:image\\/svg\\+xml/i.test(uri);\n      } else {\n        return /^data:/i.test(uri);\n      }\n    };\n    var URI = function () {\n      function URI(url, settings) {\n        url = trim(url);\n        this.settings = settings || {};\n        var baseUri = this.settings.base_uri;\n        var self = this;\n        if (/^([\\w\\-]+):([^\\/]{2})/i.test(url) || /^\\s*#/.test(url)) {\n          self.source = url;\n          return;\n        }\n        var isProtocolRelative = url.indexOf('//') === 0;\n        if (url.indexOf('/') === 0 && !isProtocolRelative) {\n          url = (baseUri ? baseUri.protocol || 'http' : 'http') + '://mce_host' + url;\n        }\n        if (!/^[\\w\\-]*:?\\/\\//.test(url)) {\n          var baseUrl = this.settings.base_uri ? this.settings.base_uri.path : new URI(document.location.href).directory;\n          if (this.settings.base_uri && this.settings.base_uri.protocol == '') {\n            url = '//mce_host' + self.toAbsPath(baseUrl, url);\n          } else {\n            var match = /([^#?]*)([#?]?.*)/.exec(url);\n            url = (baseUri && baseUri.protocol || 'http') + '://mce_host' + self.toAbsPath(baseUrl, match[1]) + match[2];\n          }\n        }\n        url = url.replace(/@@/g, '(mce_at)');\n        var urlMatch = /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@\\/]*):?([^:@\\/]*))?@)?(\\[[a-zA-Z0-9:.%]+\\]|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/.exec(url);\n        each$7(queryParts, function (v, i) {\n          var part = urlMatch[i];\n          if (part) {\n            part = part.replace(/\\(mce_at\\)/g, '@@');\n          }\n          self[v] = part;\n        });\n        if (baseUri) {\n          if (!self.protocol) {\n            self.protocol = baseUri.protocol;\n          }\n          if (!self.userInfo) {\n            self.userInfo = baseUri.userInfo;\n          }\n          if (!self.port && self.host === 'mce_host') {\n            self.port = baseUri.port;\n          }\n          if (!self.host || self.host === 'mce_host') {\n            self.host = baseUri.host;\n          }\n          self.source = '';\n        }\n        if (isProtocolRelative) {\n          self.protocol = '';\n        }\n      }\n      URI.parseDataUri = function (uri) {\n        var type;\n        var uriComponents = decodeURIComponent(uri).split(',');\n        var matches = /data:([^;]+)/.exec(uriComponents[0]);\n        if (matches) {\n          type = matches[1];\n        }\n        return {\n          type: type,\n          data: uriComponents[1]\n        };\n      };\n      URI.isDomSafe = function (uri, context, options) {\n        if (options === void 0) {\n          options = {};\n        }\n        if (options.allow_script_urls) {\n          return true;\n        } else {\n          var decodedUri = Entities.decode(uri).replace(/[\\s\\u0000-\\u001F]+/g, '');\n          try {\n            decodedUri = decodeURIComponent(decodedUri);\n          } catch (ex) {\n            decodedUri = unescape(decodedUri);\n          }\n          if (/((java|vb)script|mhtml):/i.test(decodedUri)) {\n            return false;\n          }\n          return !isInvalidUri(options, decodedUri, context);\n        }\n      };\n      URI.getDocumentBaseUrl = function (loc) {\n        var baseUrl;\n        if (loc.protocol.indexOf('http') !== 0 && loc.protocol !== 'file:') {\n          baseUrl = loc.href;\n        } else {\n          baseUrl = loc.protocol + '//' + loc.host + loc.pathname;\n        }\n        if (/^[^:]+:\\/\\/\\/?[^\\/]+\\//.test(baseUrl)) {\n          baseUrl = baseUrl.replace(/[\\?#].*$/, '').replace(/[\\/\\\\][^\\/]+$/, '');\n          if (!/[\\/\\\\]$/.test(baseUrl)) {\n            baseUrl += '/';\n          }\n        }\n        return baseUrl;\n      };\n      URI.prototype.setPath = function (path) {\n        var pathMatch = /^(.*?)\\/?(\\w+)?$/.exec(path);\n        this.path = pathMatch[0];\n        this.directory = pathMatch[1];\n        this.file = pathMatch[2];\n        this.source = '';\n        this.getURI();\n      };\n      URI.prototype.toRelative = function (uri) {\n        var output;\n        if (uri === './') {\n          return uri;\n        }\n        var relativeUri = new URI(uri, { base_uri: this });\n        if (relativeUri.host !== 'mce_host' && this.host !== relativeUri.host && relativeUri.host || this.port !== relativeUri.port || this.protocol !== relativeUri.protocol && relativeUri.protocol !== '') {\n          return relativeUri.getURI();\n        }\n        var tu = this.getURI(), uu = relativeUri.getURI();\n        if (tu === uu || tu.charAt(tu.length - 1) === '/' && tu.substr(0, tu.length - 1) === uu) {\n          return tu;\n        }\n        output = this.toRelPath(this.path, relativeUri.path);\n        if (relativeUri.query) {\n          output += '?' + relativeUri.query;\n        }\n        if (relativeUri.anchor) {\n          output += '#' + relativeUri.anchor;\n        }\n        return output;\n      };\n      URI.prototype.toAbsolute = function (uri, noHost) {\n        var absoluteUri = new URI(uri, { base_uri: this });\n        return absoluteUri.getURI(noHost && this.isSameOrigin(absoluteUri));\n      };\n      URI.prototype.isSameOrigin = function (uri) {\n        if (this.host == uri.host && this.protocol == uri.protocol) {\n          if (this.port == uri.port) {\n            return true;\n          }\n          var defaultPort = DEFAULT_PORTS[this.protocol];\n          if (defaultPort && (this.port || defaultPort) == (uri.port || defaultPort)) {\n            return true;\n          }\n        }\n        return false;\n      };\n      URI.prototype.toRelPath = function (base, path) {\n        var breakPoint = 0, out = '', i, l;\n        var normalizedBase = base.substring(0, base.lastIndexOf('/')).split('/');\n        var items = path.split('/');\n        if (normalizedBase.length >= items.length) {\n          for (i = 0, l = normalizedBase.length; i < l; i++) {\n            if (i >= items.length || normalizedBase[i] !== items[i]) {\n              breakPoint = i + 1;\n              break;\n            }\n          }\n        }\n        if (normalizedBase.length < items.length) {\n          for (i = 0, l = items.length; i < l; i++) {\n            if (i >= normalizedBase.length || normalizedBase[i] !== items[i]) {\n              breakPoint = i + 1;\n              break;\n            }\n          }\n        }\n        if (breakPoint === 1) {\n          return path;\n        }\n        for (i = 0, l = normalizedBase.length - (breakPoint - 1); i < l; i++) {\n          out += '../';\n        }\n        for (i = breakPoint - 1, l = items.length; i < l; i++) {\n          if (i !== breakPoint - 1) {\n            out += '/' + items[i];\n          } else {\n            out += items[i];\n          }\n        }\n        return out;\n      };\n      URI.prototype.toAbsPath = function (base, path) {\n        var i, nb = 0, o = [], outPath;\n        var tr = /\\/$/.test(path) ? '/' : '';\n        var normalizedBase = base.split('/');\n        var normalizedPath = path.split('/');\n        each$7(normalizedBase, function (k) {\n          if (k) {\n            o.push(k);\n          }\n        });\n        normalizedBase = o;\n        for (i = normalizedPath.length - 1, o = []; i >= 0; i--) {\n          if (normalizedPath[i].length === 0 || normalizedPath[i] === '.') {\n            continue;\n          }\n          if (normalizedPath[i] === '..') {\n            nb++;\n            continue;\n          }\n          if (nb > 0) {\n            nb--;\n            continue;\n          }\n          o.push(normalizedPath[i]);\n        }\n        i = normalizedBase.length - nb;\n        if (i <= 0) {\n          outPath = reverse(o).join('/');\n        } else {\n          outPath = normalizedBase.slice(0, i).join('/') + '/' + reverse(o).join('/');\n        }\n        if (outPath.indexOf('/') !== 0) {\n          outPath = '/' + outPath;\n        }\n        if (tr && outPath.lastIndexOf('/') !== outPath.length - 1) {\n          outPath += tr;\n        }\n        return outPath;\n      };\n      URI.prototype.getURI = function (noProtoHost) {\n        if (noProtoHost === void 0) {\n          noProtoHost = false;\n        }\n        var s;\n        if (!this.source || noProtoHost) {\n          s = '';\n          if (!noProtoHost) {\n            if (this.protocol) {\n              s += this.protocol + '://';\n            } else {\n              s += '//';\n            }\n            if (this.userInfo) {\n              s += this.userInfo + '@';\n            }\n            if (this.host) {\n              s += this.host;\n            }\n            if (this.port) {\n              s += ':' + this.port;\n            }\n          }\n          if (this.path) {\n            s += this.path;\n          }\n          if (this.query) {\n            s += '?' + this.query;\n          }\n          if (this.anchor) {\n            s += '#' + this.anchor;\n          }\n          this.source = s;\n        }\n        return this.source;\n      };\n      return URI;\n    }();\n\n    var filteredClobberElements = Tools.makeMap('button,fieldset,form,iframe,img,image,input,object,output,select,textarea');\n    var isValidPrefixAttrName = function (name) {\n      return name.indexOf('data-') === 0 || name.indexOf('aria-') === 0;\n    };\n    var lazyTempDocument = cached(function () {\n      return document.implementation.createHTMLDocument('parser');\n    });\n    var findMatchingEndTagIndex = function (schema, html, startIndex) {\n      var startTagRegExp = /<([!?\\/])?([A-Za-z0-9\\-_:.]+)/g;\n      var endTagRegExp = /(?:\\s(?:[^'\">]+(?:\"[^\"]*\"|'[^']*'))*[^\"'>]*(?:\"[^\">]*|'[^'>]*)?|\\s*|\\/)>/g;\n      var shortEndedElements = schema.getShortEndedElements();\n      var count = 1, index = startIndex;\n      while (count !== 0) {\n        startTagRegExp.lastIndex = index;\n        while (true) {\n          var startMatch = startTagRegExp.exec(html);\n          if (startMatch === null) {\n            return index;\n          } else if (startMatch[1] === '!') {\n            if (startsWith(startMatch[2], '--')) {\n              index = findCommentEndIndex(html, false, startMatch.index + '!--'.length);\n            } else {\n              index = findCommentEndIndex(html, true, startMatch.index + 1);\n            }\n            break;\n          } else {\n            endTagRegExp.lastIndex = startTagRegExp.lastIndex;\n            var endMatch = endTagRegExp.exec(html);\n            if (isNull(endMatch) || endMatch.index !== startTagRegExp.lastIndex) {\n              continue;\n            }\n            if (startMatch[1] === '/') {\n              count -= 1;\n            } else if (!has$2(shortEndedElements, startMatch[2])) {\n              count += 1;\n            }\n            index = startTagRegExp.lastIndex + endMatch[0].length;\n            break;\n          }\n        }\n      }\n      return index;\n    };\n    var isConditionalComment = function (html, startIndex) {\n      return /^\\s*\\[if [\\w\\W]+\\]>.*<!\\[endif\\](--!?)?>/.test(html.substr(startIndex));\n    };\n    var findCommentEndIndex = function (html, isBogus, startIndex) {\n      if (startIndex === void 0) {\n        startIndex = 0;\n      }\n      var lcHtml = html.toLowerCase();\n      if (lcHtml.indexOf('[if ', startIndex) !== -1 && isConditionalComment(lcHtml, startIndex)) {\n        var endIfIndex = lcHtml.indexOf('[endif]', startIndex);\n        return lcHtml.indexOf('>', endIfIndex);\n      } else {\n        if (isBogus) {\n          var endIndex = lcHtml.indexOf('>', startIndex);\n          return endIndex !== -1 ? endIndex : lcHtml.length;\n        } else {\n          var endCommentRegexp = /--!?>/g;\n          endCommentRegexp.lastIndex = startIndex;\n          var match = endCommentRegexp.exec(html);\n          return match ? match.index + match[0].length : lcHtml.length;\n        }\n      }\n    };\n    var checkBogusAttribute = function (regExp, attrString) {\n      var matches = regExp.exec(attrString);\n      if (matches) {\n        var name_1 = matches[1];\n        var value = matches[2];\n        return typeof name_1 === 'string' && name_1.toLowerCase() === 'data-mce-bogus' ? value : null;\n      } else {\n        return null;\n      }\n    };\n    var SaxParser = function (settings, schema) {\n      if (schema === void 0) {\n        schema = Schema();\n      }\n      settings = settings || {};\n      var doc = lazyTempDocument();\n      var form = doc.createElement('form');\n      if (settings.fix_self_closing !== false) {\n        settings.fix_self_closing = true;\n      }\n      var comment = settings.comment ? settings.comment : noop;\n      var cdata = settings.cdata ? settings.cdata : noop;\n      var text = settings.text ? settings.text : noop;\n      var start = settings.start ? settings.start : noop;\n      var end = settings.end ? settings.end : noop;\n      var pi = settings.pi ? settings.pi : noop;\n      var doctype = settings.doctype ? settings.doctype : noop;\n      var parseInternal = function (base64Extract, format) {\n        if (format === void 0) {\n          format = 'html';\n        }\n        var html = base64Extract.html;\n        var matches, index = 0, value, endRegExp;\n        var stack = [];\n        var attrList, i, textData, name;\n        var isInternalElement, isShortEnded;\n        var elementRule, isValidElement, attr, attribsValue, validAttributesMap, validAttributePatterns;\n        var attributesRequired, attributesDefault, attributesForced;\n        var anyAttributesRequired, attrValue, idCount = 0;\n        var decode = Entities.decode;\n        var filteredUrlAttrs = Tools.makeMap('src,href,data,background,action,formaction,poster,xlink:href');\n        var parsingMode = format === 'html' ? 0 : 1;\n        var processEndTag = function (name) {\n          var pos, i;\n          pos = stack.length;\n          while (pos--) {\n            if (stack[pos].name === name) {\n              break;\n            }\n          }\n          if (pos >= 0) {\n            for (i = stack.length - 1; i >= pos; i--) {\n              name = stack[i];\n              if (name.valid) {\n                end(name.name);\n              }\n            }\n            stack.length = pos;\n          }\n        };\n        var processText = function (value, raw) {\n          return text(restoreDataUris(value, base64Extract), raw);\n        };\n        var processComment = function (value) {\n          if (value === '') {\n            return;\n          }\n          if (value.charAt(0) === '>') {\n            value = ' ' + value;\n          }\n          if (!settings.allow_conditional_comments && value.substr(0, 3).toLowerCase() === '[if') {\n            value = ' ' + value;\n          }\n          comment(restoreDataUris(value, base64Extract));\n        };\n        var processAttr = function (value) {\n          return restoreDataUris(value, base64Extract);\n        };\n        var processMalformedComment = function (value, startIndex) {\n          var startTag = value || '';\n          var isBogus = !startsWith(startTag, '--');\n          var endIndex = findCommentEndIndex(html, isBogus, startIndex);\n          value = html.substr(startIndex, endIndex - startIndex);\n          processComment(isBogus ? startTag + value : value);\n          return endIndex + 1;\n        };\n        var parseAttribute = function (tagName, name, value, val2, val3) {\n          name = name.toLowerCase();\n          value = processAttr(name in fillAttrsMap ? name : decode(value || val2 || val3 || ''));\n          if (validate && !isInternalElement && isValidPrefixAttrName(name) === false) {\n            var attrRule = validAttributesMap[name];\n            if (!attrRule && validAttributePatterns) {\n              var i_1 = validAttributePatterns.length;\n              while (i_1--) {\n                attrRule = validAttributePatterns[i_1];\n                if (attrRule.pattern.test(name)) {\n                  break;\n                }\n              }\n              if (i_1 === -1) {\n                attrRule = null;\n              }\n            }\n            if (!attrRule) {\n              return;\n            }\n            if (attrRule.validValues && !(value in attrRule.validValues)) {\n              return;\n            }\n          }\n          var isNameOrId = name === 'name' || name === 'id';\n          if (isNameOrId && tagName in filteredClobberElements && (value in doc || value in form)) {\n            return;\n          }\n          if (filteredUrlAttrs[name] && !URI.isDomSafe(value, tagName, settings)) {\n            return;\n          }\n          if (isInternalElement && (name in filteredUrlAttrs || name.indexOf('on') === 0)) {\n            return;\n          }\n          attrList.map[name] = value;\n          attrList.push({\n            name: name,\n            value: value\n          });\n        };\n        var tokenRegExp = new RegExp('<(?:' + '(?:!--([\\\\w\\\\W]*?)--!?>)|' + '(?:!\\\\[CDATA\\\\[([\\\\w\\\\W]*?)\\\\]\\\\]>)|' + '(?:![Dd][Oo][Cc][Tt][Yy][Pp][Ee]([\\\\w\\\\W]*?)>)|' + '(?:!(--)?)|' + '(?:\\\\?([^\\\\s\\\\/<>]+) ?([\\\\w\\\\W]*?)[?/]>)|' + '(?:\\\\/([A-Za-z][A-Za-z0-9\\\\-_\\\\:\\\\.]*)>)|' + '(?:([A-Za-z][A-Za-z0-9\\\\-_:.]*)(\\\\s(?:[^\\'\">]+(?:\"[^\"]*\"|\\'[^\\']*\\'))*[^\"\\'>]*(?:\"[^\">]*|\\'[^\\'>]*)?|\\\\s*|\\\\/)>)' + ')', 'g');\n        var attrRegExp = /([\\w:\\-]+)(?:\\s*=\\s*(?:(?:\\\"((?:[^\\\"])*)\\\")|(?:\\'((?:[^\\'])*)\\')|([^>\\s]+)))?/g;\n        var shortEndedElements = schema.getShortEndedElements();\n        var selfClosing = settings.self_closing_elements || schema.getSelfClosingElements();\n        var fillAttrsMap = schema.getBoolAttrs();\n        var validate = settings.validate;\n        var removeInternalElements = settings.remove_internals;\n        var fixSelfClosing = settings.fix_self_closing;\n        var specialElements = schema.getSpecialElements();\n        var processHtml = html + '>';\n        while (matches = tokenRegExp.exec(processHtml)) {\n          var matchText = matches[0];\n          if (index < matches.index) {\n            processText(decode(html.substr(index, matches.index - index)));\n          }\n          if (value = matches[7]) {\n            value = value.toLowerCase();\n            if (value.charAt(0) === ':') {\n              value = value.substr(1);\n            }\n            processEndTag(value);\n          } else if (value = matches[8]) {\n            if (matches.index + matchText.length > html.length) {\n              processText(decode(html.substr(matches.index)));\n              index = matches.index + matchText.length;\n              continue;\n            }\n            value = value.toLowerCase();\n            if (value.charAt(0) === ':') {\n              value = value.substr(1);\n            }\n            isShortEnded = value in shortEndedElements;\n            if (fixSelfClosing && selfClosing[value] && stack.length > 0 && stack[stack.length - 1].name === value) {\n              processEndTag(value);\n            }\n            var bogusValue = checkBogusAttribute(attrRegExp, matches[9]);\n            if (bogusValue !== null) {\n              if (bogusValue === 'all') {\n                index = findMatchingEndTagIndex(schema, html, tokenRegExp.lastIndex);\n                tokenRegExp.lastIndex = index;\n                continue;\n              }\n              isValidElement = false;\n            }\n            if (!validate || (elementRule = schema.getElementRule(value))) {\n              isValidElement = true;\n              if (validate) {\n                validAttributesMap = elementRule.attributes;\n                validAttributePatterns = elementRule.attributePatterns;\n              }\n              if (attribsValue = matches[9]) {\n                isInternalElement = attribsValue.indexOf('data-mce-type') !== -1;\n                if (isInternalElement && removeInternalElements) {\n                  isValidElement = false;\n                }\n                attrList = [];\n                attrList.map = {};\n                attribsValue.replace(attrRegExp, function (match, name, val, val2, val3) {\n                  parseAttribute(value, name, val, val2, val3);\n                  return '';\n                });\n              } else {\n                attrList = [];\n                attrList.map = {};\n              }\n              if (validate && !isInternalElement) {\n                attributesRequired = elementRule.attributesRequired;\n                attributesDefault = elementRule.attributesDefault;\n                attributesForced = elementRule.attributesForced;\n                anyAttributesRequired = elementRule.removeEmptyAttrs;\n                if (anyAttributesRequired && !attrList.length) {\n                  isValidElement = false;\n                }\n                if (attributesForced) {\n                  i = attributesForced.length;\n                  while (i--) {\n                    attr = attributesForced[i];\n                    name = attr.name;\n                    attrValue = attr.value;\n                    if (attrValue === '{$uid}') {\n                      attrValue = 'mce_' + idCount++;\n                    }\n                    attrList.map[name] = attrValue;\n                    attrList.push({\n                      name: name,\n                      value: attrValue\n                    });\n                  }\n                }\n                if (attributesDefault) {\n                  i = attributesDefault.length;\n                  while (i--) {\n                    attr = attributesDefault[i];\n                    name = attr.name;\n                    if (!(name in attrList.map)) {\n                      attrValue = attr.value;\n                      if (attrValue === '{$uid}') {\n                        attrValue = 'mce_' + idCount++;\n                      }\n                      attrList.map[name] = attrValue;\n                      attrList.push({\n                        name: name,\n                        value: attrValue\n                      });\n                    }\n                  }\n                }\n                if (attributesRequired) {\n                  i = attributesRequired.length;\n                  while (i--) {\n                    if (attributesRequired[i] in attrList.map) {\n                      break;\n                    }\n                  }\n                  if (i === -1) {\n                    isValidElement = false;\n                  }\n                }\n                if (attr = attrList.map['data-mce-bogus']) {\n                  if (attr === 'all') {\n                    index = findMatchingEndTagIndex(schema, html, tokenRegExp.lastIndex);\n                    tokenRegExp.lastIndex = index;\n                    continue;\n                  }\n                  isValidElement = false;\n                }\n              }\n              if (isValidElement) {\n                start(value, attrList, isShortEnded);\n              }\n            } else {\n              isValidElement = false;\n            }\n            if (endRegExp = specialElements[value]) {\n              endRegExp.lastIndex = index = matches.index + matchText.length;\n              if (matches = endRegExp.exec(html)) {\n                if (isValidElement) {\n                  textData = html.substr(index, matches.index - index);\n                }\n                index = matches.index + matches[0].length;\n              } else {\n                textData = html.substr(index);\n                index = html.length;\n              }\n              if (isValidElement) {\n                if (textData.length > 0) {\n                  processText(textData, true);\n                }\n                end(value);\n              }\n              tokenRegExp.lastIndex = index;\n              continue;\n            }\n            if (!isShortEnded) {\n              if (!attribsValue || attribsValue.indexOf('/') !== attribsValue.length - 1) {\n                stack.push({\n                  name: value,\n                  valid: isValidElement\n                });\n              } else if (isValidElement) {\n                end(value);\n              }\n            }\n          } else if (value = matches[1]) {\n            processComment(value);\n          } else if (value = matches[2]) {\n            var isValidCdataSection = parsingMode === 1 || settings.preserve_cdata || stack.length > 0 && schema.isValidChild(stack[stack.length - 1].name, '#cdata');\n            if (isValidCdataSection) {\n              cdata(value);\n            } else {\n              index = processMalformedComment('', matches.index + 2);\n              tokenRegExp.lastIndex = index;\n              continue;\n            }\n          } else if (value = matches[3]) {\n            doctype(value);\n          } else if ((value = matches[4]) || matchText === '<!') {\n            index = processMalformedComment(value, matches.index + matchText.length);\n            tokenRegExp.lastIndex = index;\n            continue;\n          } else if (value = matches[5]) {\n            if (parsingMode === 1) {\n              pi(value, matches[6]);\n            } else {\n              index = processMalformedComment('?', matches.index + 2);\n              tokenRegExp.lastIndex = index;\n              continue;\n            }\n          }\n          index = matches.index + matchText.length;\n        }\n        if (index < html.length) {\n          processText(decode(html.substr(index)));\n        }\n        for (i = stack.length - 1; i >= 0; i--) {\n          value = stack[i];\n          if (value.valid) {\n            end(value.name);\n          }\n        }\n      };\n      var parse = function (html, format) {\n        if (format === void 0) {\n          format = 'html';\n        }\n        parseInternal(extractBase64DataUris(html), format);\n      };\n      return { parse: parse };\n    };\n    SaxParser.findEndTag = findMatchingEndTagIndex;\n\n    var makeMap = Tools.makeMap, each$6 = Tools.each, explode$2 = Tools.explode, extend$4 = Tools.extend;\n    var DomParser = function (settings, schema) {\n      if (schema === void 0) {\n        schema = Schema();\n      }\n      var nodeFilters = {};\n      var attributeFilters = [];\n      var matchedNodes = {};\n      var matchedAttributes = {};\n      settings = settings || {};\n      settings.validate = 'validate' in settings ? settings.validate : true;\n      settings.root_name = settings.root_name || 'body';\n      var fixInvalidChildren = function (nodes) {\n        var nonSplitableElements = makeMap('tr,td,th,tbody,thead,tfoot,table');\n        var nonEmptyElements = schema.getNonEmptyElements();\n        var whitespaceElements = schema.getWhiteSpaceElements();\n        var textBlockElements = schema.getTextBlockElements();\n        var specialElements = schema.getSpecialElements();\n        var removeOrUnwrapInvalidNode = function (node, originalNodeParent) {\n          if (originalNodeParent === void 0) {\n            originalNodeParent = node.parent;\n          }\n          if (specialElements[node.name]) {\n            node.empty().remove();\n          } else {\n            var children = node.children();\n            for (var _i = 0, children_1 = children; _i < children_1.length; _i++) {\n              var childNode = children_1[_i];\n              if (!schema.isValidChild(originalNodeParent.name, childNode.name)) {\n                removeOrUnwrapInvalidNode(childNode, originalNodeParent);\n              }\n            }\n            node.unwrap();\n          }\n        };\n        for (var ni = 0; ni < nodes.length; ni++) {\n          var node = nodes[ni];\n          var parent_1 = void 0, newParent = void 0, tempNode = void 0;\n          if (!node.parent || node.fixed) {\n            continue;\n          }\n          if (textBlockElements[node.name] && node.parent.name === 'li') {\n            var sibling = node.next;\n            while (sibling) {\n              if (textBlockElements[sibling.name]) {\n                sibling.name = 'li';\n                sibling.fixed = true;\n                node.parent.insert(sibling, node.parent);\n              } else {\n                break;\n              }\n              sibling = sibling.next;\n            }\n            node.unwrap();\n            continue;\n          }\n          var parents = [node];\n          for (parent_1 = node.parent; parent_1 && !schema.isValidChild(parent_1.name, node.name) && !nonSplitableElements[parent_1.name]; parent_1 = parent_1.parent) {\n            parents.push(parent_1);\n          }\n          if (parent_1 && parents.length > 1) {\n            if (schema.isValidChild(parent_1.name, node.name)) {\n              parents.reverse();\n              newParent = filterNode(parents[0].clone());\n              var currentNode = newParent;\n              for (var i = 0; i < parents.length - 1; i++) {\n                if (schema.isValidChild(currentNode.name, parents[i].name)) {\n                  tempNode = filterNode(parents[i].clone());\n                  currentNode.append(tempNode);\n                } else {\n                  tempNode = currentNode;\n                }\n                for (var childNode = parents[i].firstChild; childNode && childNode !== parents[i + 1];) {\n                  var nextNode = childNode.next;\n                  tempNode.append(childNode);\n                  childNode = nextNode;\n                }\n                currentNode = tempNode;\n              }\n              if (!isEmpty(schema, nonEmptyElements, whitespaceElements, newParent)) {\n                parent_1.insert(newParent, parents[0], true);\n                parent_1.insert(node, newParent);\n              } else {\n                parent_1.insert(node, parents[0], true);\n              }\n              parent_1 = parents[0];\n              if (isEmpty(schema, nonEmptyElements, whitespaceElements, parent_1) || hasOnlyChild(parent_1, 'br')) {\n                parent_1.empty().remove();\n              }\n            } else {\n              removeOrUnwrapInvalidNode(node);\n            }\n          } else if (node.parent) {\n            if (node.name === 'li') {\n              var sibling = node.prev;\n              if (sibling && (sibling.name === 'ul' || sibling.name === 'ol')) {\n                sibling.append(node);\n                continue;\n              }\n              sibling = node.next;\n              if (sibling && (sibling.name === 'ul' || sibling.name === 'ol')) {\n                sibling.insert(node, sibling.firstChild, true);\n                continue;\n              }\n              node.wrap(filterNode(new AstNode('ul', 1)));\n              continue;\n            }\n            if (schema.isValidChild(node.parent.name, 'div') && schema.isValidChild('div', node.name)) {\n              node.wrap(filterNode(new AstNode('div', 1)));\n            } else {\n              removeOrUnwrapInvalidNode(node);\n            }\n          }\n        }\n      };\n      var filterNode = function (node) {\n        var name = node.name;\n        if (name in nodeFilters) {\n          var list = matchedNodes[name];\n          if (list) {\n            list.push(node);\n          } else {\n            matchedNodes[name] = [node];\n          }\n        }\n        var i = attributeFilters.length;\n        while (i--) {\n          var attrName = attributeFilters[i].name;\n          if (attrName in node.attributes.map) {\n            var list = matchedAttributes[attrName];\n            if (list) {\n              list.push(node);\n            } else {\n              matchedAttributes[attrName] = [node];\n            }\n          }\n        }\n        return node;\n      };\n      var addNodeFilter = function (name, callback) {\n        each$6(explode$2(name), function (name) {\n          var list = nodeFilters[name];\n          if (!list) {\n            nodeFilters[name] = list = [];\n          }\n          list.push(callback);\n        });\n      };\n      var getNodeFilters = function () {\n        var out = [];\n        for (var name_1 in nodeFilters) {\n          if (has$2(nodeFilters, name_1)) {\n            out.push({\n              name: name_1,\n              callbacks: nodeFilters[name_1]\n            });\n          }\n        }\n        return out;\n      };\n      var addAttributeFilter = function (name, callback) {\n        each$6(explode$2(name), function (name) {\n          var i;\n          for (i = 0; i < attributeFilters.length; i++) {\n            if (attributeFilters[i].name === name) {\n              attributeFilters[i].callbacks.push(callback);\n              return;\n            }\n          }\n          attributeFilters.push({\n            name: name,\n            callbacks: [callback]\n          });\n        });\n      };\n      var getAttributeFilters = function () {\n        return [].concat(attributeFilters);\n      };\n      var parse = function (html, args) {\n        var nodes, i, l, fi, fl, list, name;\n        var invalidChildren = [];\n        var node;\n        var getRootBlockName = function (name) {\n          if (name === false) {\n            return '';\n          } else if (name === true) {\n            return 'p';\n          } else {\n            return name;\n          }\n        };\n        args = args || {};\n        matchedNodes = {};\n        matchedAttributes = {};\n        var blockElements = extend$4(makeMap('script,style,head,html,body,title,meta,param'), schema.getBlockElements());\n        var textRootBlockElements = getTextRootBlockElements(schema);\n        var nonEmptyElements = schema.getNonEmptyElements();\n        var children = schema.children;\n        var validate = settings.validate;\n        var forcedRootBlockName = 'forced_root_block' in args ? args.forced_root_block : settings.forced_root_block;\n        var rootBlockName = getRootBlockName(forcedRootBlockName);\n        var whiteSpaceElements = schema.getWhiteSpaceElements();\n        var startWhiteSpaceRegExp = /^[ \\t\\r\\n]+/;\n        var endWhiteSpaceRegExp = /[ \\t\\r\\n]+$/;\n        var allWhiteSpaceRegExp = /[ \\t\\r\\n]+/g;\n        var isAllWhiteSpaceRegExp = /^[ \\t\\r\\n]+$/;\n        var isInWhiteSpacePreservedElement = has$2(whiteSpaceElements, args.context) || has$2(whiteSpaceElements, settings.root_name);\n        var addRootBlocks = function () {\n          var node = rootNode.firstChild, rootBlockNode = null;\n          var trim = function (rootBlock) {\n            if (rootBlock) {\n              node = rootBlock.firstChild;\n              if (node && node.type === 3) {\n                node.value = node.value.replace(startWhiteSpaceRegExp, '');\n              }\n              node = rootBlock.lastChild;\n              if (node && node.type === 3) {\n                node.value = node.value.replace(endWhiteSpaceRegExp, '');\n              }\n            }\n          };\n          if (!schema.isValidChild(rootNode.name, rootBlockName.toLowerCase())) {\n            return;\n          }\n          while (node) {\n            var next = node.next;\n            if (node.type === 3 || node.type === 1 && node.name !== 'p' && !blockElements[node.name] && !node.attr('data-mce-type')) {\n              if (!rootBlockNode) {\n                rootBlockNode = createNode(rootBlockName, 1);\n                rootBlockNode.attr(settings.forced_root_block_attrs);\n                rootNode.insert(rootBlockNode, node);\n                rootBlockNode.append(node);\n              } else {\n                rootBlockNode.append(node);\n              }\n            } else {\n              trim(rootBlockNode);\n              rootBlockNode = null;\n            }\n            node = next;\n          }\n          trim(rootBlockNode);\n        };\n        var createNode = function (name, type) {\n          var node = new AstNode(name, type);\n          var list;\n          if (name in nodeFilters) {\n            list = matchedNodes[name];\n            if (list) {\n              list.push(node);\n            } else {\n              matchedNodes[name] = [node];\n            }\n          }\n          return node;\n        };\n        var removeWhitespaceBefore = function (node) {\n          var blockElements = schema.getBlockElements();\n          for (var textNode = node.prev; textNode && textNode.type === 3;) {\n            var textVal = textNode.value.replace(endWhiteSpaceRegExp, '');\n            if (textVal.length > 0) {\n              textNode.value = textVal;\n              return;\n            }\n            var textNodeNext = textNode.next;\n            if (textNodeNext) {\n              if (textNodeNext.type === 3 && textNodeNext.value.length) {\n                textNode = textNode.prev;\n                continue;\n              }\n              if (!blockElements[textNodeNext.name] && textNodeNext.name !== 'script' && textNodeNext.name !== 'style') {\n                textNode = textNode.prev;\n                continue;\n              }\n            }\n            var sibling = textNode.prev;\n            textNode.remove();\n            textNode = sibling;\n          }\n        };\n        var cloneAndExcludeBlocks = function (input) {\n          var output = {};\n          for (var name_2 in input) {\n            if (name_2 !== 'li' && name_2 !== 'p') {\n              output[name_2] = input[name_2];\n            }\n          }\n          return output;\n        };\n        var isTextRootBlockEmpty = function (node) {\n          var tempNode = node;\n          while (isNonNullable(tempNode)) {\n            if (tempNode.name in textRootBlockElements) {\n              return isEmpty(schema, nonEmptyElements, whiteSpaceElements, tempNode);\n            } else {\n              tempNode = tempNode.parent;\n            }\n          }\n          return false;\n        };\n        var parser = SaxParser({\n          validate: validate,\n          document: settings.document,\n          allow_html_data_urls: settings.allow_html_data_urls,\n          allow_svg_data_urls: settings.allow_svg_data_urls,\n          allow_script_urls: settings.allow_script_urls,\n          allow_conditional_comments: settings.allow_conditional_comments,\n          preserve_cdata: settings.preserve_cdata,\n          self_closing_elements: cloneAndExcludeBlocks(schema.getSelfClosingElements()),\n          cdata: function (text) {\n            node.append(createNode('#cdata', 4)).value = text;\n          },\n          text: function (text, raw) {\n            var textNode;\n            if (!isInWhiteSpacePreservedElement) {\n              text = text.replace(allWhiteSpaceRegExp, ' ');\n              if (isLineBreakNode(node.lastChild, blockElements)) {\n                text = text.replace(startWhiteSpaceRegExp, '');\n              }\n            }\n            if (text.length !== 0) {\n              textNode = createNode('#text', 3);\n              textNode.raw = !!raw;\n              node.append(textNode).value = text;\n            }\n          },\n          comment: function (text) {\n            node.append(createNode('#comment', 8)).value = text;\n          },\n          pi: function (name, text) {\n            node.append(createNode(name, 7)).value = text;\n            removeWhitespaceBefore(node);\n          },\n          doctype: function (text) {\n            var newNode = node.append(createNode('#doctype', 10));\n            newNode.value = text;\n            removeWhitespaceBefore(node);\n          },\n          start: function (name, attrs, empty) {\n            var elementRule = validate ? schema.getElementRule(name) : {};\n            if (elementRule) {\n              var newNode = createNode(elementRule.outputName || name, 1);\n              newNode.attributes = attrs;\n              newNode.shortEnded = empty;\n              node.append(newNode);\n              var parent_2 = children[node.name];\n              if (parent_2 && children[newNode.name] && !parent_2[newNode.name]) {\n                invalidChildren.push(newNode);\n              }\n              var attrFiltersLen = attributeFilters.length;\n              while (attrFiltersLen--) {\n                var attrName = attributeFilters[attrFiltersLen].name;\n                if (attrName in attrs.map) {\n                  list = matchedAttributes[attrName];\n                  if (list) {\n                    list.push(newNode);\n                  } else {\n                    matchedAttributes[attrName] = [newNode];\n                  }\n                }\n              }\n              if (blockElements[name]) {\n                removeWhitespaceBefore(newNode);\n              }\n              if (!empty) {\n                node = newNode;\n              }\n              if (!isInWhiteSpacePreservedElement && whiteSpaceElements[name]) {\n                isInWhiteSpacePreservedElement = true;\n              }\n            }\n          },\n          end: function (name) {\n            var textNode, text, sibling;\n            var elementRule = validate ? schema.getElementRule(name) : {};\n            if (elementRule) {\n              if (blockElements[name]) {\n                if (!isInWhiteSpacePreservedElement) {\n                  textNode = node.firstChild;\n                  if (textNode && textNode.type === 3) {\n                    text = textNode.value.replace(startWhiteSpaceRegExp, '');\n                    if (text.length > 0) {\n                      textNode.value = text;\n                      textNode = textNode.next;\n                    } else {\n                      sibling = textNode.next;\n                      textNode.remove();\n                      textNode = sibling;\n                      while (textNode && textNode.type === 3) {\n                        text = textNode.value;\n                        sibling = textNode.next;\n                        if (text.length === 0 || isAllWhiteSpaceRegExp.test(text)) {\n                          textNode.remove();\n                          textNode = sibling;\n                        }\n                        textNode = sibling;\n                      }\n                    }\n                  }\n                  textNode = node.lastChild;\n                  if (textNode && textNode.type === 3) {\n                    text = textNode.value.replace(endWhiteSpaceRegExp, '');\n                    if (text.length > 0) {\n                      textNode.value = text;\n                      textNode = textNode.prev;\n                    } else {\n                      sibling = textNode.prev;\n                      textNode.remove();\n                      textNode = sibling;\n                      while (textNode && textNode.type === 3) {\n                        text = textNode.value;\n                        sibling = textNode.prev;\n                        if (text.length === 0 || isAllWhiteSpaceRegExp.test(text)) {\n                          textNode.remove();\n                          textNode = sibling;\n                        }\n                        textNode = sibling;\n                      }\n                    }\n                  }\n                }\n              }\n              if (isInWhiteSpacePreservedElement && whiteSpaceElements[name]) {\n                isInWhiteSpacePreservedElement = false;\n              }\n              var isNodeEmpty = isEmpty(schema, nonEmptyElements, whiteSpaceElements, node);\n              var parentNode = node.parent;\n              if (elementRule.paddInEmptyBlock && isNodeEmpty && isTextRootBlockEmpty(node)) {\n                paddEmptyNode(settings, args, blockElements, node);\n              } else if (elementRule.removeEmpty && isNodeEmpty) {\n                if (blockElements[node.name]) {\n                  node.empty().remove();\n                } else {\n                  node.unwrap();\n                }\n              } else if (elementRule.paddEmpty && (isPaddedWithNbsp(node) || isNodeEmpty)) {\n                paddEmptyNode(settings, args, blockElements, node);\n              }\n              node = parentNode;\n            }\n          }\n        }, schema);\n        var rootNode = node = new AstNode(args.context || settings.root_name, 11);\n        parser.parse(html, args.format);\n        if (validate && invalidChildren.length) {\n          if (!args.context) {\n            fixInvalidChildren(invalidChildren);\n          } else {\n            args.invalid = true;\n          }\n        }\n        if (rootBlockName && (rootNode.name === 'body' || args.isRootContent)) {\n          addRootBlocks();\n        }\n        if (!args.invalid) {\n          for (name in matchedNodes) {\n            if (!has$2(matchedNodes, name)) {\n              continue;\n            }\n            list = nodeFilters[name];\n            nodes = matchedNodes[name];\n            fi = nodes.length;\n            while (fi--) {\n              if (!nodes[fi].parent) {\n                nodes.splice(fi, 1);\n              }\n            }\n            for (i = 0, l = list.length; i < l; i++) {\n              list[i](nodes, name, args);\n            }\n          }\n          for (i = 0, l = attributeFilters.length; i < l; i++) {\n            list = attributeFilters[i];\n            if (list.name in matchedAttributes) {\n              nodes = matchedAttributes[list.name];\n              fi = nodes.length;\n              while (fi--) {\n                if (!nodes[fi].parent) {\n                  nodes.splice(fi, 1);\n                }\n              }\n              for (fi = 0, fl = list.callbacks.length; fi < fl; fi++) {\n                list.callbacks[fi](nodes, list.name, args);\n              }\n            }\n          }\n        }\n        return rootNode;\n      };\n      var exports = {\n        schema: schema,\n        addAttributeFilter: addAttributeFilter,\n        getAttributeFilters: getAttributeFilters,\n        addNodeFilter: addNodeFilter,\n        getNodeFilters: getNodeFilters,\n        filterNode: filterNode,\n        parse: parse\n      };\n      register$1(exports, settings);\n      register$2(exports, settings);\n      return exports;\n    };\n\n    var register = function (htmlParser, settings, dom) {\n      htmlParser.addAttributeFilter('data-mce-tabindex', function (nodes, name) {\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          node.attr('tabindex', node.attr('data-mce-tabindex'));\n          node.attr(name, null);\n        }\n      });\n      htmlParser.addAttributeFilter('src,href,style', function (nodes, name) {\n        var internalName = 'data-mce-' + name;\n        var urlConverter = settings.url_converter;\n        var urlConverterScope = settings.url_converter_scope;\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          var value = node.attr(internalName);\n          if (value !== undefined) {\n            node.attr(name, value.length > 0 ? value : null);\n            node.attr(internalName, null);\n          } else {\n            value = node.attr(name);\n            if (name === 'style') {\n              value = dom.serializeStyle(dom.parseStyle(value), node.name);\n            } else if (urlConverter) {\n              value = urlConverter.call(urlConverterScope, value, name, node.name);\n            }\n            node.attr(name, value.length > 0 ? value : null);\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('class', function (nodes) {\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          var value = node.attr('class');\n          if (value) {\n            value = node.attr('class').replace(/(?:^|\\s)mce-item-\\w+(?!\\S)/g, '');\n            node.attr('class', value.length > 0 ? value : null);\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('data-mce-type', function (nodes, name, args) {\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          if (node.attr('data-mce-type') === 'bookmark' && !args.cleanup) {\n            var hasChildren = Optional.from(node.firstChild).exists(function (firstChild) {\n              return !isZwsp(firstChild.value);\n            });\n            if (hasChildren) {\n              node.unwrap();\n            } else {\n              node.remove();\n            }\n          }\n        }\n      });\n      htmlParser.addNodeFilter('noscript', function (nodes) {\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i].firstChild;\n          if (node) {\n            node.value = Entities.decode(node.value);\n          }\n        }\n      });\n      htmlParser.addNodeFilter('script,style', function (nodes, name) {\n        var trim = function (value) {\n          return value.replace(/(<!--\\[CDATA\\[|\\]\\]-->)/g, '\\n').replace(/^[\\r\\n]*|[\\r\\n]*$/g, '').replace(/^\\s*((<!--)?(\\s*\\/\\/)?\\s*<!\\[CDATA\\[|(<!--\\s*)?\\/\\*\\s*<!\\[CDATA\\[\\s*\\*\\/|(\\/\\/)?\\s*<!--|\\/\\*\\s*<!--\\s*\\*\\/)\\s*[\\r\\n]*/gi, '').replace(/\\s*(\\/\\*\\s*\\]\\]>\\s*\\*\\/(-->)?|\\s*\\/\\/\\s*\\]\\]>(-->)?|\\/\\/\\s*(-->)?|\\]\\]>|\\/\\*\\s*-->\\s*\\*\\/|\\s*-->\\s*)\\s*$/g, '');\n        };\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          var value = node.firstChild ? node.firstChild.value : '';\n          if (name === 'script') {\n            var type = node.attr('type');\n            if (type) {\n              node.attr('type', type === 'mce-no/type' ? null : type.replace(/^mce\\-/, ''));\n            }\n            if (settings.element_format === 'xhtml' && value.length > 0) {\n              node.firstChild.value = '// <![CDATA[\\n' + trim(value) + '\\n// ]]>';\n            }\n          } else {\n            if (settings.element_format === 'xhtml' && value.length > 0) {\n              node.firstChild.value = '<!--\\n' + trim(value) + '\\n-->';\n            }\n          }\n        }\n      });\n      htmlParser.addNodeFilter('#comment', function (nodes) {\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          if (settings.preserve_cdata && node.value.indexOf('[CDATA[') === 0) {\n            node.name = '#cdata';\n            node.type = 4;\n            node.value = dom.decode(node.value.replace(/^\\[CDATA\\[|\\]\\]$/g, ''));\n          } else if (node.value.indexOf('mce:protected ') === 0) {\n            node.name = '#text';\n            node.type = 3;\n            node.raw = true;\n            node.value = unescape(node.value).substr(14);\n          }\n        }\n      });\n      htmlParser.addNodeFilter('xml:namespace,input', function (nodes, name) {\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          if (node.type === 7) {\n            node.remove();\n          } else if (node.type === 1) {\n            if (name === 'input' && !node.attr('type')) {\n              node.attr('type', 'text');\n            }\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('data-mce-type', function (nodes) {\n        each$k(nodes, function (node) {\n          if (node.attr('data-mce-type') === 'format-caret') {\n            if (node.isEmpty(htmlParser.schema.getNonEmptyElements())) {\n              node.remove();\n            } else {\n              node.unwrap();\n            }\n          }\n        });\n      });\n      htmlParser.addAttributeFilter('data-mce-src,data-mce-href,data-mce-style,' + 'data-mce-selected,data-mce-expando,' + 'data-mce-type,data-mce-resize,data-mce-placeholder', function (nodes, name) {\n        var i = nodes.length;\n        while (i--) {\n          nodes[i].attr(name, null);\n        }\n      });\n    };\n    var trimTrailingBr = function (rootNode) {\n      var isBr = function (node) {\n        return node && node.name === 'br';\n      };\n      var brNode1 = rootNode.lastChild;\n      if (isBr(brNode1)) {\n        var brNode2 = brNode1.prev;\n        if (isBr(brNode2)) {\n          brNode1.remove();\n          brNode2.remove();\n        }\n      }\n    };\n\n    var preProcess = function (editor, node, args) {\n      var oldDoc;\n      var dom = editor.dom;\n      var clonedNode = node.cloneNode(true);\n      var impl = document.implementation;\n      if (impl.createHTMLDocument) {\n        var doc_1 = impl.createHTMLDocument('');\n        Tools.each(clonedNode.nodeName === 'BODY' ? clonedNode.childNodes : [clonedNode], function (node) {\n          doc_1.body.appendChild(doc_1.importNode(node, true));\n        });\n        if (clonedNode.nodeName !== 'BODY') {\n          clonedNode = doc_1.body.firstChild;\n        } else {\n          clonedNode = doc_1.body;\n        }\n        oldDoc = dom.doc;\n        dom.doc = doc_1;\n      }\n      firePreProcess(editor, __assign(__assign({}, args), { node: clonedNode }));\n      if (oldDoc) {\n        dom.doc = oldDoc;\n      }\n      return clonedNode;\n    };\n    var shouldFireEvent = function (editor, args) {\n      return editor && editor.hasEventListeners('PreProcess') && !args.no_events;\n    };\n    var process = function (editor, node, args) {\n      return shouldFireEvent(editor, args) ? preProcess(editor, node, args) : node;\n    };\n\n    var addTempAttr = function (htmlParser, tempAttrs, name) {\n      if (Tools.inArray(tempAttrs, name) === -1) {\n        htmlParser.addAttributeFilter(name, function (nodes, name) {\n          var i = nodes.length;\n          while (i--) {\n            nodes[i].attr(name, null);\n          }\n        });\n        tempAttrs.push(name);\n      }\n    };\n    var postProcess = function (editor, args, content) {\n      if (!args.no_events && editor) {\n        var outArgs = firePostProcess(editor, __assign(__assign({}, args), { content: content }));\n        return outArgs.content;\n      } else {\n        return content;\n      }\n    };\n    var getHtmlFromNode = function (dom, node, args) {\n      var html = trim$3(args.getInner ? node.innerHTML : dom.getOuterHTML(node));\n      return args.selection || isWsPreserveElement(SugarElement.fromDom(node)) ? html : Tools.trim(html);\n    };\n    var parseHtml = function (htmlParser, html, args) {\n      var parserArgs = args.selection ? __assign({ forced_root_block: false }, args) : args;\n      var rootNode = htmlParser.parse(html, parserArgs);\n      trimTrailingBr(rootNode);\n      return rootNode;\n    };\n    var serializeNode = function (settings, schema, node) {\n      var htmlSerializer = HtmlSerializer(settings, schema);\n      return htmlSerializer.serialize(node);\n    };\n    var toHtml = function (editor, settings, schema, rootNode, args) {\n      var content = serializeNode(settings, schema, rootNode);\n      return postProcess(editor, args, content);\n    };\n    var DomSerializerImpl = function (settings, editor) {\n      var tempAttrs = ['data-mce-selected'];\n      var dom = editor && editor.dom ? editor.dom : DOMUtils.DOM;\n      var schema = editor && editor.schema ? editor.schema : Schema(settings);\n      settings.entity_encoding = settings.entity_encoding || 'named';\n      settings.remove_trailing_brs = 'remove_trailing_brs' in settings ? settings.remove_trailing_brs : true;\n      var htmlParser = DomParser(settings, schema);\n      register(htmlParser, settings, dom);\n      var serialize = function (node, parserArgs) {\n        if (parserArgs === void 0) {\n          parserArgs = {};\n        }\n        var args = __assign({ format: 'html' }, parserArgs);\n        var targetNode = process(editor, node, args);\n        var html = getHtmlFromNode(dom, targetNode, args);\n        var rootNode = parseHtml(htmlParser, html, args);\n        return args.format === 'tree' ? rootNode : toHtml(editor, settings, schema, rootNode, args);\n      };\n      return {\n        schema: schema,\n        addNodeFilter: htmlParser.addNodeFilter,\n        addAttributeFilter: htmlParser.addAttributeFilter,\n        serialize: serialize,\n        addRules: schema.addValidElements,\n        setRules: schema.setValidElements,\n        addTempAttr: curry(addTempAttr, htmlParser, tempAttrs),\n        getTempAttrs: constant(tempAttrs),\n        getNodeFilters: htmlParser.getNodeFilters,\n        getAttributeFilters: htmlParser.getAttributeFilters\n      };\n    };\n\n    var DomSerializer = function (settings, editor) {\n      var domSerializer = DomSerializerImpl(settings, editor);\n      return {\n        schema: domSerializer.schema,\n        addNodeFilter: domSerializer.addNodeFilter,\n        addAttributeFilter: domSerializer.addAttributeFilter,\n        serialize: domSerializer.serialize,\n        addRules: domSerializer.addRules,\n        setRules: domSerializer.setRules,\n        addTempAttr: domSerializer.addTempAttr,\n        getTempAttrs: domSerializer.getTempAttrs,\n        getNodeFilters: domSerializer.getNodeFilters,\n        getAttributeFilters: domSerializer.getAttributeFilters\n      };\n    };\n\n    var defaultFormat = 'html';\n    var getContent = function (editor, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      var format = args.format ? args.format : defaultFormat;\n      return getContent$2(editor, args, format);\n    };\n\n    var setContent = function (editor, content, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      return setContent$2(editor, content, args);\n    };\n\n    var DOM$7 = DOMUtils.DOM;\n    var restoreOriginalStyles = function (editor) {\n      DOM$7.setStyle(editor.id, 'display', editor.orgDisplay);\n    };\n    var safeDestroy = function (x) {\n      return Optional.from(x).each(function (x) {\n        return x.destroy();\n      });\n    };\n    var clearDomReferences = function (editor) {\n      editor.contentAreaContainer = editor.formElement = editor.container = editor.editorContainer = null;\n      editor.bodyElement = editor.contentDocument = editor.contentWindow = null;\n      editor.iframeElement = editor.targetElm = null;\n      if (editor.selection) {\n        editor.selection = editor.selection.win = editor.selection.dom = editor.selection.dom.doc = null;\n      }\n    };\n    var restoreForm = function (editor) {\n      var form = editor.formElement;\n      if (form) {\n        if (form._mceOldSubmit) {\n          form.submit = form._mceOldSubmit;\n          form._mceOldSubmit = null;\n        }\n        DOM$7.unbind(form, 'submit reset', editor.formEventDelegate);\n      }\n    };\n    var remove = function (editor) {\n      if (!editor.removed) {\n        var _selectionOverrides = editor._selectionOverrides, editorUpload = editor.editorUpload;\n        var body = editor.getBody();\n        var element = editor.getElement();\n        if (body) {\n          editor.save({ is_removing: true });\n        }\n        editor.removed = true;\n        editor.unbindAllNativeEvents();\n        if (editor.hasHiddenInput && element) {\n          DOM$7.remove(element.nextSibling);\n        }\n        fireRemove(editor);\n        editor.editorManager.remove(editor);\n        if (!editor.inline && body) {\n          restoreOriginalStyles(editor);\n        }\n        fireDetach(editor);\n        DOM$7.remove(editor.getContainer());\n        safeDestroy(_selectionOverrides);\n        safeDestroy(editorUpload);\n        editor.destroy();\n      }\n    };\n    var destroy = function (editor, automatic) {\n      var selection = editor.selection, dom = editor.dom;\n      if (editor.destroyed) {\n        return;\n      }\n      if (!automatic && !editor.removed) {\n        editor.remove();\n        return;\n      }\n      if (!automatic) {\n        editor.editorManager.off('beforeunload', editor._beforeUnload);\n        if (editor.theme && editor.theme.destroy) {\n          editor.theme.destroy();\n        }\n        safeDestroy(selection);\n        safeDestroy(dom);\n      }\n      restoreForm(editor);\n      clearDomReferences(editor);\n      editor.destroyed = true;\n    };\n\n    var deep = function (old, nu) {\n      var bothObjects = isObject(old) && isObject(nu);\n      return bothObjects ? deepMerge(old, nu) : nu;\n    };\n    var baseMerge = function (merger) {\n      return function () {\n        var objects = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          objects[_i] = arguments[_i];\n        }\n        if (objects.length === 0) {\n          throw new Error('Can\\'t merge zero objects');\n        }\n        var ret = {};\n        for (var j = 0; j < objects.length; j++) {\n          var curObject = objects[j];\n          for (var key in curObject) {\n            if (has$2(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    var deepMerge = baseMerge(deep);\n\n    var deprecatedSettings = ('autoresize_on_init,content_editable_state,convert_fonts_to_spans,inline_styles,padd_empty_with_br,block_elements,' + 'boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,' + 'force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,' + 'non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,' + 'tab_focus,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,' + 'paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists').split(',');\n    var deprecatedPlugins = 'bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor'.split(',');\n    var movedToPremiumPlugins = 'imagetools,toc'.split(',');\n    var getDeprecatedSettings = function (settings) {\n      var settingNames = filter$4(deprecatedSettings, function (setting) {\n        return has$2(settings, setting);\n      });\n      var forcedRootBlock = settings.forced_root_block;\n      if (forcedRootBlock === false || forcedRootBlock === '') {\n        settingNames.push('forced_root_block (false only)');\n      }\n      return sort(settingNames);\n    };\n    var getDeprecatedPlugins = function (settings) {\n      var plugins = Tools.makeMap(settings.plugins, ' ');\n      var hasPlugin = function (plugin) {\n        return has$2(plugins, plugin);\n      };\n      var pluginNames = __spreadArray(__spreadArray([], filter$4(deprecatedPlugins, hasPlugin), true), bind(movedToPremiumPlugins, function (plugin) {\n        return hasPlugin(plugin) ? [plugin + ' (moving to premium)'] : [];\n      }), true);\n      return sort(pluginNames);\n    };\n    var logDeprecationsWarning = function (rawSettings, finalSettings) {\n      var deprecatedSettings = getDeprecatedSettings(rawSettings);\n      var deprecatedPlugins = getDeprecatedPlugins(finalSettings);\n      var hasDeprecatedPlugins = deprecatedPlugins.length > 0;\n      var hasDeprecatedSettings = deprecatedSettings.length > 0;\n      var isLegacyMobileTheme = finalSettings.theme === 'mobile';\n      if (hasDeprecatedPlugins || hasDeprecatedSettings || isLegacyMobileTheme) {\n        var listJoiner = '\\n- ';\n        var themesMessage = isLegacyMobileTheme ? '\\n\\nThemes:' + listJoiner + 'mobile' : '';\n        var pluginsMessage = hasDeprecatedPlugins ? '\\n\\nPlugins:' + listJoiner + deprecatedPlugins.join(listJoiner) : '';\n        var settingsMessage = hasDeprecatedSettings ? '\\n\\nSettings:' + listJoiner + deprecatedSettings.join(listJoiner) : '';\n        console.warn('The following deprecated features are currently enabled, these will be removed in TinyMCE 6.0. ' + 'See https://www.tiny.cloud/docs/release-notes/6.0-upcoming-changes/ for more information.' + themesMessage + pluginsMessage + settingsMessage);\n      }\n    };\n\n    var sectionResult = function (sections, settings) {\n      return {\n        sections: constant(sections),\n        settings: constant(settings)\n      };\n    };\n    var deviceDetection = detect().deviceType;\n    var isTouch = deviceDetection.isTouch();\n    var isPhone = deviceDetection.isPhone();\n    var isTablet = deviceDetection.isTablet();\n    var legacyMobilePlugins = [\n      'lists',\n      'autolink',\n      'autosave'\n    ];\n    var defaultTouchSettings = {\n      table_grid: false,\n      object_resizing: false,\n      resize: false\n    };\n    var normalizePlugins = function (plugins) {\n      var pluginNames = isArray$1(plugins) ? plugins.join(' ') : plugins;\n      var trimmedPlugins = map$3(isString$1(pluginNames) ? pluginNames.split(' ') : [], trim$5);\n      return filter$4(trimmedPlugins, function (item) {\n        return item.length > 0;\n      });\n    };\n    var filterLegacyMobilePlugins = function (plugins) {\n      return filter$4(plugins, curry(contains$3, legacyMobilePlugins));\n    };\n    var extractSections = function (keys, settings) {\n      var result = bifilter(settings, function (value, key) {\n        return contains$3(keys, key);\n      });\n      return sectionResult(result.t, result.f);\n    };\n    var getSection = function (sectionResult, name, defaults) {\n      if (defaults === void 0) {\n        defaults = {};\n      }\n      var sections = sectionResult.sections();\n      var sectionSettings = get$9(sections, name).getOr({});\n      return Tools.extend({}, defaults, sectionSettings);\n    };\n    var hasSection = function (sectionResult, name) {\n      return has$2(sectionResult.sections(), name);\n    };\n    var isSectionTheme = function (sectionResult, name, theme) {\n      var section = sectionResult.sections();\n      return hasSection(sectionResult, name) && section[name].theme === theme;\n    };\n    var getSectionConfig = function (sectionResult, name) {\n      return hasSection(sectionResult, name) ? sectionResult.sections()[name] : {};\n    };\n    var getToolbarMode = function (settings, defaultVal) {\n      return get$9(settings, 'toolbar_mode').orThunk(function () {\n        return get$9(settings, 'toolbar_drawer').map(function (val) {\n          return val === false ? 'wrap' : val;\n        });\n      }).getOr(defaultVal);\n    };\n    var getDefaultSettings = function (settings, id, documentBaseUrl, isTouch, editor) {\n      var baseDefaults = {\n        id: id,\n        theme: 'silver',\n        toolbar_mode: getToolbarMode(settings, 'floating'),\n        plugins: '',\n        document_base_url: documentBaseUrl,\n        add_form_submit_trigger: true,\n        submit_patch: true,\n        add_unload_trigger: true,\n        convert_urls: true,\n        relative_urls: true,\n        remove_script_host: true,\n        object_resizing: true,\n        doctype: '<!DOCTYPE html>',\n        visual: true,\n        font_size_legacy_values: 'xx-small,small,medium,large,x-large,xx-large,300%',\n        forced_root_block: 'p',\n        hidden_input: true,\n        inline_styles: true,\n        convert_fonts_to_spans: true,\n        indent: true,\n        indent_before: 'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,' + 'tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist',\n        indent_after: 'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,' + 'tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist',\n        entity_encoding: 'named',\n        url_converter: editor.convertURL,\n        url_converter_scope: editor\n      };\n      return __assign(__assign({}, baseDefaults), isTouch ? defaultTouchSettings : {});\n    };\n    var getDefaultMobileSettings = function (mobileSettings, isPhone) {\n      var defaultMobileSettings = {\n        resize: false,\n        toolbar_mode: getToolbarMode(mobileSettings, 'scrolling'),\n        toolbar_sticky: false\n      };\n      var defaultPhoneSettings = { menubar: false };\n      return __assign(__assign(__assign({}, defaultTouchSettings), defaultMobileSettings), isPhone ? defaultPhoneSettings : {});\n    };\n    var getExternalPlugins = function (overrideSettings, settings) {\n      var userDefinedExternalPlugins = settings.external_plugins ? settings.external_plugins : {};\n      if (overrideSettings && overrideSettings.external_plugins) {\n        return Tools.extend({}, overrideSettings.external_plugins, userDefinedExternalPlugins);\n      } else {\n        return userDefinedExternalPlugins;\n      }\n    };\n    var combinePlugins = function (forcedPlugins, plugins) {\n      return [].concat(normalizePlugins(forcedPlugins)).concat(normalizePlugins(plugins));\n    };\n    var getPlatformPlugins = function (isMobileDevice, sectionResult, desktopPlugins, mobilePlugins) {\n      if (isMobileDevice && isSectionTheme(sectionResult, 'mobile', 'mobile')) {\n        return filterLegacyMobilePlugins(mobilePlugins);\n      } else if (isMobileDevice && hasSection(sectionResult, 'mobile')) {\n        return mobilePlugins;\n      } else {\n        return desktopPlugins;\n      }\n    };\n    var processPlugins = function (isMobileDevice, sectionResult, defaultOverrideSettings, settings) {\n      var forcedPlugins = normalizePlugins(defaultOverrideSettings.forced_plugins);\n      var desktopPlugins = normalizePlugins(settings.plugins);\n      var mobileConfig = getSectionConfig(sectionResult, 'mobile');\n      var mobilePlugins = mobileConfig.plugins ? normalizePlugins(mobileConfig.plugins) : desktopPlugins;\n      var platformPlugins = getPlatformPlugins(isMobileDevice, sectionResult, desktopPlugins, mobilePlugins);\n      var combinedPlugins = combinePlugins(forcedPlugins, platformPlugins);\n      if (Env.browser.isIE() && contains$3(combinedPlugins, 'rtc')) {\n        throw new Error('RTC plugin is not supported on IE 11.');\n      }\n      return Tools.extend(settings, { plugins: combinedPlugins.join(' ') });\n    };\n    var isOnMobile = function (isMobileDevice, sectionResult) {\n      return isMobileDevice && hasSection(sectionResult, 'mobile');\n    };\n    var combineSettings = function (isMobileDevice, isPhone, defaultSettings, defaultOverrideSettings, settings) {\n      var defaultDeviceSettings = isMobileDevice ? { mobile: getDefaultMobileSettings(settings.mobile || {}, isPhone) } : {};\n      var sectionResult = extractSections(['mobile'], deepMerge(defaultDeviceSettings, settings));\n      var extendedSettings = Tools.extend(defaultSettings, defaultOverrideSettings, sectionResult.settings(), isOnMobile(isMobileDevice, sectionResult) ? getSection(sectionResult, 'mobile') : {}, {\n        validate: true,\n        external_plugins: getExternalPlugins(defaultOverrideSettings, sectionResult.settings())\n      });\n      return processPlugins(isMobileDevice, sectionResult, defaultOverrideSettings, extendedSettings);\n    };\n    var getEditorSettings = function (editor, id, documentBaseUrl, defaultOverrideSettings, settings) {\n      var defaultSettings = getDefaultSettings(settings, id, documentBaseUrl, isTouch, editor);\n      var finalSettings = combineSettings(isPhone || isTablet, isPhone, defaultSettings, defaultOverrideSettings, settings);\n      if (finalSettings.deprecation_warnings !== false) {\n        logDeprecationsWarning(settings, finalSettings);\n      }\n      return finalSettings;\n    };\n    var getFiltered = function (predicate, editor, name) {\n      return Optional.from(editor.settings[name]).filter(predicate);\n    };\n    var getParamObject = function (value) {\n      var output = {};\n      if (typeof value === 'string') {\n        each$k(value.indexOf('=') > 0 ? value.split(/[;,](?![^=;,]*(?:[;,]|$))/) : value.split(','), function (val) {\n          var arr = val.split('=');\n          if (arr.length > 1) {\n            output[Tools.trim(arr[0])] = Tools.trim(arr[1]);\n          } else {\n            output[Tools.trim(arr[0])] = Tools.trim(arr[0]);\n          }\n        });\n      } else {\n        output = value;\n      }\n      return output;\n    };\n    var isArrayOf = function (p) {\n      return function (a) {\n        return isArray$1(a) && forall(a, p);\n      };\n    };\n    var getParam = function (editor, name, defaultVal, type) {\n      var value = name in editor.settings ? editor.settings[name] : defaultVal;\n      if (type === 'hash') {\n        return getParamObject(value);\n      } else if (type === 'string') {\n        return getFiltered(isString$1, editor, name).getOr(defaultVal);\n      } else if (type === 'number') {\n        return getFiltered(isNumber, editor, name).getOr(defaultVal);\n      } else if (type === 'boolean') {\n        return getFiltered(isBoolean, editor, name).getOr(defaultVal);\n      } else if (type === 'object') {\n        return getFiltered(isObject, editor, name).getOr(defaultVal);\n      } else if (type === 'array') {\n        return getFiltered(isArray$1, editor, name).getOr(defaultVal);\n      } else if (type === 'string[]') {\n        return getFiltered(isArrayOf(isString$1), editor, name).getOr(defaultVal);\n      } else if (type === 'function') {\n        return getFiltered(isFunction, editor, name).getOr(defaultVal);\n      } else {\n        return value;\n      }\n    };\n\n    var CreateIconManager = function () {\n      var lookup = {};\n      var add = function (id, iconPack) {\n        lookup[id] = iconPack;\n      };\n      var get = function (id) {\n        if (lookup[id]) {\n          return lookup[id];\n        }\n        return { icons: {} };\n      };\n      var has = function (id) {\n        return has$2(lookup, id);\n      };\n      return {\n        add: add,\n        get: get,\n        has: has\n      };\n    };\n    var IconManager = CreateIconManager();\n\n    var getProp = function (propName, elm) {\n      var rawElm = elm.dom;\n      return rawElm[propName];\n    };\n    var getComputedSizeProp = function (propName, elm) {\n      return parseInt(get$5(elm, propName), 10);\n    };\n    var getClientWidth = curry(getProp, 'clientWidth');\n    var getClientHeight = curry(getProp, 'clientHeight');\n    var getMarginTop = curry(getComputedSizeProp, 'margin-top');\n    var getMarginLeft = curry(getComputedSizeProp, 'margin-left');\n    var getBoundingClientRect = function (elm) {\n      return elm.dom.getBoundingClientRect();\n    };\n    var isInsideElementContentArea = function (bodyElm, clientX, clientY) {\n      var clientWidth = getClientWidth(bodyElm);\n      var clientHeight = getClientHeight(bodyElm);\n      return clientX >= 0 && clientY >= 0 && clientX <= clientWidth && clientY <= clientHeight;\n    };\n    var transpose = function (inline, elm, clientX, clientY) {\n      var clientRect = getBoundingClientRect(elm);\n      var deltaX = inline ? clientRect.left + elm.dom.clientLeft + getMarginLeft(elm) : 0;\n      var deltaY = inline ? clientRect.top + elm.dom.clientTop + getMarginTop(elm) : 0;\n      var x = clientX - deltaX;\n      var y = clientY - deltaY;\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var isXYInContentArea = function (editor, clientX, clientY) {\n      var bodyElm = SugarElement.fromDom(editor.getBody());\n      var targetElm = editor.inline ? bodyElm : documentElement(bodyElm);\n      var transposedPoint = transpose(editor.inline, targetElm, clientX, clientY);\n      return isInsideElementContentArea(targetElm, transposedPoint.x, transposedPoint.y);\n    };\n    var fromDomSafe = function (node) {\n      return Optional.from(node).map(SugarElement.fromDom);\n    };\n    var isEditorAttachedToDom = function (editor) {\n      var rawContainer = editor.inline ? editor.getBody() : editor.getContentAreaContainer();\n      return fromDomSafe(rawContainer).map(inBody).getOr(false);\n    };\n\n    var NotificationManagerImpl = function () {\n      var unimplemented = function () {\n        throw new Error('Theme did not provide a NotificationManager implementation.');\n      };\n      return {\n        open: unimplemented,\n        close: unimplemented,\n        reposition: unimplemented,\n        getArgs: unimplemented\n      };\n    };\n\n    var NotificationManager = function (editor) {\n      var notifications = [];\n      var getImplementation = function () {\n        var theme = editor.theme;\n        return theme && theme.getNotificationManagerImpl ? theme.getNotificationManagerImpl() : NotificationManagerImpl();\n      };\n      var getTopNotification = function () {\n        return Optional.from(notifications[0]);\n      };\n      var isEqual = function (a, b) {\n        return a.type === b.type && a.text === b.text && !a.progressBar && !a.timeout && !b.progressBar && !b.timeout;\n      };\n      var reposition = function () {\n        if (notifications.length > 0) {\n          getImplementation().reposition(notifications);\n        }\n      };\n      var addNotification = function (notification) {\n        notifications.push(notification);\n      };\n      var closeNotification = function (notification) {\n        findIndex$2(notifications, function (otherNotification) {\n          return otherNotification === notification;\n        }).each(function (index) {\n          notifications.splice(index, 1);\n        });\n      };\n      var open = function (spec, fireEvent) {\n        if (fireEvent === void 0) {\n          fireEvent = true;\n        }\n        if (editor.removed || !isEditorAttachedToDom(editor)) {\n          return;\n        }\n        if (fireEvent) {\n          editor.fire('BeforeOpenNotification', { notification: spec });\n        }\n        return find$3(notifications, function (notification) {\n          return isEqual(getImplementation().getArgs(notification), spec);\n        }).getOrThunk(function () {\n          editor.editorManager.setActive(editor);\n          var notification = getImplementation().open(spec, function () {\n            closeNotification(notification);\n            reposition();\n            getTopNotification().fold(function () {\n              return editor.focus();\n            }, function (top) {\n              return focus$1(SugarElement.fromDom(top.getEl()));\n            });\n          });\n          addNotification(notification);\n          reposition();\n          editor.fire('OpenNotification', { notification: __assign({}, notification) });\n          return notification;\n        });\n      };\n      var close = function () {\n        getTopNotification().each(function (notification) {\n          getImplementation().close(notification);\n          closeNotification(notification);\n          reposition();\n        });\n      };\n      var getNotifications = constant(notifications);\n      var registerEvents = function (editor) {\n        editor.on('SkinLoaded', function () {\n          var serviceMessage = getServiceMessage(editor);\n          if (serviceMessage) {\n            open({\n              text: serviceMessage,\n              type: 'warning',\n              timeout: 0\n            }, false);\n          }\n          reposition();\n        });\n        editor.on('show ResizeEditor ResizeWindow NodeChange', function () {\n          Delay.requestAnimationFrame(reposition);\n        });\n        editor.on('remove', function () {\n          each$k(notifications.slice(), function (notification) {\n            getImplementation().close(notification);\n          });\n        });\n      };\n      registerEvents(editor);\n      return {\n        open: open,\n        close: close,\n        getNotifications: getNotifications\n      };\n    };\n\n    var PluginManager = AddOnManager.PluginManager;\n\n    var ThemeManager = AddOnManager.ThemeManager;\n\n    function WindowManagerImpl () {\n      var unimplemented = function () {\n        throw new Error('Theme did not provide a WindowManager implementation.');\n      };\n      return {\n        open: unimplemented,\n        openUrl: unimplemented,\n        alert: unimplemented,\n        confirm: unimplemented,\n        close: unimplemented,\n        getParams: unimplemented,\n        setParams: unimplemented\n      };\n    }\n\n    var WindowManager = function (editor) {\n      var dialogs = [];\n      var getImplementation = function () {\n        var theme = editor.theme;\n        return theme && theme.getWindowManagerImpl ? theme.getWindowManagerImpl() : WindowManagerImpl();\n      };\n      var funcBind = function (scope, f) {\n        return function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          return f ? f.apply(scope, args) : undefined;\n        };\n      };\n      var fireOpenEvent = function (dialog) {\n        editor.fire('OpenWindow', { dialog: dialog });\n      };\n      var fireCloseEvent = function (dialog) {\n        editor.fire('CloseWindow', { dialog: dialog });\n      };\n      var addDialog = function (dialog) {\n        dialogs.push(dialog);\n        fireOpenEvent(dialog);\n      };\n      var closeDialog = function (dialog) {\n        fireCloseEvent(dialog);\n        dialogs = filter$4(dialogs, function (otherDialog) {\n          return otherDialog !== dialog;\n        });\n        if (dialogs.length === 0) {\n          editor.focus();\n        }\n      };\n      var getTopDialog = function () {\n        return Optional.from(dialogs[dialogs.length - 1]);\n      };\n      var storeSelectionAndOpenDialog = function (openDialog) {\n        editor.editorManager.setActive(editor);\n        store(editor);\n        var dialog = openDialog();\n        addDialog(dialog);\n        return dialog;\n      };\n      var open = function (args, params) {\n        return storeSelectionAndOpenDialog(function () {\n          return getImplementation().open(args, params, closeDialog);\n        });\n      };\n      var openUrl = function (args) {\n        return storeSelectionAndOpenDialog(function () {\n          return getImplementation().openUrl(args, closeDialog);\n        });\n      };\n      var alert = function (message, callback, scope) {\n        var windowManagerImpl = getImplementation();\n        windowManagerImpl.alert(message, funcBind(scope ? scope : windowManagerImpl, callback));\n      };\n      var confirm = function (message, callback, scope) {\n        var windowManagerImpl = getImplementation();\n        windowManagerImpl.confirm(message, funcBind(scope ? scope : windowManagerImpl, callback));\n      };\n      var close = function () {\n        getTopDialog().each(function (dialog) {\n          getImplementation().close(dialog);\n          closeDialog(dialog);\n        });\n      };\n      editor.on('remove', function () {\n        each$k(dialogs, function (dialog) {\n          getImplementation().close(dialog);\n        });\n      });\n      return {\n        open: open,\n        openUrl: openUrl,\n        alert: alert,\n        confirm: confirm,\n        close: close\n      };\n    };\n\n    var displayNotification = function (editor, message) {\n      editor.notificationManager.open({\n        type: 'error',\n        text: message\n      });\n    };\n    var displayError = function (editor, message) {\n      if (editor._skinLoaded) {\n        displayNotification(editor, message);\n      } else {\n        editor.on('SkinLoaded', function () {\n          displayNotification(editor, message);\n        });\n      }\n    };\n    var uploadError = function (editor, message) {\n      displayError(editor, I18n.translate([\n        'Failed to upload image: {0}',\n        message\n      ]));\n    };\n    var logError = function (editor, errorType, msg) {\n      fireError(editor, errorType, { message: msg });\n      console.error(msg);\n    };\n    var createLoadError = function (type, url, name) {\n      return name ? 'Failed to load ' + type + ': ' + name + ' from url ' + url : 'Failed to load ' + type + ' url: ' + url;\n    };\n    var pluginLoadError = function (editor, url, name) {\n      logError(editor, 'PluginLoadError', createLoadError('plugin', url, name));\n    };\n    var iconsLoadError = function (editor, url, name) {\n      logError(editor, 'IconsLoadError', createLoadError('icons', url, name));\n    };\n    var languageLoadError = function (editor, url, name) {\n      logError(editor, 'LanguageLoadError', createLoadError('language', url, name));\n    };\n    var pluginInitError = function (editor, name, err) {\n      var message = I18n.translate([\n        'Failed to initialize plugin: {0}',\n        name\n      ]);\n      fireError(editor, 'PluginLoadError', { message: message });\n      initError(message, err);\n      displayError(editor, message);\n    };\n    var initError = function (message) {\n      var x = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        x[_i - 1] = arguments[_i];\n      }\n      var console = window.console;\n      if (console) {\n        if (console.error) {\n          console.error.apply(console, __spreadArray([message], x, false));\n        } else {\n          console.log.apply(console, __spreadArray([message], x, false));\n        }\n      }\n    };\n\n    var isContentCssSkinName = function (url) {\n      return /^[a-z0-9\\-]+$/i.test(url);\n    };\n    var getContentCssUrls = function (editor) {\n      return transformToUrls(editor, getContentCss(editor));\n    };\n    var getFontCssUrls = function (editor) {\n      return transformToUrls(editor, getFontCss(editor));\n    };\n    var transformToUrls = function (editor, cssLinks) {\n      var skinUrl = editor.editorManager.baseURL + '/skins/content';\n      var suffix = editor.editorManager.suffix;\n      var contentCssFile = 'content' + suffix + '.css';\n      var inline = editor.inline === true;\n      return map$3(cssLinks, function (url) {\n        if (isContentCssSkinName(url) && !inline) {\n          return skinUrl + '/' + url + '/' + contentCssFile;\n        } else {\n          return editor.documentBaseURI.toAbsolute(url);\n        }\n      });\n    };\n    var appendContentCssFromSettings = function (editor) {\n      editor.contentCSS = editor.contentCSS.concat(getContentCssUrls(editor), getFontCssUrls(editor));\n    };\n\n    var UploadStatus = function () {\n      var PENDING = 1, UPLOADED = 2;\n      var blobUriStatuses = {};\n      var createStatus = function (status, resultUri) {\n        return {\n          status: status,\n          resultUri: resultUri\n        };\n      };\n      var hasBlobUri = function (blobUri) {\n        return blobUri in blobUriStatuses;\n      };\n      var getResultUri = function (blobUri) {\n        var result = blobUriStatuses[blobUri];\n        return result ? result.resultUri : null;\n      };\n      var isPending = function (blobUri) {\n        return hasBlobUri(blobUri) ? blobUriStatuses[blobUri].status === PENDING : false;\n      };\n      var isUploaded = function (blobUri) {\n        return hasBlobUri(blobUri) ? blobUriStatuses[blobUri].status === UPLOADED : false;\n      };\n      var markPending = function (blobUri) {\n        blobUriStatuses[blobUri] = createStatus(PENDING, null);\n      };\n      var markUploaded = function (blobUri, resultUri) {\n        blobUriStatuses[blobUri] = createStatus(UPLOADED, resultUri);\n      };\n      var removeFailed = function (blobUri) {\n        delete blobUriStatuses[blobUri];\n      };\n      var destroy = function () {\n        blobUriStatuses = {};\n      };\n      return {\n        hasBlobUri: hasBlobUri,\n        getResultUri: getResultUri,\n        isPending: isPending,\n        isUploaded: isUploaded,\n        markPending: markPending,\n        markUploaded: markUploaded,\n        removeFailed: removeFailed,\n        destroy: destroy\n      };\n    };\n\n    var count = 0;\n    var seed = function () {\n      var rnd = function () {\n        return Math.round(Math.random() * 4294967295).toString(36);\n      };\n      var now = new Date().getTime();\n      return 's' + now.toString(36) + rnd() + rnd() + rnd();\n    };\n    var uuid = function (prefix) {\n      return prefix + count++ + seed();\n    };\n\n    var BlobCache = function () {\n      var cache = [];\n      var mimeToExt = function (mime) {\n        var mimes = {\n          'image/jpeg': 'jpg',\n          'image/jpg': 'jpg',\n          'image/gif': 'gif',\n          'image/png': 'png',\n          'image/apng': 'apng',\n          'image/avif': 'avif',\n          'image/svg+xml': 'svg',\n          'image/webp': 'webp',\n          'image/bmp': 'bmp',\n          'image/tiff': 'tiff'\n        };\n        return mimes[mime.toLowerCase()] || 'dat';\n      };\n      var create = function (o, blob, base64, name, filename) {\n        if (isString$1(o)) {\n          var id = o;\n          return toBlobInfo({\n            id: id,\n            name: name,\n            filename: filename,\n            blob: blob,\n            base64: base64\n          });\n        } else if (isObject(o)) {\n          return toBlobInfo(o);\n        } else {\n          throw new Error('Unknown input type');\n        }\n      };\n      var toBlobInfo = function (o) {\n        if (!o.blob || !o.base64) {\n          throw new Error('blob and base64 representations of the image are required for BlobInfo to be created');\n        }\n        var id = o.id || uuid('blobid');\n        var name = o.name || id;\n        var blob = o.blob;\n        return {\n          id: constant(id),\n          name: constant(name),\n          filename: constant(o.filename || name + '.' + mimeToExt(blob.type)),\n          blob: constant(blob),\n          base64: constant(o.base64),\n          blobUri: constant(o.blobUri || URL.createObjectURL(blob)),\n          uri: constant(o.uri)\n        };\n      };\n      var add = function (blobInfo) {\n        if (!get(blobInfo.id())) {\n          cache.push(blobInfo);\n        }\n      };\n      var findFirst = function (predicate) {\n        return find$3(cache, predicate).getOrUndefined();\n      };\n      var get = function (id) {\n        return findFirst(function (cachedBlobInfo) {\n          return cachedBlobInfo.id() === id;\n        });\n      };\n      var getByUri = function (blobUri) {\n        return findFirst(function (blobInfo) {\n          return blobInfo.blobUri() === blobUri;\n        });\n      };\n      var getByData = function (base64, type) {\n        return findFirst(function (blobInfo) {\n          return blobInfo.base64() === base64 && blobInfo.blob().type === type;\n        });\n      };\n      var removeByUri = function (blobUri) {\n        cache = filter$4(cache, function (blobInfo) {\n          if (blobInfo.blobUri() === blobUri) {\n            URL.revokeObjectURL(blobInfo.blobUri());\n            return false;\n          }\n          return true;\n        });\n      };\n      var destroy = function () {\n        each$k(cache, function (cachedBlobInfo) {\n          URL.revokeObjectURL(cachedBlobInfo.blobUri());\n        });\n        cache = [];\n      };\n      return {\n        create: create,\n        add: add,\n        get: get,\n        getByUri: getByUri,\n        getByData: getByData,\n        findFirst: findFirst,\n        removeByUri: removeByUri,\n        destroy: destroy\n      };\n    };\n\n    var Uploader = function (uploadStatus, settings) {\n      var pendingPromises = {};\n      var pathJoin = function (path1, path2) {\n        if (path1) {\n          return path1.replace(/\\/$/, '') + '/' + path2.replace(/^\\//, '');\n        }\n        return path2;\n      };\n      var defaultHandler = function (blobInfo, success, failure, progress) {\n        var xhr = new XMLHttpRequest();\n        xhr.open('POST', settings.url);\n        xhr.withCredentials = settings.credentials;\n        xhr.upload.onprogress = function (e) {\n          progress(e.loaded / e.total * 100);\n        };\n        xhr.onerror = function () {\n          failure('Image upload failed due to a XHR Transport error. Code: ' + xhr.status);\n        };\n        xhr.onload = function () {\n          if (xhr.status < 200 || xhr.status >= 300) {\n            failure('HTTP Error: ' + xhr.status);\n            return;\n          }\n          var json = JSON.parse(xhr.responseText);\n          if (!json || typeof json.location !== 'string') {\n            failure('Invalid JSON: ' + xhr.responseText);\n            return;\n          }\n          success(pathJoin(settings.basePath, json.location));\n        };\n        var formData = new FormData();\n        formData.append('file', blobInfo.blob(), blobInfo.filename());\n        xhr.send(formData);\n      };\n      var noUpload = function () {\n        return new promiseObj(function (resolve) {\n          resolve([]);\n        });\n      };\n      var handlerSuccess = function (blobInfo, url) {\n        return {\n          url: url,\n          blobInfo: blobInfo,\n          status: true\n        };\n      };\n      var handlerFailure = function (blobInfo, message, options) {\n        return {\n          url: '',\n          blobInfo: blobInfo,\n          status: false,\n          error: {\n            message: message,\n            options: options\n          }\n        };\n      };\n      var resolvePending = function (blobUri, result) {\n        Tools.each(pendingPromises[blobUri], function (resolve) {\n          resolve(result);\n        });\n        delete pendingPromises[blobUri];\n      };\n      var uploadBlobInfo = function (blobInfo, handler, openNotification) {\n        uploadStatus.markPending(blobInfo.blobUri());\n        return new promiseObj(function (resolve) {\n          var notification, progress;\n          try {\n            var closeNotification_1 = function () {\n              if (notification) {\n                notification.close();\n                progress = noop;\n              }\n            };\n            var success = function (url) {\n              closeNotification_1();\n              uploadStatus.markUploaded(blobInfo.blobUri(), url);\n              resolvePending(blobInfo.blobUri(), handlerSuccess(blobInfo, url));\n              resolve(handlerSuccess(blobInfo, url));\n            };\n            var failure = function (error, options) {\n              var failureOptions = options ? options : {};\n              closeNotification_1();\n              uploadStatus.removeFailed(blobInfo.blobUri());\n              resolvePending(blobInfo.blobUri(), handlerFailure(blobInfo, error, failureOptions));\n              resolve(handlerFailure(blobInfo, error, failureOptions));\n            };\n            progress = function (percent) {\n              if (percent < 0 || percent > 100) {\n                return;\n              }\n              Optional.from(notification).orThunk(function () {\n                return Optional.from(openNotification).map(apply);\n              }).each(function (n) {\n                notification = n;\n                n.progressBar.value(percent);\n              });\n            };\n            handler(blobInfo, success, failure, progress);\n          } catch (ex) {\n            resolve(handlerFailure(blobInfo, ex.message, {}));\n          }\n        });\n      };\n      var isDefaultHandler = function (handler) {\n        return handler === defaultHandler;\n      };\n      var pendingUploadBlobInfo = function (blobInfo) {\n        var blobUri = blobInfo.blobUri();\n        return new promiseObj(function (resolve) {\n          pendingPromises[blobUri] = pendingPromises[blobUri] || [];\n          pendingPromises[blobUri].push(resolve);\n        });\n      };\n      var uploadBlobs = function (blobInfos, openNotification) {\n        blobInfos = Tools.grep(blobInfos, function (blobInfo) {\n          return !uploadStatus.isUploaded(blobInfo.blobUri());\n        });\n        return promiseObj.all(Tools.map(blobInfos, function (blobInfo) {\n          return uploadStatus.isPending(blobInfo.blobUri()) ? pendingUploadBlobInfo(blobInfo) : uploadBlobInfo(blobInfo, settings.handler, openNotification);\n        }));\n      };\n      var upload = function (blobInfos, openNotification) {\n        return !settings.url && isDefaultHandler(settings.handler) ? noUpload() : uploadBlobs(blobInfos, openNotification);\n      };\n      if (isFunction(settings.handler) === false) {\n        settings.handler = defaultHandler;\n      }\n      return { upload: upload };\n    };\n\n    var openNotification = function (editor) {\n      return function () {\n        return editor.notificationManager.open({\n          text: editor.translate('Image uploading...'),\n          type: 'info',\n          timeout: -1,\n          progressBar: true\n        });\n      };\n    };\n    var createUploader = function (editor, uploadStatus) {\n      return Uploader(uploadStatus, {\n        url: getImageUploadUrl(editor),\n        basePath: getImageUploadBasePath(editor),\n        credentials: getImagesUploadCredentials(editor),\n        handler: getImagesUploadHandler(editor)\n      });\n    };\n    var ImageUploader = function (editor) {\n      var uploadStatus = UploadStatus();\n      var uploader = createUploader(editor, uploadStatus);\n      return {\n        upload: function (blobInfos, showNotification) {\n          if (showNotification === void 0) {\n            showNotification = true;\n          }\n          return uploader.upload(blobInfos, showNotification ? openNotification(editor) : undefined);\n        }\n      };\n    };\n\n    var UploadChangeHandler = function (editor) {\n      var lastChangedLevel = Cell(null);\n      editor.on('change AddUndo', function (e) {\n        lastChangedLevel.set(__assign({}, e.level));\n      });\n      var fireIfChanged = function () {\n        var data = editor.undoManager.data;\n        last$2(data).filter(function (level) {\n          return !isEq$1(lastChangedLevel.get(), level);\n        }).each(function (level) {\n          editor.setDirty(true);\n          editor.fire('change', {\n            level: level,\n            lastLevel: get$a(data, data.length - 2).getOrNull()\n          });\n        });\n      };\n      return { fireIfChanged: fireIfChanged };\n    };\n    var EditorUpload = function (editor) {\n      var blobCache = BlobCache();\n      var uploader, imageScanner;\n      var uploadStatus = UploadStatus();\n      var urlFilters = [];\n      var changeHandler = UploadChangeHandler(editor);\n      var aliveGuard = function (callback) {\n        return function (result) {\n          if (editor.selection) {\n            return callback(result);\n          }\n          return [];\n        };\n      };\n      var cacheInvalidator = function (url) {\n        return url + (url.indexOf('?') === -1 ? '?' : '&') + new Date().getTime();\n      };\n      var replaceString = function (content, search, replace) {\n        var index = 0;\n        do {\n          index = content.indexOf(search, index);\n          if (index !== -1) {\n            content = content.substring(0, index) + replace + content.substr(index + search.length);\n            index += replace.length - search.length + 1;\n          }\n        } while (index !== -1);\n        return content;\n      };\n      var replaceImageUrl = function (content, targetUrl, replacementUrl) {\n        var replacementString = 'src=\"' + replacementUrl + '\"' + (replacementUrl === Env.transparentSrc ? ' data-mce-placeholder=\"1\"' : '');\n        content = replaceString(content, 'src=\"' + targetUrl + '\"', replacementString);\n        content = replaceString(content, 'data-mce-src=\"' + targetUrl + '\"', 'data-mce-src=\"' + replacementUrl + '\"');\n        return content;\n      };\n      var replaceUrlInUndoStack = function (targetUrl, replacementUrl) {\n        each$k(editor.undoManager.data, function (level) {\n          if (level.type === 'fragmented') {\n            level.fragments = map$3(level.fragments, function (fragment) {\n              return replaceImageUrl(fragment, targetUrl, replacementUrl);\n            });\n          } else {\n            level.content = replaceImageUrl(level.content, targetUrl, replacementUrl);\n          }\n        });\n      };\n      var replaceImageUriInView = function (image, resultUri) {\n        var src = editor.convertURL(resultUri, 'src');\n        replaceUrlInUndoStack(image.src, resultUri);\n        editor.$(image).attr({\n          'src': shouldReuseFileName(editor) ? cacheInvalidator(resultUri) : resultUri,\n          'data-mce-src': src\n        });\n      };\n      var uploadImages = function (callback) {\n        if (!uploader) {\n          uploader = createUploader(editor, uploadStatus);\n        }\n        return scanForImages().then(aliveGuard(function (imageInfos) {\n          var blobInfos = map$3(imageInfos, function (imageInfo) {\n            return imageInfo.blobInfo;\n          });\n          return uploader.upload(blobInfos, openNotification(editor)).then(aliveGuard(function (result) {\n            var imagesToRemove = [];\n            var filteredResult = map$3(result, function (uploadInfo, index) {\n              var blobInfo = imageInfos[index].blobInfo;\n              var image = imageInfos[index].image;\n              if (uploadInfo.status && shouldReplaceBlobUris(editor)) {\n                blobCache.removeByUri(image.src);\n                if (isRtc(editor)) ; else {\n                  replaceImageUriInView(image, uploadInfo.url);\n                }\n              } else if (uploadInfo.error) {\n                if (uploadInfo.error.options.remove) {\n                  replaceUrlInUndoStack(image.getAttribute('src'), Env.transparentSrc);\n                  imagesToRemove.push(image);\n                }\n                uploadError(editor, uploadInfo.error.message);\n              }\n              return {\n                element: image,\n                status: uploadInfo.status,\n                uploadUri: uploadInfo.url,\n                blobInfo: blobInfo\n              };\n            });\n            if (filteredResult.length > 0) {\n              changeHandler.fireIfChanged();\n            }\n            if (imagesToRemove.length > 0) {\n              if (isRtc(editor)) {\n                console.error('Removing images on failed uploads is currently unsupported for RTC');\n              } else {\n                editor.undoManager.transact(function () {\n                  each$k(imagesToRemove, function (element) {\n                    editor.dom.remove(element);\n                    blobCache.removeByUri(element.src);\n                  });\n                });\n              }\n            }\n            if (callback) {\n              callback(filteredResult);\n            }\n            return filteredResult;\n          }));\n        }));\n      };\n      var uploadImagesAuto = function (callback) {\n        if (isAutomaticUploadsEnabled(editor)) {\n          return uploadImages(callback);\n        }\n      };\n      var isValidDataUriImage = function (imgElm) {\n        if (forall(urlFilters, function (filter) {\n            return filter(imgElm);\n          }) === false) {\n          return false;\n        }\n        if (imgElm.getAttribute('src').indexOf('data:') === 0) {\n          var dataImgFilter = getImagesDataImgFilter(editor);\n          return dataImgFilter(imgElm);\n        }\n        return true;\n      };\n      var addFilter = function (filter) {\n        urlFilters.push(filter);\n      };\n      var scanForImages = function () {\n        if (!imageScanner) {\n          imageScanner = ImageScanner(uploadStatus, blobCache);\n        }\n        return imageScanner.findAll(editor.getBody(), isValidDataUriImage).then(aliveGuard(function (result) {\n          result = filter$4(result, function (resultItem) {\n            if (typeof resultItem === 'string') {\n              displayError(editor, resultItem);\n              return false;\n            }\n            return true;\n          });\n          if (isRtc(editor)) ; else {\n            each$k(result, function (resultItem) {\n              replaceUrlInUndoStack(resultItem.image.src, resultItem.blobInfo.blobUri());\n              resultItem.image.src = resultItem.blobInfo.blobUri();\n              resultItem.image.removeAttribute('data-mce-src');\n            });\n          }\n          return result;\n        }));\n      };\n      var destroy = function () {\n        blobCache.destroy();\n        uploadStatus.destroy();\n        imageScanner = uploader = null;\n      };\n      var replaceBlobUris = function (content) {\n        return content.replace(/src=\"(blob:[^\"]+)\"/g, function (match, blobUri) {\n          var resultUri = uploadStatus.getResultUri(blobUri);\n          if (resultUri) {\n            return 'src=\"' + resultUri + '\"';\n          }\n          var blobInfo = blobCache.getByUri(blobUri);\n          if (!blobInfo) {\n            blobInfo = foldl(editor.editorManager.get(), function (result, editor) {\n              return result || editor.editorUpload && editor.editorUpload.blobCache.getByUri(blobUri);\n            }, null);\n          }\n          if (blobInfo) {\n            var blob = blobInfo.blob();\n            return 'src=\"data:' + blob.type + ';base64,' + blobInfo.base64() + '\"';\n          }\n          return match;\n        });\n      };\n      editor.on('SetContent', function () {\n        if (isAutomaticUploadsEnabled(editor)) {\n          uploadImagesAuto();\n        } else {\n          scanForImages();\n        }\n      });\n      editor.on('RawSaveContent', function (e) {\n        e.content = replaceBlobUris(e.content);\n      });\n      editor.on('GetContent', function (e) {\n        if (e.source_view || e.format === 'raw' || e.format === 'tree') {\n          return;\n        }\n        e.content = replaceBlobUris(e.content);\n      });\n      editor.on('PostRender', function () {\n        editor.parser.addNodeFilter('img', function (images) {\n          each$k(images, function (img) {\n            var src = img.attr('src');\n            if (blobCache.getByUri(src)) {\n              return;\n            }\n            var resultUri = uploadStatus.getResultUri(src);\n            if (resultUri) {\n              img.attr('src', resultUri);\n            }\n          });\n        });\n      });\n      return {\n        blobCache: blobCache,\n        addFilter: addFilter,\n        uploadImages: uploadImages,\n        uploadImagesAuto: uploadImagesAuto,\n        scanForImages: scanForImages,\n        destroy: destroy\n      };\n    };\n\n    var get = function (dom) {\n      var formats = {\n        valigntop: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'top' }\n          }],\n        valignmiddle: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'middle' }\n          }],\n        valignbottom: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'bottom' }\n          }],\n        alignleft: [\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-left',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'left' },\n            inherit: false,\n            preview: false,\n            defaultBlock: 'div'\n          },\n          {\n            selector: 'img,table,audio,video',\n            collapsed: false,\n            styles: { float: 'left' },\n            preview: 'font-family font-size'\n          }\n        ],\n        aligncenter: [\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'center' },\n            inherit: false,\n            preview: 'font-family font-size',\n            defaultBlock: 'div'\n          },\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-center',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'img,audio,video',\n            collapsed: false,\n            styles: {\n              display: 'block',\n              marginLeft: 'auto',\n              marginRight: 'auto'\n            },\n            preview: false\n          },\n          {\n            selector: 'table',\n            collapsed: false,\n            styles: {\n              marginLeft: 'auto',\n              marginRight: 'auto'\n            },\n            preview: 'font-family font-size'\n          }\n        ],\n        alignright: [\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-right',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'right' },\n            inherit: false,\n            preview: 'font-family font-size',\n            defaultBlock: 'div'\n          },\n          {\n            selector: 'img,table,audio,video',\n            collapsed: false,\n            styles: { float: 'right' },\n            preview: 'font-family font-size'\n          }\n        ],\n        alignjustify: [{\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'justify' },\n            inherit: false,\n            defaultBlock: 'div',\n            preview: 'font-family font-size'\n          }],\n        bold: [\n          {\n            inline: 'strong',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          },\n          {\n            inline: 'span',\n            styles: { fontWeight: 'bold' }\n          },\n          {\n            inline: 'b',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          }\n        ],\n        italic: [\n          {\n            inline: 'em',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          },\n          {\n            inline: 'span',\n            styles: { fontStyle: 'italic' }\n          },\n          {\n            inline: 'i',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          }\n        ],\n        underline: [\n          {\n            inline: 'span',\n            styles: { textDecoration: 'underline' },\n            exact: true\n          },\n          {\n            inline: 'u',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          }\n        ],\n        strikethrough: [\n          {\n            inline: 'span',\n            styles: { textDecoration: 'line-through' },\n            exact: true\n          },\n          {\n            inline: 'strike',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          },\n          {\n            inline: 's',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          }\n        ],\n        forecolor: {\n          inline: 'span',\n          styles: { color: '%value' },\n          links: true,\n          remove_similar: true,\n          clear_child_styles: true\n        },\n        hilitecolor: {\n          inline: 'span',\n          styles: { backgroundColor: '%value' },\n          links: true,\n          remove_similar: true,\n          clear_child_styles: true\n        },\n        fontname: {\n          inline: 'span',\n          toggle: false,\n          styles: { fontFamily: '%value' },\n          clear_child_styles: true\n        },\n        fontsize: {\n          inline: 'span',\n          toggle: false,\n          styles: { fontSize: '%value' },\n          clear_child_styles: true\n        },\n        lineheight: {\n          selector: 'h1,h2,h3,h4,h5,h6,p,li,td,th,div',\n          defaultBlock: 'p',\n          styles: { lineHeight: '%value' }\n        },\n        fontsize_class: {\n          inline: 'span',\n          attributes: { class: '%value' }\n        },\n        blockquote: {\n          block: 'blockquote',\n          wrapper: true,\n          remove: 'all'\n        },\n        subscript: { inline: 'sub' },\n        superscript: { inline: 'sup' },\n        code: { inline: 'code' },\n        link: {\n          inline: 'a',\n          selector: 'a',\n          remove: 'all',\n          split: true,\n          deep: true,\n          onmatch: function (node, _fmt, _itemName) {\n            return isElement$5(node) && node.hasAttribute('href');\n          },\n          onformat: function (elm, _fmt, vars) {\n            Tools.each(vars, function (value, key) {\n              dom.setAttrib(elm, key, value);\n            });\n          }\n        },\n        lang: {\n          inline: 'span',\n          clear_child_styles: true,\n          remove_similar: true,\n          attributes: {\n            'lang': '%value',\n            'data-mce-lang': function (vars) {\n              var _a;\n              return (_a = vars === null || vars === void 0 ? void 0 : vars.customValue) !== null && _a !== void 0 ? _a : null;\n            }\n          }\n        },\n        removeformat: [\n          {\n            selector: 'b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small',\n            remove: 'all',\n            split: true,\n            expand: false,\n            block_expand: true,\n            deep: true\n          },\n          {\n            selector: 'span',\n            attributes: [\n              'style',\n              'class'\n            ],\n            remove: 'empty',\n            split: true,\n            expand: false,\n            deep: true\n          },\n          {\n            selector: '*',\n            attributes: [\n              'style',\n              'class'\n            ],\n            split: false,\n            expand: false,\n            deep: true\n          }\n        ]\n      };\n      Tools.each('p h1 h2 h3 h4 h5 h6 div address pre dt dd samp'.split(/\\s/), function (name) {\n        formats[name] = {\n          block: name,\n          remove: 'all'\n        };\n      });\n      return formats;\n    };\n\n    var FormatRegistry = function (editor) {\n      var formats = {};\n      var get$1 = function (name) {\n        return isNonNullable(name) ? formats[name] : formats;\n      };\n      var has = function (name) {\n        return has$2(formats, name);\n      };\n      var register = function (name, format) {\n        if (name) {\n          if (!isString$1(name)) {\n            each$j(name, function (format, name) {\n              register(name, format);\n            });\n          } else {\n            if (!isArray$1(format)) {\n              format = [format];\n            }\n            each$k(format, function (format) {\n              if (isUndefined(format.deep)) {\n                format.deep = !isSelectorFormat(format);\n              }\n              if (isUndefined(format.split)) {\n                format.split = !isSelectorFormat(format) || isInlineFormat(format);\n              }\n              if (isUndefined(format.remove) && isSelectorFormat(format) && !isInlineFormat(format)) {\n                format.remove = 'none';\n              }\n              if (isSelectorFormat(format) && isInlineFormat(format)) {\n                format.mixed = true;\n                format.block_expand = true;\n              }\n              if (isString$1(format.classes)) {\n                format.classes = format.classes.split(/\\s+/);\n              }\n            });\n            formats[name] = format;\n          }\n        }\n      };\n      var unregister = function (name) {\n        if (name && formats[name]) {\n          delete formats[name];\n        }\n        return formats;\n      };\n      register(get(editor.dom));\n      register(getFormats(editor));\n      return {\n        get: get$1,\n        has: has,\n        register: register,\n        unregister: unregister\n      };\n    };\n\n    var each$5 = Tools.each;\n    var dom = DOMUtils.DOM;\n    var parsedSelectorToHtml = function (ancestry, editor) {\n      var elm, item, fragment;\n      var schema = editor && editor.schema || Schema({});\n      var decorate = function (elm, item) {\n        if (item.classes.length) {\n          dom.addClass(elm, item.classes.join(' '));\n        }\n        dom.setAttribs(elm, item.attrs);\n      };\n      var createElement = function (sItem) {\n        item = typeof sItem === 'string' ? {\n          name: sItem,\n          classes: [],\n          attrs: {}\n        } : sItem;\n        var elm = dom.create(item.name);\n        decorate(elm, item);\n        return elm;\n      };\n      var getRequiredParent = function (elm, candidate) {\n        var name = typeof elm !== 'string' ? elm.nodeName.toLowerCase() : elm;\n        var elmRule = schema.getElementRule(name);\n        var parentsRequired = elmRule && elmRule.parentsRequired;\n        if (parentsRequired && parentsRequired.length) {\n          return candidate && Tools.inArray(parentsRequired, candidate) !== -1 ? candidate : parentsRequired[0];\n        } else {\n          return false;\n        }\n      };\n      var wrapInHtml = function (elm, ancestry, siblings) {\n        var parent, parentCandidate;\n        var ancestor = ancestry.length > 0 && ancestry[0];\n        var ancestorName = ancestor && ancestor.name;\n        var parentRequired = getRequiredParent(elm, ancestorName);\n        if (parentRequired) {\n          if (ancestorName === parentRequired) {\n            parentCandidate = ancestry[0];\n            ancestry = ancestry.slice(1);\n          } else {\n            parentCandidate = parentRequired;\n          }\n        } else if (ancestor) {\n          parentCandidate = ancestry[0];\n          ancestry = ancestry.slice(1);\n        } else if (!siblings) {\n          return elm;\n        }\n        if (parentCandidate) {\n          parent = createElement(parentCandidate);\n          parent.appendChild(elm);\n        }\n        if (siblings) {\n          if (!parent) {\n            parent = dom.create('div');\n            parent.appendChild(elm);\n          }\n          Tools.each(siblings, function (sibling) {\n            var siblingElm = createElement(sibling);\n            parent.insertBefore(siblingElm, elm);\n          });\n        }\n        return wrapInHtml(parent, ancestry, parentCandidate && parentCandidate.siblings);\n      };\n      if (ancestry && ancestry.length) {\n        item = ancestry[0];\n        elm = createElement(item);\n        fragment = dom.create('div');\n        fragment.appendChild(wrapInHtml(elm, ancestry.slice(1), item.siblings));\n        return fragment;\n      } else {\n        return '';\n      }\n    };\n    var parseSelectorItem = function (item) {\n      var tagName;\n      var obj = {\n        classes: [],\n        attrs: {}\n      };\n      item = obj.selector = Tools.trim(item);\n      if (item !== '*') {\n        tagName = item.replace(/(?:([#\\.]|::?)([\\w\\-]+)|(\\[)([^\\]]+)\\]?)/g, function ($0, $1, $2, $3, $4) {\n          switch ($1) {\n          case '#':\n            obj.attrs.id = $2;\n            break;\n          case '.':\n            obj.classes.push($2);\n            break;\n          case ':':\n            if (Tools.inArray('checked disabled enabled read-only required'.split(' '), $2) !== -1) {\n              obj.attrs[$2] = $2;\n            }\n            break;\n          }\n          if ($3 === '[') {\n            var m = $4.match(/([\\w\\-]+)(?:\\=\\\"([^\\\"]+))?/);\n            if (m) {\n              obj.attrs[m[1]] = m[2];\n            }\n          }\n          return '';\n        });\n      }\n      obj.name = tagName || 'div';\n      return obj;\n    };\n    var parseSelector = function (selector) {\n      if (!selector || typeof selector !== 'string') {\n        return [];\n      }\n      selector = selector.split(/\\s*,\\s*/)[0];\n      selector = selector.replace(/\\s*(~\\+|~|\\+|>)\\s*/g, '$1');\n      return Tools.map(selector.split(/(?:>|\\s+(?![^\\[\\]]+\\]))/), function (item) {\n        var siblings = Tools.map(item.split(/(?:~\\+|~|\\+)/), parseSelectorItem);\n        var obj = siblings.pop();\n        if (siblings.length) {\n          obj.siblings = siblings;\n        }\n        return obj;\n      }).reverse();\n    };\n    var getCssText = function (editor, format) {\n      var name, previewFrag;\n      var previewCss = '', parentFontSize;\n      var previewStyles = getPreviewStyles(editor);\n      if (previewStyles === '') {\n        return '';\n      }\n      var removeVars = function (val) {\n        return val.replace(/%(\\w+)/g, '');\n      };\n      if (typeof format === 'string') {\n        format = editor.formatter.get(format);\n        if (!format) {\n          return;\n        }\n        format = format[0];\n      }\n      if ('preview' in format) {\n        var previewOpt = get$9(format, 'preview');\n        if (is$1(previewOpt, false)) {\n          return '';\n        } else {\n          previewStyles = previewOpt.getOr(previewStyles);\n        }\n      }\n      name = format.block || format.inline || 'span';\n      var items = parseSelector(format.selector);\n      if (items.length) {\n        if (!items[0].name) {\n          items[0].name = name;\n        }\n        name = format.selector;\n        previewFrag = parsedSelectorToHtml(items, editor);\n      } else {\n        previewFrag = parsedSelectorToHtml([name], editor);\n      }\n      var previewElm = dom.select(name, previewFrag)[0] || previewFrag.firstChild;\n      each$5(format.styles, function (value, name) {\n        var newValue = removeVars(value);\n        if (newValue) {\n          dom.setStyle(previewElm, name, newValue);\n        }\n      });\n      each$5(format.attributes, function (value, name) {\n        var newValue = removeVars(value);\n        if (newValue) {\n          dom.setAttrib(previewElm, name, newValue);\n        }\n      });\n      each$5(format.classes, function (value) {\n        var newValue = removeVars(value);\n        if (!dom.hasClass(previewElm, newValue)) {\n          dom.addClass(previewElm, newValue);\n        }\n      });\n      editor.fire('PreviewFormats');\n      dom.setStyles(previewFrag, {\n        position: 'absolute',\n        left: -65535\n      });\n      editor.getBody().appendChild(previewFrag);\n      parentFontSize = dom.getStyle(editor.getBody(), 'fontSize', true);\n      parentFontSize = /px$/.test(parentFontSize) ? parseInt(parentFontSize, 10) : 0;\n      each$5(previewStyles.split(' '), function (name) {\n        var value = dom.getStyle(previewElm, name, true);\n        if (name === 'background-color' && /transparent|rgba\\s*\\([^)]+,\\s*0\\)/.test(value)) {\n          value = dom.getStyle(editor.getBody(), name, true);\n          if (dom.toHex(value).toLowerCase() === '#ffffff') {\n            return;\n          }\n        }\n        if (name === 'color') {\n          if (dom.toHex(value).toLowerCase() === '#000000') {\n            return;\n          }\n        }\n        if (name === 'font-size') {\n          if (/em|%$/.test(value)) {\n            if (parentFontSize === 0) {\n              return;\n            }\n            var numValue = parseFloat(value) / (/%$/.test(value) ? 100 : 1);\n            value = numValue * parentFontSize + 'px';\n          }\n        }\n        if (name === 'border' && value) {\n          previewCss += 'padding:0 2px;';\n        }\n        previewCss += name + ':' + value + ';';\n      });\n      editor.fire('AfterPreviewFormats');\n      dom.remove(previewFrag);\n      return previewCss;\n    };\n\n    var setup$h = function (editor) {\n      editor.addShortcut('meta+b', '', 'Bold');\n      editor.addShortcut('meta+i', '', 'Italic');\n      editor.addShortcut('meta+u', '', 'Underline');\n      for (var i = 1; i <= 6; i++) {\n        editor.addShortcut('access+' + i, '', [\n          'FormatBlock',\n          false,\n          'h' + i\n        ]);\n      }\n      editor.addShortcut('access+7', '', [\n        'FormatBlock',\n        false,\n        'p'\n      ]);\n      editor.addShortcut('access+8', '', [\n        'FormatBlock',\n        false,\n        'div'\n      ]);\n      editor.addShortcut('access+9', '', [\n        'FormatBlock',\n        false,\n        'address'\n      ]);\n    };\n\n    var Formatter = function (editor) {\n      var formats = FormatRegistry(editor);\n      var formatChangeState = Cell(null);\n      setup$h(editor);\n      setup$k(editor);\n      return {\n        get: formats.get,\n        has: formats.has,\n        register: formats.register,\n        unregister: formats.unregister,\n        apply: function (name, vars, node) {\n          applyFormat(editor, name, vars, node);\n        },\n        remove: function (name, vars, node, similar) {\n          removeFormat(editor, name, vars, node, similar);\n        },\n        toggle: function (name, vars, node) {\n          toggleFormat(editor, name, vars, node);\n        },\n        match: function (name, vars, node, similar) {\n          return matchFormat(editor, name, vars, node, similar);\n        },\n        closest: function (names) {\n          return closestFormat(editor, names);\n        },\n        matchAll: function (names, vars) {\n          return matchAllFormats(editor, names, vars);\n        },\n        matchNode: function (node, name, vars, similar) {\n          return matchNodeFormat(editor, node, name, vars, similar);\n        },\n        canApply: function (name) {\n          return canApplyFormat(editor, name);\n        },\n        formatChanged: function (formats, callback, similar, vars) {\n          return formatChanged(editor, formatChangeState, formats, callback, similar, vars);\n        },\n        getCssText: curry(getCssText, editor)\n      };\n    };\n\n    var shouldIgnoreCommand = function (cmd) {\n      switch (cmd.toLowerCase()) {\n      case 'undo':\n      case 'redo':\n      case 'mcerepaint':\n      case 'mcefocus':\n        return true;\n      default:\n        return false;\n      }\n    };\n    var registerEvents = function (editor, undoManager, locks) {\n      var isFirstTypedCharacter = Cell(false);\n      var addNonTypingUndoLevel = function (e) {\n        setTyping(undoManager, false, locks);\n        undoManager.add({}, e);\n      };\n      editor.on('init', function () {\n        undoManager.add();\n      });\n      editor.on('BeforeExecCommand', function (e) {\n        var cmd = e.command;\n        if (!shouldIgnoreCommand(cmd)) {\n          endTyping(undoManager, locks);\n          undoManager.beforeChange();\n        }\n      });\n      editor.on('ExecCommand', function (e) {\n        var cmd = e.command;\n        if (!shouldIgnoreCommand(cmd)) {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      editor.on('ObjectResizeStart cut', function () {\n        undoManager.beforeChange();\n      });\n      editor.on('SaveContent ObjectResized blur', addNonTypingUndoLevel);\n      editor.on('dragend', addNonTypingUndoLevel);\n      editor.on('keyup', function (e) {\n        var keyCode = e.keyCode;\n        if (e.isDefaultPrevented()) {\n          return;\n        }\n        if (keyCode >= 33 && keyCode <= 36 || keyCode >= 37 && keyCode <= 40 || keyCode === 45 || e.ctrlKey) {\n          addNonTypingUndoLevel();\n          editor.nodeChanged();\n        }\n        if (keyCode === 46 || keyCode === 8) {\n          editor.nodeChanged();\n        }\n        if (isFirstTypedCharacter.get() && undoManager.typing && isEq$1(createFromEditor(editor), undoManager.data[0]) === false) {\n          if (editor.isDirty() === false) {\n            editor.setDirty(true);\n            editor.fire('change', {\n              level: undoManager.data[0],\n              lastLevel: null\n            });\n          }\n          editor.fire('TypingUndo');\n          isFirstTypedCharacter.set(false);\n          editor.nodeChanged();\n        }\n      });\n      editor.on('keydown', function (e) {\n        var keyCode = e.keyCode;\n        if (e.isDefaultPrevented()) {\n          return;\n        }\n        if (keyCode >= 33 && keyCode <= 36 || keyCode >= 37 && keyCode <= 40 || keyCode === 45) {\n          if (undoManager.typing) {\n            addNonTypingUndoLevel(e);\n          }\n          return;\n        }\n        var modKey = e.ctrlKey && !e.altKey || e.metaKey;\n        if ((keyCode < 16 || keyCode > 20) && keyCode !== 224 && keyCode !== 91 && !undoManager.typing && !modKey) {\n          undoManager.beforeChange();\n          setTyping(undoManager, true, locks);\n          undoManager.add({}, e);\n          isFirstTypedCharacter.set(true);\n        }\n      });\n      editor.on('mousedown', function (e) {\n        if (undoManager.typing) {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      var isInsertReplacementText = function (event) {\n        return event.inputType === 'insertReplacementText';\n      };\n      var isInsertTextDataNull = function (event) {\n        return event.inputType === 'insertText' && event.data === null;\n      };\n      var isInsertFromPasteOrDrop = function (event) {\n        return event.inputType === 'insertFromPaste' || event.inputType === 'insertFromDrop';\n      };\n      editor.on('input', function (e) {\n        if (e.inputType && (isInsertReplacementText(e) || isInsertTextDataNull(e) || isInsertFromPasteOrDrop(e))) {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      editor.on('AddUndo Undo Redo ClearUndos', function (e) {\n        if (!e.isDefaultPrevented()) {\n          editor.nodeChanged();\n        }\n      });\n    };\n    var addKeyboardShortcuts = function (editor) {\n      editor.addShortcut('meta+z', '', 'Undo');\n      editor.addShortcut('meta+y,meta+shift+z', '', 'Redo');\n    };\n\n    var UndoManager = function (editor) {\n      var beforeBookmark = value();\n      var locks = Cell(0);\n      var index = Cell(0);\n      var undoManager = {\n        data: [],\n        typing: false,\n        beforeChange: function () {\n          beforeChange(editor, locks, beforeBookmark);\n        },\n        add: function (level, event) {\n          return addUndoLevel(editor, undoManager, index, locks, beforeBookmark, level, event);\n        },\n        undo: function () {\n          return undo(editor, undoManager, locks, index);\n        },\n        redo: function () {\n          return redo(editor, index, undoManager.data);\n        },\n        clear: function () {\n          clear(editor, undoManager, index);\n        },\n        reset: function () {\n          reset(editor, undoManager);\n        },\n        hasUndo: function () {\n          return hasUndo(editor, undoManager, index);\n        },\n        hasRedo: function () {\n          return hasRedo(editor, undoManager, index);\n        },\n        transact: function (callback) {\n          return transact(editor, undoManager, locks, callback);\n        },\n        ignore: function (callback) {\n          ignore(editor, locks, callback);\n        },\n        extra: function (callback1, callback2) {\n          extra(editor, undoManager, index, callback1, callback2);\n        }\n      };\n      if (!isRtc(editor)) {\n        registerEvents(editor, undoManager, locks);\n      }\n      addKeyboardShortcuts(editor);\n      return undoManager;\n    };\n\n    var nonTypingKeycodes = [\n      9,\n      27,\n      VK.HOME,\n      VK.END,\n      19,\n      20,\n      44,\n      144,\n      145,\n      33,\n      34,\n      45,\n      16,\n      17,\n      18,\n      91,\n      92,\n      93,\n      VK.DOWN,\n      VK.UP,\n      VK.LEFT,\n      VK.RIGHT\n    ].concat(Env.browser.isFirefox() ? [224] : []);\n    var placeholderAttr = 'data-mce-placeholder';\n    var isKeyboardEvent = function (e) {\n      return e.type === 'keydown' || e.type === 'keyup';\n    };\n    var isDeleteEvent = function (e) {\n      var keyCode = e.keyCode;\n      return keyCode === VK.BACKSPACE || keyCode === VK.DELETE;\n    };\n    var isNonTypingKeyboardEvent = function (e) {\n      if (isKeyboardEvent(e)) {\n        var keyCode = e.keyCode;\n        return !isDeleteEvent(e) && (VK.metaKeyPressed(e) || e.altKey || keyCode >= 112 && keyCode <= 123 || contains$3(nonTypingKeycodes, keyCode));\n      } else {\n        return false;\n      }\n    };\n    var isTypingKeyboardEvent = function (e) {\n      return isKeyboardEvent(e) && !(isDeleteEvent(e) || e.type === 'keyup' && e.keyCode === 229);\n    };\n    var isVisuallyEmpty = function (dom, rootElm, forcedRootBlock) {\n      if (isEmpty$2(SugarElement.fromDom(rootElm), false)) {\n        var isForcedRootBlockFalse = forcedRootBlock === '';\n        var firstElement = rootElm.firstElementChild;\n        if (!firstElement) {\n          return true;\n        } else if (dom.getStyle(rootElm.firstElementChild, 'padding-left') || dom.getStyle(rootElm.firstElementChild, 'padding-right')) {\n          return false;\n        } else {\n          return isForcedRootBlockFalse ? !dom.isBlock(firstElement) : forcedRootBlock === firstElement.nodeName.toLowerCase();\n        }\n      } else {\n        return false;\n      }\n    };\n    var setup$g = function (editor) {\n      var dom = editor.dom;\n      var rootBlock = getForcedRootBlock(editor);\n      var placeholder = getPlaceholder(editor);\n      var updatePlaceholder = function (e, initial) {\n        if (isNonTypingKeyboardEvent(e)) {\n          return;\n        }\n        var body = editor.getBody();\n        var showPlaceholder = isTypingKeyboardEvent(e) ? false : isVisuallyEmpty(dom, body, rootBlock);\n        var isPlaceholderShown = dom.getAttrib(body, placeholderAttr) !== '';\n        if (isPlaceholderShown !== showPlaceholder || initial) {\n          dom.setAttrib(body, placeholderAttr, showPlaceholder ? placeholder : null);\n          dom.setAttrib(body, 'aria-placeholder', showPlaceholder ? placeholder : null);\n          firePlaceholderToggle(editor, showPlaceholder);\n          editor.on(showPlaceholder ? 'keydown' : 'keyup', updatePlaceholder);\n          editor.off(showPlaceholder ? 'keyup' : 'keydown', updatePlaceholder);\n        }\n      };\n      if (placeholder) {\n        editor.on('init', function (e) {\n          updatePlaceholder(e, true);\n          editor.on('change SetContent ExecCommand', updatePlaceholder);\n          editor.on('paste', function (e) {\n            return Delay.setEditorTimeout(editor, function () {\n              return updatePlaceholder(e);\n            });\n          });\n        });\n      }\n    };\n\n    var strongRtl = /[\\u0591-\\u07FF\\uFB1D-\\uFDFF\\uFE70-\\uFEFC]/;\n    var hasStrongRtl = function (text) {\n      return strongRtl.test(text);\n    };\n\n    var isInlineTarget = function (editor, elm) {\n      return is$2(SugarElement.fromDom(elm), getInlineBoundarySelector(editor));\n    };\n    var isRtl = function (element) {\n      return DOMUtils.DOM.getStyle(element, 'direction', true) === 'rtl' || hasStrongRtl(element.textContent);\n    };\n    var findInlineParents = function (isInlineTarget, rootNode, pos) {\n      return filter$4(DOMUtils.DOM.getParents(pos.container(), '*', rootNode), isInlineTarget);\n    };\n    var findRootInline = function (isInlineTarget, rootNode, pos) {\n      var parents = findInlineParents(isInlineTarget, rootNode, pos);\n      return Optional.from(parents[parents.length - 1]);\n    };\n    var hasSameParentBlock = function (rootNode, node1, node2) {\n      var block1 = getParentBlock$2(node1, rootNode);\n      var block2 = getParentBlock$2(node2, rootNode);\n      return block1 && block1 === block2;\n    };\n    var isAtZwsp = function (pos) {\n      return isBeforeInline(pos) || isAfterInline(pos);\n    };\n    var normalizePosition = function (forward, pos) {\n      if (!pos) {\n        return pos;\n      }\n      var container = pos.container(), offset = pos.offset();\n      if (forward) {\n        if (isCaretContainerInline(container)) {\n          if (isText$7(container.nextSibling)) {\n            return CaretPosition(container.nextSibling, 0);\n          } else {\n            return CaretPosition.after(container);\n          }\n        } else {\n          return isBeforeInline(pos) ? CaretPosition(container, offset + 1) : pos;\n        }\n      } else {\n        if (isCaretContainerInline(container)) {\n          if (isText$7(container.previousSibling)) {\n            return CaretPosition(container.previousSibling, container.previousSibling.data.length);\n          } else {\n            return CaretPosition.before(container);\n          }\n        } else {\n          return isAfterInline(pos) ? CaretPosition(container, offset - 1) : pos;\n        }\n      }\n    };\n    var normalizeForwards = curry(normalizePosition, true);\n    var normalizeBackwards = curry(normalizePosition, false);\n\n    var isBeforeRoot = function (rootNode) {\n      return function (elm) {\n        return eq(rootNode, SugarElement.fromDom(elm.dom.parentNode));\n      };\n    };\n    var isTextBlockOrListItem = function (element) {\n      return isTextBlock$2(element) || isListItem(element);\n    };\n    var getParentBlock$1 = function (rootNode, elm) {\n      if (contains$1(rootNode, elm)) {\n        return closest$3(elm, isTextBlockOrListItem, isBeforeRoot(rootNode));\n      } else {\n        return Optional.none();\n      }\n    };\n    var placeCaretInEmptyBody = function (editor) {\n      var body = editor.getBody();\n      var node = body.firstChild && editor.dom.isBlock(body.firstChild) ? body.firstChild : body;\n      editor.selection.setCursorLocation(node, 0);\n    };\n    var paddEmptyBody = function (editor) {\n      if (editor.dom.isEmpty(editor.getBody())) {\n        editor.setContent('');\n        placeCaretInEmptyBody(editor);\n      }\n    };\n    var willDeleteLastPositionInElement = function (forward, fromPos, elm) {\n      return lift2(firstPositionIn(elm), lastPositionIn(elm), function (firstPos, lastPos) {\n        var normalizedFirstPos = normalizePosition(true, firstPos);\n        var normalizedLastPos = normalizePosition(false, lastPos);\n        var normalizedFromPos = normalizePosition(false, fromPos);\n        if (forward) {\n          return nextPosition(elm, normalizedFromPos).exists(function (nextPos) {\n            return nextPos.isEqual(normalizedLastPos) && fromPos.isEqual(normalizedFirstPos);\n          });\n        } else {\n          return prevPosition(elm, normalizedFromPos).exists(function (prevPos) {\n            return prevPos.isEqual(normalizedFirstPos) && fromPos.isEqual(normalizedLastPos);\n          });\n        }\n      }).getOr(true);\n    };\n\n    var blockPosition = function (block, position) {\n      return {\n        block: block,\n        position: position\n      };\n    };\n    var blockBoundary = function (from, to) {\n      return {\n        from: from,\n        to: to\n      };\n    };\n    var getBlockPosition = function (rootNode, pos) {\n      var rootElm = SugarElement.fromDom(rootNode);\n      var containerElm = SugarElement.fromDom(pos.container());\n      return getParentBlock$1(rootElm, containerElm).map(function (block) {\n        return blockPosition(block, pos);\n      });\n    };\n    var isDifferentBlocks = function (blockBoundary) {\n      return eq(blockBoundary.from.block, blockBoundary.to.block) === false;\n    };\n    var hasSameParent = function (blockBoundary) {\n      return parent(blockBoundary.from.block).bind(function (parent1) {\n        return parent(blockBoundary.to.block).filter(function (parent2) {\n          return eq(parent1, parent2);\n        });\n      }).isSome();\n    };\n    var isEditable$1 = function (blockBoundary) {\n      return isContentEditableFalse$b(blockBoundary.from.block.dom) === false && isContentEditableFalse$b(blockBoundary.to.block.dom) === false;\n    };\n    var skipLastBr = function (rootNode, forward, blockPosition) {\n      if (isBr$5(blockPosition.position.getNode()) && isEmpty$2(blockPosition.block) === false) {\n        return positionIn(false, blockPosition.block.dom).bind(function (lastPositionInBlock) {\n          if (lastPositionInBlock.isEqual(blockPosition.position)) {\n            return fromPosition(forward, rootNode, lastPositionInBlock).bind(function (to) {\n              return getBlockPosition(rootNode, to);\n            });\n          } else {\n            return Optional.some(blockPosition);\n          }\n        }).getOr(blockPosition);\n      } else {\n        return blockPosition;\n      }\n    };\n    var readFromRange = function (rootNode, forward, rng) {\n      var fromBlockPos = getBlockPosition(rootNode, CaretPosition.fromRangeStart(rng));\n      var toBlockPos = fromBlockPos.bind(function (blockPos) {\n        return fromPosition(forward, rootNode, blockPos.position).bind(function (to) {\n          return getBlockPosition(rootNode, to).map(function (blockPos) {\n            return skipLastBr(rootNode, forward, blockPos);\n          });\n        });\n      });\n      return lift2(fromBlockPos, toBlockPos, blockBoundary).filter(function (blockBoundary) {\n        return isDifferentBlocks(blockBoundary) && hasSameParent(blockBoundary) && isEditable$1(blockBoundary);\n      });\n    };\n    var read$1 = function (rootNode, forward, rng) {\n      return rng.collapsed ? readFromRange(rootNode, forward, rng) : Optional.none();\n    };\n\n    var getChildrenUntilBlockBoundary = function (block) {\n      var children$1 = children(block);\n      return findIndex$2(children$1, isBlock$2).fold(constant(children$1), function (index) {\n        return children$1.slice(0, index);\n      });\n    };\n    var extractChildren = function (block) {\n      var children = getChildrenUntilBlockBoundary(block);\n      each$k(children, remove$7);\n      return children;\n    };\n    var removeEmptyRoot = function (rootNode, block) {\n      var parents = parentsAndSelf(block, rootNode);\n      return find$3(parents.reverse(), function (element) {\n        return isEmpty$2(element);\n      }).each(remove$7);\n    };\n    var isEmptyBefore = function (el) {\n      return filter$4(prevSiblings(el), function (el) {\n        return !isEmpty$2(el);\n      }).length === 0;\n    };\n    var nestedBlockMerge = function (rootNode, fromBlock, toBlock, insertionPoint) {\n      if (isEmpty$2(toBlock)) {\n        fillWithPaddingBr(toBlock);\n        return firstPositionIn(toBlock.dom);\n      }\n      if (isEmptyBefore(insertionPoint) && isEmpty$2(fromBlock)) {\n        before$4(insertionPoint, SugarElement.fromTag('br'));\n      }\n      var position = prevPosition(toBlock.dom, CaretPosition.before(insertionPoint.dom));\n      each$k(extractChildren(fromBlock), function (child) {\n        before$4(insertionPoint, child);\n      });\n      removeEmptyRoot(rootNode, fromBlock);\n      return position;\n    };\n    var sidelongBlockMerge = function (rootNode, fromBlock, toBlock) {\n      if (isEmpty$2(toBlock)) {\n        remove$7(toBlock);\n        if (isEmpty$2(fromBlock)) {\n          fillWithPaddingBr(fromBlock);\n        }\n        return firstPositionIn(fromBlock.dom);\n      }\n      var position = lastPositionIn(toBlock.dom);\n      each$k(extractChildren(fromBlock), function (child) {\n        append$1(toBlock, child);\n      });\n      removeEmptyRoot(rootNode, fromBlock);\n      return position;\n    };\n    var findInsertionPoint = function (toBlock, block) {\n      var parentsAndSelf$1 = parentsAndSelf(block, toBlock);\n      return Optional.from(parentsAndSelf$1[parentsAndSelf$1.length - 1]);\n    };\n    var getInsertionPoint = function (fromBlock, toBlock) {\n      return contains$1(toBlock, fromBlock) ? findInsertionPoint(toBlock, fromBlock) : Optional.none();\n    };\n    var trimBr = function (first, block) {\n      positionIn(first, block.dom).map(function (position) {\n        return position.getNode();\n      }).map(SugarElement.fromDom).filter(isBr$4).each(remove$7);\n    };\n    var mergeBlockInto = function (rootNode, fromBlock, toBlock) {\n      trimBr(true, fromBlock);\n      trimBr(false, toBlock);\n      return getInsertionPoint(fromBlock, toBlock).fold(curry(sidelongBlockMerge, rootNode, fromBlock, toBlock), curry(nestedBlockMerge, rootNode, fromBlock, toBlock));\n    };\n    var mergeBlocks = function (rootNode, forward, block1, block2) {\n      return forward ? mergeBlockInto(rootNode, block2, block1) : mergeBlockInto(rootNode, block1, block2);\n    };\n\n    var backspaceDelete$8 = function (editor, forward) {\n      var rootNode = SugarElement.fromDom(editor.getBody());\n      var position = read$1(rootNode.dom, forward, editor.selection.getRng()).bind(function (blockBoundary) {\n        return mergeBlocks(rootNode, forward, blockBoundary.from.block, blockBoundary.to.block);\n      });\n      position.each(function (pos) {\n        editor.selection.setRng(pos.toRange());\n      });\n      return position.isSome();\n    };\n\n    var deleteRangeMergeBlocks = function (rootNode, selection) {\n      var rng = selection.getRng();\n      return lift2(getParentBlock$1(rootNode, SugarElement.fromDom(rng.startContainer)), getParentBlock$1(rootNode, SugarElement.fromDom(rng.endContainer)), function (block1, block2) {\n        if (eq(block1, block2) === false) {\n          rng.deleteContents();\n          mergeBlocks(rootNode, true, block1, block2).each(function (pos) {\n            selection.setRng(pos.toRange());\n          });\n          return true;\n        } else {\n          return false;\n        }\n      }).getOr(false);\n    };\n    var isRawNodeInTable = function (root, rawNode) {\n      var node = SugarElement.fromDom(rawNode);\n      var isRoot = curry(eq, root);\n      return ancestor$3(node, isTableCell$4, isRoot).isSome();\n    };\n    var isSelectionInTable = function (root, rng) {\n      return isRawNodeInTable(root, rng.startContainer) || isRawNodeInTable(root, rng.endContainer);\n    };\n    var isEverythingSelected = function (root, rng) {\n      var noPrevious = prevPosition(root.dom, CaretPosition.fromRangeStart(rng)).isNone();\n      var noNext = nextPosition(root.dom, CaretPosition.fromRangeEnd(rng)).isNone();\n      return !isSelectionInTable(root, rng) && noPrevious && noNext;\n    };\n    var emptyEditor = function (editor) {\n      editor.setContent('');\n      editor.selection.setCursorLocation();\n      return true;\n    };\n    var deleteRange$1 = function (editor) {\n      var rootNode = SugarElement.fromDom(editor.getBody());\n      var rng = editor.selection.getRng();\n      return isEverythingSelected(rootNode, rng) ? emptyEditor(editor) : deleteRangeMergeBlocks(rootNode, editor.selection);\n    };\n    var backspaceDelete$7 = function (editor, _forward) {\n      return editor.selection.isCollapsed() ? false : deleteRange$1(editor);\n    };\n\n    var isContentEditableTrue$2 = isContentEditableTrue$4;\n    var isContentEditableFalse$4 = isContentEditableFalse$b;\n    var showCaret = function (direction, editor, node, before, scrollIntoView) {\n      return Optional.from(editor._selectionOverrides.showCaret(direction, node, before, scrollIntoView));\n    };\n    var getNodeRange = function (node) {\n      var rng = node.ownerDocument.createRange();\n      rng.selectNode(node);\n      return rng;\n    };\n    var selectNode = function (editor, node) {\n      var e = editor.fire('BeforeObjectSelected', { target: node });\n      if (e.isDefaultPrevented()) {\n        return Optional.none();\n      }\n      return Optional.some(getNodeRange(node));\n    };\n    var renderCaretAtRange = function (editor, range, scrollIntoView) {\n      var normalizedRange = normalizeRange(1, editor.getBody(), range);\n      var caretPosition = CaretPosition.fromRangeStart(normalizedRange);\n      var caretPositionNode = caretPosition.getNode();\n      if (isInlineFakeCaretTarget(caretPositionNode)) {\n        return showCaret(1, editor, caretPositionNode, !caretPosition.isAtEnd(), false);\n      }\n      var caretPositionBeforeNode = caretPosition.getNode(true);\n      if (isInlineFakeCaretTarget(caretPositionBeforeNode)) {\n        return showCaret(1, editor, caretPositionBeforeNode, false, false);\n      }\n      var ceRoot = editor.dom.getParent(caretPosition.getNode(), function (node) {\n        return isContentEditableFalse$4(node) || isContentEditableTrue$2(node);\n      });\n      if (isInlineFakeCaretTarget(ceRoot)) {\n        return showCaret(1, editor, ceRoot, false, scrollIntoView);\n      }\n      return Optional.none();\n    };\n    var renderRangeCaret = function (editor, range, scrollIntoView) {\n      return range.collapsed ? renderCaretAtRange(editor, range, scrollIntoView).getOr(range) : range;\n    };\n\n    var isBeforeBoundary = function (pos) {\n      return isBeforeContentEditableFalse(pos) || isBeforeMedia(pos);\n    };\n    var isAfterBoundary = function (pos) {\n      return isAfterContentEditableFalse(pos) || isAfterMedia(pos);\n    };\n    var trimEmptyTextNode = function (dom, node) {\n      if (isText$7(node) && node.data.length === 0) {\n        dom.remove(node);\n      }\n    };\n    var deleteContentAndShowCaret = function (editor, range, node, direction, forward, peekCaretPosition) {\n      showCaret(direction, editor, peekCaretPosition.getNode(!forward), forward, true).each(function (caretRange) {\n        if (range.collapsed) {\n          var deleteRange = range.cloneRange();\n          if (forward) {\n            deleteRange.setEnd(caretRange.startContainer, caretRange.startOffset);\n          } else {\n            deleteRange.setStart(caretRange.endContainer, caretRange.endOffset);\n          }\n          deleteRange.deleteContents();\n        } else {\n          range.deleteContents();\n        }\n        editor.selection.setRng(caretRange);\n      });\n      trimEmptyTextNode(editor.dom, node);\n      return true;\n    };\n    var deleteBoundaryText = function (editor, forward) {\n      var range = editor.selection.getRng();\n      if (!isText$7(range.commonAncestorContainer)) {\n        return false;\n      }\n      var direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      var caretWalker = CaretWalker(editor.getBody());\n      var getNextPosFn = curry(getVisualCaretPosition, forward ? caretWalker.next : caretWalker.prev);\n      var isBeforeFn = forward ? isBeforeBoundary : isAfterBoundary;\n      var caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      var nextCaretPosition = normalizePosition(forward, getNextPosFn(caretPosition));\n      if (!nextCaretPosition || !isMoveInsideSameBlock(caretPosition, nextCaretPosition)) {\n        return false;\n      } else if (isBeforeFn(nextCaretPosition)) {\n        return deleteContentAndShowCaret(editor, range, caretPosition.getNode(), direction, forward, nextCaretPosition);\n      }\n      var peekCaretPosition = getNextPosFn(nextCaretPosition);\n      if (peekCaretPosition && isBeforeFn(peekCaretPosition)) {\n        if (isMoveInsideSameBlock(nextCaretPosition, peekCaretPosition)) {\n          return deleteContentAndShowCaret(editor, range, caretPosition.getNode(), direction, forward, peekCaretPosition);\n        }\n      }\n      return false;\n    };\n    var backspaceDelete$6 = function (editor, forward) {\n      return deleteBoundaryText(editor, forward);\n    };\n\n    var isCompoundElement = function (node) {\n      return isTableCell$4(SugarElement.fromDom(node)) || isListItem(SugarElement.fromDom(node));\n    };\n    var DeleteAction = Adt.generate([\n      { remove: ['element'] },\n      { moveToElement: ['element'] },\n      { moveToPosition: ['position'] }\n    ]);\n    var isAtContentEditableBlockCaret = function (forward, from) {\n      var elm = from.getNode(forward === false);\n      var caretLocation = forward ? 'after' : 'before';\n      return isElement$5(elm) && elm.getAttribute('data-mce-caret') === caretLocation;\n    };\n    var isDeleteFromCefDifferentBlocks = function (root, forward, from, to) {\n      var inSameBlock = function (elm) {\n        return isInline$1(SugarElement.fromDom(elm)) && !isInSameBlock(from, to, root);\n      };\n      return getRelativeCefElm(!forward, from).fold(function () {\n        return getRelativeCefElm(forward, to).fold(never, inSameBlock);\n      }, inSameBlock);\n    };\n    var deleteEmptyBlockOrMoveToCef = function (root, forward, from, to) {\n      var toCefElm = to.getNode(forward === false);\n      return getParentBlock$1(SugarElement.fromDom(root), SugarElement.fromDom(from.getNode())).map(function (blockElm) {\n        return isEmpty$2(blockElm) ? DeleteAction.remove(blockElm.dom) : DeleteAction.moveToElement(toCefElm);\n      }).orThunk(function () {\n        return Optional.some(DeleteAction.moveToElement(toCefElm));\n      });\n    };\n    var findCefPosition = function (root, forward, from) {\n      return fromPosition(forward, root, from).bind(function (to) {\n        if (isCompoundElement(to.getNode())) {\n          return Optional.none();\n        } else if (isDeleteFromCefDifferentBlocks(root, forward, from, to)) {\n          return Optional.none();\n        } else if (forward && isContentEditableFalse$b(to.getNode())) {\n          return deleteEmptyBlockOrMoveToCef(root, forward, from, to);\n        } else if (forward === false && isContentEditableFalse$b(to.getNode(true))) {\n          return deleteEmptyBlockOrMoveToCef(root, forward, from, to);\n        } else if (forward && isAfterContentEditableFalse(from)) {\n          return Optional.some(DeleteAction.moveToPosition(to));\n        } else if (forward === false && isBeforeContentEditableFalse(from)) {\n          return Optional.some(DeleteAction.moveToPosition(to));\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var getContentEditableBlockAction = function (forward, elm) {\n      if (forward && isContentEditableFalse$b(elm.nextSibling)) {\n        return Optional.some(DeleteAction.moveToElement(elm.nextSibling));\n      } else if (forward === false && isContentEditableFalse$b(elm.previousSibling)) {\n        return Optional.some(DeleteAction.moveToElement(elm.previousSibling));\n      } else {\n        return Optional.none();\n      }\n    };\n    var skipMoveToActionFromInlineCefToContent = function (root, from, deleteAction) {\n      return deleteAction.fold(function (elm) {\n        return Optional.some(DeleteAction.remove(elm));\n      }, function (elm) {\n        return Optional.some(DeleteAction.moveToElement(elm));\n      }, function (to) {\n        if (isInSameBlock(from, to, root)) {\n          return Optional.none();\n        } else {\n          return Optional.some(DeleteAction.moveToPosition(to));\n        }\n      });\n    };\n    var getContentEditableAction = function (root, forward, from) {\n      if (isAtContentEditableBlockCaret(forward, from)) {\n        return getContentEditableBlockAction(forward, from.getNode(forward === false)).fold(function () {\n          return findCefPosition(root, forward, from);\n        }, Optional.some);\n      } else {\n        return findCefPosition(root, forward, from).bind(function (deleteAction) {\n          return skipMoveToActionFromInlineCefToContent(root, from, deleteAction);\n        });\n      }\n    };\n    var read = function (root, forward, rng) {\n      var normalizedRange = normalizeRange(forward ? 1 : -1, root, rng);\n      var from = CaretPosition.fromRangeStart(normalizedRange);\n      var rootElement = SugarElement.fromDom(root);\n      if (forward === false && isAfterContentEditableFalse(from)) {\n        return Optional.some(DeleteAction.remove(from.getNode(true)));\n      } else if (forward && isBeforeContentEditableFalse(from)) {\n        return Optional.some(DeleteAction.remove(from.getNode()));\n      } else if (forward === false && isBeforeContentEditableFalse(from) && isAfterBr(rootElement, from)) {\n        return findPreviousBr(rootElement, from).map(function (br) {\n          return DeleteAction.remove(br.getNode());\n        });\n      } else if (forward && isAfterContentEditableFalse(from) && isBeforeBr$1(rootElement, from)) {\n        return findNextBr(rootElement, from).map(function (br) {\n          return DeleteAction.remove(br.getNode());\n        });\n      } else {\n        return getContentEditableAction(root, forward, from);\n      }\n    };\n\n    var deleteElement$1 = function (editor, forward) {\n      return function (element) {\n        editor._selectionOverrides.hideFakeCaret();\n        deleteElement$2(editor, forward, SugarElement.fromDom(element));\n        return true;\n      };\n    };\n    var moveToElement = function (editor, forward) {\n      return function (element) {\n        var pos = forward ? CaretPosition.before(element) : CaretPosition.after(element);\n        editor.selection.setRng(pos.toRange());\n        return true;\n      };\n    };\n    var moveToPosition = function (editor) {\n      return function (pos) {\n        editor.selection.setRng(pos.toRange());\n        return true;\n      };\n    };\n    var getAncestorCe = function (editor, node) {\n      return Optional.from(getContentEditableRoot$1(editor.getBody(), node));\n    };\n    var backspaceDeleteCaret = function (editor, forward) {\n      var selectedNode = editor.selection.getNode();\n      return getAncestorCe(editor, selectedNode).filter(isContentEditableFalse$b).fold(function () {\n        return read(editor.getBody(), forward, editor.selection.getRng()).exists(function (deleteAction) {\n          return deleteAction.fold(deleteElement$1(editor, forward), moveToElement(editor, forward), moveToPosition(editor));\n        });\n      }, always);\n    };\n    var deleteOffscreenSelection = function (rootElement) {\n      each$k(descendants(rootElement, '.mce-offscreen-selection'), remove$7);\n    };\n    var backspaceDeleteRange = function (editor, forward) {\n      var selectedNode = editor.selection.getNode();\n      if (isContentEditableFalse$b(selectedNode) && !isTableCell$5(selectedNode)) {\n        var hasCefAncestor = getAncestorCe(editor, selectedNode.parentNode).filter(isContentEditableFalse$b);\n        return hasCefAncestor.fold(function () {\n          deleteOffscreenSelection(SugarElement.fromDom(editor.getBody()));\n          deleteElement$2(editor, forward, SugarElement.fromDom(editor.selection.getNode()));\n          paddEmptyBody(editor);\n          return true;\n        }, always);\n      }\n      return false;\n    };\n    var paddEmptyElement = function (editor) {\n      var dom = editor.dom, selection = editor.selection;\n      var ceRoot = getContentEditableRoot$1(editor.getBody(), selection.getNode());\n      if (isContentEditableTrue$4(ceRoot) && dom.isBlock(ceRoot) && dom.isEmpty(ceRoot)) {\n        var br = dom.create('br', { 'data-mce-bogus': '1' });\n        dom.setHTML(ceRoot, '');\n        ceRoot.appendChild(br);\n        selection.setRng(CaretPosition.before(br).toRange());\n      }\n      return true;\n    };\n    var backspaceDelete$5 = function (editor, forward) {\n      if (editor.selection.isCollapsed()) {\n        return backspaceDeleteCaret(editor, forward);\n      } else {\n        return backspaceDeleteRange(editor, forward);\n      }\n    };\n\n    var deleteCaret$2 = function (editor, forward) {\n      var fromPos = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return fromPosition(forward, editor.getBody(), fromPos).filter(function (pos) {\n        return forward ? isBeforeImageBlock(pos) : isAfterImageBlock(pos);\n      }).bind(function (pos) {\n        return Optional.from(getChildNodeAtRelativeOffset(forward ? 0 : -1, pos));\n      }).exists(function (elm) {\n        editor.selection.select(elm);\n        return true;\n      });\n    };\n    var backspaceDelete$4 = function (editor, forward) {\n      return editor.selection.isCollapsed() ? deleteCaret$2(editor, forward) : false;\n    };\n\n    var isText = isText$7;\n    var startsWithCaretContainer = function (node) {\n      return isText(node) && node.data[0] === ZWSP$1;\n    };\n    var endsWithCaretContainer = function (node) {\n      return isText(node) && node.data[node.data.length - 1] === ZWSP$1;\n    };\n    var createZwsp = function (node) {\n      return node.ownerDocument.createTextNode(ZWSP$1);\n    };\n    var insertBefore = function (node) {\n      if (isText(node.previousSibling)) {\n        if (endsWithCaretContainer(node.previousSibling)) {\n          return node.previousSibling;\n        } else {\n          node.previousSibling.appendData(ZWSP$1);\n          return node.previousSibling;\n        }\n      } else if (isText(node)) {\n        if (startsWithCaretContainer(node)) {\n          return node;\n        } else {\n          node.insertData(0, ZWSP$1);\n          return node;\n        }\n      } else {\n        var newNode = createZwsp(node);\n        node.parentNode.insertBefore(newNode, node);\n        return newNode;\n      }\n    };\n    var insertAfter = function (node) {\n      if (isText(node.nextSibling)) {\n        if (startsWithCaretContainer(node.nextSibling)) {\n          return node.nextSibling;\n        } else {\n          node.nextSibling.insertData(0, ZWSP$1);\n          return node.nextSibling;\n        }\n      } else if (isText(node)) {\n        if (endsWithCaretContainer(node)) {\n          return node;\n        } else {\n          node.appendData(ZWSP$1);\n          return node;\n        }\n      } else {\n        var newNode = createZwsp(node);\n        if (node.nextSibling) {\n          node.parentNode.insertBefore(newNode, node.nextSibling);\n        } else {\n          node.parentNode.appendChild(newNode);\n        }\n        return newNode;\n      }\n    };\n    var insertInline = function (before, node) {\n      return before ? insertBefore(node) : insertAfter(node);\n    };\n    var insertInlineBefore = curry(insertInline, true);\n    var insertInlineAfter = curry(insertInline, false);\n\n    var insertInlinePos = function (pos, before) {\n      if (isText$7(pos.container())) {\n        return insertInline(before, pos.container());\n      } else {\n        return insertInline(before, pos.getNode());\n      }\n    };\n    var isPosCaretContainer = function (pos, caret) {\n      var caretNode = caret.get();\n      return caretNode && pos.container() === caretNode && isCaretContainerInline(caretNode);\n    };\n    var renderCaret = function (caret, location) {\n      return location.fold(function (element) {\n        remove$2(caret.get());\n        var text = insertInlineBefore(element);\n        caret.set(text);\n        return Optional.some(CaretPosition(text, text.length - 1));\n      }, function (element) {\n        return firstPositionIn(element).map(function (pos) {\n          if (!isPosCaretContainer(pos, caret)) {\n            remove$2(caret.get());\n            var text = insertInlinePos(pos, true);\n            caret.set(text);\n            return CaretPosition(text, 1);\n          } else {\n            return CaretPosition(caret.get(), 1);\n          }\n        });\n      }, function (element) {\n        return lastPositionIn(element).map(function (pos) {\n          if (!isPosCaretContainer(pos, caret)) {\n            remove$2(caret.get());\n            var text = insertInlinePos(pos, false);\n            caret.set(text);\n            return CaretPosition(text, text.length - 1);\n          } else {\n            return CaretPosition(caret.get(), caret.get().length - 1);\n          }\n        });\n      }, function (element) {\n        remove$2(caret.get());\n        var text = insertInlineAfter(element);\n        caret.set(text);\n        return Optional.some(CaretPosition(text, 1));\n      });\n    };\n\n    var evaluateUntil = function (fns, args) {\n      for (var i = 0; i < fns.length; i++) {\n        var result = fns[i].apply(null, args);\n        if (result.isSome()) {\n          return result;\n        }\n      }\n      return Optional.none();\n    };\n\n    var Location = Adt.generate([\n      { before: ['element'] },\n      { start: ['element'] },\n      { end: ['element'] },\n      { after: ['element'] }\n    ]);\n    var rescope$1 = function (rootNode, node) {\n      var parentBlock = getParentBlock$2(node, rootNode);\n      return parentBlock ? parentBlock : rootNode;\n    };\n    var before = function (isInlineTarget, rootNode, pos) {\n      var nPos = normalizeForwards(pos);\n      var scope = rescope$1(rootNode, nPos.container());\n      return findRootInline(isInlineTarget, scope, nPos).fold(function () {\n        return nextPosition(scope, nPos).bind(curry(findRootInline, isInlineTarget, scope)).map(function (inline) {\n          return Location.before(inline);\n        });\n      }, Optional.none);\n    };\n    var isNotInsideFormatCaretContainer = function (rootNode, elm) {\n      return getParentCaretContainer(rootNode, elm) === null;\n    };\n    var findInsideRootInline = function (isInlineTarget, rootNode, pos) {\n      return findRootInline(isInlineTarget, rootNode, pos).filter(curry(isNotInsideFormatCaretContainer, rootNode));\n    };\n    var start$1 = function (isInlineTarget, rootNode, pos) {\n      var nPos = normalizeBackwards(pos);\n      return findInsideRootInline(isInlineTarget, rootNode, nPos).bind(function (inline) {\n        var prevPos = prevPosition(inline, nPos);\n        return prevPos.isNone() ? Optional.some(Location.start(inline)) : Optional.none();\n      });\n    };\n    var end = function (isInlineTarget, rootNode, pos) {\n      var nPos = normalizeForwards(pos);\n      return findInsideRootInline(isInlineTarget, rootNode, nPos).bind(function (inline) {\n        var nextPos = nextPosition(inline, nPos);\n        return nextPos.isNone() ? Optional.some(Location.end(inline)) : Optional.none();\n      });\n    };\n    var after = function (isInlineTarget, rootNode, pos) {\n      var nPos = normalizeBackwards(pos);\n      var scope = rescope$1(rootNode, nPos.container());\n      return findRootInline(isInlineTarget, scope, nPos).fold(function () {\n        return prevPosition(scope, nPos).bind(curry(findRootInline, isInlineTarget, scope)).map(function (inline) {\n          return Location.after(inline);\n        });\n      }, Optional.none);\n    };\n    var isValidLocation = function (location) {\n      return isRtl(getElement(location)) === false;\n    };\n    var readLocation = function (isInlineTarget, rootNode, pos) {\n      var location = evaluateUntil([\n        before,\n        start$1,\n        end,\n        after\n      ], [\n        isInlineTarget,\n        rootNode,\n        pos\n      ]);\n      return location.filter(isValidLocation);\n    };\n    var getElement = function (location) {\n      return location.fold(identity, identity, identity, identity);\n    };\n    var getName = function (location) {\n      return location.fold(constant('before'), constant('start'), constant('end'), constant('after'));\n    };\n    var outside = function (location) {\n      return location.fold(Location.before, Location.before, Location.after, Location.after);\n    };\n    var inside = function (location) {\n      return location.fold(Location.start, Location.start, Location.end, Location.end);\n    };\n    var isEq = function (location1, location2) {\n      return getName(location1) === getName(location2) && getElement(location1) === getElement(location2);\n    };\n    var betweenInlines = function (forward, isInlineTarget, rootNode, from, to, location) {\n      return lift2(findRootInline(isInlineTarget, rootNode, from), findRootInline(isInlineTarget, rootNode, to), function (fromInline, toInline) {\n        if (fromInline !== toInline && hasSameParentBlock(rootNode, fromInline, toInline)) {\n          return Location.after(forward ? fromInline : toInline);\n        } else {\n          return location;\n        }\n      }).getOr(location);\n    };\n    var skipNoMovement = function (fromLocation, toLocation) {\n      return fromLocation.fold(always, function (fromLocation) {\n        return !isEq(fromLocation, toLocation);\n      });\n    };\n    var findLocationTraverse = function (forward, isInlineTarget, rootNode, fromLocation, pos) {\n      var from = normalizePosition(forward, pos);\n      var to = fromPosition(forward, rootNode, from).map(curry(normalizePosition, forward));\n      var location = to.fold(function () {\n        return fromLocation.map(outside);\n      }, function (to) {\n        return readLocation(isInlineTarget, rootNode, to).map(curry(betweenInlines, forward, isInlineTarget, rootNode, from, to)).filter(curry(skipNoMovement, fromLocation));\n      });\n      return location.filter(isValidLocation);\n    };\n    var findLocationSimple = function (forward, location) {\n      if (forward) {\n        return location.fold(compose(Optional.some, Location.start), Optional.none, compose(Optional.some, Location.after), Optional.none);\n      } else {\n        return location.fold(Optional.none, compose(Optional.some, Location.before), Optional.none, compose(Optional.some, Location.end));\n      }\n    };\n    var findLocation$1 = function (forward, isInlineTarget, rootNode, pos) {\n      var from = normalizePosition(forward, pos);\n      var fromLocation = readLocation(isInlineTarget, rootNode, from);\n      return readLocation(isInlineTarget, rootNode, from).bind(curry(findLocationSimple, forward)).orThunk(function () {\n        return findLocationTraverse(forward, isInlineTarget, rootNode, fromLocation, pos);\n      });\n    };\n    curry(findLocation$1, false);\n    curry(findLocation$1, true);\n\n    var hasSelectionModifyApi = function (editor) {\n      return isFunction(editor.selection.getSel().modify);\n    };\n    var moveRel = function (forward, selection, pos) {\n      var delta = forward ? 1 : -1;\n      selection.setRng(CaretPosition(pos.container(), pos.offset() + delta).toRange());\n      selection.getSel().modify('move', forward ? 'forward' : 'backward', 'word');\n      return true;\n    };\n    var moveByWord = function (forward, editor) {\n      var rng = editor.selection.getRng();\n      var pos = forward ? CaretPosition.fromRangeEnd(rng) : CaretPosition.fromRangeStart(rng);\n      if (!hasSelectionModifyApi(editor)) {\n        return false;\n      } else if (forward && isBeforeInline(pos)) {\n        return moveRel(true, editor.selection, pos);\n      } else if (!forward && isAfterInline(pos)) {\n        return moveRel(false, editor.selection, pos);\n      } else {\n        return false;\n      }\n    };\n\n    var BreakType;\n    (function (BreakType) {\n      BreakType[BreakType['Br'] = 0] = 'Br';\n      BreakType[BreakType['Block'] = 1] = 'Block';\n      BreakType[BreakType['Wrap'] = 2] = 'Wrap';\n      BreakType[BreakType['Eol'] = 3] = 'Eol';\n    }(BreakType || (BreakType = {})));\n    var flip = function (direction, positions) {\n      return direction === HDirection.Backwards ? reverse(positions) : positions;\n    };\n    var walk = function (direction, caretWalker, pos) {\n      return direction === HDirection.Forwards ? caretWalker.next(pos) : caretWalker.prev(pos);\n    };\n    var getBreakType = function (scope, direction, currentPos, nextPos) {\n      if (isBr$5(nextPos.getNode(direction === HDirection.Forwards))) {\n        return BreakType.Br;\n      } else if (isInSameBlock(currentPos, nextPos) === false) {\n        return BreakType.Block;\n      } else {\n        return BreakType.Wrap;\n      }\n    };\n    var getPositionsUntil = function (predicate, direction, scope, start) {\n      var caretWalker = CaretWalker(scope);\n      var currentPos = start;\n      var positions = [];\n      while (currentPos) {\n        var nextPos = walk(direction, caretWalker, currentPos);\n        if (!nextPos) {\n          break;\n        }\n        if (isBr$5(nextPos.getNode(false))) {\n          if (direction === HDirection.Forwards) {\n            return {\n              positions: flip(direction, positions).concat([nextPos]),\n              breakType: BreakType.Br,\n              breakAt: Optional.some(nextPos)\n            };\n          } else {\n            return {\n              positions: flip(direction, positions),\n              breakType: BreakType.Br,\n              breakAt: Optional.some(nextPos)\n            };\n          }\n        }\n        if (!nextPos.isVisible()) {\n          currentPos = nextPos;\n          continue;\n        }\n        if (predicate(currentPos, nextPos)) {\n          var breakType = getBreakType(scope, direction, currentPos, nextPos);\n          return {\n            positions: flip(direction, positions),\n            breakType: breakType,\n            breakAt: Optional.some(nextPos)\n          };\n        }\n        positions.push(nextPos);\n        currentPos = nextPos;\n      }\n      return {\n        positions: flip(direction, positions),\n        breakType: BreakType.Eol,\n        breakAt: Optional.none()\n      };\n    };\n    var getAdjacentLinePositions = function (direction, getPositionsUntilBreak, scope, start) {\n      return getPositionsUntilBreak(scope, start).breakAt.map(function (pos) {\n        var positions = getPositionsUntilBreak(scope, pos).positions;\n        return direction === HDirection.Backwards ? positions.concat(pos) : [pos].concat(positions);\n      }).getOr([]);\n    };\n    var findClosestHorizontalPositionFromPoint = function (positions, x) {\n      return foldl(positions, function (acc, newPos) {\n        return acc.fold(function () {\n          return Optional.some(newPos);\n        }, function (lastPos) {\n          return lift2(head(lastPos.getClientRects()), head(newPos.getClientRects()), function (lastRect, newRect) {\n            var lastDist = Math.abs(x - lastRect.left);\n            var newDist = Math.abs(x - newRect.left);\n            return newDist <= lastDist ? newPos : lastPos;\n          }).or(acc);\n        });\n      }, Optional.none());\n    };\n    var findClosestHorizontalPosition = function (positions, pos) {\n      return head(pos.getClientRects()).bind(function (targetRect) {\n        return findClosestHorizontalPositionFromPoint(positions, targetRect.left);\n      });\n    };\n    var getPositionsUntilPreviousLine = curry(getPositionsUntil, CaretPosition.isAbove, -1);\n    var getPositionsUntilNextLine = curry(getPositionsUntil, CaretPosition.isBelow, 1);\n    var getPositionsAbove = curry(getAdjacentLinePositions, -1, getPositionsUntilPreviousLine);\n    var getPositionsBelow = curry(getAdjacentLinePositions, 1, getPositionsUntilNextLine);\n    var isAtFirstLine = function (scope, pos) {\n      return getPositionsUntilPreviousLine(scope, pos).breakAt.isNone();\n    };\n    var isAtLastLine = function (scope, pos) {\n      return getPositionsUntilNextLine(scope, pos).breakAt.isNone();\n    };\n    var getFirstLinePositions = function (scope) {\n      return firstPositionIn(scope).map(function (pos) {\n        return [pos].concat(getPositionsUntilNextLine(scope, pos).positions);\n      }).getOr([]);\n    };\n    var getLastLinePositions = function (scope) {\n      return lastPositionIn(scope).map(function (pos) {\n        return getPositionsUntilPreviousLine(scope, pos).positions.concat(pos);\n      }).getOr([]);\n    };\n\n    var getNodeClientRects = function (node) {\n      var toArrayWithNode = function (clientRects) {\n        return map$3(clientRects, function (rect) {\n          var clientRect = clone(rect);\n          clientRect.node = node;\n          return clientRect;\n        });\n      };\n      if (isElement$5(node)) {\n        return toArrayWithNode(node.getClientRects());\n      }\n      if (isText$7(node)) {\n        var rng = node.ownerDocument.createRange();\n        rng.setStart(node, 0);\n        rng.setEnd(node, node.data.length);\n        return toArrayWithNode(rng.getClientRects());\n      }\n    };\n    var getClientRects = function (nodes) {\n      return bind(nodes, getNodeClientRects);\n    };\n\n    var VDirection;\n    (function (VDirection) {\n      VDirection[VDirection['Up'] = -1] = 'Up';\n      VDirection[VDirection['Down'] = 1] = 'Down';\n    }(VDirection || (VDirection = {})));\n    var findUntil = function (direction, root, predicateFn, node) {\n      while (node = findNode$1(node, direction, isEditableCaretCandidate$1, root)) {\n        if (predicateFn(node)) {\n          return;\n        }\n      }\n    };\n    var walkUntil$1 = function (direction, isAboveFn, isBeflowFn, root, predicateFn, caretPosition) {\n      var line = 0;\n      var result = [];\n      var add = function (node) {\n        var clientRects = getClientRects([node]);\n        if (direction === -1) {\n          clientRects = clientRects.reverse();\n        }\n        for (var i = 0; i < clientRects.length; i++) {\n          var clientRect = clientRects[i];\n          if (isBeflowFn(clientRect, targetClientRect)) {\n            continue;\n          }\n          if (result.length > 0 && isAboveFn(clientRect, last$1(result))) {\n            line++;\n          }\n          clientRect.line = line;\n          if (predicateFn(clientRect)) {\n            return true;\n          }\n          result.push(clientRect);\n        }\n      };\n      var targetClientRect = last$1(caretPosition.getClientRects());\n      if (!targetClientRect) {\n        return result;\n      }\n      var node = caretPosition.getNode();\n      add(node);\n      findUntil(direction, root, add, node);\n      return result;\n    };\n    var aboveLineNumber = function (lineNumber, clientRect) {\n      return clientRect.line > lineNumber;\n    };\n    var isLineNumber = function (lineNumber, clientRect) {\n      return clientRect.line === lineNumber;\n    };\n    var upUntil = curry(walkUntil$1, VDirection.Up, isAbove$1, isBelow$1);\n    var downUntil = curry(walkUntil$1, VDirection.Down, isBelow$1, isAbove$1);\n    var positionsUntil = function (direction, root, predicateFn, node) {\n      var caretWalker = CaretWalker(root);\n      var walkFn;\n      var isBelowFn;\n      var isAboveFn;\n      var caretPosition;\n      var result = [];\n      var line = 0;\n      var getClientRect = function (caretPosition) {\n        if (direction === 1) {\n          return last$1(caretPosition.getClientRects());\n        }\n        return last$1(caretPosition.getClientRects());\n      };\n      if (direction === 1) {\n        walkFn = caretWalker.next;\n        isBelowFn = isBelow$1;\n        isAboveFn = isAbove$1;\n        caretPosition = CaretPosition.after(node);\n      } else {\n        walkFn = caretWalker.prev;\n        isBelowFn = isAbove$1;\n        isAboveFn = isBelow$1;\n        caretPosition = CaretPosition.before(node);\n      }\n      var targetClientRect = getClientRect(caretPosition);\n      do {\n        if (!caretPosition.isVisible()) {\n          continue;\n        }\n        var rect = getClientRect(caretPosition);\n        if (isAboveFn(rect, targetClientRect)) {\n          continue;\n        }\n        if (result.length > 0 && isBelowFn(rect, last$1(result))) {\n          line++;\n        }\n        var clientRect = clone(rect);\n        clientRect.position = caretPosition;\n        clientRect.line = line;\n        if (predicateFn(clientRect)) {\n          return result;\n        }\n        result.push(clientRect);\n      } while (caretPosition = walkFn(caretPosition));\n      return result;\n    };\n    var isAboveLine = function (lineNumber) {\n      return function (clientRect) {\n        return aboveLineNumber(lineNumber, clientRect);\n      };\n    };\n    var isLine = function (lineNumber) {\n      return function (clientRect) {\n        return isLineNumber(lineNumber, clientRect);\n      };\n    };\n\n    var isContentEditableFalse$3 = isContentEditableFalse$b;\n    var findNode = findNode$1;\n    var distanceToRectLeft = function (clientRect, clientX) {\n      return Math.abs(clientRect.left - clientX);\n    };\n    var distanceToRectRight = function (clientRect, clientX) {\n      return Math.abs(clientRect.right - clientX);\n    };\n    var isInsideX = function (clientX, clientRect) {\n      return clientX >= clientRect.left && clientX <= clientRect.right;\n    };\n    var isInsideY = function (clientY, clientRect) {\n      return clientY >= clientRect.top && clientY <= clientRect.bottom;\n    };\n    var isNodeClientRect = function (rect) {\n      return hasNonNullableKey(rect, 'node');\n    };\n    var findClosestClientRect = function (clientRects, clientX, allowInside) {\n      if (allowInside === void 0) {\n        allowInside = always;\n      }\n      return reduce(clientRects, function (oldClientRect, clientRect) {\n        if (isInsideX(clientX, clientRect)) {\n          return allowInside(clientRect) ? clientRect : oldClientRect;\n        }\n        if (isInsideX(clientX, oldClientRect)) {\n          return allowInside(oldClientRect) ? oldClientRect : clientRect;\n        }\n        var oldDistance = Math.min(distanceToRectLeft(oldClientRect, clientX), distanceToRectRight(oldClientRect, clientX));\n        var newDistance = Math.min(distanceToRectLeft(clientRect, clientX), distanceToRectRight(clientRect, clientX));\n        if (newDistance === oldDistance && isNodeClientRect(clientRect) && isContentEditableFalse$3(clientRect.node)) {\n          return clientRect;\n        }\n        if (newDistance < oldDistance) {\n          return clientRect;\n        }\n        return oldClientRect;\n      });\n    };\n    var walkUntil = function (direction, root, predicateFn, startNode, includeChildren) {\n      var node = findNode(startNode, direction, isEditableCaretCandidate$1, root, !includeChildren);\n      do {\n        if (!node || predicateFn(node)) {\n          return;\n        }\n      } while (node = findNode(node, direction, isEditableCaretCandidate$1, root));\n    };\n    var findLineNodeRects = function (root, targetNodeRect, includeChildren) {\n      if (includeChildren === void 0) {\n        includeChildren = true;\n      }\n      var clientRects = [];\n      var collect = function (checkPosFn, node) {\n        var lineRects = filter$4(getClientRects([node]), function (clientRect) {\n          return !checkPosFn(clientRect, targetNodeRect);\n        });\n        clientRects = clientRects.concat(lineRects);\n        return lineRects.length === 0;\n      };\n      clientRects.push(targetNodeRect);\n      walkUntil(VDirection.Up, root, curry(collect, isAbove$1), targetNodeRect.node, includeChildren);\n      walkUntil(VDirection.Down, root, curry(collect, isBelow$1), targetNodeRect.node, includeChildren);\n      return clientRects;\n    };\n    var getFakeCaretTargets = function (root) {\n      return filter$4(from(root.getElementsByTagName('*')), isFakeCaretTarget);\n    };\n    var caretInfo = function (clientRect, clientX) {\n      return {\n        node: clientRect.node,\n        before: distanceToRectLeft(clientRect, clientX) < distanceToRectRight(clientRect, clientX)\n      };\n    };\n    var closestFakeCaret = function (root, clientX, clientY) {\n      var fakeTargetNodeRects = getClientRects(getFakeCaretTargets(root));\n      var targetNodeRects = filter$4(fakeTargetNodeRects, curry(isInsideY, clientY));\n      var checkInside = function (clientRect) {\n        return !isTable$3(clientRect.node) && !isMedia$2(clientRect.node);\n      };\n      var closestNodeRect = findClosestClientRect(targetNodeRects, clientX, checkInside);\n      if (closestNodeRect) {\n        var includeChildren = checkInside(closestNodeRect);\n        closestNodeRect = findClosestClientRect(findLineNodeRects(root, closestNodeRect, includeChildren), clientX, checkInside);\n        if (closestNodeRect && isFakeCaretTarget(closestNodeRect.node)) {\n          return caretInfo(closestNodeRect, clientX);\n        }\n      }\n      return null;\n    };\n\n    var moveToRange = function (editor, rng) {\n      editor.selection.setRng(rng);\n      scrollRangeIntoView(editor, editor.selection.getRng());\n    };\n    var renderRangeCaretOpt = function (editor, range, scrollIntoView) {\n      return Optional.some(renderRangeCaret(editor, range, scrollIntoView));\n    };\n    var moveHorizontally = function (editor, direction, range, isBefore, isAfter, isElement) {\n      var forwards = direction === HDirection.Forwards;\n      var caretWalker = CaretWalker(editor.getBody());\n      var getNextPosFn = curry(getVisualCaretPosition, forwards ? caretWalker.next : caretWalker.prev);\n      var isBeforeFn = forwards ? isBefore : isAfter;\n      if (!range.collapsed) {\n        var node = getSelectedNode(range);\n        if (isElement(node)) {\n          return showCaret(direction, editor, node, direction === HDirection.Backwards, false);\n        }\n      }\n      var caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      if (isBeforeFn(caretPosition)) {\n        return selectNode(editor, caretPosition.getNode(!forwards));\n      }\n      var nextCaretPosition = normalizePosition(forwards, getNextPosFn(caretPosition));\n      var rangeIsInContainerBlock = isRangeInCaretContainerBlock(range);\n      if (!nextCaretPosition) {\n        return rangeIsInContainerBlock ? Optional.some(range) : Optional.none();\n      }\n      if (isBeforeFn(nextCaretPosition)) {\n        return showCaret(direction, editor, nextCaretPosition.getNode(!forwards), forwards, false);\n      }\n      var peekCaretPosition = getNextPosFn(nextCaretPosition);\n      if (peekCaretPosition && isBeforeFn(peekCaretPosition)) {\n        if (isMoveInsideSameBlock(nextCaretPosition, peekCaretPosition)) {\n          return showCaret(direction, editor, peekCaretPosition.getNode(!forwards), forwards, false);\n        }\n      }\n      if (rangeIsInContainerBlock) {\n        return renderRangeCaretOpt(editor, nextCaretPosition.toRange(), false);\n      }\n      return Optional.none();\n    };\n    var moveVertically = function (editor, direction, range, isBefore, isAfter, isElement) {\n      var caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      var caretClientRect = last$1(caretPosition.getClientRects());\n      var forwards = direction === VDirection.Down;\n      if (!caretClientRect) {\n        return Optional.none();\n      }\n      var walkerFn = forwards ? downUntil : upUntil;\n      var linePositions = walkerFn(editor.getBody(), isAboveLine(1), caretPosition);\n      var nextLinePositions = filter$4(linePositions, isLine(1));\n      var clientX = caretClientRect.left;\n      var nextLineRect = findClosestClientRect(nextLinePositions, clientX);\n      if (nextLineRect && isElement(nextLineRect.node)) {\n        var dist1 = Math.abs(clientX - nextLineRect.left);\n        var dist2 = Math.abs(clientX - nextLineRect.right);\n        return showCaret(direction, editor, nextLineRect.node, dist1 < dist2, false);\n      }\n      var currentNode;\n      if (isBefore(caretPosition)) {\n        currentNode = caretPosition.getNode();\n      } else if (isAfter(caretPosition)) {\n        currentNode = caretPosition.getNode(true);\n      } else {\n        currentNode = getSelectedNode(range);\n      }\n      if (currentNode) {\n        var caretPositions = positionsUntil(direction, editor.getBody(), isAboveLine(1), currentNode);\n        var closestNextLineRect = findClosestClientRect(filter$4(caretPositions, isLine(1)), clientX);\n        if (closestNextLineRect) {\n          return renderRangeCaretOpt(editor, closestNextLineRect.position.toRange(), false);\n        }\n        closestNextLineRect = last$1(filter$4(caretPositions, isLine(0)));\n        if (closestNextLineRect) {\n          return renderRangeCaretOpt(editor, closestNextLineRect.position.toRange(), false);\n        }\n      }\n      if (nextLinePositions.length === 0) {\n        return getLineEndPoint(editor, forwards).filter(forwards ? isAfter : isBefore).map(function (pos) {\n          return renderRangeCaret(editor, pos.toRange(), false);\n        });\n      }\n      return Optional.none();\n    };\n    var getLineEndPoint = function (editor, forward) {\n      var rng = editor.selection.getRng();\n      var body = editor.getBody();\n      if (forward) {\n        var from = CaretPosition.fromRangeEnd(rng);\n        var result = getPositionsUntilNextLine(body, from);\n        return last$2(result.positions);\n      } else {\n        var from = CaretPosition.fromRangeStart(rng);\n        var result = getPositionsUntilPreviousLine(body, from);\n        return head(result.positions);\n      }\n    };\n    var moveToLineEndPoint$3 = function (editor, forward, isElementPosition) {\n      return getLineEndPoint(editor, forward).filter(isElementPosition).exists(function (pos) {\n        editor.selection.setRng(pos.toRange());\n        return true;\n      });\n    };\n\n    var setCaretPosition = function (editor, pos) {\n      var rng = editor.dom.createRng();\n      rng.setStart(pos.container(), pos.offset());\n      rng.setEnd(pos.container(), pos.offset());\n      editor.selection.setRng(rng);\n    };\n    var setSelected = function (state, elm) {\n      if (state) {\n        elm.setAttribute('data-mce-selected', 'inline-boundary');\n      } else {\n        elm.removeAttribute('data-mce-selected');\n      }\n    };\n    var renderCaretLocation = function (editor, caret, location) {\n      return renderCaret(caret, location).map(function (pos) {\n        setCaretPosition(editor, pos);\n        return location;\n      });\n    };\n    var findLocation = function (editor, caret, forward) {\n      var rootNode = editor.getBody();\n      var from = CaretPosition.fromRangeStart(editor.selection.getRng());\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\n      var location = findLocation$1(forward, isInlineTarget$1, rootNode, from);\n      return location.bind(function (location) {\n        return renderCaretLocation(editor, caret, location);\n      });\n    };\n    var toggleInlines = function (isInlineTarget, dom, elms) {\n      var inlineBoundaries = map$3(descendants(SugarElement.fromDom(dom.getRoot()), '*[data-mce-selected=\"inline-boundary\"]'), function (e) {\n        return e.dom;\n      });\n      var selectedInlines = filter$4(inlineBoundaries, isInlineTarget);\n      var targetInlines = filter$4(elms, isInlineTarget);\n      each$k(difference(selectedInlines, targetInlines), curry(setSelected, false));\n      each$k(difference(targetInlines, selectedInlines), curry(setSelected, true));\n    };\n    var safeRemoveCaretContainer = function (editor, caret) {\n      if (editor.selection.isCollapsed() && editor.composing !== true && caret.get()) {\n        var pos = CaretPosition.fromRangeStart(editor.selection.getRng());\n        if (CaretPosition.isTextPosition(pos) && isAtZwsp(pos) === false) {\n          setCaretPosition(editor, removeAndReposition(caret.get(), pos));\n          caret.set(null);\n        }\n      }\n    };\n    var renderInsideInlineCaret = function (isInlineTarget, editor, caret, elms) {\n      if (editor.selection.isCollapsed()) {\n        var inlines = filter$4(elms, isInlineTarget);\n        each$k(inlines, function (_inline) {\n          var pos = CaretPosition.fromRangeStart(editor.selection.getRng());\n          readLocation(isInlineTarget, editor.getBody(), pos).bind(function (location) {\n            return renderCaretLocation(editor, caret, location);\n          });\n        });\n      }\n    };\n    var move$2 = function (editor, caret, forward) {\n      return isInlineBoundariesEnabled(editor) ? findLocation(editor, caret, forward).isSome() : false;\n    };\n    var moveWord = function (forward, editor, _caret) {\n      return isInlineBoundariesEnabled(editor) ? moveByWord(forward, editor) : false;\n    };\n    var setupSelectedState = function (editor) {\n      var caret = Cell(null);\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\n      editor.on('NodeChange', function (e) {\n        if (isInlineBoundariesEnabled(editor) && !(Env.browser.isIE() && e.initial)) {\n          toggleInlines(isInlineTarget$1, editor.dom, e.parents);\n          safeRemoveCaretContainer(editor, caret);\n          renderInsideInlineCaret(isInlineTarget$1, editor, caret, e.parents);\n        }\n      });\n      return caret;\n    };\n    var moveNextWord = curry(moveWord, true);\n    var movePrevWord = curry(moveWord, false);\n    var moveToLineEndPoint$2 = function (editor, forward, caret) {\n      if (isInlineBoundariesEnabled(editor)) {\n        var linePoint = getLineEndPoint(editor, forward).getOrThunk(function () {\n          var rng = editor.selection.getRng();\n          return forward ? CaretPosition.fromRangeEnd(rng) : CaretPosition.fromRangeStart(rng);\n        });\n        return readLocation(curry(isInlineTarget, editor), editor.getBody(), linePoint).exists(function (loc) {\n          var outsideLoc = outside(loc);\n          return renderCaret(caret, outsideLoc).exists(function (pos) {\n            setCaretPosition(editor, pos);\n            return true;\n          });\n        });\n      } else {\n        return false;\n      }\n    };\n\n    var rangeFromPositions = function (from, to) {\n      var range = document.createRange();\n      range.setStart(from.container(), from.offset());\n      range.setEnd(to.container(), to.offset());\n      return range;\n    };\n    var hasOnlyTwoOrLessPositionsLeft = function (elm) {\n      return lift2(firstPositionIn(elm), lastPositionIn(elm), function (firstPos, lastPos) {\n        var normalizedFirstPos = normalizePosition(true, firstPos);\n        var normalizedLastPos = normalizePosition(false, lastPos);\n        return nextPosition(elm, normalizedFirstPos).forall(function (pos) {\n          return pos.isEqual(normalizedLastPos);\n        });\n      }).getOr(true);\n    };\n    var setCaretLocation = function (editor, caret) {\n      return function (location) {\n        return renderCaret(caret, location).exists(function (pos) {\n          setCaretPosition(editor, pos);\n          return true;\n        });\n      };\n    };\n    var deleteFromTo = function (editor, caret, from, to) {\n      var rootNode = editor.getBody();\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\n      editor.undoManager.ignore(function () {\n        editor.selection.setRng(rangeFromPositions(from, to));\n        editor.execCommand('Delete');\n        readLocation(isInlineTarget$1, rootNode, CaretPosition.fromRangeStart(editor.selection.getRng())).map(inside).map(setCaretLocation(editor, caret));\n      });\n      editor.nodeChanged();\n    };\n    var rescope = function (rootNode, node) {\n      var parentBlock = getParentBlock$2(node, rootNode);\n      return parentBlock ? parentBlock : rootNode;\n    };\n    var backspaceDeleteCollapsed = function (editor, caret, forward, from) {\n      var rootNode = rescope(editor.getBody(), from.container());\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\n      var fromLocation = readLocation(isInlineTarget$1, rootNode, from);\n      return fromLocation.bind(function (location) {\n        if (forward) {\n          return location.fold(constant(Optional.some(inside(location))), Optional.none, constant(Optional.some(outside(location))), Optional.none);\n        } else {\n          return location.fold(Optional.none, constant(Optional.some(outside(location))), Optional.none, constant(Optional.some(inside(location))));\n        }\n      }).map(setCaretLocation(editor, caret)).getOrThunk(function () {\n        var toPosition = navigate(forward, rootNode, from);\n        var toLocation = toPosition.bind(function (pos) {\n          return readLocation(isInlineTarget$1, rootNode, pos);\n        });\n        return lift2(fromLocation, toLocation, function () {\n          return findRootInline(isInlineTarget$1, rootNode, from).exists(function (elm) {\n            if (hasOnlyTwoOrLessPositionsLeft(elm)) {\n              deleteElement$2(editor, forward, SugarElement.fromDom(elm));\n              return true;\n            } else {\n              return false;\n            }\n          });\n        }).orThunk(function () {\n          return toLocation.bind(function (_) {\n            return toPosition.map(function (to) {\n              if (forward) {\n                deleteFromTo(editor, caret, from, to);\n              } else {\n                deleteFromTo(editor, caret, to, from);\n              }\n              return true;\n            });\n          });\n        }).getOr(false);\n      });\n    };\n    var backspaceDelete$3 = function (editor, caret, forward) {\n      if (editor.selection.isCollapsed() && isInlineBoundariesEnabled(editor)) {\n        var from = CaretPosition.fromRangeStart(editor.selection.getRng());\n        return backspaceDeleteCollapsed(editor, caret, forward, from);\n      }\n      return false;\n    };\n\n    var getParentInlines = function (rootElm, startElm) {\n      var parents = parentsAndSelf(startElm, rootElm);\n      return findIndex$2(parents, isBlock$2).fold(constant(parents), function (index) {\n        return parents.slice(0, index);\n      });\n    };\n    var hasOnlyOneChild = function (elm) {\n      return childNodesCount(elm) === 1;\n    };\n    var deleteLastPosition = function (forward, editor, target, parentInlines) {\n      var isFormatElement$1 = curry(isFormatElement, editor);\n      var formatNodes = map$3(filter$4(parentInlines, isFormatElement$1), function (elm) {\n        return elm.dom;\n      });\n      if (formatNodes.length === 0) {\n        deleteElement$2(editor, forward, target);\n      } else {\n        var pos = replaceWithCaretFormat(target.dom, formatNodes);\n        editor.selection.setRng(pos.toRange());\n      }\n    };\n    var deleteCaret$1 = function (editor, forward) {\n      var rootElm = SugarElement.fromDom(editor.getBody());\n      var startElm = SugarElement.fromDom(editor.selection.getStart());\n      var parentInlines = filter$4(getParentInlines(rootElm, startElm), hasOnlyOneChild);\n      return last$2(parentInlines).exists(function (target) {\n        var fromPos = CaretPosition.fromRangeStart(editor.selection.getRng());\n        if (willDeleteLastPositionInElement(forward, fromPos, target.dom) && !isEmptyCaretFormatElement(target)) {\n          deleteLastPosition(forward, editor, target, parentInlines);\n          return true;\n        } else {\n          return false;\n        }\n      });\n    };\n    var backspaceDelete$2 = function (editor, forward) {\n      return editor.selection.isCollapsed() ? deleteCaret$1(editor, forward) : false;\n    };\n\n    var deleteElement = function (editor, forward, element) {\n      editor._selectionOverrides.hideFakeCaret();\n      deleteElement$2(editor, forward, SugarElement.fromDom(element));\n      return true;\n    };\n    var deleteCaret = function (editor, forward) {\n      var isNearMedia = forward ? isBeforeMedia : isAfterMedia;\n      var direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      var fromPos = getNormalizedRangeEndPoint(direction, editor.getBody(), editor.selection.getRng());\n      if (isNearMedia(fromPos)) {\n        return deleteElement(editor, forward, fromPos.getNode(!forward));\n      } else {\n        return Optional.from(normalizePosition(forward, fromPos)).filter(function (pos) {\n          return isNearMedia(pos) && isMoveInsideSameBlock(fromPos, pos);\n        }).exists(function (pos) {\n          return deleteElement(editor, forward, pos.getNode(!forward));\n        });\n      }\n    };\n    var deleteRange = function (editor, forward) {\n      var selectedNode = editor.selection.getNode();\n      return isMedia$2(selectedNode) ? deleteElement(editor, forward, selectedNode) : false;\n    };\n    var backspaceDelete$1 = function (editor, forward) {\n      return editor.selection.isCollapsed() ? deleteCaret(editor, forward) : deleteRange(editor, forward);\n    };\n\n    var isEditable = function (target) {\n      return closest$3(target, function (elm) {\n        return isContentEditableTrue$4(elm.dom) || isContentEditableFalse$b(elm.dom);\n      }).exists(function (elm) {\n        return isContentEditableTrue$4(elm.dom);\n      });\n    };\n    var parseIndentValue = function (value) {\n      var number = parseInt(value, 10);\n      return isNaN(number) ? 0 : number;\n    };\n    var getIndentStyleName = function (useMargin, element) {\n      var indentStyleName = useMargin || isTable$2(element) ? 'margin' : 'padding';\n      var suffix = get$5(element, 'direction') === 'rtl' ? '-right' : '-left';\n      return indentStyleName + suffix;\n    };\n    var indentElement = function (dom, command, useMargin, value, unit, element) {\n      var indentStyleName = getIndentStyleName(useMargin, SugarElement.fromDom(element));\n      if (command === 'outdent') {\n        var styleValue = Math.max(0, parseIndentValue(element.style[indentStyleName]) - value);\n        dom.setStyle(element, indentStyleName, styleValue ? styleValue + unit : '');\n      } else {\n        var styleValue = parseIndentValue(element.style[indentStyleName]) + value + unit;\n        dom.setStyle(element, indentStyleName, styleValue);\n      }\n    };\n    var validateBlocks = function (editor, blocks) {\n      return forall(blocks, function (block) {\n        var indentStyleName = getIndentStyleName(shouldIndentUseMargin(editor), block);\n        var intentValue = getRaw(block, indentStyleName).map(parseIndentValue).getOr(0);\n        var contentEditable = editor.dom.getContentEditable(block.dom);\n        return contentEditable !== 'false' && intentValue > 0;\n      });\n    };\n    var canOutdent = function (editor) {\n      var blocks = getBlocksToIndent(editor);\n      return !editor.mode.isReadOnly() && (blocks.length > 1 || validateBlocks(editor, blocks));\n    };\n    var isListComponent = function (el) {\n      return isList(el) || isListItem(el);\n    };\n    var parentIsListComponent = function (el) {\n      return parent(el).exists(isListComponent);\n    };\n    var getBlocksToIndent = function (editor) {\n      return filter$4(fromDom$1(editor.selection.getSelectedBlocks()), function (el) {\n        return !isListComponent(el) && !parentIsListComponent(el) && isEditable(el);\n      });\n    };\n    var handle = function (editor, command) {\n      var dom = editor.dom, selection = editor.selection, formatter = editor.formatter;\n      var indentation = getIndentation(editor);\n      var indentUnit = /[a-z%]+$/i.exec(indentation)[0];\n      var indentValue = parseInt(indentation, 10);\n      var useMargin = shouldIndentUseMargin(editor);\n      var forcedRootBlock = getForcedRootBlock(editor);\n      if (!editor.queryCommandState('InsertUnorderedList') && !editor.queryCommandState('InsertOrderedList')) {\n        if (forcedRootBlock === '' && !dom.getParent(selection.getNode(), dom.isBlock)) {\n          formatter.apply('div');\n        }\n      }\n      each$k(getBlocksToIndent(editor), function (block) {\n        indentElement(dom, command, useMargin, indentValue, indentUnit, block.dom);\n      });\n    };\n\n    var backspaceDelete = function (editor, _forward) {\n      if (editor.selection.isCollapsed() && canOutdent(editor)) {\n        var dom = editor.dom;\n        var rng = editor.selection.getRng();\n        var pos = CaretPosition.fromRangeStart(rng);\n        var block = dom.getParent(rng.startContainer, dom.isBlock);\n        if (block !== null && isAtStartOfBlock(SugarElement.fromDom(block), pos)) {\n          handle(editor, 'outdent');\n          return true;\n        }\n      }\n      return false;\n    };\n\n    var nativeCommand = function (editor, command) {\n      editor.getDoc().execCommand(command, false, null);\n    };\n    var deleteCommand = function (editor, caret) {\n      if (backspaceDelete(editor)) {\n        return;\n      } else if (backspaceDelete$5(editor, false)) {\n        return;\n      } else if (backspaceDelete$6(editor, false)) {\n        return;\n      } else if (backspaceDelete$3(editor, caret, false)) {\n        return;\n      } else if (backspaceDelete$8(editor, false)) {\n        return;\n      } else if (backspaceDelete$9(editor)) {\n        return;\n      } else if (backspaceDelete$4(editor, false)) {\n        return;\n      } else if (backspaceDelete$1(editor, false)) {\n        return;\n      } else if (backspaceDelete$7(editor)) {\n        return;\n      } else if (backspaceDelete$2(editor, false)) {\n        return;\n      } else {\n        nativeCommand(editor, 'Delete');\n        paddEmptyBody(editor);\n      }\n    };\n    var forwardDeleteCommand = function (editor, caret) {\n      if (backspaceDelete$5(editor, true)) {\n        return;\n      } else if (backspaceDelete$6(editor, true)) {\n        return;\n      } else if (backspaceDelete$3(editor, caret, true)) {\n        return;\n      } else if (backspaceDelete$8(editor, true)) {\n        return;\n      } else if (backspaceDelete$9(editor)) {\n        return;\n      } else if (backspaceDelete$4(editor, true)) {\n        return;\n      } else if (backspaceDelete$1(editor, true)) {\n        return;\n      } else if (backspaceDelete$7(editor)) {\n        return;\n      } else if (backspaceDelete$2(editor, true)) {\n        return;\n      } else {\n        nativeCommand(editor, 'ForwardDelete');\n      }\n    };\n    var setup$f = function (editor, caret) {\n      editor.addCommand('delete', function () {\n        deleteCommand(editor, caret);\n      });\n      editor.addCommand('forwardDelete', function () {\n        forwardDeleteCommand(editor, caret);\n      });\n    };\n\n    var SIGNIFICANT_MOVE = 5;\n    var LONGPRESS_DELAY = 400;\n    var getTouch = function (event) {\n      if (event.touches === undefined || event.touches.length !== 1) {\n        return Optional.none();\n      }\n      return Optional.some(event.touches[0]);\n    };\n    var isFarEnough = function (touch, data) {\n      var distX = Math.abs(touch.clientX - data.x);\n      var distY = Math.abs(touch.clientY - data.y);\n      return distX > SIGNIFICANT_MOVE || distY > SIGNIFICANT_MOVE;\n    };\n    var setup$e = function (editor) {\n      var startData = value();\n      var longpressFired = Cell(false);\n      var debounceLongpress = last(function (e) {\n        editor.fire('longpress', __assign(__assign({}, e), { type: 'longpress' }));\n        longpressFired.set(true);\n      }, LONGPRESS_DELAY);\n      editor.on('touchstart', function (e) {\n        getTouch(e).each(function (touch) {\n          debounceLongpress.cancel();\n          var data = {\n            x: touch.clientX,\n            y: touch.clientY,\n            target: e.target\n          };\n          debounceLongpress.throttle(e);\n          longpressFired.set(false);\n          startData.set(data);\n        });\n      }, true);\n      editor.on('touchmove', function (e) {\n        debounceLongpress.cancel();\n        getTouch(e).each(function (touch) {\n          startData.on(function (data) {\n            if (isFarEnough(touch, data)) {\n              startData.clear();\n              longpressFired.set(false);\n              editor.fire('longpresscancel');\n            }\n          });\n        });\n      }, true);\n      editor.on('touchend touchcancel', function (e) {\n        debounceLongpress.cancel();\n        if (e.type === 'touchcancel') {\n          return;\n        }\n        startData.get().filter(function (data) {\n          return data.target.isEqualNode(e.target);\n        }).each(function () {\n          if (longpressFired.get()) {\n            e.preventDefault();\n          } else {\n            editor.fire('tap', __assign(__assign({}, e), { type: 'tap' }));\n          }\n        });\n      }, true);\n    };\n\n    var isBlockElement = function (blockElements, node) {\n      return has$2(blockElements, node.nodeName);\n    };\n    var isValidTarget = function (blockElements, node) {\n      if (isText$7(node)) {\n        return true;\n      } else if (isElement$5(node)) {\n        return !isBlockElement(blockElements, node) && !isBookmarkNode$1(node);\n      } else {\n        return false;\n      }\n    };\n    var hasBlockParent = function (blockElements, root, node) {\n      return exists(parents(SugarElement.fromDom(node), SugarElement.fromDom(root)), function (elm) {\n        return isBlockElement(blockElements, elm.dom);\n      });\n    };\n    var shouldRemoveTextNode = function (blockElements, node) {\n      if (isText$7(node)) {\n        if (node.nodeValue.length === 0) {\n          return true;\n        } else if (/^\\s+$/.test(node.nodeValue) && (!node.nextSibling || isBlockElement(blockElements, node.nextSibling))) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var addRootBlocks = function (editor) {\n      var dom = editor.dom, selection = editor.selection;\n      var schema = editor.schema, blockElements = schema.getBlockElements();\n      var node = selection.getStart();\n      var rootNode = editor.getBody();\n      var rootBlockNode, tempNode, wrapped;\n      var forcedRootBlock = getForcedRootBlock(editor);\n      if (!node || !isElement$5(node) || !forcedRootBlock) {\n        return;\n      }\n      var rootNodeName = rootNode.nodeName.toLowerCase();\n      if (!schema.isValidChild(rootNodeName, forcedRootBlock.toLowerCase()) || hasBlockParent(blockElements, rootNode, node)) {\n        return;\n      }\n      var rng = selection.getRng();\n      var startContainer = rng.startContainer;\n      var startOffset = rng.startOffset;\n      var endContainer = rng.endContainer;\n      var endOffset = rng.endOffset;\n      var restoreSelection = hasFocus(editor);\n      node = rootNode.firstChild;\n      while (node) {\n        if (isValidTarget(blockElements, node)) {\n          if (shouldRemoveTextNode(blockElements, node)) {\n            tempNode = node;\n            node = node.nextSibling;\n            dom.remove(tempNode);\n            continue;\n          }\n          if (!rootBlockNode) {\n            rootBlockNode = dom.create(forcedRootBlock, getForcedRootBlockAttrs(editor));\n            node.parentNode.insertBefore(rootBlockNode, node);\n            wrapped = true;\n          }\n          tempNode = node;\n          node = node.nextSibling;\n          rootBlockNode.appendChild(tempNode);\n        } else {\n          rootBlockNode = null;\n          node = node.nextSibling;\n        }\n      }\n      if (wrapped && restoreSelection) {\n        rng.setStart(startContainer, startOffset);\n        rng.setEnd(endContainer, endOffset);\n        selection.setRng(rng);\n        editor.nodeChanged();\n      }\n    };\n    var setup$d = function (editor) {\n      if (getForcedRootBlock(editor)) {\n        editor.on('NodeChange', curry(addRootBlocks, editor));\n      }\n    };\n\n    var findBlockCaretContainer = function (editor) {\n      return descendant(SugarElement.fromDom(editor.getBody()), '*[data-mce-caret]').map(function (elm) {\n        return elm.dom;\n      }).getOrNull();\n    };\n    var removeIeControlRect = function (editor) {\n      editor.selection.setRng(editor.selection.getRng());\n    };\n    var showBlockCaretContainer = function (editor, blockCaretContainer) {\n      if (blockCaretContainer.hasAttribute('data-mce-caret')) {\n        showCaretContainerBlock(blockCaretContainer);\n        removeIeControlRect(editor);\n        editor.selection.scrollIntoView(blockCaretContainer);\n      }\n    };\n    var handleBlockContainer = function (editor, e) {\n      var blockCaretContainer = findBlockCaretContainer(editor);\n      if (!blockCaretContainer) {\n        return;\n      }\n      if (e.type === 'compositionstart') {\n        e.preventDefault();\n        e.stopPropagation();\n        showBlockCaretContainer(editor, blockCaretContainer);\n        return;\n      }\n      if (hasContent(blockCaretContainer)) {\n        showBlockCaretContainer(editor, blockCaretContainer);\n        editor.undoManager.add();\n      }\n    };\n    var setup$c = function (editor) {\n      editor.on('keyup compositionstart', curry(handleBlockContainer, editor));\n    };\n\n    var isContentEditableFalse$2 = isContentEditableFalse$b;\n    var moveToCeFalseHorizontally = function (direction, editor, range) {\n      return moveHorizontally(editor, direction, range, isBeforeContentEditableFalse, isAfterContentEditableFalse, isContentEditableFalse$2);\n    };\n    var moveToCeFalseVertically = function (direction, editor, range) {\n      var isBefore = function (caretPosition) {\n        return isBeforeContentEditableFalse(caretPosition) || isBeforeTable(caretPosition);\n      };\n      var isAfter = function (caretPosition) {\n        return isAfterContentEditableFalse(caretPosition) || isAfterTable(caretPosition);\n      };\n      return moveVertically(editor, direction, range, isBefore, isAfter, isContentEditableFalse$2);\n    };\n    var createTextBlock = function (editor) {\n      var textBlock = editor.dom.create(getForcedRootBlock(editor));\n      if (!Env.ie || Env.ie >= 11) {\n        textBlock.innerHTML = '<br data-mce-bogus=\"1\">';\n      }\n      return textBlock;\n    };\n    var exitPreBlock = function (editor, direction, range) {\n      var caretWalker = CaretWalker(editor.getBody());\n      var getVisualCaretPosition$1 = curry(getVisualCaretPosition, direction === 1 ? caretWalker.next : caretWalker.prev);\n      if (range.collapsed && hasForcedRootBlock(editor)) {\n        var pre = editor.dom.getParent(range.startContainer, 'PRE');\n        if (!pre) {\n          return;\n        }\n        var caretPos = getVisualCaretPosition$1(CaretPosition.fromRangeStart(range));\n        if (!caretPos) {\n          var newBlock = createTextBlock(editor);\n          if (direction === 1) {\n            editor.$(pre).after(newBlock);\n          } else {\n            editor.$(pre).before(newBlock);\n          }\n          editor.selection.select(newBlock, true);\n          editor.selection.collapse();\n        }\n      }\n    };\n    var getHorizontalRange = function (editor, forward) {\n      var direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      var range = editor.selection.getRng();\n      return moveToCeFalseHorizontally(direction, editor, range).orThunk(function () {\n        exitPreBlock(editor, direction, range);\n        return Optional.none();\n      });\n    };\n    var getVerticalRange = function (editor, down) {\n      var direction = down ? 1 : -1;\n      var range = editor.selection.getRng();\n      return moveToCeFalseVertically(direction, editor, range).orThunk(function () {\n        exitPreBlock(editor, direction, range);\n        return Optional.none();\n      });\n    };\n    var moveH$2 = function (editor, forward) {\n      return getHorizontalRange(editor, forward).exists(function (newRange) {\n        moveToRange(editor, newRange);\n        return true;\n      });\n    };\n    var moveV$3 = function (editor, down) {\n      return getVerticalRange(editor, down).exists(function (newRange) {\n        moveToRange(editor, newRange);\n        return true;\n      });\n    };\n    var moveToLineEndPoint$1 = function (editor, forward) {\n      var isCefPosition = forward ? isAfterContentEditableFalse : isBeforeContentEditableFalse;\n      return moveToLineEndPoint$3(editor, forward, isCefPosition);\n    };\n\n    var isTarget = function (node) {\n      return contains$3(['figcaption'], name(node));\n    };\n    var rangeBefore = function (target) {\n      var rng = document.createRange();\n      rng.setStartBefore(target.dom);\n      rng.setEndBefore(target.dom);\n      return rng;\n    };\n    var insertElement = function (root, elm, forward) {\n      if (forward) {\n        append$1(root, elm);\n      } else {\n        prepend(root, elm);\n      }\n    };\n    var insertBr = function (root, forward) {\n      var br = SugarElement.fromTag('br');\n      insertElement(root, br, forward);\n      return rangeBefore(br);\n    };\n    var insertBlock = function (root, forward, blockName, attrs) {\n      var block = SugarElement.fromTag(blockName);\n      var br = SugarElement.fromTag('br');\n      setAll$1(block, attrs);\n      append$1(block, br);\n      insertElement(root, block, forward);\n      return rangeBefore(br);\n    };\n    var insertEmptyLine = function (root, rootBlockName, attrs, forward) {\n      if (rootBlockName === '') {\n        return insertBr(root, forward);\n      } else {\n        return insertBlock(root, forward, rootBlockName, attrs);\n      }\n    };\n    var getClosestTargetBlock = function (pos, root) {\n      var isRoot = curry(eq, root);\n      return closest$3(SugarElement.fromDom(pos.container()), isBlock$2, isRoot).filter(isTarget);\n    };\n    var isAtFirstOrLastLine = function (root, forward, pos) {\n      return forward ? isAtLastLine(root.dom, pos) : isAtFirstLine(root.dom, pos);\n    };\n    var moveCaretToNewEmptyLine = function (editor, forward) {\n      var root = SugarElement.fromDom(editor.getBody());\n      var pos = CaretPosition.fromRangeStart(editor.selection.getRng());\n      var rootBlock = getForcedRootBlock(editor);\n      var rootBlockAttrs = getForcedRootBlockAttrs(editor);\n      return getClosestTargetBlock(pos, root).exists(function () {\n        if (isAtFirstOrLastLine(root, forward, pos)) {\n          var rng = insertEmptyLine(root, rootBlock, rootBlockAttrs, forward);\n          editor.selection.setRng(rng);\n          return true;\n        } else {\n          return false;\n        }\n      });\n    };\n    var moveV$2 = function (editor, forward) {\n      if (editor.selection.isCollapsed()) {\n        return moveCaretToNewEmptyLine(editor, forward);\n      } else {\n        return false;\n      }\n    };\n\n    var defaultPatterns = function (patterns) {\n      return map$3(patterns, function (pattern) {\n        return __assign({\n          shiftKey: false,\n          altKey: false,\n          ctrlKey: false,\n          metaKey: false,\n          keyCode: 0,\n          action: noop\n        }, pattern);\n      });\n    };\n    var matchesEvent = function (pattern, evt) {\n      return evt.keyCode === pattern.keyCode && evt.shiftKey === pattern.shiftKey && evt.altKey === pattern.altKey && evt.ctrlKey === pattern.ctrlKey && evt.metaKey === pattern.metaKey;\n    };\n    var match$1 = function (patterns, evt) {\n      return bind(defaultPatterns(patterns), function (pattern) {\n        return matchesEvent(pattern, evt) ? [pattern] : [];\n      });\n    };\n    var action = function (f) {\n      var x = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        x[_i - 1] = arguments[_i];\n      }\n      return function () {\n        return f.apply(null, x);\n      };\n    };\n    var execute = function (patterns, evt) {\n      return find$3(match$1(patterns, evt), function (pattern) {\n        return pattern.action();\n      });\n    };\n\n    var moveH$1 = function (editor, forward) {\n      var direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      var range = editor.selection.getRng();\n      return moveHorizontally(editor, direction, range, isBeforeMedia, isAfterMedia, isMedia$2).exists(function (newRange) {\n        moveToRange(editor, newRange);\n        return true;\n      });\n    };\n    var moveV$1 = function (editor, down) {\n      var direction = down ? 1 : -1;\n      var range = editor.selection.getRng();\n      return moveVertically(editor, direction, range, isBeforeMedia, isAfterMedia, isMedia$2).exists(function (newRange) {\n        moveToRange(editor, newRange);\n        return true;\n      });\n    };\n    var moveToLineEndPoint = function (editor, forward) {\n      var isNearMedia = forward ? isAfterMedia : isBeforeMedia;\n      return moveToLineEndPoint$3(editor, forward, isNearMedia);\n    };\n\n    var deflate = function (rect, delta) {\n      return {\n        left: rect.left - delta,\n        top: rect.top - delta,\n        right: rect.right + delta * 2,\n        bottom: rect.bottom + delta * 2,\n        width: rect.width + delta,\n        height: rect.height + delta\n      };\n    };\n    var getCorners = function (getYAxisValue, tds) {\n      return bind(tds, function (td) {\n        var rect = deflate(clone(td.getBoundingClientRect()), -1);\n        return [\n          {\n            x: rect.left,\n            y: getYAxisValue(rect),\n            cell: td\n          },\n          {\n            x: rect.right,\n            y: getYAxisValue(rect),\n            cell: td\n          }\n        ];\n      });\n    };\n    var findClosestCorner = function (corners, x, y) {\n      return foldl(corners, function (acc, newCorner) {\n        return acc.fold(function () {\n          return Optional.some(newCorner);\n        }, function (oldCorner) {\n          var oldDist = Math.sqrt(Math.abs(oldCorner.x - x) + Math.abs(oldCorner.y - y));\n          var newDist = Math.sqrt(Math.abs(newCorner.x - x) + Math.abs(newCorner.y - y));\n          return Optional.some(newDist < oldDist ? newCorner : oldCorner);\n        });\n      }, Optional.none());\n    };\n    var getClosestCell = function (getYAxisValue, isTargetCorner, table, x, y) {\n      var cells = descendants(SugarElement.fromDom(table), 'td,th,caption').map(function (e) {\n        return e.dom;\n      });\n      var corners = filter$4(getCorners(getYAxisValue, cells), function (corner) {\n        return isTargetCorner(corner, y);\n      });\n      return findClosestCorner(corners, x, y).map(function (corner) {\n        return corner.cell;\n      });\n    };\n    var getBottomValue = function (rect) {\n      return rect.bottom;\n    };\n    var getTopValue = function (rect) {\n      return rect.top;\n    };\n    var isAbove = function (corner, y) {\n      return corner.y < y;\n    };\n    var isBelow = function (corner, y) {\n      return corner.y > y;\n    };\n    var getClosestCellAbove = curry(getClosestCell, getBottomValue, isAbove);\n    var getClosestCellBelow = curry(getClosestCell, getTopValue, isBelow);\n    var findClosestPositionInAboveCell = function (table, pos) {\n      return head(pos.getClientRects()).bind(function (rect) {\n        return getClosestCellAbove(table, rect.left, rect.top);\n      }).bind(function (cell) {\n        return findClosestHorizontalPosition(getLastLinePositions(cell), pos);\n      });\n    };\n    var findClosestPositionInBelowCell = function (table, pos) {\n      return last$2(pos.getClientRects()).bind(function (rect) {\n        return getClosestCellBelow(table, rect.left, rect.top);\n      }).bind(function (cell) {\n        return findClosestHorizontalPosition(getFirstLinePositions(cell), pos);\n      });\n    };\n\n    var hasNextBreak = function (getPositionsUntil, scope, lineInfo) {\n      return lineInfo.breakAt.exists(function (breakPos) {\n        return getPositionsUntil(scope, breakPos).breakAt.isSome();\n      });\n    };\n    var startsWithWrapBreak = function (lineInfo) {\n      return lineInfo.breakType === BreakType.Wrap && lineInfo.positions.length === 0;\n    };\n    var startsWithBrBreak = function (lineInfo) {\n      return lineInfo.breakType === BreakType.Br && lineInfo.positions.length === 1;\n    };\n    var isAtTableCellLine = function (getPositionsUntil, scope, pos) {\n      var lineInfo = getPositionsUntil(scope, pos);\n      if (startsWithWrapBreak(lineInfo) || !isBr$5(pos.getNode()) && startsWithBrBreak(lineInfo)) {\n        return !hasNextBreak(getPositionsUntil, scope, lineInfo);\n      } else {\n        return lineInfo.breakAt.isNone();\n      }\n    };\n    var isAtFirstTableCellLine = curry(isAtTableCellLine, getPositionsUntilPreviousLine);\n    var isAtLastTableCellLine = curry(isAtTableCellLine, getPositionsUntilNextLine);\n    var isCaretAtStartOrEndOfTable = function (forward, rng, table) {\n      var caretPos = CaretPosition.fromRangeStart(rng);\n      return positionIn(!forward, table).exists(function (pos) {\n        return pos.isEqual(caretPos);\n      });\n    };\n    var navigateHorizontally = function (editor, forward, table, _td) {\n      var rng = editor.selection.getRng();\n      var direction = forward ? 1 : -1;\n      if (isFakeCaretTableBrowser() && isCaretAtStartOrEndOfTable(forward, rng, table)) {\n        showCaret(direction, editor, table, !forward, false).each(function (newRng) {\n          moveToRange(editor, newRng);\n        });\n        return true;\n      }\n      return false;\n    };\n    var getClosestAbovePosition = function (root, table, start) {\n      return findClosestPositionInAboveCell(table, start).orThunk(function () {\n        return head(start.getClientRects()).bind(function (rect) {\n          return findClosestHorizontalPositionFromPoint(getPositionsAbove(root, CaretPosition.before(table)), rect.left);\n        });\n      }).getOr(CaretPosition.before(table));\n    };\n    var getClosestBelowPosition = function (root, table, start) {\n      return findClosestPositionInBelowCell(table, start).orThunk(function () {\n        return head(start.getClientRects()).bind(function (rect) {\n          return findClosestHorizontalPositionFromPoint(getPositionsBelow(root, CaretPosition.after(table)), rect.left);\n        });\n      }).getOr(CaretPosition.after(table));\n    };\n    var getTable = function (previous, pos) {\n      var node = pos.getNode(previous);\n      return isElement$5(node) && node.nodeName === 'TABLE' ? Optional.some(node) : Optional.none();\n    };\n    var renderBlock = function (down, editor, table, pos) {\n      var forcedRootBlock = getForcedRootBlock(editor);\n      if (forcedRootBlock) {\n        editor.undoManager.transact(function () {\n          var element = SugarElement.fromTag(forcedRootBlock);\n          setAll$1(element, getForcedRootBlockAttrs(editor));\n          append$1(element, SugarElement.fromTag('br'));\n          if (down) {\n            after$3(SugarElement.fromDom(table), element);\n          } else {\n            before$4(SugarElement.fromDom(table), element);\n          }\n          var rng = editor.dom.createRng();\n          rng.setStart(element.dom, 0);\n          rng.setEnd(element.dom, 0);\n          moveToRange(editor, rng);\n        });\n      } else {\n        moveToRange(editor, pos.toRange());\n      }\n    };\n    var moveCaret = function (editor, down, pos) {\n      var table = down ? getTable(true, pos) : getTable(false, pos);\n      var last = down === false;\n      table.fold(function () {\n        return moveToRange(editor, pos.toRange());\n      }, function (table) {\n        return positionIn(last, editor.getBody()).filter(function (lastPos) {\n          return lastPos.isEqual(pos);\n        }).fold(function () {\n          return moveToRange(editor, pos.toRange());\n        }, function (_) {\n          return renderBlock(down, editor, table, pos);\n        });\n      });\n    };\n    var navigateVertically = function (editor, down, table, td) {\n      var rng = editor.selection.getRng();\n      var pos = CaretPosition.fromRangeStart(rng);\n      var root = editor.getBody();\n      if (!down && isAtFirstTableCellLine(td, pos)) {\n        var newPos = getClosestAbovePosition(root, table, pos);\n        moveCaret(editor, down, newPos);\n        return true;\n      } else if (down && isAtLastTableCellLine(td, pos)) {\n        var newPos = getClosestBelowPosition(root, table, pos);\n        moveCaret(editor, down, newPos);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var move$1 = function (editor, forward, mover) {\n      return Optional.from(editor.dom.getParent(editor.selection.getNode(), 'td,th')).bind(function (td) {\n        return Optional.from(editor.dom.getParent(td, 'table')).map(function (table) {\n          return mover(editor, forward, table, td);\n        });\n      }).getOr(false);\n    };\n    var moveH = function (editor, forward) {\n      return move$1(editor, forward, navigateHorizontally);\n    };\n    var moveV = function (editor, forward) {\n      return move$1(editor, forward, navigateVertically);\n    };\n\n    var executeKeydownOverride$3 = function (editor, caret, evt) {\n      var os = detect().os;\n      execute([\n        {\n          keyCode: VK.RIGHT,\n          action: action(moveH$2, editor, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: action(moveH$2, editor, false)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV$3, editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: action(moveV$3, editor, true)\n        },\n        {\n          keyCode: VK.RIGHT,\n          action: action(moveH, editor, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: action(moveH, editor, false)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV, editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: action(moveV, editor, true)\n        },\n        {\n          keyCode: VK.RIGHT,\n          action: action(moveH$1, editor, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: action(moveH$1, editor, false)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV$1, editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: action(moveV$1, editor, true)\n        },\n        {\n          keyCode: VK.RIGHT,\n          action: action(move$2, editor, caret, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: action(move$2, editor, caret, false)\n        },\n        {\n          keyCode: VK.RIGHT,\n          ctrlKey: !os.isOSX(),\n          altKey: os.isOSX(),\n          action: action(moveNextWord, editor, caret)\n        },\n        {\n          keyCode: VK.LEFT,\n          ctrlKey: !os.isOSX(),\n          altKey: os.isOSX(),\n          action: action(movePrevWord, editor, caret)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV$2, editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: action(moveV$2, editor, true)\n        }\n      ], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var setup$b = function (editor, caret) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride$3(editor, caret, evt);\n        }\n      });\n    };\n\n    var executeKeydownOverride$2 = function (editor, caret, evt) {\n      execute([\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete, editor, false)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$5, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$5, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$6, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$6, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$3, editor, caret, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$3, editor, caret, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$9, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$9, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$4, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$4, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$1, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$1, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$7, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$7, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$8, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$8, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$2, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$2, editor, true)\n        }\n      ], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var executeKeyupOverride = function (editor, evt) {\n      execute([\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(paddEmptyElement, editor)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(paddEmptyElement, editor)\n        }\n      ], evt);\n    };\n    var setup$a = function (editor, caret) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride$2(editor, caret, evt);\n        }\n      });\n      editor.on('keyup', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeyupOverride(editor, evt);\n        }\n      });\n    };\n\n    var firstNonWhiteSpaceNodeSibling = function (node) {\n      while (node) {\n        if (node.nodeType === 1 || node.nodeType === 3 && node.data && /[\\r\\n\\s]/.test(node.data)) {\n          return node;\n        }\n        node = node.nextSibling;\n      }\n    };\n    var moveToCaretPosition = function (editor, root) {\n      var node, lastNode = root;\n      var dom = editor.dom;\n      var moveCaretBeforeOnEnterElementsMap = editor.schema.getMoveCaretBeforeOnEnterElements();\n      if (!root) {\n        return;\n      }\n      if (/^(LI|DT|DD)$/.test(root.nodeName)) {\n        var firstChild = firstNonWhiteSpaceNodeSibling(root.firstChild);\n        if (firstChild && /^(UL|OL|DL)$/.test(firstChild.nodeName)) {\n          root.insertBefore(dom.doc.createTextNode(nbsp), root.firstChild);\n        }\n      }\n      var rng = dom.createRng();\n      root.normalize();\n      if (root.hasChildNodes()) {\n        var walker = new DomTreeWalker(root, root);\n        while (node = walker.current()) {\n          if (isText$7(node)) {\n            rng.setStart(node, 0);\n            rng.setEnd(node, 0);\n            break;\n          }\n          if (moveCaretBeforeOnEnterElementsMap[node.nodeName.toLowerCase()]) {\n            rng.setStartBefore(node);\n            rng.setEndBefore(node);\n            break;\n          }\n          lastNode = node;\n          node = walker.next();\n        }\n        if (!node) {\n          rng.setStart(lastNode, 0);\n          rng.setEnd(lastNode, 0);\n        }\n      } else {\n        if (isBr$5(root)) {\n          if (root.nextSibling && dom.isBlock(root.nextSibling)) {\n            rng.setStartBefore(root);\n            rng.setEndBefore(root);\n          } else {\n            rng.setStartAfter(root);\n            rng.setEndAfter(root);\n          }\n        } else {\n          rng.setStart(root, 0);\n          rng.setEnd(root, 0);\n        }\n      }\n      editor.selection.setRng(rng);\n      scrollRangeIntoView(editor, rng);\n    };\n    var getEditableRoot$1 = function (dom, node) {\n      var root = dom.getRoot();\n      var parent, editableRoot;\n      parent = node;\n      while (parent !== root && dom.getContentEditable(parent) !== 'false') {\n        if (dom.getContentEditable(parent) === 'true') {\n          editableRoot = parent;\n        }\n        parent = parent.parentNode;\n      }\n      return parent !== root ? editableRoot : root;\n    };\n    var getParentBlock = function (editor) {\n      return Optional.from(editor.dom.getParent(editor.selection.getStart(true), editor.dom.isBlock));\n    };\n    var getParentBlockName = function (editor) {\n      return getParentBlock(editor).fold(constant(''), function (parentBlock) {\n        return parentBlock.nodeName.toUpperCase();\n      });\n    };\n    var isListItemParentBlock = function (editor) {\n      return getParentBlock(editor).filter(function (elm) {\n        return isListItem(SugarElement.fromDom(elm));\n      }).isSome();\n    };\n\n    var hasFirstChild = function (elm, name) {\n      return elm.firstChild && elm.firstChild.nodeName === name;\n    };\n    var isFirstChild = function (elm) {\n      var _a;\n      return ((_a = elm.parentNode) === null || _a === void 0 ? void 0 : _a.firstChild) === elm;\n    };\n    var hasParent = function (elm, parentName) {\n      return elm && elm.parentNode && elm.parentNode.nodeName === parentName;\n    };\n    var isListBlock = function (elm) {\n      return elm && /^(OL|UL|LI)$/.test(elm.nodeName);\n    };\n    var isNestedList = function (elm) {\n      return isListBlock(elm) && isListBlock(elm.parentNode);\n    };\n    var getContainerBlock = function (containerBlock) {\n      var containerBlockParent = containerBlock.parentNode;\n      if (/^(LI|DT|DD)$/.test(containerBlockParent.nodeName)) {\n        return containerBlockParent;\n      }\n      return containerBlock;\n    };\n    var isFirstOrLastLi = function (containerBlock, parentBlock, first) {\n      var node = containerBlock[first ? 'firstChild' : 'lastChild'];\n      while (node) {\n        if (isElement$5(node)) {\n          break;\n        }\n        node = node[first ? 'nextSibling' : 'previousSibling'];\n      }\n      return node === parentBlock;\n    };\n    var insert$3 = function (editor, createNewBlock, containerBlock, parentBlock, newBlockName) {\n      var dom = editor.dom;\n      var rng = editor.selection.getRng();\n      if (containerBlock === editor.getBody()) {\n        return;\n      }\n      if (isNestedList(containerBlock)) {\n        newBlockName = 'LI';\n      }\n      var newBlock = newBlockName ? createNewBlock(newBlockName) : dom.create('BR');\n      if (isFirstOrLastLi(containerBlock, parentBlock, true) && isFirstOrLastLi(containerBlock, parentBlock, false)) {\n        if (hasParent(containerBlock, 'LI')) {\n          var containerBlockParent = getContainerBlock(containerBlock);\n          dom.insertAfter(newBlock, containerBlockParent);\n          if (isFirstChild(containerBlock)) {\n            dom.remove(containerBlockParent);\n          } else {\n            dom.remove(containerBlock);\n          }\n        } else {\n          dom.replace(newBlock, containerBlock);\n        }\n      } else if (isFirstOrLastLi(containerBlock, parentBlock, true)) {\n        if (hasParent(containerBlock, 'LI')) {\n          dom.insertAfter(newBlock, getContainerBlock(containerBlock));\n          newBlock.appendChild(dom.doc.createTextNode(' '));\n          newBlock.appendChild(containerBlock);\n        } else {\n          containerBlock.parentNode.insertBefore(newBlock, containerBlock);\n        }\n        dom.remove(parentBlock);\n      } else if (isFirstOrLastLi(containerBlock, parentBlock, false)) {\n        dom.insertAfter(newBlock, getContainerBlock(containerBlock));\n        dom.remove(parentBlock);\n      } else {\n        containerBlock = getContainerBlock(containerBlock);\n        var tmpRng = rng.cloneRange();\n        tmpRng.setStartAfter(parentBlock);\n        tmpRng.setEndAfter(containerBlock);\n        var fragment = tmpRng.extractContents();\n        if (newBlockName === 'LI' && hasFirstChild(fragment, 'LI')) {\n          newBlock = fragment.firstChild;\n          dom.insertAfter(fragment, containerBlock);\n        } else {\n          dom.insertAfter(fragment, containerBlock);\n          dom.insertAfter(newBlock, containerBlock);\n        }\n        dom.remove(parentBlock);\n      }\n      moveToCaretPosition(editor, newBlock);\n    };\n\n    var trimZwsp = function (fragment) {\n      each$k(descendants$1(SugarElement.fromDom(fragment), isText$8), function (text) {\n        var rawNode = text.dom;\n        rawNode.nodeValue = trim$3(rawNode.nodeValue);\n      });\n    };\n    var isEmptyAnchor = function (dom, elm) {\n      return elm && elm.nodeName === 'A' && dom.isEmpty(elm);\n    };\n    var isTableCell = function (node) {\n      return node && /^(TD|TH|CAPTION)$/.test(node.nodeName);\n    };\n    var emptyBlock = function (elm) {\n      elm.innerHTML = '<br data-mce-bogus=\"1\">';\n    };\n    var containerAndSiblingName = function (container, nodeName) {\n      return container.nodeName === nodeName || container.previousSibling && container.previousSibling.nodeName === nodeName;\n    };\n    var canSplitBlock = function (dom, node) {\n      return node && dom.isBlock(node) && !/^(TD|TH|CAPTION|FORM)$/.test(node.nodeName) && !/^(fixed|absolute)/i.test(node.style.position) && dom.getContentEditable(node) !== 'true';\n    };\n    var trimInlineElementsOnLeftSideOfBlock = function (dom, nonEmptyElementsMap, block) {\n      var node = block;\n      var firstChilds = [];\n      var i;\n      if (!node) {\n        return;\n      }\n      while (node = node.firstChild) {\n        if (dom.isBlock(node)) {\n          return;\n        }\n        if (isElement$5(node) && !nonEmptyElementsMap[node.nodeName.toLowerCase()]) {\n          firstChilds.push(node);\n        }\n      }\n      i = firstChilds.length;\n      while (i--) {\n        node = firstChilds[i];\n        if (!node.hasChildNodes() || node.firstChild === node.lastChild && node.firstChild.nodeValue === '') {\n          dom.remove(node);\n        } else {\n          if (isEmptyAnchor(dom, node)) {\n            dom.remove(node);\n          }\n        }\n      }\n    };\n    var normalizeZwspOffset = function (start, container, offset) {\n      if (isText$7(container) === false) {\n        return offset;\n      } else if (start) {\n        return offset === 1 && container.data.charAt(offset - 1) === ZWSP$1 ? 0 : offset;\n      } else {\n        return offset === container.data.length - 1 && container.data.charAt(offset) === ZWSP$1 ? container.data.length : offset;\n      }\n    };\n    var includeZwspInRange = function (rng) {\n      var newRng = rng.cloneRange();\n      newRng.setStart(rng.startContainer, normalizeZwspOffset(true, rng.startContainer, rng.startOffset));\n      newRng.setEnd(rng.endContainer, normalizeZwspOffset(false, rng.endContainer, rng.endOffset));\n      return newRng;\n    };\n    var trimLeadingLineBreaks = function (node) {\n      do {\n        if (isText$7(node)) {\n          node.nodeValue = node.nodeValue.replace(/^[\\r\\n]+/, '');\n        }\n        node = node.firstChild;\n      } while (node);\n    };\n    var getEditableRoot = function (dom, node) {\n      var root = dom.getRoot();\n      var parent, editableRoot;\n      parent = node;\n      while (parent !== root && dom.getContentEditable(parent) !== 'false') {\n        if (dom.getContentEditable(parent) === 'true') {\n          editableRoot = parent;\n        }\n        parent = parent.parentNode;\n      }\n      return parent !== root ? editableRoot : root;\n    };\n    var applyAttributes = function (editor, node, forcedRootBlockAttrs) {\n      var dom = editor.dom;\n      Optional.from(forcedRootBlockAttrs.style).map(dom.parseStyle).each(function (attrStyles) {\n        var currentStyles = getAllRaw(SugarElement.fromDom(node));\n        var newStyles = __assign(__assign({}, currentStyles), attrStyles);\n        dom.setStyles(node, newStyles);\n      });\n      var attrClassesOpt = Optional.from(forcedRootBlockAttrs.class).map(function (attrClasses) {\n        return attrClasses.split(/\\s+/);\n      });\n      var currentClassesOpt = Optional.from(node.className).map(function (currentClasses) {\n        return filter$4(currentClasses.split(/\\s+/), function (clazz) {\n          return clazz !== '';\n        });\n      });\n      lift2(attrClassesOpt, currentClassesOpt, function (attrClasses, currentClasses) {\n        var filteredClasses = filter$4(currentClasses, function (clazz) {\n          return !contains$3(attrClasses, clazz);\n        });\n        var newClasses = __spreadArray(__spreadArray([], attrClasses, true), filteredClasses, true);\n        dom.setAttrib(node, 'class', newClasses.join(' '));\n      });\n      var appliedAttrs = [\n        'style',\n        'class'\n      ];\n      var remainingAttrs = filter$3(forcedRootBlockAttrs, function (_, attrs) {\n        return !contains$3(appliedAttrs, attrs);\n      });\n      dom.setAttribs(node, remainingAttrs);\n    };\n    var setForcedBlockAttrs = function (editor, node) {\n      var forcedRootBlockName = getForcedRootBlock(editor);\n      if (forcedRootBlockName && forcedRootBlockName.toLowerCase() === node.tagName.toLowerCase()) {\n        var forcedRootBlockAttrs = getForcedRootBlockAttrs(editor);\n        applyAttributes(editor, node, forcedRootBlockAttrs);\n      }\n    };\n    var wrapSelfAndSiblingsInDefaultBlock = function (editor, newBlockName, rng, container, offset) {\n      var newBlock, parentBlock, startNode, node, next, rootBlockName;\n      var blockName = newBlockName || 'P';\n      var dom = editor.dom, editableRoot = getEditableRoot(dom, container);\n      parentBlock = dom.getParent(container, dom.isBlock);\n      if (!parentBlock || !canSplitBlock(dom, parentBlock)) {\n        parentBlock = parentBlock || editableRoot;\n        if (parentBlock === editor.getBody() || isTableCell(parentBlock)) {\n          rootBlockName = parentBlock.nodeName.toLowerCase();\n        } else {\n          rootBlockName = parentBlock.parentNode.nodeName.toLowerCase();\n        }\n        if (!parentBlock.hasChildNodes()) {\n          newBlock = dom.create(blockName);\n          setForcedBlockAttrs(editor, newBlock);\n          parentBlock.appendChild(newBlock);\n          rng.setStart(newBlock, 0);\n          rng.setEnd(newBlock, 0);\n          return newBlock;\n        }\n        node = container;\n        while (node.parentNode !== parentBlock) {\n          node = node.parentNode;\n        }\n        while (node && !dom.isBlock(node)) {\n          startNode = node;\n          node = node.previousSibling;\n        }\n        if (startNode && editor.schema.isValidChild(rootBlockName, blockName.toLowerCase())) {\n          newBlock = dom.create(blockName);\n          setForcedBlockAttrs(editor, newBlock);\n          startNode.parentNode.insertBefore(newBlock, startNode);\n          node = startNode;\n          while (node && !dom.isBlock(node)) {\n            next = node.nextSibling;\n            newBlock.appendChild(node);\n            node = next;\n          }\n          rng.setStart(container, offset);\n          rng.setEnd(container, offset);\n        }\n      }\n      return container;\n    };\n    var addBrToBlockIfNeeded = function (dom, block) {\n      block.normalize();\n      var lastChild = block.lastChild;\n      if (!lastChild || /^(left|right)$/gi.test(dom.getStyle(lastChild, 'float', true))) {\n        dom.add(block, 'br');\n      }\n    };\n    var insert$2 = function (editor, evt) {\n      var tmpRng, container, offset, parentBlock;\n      var newBlock, fragment, containerBlock, parentBlockName, newBlockName, isAfterLastNodeInContainer;\n      var dom = editor.dom;\n      var schema = editor.schema, nonEmptyElementsMap = schema.getNonEmptyElements();\n      var rng = editor.selection.getRng();\n      var createNewBlock = function (name) {\n        var node = container, block, clonedNode, caretNode;\n        var textInlineElements = schema.getTextInlineElements();\n        if (name || parentBlockName === 'TABLE' || parentBlockName === 'HR') {\n          block = dom.create(name || newBlockName);\n        } else {\n          block = parentBlock.cloneNode(false);\n        }\n        caretNode = block;\n        if (shouldKeepStyles(editor) === false) {\n          dom.setAttrib(block, 'style', null);\n          dom.setAttrib(block, 'class', null);\n        } else {\n          do {\n            if (textInlineElements[node.nodeName]) {\n              if (isCaretNode(node) || isBookmarkNode$1(node)) {\n                continue;\n              }\n              clonedNode = node.cloneNode(false);\n              dom.setAttrib(clonedNode, 'id', '');\n              if (block.hasChildNodes()) {\n                clonedNode.appendChild(block.firstChild);\n                block.appendChild(clonedNode);\n              } else {\n                caretNode = clonedNode;\n                block.appendChild(clonedNode);\n              }\n            }\n          } while ((node = node.parentNode) && node !== editableRoot);\n        }\n        setForcedBlockAttrs(editor, block);\n        emptyBlock(caretNode);\n        return block;\n      };\n      var isCaretAtStartOrEndOfBlock = function (start) {\n        var node, name;\n        var normalizedOffset = normalizeZwspOffset(start, container, offset);\n        if (isText$7(container) && (start ? normalizedOffset > 0 : normalizedOffset < container.nodeValue.length)) {\n          return false;\n        }\n        if (container.parentNode === parentBlock && isAfterLastNodeInContainer && !start) {\n          return true;\n        }\n        if (start && isElement$5(container) && container === parentBlock.firstChild) {\n          return true;\n        }\n        if (containerAndSiblingName(container, 'TABLE') || containerAndSiblingName(container, 'HR')) {\n          return isAfterLastNodeInContainer && !start || !isAfterLastNodeInContainer && start;\n        }\n        var walker = new DomTreeWalker(container, parentBlock);\n        if (isText$7(container)) {\n          if (start && normalizedOffset === 0) {\n            walker.prev();\n          } else if (!start && normalizedOffset === container.nodeValue.length) {\n            walker.next();\n          }\n        }\n        while (node = walker.current()) {\n          if (isElement$5(node)) {\n            if (!node.getAttribute('data-mce-bogus')) {\n              name = node.nodeName.toLowerCase();\n              if (nonEmptyElementsMap[name] && name !== 'br') {\n                return false;\n              }\n            }\n          } else if (isText$7(node) && !isWhitespaceText(node.nodeValue)) {\n            return false;\n          }\n          if (start) {\n            walker.prev();\n          } else {\n            walker.next();\n          }\n        }\n        return true;\n      };\n      var insertNewBlockAfter = function () {\n        if (/^(H[1-6]|PRE|FIGURE)$/.test(parentBlockName) && containerBlockName !== 'HGROUP') {\n          newBlock = createNewBlock(newBlockName);\n        } else {\n          newBlock = createNewBlock();\n        }\n        if (shouldEndContainerOnEmptyBlock(editor) && canSplitBlock(dom, containerBlock) && dom.isEmpty(parentBlock)) {\n          newBlock = dom.split(containerBlock, parentBlock);\n        } else {\n          dom.insertAfter(newBlock, parentBlock);\n        }\n        moveToCaretPosition(editor, newBlock);\n      };\n      normalize$2(dom, rng).each(function (normRng) {\n        rng.setStart(normRng.startContainer, normRng.startOffset);\n        rng.setEnd(normRng.endContainer, normRng.endOffset);\n      });\n      container = rng.startContainer;\n      offset = rng.startOffset;\n      newBlockName = getForcedRootBlock(editor);\n      var shiftKey = !!(evt && evt.shiftKey);\n      var ctrlKey = !!(evt && evt.ctrlKey);\n      if (isElement$5(container) && container.hasChildNodes()) {\n        isAfterLastNodeInContainer = offset > container.childNodes.length - 1;\n        container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;\n        if (isAfterLastNodeInContainer && isText$7(container)) {\n          offset = container.nodeValue.length;\n        } else {\n          offset = 0;\n        }\n      }\n      var editableRoot = getEditableRoot(dom, container);\n      if (!editableRoot) {\n        return;\n      }\n      if (newBlockName && !shiftKey || !newBlockName && shiftKey) {\n        container = wrapSelfAndSiblingsInDefaultBlock(editor, newBlockName, rng, container, offset);\n      }\n      parentBlock = dom.getParent(container, dom.isBlock);\n      containerBlock = parentBlock ? dom.getParent(parentBlock.parentNode, dom.isBlock) : null;\n      parentBlockName = parentBlock ? parentBlock.nodeName.toUpperCase() : '';\n      var containerBlockName = containerBlock ? containerBlock.nodeName.toUpperCase() : '';\n      if (containerBlockName === 'LI' && !ctrlKey) {\n        parentBlock = containerBlock;\n        containerBlock = containerBlock.parentNode;\n        parentBlockName = containerBlockName;\n      }\n      if (/^(LI|DT|DD)$/.test(parentBlockName)) {\n        if (dom.isEmpty(parentBlock)) {\n          insert$3(editor, createNewBlock, containerBlock, parentBlock, newBlockName);\n          return;\n        }\n      }\n      if (newBlockName && parentBlock === editor.getBody()) {\n        return;\n      }\n      newBlockName = newBlockName || 'P';\n      if (isCaretContainerBlock$1(parentBlock)) {\n        newBlock = showCaretContainerBlock(parentBlock);\n        if (dom.isEmpty(parentBlock)) {\n          emptyBlock(parentBlock);\n        }\n        setForcedBlockAttrs(editor, newBlock);\n        moveToCaretPosition(editor, newBlock);\n      } else if (isCaretAtStartOrEndOfBlock()) {\n        insertNewBlockAfter();\n      } else if (isCaretAtStartOrEndOfBlock(true)) {\n        newBlock = parentBlock.parentNode.insertBefore(createNewBlock(), parentBlock);\n        moveToCaretPosition(editor, containerAndSiblingName(parentBlock, 'HR') ? newBlock : parentBlock);\n      } else {\n        tmpRng = includeZwspInRange(rng).cloneRange();\n        tmpRng.setEndAfter(parentBlock);\n        fragment = tmpRng.extractContents();\n        trimZwsp(fragment);\n        trimLeadingLineBreaks(fragment);\n        newBlock = fragment.firstChild;\n        dom.insertAfter(fragment, parentBlock);\n        trimInlineElementsOnLeftSideOfBlock(dom, nonEmptyElementsMap, newBlock);\n        addBrToBlockIfNeeded(dom, parentBlock);\n        if (dom.isEmpty(parentBlock)) {\n          emptyBlock(parentBlock);\n        }\n        newBlock.normalize();\n        if (dom.isEmpty(newBlock)) {\n          dom.remove(newBlock);\n          insertNewBlockAfter();\n        } else {\n          setForcedBlockAttrs(editor, newBlock);\n          moveToCaretPosition(editor, newBlock);\n        }\n      }\n      dom.setAttrib(newBlock, 'id', '');\n      editor.fire('NewBlock', { newBlock: newBlock });\n    };\n\n    var hasRightSideContent = function (schema, container, parentBlock) {\n      var walker = new DomTreeWalker(container, parentBlock);\n      var node;\n      var nonEmptyElementsMap = schema.getNonEmptyElements();\n      while (node = walker.next()) {\n        if (nonEmptyElementsMap[node.nodeName.toLowerCase()] || node.length > 0) {\n          return true;\n        }\n      }\n    };\n    var moveSelectionToBr = function (editor, brElm, extraBr) {\n      var rng = editor.dom.createRng();\n      if (!extraBr) {\n        rng.setStartAfter(brElm);\n        rng.setEndAfter(brElm);\n      } else {\n        rng.setStartBefore(brElm);\n        rng.setEndBefore(brElm);\n      }\n      editor.selection.setRng(rng);\n      scrollRangeIntoView(editor, rng);\n    };\n    var insertBrAtCaret = function (editor, evt) {\n      var selection = editor.selection;\n      var dom = editor.dom;\n      var rng = selection.getRng();\n      var brElm;\n      var extraBr;\n      normalize$2(dom, rng).each(function (normRng) {\n        rng.setStart(normRng.startContainer, normRng.startOffset);\n        rng.setEnd(normRng.endContainer, normRng.endOffset);\n      });\n      var offset = rng.startOffset;\n      var container = rng.startContainer;\n      if (container.nodeType === 1 && container.hasChildNodes()) {\n        var isAfterLastNodeInContainer = offset > container.childNodes.length - 1;\n        container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;\n        if (isAfterLastNodeInContainer && container.nodeType === 3) {\n          offset = container.nodeValue.length;\n        } else {\n          offset = 0;\n        }\n      }\n      var parentBlock = dom.getParent(container, dom.isBlock);\n      var containerBlock = parentBlock ? dom.getParent(parentBlock.parentNode, dom.isBlock) : null;\n      var containerBlockName = containerBlock ? containerBlock.nodeName.toUpperCase() : '';\n      var isControlKey = !!(evt && evt.ctrlKey);\n      if (containerBlockName === 'LI' && !isControlKey) {\n        parentBlock = containerBlock;\n      }\n      if (container && container.nodeType === 3 && offset >= container.nodeValue.length) {\n        if (!hasRightSideContent(editor.schema, container, parentBlock)) {\n          brElm = dom.create('br');\n          rng.insertNode(brElm);\n          rng.setStartAfter(brElm);\n          rng.setEndAfter(brElm);\n          extraBr = true;\n        }\n      }\n      brElm = dom.create('br');\n      rangeInsertNode(dom, rng, brElm);\n      moveSelectionToBr(editor, brElm, extraBr);\n      editor.undoManager.add();\n    };\n    var insertBrBefore = function (editor, inline) {\n      var br = SugarElement.fromTag('br');\n      before$4(SugarElement.fromDom(inline), br);\n      editor.undoManager.add();\n    };\n    var insertBrAfter = function (editor, inline) {\n      if (!hasBrAfter(editor.getBody(), inline)) {\n        after$3(SugarElement.fromDom(inline), SugarElement.fromTag('br'));\n      }\n      var br = SugarElement.fromTag('br');\n      after$3(SugarElement.fromDom(inline), br);\n      moveSelectionToBr(editor, br.dom, false);\n      editor.undoManager.add();\n    };\n    var isBeforeBr = function (pos) {\n      return isBr$5(pos.getNode());\n    };\n    var hasBrAfter = function (rootNode, startNode) {\n      if (isBeforeBr(CaretPosition.after(startNode))) {\n        return true;\n      } else {\n        return nextPosition(rootNode, CaretPosition.after(startNode)).map(function (pos) {\n          return isBr$5(pos.getNode());\n        }).getOr(false);\n      }\n    };\n    var isAnchorLink = function (elm) {\n      return elm && elm.nodeName === 'A' && 'href' in elm;\n    };\n    var isInsideAnchor = function (location) {\n      return location.fold(never, isAnchorLink, isAnchorLink, never);\n    };\n    var readInlineAnchorLocation = function (editor) {\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\n      var position = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return readLocation(isInlineTarget$1, editor.getBody(), position).filter(isInsideAnchor);\n    };\n    var insertBrOutsideAnchor = function (editor, location) {\n      location.fold(noop, curry(insertBrBefore, editor), curry(insertBrAfter, editor), noop);\n    };\n    var insert$1 = function (editor, evt) {\n      var anchorLocation = readInlineAnchorLocation(editor);\n      if (anchorLocation.isSome()) {\n        anchorLocation.each(curry(insertBrOutsideAnchor, editor));\n      } else {\n        insertBrAtCaret(editor, evt);\n      }\n    };\n\n    var matchesSelector = function (editor, selector) {\n      return getParentBlock(editor).filter(function (parentBlock) {\n        return selector.length > 0 && is$2(SugarElement.fromDom(parentBlock), selector);\n      }).isSome();\n    };\n    var shouldInsertBr = function (editor) {\n      return matchesSelector(editor, getBrNewLineSelector(editor));\n    };\n    var shouldBlockNewLine$1 = function (editor) {\n      return matchesSelector(editor, getNoNewLineSelector(editor));\n    };\n\n    var newLineAction = Adt.generate([\n      { br: [] },\n      { block: [] },\n      { none: [] }\n    ]);\n    var shouldBlockNewLine = function (editor, _shiftKey) {\n      return shouldBlockNewLine$1(editor);\n    };\n    var isBrMode = function (requiredState) {\n      return function (editor, _shiftKey) {\n        var brMode = getForcedRootBlock(editor) === '';\n        return brMode === requiredState;\n      };\n    };\n    var inListBlock = function (requiredState) {\n      return function (editor, _shiftKey) {\n        return isListItemParentBlock(editor) === requiredState;\n      };\n    };\n    var inBlock = function (blockName, requiredState) {\n      return function (editor, _shiftKey) {\n        var state = getParentBlockName(editor) === blockName.toUpperCase();\n        return state === requiredState;\n      };\n    };\n    var inPreBlock = function (requiredState) {\n      return inBlock('pre', requiredState);\n    };\n    var inSummaryBlock = function () {\n      return inBlock('summary', true);\n    };\n    var shouldPutBrInPre = function (requiredState) {\n      return function (editor, _shiftKey) {\n        return shouldPutBrInPre$1(editor) === requiredState;\n      };\n    };\n    var inBrContext = function (editor, _shiftKey) {\n      return shouldInsertBr(editor);\n    };\n    var hasShiftKey = function (_editor, shiftKey) {\n      return shiftKey;\n    };\n    var canInsertIntoEditableRoot = function (editor) {\n      var forcedRootBlock = getForcedRootBlock(editor);\n      var rootEditable = getEditableRoot$1(editor.dom, editor.selection.getStart());\n      return rootEditable && editor.schema.isValidChild(rootEditable.nodeName, forcedRootBlock ? forcedRootBlock : 'P');\n    };\n    var match = function (predicates, action) {\n      return function (editor, shiftKey) {\n        var isMatch = foldl(predicates, function (res, p) {\n          return res && p(editor, shiftKey);\n        }, true);\n        return isMatch ? Optional.some(action) : Optional.none();\n      };\n    };\n    var getAction = function (editor, evt) {\n      return evaluateUntil([\n        match([shouldBlockNewLine], newLineAction.none()),\n        match([inSummaryBlock()], newLineAction.br()),\n        match([\n          inPreBlock(true),\n          shouldPutBrInPre(false),\n          hasShiftKey\n        ], newLineAction.br()),\n        match([\n          inPreBlock(true),\n          shouldPutBrInPre(false)\n        ], newLineAction.block()),\n        match([\n          inPreBlock(true),\n          shouldPutBrInPre(true),\n          hasShiftKey\n        ], newLineAction.block()),\n        match([\n          inPreBlock(true),\n          shouldPutBrInPre(true)\n        ], newLineAction.br()),\n        match([\n          inListBlock(true),\n          hasShiftKey\n        ], newLineAction.br()),\n        match([inListBlock(true)], newLineAction.block()),\n        match([\n          isBrMode(true),\n          hasShiftKey,\n          canInsertIntoEditableRoot\n        ], newLineAction.block()),\n        match([isBrMode(true)], newLineAction.br()),\n        match([inBrContext], newLineAction.br()),\n        match([\n          isBrMode(false),\n          hasShiftKey\n        ], newLineAction.br()),\n        match([canInsertIntoEditableRoot], newLineAction.block())\n      ], [\n        editor,\n        !!(evt && evt.shiftKey)\n      ]).getOr(newLineAction.none());\n    };\n\n    var insert = function (editor, evt) {\n      getAction(editor, evt).fold(function () {\n        insert$1(editor, evt);\n      }, function () {\n        insert$2(editor, evt);\n      }, noop);\n    };\n\n    var handleEnterKeyEvent = function (editor, event) {\n      if (event.isDefaultPrevented()) {\n        return;\n      }\n      event.preventDefault();\n      endTypingLevelIgnoreLocks(editor.undoManager);\n      editor.undoManager.transact(function () {\n        if (editor.selection.isCollapsed() === false) {\n          editor.execCommand('Delete');\n        }\n        insert(editor, event);\n      });\n    };\n    var setup$9 = function (editor) {\n      editor.on('keydown', function (event) {\n        if (event.keyCode === VK.ENTER) {\n          handleEnterKeyEvent(editor, event);\n        }\n      });\n    };\n\n    var executeKeydownOverride$1 = function (editor, caret, evt) {\n      execute([\n        {\n          keyCode: VK.END,\n          action: action(moveToLineEndPoint$1, editor, true)\n        },\n        {\n          keyCode: VK.HOME,\n          action: action(moveToLineEndPoint$1, editor, false)\n        },\n        {\n          keyCode: VK.END,\n          action: action(moveToLineEndPoint, editor, true)\n        },\n        {\n          keyCode: VK.HOME,\n          action: action(moveToLineEndPoint, editor, false)\n        },\n        {\n          keyCode: VK.END,\n          action: action(moveToLineEndPoint$2, editor, true, caret)\n        },\n        {\n          keyCode: VK.HOME,\n          action: action(moveToLineEndPoint$2, editor, false, caret)\n        }\n      ], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var setup$8 = function (editor, caret) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride$1(editor, caret, evt);\n        }\n      });\n    };\n\n    var browser = detect().browser;\n    var setupIeInput = function (editor) {\n      var keypressThrotter = first(function () {\n        if (!editor.composing) {\n          normalizeNbspsInEditor(editor);\n        }\n      }, 0);\n      if (browser.isIE()) {\n        editor.on('keypress', function (_e) {\n          keypressThrotter.throttle();\n        });\n        editor.on('remove', function (_e) {\n          keypressThrotter.cancel();\n        });\n      }\n    };\n    var setup$7 = function (editor) {\n      setupIeInput(editor);\n      editor.on('input', function (e) {\n        if (e.isComposing === false) {\n          normalizeNbspsInEditor(editor);\n        }\n      });\n    };\n\n    var platform = detect();\n    var executeKeyupAction = function (editor, caret, evt) {\n      execute([\n        {\n          keyCode: VK.PAGE_UP,\n          action: action(moveToLineEndPoint$2, editor, false, caret)\n        },\n        {\n          keyCode: VK.PAGE_DOWN,\n          action: action(moveToLineEndPoint$2, editor, true, caret)\n        }\n      ], evt);\n    };\n    var stopImmediatePropagation = function (e) {\n      return e.stopImmediatePropagation();\n    };\n    var isPageUpDown = function (evt) {\n      return evt.keyCode === VK.PAGE_UP || evt.keyCode === VK.PAGE_DOWN;\n    };\n    var setNodeChangeBlocker = function (blocked, editor, block) {\n      if (block && !blocked.get()) {\n        editor.on('NodeChange', stopImmediatePropagation, true);\n      } else if (!block && blocked.get()) {\n        editor.off('NodeChange', stopImmediatePropagation);\n      }\n      blocked.set(block);\n    };\n    var setup$6 = function (editor, caret) {\n      if (platform.os.isOSX()) {\n        return;\n      }\n      var blocked = Cell(false);\n      editor.on('keydown', function (evt) {\n        if (isPageUpDown(evt)) {\n          setNodeChangeBlocker(blocked, editor, true);\n        }\n      });\n      editor.on('keyup', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeyupAction(editor, caret, evt);\n        }\n        if (isPageUpDown(evt) && blocked.get()) {\n          setNodeChangeBlocker(blocked, editor, false);\n          editor.nodeChanged();\n        }\n      });\n    };\n\n    var insertTextAtPosition = function (text, pos) {\n      var container = pos.container();\n      var offset = pos.offset();\n      if (isText$7(container)) {\n        container.insertData(offset, text);\n        return Optional.some(CaretPosition(container, offset + text.length));\n      } else {\n        return getElementFromPosition(pos).map(function (elm) {\n          var textNode = SugarElement.fromText(text);\n          if (pos.isAtEnd()) {\n            after$3(elm, textNode);\n          } else {\n            before$4(elm, textNode);\n          }\n          return CaretPosition(textNode.dom, text.length);\n        });\n      }\n    };\n    var insertNbspAtPosition = curry(insertTextAtPosition, nbsp);\n    var insertSpaceAtPosition = curry(insertTextAtPosition, ' ');\n\n    var locationToCaretPosition = function (root) {\n      return function (location) {\n        return location.fold(function (element) {\n          return prevPosition(root.dom, CaretPosition.before(element));\n        }, function (element) {\n          return firstPositionIn(element);\n        }, function (element) {\n          return lastPositionIn(element);\n        }, function (element) {\n          return nextPosition(root.dom, CaretPosition.after(element));\n        });\n      };\n    };\n    var insertInlineBoundarySpaceOrNbsp = function (root, pos) {\n      return function (checkPos) {\n        return needsToHaveNbsp(root, checkPos) ? insertNbspAtPosition(pos) : insertSpaceAtPosition(pos);\n      };\n    };\n    var setSelection = function (editor) {\n      return function (pos) {\n        editor.selection.setRng(pos.toRange());\n        editor.nodeChanged();\n        return true;\n      };\n    };\n    var insertSpaceOrNbspAtSelection = function (editor) {\n      var pos = CaretPosition.fromRangeStart(editor.selection.getRng());\n      var root = SugarElement.fromDom(editor.getBody());\n      if (editor.selection.isCollapsed()) {\n        var isInlineTarget$1 = curry(isInlineTarget, editor);\n        var caretPosition = CaretPosition.fromRangeStart(editor.selection.getRng());\n        return readLocation(isInlineTarget$1, editor.getBody(), caretPosition).bind(locationToCaretPosition(root)).bind(insertInlineBoundarySpaceOrNbsp(root, pos)).exists(setSelection(editor));\n      } else {\n        return false;\n      }\n    };\n\n    var executeKeydownOverride = function (editor, evt) {\n      execute([{\n          keyCode: VK.SPACEBAR,\n          action: action(insertSpaceOrNbspAtSelection, editor)\n        }], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var setup$5 = function (editor) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride(editor, evt);\n        }\n      });\n    };\n\n    var registerKeyboardOverrides = function (editor) {\n      var caret = setupSelectedState(editor);\n      setup$c(editor);\n      setup$b(editor, caret);\n      setup$a(editor, caret);\n      setup$9(editor);\n      setup$5(editor);\n      setup$7(editor);\n      setup$8(editor, caret);\n      setup$6(editor, caret);\n      return caret;\n    };\n    var setup$4 = function (editor) {\n      if (!isRtc(editor)) {\n        return registerKeyboardOverrides(editor);\n      } else {\n        return Cell(null);\n      }\n    };\n\n    var NodeChange = function () {\n      function NodeChange(editor) {\n        this.lastPath = [];\n        this.editor = editor;\n        var lastRng;\n        var self = this;\n        if (!('onselectionchange' in editor.getDoc())) {\n          editor.on('NodeChange click mouseup keyup focus', function (e) {\n            var nativeRng = editor.selection.getRng();\n            var fakeRng = {\n              startContainer: nativeRng.startContainer,\n              startOffset: nativeRng.startOffset,\n              endContainer: nativeRng.endContainer,\n              endOffset: nativeRng.endOffset\n            };\n            if (e.type === 'nodechange' || !isEq$4(fakeRng, lastRng)) {\n              editor.fire('SelectionChange');\n            }\n            lastRng = fakeRng;\n          });\n        }\n        editor.on('contextmenu', function () {\n          editor.fire('SelectionChange');\n        });\n        editor.on('SelectionChange', function () {\n          var startElm = editor.selection.getStart(true);\n          if (!startElm || !Env.range && editor.selection.isCollapsed()) {\n            return;\n          }\n          if (hasAnyRanges(editor) && !self.isSameElementPath(startElm) && editor.dom.isChildOf(startElm, editor.getBody())) {\n            editor.nodeChanged({ selectionChange: true });\n          }\n        });\n        editor.on('mouseup', function (e) {\n          if (!e.isDefaultPrevented() && hasAnyRanges(editor)) {\n            if (editor.selection.getNode().nodeName === 'IMG') {\n              Delay.setEditorTimeout(editor, function () {\n                editor.nodeChanged();\n              });\n            } else {\n              editor.nodeChanged();\n            }\n          }\n        });\n      }\n      NodeChange.prototype.nodeChanged = function (args) {\n        var selection = this.editor.selection;\n        var node, parents, root;\n        if (this.editor.initialized && selection && !shouldDisableNodeChange(this.editor) && !this.editor.mode.isReadOnly()) {\n          root = this.editor.getBody();\n          node = selection.getStart(true) || root;\n          if (node.ownerDocument !== this.editor.getDoc() || !this.editor.dom.isChildOf(node, root)) {\n            node = root;\n          }\n          parents = [];\n          this.editor.dom.getParent(node, function (node) {\n            if (node === root) {\n              return true;\n            }\n            parents.push(node);\n          });\n          args = args || {};\n          args.element = node;\n          args.parents = parents;\n          this.editor.fire('NodeChange', args);\n        }\n      };\n      NodeChange.prototype.isSameElementPath = function (startElm) {\n        var i;\n        var currentPath = this.editor.$(startElm).parentsUntil(this.editor.getBody()).add(startElm);\n        if (currentPath.length === this.lastPath.length) {\n          for (i = currentPath.length; i >= 0; i--) {\n            if (currentPath[i] !== this.lastPath[i]) {\n              break;\n            }\n          }\n          if (i === -1) {\n            this.lastPath = currentPath;\n            return true;\n          }\n        }\n        this.lastPath = currentPath;\n        return false;\n      };\n      return NodeChange;\n    }();\n\n    var preventSummaryToggle = function (editor) {\n      editor.on('click', function (e) {\n        if (editor.dom.getParent(e.target, 'details')) {\n          e.preventDefault();\n        }\n      });\n    };\n    var filterDetails = function (editor) {\n      editor.parser.addNodeFilter('details', function (elms) {\n        each$k(elms, function (details) {\n          details.attr('data-mce-open', details.attr('open'));\n          details.attr('open', 'open');\n        });\n      });\n      editor.serializer.addNodeFilter('details', function (elms) {\n        each$k(elms, function (details) {\n          var open = details.attr('data-mce-open');\n          details.attr('open', isString$1(open) ? open : null);\n          details.attr('data-mce-open', null);\n        });\n      });\n    };\n    var setup$3 = function (editor) {\n      preventSummaryToggle(editor);\n      filterDetails(editor);\n    };\n\n    var isTextBlockNode = function (node) {\n      return isElement$5(node) && isTextBlock$2(SugarElement.fromDom(node));\n    };\n    var normalizeSelection = function (editor) {\n      var rng = editor.selection.getRng();\n      var startPos = CaretPosition.fromRangeStart(rng);\n      var endPos = CaretPosition.fromRangeEnd(rng);\n      if (CaretPosition.isElementPosition(startPos)) {\n        var container = startPos.container();\n        if (isTextBlockNode(container)) {\n          firstPositionIn(container).each(function (pos) {\n            return rng.setStart(pos.container(), pos.offset());\n          });\n        }\n      }\n      if (CaretPosition.isElementPosition(endPos)) {\n        var container = startPos.container();\n        if (isTextBlockNode(container)) {\n          lastPositionIn(container).each(function (pos) {\n            return rng.setEnd(pos.container(), pos.offset());\n          });\n        }\n      }\n      editor.selection.setRng(normalize(rng));\n    };\n    var setup$2 = function (editor) {\n      editor.on('click', function (e) {\n        if (e.detail >= 3) {\n          normalizeSelection(editor);\n        }\n      });\n    };\n\n    var getAbsolutePosition = function (elm) {\n      var clientRect = elm.getBoundingClientRect();\n      var doc = elm.ownerDocument;\n      var docElem = doc.documentElement;\n      var win = doc.defaultView;\n      return {\n        top: clientRect.top + win.pageYOffset - docElem.clientTop,\n        left: clientRect.left + win.pageXOffset - docElem.clientLeft\n      };\n    };\n    var getBodyPosition = function (editor) {\n      return editor.inline ? getAbsolutePosition(editor.getBody()) : {\n        left: 0,\n        top: 0\n      };\n    };\n    var getScrollPosition = function (editor) {\n      var body = editor.getBody();\n      return editor.inline ? {\n        left: body.scrollLeft,\n        top: body.scrollTop\n      } : {\n        left: 0,\n        top: 0\n      };\n    };\n    var getBodyScroll = function (editor) {\n      var body = editor.getBody(), docElm = editor.getDoc().documentElement;\n      var inlineScroll = {\n        left: body.scrollLeft,\n        top: body.scrollTop\n      };\n      var iframeScroll = {\n        left: body.scrollLeft || docElm.scrollLeft,\n        top: body.scrollTop || docElm.scrollTop\n      };\n      return editor.inline ? inlineScroll : iframeScroll;\n    };\n    var getMousePosition = function (editor, event) {\n      if (event.target.ownerDocument !== editor.getDoc()) {\n        var iframePosition = getAbsolutePosition(editor.getContentAreaContainer());\n        var scrollPosition = getBodyScroll(editor);\n        return {\n          left: event.pageX - iframePosition.left + scrollPosition.left,\n          top: event.pageY - iframePosition.top + scrollPosition.top\n        };\n      }\n      return {\n        left: event.pageX,\n        top: event.pageY\n      };\n    };\n    var calculatePosition = function (bodyPosition, scrollPosition, mousePosition) {\n      return {\n        pageX: mousePosition.left - bodyPosition.left + scrollPosition.left,\n        pageY: mousePosition.top - bodyPosition.top + scrollPosition.top\n      };\n    };\n    var calc = function (editor, event) {\n      return calculatePosition(getBodyPosition(editor), getScrollPosition(editor), getMousePosition(editor, event));\n    };\n\n    var isContentEditableFalse$1 = isContentEditableFalse$b, isContentEditableTrue$1 = isContentEditableTrue$4;\n    var isDraggable = function (rootElm, elm) {\n      return isContentEditableFalse$1(elm) && elm !== rootElm;\n    };\n    var isValidDropTarget = function (editor, targetElement, dragElement) {\n      if (targetElement === dragElement || editor.dom.isChildOf(targetElement, dragElement)) {\n        return false;\n      }\n      return !isContentEditableFalse$1(targetElement);\n    };\n    var cloneElement = function (elm) {\n      var cloneElm = elm.cloneNode(true);\n      cloneElm.removeAttribute('data-mce-selected');\n      return cloneElm;\n    };\n    var createGhost = function (editor, elm, width, height) {\n      var dom = editor.dom;\n      var clonedElm = elm.cloneNode(true);\n      dom.setStyles(clonedElm, {\n        width: width,\n        height: height\n      });\n      dom.setAttrib(clonedElm, 'data-mce-selected', null);\n      var ghostElm = dom.create('div', {\n        'class': 'mce-drag-container',\n        'data-mce-bogus': 'all',\n        'unselectable': 'on',\n        'contenteditable': 'false'\n      });\n      dom.setStyles(ghostElm, {\n        position: 'absolute',\n        opacity: 0.5,\n        overflow: 'hidden',\n        border: 0,\n        padding: 0,\n        margin: 0,\n        width: width,\n        height: height\n      });\n      dom.setStyles(clonedElm, {\n        margin: 0,\n        boxSizing: 'border-box'\n      });\n      ghostElm.appendChild(clonedElm);\n      return ghostElm;\n    };\n    var appendGhostToBody = function (ghostElm, bodyElm) {\n      if (ghostElm.parentNode !== bodyElm) {\n        bodyElm.appendChild(ghostElm);\n      }\n    };\n    var moveGhost = function (ghostElm, position, width, height, maxX, maxY) {\n      var overflowX = 0, overflowY = 0;\n      ghostElm.style.left = position.pageX + 'px';\n      ghostElm.style.top = position.pageY + 'px';\n      if (position.pageX + width > maxX) {\n        overflowX = position.pageX + width - maxX;\n      }\n      if (position.pageY + height > maxY) {\n        overflowY = position.pageY + height - maxY;\n      }\n      ghostElm.style.width = width - overflowX + 'px';\n      ghostElm.style.height = height - overflowY + 'px';\n    };\n    var removeElement = function (elm) {\n      if (elm && elm.parentNode) {\n        elm.parentNode.removeChild(elm);\n      }\n    };\n    var isLeftMouseButtonPressed = function (e) {\n      return e.button === 0;\n    };\n    var applyRelPos = function (state, position) {\n      return {\n        pageX: position.pageX - state.relX,\n        pageY: position.pageY + 5\n      };\n    };\n    var start = function (state, editor) {\n      return function (e) {\n        if (isLeftMouseButtonPressed(e)) {\n          var ceElm = find$3(editor.dom.getParents(e.target), or(isContentEditableFalse$1, isContentEditableTrue$1)).getOr(null);\n          if (isDraggable(editor.getBody(), ceElm)) {\n            var elmPos = editor.dom.getPos(ceElm);\n            var bodyElm = editor.getBody();\n            var docElm = editor.getDoc().documentElement;\n            state.set({\n              element: ceElm,\n              dragging: false,\n              screenX: e.screenX,\n              screenY: e.screenY,\n              maxX: (editor.inline ? bodyElm.scrollWidth : docElm.offsetWidth) - 2,\n              maxY: (editor.inline ? bodyElm.scrollHeight : docElm.offsetHeight) - 2,\n              relX: e.pageX - elmPos.x,\n              relY: e.pageY - elmPos.y,\n              width: ceElm.offsetWidth,\n              height: ceElm.offsetHeight,\n              ghost: createGhost(editor, ceElm, ceElm.offsetWidth, ceElm.offsetHeight)\n            });\n          }\n        }\n      };\n    };\n    var move = function (state, editor) {\n      var throttledPlaceCaretAt = Delay.throttle(function (clientX, clientY) {\n        editor._selectionOverrides.hideFakeCaret();\n        editor.selection.placeCaretAt(clientX, clientY);\n      }, 0);\n      editor.on('remove', throttledPlaceCaretAt.stop);\n      return function (e) {\n        return state.on(function (state) {\n          var movement = Math.max(Math.abs(e.screenX - state.screenX), Math.abs(e.screenY - state.screenY));\n          if (!state.dragging && movement > 10) {\n            var args = editor.fire('dragstart', { target: state.element });\n            if (args.isDefaultPrevented()) {\n              return;\n            }\n            state.dragging = true;\n            editor.focus();\n          }\n          if (state.dragging) {\n            var targetPos = applyRelPos(state, calc(editor, e));\n            appendGhostToBody(state.ghost, editor.getBody());\n            moveGhost(state.ghost, targetPos, state.width, state.height, state.maxX, state.maxY);\n            throttledPlaceCaretAt(e.clientX, e.clientY);\n          }\n        });\n      };\n    };\n    var getRawTarget = function (selection) {\n      var rng = selection.getSel().getRangeAt(0);\n      var startContainer = rng.startContainer;\n      return startContainer.nodeType === 3 ? startContainer.parentNode : startContainer;\n    };\n    var drop = function (state, editor) {\n      return function (e) {\n        state.on(function (state) {\n          if (state.dragging) {\n            if (isValidDropTarget(editor, getRawTarget(editor.selection), state.element)) {\n              var targetClone_1 = cloneElement(state.element);\n              var args = editor.fire('drop', {\n                clientX: e.clientX,\n                clientY: e.clientY\n              });\n              if (!args.isDefaultPrevented()) {\n                editor.undoManager.transact(function () {\n                  removeElement(state.element);\n                  editor.insertContent(editor.dom.getOuterHTML(targetClone_1));\n                  editor._selectionOverrides.hideFakeCaret();\n                });\n              }\n            }\n            editor.fire('dragend');\n          }\n        });\n        removeDragState(state);\n      };\n    };\n    var stop = function (state, editor) {\n      return function () {\n        state.on(function (state) {\n          if (state.dragging) {\n            editor.fire('dragend');\n          }\n        });\n        removeDragState(state);\n      };\n    };\n    var removeDragState = function (state) {\n      state.on(function (state) {\n        removeElement(state.ghost);\n      });\n      state.clear();\n    };\n    var bindFakeDragEvents = function (editor) {\n      var state = value();\n      var pageDom = DOMUtils.DOM;\n      var rootDocument = document;\n      var dragStartHandler = start(state, editor);\n      var dragHandler = move(state, editor);\n      var dropHandler = drop(state, editor);\n      var dragEndHandler = stop(state, editor);\n      editor.on('mousedown', dragStartHandler);\n      editor.on('mousemove', dragHandler);\n      editor.on('mouseup', dropHandler);\n      pageDom.bind(rootDocument, 'mousemove', dragHandler);\n      pageDom.bind(rootDocument, 'mouseup', dragEndHandler);\n      editor.on('remove', function () {\n        pageDom.unbind(rootDocument, 'mousemove', dragHandler);\n        pageDom.unbind(rootDocument, 'mouseup', dragEndHandler);\n      });\n      editor.on('keydown', function (e) {\n        if (e.keyCode === VK.ESC) {\n          dragEndHandler();\n        }\n      });\n    };\n    var blockIeDrop = function (editor) {\n      editor.on('drop', function (e) {\n        var realTarget = typeof e.clientX !== 'undefined' ? editor.getDoc().elementFromPoint(e.clientX, e.clientY) : null;\n        if (isContentEditableFalse$1(realTarget) || editor.dom.getContentEditableParent(realTarget) === 'false') {\n          e.preventDefault();\n        }\n      });\n    };\n    var blockUnsupportedFileDrop = function (editor) {\n      var preventFileDrop = function (e) {\n        if (!e.isDefaultPrevented()) {\n          var dataTransfer = e.dataTransfer;\n          if (dataTransfer && (contains$3(dataTransfer.types, 'Files') || dataTransfer.files.length > 0)) {\n            e.preventDefault();\n            if (e.type === 'drop') {\n              displayError(editor, 'Dropped file type is not supported');\n            }\n          }\n        }\n      };\n      var preventFileDropIfUIElement = function (e) {\n        if (isUIElement(editor, e.target)) {\n          preventFileDrop(e);\n        }\n      };\n      var setup = function () {\n        var pageDom = DOMUtils.DOM;\n        var dom = editor.dom;\n        var doc = document;\n        var editorRoot = editor.inline ? editor.getBody() : editor.getDoc();\n        var eventNames = [\n          'drop',\n          'dragover'\n        ];\n        each$k(eventNames, function (name) {\n          pageDom.bind(doc, name, preventFileDropIfUIElement);\n          dom.bind(editorRoot, name, preventFileDrop);\n        });\n        editor.on('remove', function () {\n          each$k(eventNames, function (name) {\n            pageDom.unbind(doc, name, preventFileDropIfUIElement);\n            dom.unbind(editorRoot, name, preventFileDrop);\n          });\n        });\n      };\n      editor.on('init', function () {\n        Delay.setEditorTimeout(editor, setup, 0);\n      });\n    };\n    var init$2 = function (editor) {\n      bindFakeDragEvents(editor);\n      blockIeDrop(editor);\n      if (shouldBlockUnsupportedDrop(editor)) {\n        blockUnsupportedFileDrop(editor);\n      }\n    };\n\n    var setup$1 = function (editor) {\n      var renderFocusCaret = first(function () {\n        if (!editor.removed && editor.getBody().contains(document.activeElement)) {\n          var rng = editor.selection.getRng();\n          if (rng.collapsed) {\n            var caretRange = renderRangeCaret(editor, rng, false);\n            editor.selection.setRng(caretRange);\n          }\n        }\n      }, 0);\n      editor.on('focus', function () {\n        renderFocusCaret.throttle();\n      });\n      editor.on('blur', function () {\n        renderFocusCaret.cancel();\n      });\n    };\n\n    var setup = function (editor) {\n      editor.on('init', function () {\n        editor.on('focusin', function (e) {\n          var target = e.target;\n          if (isMedia$2(target)) {\n            var ceRoot = getContentEditableRoot$1(editor.getBody(), target);\n            var node = isContentEditableFalse$b(ceRoot) ? ceRoot : target;\n            if (editor.selection.getNode() !== node) {\n              selectNode(editor, node).each(function (rng) {\n                return editor.selection.setRng(rng);\n              });\n            }\n          }\n        });\n      });\n    };\n\n    var isContentEditableTrue = isContentEditableTrue$4;\n    var isContentEditableFalse = isContentEditableFalse$b;\n    var getContentEditableRoot = function (editor, node) {\n      return getContentEditableRoot$1(editor.getBody(), node);\n    };\n    var SelectionOverrides = function (editor) {\n      var selection = editor.selection, dom = editor.dom;\n      var isBlock = dom.isBlock;\n      var rootNode = editor.getBody();\n      var fakeCaret = FakeCaret(editor, rootNode, isBlock, function () {\n        return hasFocus(editor);\n      });\n      var realSelectionId = 'sel-' + dom.uniqueId();\n      var elementSelectionAttr = 'data-mce-selected';\n      var selectedElement;\n      var isFakeSelectionElement = function (node) {\n        return dom.hasClass(node, 'mce-offscreen-selection');\n      };\n      var isFakeSelectionTargetElement = function (node) {\n        return node !== rootNode && (isContentEditableFalse(node) || isMedia$2(node)) && dom.isChildOf(node, rootNode);\n      };\n      var isNearFakeSelectionElement = function (pos) {\n        return isBeforeContentEditableFalse(pos) || isAfterContentEditableFalse(pos) || isBeforeMedia(pos) || isAfterMedia(pos);\n      };\n      var getRealSelectionElement = function () {\n        var container = dom.get(realSelectionId);\n        return container ? container.getElementsByTagName('*')[0] : container;\n      };\n      var setRange = function (range) {\n        if (range) {\n          selection.setRng(range);\n        }\n      };\n      var getRange = selection.getRng;\n      var showCaret = function (direction, node, before, scrollIntoView) {\n        if (scrollIntoView === void 0) {\n          scrollIntoView = true;\n        }\n        var e = editor.fire('ShowCaret', {\n          target: node,\n          direction: direction,\n          before: before\n        });\n        if (e.isDefaultPrevented()) {\n          return null;\n        }\n        if (scrollIntoView) {\n          selection.scrollIntoView(node, direction === -1);\n        }\n        return fakeCaret.show(before, node);\n      };\n      var showBlockCaretContainer = function (blockCaretContainer) {\n        if (blockCaretContainer.hasAttribute('data-mce-caret')) {\n          showCaretContainerBlock(blockCaretContainer);\n          setRange(getRange());\n          selection.scrollIntoView(blockCaretContainer);\n        }\n      };\n      var registerEvents = function () {\n        editor.on('mouseup', function (e) {\n          var range = getRange();\n          if (range.collapsed && isXYInContentArea(editor, e.clientX, e.clientY)) {\n            renderCaretAtRange(editor, range, false).each(setRange);\n          }\n        });\n        editor.on('click', function (e) {\n          var contentEditableRoot = getContentEditableRoot(editor, e.target);\n          if (contentEditableRoot) {\n            if (isContentEditableFalse(contentEditableRoot)) {\n              e.preventDefault();\n              editor.focus();\n            }\n            if (isContentEditableTrue(contentEditableRoot)) {\n              if (dom.isChildOf(contentEditableRoot, selection.getNode())) {\n                removeElementSelection();\n              }\n            }\n          }\n        });\n        editor.on('blur NewBlock', removeElementSelection);\n        editor.on('ResizeWindow FullscreenStateChanged', fakeCaret.reposition);\n        var hasNormalCaretPosition = function (elm) {\n          var start = elm.firstChild;\n          if (isNullable(start)) {\n            return false;\n          }\n          var startPos = CaretPosition.before(start);\n          if (isBr$5(startPos.getNode()) && elm.childNodes.length === 1) {\n            return !isNearFakeSelectionElement(startPos);\n          } else {\n            var caretWalker = CaretWalker(elm);\n            var newPos = caretWalker.next(startPos);\n            return newPos && !isNearFakeSelectionElement(newPos);\n          }\n        };\n        var isInSameBlock = function (node1, node2) {\n          var block1 = dom.getParent(node1, isBlock);\n          var block2 = dom.getParent(node2, isBlock);\n          return block1 === block2;\n        };\n        var hasBetterMouseTarget = function (targetNode, caretNode) {\n          var targetBlock = dom.getParent(targetNode, isBlock);\n          var caretBlock = dom.getParent(caretNode, isBlock);\n          if (isNullable(targetBlock)) {\n            return false;\n          }\n          if (targetNode !== caretBlock && dom.isChildOf(targetBlock, caretBlock) && isContentEditableFalse(getContentEditableRoot(editor, targetBlock)) === false) {\n            return true;\n          }\n          return !dom.isChildOf(caretBlock, targetBlock) && !isInSameBlock(targetBlock, caretBlock) && hasNormalCaretPosition(targetBlock);\n        };\n        editor.on('tap', function (e) {\n          var targetElm = e.target;\n          var contentEditableRoot = getContentEditableRoot(editor, targetElm);\n          if (isContentEditableFalse(contentEditableRoot)) {\n            e.preventDefault();\n            selectNode(editor, contentEditableRoot).each(setElementSelection);\n          } else if (isFakeSelectionTargetElement(targetElm)) {\n            selectNode(editor, targetElm).each(setElementSelection);\n          }\n        }, true);\n        editor.on('mousedown', function (e) {\n          var targetElm = e.target;\n          if (targetElm !== rootNode && targetElm.nodeName !== 'HTML' && !dom.isChildOf(targetElm, rootNode)) {\n            return;\n          }\n          if (isXYInContentArea(editor, e.clientX, e.clientY) === false) {\n            return;\n          }\n          var contentEditableRoot = getContentEditableRoot(editor, targetElm);\n          if (contentEditableRoot) {\n            if (isContentEditableFalse(contentEditableRoot)) {\n              e.preventDefault();\n              selectNode(editor, contentEditableRoot).each(setElementSelection);\n            } else {\n              removeElementSelection();\n              if (!(isContentEditableTrue(contentEditableRoot) && e.shiftKey) && !isXYWithinRange(e.clientX, e.clientY, selection.getRng())) {\n                hideFakeCaret();\n                selection.placeCaretAt(e.clientX, e.clientY);\n              }\n            }\n          } else if (isFakeSelectionTargetElement(targetElm)) {\n            selectNode(editor, targetElm).each(setElementSelection);\n          } else if (isFakeCaretTarget(targetElm) === false) {\n            removeElementSelection();\n            hideFakeCaret();\n            var fakeCaretInfo = closestFakeCaret(rootNode, e.clientX, e.clientY);\n            if (fakeCaretInfo) {\n              if (!hasBetterMouseTarget(targetElm, fakeCaretInfo.node)) {\n                e.preventDefault();\n                var range = showCaret(1, fakeCaretInfo.node, fakeCaretInfo.before, false);\n                setRange(range);\n                editor.getBody().focus();\n              }\n            }\n          }\n        });\n        editor.on('keypress', function (e) {\n          if (VK.modifierPressed(e)) {\n            return;\n          }\n          if (isContentEditableFalse(selection.getNode())) {\n            e.preventDefault();\n          }\n        });\n        editor.on('GetSelectionRange', function (e) {\n          var rng = e.range;\n          if (selectedElement) {\n            if (!selectedElement.parentNode) {\n              selectedElement = null;\n              return;\n            }\n            rng = rng.cloneRange();\n            rng.selectNode(selectedElement);\n            e.range = rng;\n          }\n        });\n        editor.on('SetSelectionRange', function (e) {\n          e.range = normalizeShortEndedElementSelection(e.range);\n          var rng = setElementSelection(e.range, e.forward);\n          if (rng) {\n            e.range = rng;\n          }\n        });\n        var isPasteBin = function (node) {\n          return node.id === 'mcepastebin';\n        };\n        editor.on('AfterSetSelectionRange', function (e) {\n          var rng = e.range;\n          var parentNode = rng.startContainer.parentNode;\n          if (!isRangeInCaretContainer(rng) && !isPasteBin(parentNode)) {\n            hideFakeCaret();\n          }\n          if (!isFakeSelectionElement(parentNode)) {\n            removeElementSelection();\n          }\n        });\n        editor.on('copy', function (e) {\n          var clipboardData = e.clipboardData;\n          if (!e.isDefaultPrevented() && e.clipboardData && !Env.ie) {\n            var realSelectionElement = getRealSelectionElement();\n            if (realSelectionElement) {\n              e.preventDefault();\n              clipboardData.clearData();\n              clipboardData.setData('text/html', realSelectionElement.outerHTML);\n              clipboardData.setData('text/plain', realSelectionElement.outerText || realSelectionElement.innerText);\n            }\n          }\n        });\n        init$2(editor);\n        setup$1(editor);\n        setup(editor);\n      };\n      var isWithinCaretContainer = function (node) {\n        return isCaretContainer$2(node) || startsWithCaretContainer$1(node) || endsWithCaretContainer$1(node);\n      };\n      var isRangeInCaretContainer = function (rng) {\n        return isWithinCaretContainer(rng.startContainer) || isWithinCaretContainer(rng.endContainer);\n      };\n      var normalizeShortEndedElementSelection = function (rng) {\n        var shortEndedElements = editor.schema.getShortEndedElements();\n        var newRng = dom.createRng();\n        var startContainer = rng.startContainer;\n        var startOffset = rng.startOffset;\n        var endContainer = rng.endContainer;\n        var endOffset = rng.endOffset;\n        if (has$2(shortEndedElements, startContainer.nodeName.toLowerCase())) {\n          if (startOffset === 0) {\n            newRng.setStartBefore(startContainer);\n          } else {\n            newRng.setStartAfter(startContainer);\n          }\n        } else {\n          newRng.setStart(startContainer, startOffset);\n        }\n        if (has$2(shortEndedElements, endContainer.nodeName.toLowerCase())) {\n          if (endOffset === 0) {\n            newRng.setEndBefore(endContainer);\n          } else {\n            newRng.setEndAfter(endContainer);\n          }\n        } else {\n          newRng.setEnd(endContainer, endOffset);\n        }\n        return newRng;\n      };\n      var setupOffscreenSelection = function (node, targetClone, origTargetClone) {\n        var $ = editor.$;\n        var $realSelectionContainer = descendant(SugarElement.fromDom(editor.getBody()), '#' + realSelectionId).fold(function () {\n          return $([]);\n        }, function (elm) {\n          return $([elm.dom]);\n        });\n        if ($realSelectionContainer.length === 0) {\n          $realSelectionContainer = $('<div data-mce-bogus=\"all\" class=\"mce-offscreen-selection\"></div>').attr('id', realSelectionId);\n          $realSelectionContainer.appendTo(editor.getBody());\n        }\n        var newRange = dom.createRng();\n        if (targetClone === origTargetClone && Env.ie) {\n          $realSelectionContainer.empty().append('<p style=\"font-size: 0\" data-mce-bogus=\"all\">\\xA0</p>').append(targetClone);\n          newRange.setStartAfter($realSelectionContainer[0].firstChild.firstChild);\n          newRange.setEndAfter(targetClone);\n        } else {\n          $realSelectionContainer.empty().append(nbsp).append(targetClone).append(nbsp);\n          newRange.setStart($realSelectionContainer[0].firstChild, 1);\n          newRange.setEnd($realSelectionContainer[0].lastChild, 0);\n        }\n        $realSelectionContainer.css({ top: dom.getPos(node, editor.getBody()).y });\n        $realSelectionContainer[0].focus();\n        var sel = selection.getSel();\n        sel.removeAllRanges();\n        sel.addRange(newRange);\n        return newRange;\n      };\n      var selectElement = function (elm) {\n        var targetClone = elm.cloneNode(true);\n        var e = editor.fire('ObjectSelected', {\n          target: elm,\n          targetClone: targetClone\n        });\n        if (e.isDefaultPrevented()) {\n          return null;\n        }\n        var range = setupOffscreenSelection(elm, e.targetClone, targetClone);\n        var nodeElm = SugarElement.fromDom(elm);\n        each$k(descendants(SugarElement.fromDom(editor.getBody()), '*[data-mce-selected]'), function (elm) {\n          if (!eq(nodeElm, elm)) {\n            remove$6(elm, elementSelectionAttr);\n          }\n        });\n        if (!dom.getAttrib(elm, elementSelectionAttr)) {\n          elm.setAttribute(elementSelectionAttr, '1');\n        }\n        selectedElement = elm;\n        hideFakeCaret();\n        return range;\n      };\n      var setElementSelection = function (range, forward) {\n        if (!range) {\n          return null;\n        }\n        if (range.collapsed) {\n          if (!isRangeInCaretContainer(range)) {\n            var dir = forward ? 1 : -1;\n            var caretPosition = getNormalizedRangeEndPoint(dir, rootNode, range);\n            var beforeNode = caretPosition.getNode(!forward);\n            if (isFakeCaretTarget(beforeNode)) {\n              return showCaret(dir, beforeNode, forward ? !caretPosition.isAtEnd() : false, false);\n            }\n            var afterNode = caretPosition.getNode(forward);\n            if (isFakeCaretTarget(afterNode)) {\n              return showCaret(dir, afterNode, forward ? false : !caretPosition.isAtEnd(), false);\n            }\n          }\n          return null;\n        }\n        var startContainer = range.startContainer;\n        var startOffset = range.startOffset;\n        var endOffset = range.endOffset;\n        if (startContainer.nodeType === 3 && startOffset === 0 && isContentEditableFalse(startContainer.parentNode)) {\n          startContainer = startContainer.parentNode;\n          startOffset = dom.nodeIndex(startContainer);\n          startContainer = startContainer.parentNode;\n        }\n        if (startContainer.nodeType !== 1) {\n          return null;\n        }\n        if (endOffset === startOffset + 1 && startContainer === range.endContainer) {\n          var node = startContainer.childNodes[startOffset];\n          if (isFakeSelectionTargetElement(node)) {\n            return selectElement(node);\n          }\n        }\n        return null;\n      };\n      var removeElementSelection = function () {\n        if (selectedElement) {\n          selectedElement.removeAttribute(elementSelectionAttr);\n        }\n        descendant(SugarElement.fromDom(editor.getBody()), '#' + realSelectionId).each(remove$7);\n        selectedElement = null;\n      };\n      var destroy = function () {\n        fakeCaret.destroy();\n        selectedElement = null;\n      };\n      var hideFakeCaret = function () {\n        fakeCaret.hide();\n      };\n      if (Env.ceFalse && !isRtc(editor)) {\n        registerEvents();\n      }\n      return {\n        showCaret: showCaret,\n        showBlockCaretContainer: showBlockCaretContainer,\n        hideFakeCaret: hideFakeCaret,\n        destroy: destroy\n      };\n    };\n\n    var Quirks = function (editor) {\n      var each = Tools.each;\n      var BACKSPACE = VK.BACKSPACE, DELETE = VK.DELETE, dom = editor.dom, selection = editor.selection, parser = editor.parser;\n      var isGecko = Env.gecko, isIE = Env.ie, isWebKit = Env.webkit;\n      var mceInternalUrlPrefix = 'data:text/mce-internal,';\n      var mceInternalDataType = isIE ? 'Text' : 'URL';\n      var setEditorCommandState = function (cmd, state) {\n        try {\n          editor.getDoc().execCommand(cmd, false, state);\n        } catch (ex) {\n        }\n      };\n      var isDefaultPrevented = function (e) {\n        return e.isDefaultPrevented();\n      };\n      var setMceInternalContent = function (e) {\n        var selectionHtml, internalContent;\n        if (e.dataTransfer) {\n          if (editor.selection.isCollapsed() && e.target.tagName === 'IMG') {\n            selection.select(e.target);\n          }\n          selectionHtml = editor.selection.getContent();\n          if (selectionHtml.length > 0) {\n            internalContent = mceInternalUrlPrefix + escape(editor.id) + ',' + escape(selectionHtml);\n            e.dataTransfer.setData(mceInternalDataType, internalContent);\n          }\n        }\n      };\n      var getMceInternalContent = function (e) {\n        var internalContent;\n        if (e.dataTransfer) {\n          internalContent = e.dataTransfer.getData(mceInternalDataType);\n          if (internalContent && internalContent.indexOf(mceInternalUrlPrefix) >= 0) {\n            internalContent = internalContent.substr(mceInternalUrlPrefix.length).split(',');\n            return {\n              id: unescape(internalContent[0]),\n              html: unescape(internalContent[1])\n            };\n          }\n        }\n        return null;\n      };\n      var insertClipboardContents = function (content, internal) {\n        if (editor.queryCommandSupported('mceInsertClipboardContent')) {\n          editor.execCommand('mceInsertClipboardContent', false, {\n            content: content,\n            internal: internal\n          });\n        } else {\n          editor.execCommand('mceInsertContent', false, content);\n        }\n      };\n      var emptyEditorWhenDeleting = function () {\n        var serializeRng = function (rng) {\n          var body = dom.create('body');\n          var contents = rng.cloneContents();\n          body.appendChild(contents);\n          return selection.serializer.serialize(body, { format: 'html' });\n        };\n        var allContentsSelected = function (rng) {\n          var selection = serializeRng(rng);\n          var allRng = dom.createRng();\n          allRng.selectNode(editor.getBody());\n          var allSelection = serializeRng(allRng);\n          return selection === allSelection;\n        };\n        editor.on('keydown', function (e) {\n          var keyCode = e.keyCode;\n          var isCollapsed, body;\n          if (!isDefaultPrevented(e) && (keyCode === DELETE || keyCode === BACKSPACE)) {\n            isCollapsed = editor.selection.isCollapsed();\n            body = editor.getBody();\n            if (isCollapsed && !dom.isEmpty(body)) {\n              return;\n            }\n            if (!isCollapsed && !allContentsSelected(editor.selection.getRng())) {\n              return;\n            }\n            e.preventDefault();\n            editor.setContent('');\n            if (body.firstChild && dom.isBlock(body.firstChild)) {\n              editor.selection.setCursorLocation(body.firstChild, 0);\n            } else {\n              editor.selection.setCursorLocation(body, 0);\n            }\n            editor.nodeChanged();\n          }\n        });\n      };\n      var selectAll = function () {\n        editor.shortcuts.add('meta+a', null, 'SelectAll');\n      };\n      var documentElementEditingFocus = function () {\n        if (!editor.inline) {\n          dom.bind(editor.getDoc(), 'mousedown mouseup', function (e) {\n            var rng;\n            if (e.target === editor.getDoc().documentElement) {\n              rng = selection.getRng();\n              editor.getBody().focus();\n              if (e.type === 'mousedown') {\n                if (isCaretContainer$2(rng.startContainer)) {\n                  return;\n                }\n                selection.placeCaretAt(e.clientX, e.clientY);\n              } else {\n                selection.setRng(rng);\n              }\n            }\n          });\n        }\n      };\n      var removeHrOnBackspace = function () {\n        editor.on('keydown', function (e) {\n          if (!isDefaultPrevented(e) && e.keyCode === BACKSPACE) {\n            if (!editor.getBody().getElementsByTagName('hr').length) {\n              return;\n            }\n            if (selection.isCollapsed() && selection.getRng().startOffset === 0) {\n              var node = selection.getNode();\n              var previousSibling = node.previousSibling;\n              if (node.nodeName === 'HR') {\n                dom.remove(node);\n                e.preventDefault();\n                return;\n              }\n              if (previousSibling && previousSibling.nodeName && previousSibling.nodeName.toLowerCase() === 'hr') {\n                dom.remove(previousSibling);\n                e.preventDefault();\n              }\n            }\n          }\n        });\n      };\n      var focusBody = function () {\n        if (!Range.prototype.getClientRects) {\n          editor.on('mousedown', function (e) {\n            if (!isDefaultPrevented(e) && e.target.nodeName === 'HTML') {\n              var body_1 = editor.getBody();\n              body_1.blur();\n              Delay.setEditorTimeout(editor, function () {\n                body_1.focus();\n              });\n            }\n          });\n        }\n      };\n      var selectControlElements = function () {\n        editor.on('click', function (e) {\n          var target = e.target;\n          if (/^(IMG|HR)$/.test(target.nodeName) && dom.getContentEditableParent(target) !== 'false') {\n            e.preventDefault();\n            editor.selection.select(target);\n            editor.nodeChanged();\n          }\n          if (target.nodeName === 'A' && dom.hasClass(target, 'mce-item-anchor')) {\n            e.preventDefault();\n            selection.select(target);\n          }\n        });\n      };\n      var removeStylesWhenDeletingAcrossBlockElements = function () {\n        var getAttributeApplyFunction = function () {\n          var template = dom.getAttribs(selection.getStart().cloneNode(false));\n          return function () {\n            var target = selection.getStart();\n            if (target !== editor.getBody()) {\n              dom.setAttrib(target, 'style', null);\n              each(template, function (attr) {\n                target.setAttributeNode(attr.cloneNode(true));\n              });\n            }\n          };\n        };\n        var isSelectionAcrossElements = function () {\n          return !selection.isCollapsed() && dom.getParent(selection.getStart(), dom.isBlock) !== dom.getParent(selection.getEnd(), dom.isBlock);\n        };\n        editor.on('keypress', function (e) {\n          var applyAttributes;\n          if (!isDefaultPrevented(e) && (e.keyCode === 8 || e.keyCode === 46) && isSelectionAcrossElements()) {\n            applyAttributes = getAttributeApplyFunction();\n            editor.getDoc().execCommand('delete', false, null);\n            applyAttributes();\n            e.preventDefault();\n            return false;\n          }\n        });\n        dom.bind(editor.getDoc(), 'cut', function (e) {\n          var applyAttributes;\n          if (!isDefaultPrevented(e) && isSelectionAcrossElements()) {\n            applyAttributes = getAttributeApplyFunction();\n            Delay.setEditorTimeout(editor, function () {\n              applyAttributes();\n            });\n          }\n        });\n      };\n      var disableBackspaceIntoATable = function () {\n        editor.on('keydown', function (e) {\n          if (!isDefaultPrevented(e) && e.keyCode === BACKSPACE) {\n            if (selection.isCollapsed() && selection.getRng().startOffset === 0) {\n              var previousSibling = selection.getNode().previousSibling;\n              if (previousSibling && previousSibling.nodeName && previousSibling.nodeName.toLowerCase() === 'table') {\n                e.preventDefault();\n                return false;\n              }\n            }\n          }\n        });\n      };\n      var removeBlockQuoteOnBackSpace = function () {\n        editor.on('keydown', function (e) {\n          var rng, parent;\n          if (isDefaultPrevented(e) || e.keyCode !== VK.BACKSPACE) {\n            return;\n          }\n          rng = selection.getRng();\n          var container = rng.startContainer;\n          var offset = rng.startOffset;\n          var root = dom.getRoot();\n          parent = container;\n          if (!rng.collapsed || offset !== 0) {\n            return;\n          }\n          while (parent && parent.parentNode && parent.parentNode.firstChild === parent && parent.parentNode !== root) {\n            parent = parent.parentNode;\n          }\n          if (parent.tagName === 'BLOCKQUOTE') {\n            editor.formatter.toggle('blockquote', null, parent);\n            rng = dom.createRng();\n            rng.setStart(container, 0);\n            rng.setEnd(container, 0);\n            selection.setRng(rng);\n          }\n        });\n      };\n      var setGeckoEditingOptions = function () {\n        var setOpts = function () {\n          setEditorCommandState('StyleWithCSS', false);\n          setEditorCommandState('enableInlineTableEditing', false);\n          if (!getObjectResizing(editor)) {\n            setEditorCommandState('enableObjectResizing', false);\n          }\n        };\n        if (!isReadOnly$1(editor)) {\n          editor.on('BeforeExecCommand mousedown', setOpts);\n        }\n      };\n      var addBrAfterLastLinks = function () {\n        var fixLinks = function () {\n          each(dom.select('a'), function (node) {\n            var parentNode = node.parentNode;\n            var root = dom.getRoot();\n            if (parentNode.lastChild === node) {\n              while (parentNode && !dom.isBlock(parentNode)) {\n                if (parentNode.parentNode.lastChild !== parentNode || parentNode === root) {\n                  return;\n                }\n                parentNode = parentNode.parentNode;\n              }\n              dom.add(parentNode, 'br', { 'data-mce-bogus': 1 });\n            }\n          });\n        };\n        editor.on('SetContent ExecCommand', function (e) {\n          if (e.type === 'setcontent' || e.command === 'mceInsertLink') {\n            fixLinks();\n          }\n        });\n      };\n      var setDefaultBlockType = function () {\n        if (getForcedRootBlock(editor)) {\n          editor.on('init', function () {\n            setEditorCommandState('DefaultParagraphSeparator', getForcedRootBlock(editor));\n          });\n        }\n      };\n      var normalizeSelection = function () {\n        editor.on('keyup focusin mouseup', function (e) {\n          if (!VK.modifierPressed(e)) {\n            selection.normalize();\n          }\n        }, true);\n      };\n      var showBrokenImageIcon = function () {\n        editor.contentStyles.push('img:-moz-broken {' + '-moz-force-broken-image-icon:1;' + 'min-width:24px;' + 'min-height:24px' + '}');\n      };\n      var restoreFocusOnKeyDown = function () {\n        if (!editor.inline) {\n          editor.on('keydown', function () {\n            if (document.activeElement === document.body) {\n              editor.getWin().focus();\n            }\n          });\n        }\n      };\n      var bodyHeight = function () {\n        if (!editor.inline) {\n          editor.contentStyles.push('body {min-height: 150px}');\n          editor.on('click', function (e) {\n            var rng;\n            if (e.target.nodeName === 'HTML') {\n              if (Env.ie > 11) {\n                editor.getBody().focus();\n                return;\n              }\n              rng = editor.selection.getRng();\n              editor.getBody().focus();\n              editor.selection.setRng(rng);\n              editor.selection.normalize();\n              editor.nodeChanged();\n            }\n          });\n        }\n      };\n      var blockCmdArrowNavigation = function () {\n        if (Env.mac) {\n          editor.on('keydown', function (e) {\n            if (VK.metaKeyPressed(e) && !e.shiftKey && (e.keyCode === 37 || e.keyCode === 39)) {\n              e.preventDefault();\n              var selection_1 = editor.selection.getSel();\n              selection_1.modify('move', e.keyCode === 37 ? 'backward' : 'forward', 'lineboundary');\n            }\n          });\n        }\n      };\n      var disableAutoUrlDetect = function () {\n        setEditorCommandState('AutoUrlDetect', false);\n      };\n      var tapLinksAndImages = function () {\n        editor.on('click', function (e) {\n          var elm = e.target;\n          do {\n            if (elm.tagName === 'A') {\n              e.preventDefault();\n              return;\n            }\n          } while (elm = elm.parentNode);\n        });\n        editor.contentStyles.push('.mce-content-body {-webkit-touch-callout: none}');\n      };\n      var blockFormSubmitInsideEditor = function () {\n        editor.on('init', function () {\n          editor.dom.bind(editor.getBody(), 'submit', function (e) {\n            e.preventDefault();\n          });\n        });\n      };\n      var removeAppleInterchangeBrs = function () {\n        parser.addNodeFilter('br', function (nodes) {\n          var i = nodes.length;\n          while (i--) {\n            if (nodes[i].attr('class') === 'Apple-interchange-newline') {\n              nodes[i].remove();\n            }\n          }\n        });\n      };\n      var ieInternalDragAndDrop = function () {\n        editor.on('dragstart', function (e) {\n          setMceInternalContent(e);\n        });\n        editor.on('drop', function (e) {\n          if (!isDefaultPrevented(e)) {\n            var internalContent = getMceInternalContent(e);\n            if (internalContent && internalContent.id !== editor.id) {\n              e.preventDefault();\n              var rng = fromPoint(e.x, e.y, editor.getDoc());\n              selection.setRng(rng);\n              insertClipboardContents(internalContent.html, true);\n            }\n          }\n        });\n      };\n      var refreshContentEditable = noop;\n      var isHidden = function () {\n        if (!isGecko || editor.removed) {\n          return false;\n        }\n        var sel = editor.selection.getSel();\n        return !sel || !sel.rangeCount || sel.rangeCount === 0;\n      };\n      var setupRtc = function () {\n        if (isWebKit) {\n          documentElementEditingFocus();\n          selectControlElements();\n          blockFormSubmitInsideEditor();\n          selectAll();\n          if (Env.iOS) {\n            restoreFocusOnKeyDown();\n            bodyHeight();\n            tapLinksAndImages();\n          }\n        }\n        if (isGecko) {\n          focusBody();\n          setGeckoEditingOptions();\n          showBrokenImageIcon();\n          blockCmdArrowNavigation();\n        }\n      };\n      var setup = function () {\n        removeBlockQuoteOnBackSpace();\n        emptyEditorWhenDeleting();\n        if (!Env.windowsPhone) {\n          normalizeSelection();\n        }\n        if (isWebKit) {\n          documentElementEditingFocus();\n          selectControlElements();\n          setDefaultBlockType();\n          blockFormSubmitInsideEditor();\n          disableBackspaceIntoATable();\n          removeAppleInterchangeBrs();\n          if (Env.iOS) {\n            restoreFocusOnKeyDown();\n            bodyHeight();\n            tapLinksAndImages();\n          } else {\n            selectAll();\n          }\n        }\n        if (Env.ie >= 11) {\n          bodyHeight();\n          disableBackspaceIntoATable();\n        }\n        if (Env.ie) {\n          selectAll();\n          disableAutoUrlDetect();\n          ieInternalDragAndDrop();\n        }\n        if (isGecko) {\n          removeHrOnBackspace();\n          focusBody();\n          removeStylesWhenDeletingAcrossBlockElements();\n          setGeckoEditingOptions();\n          addBrAfterLastLinks();\n          showBrokenImageIcon();\n          blockCmdArrowNavigation();\n          disableBackspaceIntoATable();\n        }\n      };\n      if (isRtc(editor)) {\n        setupRtc();\n      } else {\n        setup();\n      }\n      return {\n        refreshContentEditable: refreshContentEditable,\n        isHidden: isHidden\n      };\n    };\n\n    var DOM$6 = DOMUtils.DOM;\n    var appendStyle = function (editor, text) {\n      var body = SugarElement.fromDom(editor.getBody());\n      var container = getStyleContainer(getRootNode(body));\n      var style = SugarElement.fromTag('style');\n      set$1(style, 'type', 'text/css');\n      append$1(style, SugarElement.fromText(text));\n      append$1(container, style);\n      editor.on('remove', function () {\n        remove$7(style);\n      });\n    };\n    var getRootName = function (editor) {\n      return editor.inline ? editor.getElement().nodeName.toLowerCase() : undefined;\n    };\n    var removeUndefined = function (obj) {\n      return filter$3(obj, function (v) {\n        return isUndefined(v) === false;\n      });\n    };\n    var mkSchemaSettings = function (editor) {\n      var settings = editor.settings;\n      return removeUndefined({\n        block_elements: settings.block_elements,\n        boolean_attributes: settings.boolean_attributes,\n        custom_elements: settings.custom_elements,\n        extended_valid_elements: settings.extended_valid_elements,\n        invalid_elements: settings.invalid_elements,\n        invalid_styles: settings.invalid_styles,\n        move_caret_before_on_enter_elements: settings.move_caret_before_on_enter_elements,\n        non_empty_elements: settings.non_empty_elements,\n        schema: settings.schema,\n        self_closing_elements: settings.self_closing_elements,\n        short_ended_elements: settings.short_ended_elements,\n        special: settings.special,\n        text_block_elements: settings.text_block_elements,\n        text_inline_elements: settings.text_inline_elements,\n        valid_children: settings.valid_children,\n        valid_classes: settings.valid_classes,\n        valid_elements: settings.valid_elements,\n        valid_styles: settings.valid_styles,\n        verify_html: settings.verify_html,\n        whitespace_elements: settings.whitespace_elements,\n        padd_empty_block_inline_children: settings.format_empty_lines\n      });\n    };\n    var mkParserSettings = function (editor) {\n      var settings = editor.settings;\n      var blobCache = editor.editorUpload.blobCache;\n      return removeUndefined({\n        allow_conditional_comments: settings.allow_conditional_comments,\n        allow_html_data_urls: settings.allow_html_data_urls,\n        allow_svg_data_urls: settings.allow_svg_data_urls,\n        allow_html_in_named_anchor: settings.allow_html_in_named_anchor,\n        allow_script_urls: settings.allow_script_urls,\n        allow_unsafe_link_target: settings.allow_unsafe_link_target,\n        convert_fonts_to_spans: settings.convert_fonts_to_spans,\n        fix_list_elements: settings.fix_list_elements,\n        font_size_legacy_values: settings.font_size_legacy_values,\n        forced_root_block: settings.forced_root_block,\n        forced_root_block_attrs: settings.forced_root_block_attrs,\n        padd_empty_with_br: settings.padd_empty_with_br,\n        preserve_cdata: settings.preserve_cdata,\n        remove_trailing_brs: settings.remove_trailing_brs,\n        inline_styles: settings.inline_styles,\n        root_name: getRootName(editor),\n        validate: true,\n        blob_cache: blobCache,\n        document: editor.getDoc(),\n        images_dataimg_filter: settings.images_dataimg_filter\n      });\n    };\n    var mkSerializerSettings = function (editor) {\n      var settings = editor.settings;\n      return __assign(__assign(__assign({}, mkParserSettings(editor)), mkSchemaSettings(editor)), removeUndefined({\n        url_converter: settings.url_converter,\n        url_converter_scope: settings.url_converter_scope,\n        element_format: settings.element_format,\n        entities: settings.entities,\n        entity_encoding: settings.entity_encoding,\n        indent: settings.indent,\n        indent_after: settings.indent_after,\n        indent_before: settings.indent_before\n      }));\n    };\n    var createParser = function (editor) {\n      var parser = DomParser(mkParserSettings(editor), editor.schema);\n      parser.addAttributeFilter('src,href,style,tabindex', function (nodes, name) {\n        var i = nodes.length, node, value;\n        var dom = editor.dom;\n        var internalName = 'data-mce-' + name;\n        while (i--) {\n          node = nodes[i];\n          value = node.attr(name);\n          if (value && !node.attr(internalName)) {\n            if (value.indexOf('data:') === 0 || value.indexOf('blob:') === 0) {\n              continue;\n            }\n            if (name === 'style') {\n              value = dom.serializeStyle(dom.parseStyle(value), node.name);\n              if (!value.length) {\n                value = null;\n              }\n              node.attr(internalName, value);\n              node.attr(name, value);\n            } else if (name === 'tabindex') {\n              node.attr(internalName, value);\n              node.attr(name, null);\n            } else {\n              node.attr(internalName, editor.convertURL(value, name, node.name));\n            }\n          }\n        }\n      });\n      parser.addNodeFilter('script', function (nodes) {\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          var type = node.attr('type') || 'no/type';\n          if (type.indexOf('mce-') !== 0) {\n            node.attr('type', 'mce-' + type);\n          }\n        }\n      });\n      if (editor.settings.preserve_cdata) {\n        parser.addNodeFilter('#cdata', function (nodes) {\n          var i = nodes.length;\n          while (i--) {\n            var node = nodes[i];\n            node.type = 8;\n            node.name = '#comment';\n            node.value = '[CDATA[' + editor.dom.encode(node.value) + ']]';\n          }\n        });\n      }\n      parser.addNodeFilter('p,h1,h2,h3,h4,h5,h6,div', function (nodes) {\n        var i = nodes.length;\n        var nonEmptyElements = editor.schema.getNonEmptyElements();\n        while (i--) {\n          var node = nodes[i];\n          if (node.isEmpty(nonEmptyElements) && node.getAll('br').length === 0) {\n            node.append(new AstNode('br', 1)).shortEnded = true;\n          }\n        }\n      });\n      return parser;\n    };\n    var autoFocus = function (editor) {\n      if (editor.settings.auto_focus) {\n        Delay.setEditorTimeout(editor, function () {\n          var focusEditor;\n          if (editor.settings.auto_focus === true) {\n            focusEditor = editor;\n          } else {\n            focusEditor = editor.editorManager.get(editor.settings.auto_focus);\n          }\n          if (!focusEditor.destroyed) {\n            focusEditor.focus();\n          }\n        }, 100);\n      }\n    };\n    var moveSelectionToFirstCaretPosition = function (editor) {\n      var root = editor.dom.getRoot();\n      if (!editor.inline && (!hasAnyRanges(editor) || editor.selection.getStart(true) === root)) {\n        firstPositionIn(root).each(function (pos) {\n          var node = pos.getNode();\n          var caretPos = isTable$3(node) ? firstPositionIn(node).getOr(pos) : pos;\n          if (Env.browser.isIE()) {\n            storeNative(editor, caretPos.toRange());\n          } else {\n            editor.selection.setRng(caretPos.toRange());\n          }\n        });\n      }\n    };\n    var initEditor = function (editor) {\n      editor.bindPendingEventDelegates();\n      editor.initialized = true;\n      fireInit(editor);\n      editor.focus(true);\n      moveSelectionToFirstCaretPosition(editor);\n      editor.nodeChanged({ initial: true });\n      editor.execCallback('init_instance_callback', editor);\n      autoFocus(editor);\n    };\n    var getStyleSheetLoader$1 = function (editor) {\n      return editor.inline ? editor.ui.styleSheetLoader : editor.dom.styleSheetLoader;\n    };\n    var makeStylesheetLoadingPromises = function (editor, css, framedFonts) {\n      var promises = [new promiseObj(function (resolve, reject) {\n          return getStyleSheetLoader$1(editor).loadAll(css, resolve, reject);\n        })];\n      if (editor.inline) {\n        return promises;\n      } else {\n        return promises.concat([new promiseObj(function (resolve, reject) {\n            return editor.ui.styleSheetLoader.loadAll(framedFonts, resolve, reject);\n          })]);\n      }\n    };\n    var loadContentCss = function (editor) {\n      var styleSheetLoader = getStyleSheetLoader$1(editor);\n      var fontCss = getFontCss(editor);\n      var css = editor.contentCSS;\n      var removeCss = function () {\n        styleSheetLoader.unloadAll(css);\n        if (!editor.inline) {\n          editor.ui.styleSheetLoader.unloadAll(fontCss);\n        }\n      };\n      var loaded = function () {\n        if (editor.removed) {\n          removeCss();\n        } else {\n          editor.on('remove', removeCss);\n        }\n      };\n      if (editor.contentStyles.length > 0) {\n        var contentCssText_1 = '';\n        Tools.each(editor.contentStyles, function (style) {\n          contentCssText_1 += style + '\\r\\n';\n        });\n        editor.dom.addStyle(contentCssText_1);\n      }\n      var allStylesheets = promiseObj.all(makeStylesheetLoadingPromises(editor, css, fontCss)).then(loaded).catch(loaded);\n      if (editor.settings.content_style) {\n        appendStyle(editor, editor.settings.content_style);\n      }\n      return allStylesheets;\n    };\n    var preInit = function (editor) {\n      var settings = editor.settings, doc = editor.getDoc(), body = editor.getBody();\n      firePreInit(editor);\n      if (!settings.browser_spellcheck && !settings.gecko_spellcheck) {\n        doc.body.spellcheck = false;\n        DOM$6.setAttrib(body, 'spellcheck', 'false');\n      }\n      editor.quirks = Quirks(editor);\n      firePostRender(editor);\n      var directionality = getDirectionality(editor);\n      if (directionality !== undefined) {\n        body.dir = directionality;\n      }\n      if (settings.protect) {\n        editor.on('BeforeSetContent', function (e) {\n          Tools.each(settings.protect, function (pattern) {\n            e.content = e.content.replace(pattern, function (str) {\n              return '<!--mce:protected ' + escape(str) + '-->';\n            });\n          });\n        });\n      }\n      editor.on('SetContent', function () {\n        editor.addVisual(editor.getBody());\n      });\n      editor.on('compositionstart compositionend', function (e) {\n        editor.composing = e.type === 'compositionstart';\n      });\n    };\n    var loadInitialContent = function (editor) {\n      if (!isRtc(editor)) {\n        editor.load({\n          initial: true,\n          format: 'html'\n        });\n      }\n      editor.startContent = editor.getContent({ format: 'raw' });\n    };\n    var initEditorWithInitialContent = function (editor) {\n      if (editor.removed !== true) {\n        loadInitialContent(editor);\n        initEditor(editor);\n      }\n    };\n    var initContentBody = function (editor, skipWrite) {\n      var settings = editor.settings;\n      var targetElm = editor.getElement();\n      var doc = editor.getDoc();\n      if (!settings.inline) {\n        editor.getElement().style.visibility = editor.orgVisibility;\n      }\n      if (!skipWrite && !editor.inline) {\n        doc.open();\n        doc.write(editor.iframeHTML);\n        doc.close();\n      }\n      if (editor.inline) {\n        DOM$6.addClass(targetElm, 'mce-content-body');\n        editor.contentDocument = doc = document;\n        editor.contentWindow = window;\n        editor.bodyElement = targetElm;\n        editor.contentAreaContainer = targetElm;\n      }\n      var body = editor.getBody();\n      body.disabled = true;\n      editor.readonly = !!settings.readonly;\n      if (!editor.readonly) {\n        if (editor.inline && DOM$6.getStyle(body, 'position', true) === 'static') {\n          body.style.position = 'relative';\n        }\n        body.contentEditable = editor.getParam('content_editable_state', true);\n      }\n      body.disabled = false;\n      editor.editorUpload = EditorUpload(editor);\n      editor.schema = Schema(mkSchemaSettings(editor));\n      editor.dom = DOMUtils(doc, {\n        keep_values: true,\n        url_converter: editor.convertURL,\n        url_converter_scope: editor,\n        hex_colors: settings.force_hex_style_colors,\n        update_styles: true,\n        root_element: editor.inline ? editor.getBody() : null,\n        collect: function () {\n          return editor.inline;\n        },\n        schema: editor.schema,\n        contentCssCors: shouldUseContentCssCors(editor),\n        referrerPolicy: getReferrerPolicy(editor),\n        onSetAttrib: function (e) {\n          editor.fire('SetAttrib', e);\n        }\n      });\n      editor.parser = createParser(editor);\n      editor.serializer = DomSerializer(mkSerializerSettings(editor), editor);\n      editor.selection = EditorSelection(editor.dom, editor.getWin(), editor.serializer, editor);\n      editor.annotator = Annotator(editor);\n      editor.formatter = Formatter(editor);\n      editor.undoManager = UndoManager(editor);\n      editor._nodeChangeDispatcher = new NodeChange(editor);\n      editor._selectionOverrides = SelectionOverrides(editor);\n      setup$e(editor);\n      setup$3(editor);\n      if (!isRtc(editor)) {\n        setup$2(editor);\n      }\n      var caret = setup$4(editor);\n      setup$f(editor, caret);\n      setup$d(editor);\n      setup$g(editor);\n      var setupRtcThunk = setup$i(editor);\n      preInit(editor);\n      setupRtcThunk.fold(function () {\n        loadContentCss(editor).then(function () {\n          return initEditorWithInitialContent(editor);\n        });\n      }, function (setupRtc) {\n        editor.setProgressState(true);\n        loadContentCss(editor).then(function () {\n          setupRtc().then(function (_rtcMode) {\n            editor.setProgressState(false);\n            initEditorWithInitialContent(editor);\n          }, function (err) {\n            editor.notificationManager.open({\n              type: 'error',\n              text: String(err)\n            });\n            initEditorWithInitialContent(editor);\n          });\n        });\n      });\n    };\n\n    var DOM$5 = DOMUtils.DOM;\n    var relaxDomain = function (editor, ifr) {\n      if (document.domain !== window.location.hostname && Env.browser.isIE()) {\n        var bodyUuid = uuid('mce');\n        editor[bodyUuid] = function () {\n          initContentBody(editor);\n        };\n        var domainRelaxUrl = 'javascript:(function(){' + 'document.open();document.domain=\"' + document.domain + '\";' + 'var ed = window.parent.tinymce.get(\"' + editor.id + '\");document.write(ed.iframeHTML);' + 'document.close();ed.' + bodyUuid + '(true);})()';\n        DOM$5.setAttrib(ifr, 'src', domainRelaxUrl);\n        return true;\n      }\n      return false;\n    };\n    var createIframeElement = function (id, title, height, customAttrs) {\n      var iframe = SugarElement.fromTag('iframe');\n      setAll$1(iframe, customAttrs);\n      setAll$1(iframe, {\n        id: id + '_ifr',\n        frameBorder: '0',\n        allowTransparency: 'true',\n        title: title\n      });\n      add$1(iframe, 'tox-edit-area__iframe');\n      return iframe;\n    };\n    var getIframeHtml = function (editor) {\n      var iframeHTML = getDocType(editor) + '<html><head>';\n      if (getDocumentBaseUrl(editor) !== editor.documentBaseUrl) {\n        iframeHTML += '<base href=\"' + editor.documentBaseURI.getURI() + '\" />';\n      }\n      iframeHTML += '<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />';\n      var bodyId = getBodyId(editor);\n      var bodyClass = getBodyClass(editor);\n      var translatedAriaText = editor.translate(getIframeAriaText(editor));\n      if (getContentSecurityPolicy(editor)) {\n        iframeHTML += '<meta http-equiv=\"Content-Security-Policy\" content=\"' + getContentSecurityPolicy(editor) + '\" />';\n      }\n      iframeHTML += '</head>' + ('<body id=\"' + bodyId + '\" class=\"mce-content-body ' + bodyClass + '\" data-id=\"' + editor.id + '\" aria-label=\"' + translatedAriaText + '\">') + '<br>' + '</body></html>';\n      return iframeHTML;\n    };\n    var createIframe = function (editor, o) {\n      var iframeTitle = editor.translate('Rich Text Area');\n      var ifr = createIframeElement(editor.id, iframeTitle, o.height, getIframeAttrs(editor)).dom;\n      ifr.onload = function () {\n        ifr.onload = null;\n        editor.fire('load');\n      };\n      var isDomainRelaxed = relaxDomain(editor, ifr);\n      editor.contentAreaContainer = o.iframeContainer;\n      editor.iframeElement = ifr;\n      editor.iframeHTML = getIframeHtml(editor);\n      DOM$5.add(o.iframeContainer, ifr);\n      return isDomainRelaxed;\n    };\n    var init$1 = function (editor, boxInfo) {\n      var isDomainRelaxed = createIframe(editor, boxInfo);\n      if (boxInfo.editorContainer) {\n        DOM$5.get(boxInfo.editorContainer).style.display = editor.orgDisplay;\n        editor.hidden = DOM$5.isHidden(boxInfo.editorContainer);\n      }\n      editor.getElement().style.display = 'none';\n      DOM$5.setAttrib(editor.id, 'aria-hidden', 'true');\n      if (!isDomainRelaxed) {\n        initContentBody(editor);\n      }\n    };\n\n    var DOM$4 = DOMUtils.DOM;\n    var initPlugin = function (editor, initializedPlugins, plugin) {\n      var Plugin = PluginManager.get(plugin);\n      var pluginUrl = PluginManager.urls[plugin] || editor.documentBaseUrl.replace(/\\/$/, '');\n      plugin = Tools.trim(plugin);\n      if (Plugin && Tools.inArray(initializedPlugins, plugin) === -1) {\n        Tools.each(PluginManager.dependencies(plugin), function (dep) {\n          initPlugin(editor, initializedPlugins, dep);\n        });\n        if (editor.plugins[plugin]) {\n          return;\n        }\n        try {\n          var pluginInstance = new Plugin(editor, pluginUrl, editor.$);\n          editor.plugins[plugin] = pluginInstance;\n          if (pluginInstance.init) {\n            pluginInstance.init(editor, pluginUrl);\n            initializedPlugins.push(plugin);\n          }\n        } catch (e) {\n          pluginInitError(editor, plugin, e);\n        }\n      }\n    };\n    var trimLegacyPrefix = function (name) {\n      return name.replace(/^\\-/, '');\n    };\n    var initPlugins = function (editor) {\n      var initializedPlugins = [];\n      Tools.each(getPlugins(editor).split(/[ ,]/), function (name) {\n        initPlugin(editor, initializedPlugins, trimLegacyPrefix(name));\n      });\n    };\n    var initIcons = function (editor) {\n      var iconPackName = Tools.trim(getIconPackName(editor));\n      var currentIcons = editor.ui.registry.getAll().icons;\n      var loadIcons = __assign(__assign({}, IconManager.get('default').icons), IconManager.get(iconPackName).icons);\n      each$j(loadIcons, function (svgData, icon) {\n        if (!has$2(currentIcons, icon)) {\n          editor.ui.registry.addIcon(icon, svgData);\n        }\n      });\n    };\n    var initTheme = function (editor) {\n      var theme = getTheme(editor);\n      if (isString$1(theme)) {\n        editor.settings.theme = trimLegacyPrefix(theme);\n        var Theme = ThemeManager.get(theme);\n        editor.theme = new Theme(editor, ThemeManager.urls[theme]);\n        if (editor.theme.init) {\n          editor.theme.init(editor, ThemeManager.urls[theme] || editor.documentBaseUrl.replace(/\\/$/, ''), editor.$);\n        }\n      } else {\n        editor.theme = {};\n      }\n    };\n    var renderFromLoadedTheme = function (editor) {\n      return editor.theme.renderUI();\n    };\n    var renderFromThemeFunc = function (editor) {\n      var elm = editor.getElement();\n      var theme = getTheme(editor);\n      var info = theme(editor, elm);\n      if (info.editorContainer.nodeType) {\n        info.editorContainer.id = info.editorContainer.id || editor.id + '_parent';\n      }\n      if (info.iframeContainer && info.iframeContainer.nodeType) {\n        info.iframeContainer.id = info.iframeContainer.id || editor.id + '_iframecontainer';\n      }\n      info.height = info.iframeHeight ? info.iframeHeight : elm.offsetHeight;\n      return info;\n    };\n    var createThemeFalseResult = function (element) {\n      return {\n        editorContainer: element,\n        iframeContainer: element,\n        api: {}\n      };\n    };\n    var renderThemeFalseIframe = function (targetElement) {\n      var iframeContainer = DOM$4.create('div');\n      DOM$4.insertAfter(iframeContainer, targetElement);\n      return createThemeFalseResult(iframeContainer);\n    };\n    var renderThemeFalse = function (editor) {\n      var targetElement = editor.getElement();\n      return editor.inline ? createThemeFalseResult(null) : renderThemeFalseIframe(targetElement);\n    };\n    var renderThemeUi = function (editor) {\n      var elm = editor.getElement();\n      editor.orgDisplay = elm.style.display;\n      if (isString$1(getTheme(editor))) {\n        return renderFromLoadedTheme(editor);\n      } else if (isFunction(getTheme(editor))) {\n        return renderFromThemeFunc(editor);\n      } else {\n        return renderThemeFalse(editor);\n      }\n    };\n    var augmentEditorUiApi = function (editor, api) {\n      var uiApiFacade = {\n        show: Optional.from(api.show).getOr(noop),\n        hide: Optional.from(api.hide).getOr(noop),\n        disable: Optional.from(api.disable).getOr(noop),\n        isDisabled: Optional.from(api.isDisabled).getOr(never),\n        enable: function () {\n          if (!editor.mode.isReadOnly()) {\n            Optional.from(api.enable).map(call);\n          }\n        }\n      };\n      editor.ui = __assign(__assign({}, editor.ui), uiApiFacade);\n    };\n    var init = function (editor) {\n      editor.fire('ScriptsLoaded');\n      initIcons(editor);\n      initTheme(editor);\n      initPlugins(editor);\n      var renderInfo = renderThemeUi(editor);\n      augmentEditorUiApi(editor, Optional.from(renderInfo.api).getOr({}));\n      var boxInfo = {\n        editorContainer: renderInfo.editorContainer,\n        iframeContainer: renderInfo.iframeContainer\n      };\n      editor.editorContainer = boxInfo.editorContainer ? boxInfo.editorContainer : null;\n      appendContentCssFromSettings(editor);\n      if (editor.inline) {\n        return initContentBody(editor);\n      } else {\n        return init$1(editor, boxInfo);\n      }\n    };\n\n    var DOM$3 = DOMUtils.DOM;\n    var hasSkipLoadPrefix = function (name) {\n      return name.charAt(0) === '-';\n    };\n    var loadLanguage = function (scriptLoader, editor) {\n      var languageCode = getLanguageCode(editor);\n      var languageUrl = getLanguageUrl(editor);\n      if (I18n.hasCode(languageCode) === false && languageCode !== 'en') {\n        var url_1 = languageUrl !== '' ? languageUrl : editor.editorManager.baseURL + '/langs/' + languageCode + '.js';\n        scriptLoader.add(url_1, noop, undefined, function () {\n          languageLoadError(editor, url_1, languageCode);\n        });\n      }\n    };\n    var loadTheme = function (scriptLoader, editor, suffix, callback) {\n      var theme = getTheme(editor);\n      if (isString$1(theme)) {\n        if (!hasSkipLoadPrefix(theme) && !has$2(ThemeManager.urls, theme)) {\n          var themeUrl = getThemeUrl(editor);\n          if (themeUrl) {\n            ThemeManager.load(theme, editor.documentBaseURI.toAbsolute(themeUrl));\n          } else {\n            ThemeManager.load(theme, 'themes/' + theme + '/theme' + suffix + '.js');\n          }\n        }\n        scriptLoader.loadQueue(function () {\n          ThemeManager.waitFor(theme, callback);\n        });\n      } else {\n        callback();\n      }\n    };\n    var getIconsUrlMetaFromUrl = function (editor) {\n      return Optional.from(getIconsUrl(editor)).filter(function (url) {\n        return url.length > 0;\n      }).map(function (url) {\n        return {\n          url: url,\n          name: Optional.none()\n        };\n      });\n    };\n    var getIconsUrlMetaFromName = function (editor, name, suffix) {\n      return Optional.from(name).filter(function (name) {\n        return name.length > 0 && !IconManager.has(name);\n      }).map(function (name) {\n        return {\n          url: editor.editorManager.baseURL + '/icons/' + name + '/icons' + suffix + '.js',\n          name: Optional.some(name)\n        };\n      });\n    };\n    var loadIcons = function (scriptLoader, editor, suffix) {\n      var defaultIconsUrl = getIconsUrlMetaFromName(editor, 'default', suffix);\n      var customIconsUrl = getIconsUrlMetaFromUrl(editor).orThunk(function () {\n        return getIconsUrlMetaFromName(editor, getIconPackName(editor), '');\n      });\n      each$k(cat([\n        defaultIconsUrl,\n        customIconsUrl\n      ]), function (urlMeta) {\n        scriptLoader.add(urlMeta.url, noop, undefined, function () {\n          iconsLoadError(editor, urlMeta.url, urlMeta.name.getOrUndefined());\n        });\n      });\n    };\n    var loadPlugins = function (editor, suffix) {\n      Tools.each(getExternalPlugins$1(editor), function (url, name) {\n        PluginManager.load(name, url, noop, undefined, function () {\n          pluginLoadError(editor, url, name);\n        });\n        editor.settings.plugins += ' ' + name;\n      });\n      Tools.each(getPlugins(editor).split(/[ ,]/), function (plugin) {\n        plugin = Tools.trim(plugin);\n        if (plugin && !PluginManager.urls[plugin]) {\n          if (hasSkipLoadPrefix(plugin)) {\n            plugin = plugin.substr(1, plugin.length);\n            var dependencies = PluginManager.dependencies(plugin);\n            Tools.each(dependencies, function (depPlugin) {\n              var defaultSettings = {\n                prefix: 'plugins/',\n                resource: depPlugin,\n                suffix: '/plugin' + suffix + '.js'\n              };\n              var dep = PluginManager.createUrl(defaultSettings, depPlugin);\n              PluginManager.load(dep.resource, dep, noop, undefined, function () {\n                pluginLoadError(editor, dep.prefix + dep.resource + dep.suffix, dep.resource);\n              });\n            });\n          } else {\n            var url_2 = {\n              prefix: 'plugins/',\n              resource: plugin,\n              suffix: '/plugin' + suffix + '.js'\n            };\n            PluginManager.load(plugin, url_2, noop, undefined, function () {\n              pluginLoadError(editor, url_2.prefix + url_2.resource + url_2.suffix, plugin);\n            });\n          }\n        }\n      });\n    };\n    var loadScripts = function (editor, suffix) {\n      var scriptLoader = ScriptLoader.ScriptLoader;\n      loadTheme(scriptLoader, editor, suffix, function () {\n        loadLanguage(scriptLoader, editor);\n        loadIcons(scriptLoader, editor, suffix);\n        loadPlugins(editor, suffix);\n        scriptLoader.loadQueue(function () {\n          if (!editor.removed) {\n            init(editor);\n          }\n        }, editor, function () {\n          if (!editor.removed) {\n            init(editor);\n          }\n        });\n      });\n    };\n    var getStyleSheetLoader = function (element, editor) {\n      return instance.forElement(element, {\n        contentCssCors: hasContentCssCors(editor),\n        referrerPolicy: getReferrerPolicy(editor)\n      });\n    };\n    var render = function (editor) {\n      var id = editor.id;\n      I18n.setCode(getLanguageCode(editor));\n      var readyHandler = function () {\n        DOM$3.unbind(window, 'ready', readyHandler);\n        editor.render();\n      };\n      if (!EventUtils.Event.domLoaded) {\n        DOM$3.bind(window, 'ready', readyHandler);\n        return;\n      }\n      if (!editor.getElement()) {\n        return;\n      }\n      if (!Env.contentEditable) {\n        return;\n      }\n      var element = SugarElement.fromDom(editor.getElement());\n      var snapshot = clone$3(element);\n      editor.on('remove', function () {\n        eachr(element.dom.attributes, function (attr) {\n          return remove$6(element, attr.name);\n        });\n        setAll$1(element, snapshot);\n      });\n      editor.ui.styleSheetLoader = getStyleSheetLoader(element, editor);\n      if (!isInline(editor)) {\n        editor.orgVisibility = editor.getElement().style.visibility;\n        editor.getElement().style.visibility = 'hidden';\n      } else {\n        editor.inline = true;\n      }\n      var form = editor.getElement().form || DOM$3.getParent(id, 'form');\n      if (form) {\n        editor.formElement = form;\n        if (hasHiddenInput(editor) && !isTextareaOrInput(editor.getElement())) {\n          DOM$3.insertAfter(DOM$3.create('input', {\n            type: 'hidden',\n            name: id\n          }), id);\n          editor.hasHiddenInput = true;\n        }\n        editor.formEventDelegate = function (e) {\n          editor.fire(e.type, e);\n        };\n        DOM$3.bind(form, 'submit reset', editor.formEventDelegate);\n        editor.on('reset', function () {\n          editor.resetContent();\n        });\n        if (shouldPatchSubmit(editor) && !form.submit.nodeType && !form.submit.length && !form._mceOldSubmit) {\n          form._mceOldSubmit = form.submit;\n          form.submit = function () {\n            editor.editorManager.triggerSave();\n            editor.setDirty(false);\n            return form._mceOldSubmit(form);\n          };\n        }\n      }\n      editor.windowManager = WindowManager(editor);\n      editor.notificationManager = NotificationManager(editor);\n      if (isEncodingXml(editor)) {\n        editor.on('GetContent', function (e) {\n          if (e.save) {\n            e.content = DOM$3.encode(e.content);\n          }\n        });\n      }\n      if (shouldAddFormSubmitTrigger(editor)) {\n        editor.on('submit', function () {\n          if (editor.initialized) {\n            editor.save();\n          }\n        });\n      }\n      if (shouldAddUnloadTrigger(editor)) {\n        editor._beforeUnload = function () {\n          if (editor.initialized && !editor.destroyed && !editor.isHidden()) {\n            editor.save({\n              format: 'raw',\n              no_events: true,\n              set_dirty: false\n            });\n          }\n        };\n        editor.editorManager.on('BeforeUnload', editor._beforeUnload);\n      }\n      editor.editorManager.add(editor);\n      loadScripts(editor, editor.suffix);\n    };\n\n    var addVisual = function (editor, elm) {\n      return addVisual$1(editor, elm);\n    };\n\n    var legacyPropNames = {\n      'font-size': 'size',\n      'font-family': 'face'\n    };\n    var getSpecifiedFontProp = function (propName, rootElm, elm) {\n      var getProperty = function (elm) {\n        return getRaw(elm, propName).orThunk(function () {\n          if (name(elm) === 'font') {\n            return get$9(legacyPropNames, propName).bind(function (legacyPropName) {\n              return getOpt(elm, legacyPropName);\n            });\n          } else {\n            return Optional.none();\n          }\n        });\n      };\n      var isRoot = function (elm) {\n        return eq(SugarElement.fromDom(rootElm), elm);\n      };\n      return closest$1(SugarElement.fromDom(elm), function (elm) {\n        return getProperty(elm);\n      }, isRoot);\n    };\n    var normalizeFontFamily = function (fontFamily) {\n      return fontFamily.replace(/[\\'\\\"\\\\]/g, '').replace(/,\\s+/g, ',');\n    };\n    var getComputedFontProp = function (propName, elm) {\n      return Optional.from(DOMUtils.DOM.getStyle(elm, propName, true));\n    };\n    var getFontProp = function (propName) {\n      return function (rootElm, elm) {\n        return Optional.from(elm).map(SugarElement.fromDom).filter(isElement$6).bind(function (element) {\n          return getSpecifiedFontProp(propName, rootElm, element.dom).or(getComputedFontProp(propName, element.dom));\n        }).getOr('');\n      };\n    };\n    var getFontSize = getFontProp('font-size');\n    var getFontFamily = compose(normalizeFontFamily, getFontProp('font-family'));\n\n    var findFirstCaretElement = function (editor) {\n      return firstPositionIn(editor.getBody()).map(function (caret) {\n        var container = caret.container();\n        return isText$7(container) ? container.parentNode : container;\n      });\n    };\n    var getCaretElement = function (editor) {\n      return Optional.from(editor.selection.getRng()).bind(function (rng) {\n        var root = editor.getBody();\n        var atStartOfNode = rng.startContainer === root && rng.startOffset === 0;\n        return atStartOfNode ? Optional.none() : Optional.from(editor.selection.getStart(true));\n      });\n    };\n    var bindRange = function (editor, binder) {\n      return getCaretElement(editor).orThunk(curry(findFirstCaretElement, editor)).map(SugarElement.fromDom).filter(isElement$6).bind(binder);\n    };\n    var mapRange = function (editor, mapper) {\n      return bindRange(editor, compose1(Optional.some, mapper));\n    };\n\n    var fromFontSizeNumber = function (editor, value) {\n      if (/^[0-9.]+$/.test(value)) {\n        var fontSizeNumber = parseInt(value, 10);\n        if (fontSizeNumber >= 1 && fontSizeNumber <= 7) {\n          var fontSizes = getFontStyleValues(editor);\n          var fontClasses = getFontSizeClasses(editor);\n          if (fontClasses) {\n            return fontClasses[fontSizeNumber - 1] || value;\n          } else {\n            return fontSizes[fontSizeNumber - 1] || value;\n          }\n        } else {\n          return value;\n        }\n      } else {\n        return value;\n      }\n    };\n    var normalizeFontNames = function (font) {\n      var fonts = font.split(/\\s*,\\s*/);\n      return map$3(fonts, function (font) {\n        if (font.indexOf(' ') !== -1 && !(startsWith(font, '\"') || startsWith(font, '\\''))) {\n          return '\\'' + font + '\\'';\n        } else {\n          return font;\n        }\n      }).join(',');\n    };\n    var fontNameAction = function (editor, value) {\n      var font = fromFontSizeNumber(editor, value);\n      editor.formatter.toggle('fontname', { value: normalizeFontNames(font) });\n      editor.nodeChanged();\n    };\n    var fontNameQuery = function (editor) {\n      return mapRange(editor, function (elm) {\n        return getFontFamily(editor.getBody(), elm.dom);\n      }).getOr('');\n    };\n    var fontSizeAction = function (editor, value) {\n      editor.formatter.toggle('fontsize', { value: fromFontSizeNumber(editor, value) });\n      editor.nodeChanged();\n    };\n    var fontSizeQuery = function (editor) {\n      return mapRange(editor, function (elm) {\n        return getFontSize(editor.getBody(), elm.dom);\n      }).getOr('');\n    };\n\n    var lineHeightQuery = function (editor) {\n      return mapRange(editor, function (elm) {\n        var root = SugarElement.fromDom(editor.getBody());\n        var specifiedStyle = closest$1(elm, function (elm) {\n          return getRaw(elm, 'line-height');\n        }, curry(eq, root));\n        var computedStyle = function () {\n          var lineHeight = parseFloat(get$5(elm, 'line-height'));\n          var fontSize = parseFloat(get$5(elm, 'font-size'));\n          return String(lineHeight / fontSize);\n        };\n        return specifiedStyle.getOrThunk(computedStyle);\n      }).getOr('');\n    };\n    var lineHeightAction = function (editor, lineHeight) {\n      editor.formatter.toggle('lineheight', { value: String(lineHeight) });\n      editor.nodeChanged();\n    };\n\n    var processValue = function (value) {\n      if (typeof value !== 'string') {\n        var details = Tools.extend({\n          paste: value.paste,\n          data: { paste: value.paste }\n        }, value);\n        return {\n          content: value.content,\n          details: details\n        };\n      }\n      return {\n        content: value,\n        details: {}\n      };\n    };\n    var insertAtCaret = function (editor, value) {\n      var result = processValue(value);\n      insertContent(editor, result.content, result.details);\n    };\n\n    var each$4 = Tools.each;\n    var map = Tools.map, inArray = Tools.inArray;\n    var EditorCommands = function () {\n      function EditorCommands(editor) {\n        this.commands = {\n          state: {},\n          exec: {},\n          value: {}\n        };\n        this.editor = editor;\n        this.setupCommands(editor);\n      }\n      EditorCommands.prototype.execCommand = function (command, ui, value, args) {\n        var func, state = false;\n        var self = this;\n        if (self.editor.removed) {\n          return;\n        }\n        if (command.toLowerCase() !== 'mcefocus') {\n          if (!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(command) && (!args || !args.skip_focus)) {\n            self.editor.focus();\n          } else {\n            restore(self.editor);\n          }\n        }\n        args = self.editor.fire('BeforeExecCommand', {\n          command: command,\n          ui: ui,\n          value: value\n        });\n        if (args.isDefaultPrevented()) {\n          return false;\n        }\n        var customCommand = command.toLowerCase();\n        if (func = self.commands.exec[customCommand]) {\n          func(customCommand, ui, value);\n          self.editor.fire('ExecCommand', {\n            command: command,\n            ui: ui,\n            value: value\n          });\n          return true;\n        }\n        each$4(this.editor.plugins, function (p) {\n          if (p.execCommand && p.execCommand(command, ui, value)) {\n            self.editor.fire('ExecCommand', {\n              command: command,\n              ui: ui,\n              value: value\n            });\n            state = true;\n            return false;\n          }\n        });\n        if (state) {\n          return state;\n        }\n        if (self.editor.theme && self.editor.theme.execCommand && self.editor.theme.execCommand(command, ui, value)) {\n          self.editor.fire('ExecCommand', {\n            command: command,\n            ui: ui,\n            value: value\n          });\n          return true;\n        }\n        try {\n          state = self.editor.getDoc().execCommand(command, ui, value);\n        } catch (ex) {\n        }\n        if (state) {\n          self.editor.fire('ExecCommand', {\n            command: command,\n            ui: ui,\n            value: value\n          });\n          return true;\n        }\n        return false;\n      };\n      EditorCommands.prototype.queryCommandState = function (command) {\n        var func;\n        if (this.editor.quirks.isHidden() || this.editor.removed) {\n          return;\n        }\n        command = command.toLowerCase();\n        if (func = this.commands.state[command]) {\n          return func(command);\n        }\n        try {\n          return this.editor.getDoc().queryCommandState(command);\n        } catch (ex) {\n        }\n        return false;\n      };\n      EditorCommands.prototype.queryCommandValue = function (command) {\n        var func;\n        if (this.editor.quirks.isHidden() || this.editor.removed) {\n          return;\n        }\n        command = command.toLowerCase();\n        if (func = this.commands.value[command]) {\n          return func(command);\n        }\n        try {\n          return this.editor.getDoc().queryCommandValue(command);\n        } catch (ex) {\n        }\n      };\n      EditorCommands.prototype.addCommands = function (commandList, type) {\n        if (type === void 0) {\n          type = 'exec';\n        }\n        var self = this;\n        each$4(commandList, function (callback, command) {\n          each$4(command.toLowerCase().split(','), function (command) {\n            self.commands[type][command] = callback;\n          });\n        });\n      };\n      EditorCommands.prototype.addCommand = function (command, callback, scope) {\n        var _this = this;\n        command = command.toLowerCase();\n        this.commands.exec[command] = function (command, ui, value, args) {\n          return callback.call(scope || _this.editor, ui, value, args);\n        };\n      };\n      EditorCommands.prototype.queryCommandSupported = function (command) {\n        command = command.toLowerCase();\n        if (this.commands.exec[command]) {\n          return true;\n        }\n        try {\n          return this.editor.getDoc().queryCommandSupported(command);\n        } catch (ex) {\n        }\n        return false;\n      };\n      EditorCommands.prototype.addQueryStateHandler = function (command, callback, scope) {\n        var _this = this;\n        command = command.toLowerCase();\n        this.commands.state[command] = function () {\n          return callback.call(scope || _this.editor);\n        };\n      };\n      EditorCommands.prototype.addQueryValueHandler = function (command, callback, scope) {\n        var _this = this;\n        command = command.toLowerCase();\n        this.commands.value[command] = function () {\n          return callback.call(scope || _this.editor);\n        };\n      };\n      EditorCommands.prototype.hasCustomCommand = function (command) {\n        command = command.toLowerCase();\n        return !!this.commands.exec[command];\n      };\n      EditorCommands.prototype.execNativeCommand = function (command, ui, value) {\n        if (ui === undefined) {\n          ui = false;\n        }\n        if (value === undefined) {\n          value = null;\n        }\n        return this.editor.getDoc().execCommand(command, ui, value);\n      };\n      EditorCommands.prototype.isFormatMatch = function (name) {\n        return this.editor.formatter.match(name);\n      };\n      EditorCommands.prototype.toggleFormat = function (name, value) {\n        this.editor.formatter.toggle(name, value);\n        this.editor.nodeChanged();\n      };\n      EditorCommands.prototype.storeSelection = function (type) {\n        this.selectionBookmark = this.editor.selection.getBookmark(type);\n      };\n      EditorCommands.prototype.restoreSelection = function () {\n        this.editor.selection.moveToBookmark(this.selectionBookmark);\n      };\n      EditorCommands.prototype.setupCommands = function (editor) {\n        var self = this;\n        this.addCommands({\n          'mceResetDesignMode,mceBeginUndoLevel': noop,\n          'mceEndUndoLevel,mceAddUndoLevel': function () {\n            editor.undoManager.add();\n          },\n          'mceFocus': function (_command, _ui, value) {\n            focus(editor, value);\n          },\n          'Cut,Copy,Paste': function (command) {\n            var doc = editor.getDoc();\n            var failed;\n            try {\n              self.execNativeCommand(command);\n            } catch (ex) {\n              failed = true;\n            }\n            if (command === 'paste' && !doc.queryCommandEnabled(command)) {\n              failed = true;\n            }\n            if (failed || !doc.queryCommandSupported(command)) {\n              var msg = editor.translate('Your browser doesn\\'t support direct access to the clipboard. ' + 'Please use the Ctrl+X/C/V keyboard shortcuts instead.');\n              if (Env.mac) {\n                msg = msg.replace(/Ctrl\\+/g, '\\u2318+');\n              }\n              editor.notificationManager.open({\n                text: msg,\n                type: 'error'\n              });\n            }\n          },\n          'unlink': function () {\n            if (editor.selection.isCollapsed()) {\n              var elm = editor.dom.getParent(editor.selection.getStart(), 'a');\n              if (elm) {\n                editor.dom.remove(elm, true);\n              }\n              return;\n            }\n            editor.formatter.remove('link');\n          },\n          'JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone': function (command) {\n            var align = command.substring(7);\n            if (align === 'full') {\n              align = 'justify';\n            }\n            each$4('left,center,right,justify'.split(','), function (name) {\n              if (align !== name) {\n                editor.formatter.remove('align' + name);\n              }\n            });\n            if (align !== 'none') {\n              self.toggleFormat('align' + align);\n            }\n          },\n          'InsertUnorderedList,InsertOrderedList': function (command) {\n            var listParent;\n            self.execNativeCommand(command);\n            var listElm = editor.dom.getParent(editor.selection.getNode(), 'ol,ul');\n            if (listElm) {\n              listParent = listElm.parentNode;\n              if (/^(H[1-6]|P|ADDRESS|PRE)$/.test(listParent.nodeName)) {\n                self.storeSelection();\n                editor.dom.split(listParent, listElm);\n                self.restoreSelection();\n              }\n            }\n          },\n          'Bold,Italic,Underline,Strikethrough,Superscript,Subscript': function (command) {\n            self.toggleFormat(command);\n          },\n          'ForeColor,HiliteColor': function (command, ui, value) {\n            self.toggleFormat(command, { value: value });\n          },\n          'FontName': function (command, ui, value) {\n            fontNameAction(editor, value);\n          },\n          'FontSize': function (command, ui, value) {\n            fontSizeAction(editor, value);\n          },\n          'LineHeight': function (command, ui, value) {\n            lineHeightAction(editor, value);\n          },\n          'Lang': function (command, ui, lang) {\n            self.toggleFormat(command, {\n              value: lang.code,\n              customValue: lang.customCode\n            });\n          },\n          'RemoveFormat': function (command) {\n            editor.formatter.remove(command);\n          },\n          'mceBlockQuote': function () {\n            self.toggleFormat('blockquote');\n          },\n          'FormatBlock': function (command, ui, value) {\n            return self.toggleFormat(value || 'p');\n          },\n          'mceCleanup': function () {\n            var bookmark = editor.selection.getBookmark();\n            editor.setContent(editor.getContent());\n            editor.selection.moveToBookmark(bookmark);\n          },\n          'mceRemoveNode': function (command, ui, value) {\n            var node = value || editor.selection.getNode();\n            if (node !== editor.getBody()) {\n              self.storeSelection();\n              editor.dom.remove(node, true);\n              self.restoreSelection();\n            }\n          },\n          'mceSelectNodeDepth': function (command, ui, value) {\n            var counter = 0;\n            editor.dom.getParent(editor.selection.getNode(), function (node) {\n              if (node.nodeType === 1 && counter++ === value) {\n                editor.selection.select(node);\n                return false;\n              }\n            }, editor.getBody());\n          },\n          'mceSelectNode': function (command, ui, value) {\n            editor.selection.select(value);\n          },\n          'mceInsertContent': function (command, ui, value) {\n            insertAtCaret(editor, value);\n          },\n          'mceInsertRawHTML': function (command, ui, value) {\n            editor.selection.setContent('tiny_mce_marker');\n            var content = editor.getContent();\n            editor.setContent(content.replace(/tiny_mce_marker/g, function () {\n              return value;\n            }));\n          },\n          'mceInsertNewLine': function (command, ui, value) {\n            insert(editor, value);\n          },\n          'mceToggleFormat': function (command, ui, value) {\n            self.toggleFormat(value);\n          },\n          'mceSetContent': function (command, ui, value) {\n            editor.setContent(value);\n          },\n          'Indent,Outdent': function (command) {\n            handle(editor, command);\n          },\n          'mceRepaint': noop,\n          'InsertHorizontalRule': function () {\n            editor.execCommand('mceInsertContent', false, '<hr />');\n          },\n          'mceToggleVisualAid': function () {\n            editor.hasVisual = !editor.hasVisual;\n            editor.addVisual();\n          },\n          'mceReplaceContent': function (command, ui, value) {\n            editor.execCommand('mceInsertContent', false, value.replace(/\\{\\$selection\\}/g, editor.selection.getContent({ format: 'text' })));\n          },\n          'mceInsertLink': function (command, ui, value) {\n            if (typeof value === 'string') {\n              value = { href: value };\n            }\n            var anchor = editor.dom.getParent(editor.selection.getNode(), 'a');\n            value.href = value.href.replace(/ /g, '%20');\n            if (!anchor || !value.href) {\n              editor.formatter.remove('link');\n            }\n            if (value.href) {\n              editor.formatter.apply('link', value, anchor);\n            }\n          },\n          'selectAll': function () {\n            var editingHost = editor.dom.getParent(editor.selection.getStart(), isContentEditableTrue$4);\n            if (editingHost) {\n              var rng = editor.dom.createRng();\n              rng.selectNodeContents(editingHost);\n              editor.selection.setRng(rng);\n            }\n          },\n          'mceNewDocument': function () {\n            editor.setContent('');\n          },\n          'InsertLineBreak': function (command, ui, value) {\n            insert$1(editor, value);\n            return true;\n          }\n        });\n        var alignStates = function (name) {\n          return function () {\n            var selection = editor.selection;\n            var nodes = selection.isCollapsed() ? [editor.dom.getParent(selection.getNode(), editor.dom.isBlock)] : selection.getSelectedBlocks();\n            var matches = map(nodes, function (node) {\n              return !!editor.formatter.matchNode(node, name);\n            });\n            return inArray(matches, true) !== -1;\n          };\n        };\n        self.addCommands({\n          'JustifyLeft': alignStates('alignleft'),\n          'JustifyCenter': alignStates('aligncenter'),\n          'JustifyRight': alignStates('alignright'),\n          'JustifyFull': alignStates('alignjustify'),\n          'Bold,Italic,Underline,Strikethrough,Superscript,Subscript': function (command) {\n            return self.isFormatMatch(command);\n          },\n          'mceBlockQuote': function () {\n            return self.isFormatMatch('blockquote');\n          },\n          'Outdent': function () {\n            return canOutdent(editor);\n          },\n          'InsertUnorderedList,InsertOrderedList': function (command) {\n            var list = editor.dom.getParent(editor.selection.getNode(), 'ul,ol');\n            return list && (command === 'insertunorderedlist' && list.tagName === 'UL' || command === 'insertorderedlist' && list.tagName === 'OL');\n          }\n        }, 'state');\n        self.addCommands({\n          Undo: function () {\n            editor.undoManager.undo();\n          },\n          Redo: function () {\n            editor.undoManager.redo();\n          }\n        });\n        self.addQueryValueHandler('FontName', function () {\n          return fontNameQuery(editor);\n        }, this);\n        self.addQueryValueHandler('FontSize', function () {\n          return fontSizeQuery(editor);\n        }, this);\n        self.addQueryValueHandler('LineHeight', function () {\n          return lineHeightQuery(editor);\n        }, this);\n      };\n      return EditorCommands;\n    }();\n\n    var internalContentEditableAttr = 'data-mce-contenteditable';\n    var toggleClass = function (elm, cls, state) {\n      if (has(elm, cls) && state === false) {\n        remove$3(elm, cls);\n      } else if (state) {\n        add$1(elm, cls);\n      }\n    };\n    var setEditorCommandState = function (editor, cmd, state) {\n      try {\n        editor.getDoc().execCommand(cmd, false, String(state));\n      } catch (ex) {\n      }\n    };\n    var setContentEditable = function (elm, state) {\n      elm.dom.contentEditable = state ? 'true' : 'false';\n    };\n    var switchOffContentEditableTrue = function (elm) {\n      each$k(descendants(elm, '*[contenteditable=\"true\"]'), function (elm) {\n        set$1(elm, internalContentEditableAttr, 'true');\n        setContentEditable(elm, false);\n      });\n    };\n    var switchOnContentEditableTrue = function (elm) {\n      each$k(descendants(elm, '*[' + internalContentEditableAttr + '=\"true\"]'), function (elm) {\n        remove$6(elm, internalContentEditableAttr);\n        setContentEditable(elm, true);\n      });\n    };\n    var removeFakeSelection = function (editor) {\n      Optional.from(editor.selection.getNode()).each(function (elm) {\n        elm.removeAttribute('data-mce-selected');\n      });\n    };\n    var restoreFakeSelection = function (editor) {\n      editor.selection.setRng(editor.selection.getRng());\n    };\n    var toggleReadOnly = function (editor, state) {\n      var body = SugarElement.fromDom(editor.getBody());\n      toggleClass(body, 'mce-content-readonly', state);\n      if (state) {\n        editor.selection.controlSelection.hideResizeRect();\n        editor._selectionOverrides.hideFakeCaret();\n        removeFakeSelection(editor);\n        editor.readonly = true;\n        setContentEditable(body, false);\n        switchOffContentEditableTrue(body);\n      } else {\n        editor.readonly = false;\n        setContentEditable(body, true);\n        switchOnContentEditableTrue(body);\n        setEditorCommandState(editor, 'StyleWithCSS', false);\n        setEditorCommandState(editor, 'enableInlineTableEditing', false);\n        setEditorCommandState(editor, 'enableObjectResizing', false);\n        if (hasEditorOrUiFocus(editor)) {\n          editor.focus();\n        }\n        restoreFakeSelection(editor);\n        editor.nodeChanged();\n      }\n    };\n    var isReadOnly = function (editor) {\n      return editor.readonly;\n    };\n    var registerFilters = function (editor) {\n      editor.parser.addAttributeFilter('contenteditable', function (nodes) {\n        if (isReadOnly(editor)) {\n          each$k(nodes, function (node) {\n            node.attr(internalContentEditableAttr, node.attr('contenteditable'));\n            node.attr('contenteditable', 'false');\n          });\n        }\n      });\n      editor.serializer.addAttributeFilter(internalContentEditableAttr, function (nodes) {\n        if (isReadOnly(editor)) {\n          each$k(nodes, function (node) {\n            node.attr('contenteditable', node.attr(internalContentEditableAttr));\n          });\n        }\n      });\n      editor.serializer.addTempAttr(internalContentEditableAttr);\n    };\n    var registerReadOnlyContentFilters = function (editor) {\n      if (editor.serializer) {\n        registerFilters(editor);\n      } else {\n        editor.on('PreInit', function () {\n          registerFilters(editor);\n        });\n      }\n    };\n    var isClickEvent = function (e) {\n      return e.type === 'click';\n    };\n    var getAnchorHrefOpt = function (editor, elm) {\n      var isRoot = function (elm) {\n        return eq(elm, SugarElement.fromDom(editor.getBody()));\n      };\n      return closest$2(elm, 'a', isRoot).bind(function (a) {\n        return getOpt(a, 'href');\n      });\n    };\n    var processReadonlyEvents = function (editor, e) {\n      if (isClickEvent(e) && !VK.metaKeyPressed(e)) {\n        var elm = SugarElement.fromDom(e.target);\n        getAnchorHrefOpt(editor, elm).each(function (href) {\n          e.preventDefault();\n          if (/^#/.test(href)) {\n            var targetEl = editor.dom.select(href + ',[name=\"' + removeLeading(href, '#') + '\"]');\n            if (targetEl.length) {\n              editor.selection.scrollIntoView(targetEl[0], true);\n            }\n          } else {\n            window.open(href, '_blank', 'rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes');\n          }\n        });\n      }\n    };\n    var registerReadOnlySelectionBlockers = function (editor) {\n      editor.on('ShowCaret', function (e) {\n        if (isReadOnly(editor)) {\n          e.preventDefault();\n        }\n      });\n      editor.on('ObjectSelected', function (e) {\n        if (isReadOnly(editor)) {\n          e.preventDefault();\n        }\n      });\n    };\n\n    var nativeEvents = Tools.makeMap('focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange ' + 'mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover ' + 'draggesture dragdrop drop drag submit ' + 'compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel', ' ');\n    var EventDispatcher = function () {\n      function EventDispatcher(settings) {\n        this.bindings = {};\n        this.settings = settings || {};\n        this.scope = this.settings.scope || this;\n        this.toggleEvent = this.settings.toggleEvent || never;\n      }\n      EventDispatcher.isNative = function (name) {\n        return !!nativeEvents[name.toLowerCase()];\n      };\n      EventDispatcher.prototype.fire = function (name, args) {\n        var lcName = name.toLowerCase();\n        var event = normalize$3(lcName, args || {}, this.scope);\n        if (this.settings.beforeFire) {\n          this.settings.beforeFire(event);\n        }\n        var handlers = this.bindings[lcName];\n        if (handlers) {\n          for (var i = 0, l = handlers.length; i < l; i++) {\n            var callback = handlers[i];\n            if (callback.removed) {\n              continue;\n            }\n            if (callback.once) {\n              this.off(lcName, callback.func);\n            }\n            if (event.isImmediatePropagationStopped()) {\n              return event;\n            }\n            if (callback.func.call(this.scope, event) === false) {\n              event.preventDefault();\n              return event;\n            }\n          }\n        }\n        return event;\n      };\n      EventDispatcher.prototype.on = function (name, callback, prepend, extra) {\n        if (callback === false) {\n          callback = never;\n        }\n        if (callback) {\n          var wrappedCallback = {\n            func: callback,\n            removed: false\n          };\n          if (extra) {\n            Tools.extend(wrappedCallback, extra);\n          }\n          var names = name.toLowerCase().split(' ');\n          var i = names.length;\n          while (i--) {\n            var currentName = names[i];\n            var handlers = this.bindings[currentName];\n            if (!handlers) {\n              handlers = [];\n              this.toggleEvent(currentName, true);\n            }\n            if (prepend) {\n              handlers = __spreadArray([wrappedCallback], handlers, true);\n            } else {\n              handlers = __spreadArray(__spreadArray([], handlers, true), [wrappedCallback], false);\n            }\n            this.bindings[currentName] = handlers;\n          }\n        }\n        return this;\n      };\n      EventDispatcher.prototype.off = function (name, callback) {\n        var _this = this;\n        if (name) {\n          var names = name.toLowerCase().split(' ');\n          var i = names.length;\n          while (i--) {\n            var currentName = names[i];\n            var handlers = this.bindings[currentName];\n            if (!currentName) {\n              each$j(this.bindings, function (_value, bindingName) {\n                _this.toggleEvent(bindingName, false);\n                delete _this.bindings[bindingName];\n              });\n              return this;\n            }\n            if (handlers) {\n              if (!callback) {\n                handlers.length = 0;\n              } else {\n                var filteredHandlers = partition(handlers, function (handler) {\n                  return handler.func === callback;\n                });\n                handlers = filteredHandlers.fail;\n                this.bindings[currentName] = handlers;\n                each$k(filteredHandlers.pass, function (handler) {\n                  handler.removed = true;\n                });\n              }\n              if (!handlers.length) {\n                this.toggleEvent(name, false);\n                delete this.bindings[currentName];\n              }\n            }\n          }\n        } else {\n          each$j(this.bindings, function (_value, name) {\n            _this.toggleEvent(name, false);\n          });\n          this.bindings = {};\n        }\n        return this;\n      };\n      EventDispatcher.prototype.once = function (name, callback, prepend) {\n        return this.on(name, callback, prepend, { once: true });\n      };\n      EventDispatcher.prototype.has = function (name) {\n        name = name.toLowerCase();\n        return !(!this.bindings[name] || this.bindings[name].length === 0);\n      };\n      return EventDispatcher;\n    }();\n\n    var getEventDispatcher = function (obj) {\n      if (!obj._eventDispatcher) {\n        obj._eventDispatcher = new EventDispatcher({\n          scope: obj,\n          toggleEvent: function (name, state) {\n            if (EventDispatcher.isNative(name) && obj.toggleNativeEvent) {\n              obj.toggleNativeEvent(name, state);\n            }\n          }\n        });\n      }\n      return obj._eventDispatcher;\n    };\n    var Observable = {\n      fire: function (name, args, bubble) {\n        var self = this;\n        if (self.removed && name !== 'remove' && name !== 'detach') {\n          return args;\n        }\n        var dispatcherArgs = getEventDispatcher(self).fire(name, args);\n        if (bubble !== false && self.parent) {\n          var parent_1 = self.parent();\n          while (parent_1 && !dispatcherArgs.isPropagationStopped()) {\n            parent_1.fire(name, dispatcherArgs, false);\n            parent_1 = parent_1.parent();\n          }\n        }\n        return dispatcherArgs;\n      },\n      on: function (name, callback, prepend) {\n        return getEventDispatcher(this).on(name, callback, prepend);\n      },\n      off: function (name, callback) {\n        return getEventDispatcher(this).off(name, callback);\n      },\n      once: function (name, callback) {\n        return getEventDispatcher(this).once(name, callback);\n      },\n      hasEventListeners: function (name) {\n        return getEventDispatcher(this).has(name);\n      }\n    };\n\n    var DOM$2 = DOMUtils.DOM;\n    var customEventRootDelegates;\n    var getEventTarget = function (editor, eventName) {\n      if (eventName === 'selectionchange') {\n        return editor.getDoc();\n      }\n      if (!editor.inline && /^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(eventName)) {\n        return editor.getDoc().documentElement;\n      }\n      var eventRoot = getEventRoot(editor);\n      if (eventRoot) {\n        if (!editor.eventRoot) {\n          editor.eventRoot = DOM$2.select(eventRoot)[0];\n        }\n        return editor.eventRoot;\n      }\n      return editor.getBody();\n    };\n    var isListening = function (editor) {\n      return !editor.hidden && !isReadOnly(editor);\n    };\n    var fireEvent = function (editor, eventName, e) {\n      if (isListening(editor)) {\n        editor.fire(eventName, e);\n      } else if (isReadOnly(editor)) {\n        processReadonlyEvents(editor, e);\n      }\n    };\n    var bindEventDelegate = function (editor, eventName) {\n      var delegate;\n      if (!editor.delegates) {\n        editor.delegates = {};\n      }\n      if (editor.delegates[eventName] || editor.removed) {\n        return;\n      }\n      var eventRootElm = getEventTarget(editor, eventName);\n      if (getEventRoot(editor)) {\n        if (!customEventRootDelegates) {\n          customEventRootDelegates = {};\n          editor.editorManager.on('removeEditor', function () {\n            if (!editor.editorManager.activeEditor) {\n              if (customEventRootDelegates) {\n                each$j(customEventRootDelegates, function (_value, name) {\n                  editor.dom.unbind(getEventTarget(editor, name));\n                });\n                customEventRootDelegates = null;\n              }\n            }\n          });\n        }\n        if (customEventRootDelegates[eventName]) {\n          return;\n        }\n        delegate = function (e) {\n          var target = e.target;\n          var editors = editor.editorManager.get();\n          var i = editors.length;\n          while (i--) {\n            var body = editors[i].getBody();\n            if (body === target || DOM$2.isChildOf(target, body)) {\n              fireEvent(editors[i], eventName, e);\n            }\n          }\n        };\n        customEventRootDelegates[eventName] = delegate;\n        DOM$2.bind(eventRootElm, eventName, delegate);\n      } else {\n        delegate = function (e) {\n          fireEvent(editor, eventName, e);\n        };\n        DOM$2.bind(eventRootElm, eventName, delegate);\n        editor.delegates[eventName] = delegate;\n      }\n    };\n    var EditorObservable = __assign(__assign({}, Observable), {\n      bindPendingEventDelegates: function () {\n        var self = this;\n        Tools.each(self._pendingNativeEvents, function (name) {\n          bindEventDelegate(self, name);\n        });\n      },\n      toggleNativeEvent: function (name, state) {\n        var self = this;\n        if (name === 'focus' || name === 'blur') {\n          return;\n        }\n        if (self.removed) {\n          return;\n        }\n        if (state) {\n          if (self.initialized) {\n            bindEventDelegate(self, name);\n          } else {\n            if (!self._pendingNativeEvents) {\n              self._pendingNativeEvents = [name];\n            } else {\n              self._pendingNativeEvents.push(name);\n            }\n          }\n        } else if (self.initialized) {\n          self.dom.unbind(getEventTarget(self, name), name, self.delegates[name]);\n          delete self.delegates[name];\n        }\n      },\n      unbindAllNativeEvents: function () {\n        var self = this;\n        var body = self.getBody();\n        var dom = self.dom;\n        if (self.delegates) {\n          each$j(self.delegates, function (value, name) {\n            self.dom.unbind(getEventTarget(self, name), name, value);\n          });\n          delete self.delegates;\n        }\n        if (!self.inline && body && dom) {\n          body.onload = null;\n          dom.unbind(self.getWin());\n          dom.unbind(self.getDoc());\n        }\n        if (dom) {\n          dom.unbind(body);\n          dom.unbind(self.getContainer());\n        }\n      }\n    });\n\n    var defaultModes = [\n      'design',\n      'readonly'\n    ];\n    var switchToMode = function (editor, activeMode, availableModes, mode) {\n      var oldMode = availableModes[activeMode.get()];\n      var newMode = availableModes[mode];\n      try {\n        newMode.activate();\n      } catch (e) {\n        console.error('problem while activating editor mode ' + mode + ':', e);\n        return;\n      }\n      oldMode.deactivate();\n      if (oldMode.editorReadOnly !== newMode.editorReadOnly) {\n        toggleReadOnly(editor, newMode.editorReadOnly);\n      }\n      activeMode.set(mode);\n      fireSwitchMode(editor, mode);\n    };\n    var setMode = function (editor, availableModes, activeMode, mode) {\n      if (mode === activeMode.get()) {\n        return;\n      } else if (!has$2(availableModes, mode)) {\n        throw new Error('Editor mode \\'' + mode + '\\' is invalid');\n      }\n      if (editor.initialized) {\n        switchToMode(editor, activeMode, availableModes, mode);\n      } else {\n        editor.on('init', function () {\n          return switchToMode(editor, activeMode, availableModes, mode);\n        });\n      }\n    };\n    var registerMode = function (availableModes, mode, api) {\n      var _a;\n      if (contains$3(defaultModes, mode)) {\n        throw new Error('Cannot override default mode ' + mode);\n      }\n      return __assign(__assign({}, availableModes), (_a = {}, _a[mode] = __assign(__assign({}, api), {\n        deactivate: function () {\n          try {\n            api.deactivate();\n          } catch (e) {\n            console.error('problem while deactivating editor mode ' + mode + ':', e);\n          }\n        }\n      }), _a));\n    };\n\n    var create$4 = function (editor) {\n      var activeMode = Cell('design');\n      var availableModes = Cell({\n        design: {\n          activate: noop,\n          deactivate: noop,\n          editorReadOnly: false\n        },\n        readonly: {\n          activate: noop,\n          deactivate: noop,\n          editorReadOnly: true\n        }\n      });\n      registerReadOnlyContentFilters(editor);\n      registerReadOnlySelectionBlockers(editor);\n      return {\n        isReadOnly: function () {\n          return isReadOnly(editor);\n        },\n        set: function (mode) {\n          return setMode(editor, availableModes.get(), activeMode, mode);\n        },\n        get: function () {\n          return activeMode.get();\n        },\n        register: function (mode, api) {\n          availableModes.set(registerMode(availableModes.get(), mode, api));\n        }\n      };\n    };\n\n    var each$3 = Tools.each, explode$1 = Tools.explode;\n    var keyCodeLookup = {\n      f1: 112,\n      f2: 113,\n      f3: 114,\n      f4: 115,\n      f5: 116,\n      f6: 117,\n      f7: 118,\n      f8: 119,\n      f9: 120,\n      f10: 121,\n      f11: 122,\n      f12: 123\n    };\n    var modifierNames = Tools.makeMap('alt,ctrl,shift,meta,access');\n    var parseShortcut = function (pattern) {\n      var key;\n      var shortcut = {};\n      each$3(explode$1(pattern.toLowerCase(), '+'), function (value) {\n        if (value in modifierNames) {\n          shortcut[value] = true;\n        } else {\n          if (/^[0-9]{2,}$/.test(value)) {\n            shortcut.keyCode = parseInt(value, 10);\n          } else {\n            shortcut.charCode = value.charCodeAt(0);\n            shortcut.keyCode = keyCodeLookup[value] || value.toUpperCase().charCodeAt(0);\n          }\n        }\n      });\n      var id = [shortcut.keyCode];\n      for (key in modifierNames) {\n        if (shortcut[key]) {\n          id.push(key);\n        } else {\n          shortcut[key] = false;\n        }\n      }\n      shortcut.id = id.join(',');\n      if (shortcut.access) {\n        shortcut.alt = true;\n        if (Env.mac) {\n          shortcut.ctrl = true;\n        } else {\n          shortcut.shift = true;\n        }\n      }\n      if (shortcut.meta) {\n        if (Env.mac) {\n          shortcut.meta = true;\n        } else {\n          shortcut.ctrl = true;\n          shortcut.meta = false;\n        }\n      }\n      return shortcut;\n    };\n    var Shortcuts = function () {\n      function Shortcuts(editor) {\n        this.shortcuts = {};\n        this.pendingPatterns = [];\n        this.editor = editor;\n        var self = this;\n        editor.on('keyup keypress keydown', function (e) {\n          if ((self.hasModifier(e) || self.isFunctionKey(e)) && !e.isDefaultPrevented()) {\n            each$3(self.shortcuts, function (shortcut) {\n              if (self.matchShortcut(e, shortcut)) {\n                self.pendingPatterns = shortcut.subpatterns.slice(0);\n                if (e.type === 'keydown') {\n                  self.executeShortcutAction(shortcut);\n                }\n                return true;\n              }\n            });\n            if (self.matchShortcut(e, self.pendingPatterns[0])) {\n              if (self.pendingPatterns.length === 1) {\n                if (e.type === 'keydown') {\n                  self.executeShortcutAction(self.pendingPatterns[0]);\n                }\n              }\n              self.pendingPatterns.shift();\n            }\n          }\n        });\n      }\n      Shortcuts.prototype.add = function (pattern, desc, cmdFunc, scope) {\n        var self = this;\n        var func = self.normalizeCommandFunc(cmdFunc);\n        each$3(explode$1(Tools.trim(pattern)), function (pattern) {\n          var shortcut = self.createShortcut(pattern, desc, func, scope);\n          self.shortcuts[shortcut.id] = shortcut;\n        });\n        return true;\n      };\n      Shortcuts.prototype.remove = function (pattern) {\n        var shortcut = this.createShortcut(pattern);\n        if (this.shortcuts[shortcut.id]) {\n          delete this.shortcuts[shortcut.id];\n          return true;\n        }\n        return false;\n      };\n      Shortcuts.prototype.normalizeCommandFunc = function (cmdFunc) {\n        var self = this;\n        var cmd = cmdFunc;\n        if (typeof cmd === 'string') {\n          return function () {\n            self.editor.execCommand(cmd, false, null);\n          };\n        } else if (Tools.isArray(cmd)) {\n          return function () {\n            self.editor.execCommand(cmd[0], cmd[1], cmd[2]);\n          };\n        } else {\n          return cmd;\n        }\n      };\n      Shortcuts.prototype.createShortcut = function (pattern, desc, cmdFunc, scope) {\n        var shortcuts = Tools.map(explode$1(pattern, '>'), parseShortcut);\n        shortcuts[shortcuts.length - 1] = Tools.extend(shortcuts[shortcuts.length - 1], {\n          func: cmdFunc,\n          scope: scope || this.editor\n        });\n        return Tools.extend(shortcuts[0], {\n          desc: this.editor.translate(desc),\n          subpatterns: shortcuts.slice(1)\n        });\n      };\n      Shortcuts.prototype.hasModifier = function (e) {\n        return e.altKey || e.ctrlKey || e.metaKey;\n      };\n      Shortcuts.prototype.isFunctionKey = function (e) {\n        return e.type === 'keydown' && e.keyCode >= 112 && e.keyCode <= 123;\n      };\n      Shortcuts.prototype.matchShortcut = function (e, shortcut) {\n        if (!shortcut) {\n          return false;\n        }\n        if (shortcut.ctrl !== e.ctrlKey || shortcut.meta !== e.metaKey) {\n          return false;\n        }\n        if (shortcut.alt !== e.altKey || shortcut.shift !== e.shiftKey) {\n          return false;\n        }\n        if (e.keyCode === shortcut.keyCode || e.charCode && e.charCode === shortcut.charCode) {\n          e.preventDefault();\n          return true;\n        }\n        return false;\n      };\n      Shortcuts.prototype.executeShortcutAction = function (shortcut) {\n        return shortcut.func ? shortcut.func.call(shortcut.scope) : null;\n      };\n      return Shortcuts;\n    }();\n\n    var create$3 = function () {\n      var buttons = {};\n      var menuItems = {};\n      var popups = {};\n      var icons = {};\n      var contextMenus = {};\n      var contextToolbars = {};\n      var sidebars = {};\n      var add = function (collection, type) {\n        return function (name, spec) {\n          return collection[name.toLowerCase()] = __assign(__assign({}, spec), { type: type });\n        };\n      };\n      var addIcon = function (name, svgData) {\n        return icons[name.toLowerCase()] = svgData;\n      };\n      return {\n        addButton: add(buttons, 'button'),\n        addGroupToolbarButton: add(buttons, 'grouptoolbarbutton'),\n        addToggleButton: add(buttons, 'togglebutton'),\n        addMenuButton: add(buttons, 'menubutton'),\n        addSplitButton: add(buttons, 'splitbutton'),\n        addMenuItem: add(menuItems, 'menuitem'),\n        addNestedMenuItem: add(menuItems, 'nestedmenuitem'),\n        addToggleMenuItem: add(menuItems, 'togglemenuitem'),\n        addAutocompleter: add(popups, 'autocompleter'),\n        addContextMenu: add(contextMenus, 'contextmenu'),\n        addContextToolbar: add(contextToolbars, 'contexttoolbar'),\n        addContextForm: add(contextToolbars, 'contextform'),\n        addSidebar: add(sidebars, 'sidebar'),\n        addIcon: addIcon,\n        getAll: function () {\n          return {\n            buttons: buttons,\n            menuItems: menuItems,\n            icons: icons,\n            popups: popups,\n            contextMenus: contextMenus,\n            contextToolbars: contextToolbars,\n            sidebars: sidebars\n          };\n        }\n      };\n    };\n\n    var registry = function () {\n      var bridge = create$3();\n      return {\n        addAutocompleter: bridge.addAutocompleter,\n        addButton: bridge.addButton,\n        addContextForm: bridge.addContextForm,\n        addContextMenu: bridge.addContextMenu,\n        addContextToolbar: bridge.addContextToolbar,\n        addIcon: bridge.addIcon,\n        addMenuButton: bridge.addMenuButton,\n        addMenuItem: bridge.addMenuItem,\n        addNestedMenuItem: bridge.addNestedMenuItem,\n        addSidebar: bridge.addSidebar,\n        addSplitButton: bridge.addSplitButton,\n        addToggleButton: bridge.addToggleButton,\n        addGroupToolbarButton: bridge.addGroupToolbarButton,\n        addToggleMenuItem: bridge.addToggleMenuItem,\n        getAll: bridge.getAll\n      };\n    };\n\n    var DOM$1 = DOMUtils.DOM;\n    var extend$3 = Tools.extend, each$2 = Tools.each;\n    var resolve = Tools.resolve;\n    var ie = Env.ie;\n    var Editor = function () {\n      function Editor(id, settings, editorManager) {\n        var _this = this;\n        this.plugins = {};\n        this.contentCSS = [];\n        this.contentStyles = [];\n        this.loadedCSS = {};\n        this.isNotDirty = false;\n        this.editorManager = editorManager;\n        this.documentBaseUrl = editorManager.documentBaseURL;\n        extend$3(this, EditorObservable);\n        this.settings = getEditorSettings(this, id, this.documentBaseUrl, editorManager.defaultSettings, settings);\n        if (this.settings.suffix) {\n          editorManager.suffix = this.settings.suffix;\n        }\n        this.suffix = editorManager.suffix;\n        if (this.settings.base_url) {\n          editorManager._setBaseUrl(this.settings.base_url);\n        }\n        this.baseUri = editorManager.baseURI;\n        if (this.settings.referrer_policy) {\n          ScriptLoader.ScriptLoader._setReferrerPolicy(this.settings.referrer_policy);\n          DOMUtils.DOM.styleSheetLoader._setReferrerPolicy(this.settings.referrer_policy);\n        }\n        AddOnManager.languageLoad = this.settings.language_load;\n        AddOnManager.baseURL = editorManager.baseURL;\n        this.id = id;\n        this.setDirty(false);\n        this.documentBaseURI = new URI(this.settings.document_base_url, { base_uri: this.baseUri });\n        this.baseURI = this.baseUri;\n        this.inline = !!this.settings.inline;\n        this.shortcuts = new Shortcuts(this);\n        this.editorCommands = new EditorCommands(this);\n        if (this.settings.cache_suffix) {\n          Env.cacheSuffix = this.settings.cache_suffix.replace(/^[\\?\\&]+/, '');\n        }\n        this.ui = {\n          registry: registry(),\n          styleSheetLoader: undefined,\n          show: noop,\n          hide: noop,\n          enable: noop,\n          disable: noop,\n          isDisabled: never\n        };\n        var self = this;\n        var modeInstance = create$4(self);\n        this.mode = modeInstance;\n        this.setMode = modeInstance.set;\n        editorManager.fire('SetupEditor', { editor: this });\n        this.execCallback('setup', this);\n        this.$ = DomQuery.overrideDefaults(function () {\n          return {\n            context: _this.inline ? _this.getBody() : _this.getDoc(),\n            element: _this.getBody()\n          };\n        });\n      }\n      Editor.prototype.render = function () {\n        render(this);\n      };\n      Editor.prototype.focus = function (skipFocus) {\n        this.execCommand('mceFocus', false, skipFocus);\n      };\n      Editor.prototype.hasFocus = function () {\n        return hasFocus(this);\n      };\n      Editor.prototype.execCallback = function (name) {\n        var x = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n          x[_i - 1] = arguments[_i];\n        }\n        var self = this;\n        var callback = self.settings[name], scope;\n        if (!callback) {\n          return;\n        }\n        if (self.callbackLookup && (scope = self.callbackLookup[name])) {\n          callback = scope.func;\n          scope = scope.scope;\n        }\n        if (typeof callback === 'string') {\n          scope = callback.replace(/\\.\\w+$/, '');\n          scope = scope ? resolve(scope) : 0;\n          callback = resolve(callback);\n          self.callbackLookup = self.callbackLookup || {};\n          self.callbackLookup[name] = {\n            func: callback,\n            scope: scope\n          };\n        }\n        return callback.apply(scope || self, x);\n      };\n      Editor.prototype.translate = function (text) {\n        return I18n.translate(text);\n      };\n      Editor.prototype.getParam = function (name, defaultVal, type) {\n        return getParam(this, name, defaultVal, type);\n      };\n      Editor.prototype.hasPlugin = function (name, loaded) {\n        var hasPlugin = contains$3(getPlugins(this).split(/[ ,]/), name);\n        if (hasPlugin) {\n          return loaded ? PluginManager.get(name) !== undefined : true;\n        } else {\n          return false;\n        }\n      };\n      Editor.prototype.nodeChanged = function (args) {\n        this._nodeChangeDispatcher.nodeChanged(args);\n      };\n      Editor.prototype.addCommand = function (name, callback, scope) {\n        this.editorCommands.addCommand(name, callback, scope);\n      };\n      Editor.prototype.addQueryStateHandler = function (name, callback, scope) {\n        this.editorCommands.addQueryStateHandler(name, callback, scope);\n      };\n      Editor.prototype.addQueryValueHandler = function (name, callback, scope) {\n        this.editorCommands.addQueryValueHandler(name, callback, scope);\n      };\n      Editor.prototype.addShortcut = function (pattern, desc, cmdFunc, scope) {\n        this.shortcuts.add(pattern, desc, cmdFunc, scope);\n      };\n      Editor.prototype.execCommand = function (cmd, ui, value, args) {\n        return this.editorCommands.execCommand(cmd, ui, value, args);\n      };\n      Editor.prototype.queryCommandState = function (cmd) {\n        return this.editorCommands.queryCommandState(cmd);\n      };\n      Editor.prototype.queryCommandValue = function (cmd) {\n        return this.editorCommands.queryCommandValue(cmd);\n      };\n      Editor.prototype.queryCommandSupported = function (cmd) {\n        return this.editorCommands.queryCommandSupported(cmd);\n      };\n      Editor.prototype.show = function () {\n        var self = this;\n        if (self.hidden) {\n          self.hidden = false;\n          if (self.inline) {\n            self.getBody().contentEditable = 'true';\n          } else {\n            DOM$1.show(self.getContainer());\n            DOM$1.hide(self.id);\n          }\n          self.load();\n          self.fire('show');\n        }\n      };\n      Editor.prototype.hide = function () {\n        var self = this, doc = self.getDoc();\n        if (!self.hidden) {\n          if (ie && doc && !self.inline) {\n            doc.execCommand('SelectAll');\n          }\n          self.save();\n          if (self.inline) {\n            self.getBody().contentEditable = 'false';\n            if (self === self.editorManager.focusedEditor) {\n              self.editorManager.focusedEditor = null;\n            }\n          } else {\n            DOM$1.hide(self.getContainer());\n            DOM$1.setStyle(self.id, 'display', self.orgDisplay);\n          }\n          self.hidden = true;\n          self.fire('hide');\n        }\n      };\n      Editor.prototype.isHidden = function () {\n        return !!this.hidden;\n      };\n      Editor.prototype.setProgressState = function (state, time) {\n        this.fire('ProgressState', {\n          state: state,\n          time: time\n        });\n      };\n      Editor.prototype.load = function (args) {\n        var self = this;\n        var elm = self.getElement(), html;\n        if (self.removed) {\n          return '';\n        }\n        if (elm) {\n          args = args || {};\n          args.load = true;\n          var value = isTextareaOrInput(elm) ? elm.value : elm.innerHTML;\n          html = self.setContent(value, args);\n          args.element = elm;\n          if (!args.no_events) {\n            self.fire('LoadContent', args);\n          }\n          args.element = elm = null;\n          return html;\n        }\n      };\n      Editor.prototype.save = function (args) {\n        var self = this;\n        var elm = self.getElement(), html, form;\n        if (!elm || !self.initialized || self.removed) {\n          return;\n        }\n        args = args || {};\n        args.save = true;\n        args.element = elm;\n        html = args.content = self.getContent(args);\n        if (!args.no_events) {\n          self.fire('SaveContent', args);\n        }\n        if (args.format === 'raw') {\n          self.fire('RawSaveContent', args);\n        }\n        html = args.content;\n        if (!isTextareaOrInput(elm)) {\n          if (args.is_removing || !self.inline) {\n            elm.innerHTML = html;\n          }\n          if (form = DOM$1.getParent(self.id, 'form')) {\n            each$2(form.elements, function (elm) {\n              if (elm.name === self.id) {\n                elm.value = html;\n                return false;\n              }\n            });\n          }\n        } else {\n          elm.value = html;\n        }\n        args.element = elm = null;\n        if (args.set_dirty !== false) {\n          self.setDirty(false);\n        }\n        return html;\n      };\n      Editor.prototype.setContent = function (content, args) {\n        return setContent(this, content, args);\n      };\n      Editor.prototype.getContent = function (args) {\n        return getContent(this, args);\n      };\n      Editor.prototype.insertContent = function (content, args) {\n        if (args) {\n          content = extend$3({ content: content }, args);\n        }\n        this.execCommand('mceInsertContent', false, content);\n      };\n      Editor.prototype.resetContent = function (initialContent) {\n        if (initialContent === undefined) {\n          setContent(this, this.startContent, { format: 'raw' });\n        } else {\n          setContent(this, initialContent);\n        }\n        this.undoManager.reset();\n        this.setDirty(false);\n        this.nodeChanged();\n      };\n      Editor.prototype.isDirty = function () {\n        return !this.isNotDirty;\n      };\n      Editor.prototype.setDirty = function (state) {\n        var oldState = !this.isNotDirty;\n        this.isNotDirty = !state;\n        if (state && state !== oldState) {\n          this.fire('dirty');\n        }\n      };\n      Editor.prototype.getContainer = function () {\n        var self = this;\n        if (!self.container) {\n          self.container = DOM$1.get(self.editorContainer || self.id + '_parent');\n        }\n        return self.container;\n      };\n      Editor.prototype.getContentAreaContainer = function () {\n        return this.contentAreaContainer;\n      };\n      Editor.prototype.getElement = function () {\n        if (!this.targetElm) {\n          this.targetElm = DOM$1.get(this.id);\n        }\n        return this.targetElm;\n      };\n      Editor.prototype.getWin = function () {\n        var self = this;\n        var elm;\n        if (!self.contentWindow) {\n          elm = self.iframeElement;\n          if (elm) {\n            self.contentWindow = elm.contentWindow;\n          }\n        }\n        return self.contentWindow;\n      };\n      Editor.prototype.getDoc = function () {\n        var self = this;\n        var win;\n        if (!self.contentDocument) {\n          win = self.getWin();\n          if (win) {\n            self.contentDocument = win.document;\n          }\n        }\n        return self.contentDocument;\n      };\n      Editor.prototype.getBody = function () {\n        var doc = this.getDoc();\n        return this.bodyElement || (doc ? doc.body : null);\n      };\n      Editor.prototype.convertURL = function (url, name, elm) {\n        var self = this, settings = self.settings;\n        if (settings.urlconverter_callback) {\n          return self.execCallback('urlconverter_callback', url, elm, true, name);\n        }\n        if (!settings.convert_urls || elm && elm.nodeName === 'LINK' || url.indexOf('file:') === 0 || url.length === 0) {\n          return url;\n        }\n        if (settings.relative_urls) {\n          return self.documentBaseURI.toRelative(url);\n        }\n        url = self.documentBaseURI.toAbsolute(url, settings.remove_script_host);\n        return url;\n      };\n      Editor.prototype.addVisual = function (elm) {\n        addVisual(this, elm);\n      };\n      Editor.prototype.remove = function () {\n        remove(this);\n      };\n      Editor.prototype.destroy = function (automatic) {\n        destroy(this, automatic);\n      };\n      Editor.prototype.uploadImages = function (callback) {\n        return this.editorUpload.uploadImages(callback);\n      };\n      Editor.prototype._scanForImages = function () {\n        return this.editorUpload.scanForImages();\n      };\n      Editor.prototype.addButton = function () {\n        throw new Error('editor.addButton has been removed in tinymce 5x, use editor.ui.registry.addButton or editor.ui.registry.addToggleButton or editor.ui.registry.addSplitButton instead');\n      };\n      Editor.prototype.addSidebar = function () {\n        throw new Error('editor.addSidebar has been removed in tinymce 5x, use editor.ui.registry.addSidebar instead');\n      };\n      Editor.prototype.addMenuItem = function () {\n        throw new Error('editor.addMenuItem has been removed in tinymce 5x, use editor.ui.registry.addMenuItem instead');\n      };\n      Editor.prototype.addContextToolbar = function () {\n        throw new Error('editor.addContextToolbar has been removed in tinymce 5x, use editor.ui.registry.addContextToolbar instead');\n      };\n      return Editor;\n    }();\n\n    var DOM = DOMUtils.DOM;\n    var explode = Tools.explode, each$1 = Tools.each, extend$2 = Tools.extend;\n    var instanceCounter = 0, boundGlobalEvents = false;\n    var beforeUnloadDelegate;\n    var legacyEditors = [];\n    var editors = [];\n    var isValidLegacyKey = function (id) {\n      return id !== 'length';\n    };\n    var globalEventDelegate = function (e) {\n      var type = e.type;\n      each$1(EditorManager.get(), function (editor) {\n        switch (type) {\n        case 'scroll':\n          editor.fire('ScrollWindow', e);\n          break;\n        case 'resize':\n          editor.fire('ResizeWindow', e);\n          break;\n        }\n      });\n    };\n    var toggleGlobalEvents = function (state) {\n      if (state !== boundGlobalEvents) {\n        if (state) {\n          DomQuery(window).on('resize scroll', globalEventDelegate);\n        } else {\n          DomQuery(window).off('resize scroll', globalEventDelegate);\n        }\n        boundGlobalEvents = state;\n      }\n    };\n    var removeEditorFromList = function (targetEditor) {\n      var oldEditors = editors;\n      delete legacyEditors[targetEditor.id];\n      for (var i = 0; i < legacyEditors.length; i++) {\n        if (legacyEditors[i] === targetEditor) {\n          legacyEditors.splice(i, 1);\n          break;\n        }\n      }\n      editors = filter$4(editors, function (editor) {\n        return targetEditor !== editor;\n      });\n      if (EditorManager.activeEditor === targetEditor) {\n        EditorManager.activeEditor = editors.length > 0 ? editors[0] : null;\n      }\n      if (EditorManager.focusedEditor === targetEditor) {\n        EditorManager.focusedEditor = null;\n      }\n      return oldEditors.length !== editors.length;\n    };\n    var purgeDestroyedEditor = function (editor) {\n      if (editor && editor.initialized && !(editor.getContainer() || editor.getBody()).parentNode) {\n        removeEditorFromList(editor);\n        editor.unbindAllNativeEvents();\n        editor.destroy(true);\n        editor.removed = true;\n        editor = null;\n      }\n      return editor;\n    };\n    var isQuirksMode = document.compatMode !== 'CSS1Compat';\n    var EditorManager = __assign(__assign({}, Observable), {\n      baseURI: null,\n      baseURL: null,\n      defaultSettings: {},\n      documentBaseURL: null,\n      suffix: null,\n      $: DomQuery,\n      majorVersion: '5',\n      minorVersion: '10.9',\n      releaseDate: '2023-11-15',\n      editors: legacyEditors,\n      i18n: I18n,\n      activeEditor: null,\n      focusedEditor: null,\n      settings: {},\n      setup: function () {\n        var self = this;\n        var baseURL, documentBaseURL, suffix = '';\n        documentBaseURL = URI.getDocumentBaseUrl(document.location);\n        if (/^[^:]+:\\/\\/\\/?[^\\/]+\\//.test(documentBaseURL)) {\n          documentBaseURL = documentBaseURL.replace(/[\\?#].*$/, '').replace(/[\\/\\\\][^\\/]+$/, '');\n          if (!/[\\/\\\\]$/.test(documentBaseURL)) {\n            documentBaseURL += '/';\n          }\n        }\n        var preInit = window.tinymce || window.tinyMCEPreInit;\n        if (preInit) {\n          baseURL = preInit.base || preInit.baseURL;\n          suffix = preInit.suffix;\n        } else {\n          var scripts = document.getElementsByTagName('script');\n          for (var i = 0; i < scripts.length; i++) {\n            var src = scripts[i].src || '';\n            if (src === '') {\n              continue;\n            }\n            var srcScript = src.substring(src.lastIndexOf('/'));\n            if (/tinymce(\\.full|\\.jquery|)(\\.min|\\.dev|)\\.js/.test(src)) {\n              if (srcScript.indexOf('.min') !== -1) {\n                suffix = '.min';\n              }\n              baseURL = src.substring(0, src.lastIndexOf('/'));\n              break;\n            }\n          }\n          if (!baseURL && document.currentScript) {\n            var src = document.currentScript.src;\n            if (src.indexOf('.min') !== -1) {\n              suffix = '.min';\n            }\n            baseURL = src.substring(0, src.lastIndexOf('/'));\n          }\n        }\n        self.baseURL = new URI(documentBaseURL).toAbsolute(baseURL);\n        self.documentBaseURL = documentBaseURL;\n        self.baseURI = new URI(self.baseURL);\n        self.suffix = suffix;\n        setup$l(self);\n      },\n      overrideDefaults: function (defaultSettings) {\n        var baseUrl = defaultSettings.base_url;\n        if (baseUrl) {\n          this._setBaseUrl(baseUrl);\n        }\n        var suffix = defaultSettings.suffix;\n        if (defaultSettings.suffix) {\n          this.suffix = suffix;\n        }\n        this.defaultSettings = defaultSettings;\n        var pluginBaseUrls = defaultSettings.plugin_base_urls;\n        if (pluginBaseUrls !== undefined) {\n          each$j(pluginBaseUrls, function (pluginBaseUrl, pluginName) {\n            AddOnManager.PluginManager.urls[pluginName] = pluginBaseUrl;\n          });\n        }\n      },\n      init: function (settings) {\n        var self = this;\n        var result;\n        var invalidInlineTargets = Tools.makeMap('area base basefont br col frame hr img input isindex link meta param embed source wbr track ' + 'colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu', ' ');\n        var isInvalidInlineTarget = function (settings, elm) {\n          return settings.inline && elm.tagName.toLowerCase() in invalidInlineTargets;\n        };\n        var createId = function (elm) {\n          var id = elm.id;\n          if (!id) {\n            id = get$9(elm, 'name').filter(function (name) {\n              return !DOM.get(name);\n            }).getOrThunk(DOM.uniqueId);\n            elm.setAttribute('id', id);\n          }\n          return id;\n        };\n        var execCallback = function (name) {\n          var callback = settings[name];\n          if (!callback) {\n            return;\n          }\n          return callback.apply(self, []);\n        };\n        var hasClass = function (elm, className) {\n          return className.constructor === RegExp ? className.test(elm.className) : DOM.hasClass(elm, className);\n        };\n        var findTargets = function (settings) {\n          var targets = [];\n          if (Env.browser.isIE() && Env.browser.version.major < 11) {\n            initError('TinyMCE does not support the browser you are using. For a list of supported' + ' browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/');\n            return [];\n          } else if (isQuirksMode) {\n            initError('Failed to initialize the editor as the document is not in standards mode. ' + 'TinyMCE requires standards mode.');\n            return [];\n          }\n          if (settings.types) {\n            each$1(settings.types, function (type) {\n              targets = targets.concat(DOM.select(type.selector));\n            });\n            return targets;\n          } else if (settings.selector) {\n            return DOM.select(settings.selector);\n          } else if (settings.target) {\n            return [settings.target];\n          }\n          switch (settings.mode) {\n          case 'exact':\n            var l = settings.elements || '';\n            if (l.length > 0) {\n              each$1(explode(l), function (id) {\n                var elm = DOM.get(id);\n                if (elm) {\n                  targets.push(elm);\n                } else {\n                  each$1(document.forms, function (f) {\n                    each$1(f.elements, function (e) {\n                      if (e.name === id) {\n                        id = 'mce_editor_' + instanceCounter++;\n                        DOM.setAttrib(e, 'id', id);\n                        targets.push(e);\n                      }\n                    });\n                  });\n                }\n              });\n            }\n            break;\n          case 'textareas':\n          case 'specific_textareas':\n            each$1(DOM.select('textarea'), function (elm) {\n              if (settings.editor_deselector && hasClass(elm, settings.editor_deselector)) {\n                return;\n              }\n              if (!settings.editor_selector || hasClass(elm, settings.editor_selector)) {\n                targets.push(elm);\n              }\n            });\n            break;\n          }\n          return targets;\n        };\n        var provideResults = function (editors) {\n          result = editors;\n        };\n        var initEditors = function () {\n          var initCount = 0;\n          var editors = [];\n          var targets;\n          var createEditor = function (id, settings, targetElm) {\n            var editor = new Editor(id, settings, self);\n            editors.push(editor);\n            editor.on('init', function () {\n              if (++initCount === targets.length) {\n                provideResults(editors);\n              }\n            });\n            editor.targetElm = editor.targetElm || targetElm;\n            editor.render();\n          };\n          DOM.unbind(window, 'ready', initEditors);\n          execCallback('onpageload');\n          targets = DomQuery.unique(findTargets(settings));\n          if (settings.types) {\n            each$1(settings.types, function (type) {\n              Tools.each(targets, function (elm) {\n                if (DOM.is(elm, type.selector)) {\n                  createEditor(createId(elm), extend$2({}, settings, type), elm);\n                  return false;\n                }\n                return true;\n              });\n            });\n            return;\n          }\n          Tools.each(targets, function (elm) {\n            purgeDestroyedEditor(self.get(elm.id));\n          });\n          targets = Tools.grep(targets, function (elm) {\n            return !self.get(elm.id);\n          });\n          if (targets.length === 0) {\n            provideResults([]);\n          } else {\n            each$1(targets, function (elm) {\n              if (isInvalidInlineTarget(settings, elm)) {\n                initError('Could not initialize inline editor on invalid inline target element', elm);\n              } else {\n                createEditor(createId(elm), settings, elm);\n              }\n            });\n          }\n        };\n        self.settings = settings;\n        DOM.bind(window, 'ready', initEditors);\n        return new promiseObj(function (resolve) {\n          if (result) {\n            resolve(result);\n          } else {\n            provideResults = function (editors) {\n              resolve(editors);\n            };\n          }\n        });\n      },\n      get: function (id) {\n        if (arguments.length === 0) {\n          return editors.slice(0);\n        } else if (isString$1(id)) {\n          return find$3(editors, function (editor) {\n            return editor.id === id;\n          }).getOr(null);\n        } else if (isNumber(id)) {\n          return editors[id] ? editors[id] : null;\n        } else {\n          return null;\n        }\n      },\n      add: function (editor) {\n        var self = this;\n        var existingEditor = legacyEditors[editor.id];\n        if (existingEditor === editor) {\n          return editor;\n        }\n        if (self.get(editor.id) === null) {\n          if (isValidLegacyKey(editor.id)) {\n            legacyEditors[editor.id] = editor;\n          }\n          legacyEditors.push(editor);\n          editors.push(editor);\n        }\n        toggleGlobalEvents(true);\n        self.activeEditor = editor;\n        self.fire('AddEditor', { editor: editor });\n        if (!beforeUnloadDelegate) {\n          beforeUnloadDelegate = function (e) {\n            var event = self.fire('BeforeUnload');\n            if (event.returnValue) {\n              e.preventDefault();\n              e.returnValue = event.returnValue;\n              return event.returnValue;\n            }\n          };\n          window.addEventListener('beforeunload', beforeUnloadDelegate);\n        }\n        return editor;\n      },\n      createEditor: function (id, settings) {\n        return this.add(new Editor(id, settings, this));\n      },\n      remove: function (selector) {\n        var self = this;\n        var i, editor;\n        if (!selector) {\n          for (i = editors.length - 1; i >= 0; i--) {\n            self.remove(editors[i]);\n          }\n          return;\n        }\n        if (isString$1(selector)) {\n          each$1(DOM.select(selector), function (elm) {\n            editor = self.get(elm.id);\n            if (editor) {\n              self.remove(editor);\n            }\n          });\n          return;\n        }\n        editor = selector;\n        if (isNull(self.get(editor.id))) {\n          return null;\n        }\n        if (removeEditorFromList(editor)) {\n          self.fire('RemoveEditor', { editor: editor });\n        }\n        if (editors.length === 0) {\n          window.removeEventListener('beforeunload', beforeUnloadDelegate);\n        }\n        editor.remove();\n        toggleGlobalEvents(editors.length > 0);\n        return editor;\n      },\n      execCommand: function (cmd, ui, value) {\n        var self = this, editor = self.get(value);\n        switch (cmd) {\n        case 'mceAddEditor':\n          if (!self.get(value)) {\n            new Editor(value, self.settings, self).render();\n          }\n          return true;\n        case 'mceRemoveEditor':\n          if (editor) {\n            editor.remove();\n          }\n          return true;\n        case 'mceToggleEditor':\n          if (!editor) {\n            self.execCommand('mceAddEditor', false, value);\n            return true;\n          }\n          if (editor.isHidden()) {\n            editor.show();\n          } else {\n            editor.hide();\n          }\n          return true;\n        }\n        if (self.activeEditor) {\n          return self.activeEditor.execCommand(cmd, ui, value);\n        }\n        return false;\n      },\n      triggerSave: function () {\n        each$1(editors, function (editor) {\n          editor.save();\n        });\n      },\n      addI18n: function (code, items) {\n        I18n.add(code, items);\n      },\n      translate: function (text) {\n        return I18n.translate(text);\n      },\n      setActive: function (editor) {\n        var activeEditor = this.activeEditor;\n        if (this.activeEditor !== editor) {\n          if (activeEditor) {\n            activeEditor.fire('deactivate', { relatedTarget: editor });\n          }\n          editor.fire('activate', { relatedTarget: activeEditor });\n        }\n        this.activeEditor = editor;\n      },\n      _setBaseUrl: function (baseUrl) {\n        this.baseURL = new URI(this.documentBaseURL).toAbsolute(baseUrl.replace(/\\/+$/, ''));\n        this.baseURI = new URI(this.baseURL);\n      }\n    });\n    EditorManager.setup();\n\n    var min$1 = Math.min, max$1 = Math.max, round$1 = Math.round;\n    var relativePosition = function (rect, targetRect, rel) {\n      var x = targetRect.x;\n      var y = targetRect.y;\n      var w = rect.w;\n      var h = rect.h;\n      var targetW = targetRect.w;\n      var targetH = targetRect.h;\n      var relChars = (rel || '').split('');\n      if (relChars[0] === 'b') {\n        y += targetH;\n      }\n      if (relChars[1] === 'r') {\n        x += targetW;\n      }\n      if (relChars[0] === 'c') {\n        y += round$1(targetH / 2);\n      }\n      if (relChars[1] === 'c') {\n        x += round$1(targetW / 2);\n      }\n      if (relChars[3] === 'b') {\n        y -= h;\n      }\n      if (relChars[4] === 'r') {\n        x -= w;\n      }\n      if (relChars[3] === 'c') {\n        y -= round$1(h / 2);\n      }\n      if (relChars[4] === 'c') {\n        x -= round$1(w / 2);\n      }\n      return create$2(x, y, w, h);\n    };\n    var findBestRelativePosition = function (rect, targetRect, constrainRect, rels) {\n      var pos, i;\n      for (i = 0; i < rels.length; i++) {\n        pos = relativePosition(rect, targetRect, rels[i]);\n        if (pos.x >= constrainRect.x && pos.x + pos.w <= constrainRect.w + constrainRect.x && pos.y >= constrainRect.y && pos.y + pos.h <= constrainRect.h + constrainRect.y) {\n          return rels[i];\n        }\n      }\n      return null;\n    };\n    var inflate = function (rect, w, h) {\n      return create$2(rect.x - w, rect.y - h, rect.w + w * 2, rect.h + h * 2);\n    };\n    var intersect = function (rect, cropRect) {\n      var x1 = max$1(rect.x, cropRect.x);\n      var y1 = max$1(rect.y, cropRect.y);\n      var x2 = min$1(rect.x + rect.w, cropRect.x + cropRect.w);\n      var y2 = min$1(rect.y + rect.h, cropRect.y + cropRect.h);\n      if (x2 - x1 < 0 || y2 - y1 < 0) {\n        return null;\n      }\n      return create$2(x1, y1, x2 - x1, y2 - y1);\n    };\n    var clamp = function (rect, clampRect, fixedSize) {\n      var x1 = rect.x;\n      var y1 = rect.y;\n      var x2 = rect.x + rect.w;\n      var y2 = rect.y + rect.h;\n      var cx2 = clampRect.x + clampRect.w;\n      var cy2 = clampRect.y + clampRect.h;\n      var underflowX1 = max$1(0, clampRect.x - x1);\n      var underflowY1 = max$1(0, clampRect.y - y1);\n      var overflowX2 = max$1(0, x2 - cx2);\n      var overflowY2 = max$1(0, y2 - cy2);\n      x1 += underflowX1;\n      y1 += underflowY1;\n      if (fixedSize) {\n        x2 += underflowX1;\n        y2 += underflowY1;\n        x1 -= overflowX2;\n        y1 -= overflowY2;\n      }\n      x2 -= overflowX2;\n      y2 -= overflowY2;\n      return create$2(x1, y1, x2 - x1, y2 - y1);\n    };\n    var create$2 = function (x, y, w, h) {\n      return {\n        x: x,\n        y: y,\n        w: w,\n        h: h\n      };\n    };\n    var fromClientRect = function (clientRect) {\n      return create$2(clientRect.left, clientRect.top, clientRect.width, clientRect.height);\n    };\n    var Rect = {\n      inflate: inflate,\n      relativePosition: relativePosition,\n      findBestRelativePosition: findBestRelativePosition,\n      intersect: intersect,\n      clamp: clamp,\n      create: create$2,\n      fromClientRect: fromClientRect\n    };\n\n    var awaiter = function (resolveCb, rejectCb, timeout) {\n      if (timeout === void 0) {\n        timeout = 1000;\n      }\n      var done = false;\n      var timer = null;\n      var complete = function (completer) {\n        return function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          if (!done) {\n            done = true;\n            if (timer !== null) {\n              clearTimeout(timer);\n              timer = null;\n            }\n            completer.apply(null, args);\n          }\n        };\n      };\n      var resolve = complete(resolveCb);\n      var reject = complete(rejectCb);\n      var start = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!done && timer === null) {\n          timer = setTimeout(function () {\n            return reject.apply(null, args);\n          }, timeout);\n        }\n      };\n      return {\n        start: start,\n        resolve: resolve,\n        reject: reject\n      };\n    };\n    var create$1 = function () {\n      var tasks = {};\n      var resultFns = {};\n      var load = function (id, url) {\n        var loadErrMsg = 'Script at URL \"' + url + '\" failed to load';\n        var runErrMsg = 'Script at URL \"' + url + '\" did not call `tinymce.Resource.add(\\'' + id + '\\', data)` within 1 second';\n        if (tasks[id] !== undefined) {\n          return tasks[id];\n        } else {\n          var task = new promiseObj(function (resolve, reject) {\n            var waiter = awaiter(resolve, reject);\n            resultFns[id] = waiter.resolve;\n            ScriptLoader.ScriptLoader.loadScript(url, function () {\n              return waiter.start(runErrMsg);\n            }, function () {\n              return waiter.reject(loadErrMsg);\n            });\n          });\n          tasks[id] = task;\n          return task;\n        }\n      };\n      var add = function (id, data) {\n        if (resultFns[id] !== undefined) {\n          resultFns[id](data);\n          delete resultFns[id];\n        }\n        tasks[id] = promiseObj.resolve(data);\n      };\n      return {\n        load: load,\n        add: add\n      };\n    };\n    var Resource = create$1();\n\n    var each = Tools.each, extend$1 = Tools.extend;\n    var extendClass, initializing;\n    var Class = function () {\n    };\n    Class.extend = extendClass = function (props) {\n      var self = this;\n      var _super = self.prototype;\n      var Class = function () {\n        var i, mixins, mixin;\n        var self = this;\n        if (!initializing) {\n          if (self.init) {\n            self.init.apply(self, arguments);\n          }\n          mixins = self.Mixins;\n          if (mixins) {\n            i = mixins.length;\n            while (i--) {\n              mixin = mixins[i];\n              if (mixin.init) {\n                mixin.init.apply(self, arguments);\n              }\n            }\n          }\n        }\n      };\n      var dummy = function () {\n        return this;\n      };\n      var createMethod = function (name, fn) {\n        return function () {\n          var self = this;\n          var tmp = self._super;\n          self._super = _super[name];\n          var ret = fn.apply(self, arguments);\n          self._super = tmp;\n          return ret;\n        };\n      };\n      initializing = true;\n      var prototype = new self();\n      initializing = false;\n      if (props.Mixins) {\n        each(props.Mixins, function (mixin) {\n          for (var name_1 in mixin) {\n            if (name_1 !== 'init') {\n              props[name_1] = mixin[name_1];\n            }\n          }\n        });\n        if (_super.Mixins) {\n          props.Mixins = _super.Mixins.concat(props.Mixins);\n        }\n      }\n      if (props.Methods) {\n        each(props.Methods.split(','), function (name) {\n          props[name] = dummy;\n        });\n      }\n      if (props.Properties) {\n        each(props.Properties.split(','), function (name) {\n          var fieldName = '_' + name;\n          props[name] = function (value) {\n            var self = this;\n            if (value !== undefined) {\n              self[fieldName] = value;\n              return self;\n            }\n            return self[fieldName];\n          };\n        });\n      }\n      if (props.Statics) {\n        each(props.Statics, function (func, name) {\n          Class[name] = func;\n        });\n      }\n      if (props.Defaults && _super.Defaults) {\n        props.Defaults = extend$1({}, _super.Defaults, props.Defaults);\n      }\n      each$j(props, function (member, name) {\n        if (typeof member === 'function' && _super[name]) {\n          prototype[name] = createMethod(name, member);\n        } else {\n          prototype[name] = member;\n        }\n      });\n      Class.prototype = prototype;\n      Class.constructor = Class;\n      Class.extend = extendClass;\n      return Class;\n    };\n\n    var min = Math.min, max = Math.max, round = Math.round;\n    var Color = function (value) {\n      var self = {};\n      var r = 0, g = 0, b = 0;\n      var rgb2hsv = function (r, g, b) {\n        var h, s, v;\n        h = 0;\n        s = 0;\n        v = 0;\n        r = r / 255;\n        g = g / 255;\n        b = b / 255;\n        var minRGB = min(r, min(g, b));\n        var maxRGB = max(r, max(g, b));\n        if (minRGB === maxRGB) {\n          v = minRGB;\n          return {\n            h: 0,\n            s: 0,\n            v: v * 100\n          };\n        }\n        var d = r === minRGB ? g - b : b === minRGB ? r - g : b - r;\n        h = r === minRGB ? 3 : b === minRGB ? 1 : 5;\n        h = 60 * (h - d / (maxRGB - minRGB));\n        s = (maxRGB - minRGB) / maxRGB;\n        v = maxRGB;\n        return {\n          h: round(h),\n          s: round(s * 100),\n          v: round(v * 100)\n        };\n      };\n      var hsvToRgb = function (hue, saturation, brightness) {\n        hue = (parseInt(hue, 10) || 0) % 360;\n        saturation = parseInt(saturation, 10) / 100;\n        brightness = parseInt(brightness, 10) / 100;\n        saturation = max(0, min(saturation, 1));\n        brightness = max(0, min(brightness, 1));\n        if (saturation === 0) {\n          r = g = b = round(255 * brightness);\n          return;\n        }\n        var side = hue / 60;\n        var chroma = brightness * saturation;\n        var x = chroma * (1 - Math.abs(side % 2 - 1));\n        var match = brightness - chroma;\n        switch (Math.floor(side)) {\n        case 0:\n          r = chroma;\n          g = x;\n          b = 0;\n          break;\n        case 1:\n          r = x;\n          g = chroma;\n          b = 0;\n          break;\n        case 2:\n          r = 0;\n          g = chroma;\n          b = x;\n          break;\n        case 3:\n          r = 0;\n          g = x;\n          b = chroma;\n          break;\n        case 4:\n          r = x;\n          g = 0;\n          b = chroma;\n          break;\n        case 5:\n          r = chroma;\n          g = 0;\n          b = x;\n          break;\n        default:\n          r = g = b = 0;\n        }\n        r = round(255 * (r + match));\n        g = round(255 * (g + match));\n        b = round(255 * (b + match));\n      };\n      var toHex = function () {\n        var hex = function (val) {\n          val = parseInt(val, 10).toString(16);\n          return val.length > 1 ? val : '0' + val;\n        };\n        return '#' + hex(r) + hex(g) + hex(b);\n      };\n      var toRgb = function () {\n        return {\n          r: r,\n          g: g,\n          b: b\n        };\n      };\n      var toHsv = function () {\n        return rgb2hsv(r, g, b);\n      };\n      var parse = function (value) {\n        var matches;\n        if (typeof value === 'object') {\n          if ('r' in value) {\n            r = value.r;\n            g = value.g;\n            b = value.b;\n          } else if ('v' in value) {\n            hsvToRgb(value.h, value.s, value.v);\n          }\n        } else {\n          if (matches = /rgb\\s*\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)[^\\)]*\\)/gi.exec(value)) {\n            r = parseInt(matches[1], 10);\n            g = parseInt(matches[2], 10);\n            b = parseInt(matches[3], 10);\n          } else if (matches = /#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(value)) {\n            r = parseInt(matches[1], 16);\n            g = parseInt(matches[2], 16);\n            b = parseInt(matches[3], 16);\n          } else if (matches = /#([0-F])([0-F])([0-F])/gi.exec(value)) {\n            r = parseInt(matches[1] + matches[1], 16);\n            g = parseInt(matches[2] + matches[2], 16);\n            b = parseInt(matches[3] + matches[3], 16);\n          }\n        }\n        r = r < 0 ? 0 : r > 255 ? 255 : r;\n        g = g < 0 ? 0 : g > 255 ? 255 : g;\n        b = b < 0 ? 0 : b > 255 ? 255 : b;\n        return self;\n      };\n      if (value) {\n        parse(value);\n      }\n      self.toRgb = toRgb;\n      self.toHsv = toHsv;\n      self.toHex = toHex;\n      self.parse = parse;\n      return self;\n    };\n\n    var serialize = function (obj) {\n      var data = JSON.stringify(obj);\n      if (!isString$1(data)) {\n        return data;\n      }\n      return data.replace(/[\\u0080-\\uFFFF]/g, function (match) {\n        var hexCode = match.charCodeAt(0).toString(16);\n        return '\\\\u' + '0000'.substring(hexCode.length) + hexCode;\n      });\n    };\n    var JSONUtils = {\n      serialize: serialize,\n      parse: function (text) {\n        try {\n          return JSON.parse(text);\n        } catch (ex) {\n        }\n      }\n    };\n\n    var JSONP = {\n      callbacks: {},\n      count: 0,\n      send: function (settings) {\n        var self = this, dom = DOMUtils.DOM, count = settings.count !== undefined ? settings.count : self.count;\n        var id = 'tinymce_jsonp_' + count;\n        self.callbacks[count] = function (json) {\n          dom.remove(id);\n          delete self.callbacks[count];\n          settings.callback(json);\n        };\n        dom.add(dom.doc.body, 'script', {\n          id: id,\n          src: settings.url,\n          type: 'text/javascript'\n        });\n        self.count++;\n      }\n    };\n\n    var XHR = __assign(__assign({}, Observable), {\n      send: function (settings) {\n        var xhr, count = 0;\n        var ready = function () {\n          if (!settings.async || xhr.readyState === 4 || count++ > 10000) {\n            if (settings.success && count < 10000 && xhr.status === 200) {\n              settings.success.call(settings.success_scope, '' + xhr.responseText, xhr, settings);\n            } else if (settings.error) {\n              settings.error.call(settings.error_scope, count > 10000 ? 'TIMED_OUT' : 'GENERAL', xhr, settings);\n            }\n            xhr = null;\n          } else {\n            Delay.setTimeout(ready, 10);\n          }\n        };\n        settings.scope = settings.scope || this;\n        settings.success_scope = settings.success_scope || settings.scope;\n        settings.error_scope = settings.error_scope || settings.scope;\n        settings.async = settings.async !== false;\n        settings.data = settings.data || '';\n        XHR.fire('beforeInitialize', { settings: settings });\n        xhr = new XMLHttpRequest();\n        if (xhr.overrideMimeType) {\n          xhr.overrideMimeType(settings.content_type);\n        }\n        xhr.open(settings.type || (settings.data ? 'POST' : 'GET'), settings.url, settings.async);\n        if (settings.crossDomain) {\n          xhr.withCredentials = true;\n        }\n        if (settings.content_type) {\n          xhr.setRequestHeader('Content-Type', settings.content_type);\n        }\n        if (settings.requestheaders) {\n          Tools.each(settings.requestheaders, function (header) {\n            xhr.setRequestHeader(header.key, header.value);\n          });\n        }\n        xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n        xhr = XHR.fire('beforeSend', {\n          xhr: xhr,\n          settings: settings\n        }).xhr;\n        xhr.send(settings.data);\n        if (!settings.async) {\n          return ready();\n        }\n        Delay.setTimeout(ready, 10);\n      }\n    });\n\n    var extend = Tools.extend;\n    var JSONRequest = function () {\n      function JSONRequest(settings) {\n        this.settings = extend({}, settings);\n        this.count = 0;\n      }\n      JSONRequest.sendRPC = function (o) {\n        return new JSONRequest().send(o);\n      };\n      JSONRequest.prototype.send = function (args) {\n        var ecb = args.error, scb = args.success;\n        var xhrArgs = extend(this.settings, args);\n        xhrArgs.success = function (c, x) {\n          c = JSONUtils.parse(c);\n          if (typeof c === 'undefined') {\n            c = { error: 'JSON Parse error.' };\n          }\n          if (c.error) {\n            ecb.call(xhrArgs.error_scope || xhrArgs.scope, c.error, x);\n          } else {\n            scb.call(xhrArgs.success_scope || xhrArgs.scope, c.result);\n          }\n        };\n        xhrArgs.error = function (ty, x) {\n          if (ecb) {\n            ecb.call(xhrArgs.error_scope || xhrArgs.scope, ty, x);\n          }\n        };\n        xhrArgs.data = JSONUtils.serialize({\n          id: args.id || 'c' + this.count++,\n          method: args.method,\n          params: args.params\n        });\n        xhrArgs.content_type = 'application/json';\n        XHR.send(xhrArgs);\n      };\n      return JSONRequest;\n    }();\n\n    var create = function () {\n      return function () {\n        var data = {};\n        var keys = [];\n        var storage = {\n          getItem: function (key) {\n            var item = data[key];\n            return item ? item : null;\n          },\n          setItem: function (key, value) {\n            keys.push(key);\n            data[key] = String(value);\n          },\n          key: function (index) {\n            return keys[index];\n          },\n          removeItem: function (key) {\n            keys = keys.filter(function (k) {\n              return k === key;\n            });\n            delete data[key];\n          },\n          clear: function () {\n            keys = [];\n            data = {};\n          },\n          length: 0\n        };\n        Object.defineProperty(storage, 'length', {\n          get: function () {\n            return keys.length;\n          },\n          configurable: false,\n          enumerable: false\n        });\n        return storage;\n      }();\n    };\n\n    var localStorage;\n    try {\n      var test = '__storage_test__';\n      localStorage = window.localStorage;\n      localStorage.setItem(test, test);\n      localStorage.removeItem(test);\n    } catch (e) {\n      localStorage = create();\n    }\n    var LocalStorage = localStorage;\n\n    var publicApi = {\n      geom: { Rect: Rect },\n      util: {\n        Promise: promiseObj,\n        Delay: Delay,\n        Tools: Tools,\n        VK: VK,\n        URI: URI,\n        Class: Class,\n        EventDispatcher: EventDispatcher,\n        Observable: Observable,\n        I18n: I18n,\n        XHR: XHR,\n        JSON: JSONUtils,\n        JSONRequest: JSONRequest,\n        JSONP: JSONP,\n        LocalStorage: LocalStorage,\n        Color: Color,\n        ImageUploader: ImageUploader\n      },\n      dom: {\n        EventUtils: EventUtils,\n        Sizzle: Sizzle,\n        DomQuery: DomQuery,\n        TreeWalker: DomTreeWalker,\n        TextSeeker: TextSeeker,\n        DOMUtils: DOMUtils,\n        ScriptLoader: ScriptLoader,\n        RangeUtils: RangeUtils,\n        Serializer: DomSerializer,\n        StyleSheetLoader: StyleSheetLoader,\n        ControlSelection: ControlSelection,\n        BookmarkManager: BookmarkManager,\n        Selection: EditorSelection,\n        Event: EventUtils.Event\n      },\n      html: {\n        Styles: Styles,\n        Entities: Entities,\n        Node: AstNode,\n        Schema: Schema,\n        SaxParser: SaxParser,\n        DomParser: DomParser,\n        Writer: Writer,\n        Serializer: HtmlSerializer\n      },\n      Env: Env,\n      AddOnManager: AddOnManager,\n      Annotator: Annotator,\n      Formatter: Formatter,\n      UndoManager: UndoManager,\n      EditorCommands: EditorCommands,\n      WindowManager: WindowManager,\n      NotificationManager: NotificationManager,\n      EditorObservable: EditorObservable,\n      Shortcuts: Shortcuts,\n      Editor: Editor,\n      FocusManager: FocusManager,\n      EditorManager: EditorManager,\n      DOM: DOMUtils.DOM,\n      ScriptLoader: ScriptLoader.ScriptLoader,\n      PluginManager: PluginManager,\n      ThemeManager: ThemeManager,\n      IconManager: IconManager,\n      Resource: Resource,\n      trim: Tools.trim,\n      isArray: Tools.isArray,\n      is: Tools.is,\n      toArray: Tools.toArray,\n      makeMap: Tools.makeMap,\n      each: Tools.each,\n      map: Tools.map,\n      grep: Tools.grep,\n      inArray: Tools.inArray,\n      extend: Tools.extend,\n      create: Tools.create,\n      walk: Tools.walk,\n      createNS: Tools.createNS,\n      resolve: Tools.resolve,\n      explode: Tools.explode,\n      _addCacheSuffix: Tools._addCacheSuffix,\n      isOpera: Env.opera,\n      isWebKit: Env.webkit,\n      isIE: Env.ie,\n      isGecko: Env.gecko,\n      isMac: Env.mac\n    };\n    var tinymce = Tools.extend(EditorManager, publicApi);\n\n    var exportToModuleLoaders = function (tinymce) {\n      if (typeof module === 'object') {\n        try {\n          module.exports = tinymce;\n        } catch (_) {\n        }\n      }\n    };\n    var exportToWindowGlobal = function (tinymce) {\n      window.tinymce = tinymce;\n      window.tinyMCE = tinymce;\n    };\n    exportToWindowGlobal(tinymce);\n    exportToModuleLoaders(tinymce);\n\n}());\n"],"names":["tinymce","IconManager","add","icons","call","id","global$7","util","Tools","resolve","global$6","isType","type","value","t","x","Array","prototype","isPrototypeOf","constructor","name","String","isSimpleType","isString","isArray","isNull","a","isBoolean","isFunction","noop","constant","tripleEquals","b","never","always","none","NONE","fold","n","_s","isSome","isNone","getOr","getOrThunk","thunk","getOrDie","msg","Error","getOrNull","getOrUndefined","undefined","or","orThunk","map","each","bind","exists","forall","filter","toArray","toString","some","constant_a","self","me","f","s","Optional","from","nativeIndexOf","indexOf","nativePush","push","flatten","xs","r","i","len","length","apply","findMap","arr","is","lhs","rhs","comparator","left","cat","someIf","assumeExternalTargets","editor","externalTargets","getParam","getDefaultLinkTarget","getTargetList","getRelList","shouldShowLinkTitle","allowUnsafeLinkTarget","getDefaultLinkProtocol","global$5","getValue","item","sanitizeList","list","extractValue","out","text","title","getText","menu","items","sanitizeWith","extracter","ListOptions","label","__assign","Object","assign","arguments","p","hasOwnProperty","this","keys","has","obj","key","global$4","global$3","isAnchor","elm","nodeName","toLowerCase","isLink","getHref","collectNodesInRange","rng","predicate","collapsed","contents","cloneContents","walker","firstChild","elements","current","next","hasProtocol","url","test","getAttribute","applyRelTargetRules","rel","isUnsafe","rules","rels","split","removeTargetRules","val","inArray","newRels","concat","addTargetRules","trim","sort","join","getAnchorElement","selectedElm","selection","getNode","isImageFigure","dom","select","getParent","getAnchorText","anchorElm","innerText","textContent","getContent","format","replace","hasLinks","grep","isOnlyTextSelected","inlineTextElements","schema","getTextInlineElements","getRng","nodeType","className","linkDomMutation","attachState","data","linkAttrs","newLinkAttrs","newRel","target","href","handleExternalTargets","applyLinkOverrides","acc","each$1","getLinkAttrs","undoManager","transact","attach","focus","setAttribs","updateLink","linkImageFigure","execCommand","insertContent","createHTML","encode","createLink","unwrapOptions","cls","class","pred","onTrue","onFalse","props","k","internalFilter","v","_k","link","sanitizedData","isDomSafe","settings","sanitizeData","hasPlugin","unlink","node","unlinkImageFigure","bookmark","getBookmark","cloneRange","startAnchorElm","startContainer","getBody","endAnchorElm","endContainer","setStartBefore","setEndAfter","setRng","moveToBookmark","unlinkSelection","unlinkDomMutation","fig","img","getParents","parentNode","insertBefore","remove","attrs","create","appendChild","findTextByValue","catalog","isListGroup","DialogChanges","initialData","linkCatalog","persistentData","onCatalogChange","change","catalogs","fieldName","anchor","persistentText","hasPersistentText","meta","getDelta","onChange","getData","getTitleFromUrlChange","ts","rawIndexOf","global$2","global$1","tryEmailTransform","message","preprocess","oldData","tryProtocolTransform","defaultLinkProtocol","AnchorListOptions","anchorNodes","anchors","ClassListOptions","getLinkClassList","global","RelOptions","initialTarget","isTargetBlank_1","fallbacks","TargetOptions","nonEmptyAttr","elem","getAttrib","DialogInfo","linkNode","extractor","convertURL","linkList","getLinkList","callback","send","success","JSON","parse","err","parseJson","error","_","output","then","optItems","LinkListOptions","links","linkClass","extractFromAnchor","targets","classes","optNode","flags","titleEnabled","open$1","anchorNode","collectData","info","onSubmit","api","close","getChangedValue","changedData","transform","setEditorTimeout","windowManager","confirm","state","delayedConfirm","DialogConfirms","pData","handleSubmit","displayText","titleText","defaultTarget","original","getInitialData","dialogDelta","size","body","filetype","buttons","primary","_a","newData","setData","makeDialog","spec","open","getLink","getSelectedLink","getStart","gotoLink","targetEl","$","scrollIntoView","document","createElement","evt","createEvent","initMouseEvent","window","dispatchEvent","removeChild","appendClickRemove","openDialog","gotoSelectedLink","toggleState","toggler","on","off","toggleActiveState","updateState","setActive","mode","isReadOnly","toggleEnabledState","setDisabled","toggleUnlinkState","hasLinks$1","parents","e","ui","registry","addToggleButton","icon","tooltip","onAction","onSetup","addButton","setupButtons","addMenuItem","shortcut","setupMenuItems","addContextMenu","update","element","setupContextMenu","onSetupLink","buttonApi","addContextForm","launch","hasContextToolbar","initValue","commands","formApi","onlyText","getLinkText","collapse","collapseSelectionToEnd","hide","setupContextToolbars","metaKeyPressed","preventDefault","keyCode","altKey","shiftKey","ctrlKey","metaKey","hasOnlyAltModifier","setupGotoLinks","addCommand","useQuickLink","fire","toolbarKey","register","addShortcut","setup","isType$1","eq$1","isObject","isUndefined","isNullable","isNonNullable","isNumber","isArrayOf","compose","fa","fb","args","_i","constant$1","identity$1","curry","fn","initialArgs","restArgs","all","not","die","global$g","__rest","getOwnPropertySymbols","propertyIsEnumerable","__spreadArray","to","pack","ar","l","slice","nativeSlice","contains$2","range$2","num","chunk$1","array","map$2","partition$3","pass","fail","filter$2","foldr","eachr","foldl","find$5","until","findUntil","findIndex$1","bind$3","reverse","difference","a1","a2","mapToObject","pure$2","copy","get$f","head","last$2","hasOwnProperty$1","map$1","tupleMap","tuple","mapToArray","find$4","values","get$e","has$2","hasNonNullableKey","is$1","lift2","oa","ob","checkRange","str","substr","start","contains$1","endsWith","suffix","trim$1","isNotEmpty","isSupported$1","style","getPropertyValue","fromDom","SugarElement","html","scope","div","innerHTML","hasChildNodes","childNodes","console","tag","createTextNode","Function","SimpleResultType","name$2","isElement$2","isText$1","isDocument","isDocumentFragment","cached","called","unknown$3","nu$d","major","minor","Version","nu","detect","versionRegexes","agent","cleanedAgent","regexes","firstMatch","group","Number","find$3","unknown","detect$3","candidates","userAgent","candidate","search","normalVersionRegex","checkContains","uastring","browsers","brand","oses","PlatformInfo","edge","chrome","opera","firefox","safari","nu$c","version","isBrowser","isEdge","isChrome","isIE","isOpera","isFirefox","isSafari","Browser","windows","android","linux","solaris","freebsd","chromeos","nu$b","isOS","isWindows","isiOS","isAndroid","isOSX","isLinux","isSolaris","isFreeBSD","isChromeOS","OperatingSystem","mediaMatch","query","matchMedia","matches","platform","userAgentDataOpt","browser","userAgentData","brands","uaBrand","lcBrand","parseInt","detectBrowser$1","detectBrowser","os","detectOs","deviceType","isiPad","isiPhone","isMobile","isTouch","isTablet","isPhone","iOSwebview","isDesktop","isWebView","DeviceType","PlatformDetection","navigator","detect$1","selector","msMatchesSelector","webkitMatchesSelector","mozMatchesSelector","bypassSelector","childElementCount","eq","e1","e2","contains","match","compareDocumentPosition","Node","DOCUMENT_POSITION_CONTAINED_BY","ieContains","d1","d2","regularContains","owner$4","ownerDocument","documentOrOwner","dos","documentElement","defaultView","parent","offsetParent","children","child$2","index","cs","spot","offset","leaf","isShadowRoot","host","supported","Element","attachShadow","getRootNode","isSupported","getContentContainer","getShadowRoot","getShadowHost","inBody","fbc","fab","doc","rawSet","setAttribute","set$8","setAll$1","get$d","getOpt","has$1","hasAttribute","remove$7","removeAttribute","internalSet","property","setProperty","internalRemove","removeProperty","set$7","setAll","css","setOptions","get$c","getComputedStyle","getUnsafeProperty","getRaw","raw","getAllRaw","ruleName","isValidValue","remove$6","reflow","offsetWidth","Dimension","getOffset","get","parseFloat","aggregate","properties","isNaN","set","h","getOuter","max","cumulativeInclusions","api$3","getBoundingClientRect","height","offsetHeight","get$b","getOuter$2","r$1","top","translate","y","SugarPosition","firstDefinedOrZero","absolute$3","win","offsetLeft","offsetTop","scrollTop","pageYOffset","scrollLeft","pageXOffset","clientTop","clientLeft","viewport$1","box","boxPosition","api$2","get$a","getOuter$1","fromRawEvent$1","rawEvent","event","el","shadowRoot","isOpenShadowHost","composed","composedPath","getOriginalEventTarget","stop","stopPropagation","prevent","kill","mkEvent","clientX","clientY","binder","handler","useCapture","wrapped","handle","addEventListener","unbind","removeEventListener","before$2","marker","after$2","sibling","nextSibling","append$2","prepend$1","firstChild$1","append$1","empty","rogue","remove$5","unwrap","wrapper","children$1","get$9","_DOC","scrollTo","bounds$1","width","right","bottom","getBounds$3","_win","scroll","get$8","clientWidth","clientHeight","visualViewport","Math","pageLeft","pageTop","walkUp","navigation","view","owner","rest","Navigation","freeze","__proto__","frameElement","find$2","path","d","paths","pathTo","frames","loc","bounds","box$1","xy","w","absolute$2","position","value$3","o","isValue","isError","_opt","_f","onValue","mapError","toOptional","error$1","onError","Result","fromOption","opt","fold$1","res","stype","serror","svalue","Value","SimpleResult","field$2","newKey","presence","prop","ifField","ifCustom","instantiator","baseMerge","merger","objects","ret","j","curObject","deepMerge","old","merge$1","defaultedThunk","fallbackThunk","process","defaulted$1","fallback","mergeWithThunk","baseThunk","ResultCombine","errors","partitions","results","formatObj","input","stringify","nu$a","getErrorInfo","value$2","validator","extract","custom","anyValue$1","fallbackAccess","bundle","extractField","field","av","bundleAsOption","optValue","ov","result","missingRequired","requiredAccess","optionAccess","optionDefaultedAccess","valueThunk","getDelegate","getSetKeys","filter$1","objOfOnly","fields","delegate","objOf","fieldNames","extra","unsupported","unsupportedFields","fields_1","extractFields","fieldStrings","_okey","_presence","_instantiator","arrOf","oneOf","props_1","setOf$1","keys$1","validatedKeys","validateKeys","validKeys","vk","arrOfObj","anyValue","typedValue","expectedType","actualType","number","string","boolean","functionProcessor","isPostMessageable","every","postMessageable","choose$2","branches","missingKey","chosen","ch","branch","missingBranch","vp","chooseFrom","valueOf","setOf","asRaw","errs","extraction","errInfo","formatError","asRawOrDie$1","es","choose$1","field$1","customField","validateEnum","required$1","requiredOf","requiredNumber","requiredString","requiredStringEnum","requiredFunction","requiredObjOf","objSchema","requiredArrayOfObj","objFields","requiredArrayOf","option","optionOf","optionNumber","optionString","optionFunction","optionArrayOf","optionObjOf","defaulted","defaultedOf","defaultedNumber","defaultedString","defaultedStringEnum","defaultedBoolean","defaultedFunction","defaultedArrayOf","defaultedObjOf","Cell","initial","Adt","cases","constructors","adt","acase","count","argLength","foldArgs","branchKeys","reqKey","log","params","bothErrors","firstError","secondError","bothValues","_a$2","base","wrap$1","wrap$2","wrapAll","keyvalues","kv","wrapAll$1","ensureIsRoot","isRoot","ancestor$2","transformed","closest$4","isSource","component","simulatedEvent","defaultEventHandler","can","abort","run","nu$9","parts","touchstart","touchmove","touchend","touchcancel","mousedown","mousemove","mouseout","mouseup","mouseover","focusin","focusout","keydown","keyup","click","transitioncancel","transitionend","transitionstart","selectstart","prefixName","alloy","tap","focus$4","postBlur","postPaste","receive","execute$5","focusItem","longpress","sandboxClose","typeaheadCancel","systemInit","documentTouchmove","documentTouchend","windowScroll","windowResize","attachedToDom","detachedFromDom","dismissRequested","repositionRequested","focusShifted","slotVisibility","changeTab","dismissTab","highlight$1","dehighlight$1","emit","dispatchWith","emitWith","emitExecute","dispatch","getSystem","triggerEvent","derive$2","configs","run$1","runActionExtra","action","runOnSourceName","redirectToPart","detail","partName","uid","getByUid","redirectee","redirectToUid","partUids","runWithTarget","ev","getByDom","cutter","cut","stopper","runOnSource","runOnAttached","runOnDetached","runOnInit","runOnExecute$1","runOnName","get$7","set$5","content","docDom","fragment","createDocumentFragment","contentElements","fromHtml$1","getHtml","container","clone","cloneNode","isDeep","clone$2","shallow","events$i","originator","isRecursive","warn","DefaultEvents","events","unique","generate$6","prefix","time","Date","getTime","floor","random","prefix$1","idAttr$1","idAttr","writeOnly","defineProperty","writable","read$1","generate$5","make$8","NoContextApi","getComp","getMessage","debugInfo","triggerFocus","triggerEscape","broadcast","broadcastOn","broadcastEvent","build","addToWorld","removeFromWorld","addToGui","removeFromGui","isConnected","singleton$1","cleanParameters","parameters","substring","markAsExtraApi","extraName","endIndex","openBracketIndex","toFunctionAnnotation","premadeTag","premade$1","comp","makeApi","apiFunction","markAsSketchApi","getApis","NoState","init","nu$8","readState","byInnerKey","indexKey","chain","nu$7","attributes","styles","getCurried","descHandler","cHandler","behaviourTuple","fuse","tuples","eventOrder","eventName","order","keyName","sorted","aKey","bKey","aIndex","bIndex","sortKeys","sortedTuples","handlers","all$2","any","fuse$1","c","missingOrderError","combineGroups","byEventName","assembled","rawHandler","read$2","assemble","purpose","uncurried","partition$1","mergeValues","baseBehaviour","schema$z","toEvents","read","attr","supports","classList","add$2","clazz","add$4","add$3","remove$2","remove$4","remove$3","get$6","cleanClass","add$1","remove$1","get$5","set$4","generate$4","behaviours","behaviour","getBehaviours$2","validated","optBlobThunk","blob","config","generateFrom$1","generateFrom","getEvents","bList","bData","baseEvents","behaviourEvents","nameToHandlers","groupByEvents","combine$1","build$2","getMe","systemApi","toInfo","bBlob","getBehaviours$3","getData$2","definition","subject","innerHtml","domChildren","renderToDom","defnA","mod","components","infoModification","domModification","toModification","baseModification","modification","baseMod","modsByBehaviour","exhibit","byAspect","combineObjects","combinedClasses","combinedAttributes","combinedStyles","combine$2","getDomDefinition","subcomponents","hasConfigured","behaviourName","apis","connect","newApi","disconnect","syncComponents","subs","child","text$1","external$2","extSpec","uids","build$1","getPremade","userSpec","specEvents","buildSubcomponents","completeSpec","buildFromSpec","isSketchSpec$1","premade","ClosestOrAncestor","ancestor","EventConfiguration","ancestor$1","closest$3","closest$2","child$1","descendant","querySelector","one","closest$1","manager","ariaId","isPartOf$1","queryElem","dependent","dep","find$1","isAriaPartOf","eventConfig","monitorEvent","patterns","NORMAL","noLogger","LOGGING","logger","sequence","startTime","logEventCut","_name","outcome","logEventStopped","logNoParent","logEventNoHandlers","logEventResponse","write","finishTime","makeEventLogger","STOP","processEvent","menuFields","itemFields","itemSchema$3","_initSize","tieredMenuMarkers","markers$1","required","onPresenceHandler","stack","lines","line","getTrace","onHandler","onKeyboardHandler","onStrictHandler","onStrictKeyboardHandler","output$1","snapshot","initSize","nu$6","bubble","direction","placement","boundsRestriction","labelPrefix","alwaysFit","restriction","adt$a","southeast","southwest","northeast","northwest","south","north","east","west","southeast$3","southwest$3","northeast$3","northwest$3","south$3","north$3","east$3","west$3","cycleBy","delta","min","clamp$1","restrictions","dir","getRestriction","labelPrefix$2","eastX$1","middleX$1","westX$1","northY$2","southY$2","centreY$1","southeast$2","bubbles","southwest$2","northeast$2","northwest$2","north$2","south$2","east$2","eastEdgeX$1","west$2","westEdgeX$1","all$1","allRtl$1","aboveOrBelow","aboveOrBelowRtl","belowOrAbove","belowOrAboveRtl","ActiveReceiving","receiveConfig","channelMap","channels","receivingData","targetChannels","universal","chooseChannels","channelInfo","channelSchema","onReceive","ReceivingSchema","loadEvent","bConfig","bState","_simulatedEvent","revokeBehaviour","doCreate","configSchema","schemaSchema","active","getConfig","wrappedApis","apiF","apiName","bName","markAsBehaviourApi","wrapApi","wrappedExtra","extraF","revoke","prepared","configAsRaw","initialConfig","behaviourInfo","exhibitor","derive$1","capabilities","simpleSchema","create$8","create$9","modeSchema","createModes","modes","createModes$1","branchKey","Receiving","ActivePosition","posConfig","useFixed","getDocument","focus$3","hasFocus","root","activeElement","preserve$1","refocus","focused","descend","child_1","oldFocus","newFocus","NuPositionCss","toPx","applyPositionCss","toOptions","adt$9","relative","fixed","positionWithDirection","posName","decision","decisionRect","rect","decisionX","decisionY","decisionRight","decisionBottom","reposition","origin","toBox","viewport","getBounds","pos","translate$2","outerScroll","AttributeValue","relative$1","fixed$1","placementAttribute","getPlacement","adt$8","fit","nofit","attempt","bubbleOffset","adjustedBounds","applyRestriction","isVerticalAxis","newPos","adjustedLeft","adjustedTop","adjustedRight","adjustedBottom","adjustBounds","newX","newY","boundsX","boundsY","boundsRight","boundsBottom","originInBounds","sizeInBounds","visibleW","visibleH","determinePosition","fits","fittedBox","maxX","maxY","restrictedX","restrictedY","restrictedWidth","restrictedHeight","calcReposition","isPartlyVisible","_b","upAvailable","downAvailable","maxHeight","middle","cataVertical","westAvailable","eastAvailable","maxWidth","cataHorizontal","calcMaxSizes","classesOn","classesOff","layout","testY","singleton","doRevoke","clear","isSet","destroyable","destroy","unbindable","value$1","bind$2","capture","capture$1","fromRawEvent","timerAttr","applyTransitionCss","transition","lastPlacement","shouldTransition","placer","shouldApplyTransitionCss","hasAll","isTransitioning$1","intermediatePosition_1","intermediateCssOptions","intermediate","round","toFixed","newValue","hasChanges","timerId","clearTimeout","timer","transitionEnd","transitionCancel","isSourceTransition","pseudoElement","propertyName","transitionDone","transitionStarted","transitionStart_1","duration","times","delay","dur","getTransitionDuration","requestAnimationFrame","setTimeout","setupTransitionListeners","startTransitioning","setMaxHeight","absMax","setMax$1","anchored","available","expandable$1","defaultOr","options","dephault","go","anchorBox","elementBox","panelWidth","panelHeight","attemptBestFit","isVisible","attemptLayout","newReposition","newVisibleW","newVisibleH","newIsVisible","bestNext","attempts","preference","positionCss","position$2","setPlacement$1","setPlacement","classInfo","setClasses","maxHeightFunction","setHeight","maxWidthFunction","setWidth","allAlignments","nu$5","xOffset","yOffset","insetModifier","insetXOffset","insetYOffset","getClasses","make","xDelta","yDelta","alignmentsOn","alignmentsOff","insetNortheast","insetNorthwest","insetNorth","insetSoutheast","insetSouthwest","insetSouth","insetEast","insetWest","nu$4","onDirection","isLtr","isRtl","getDirection","Attribute","isBottomToTopDir","BottomToTop","schema$y","get$4","defaultLtr","defaultRtl","defaultBottomLtr","defaultBottomRtl","dirElement","isBottomToTop","customLtr","layouts","ls","onLtr","customRtl","onRtl","ltr","onBottomLtr","rtl","onBottomRtl","HotspotAnchor","anchorInfo","hotspot","overrides","MakeshiftAnchor","adt$7","screen","absolute","point","toAbsolute","sum","points","sumAsAbsolute","positions","absolute$1","getRootPoint","frame","frameOwner","compOwner","getBox","pointed","calcNewAnchor","optBox","rootPoint","onNone","onRelative","onFixed","topLeft","sumAsFixed","layoutsLtr","showAbove","layoutsRtl","NodeAnchor","nodeBox","SimRange","soffset","finish","foffset","adt$6","before","after","Situ","situ","adt$5","domRange","exact","SimSelection","exactFromRange","simRange","getWin","startSitu","_finishSitu","_soffset","_finish","_foffset","range","relativeToNative","finishSitu","createRange","setStart","setStartAfter","setEndBefore","setEnd","setFinish","exactToNative","toRect","adt$4","fromRange","startOffset","endOffset","asLtrRange","ranges","getRanges","rev","doDiagnose","diagnose","FocusInsideModes","getOption","nodeValue","NodeValue","elementsWithCursorPosition","isCursorPosition","hasCursorPosition","descendants","querySelectorAll","all$3","readRange","rangeCount","firstRng","getRangeAt","lastRng","doGetExact","focusNode","focus_1","makeRange","same","anchorOffset","focusOffset","getFirstRect","rects","getClientRects","point$1","descendOnce","last","get$3","descendOnce$1","getAnchorSelection","getSelection","getNativeSelection","sel","getExact","modStart","modFinish","SelectionAnchor","selectionBox","optRect","getBounds$1","rawRect","targetElement","labelPrefix$1","eastX","westX","northY$1","southY$1","southeast$1","southwest$1","northeast$1","northwest$1","allRtl","SubmenuAnchor","submenuInfo","AnchorSchema","submenu","makeshift","TransitionSchema","PositionSchema","PlacementSchema","place","anchoring","placee","lastPlace","overrideOptions","simple","positionWithin","posState","placementSpec","boxElement","boundsBox","positionWithinBounds","placeeDetail","anchorage","placeeState","oldVisibility","getFixedOrigin","getRelativeOrigin","newState","doPlace","vis","PositionApis","getMode","pConfig","_pState","reset","reset$2","PositioningState","Positioning","fireDetaching","fireAttaching","attach$1","replaceChildren","newChildren","childComp","detachChildren$1","deleted","attachWith","insertion","doDetach","detach","parent$1","detachChildren","attachSystem","guiSystem","attachSystemWith","inserter","detachSystem","rebuild","sandbox","sConfig","sState","_data","getAttachPoint","built","onOpen","close$1","onClose","isOpen$1","_sandbox","_sConfig","isOpen","cloak","_sState","sink","cssKey","store","cloakVisibilityAttr","decloak","hasPosition","oldValue","restore","SandboxApis","openWhileCloaked","transaction","isPartOf","getState","setContent","ActiveSandbox","sandboxConfig","sandboxState","SandboxSchema","SandboxState","Sandboxing","dismissPopups","repositionPopups","mouseReleased","schema$x","receivingChannel$1","rawSpec","isExtraPart","fireEventInstead","fe","schema$w","receivingChannel","doReposition","onLoad$5","repConfig","repState","onLoad","onUnload$2","onUnload","RepresentApis","setValue","ActiveRepresenting","resetOnDom","_se","memory$1","isNotSet","dataset","dataByValue","dataByText","lookup","itemString","currentDataByValue","currentDataByText","newDataByValue","newDataByText","RepresentState","memory","manual","setValue$2","onSetValue","DatasetStore","getDataKey","getFallbackEntry","initialValue","ManualStore","_repState","MemoryStore","initVal","RepresentSchema","Representing","setValueFrom","source","forbidden","_v","get$2","dump","augment","SketchBehaviours","_placeholder","adt$3","single","multiple","isSubstituted","substitute","compSpec","placeholders","uiType","newSpec","subPlaceholder","scan","req","childSpecs","substituted","valuesThunk","preprocessor","single$2","placeholder","adt$2","external","optional","fFactory","sketch","fSchema","fName","fPname","typeSpec","fGroupSchema","fDefaults","fOverrides","requiredSpec","externalSpec","optionalSpec","groupSpec","asNamedPart","part","name$1","convert","adtConstructor","partSchema","external$1","PartType","asCommon","combine","partSpec","partValidated","defaults","generate$3","np","g","doGenerateOne","pname","generateOne$1","schemas","names","substitutes","internals","externals","factory","_partSpec","_partValidated","units","u","components$1","ps","ph","replacements","used","substituteAll","substitutePlaces","getPart","partKey","getPartOrDie","getParts","partKeys","system","pk","getAllParts","pUid","getAllPartNames","getPartsOrDie","defaultUids","baseUid","partTypes","partNames","pn","defaultUidsSchema","AlloyParts","generate","generateOne","asRawOrDie","partSchemas","partUidsSchemas","baseS","composite$1","specWithUid","supplyUid","partUidsSchema","hasUid","singleSchema","compositeSchema","rawConfig","extraApis","configFields","single$1","composite","partFields","inside","ComposeApis","getCurrent","composeConfig","_composeState","find","ComposeSchema","Composing","nativeDisabled","onLoad$1","disableConfig","disableState","disabled","disable$1","enable$1","hasNative","useNative","nativeDisable","nativeEnable","ariaDisable","ariaEnable","_disableState","disableClass","onDisabled","onEnabled","isDisabled","nativeIsDisabled","ariaIsDisabled","DisableApis","enable","disable","ActiveDisable","DisableSchema","Disabling","dehighlightAllExcept","hConfig","hState","skip","highlighted","highlightClass","skipComp","onDehighlight","highlight","isHighlighted","onHighlight","queryTarget","getFirst","_hState","itemClass","getLast","getDelta$2","selected","dest","getCandidates","HighlightApis","dehighlightAll","dehighlight","highlightFirst","firstComp","highlightLast","lastComp","highlightAt","getByIndex","highlightBy","getHighlighted","getPrevious","getNext","HighlightSchema","Highlighting","BACKSPACE","TAB","ENTER","ESCAPE","SPACE","LEFT","UP","RIGHT","DOWN","cyclePrev","tryPrev","cycleNext","tryNext","inSet","which","and","preds","isShift","isControl","isNotShift","rule","classification","reportFocusShifting","prevFocus","dom$2","focusee","highlights","initialState","typical","infoSchema","stateInit","getKeydownRules","getKeyupRules","optFocusIn","processKey","getRules","keyingConfig","keyingState","transitions","onFocusHandler","focusInside","OnFocusMode","focusIn","keyboardEvents","isEnterOrSpace","OnEnterOrSpaceMode","tryGoInsideComponent","create$6","cyclicField","tabbingConfig","visibilitySelector","_tabbingState","tabstops","visibles","firstTabstop","findInitial","focusManager","cycle","findCurrent","tabstop","stopIndex","useTabstopAt","isTabstop","cyclic","goFromTabstop","navigate","onEscape","onEnter","AcyclicType","CyclicType","defaultExecute","doDefaultExecute","stopEventForFirefox","_component","schema$v","execute$4","executeConfig","execute","ExecutionType","_executeState","spaceExec","useSpace","enterExec","useEnter","downExec","useDown","execKeys","useControlEnter","flatgrid$1","dimensions","numRows","numColumns","setGridSize","getNumRows","getNumColumns","KeyingState","flatgrid","useH","movement","move","use","west$1","moveLeft","moveRight","east$1","useV","north$1","south$1","move$1","isHidden$1","locateVisible","locate","findIndex","withGrid","numCols","address","newIndex","row","column","cycleHorizontal$1","oldRow","oldColumn","colsInRow","newColumn","cycleVertical$1","newRow","newCol","schema$u","focusIn$3","gridConfig","_gridState","first","doMove$2","gridState","identified","handleTab","captureTab","moveLeft$3","moveRight$3","moveNorth$1","moveSouth$1","getKeydownRules$4","findCurrent$1","getKeyupRules$4","FlatgridType","horizontal","tryCycle","schema$t","execute$2","flowConfig","focusIn$2","_state","getInitial","moveLeft$2","moveRight$2","doMove$1","flowState","executeOnMove","doEscape","getKeyupRules$3","FlowType","_flowState","westMovers","allowVertical","eastMovers","toCell","matrix","rowIndex","columnIndex","cell","cycleHorizontal","startCol","deltaCol","newColIndex","cycleVertical","colIndex","startRow","deltaRow","nextRowIndex","colsInNextRow","nextColIndex","moveHorizontal","moveVertical","schema$s","focusIn$1","matrixConfig","previousSelector","selectors","doMove","ifCycle","ifMove","cycles","inRow","cellsInRow","allRows","rows","toMatrix","moveNorth","moveSouth","getKeydownRules$2","getKeyupRules$2","MatrixType","schema$r","menuConfig","moveUp","moveDown","getKeydownRules$1","menuState","moveOnTab","getKeyupRules$1","MenuType","schema$q","SpecialType","specialInfo","onSpace","onShiftEnter","onShiftTab","onTab","onUp","onDown","onLeft","onRight","stopSpaceKeyup","acyclic","flow","execution","special","Keying","keyConfig","keyState","sendFocusIn","isFlatgridState","insert","replaceConfig","childSpec","replaceState","removee","foundChild","_replaceConfig","replaceAt","replaceeIndex","replacer","replacee","appendAt","ReplaceApis","append","appendee","prepend","prependee","replaceBy","replaceePred","Replacing","eventHandlers","events$d","focus$2","focusConfig","ignore","onFocus","FocusApis","blur","blur$1","isFocused","ActiveFocus","tabindex","stopMousedown","FocusSchema","Focusing","updateAriaState","toggleConfig","ariaInfo","aria","updateClass","toggleClass","toggle$2","set$1","ToggleApis","toggle","isOn","ActiveToggle","executor","load","toggleOnExecute","updateExpanded","status","ToggleSchema","pressed","syncWithExpanded","checked","expanded","Toggling","pointerEvents","onClick","events$a","optAction","hoverEvent","focusEvent","onHover","onFocus$1","hover","focus$1","schema$p","toggling","hasSubmenu","itemBehaviours","tConfig","ignoreFocus","schema$o","owner$2","parts$h","schema$n","focusWidget","widget","onHorizontalArrow","autofocus","setSource","_widget","widgetBehaviours","itemSchema$2","separator","parts$g","itemInfo","builder","unit","fakeFocus","markers","schema$m","grid","movementInfo","rowSelector","Menu","_spec","_externals","menuBehaviours","selectedItem","role","trace","byItem","byMenu","triggerItem","triggerMenu","extractPreparedMenu","prep","LayeredState","expansions","menus","directory","getPreparedMenu","menuValue","lookupMenu","lookupItem","itemValue","setMenuBuilt","menuName","setContents","sPrimary","sMenus","sExpansions","sPaths","menuItems","menuPaths","_triggerItem","generate$2","expand","refresh","otherMenus","menuValues","getPrimary","getMenus","isClear","getTriggeringPath","getItemByValue","extraPath","revPath","menuIndex","getTriggeringItem","triggeringItemValue","triggeredItem","triggeredMenu","triggeringItem","triggeringPath","getTriggerData","collapseItem$1","tieredMenu","collapseMenu","tmenu","highlightPrimary","repositionMenus","_rawUiSpec","ExpandHighlightDecision","submenuParentItems","layeredState","getItemValue","toDirectory","_container","_menuName","setActiveMenu","mv","closeOthers","others","backgroundMenu","stayInDom","updateAriaExpansions","parentItems","itemComp","getSubmenuParents","updateMenuPath","latestMenuName","menuPrep","activeMenu","expandRight","HighlightSubmenu","activeMenuPrep","nbMenu","buildIfRequired","onOpenSubmenu","collapseLeft","onCollapseMenu","keyOnItem","getSource","onExecute","componentMap","primaryName","makeSketch","buildMenus","onOpenMenu","highlightImmediately","navigateOnHover","updateView","HighlightParent","getActiveItem","currentItem","maybeActivePrimary","allMenus","preparedMenus","extractMenuFromContainer","primaryMenu","onRepositionMenu","tmenuBehaviours","_keyInfo","selectedMenu","tieredData","singleData","collapseItem","InlineView","showWithin","thing","showWithinBounds","lazySink","showMenuWithinBounds","menuSpec","menuSandbox","getSubmenuLayouts","triggeringPaths","isFirstTierSubmenu","submenuTriggers","st","submenuLayouts","makeMenu","showAt","showMenuAt","inlineBehaviours","getRelated","isPartOfRelated","onShow","onHide","fireDismissalEventInstead","fireRepositionEventInstead","westEdgeX","middleX","eastEdgeX","northY","southY","centreY","lookupPreserveLayout","preserve","lookupFlippedLayout","flip$2","global$f","Button","lookupAttr","buttonBehaviours","roleAttrs","getModAttributes","fromHtml","getAttrs","record","isSketchSpec","anyInSystem","asSpec","_typeof","Symbol","iterator","_setPrototypeOf","setPrototypeOf","_construct","Parent","Class","Reflect","construct","sham","Proxy","Boolean","_isNativeReflectConstruct","instance","_toConsumableArray","_arrayLikeToArray","_arrayWithoutHoles","iter","_iterableToArray","minLen","_unsupportedIterableToArray","TypeError","_nonIterableSpread","arr2","isFrozen","getPrototypeOf","getOwnPropertyDescriptor","seal","create$5","_ref","apply$1","fun","thisValue","Func","func","arrayForEach","unapply","forEach","arrayPop","pop","arrayPush","stringToLowerCase","stringMatch","stringReplace","stringIndexOf","stringTrim","regExpTest","RegExp","typeErrorCreate","_len2","_key2","thisArg","_len","_key","addToSet","lcElement","clone$1","object","newObject","lookupGetter","desc","html$1","svg$1","svgFilters","svgDisallowed","mathMl$1","mathMlDisallowed","svg","mathMl","xml","MUSTACHE_EXPR","ERB_EXPR","DATA_ATTR","ARIA_ATTR","IS_ALLOWED_URI","IS_SCRIPT_OR_DATA","ATTR_WHITESPACE","DOCTYPE_NAME","getGlobal","purify","createDOMPurify","DOMPurify","removed","originalDocument","DocumentFragment","HTMLTemplateElement","NodeFilter","_window$NamedNodeMap","NamedNodeMap","MozNamedAttrMap","HTMLFormElement","DOMParser","trustedTypes","ElementPrototype","getNextSibling","getChildNodes","getParentNode","template","trustedTypesPolicy","createPolicy","ATTR_NAME","currentScript","policyName","_createTrustedTypesPolicy","emptyHTML","_document","implementation","createNodeIterator","getElementsByTagName","importNode","documentMode","hooks","createHTMLDocument","PARSER_MEDIA_TYPE","transformCaseFunc","MUSTACHE_EXPR$1","ERB_EXPR$1","DATA_ATTR$1","ARIA_ATTR$1","IS_SCRIPT_OR_DATA$1","ATTR_WHITESPACE$1","IS_ALLOWED_URI$1","ALLOWED_TAGS","DEFAULT_ALLOWED_TAGS","ALLOWED_ATTR","DEFAULT_ALLOWED_ATTR","CUSTOM_ELEMENT_HANDLING","tagNameCheck","configurable","enumerable","attributeNameCheck","allowCustomizedBuiltInElements","FORBID_TAGS","FORBID_ATTR","ALLOW_ARIA_ATTR","ALLOW_DATA_ATTR","ALLOW_UNKNOWN_PROTOCOLS","SAFE_FOR_TEMPLATES","WHOLE_DOCUMENT","SET_CONFIG","FORCE_BODY","RETURN_DOM","RETURN_DOM_FRAGMENT","RETURN_TRUSTED_TYPE","SANITIZE_DOM","KEEP_CONTENT","IN_PLACE","USE_PROFILES","FORBID_CONTENTS","DEFAULT_FORBID_CONTENTS","DATA_URI_TAGS","DEFAULT_DATA_URI_TAGS","URI_SAFE_ATTRIBUTES","DEFAULT_URI_SAFE_ATTRIBUTES","MATHML_NAMESPACE","SVG_NAMESPACE","HTML_NAMESPACE","NAMESPACE","IS_EMPTY_INPUT","SUPPORTED_PARSER_MEDIA_TYPES","CONFIG","formElement","isRegexOrFunction","testValue","_parseConfig","cfg","ADD_URI_SAFE_ATTR","ADD_DATA_URI_TAGS","ALLOWED_URI_REGEXP","ADD_TAGS","ADD_ATTR","table","tbody","MATHML_TEXT_INTEGRATION_POINTS","HTML_INTEGRATION_POINTS","COMMON_SVG_AND_HTML_ELEMENTS","ALL_SVG_TAGS","ALL_MATHML_TAGS","_forceRemove","outerHTML","_removeAttribute","attribute","getAttributeNode","_initDocument","dirty","leadingWhitespace","dirtyPayload","parseFromString","createDocument","_createIterator","SHOW_ELEMENT","SHOW_COMMENT","SHOW_TEXT","_isNode","_executeHook","entryPoint","currentNode","hook","_sanitizeElements","namespaceURI","tagName","allowedTags","firstElementChild","_basicCustomElementTest","parentTagName","_checkValidNamespace","_isValidAttribute","lcTag","lcName","_sanitizeAttributes","hookEvent","attrName","attrValue","keepAttr","allowedAttributes","_attr","forceKeepAttr","setAttributeNS","_sanitizeShadowDOM","shadowNode","shadowIterator","nextNode","sanitize","importedNode","oldNode","returnNode","toStaticHTML","nodeIterator","shadowroot","serializedHTML","doctype","setConfig","clearConfig","isValidAttribute","addHook","hookFunction","removeHook","removeHooks","removeAllHooks","sanitizeHtmlString","global$e","rtlTransform","defaultIconName","defaultIcon","getIconName","rtlName","addToEnd","ensureTrailing","lookupIcon","get$1","iconProvider","addFocusableBehaviour","renderIcon$2","iconName","fallbackIcon","rtlIconClasses","needsRtlTransform","iconHtml","render$3","notificationIconMap","warning","Notification","iconNames","memBannerText","translationProvider","renderPercentBar","percent","renderPercentText","memBannerProgress","progress","updateProgress","updateText","banner","iconChoices","level","memButton","notificationIconSpec","closeButton","ItemResponse","rate","cancel","throttle","global$d","repeatLeft","rootNode","isBlock","getContentEditable","isBoundary","backwards","create$4","getDoc","extractContents","insertNode","normalize","last$1","setCursorLocation","getEnd","isWhitespace","chr","stripTriggerChar","triggerCh","getContext","initRange","minChars","getRoot","char","charAt","findChar","lastIndexOf","triggerChar","findStart","createRng","selectNode","global$c","toLast","isText","toLeaf","isElement$1","lookupWithContext","getDatabase","context","fetchOptions","database","startText","autocompleters","lookupByChar","autocompleter","isPreviousCharContent","isStartOfWord","lookupData","ac","fetch","maxResults","matchText","columns","highlightOn","separatorMenuItemSchema","autocompleterItemSchema","autocompleterSchema","baseToolbarButtonFields","toolbarButtonSchema","createToolbarButton","baseToolbarToggleButtonFields","toggleButtonSchema","createToggleButton","contextBarFields","contextButtonFields","contextToggleButtonFields","launchButtonFields","launchToggleButtonFields","toggleOrNormal","contextformbutton","contextformtogglebutton","contextFormSchema","contextToolbarSchema","ToolbarMode","ItemResponse$1","navClass","selectableClass","colorClass","presetClasses","normal","color","tickedClass","iconClass","textClass","caretClass","activeClass","containerClass","containerRowClass","classForPreset","presets","forMenu","hasIcons","menuClasses","dom$1","chunk","rowDom","chunks","preprocessCollection","isSeparator","allSplits","currentSplit","forCollection","initItems","_hasIcons","_item","menuHasIcons","handleError","createHorizontalPartialMenuWithAlloyItems","_columns","_presets","structure","createPartialMenuWithAlloyItems","forSwatch","forToolbar","cardImageFields","cardImageSchema","cardTextFields","cardTextSchema","itemSchema$1","cardimage","cardtext","cardcontainer","cardContainerSchema","commonMenuItemFields","cardMenuItemSchema","choiceMenuItemSchema","baseFields","insertTableFields","colorSwatchFields","fancyMenuItemSchema","inserttable","colorswatch","menuItemSchema","nestedMenuItemSchema","toggleMenuItemSchema","detectSize","margin","selectorClass","descendants$1","columnLength","thisTop","cTop","abs","ceil","SimpleBehaviours","namedEvents","ExclusivityChannel","ShowTooltipEvent","HideTooltipEvent","hideAllExclusive","_tConfig","_tState","TooltippingApis","setComponents","tState","specs","getTooltip","ActiveTooltipping","tooltipConfig","clearTooltip","clearTimer","resetTimer","isShowing","popup","tooltipDom","tooltipComponents","setTooltip","show","TooltippingSchema","Tooltipping","global$b","global$a","getHeightSetting","getElement","getWidthSetting","DOM","getStyle","getMinWidthSetting","getMinHeightSetting","getMaxWidthSetting","getMaxHeightSetting","isMenubarEnabled","isToolbarEnabled","toolbar","isToolbarTrue","isToolbarString","isToolbarObjectArray","isMultipleToolbars","getMultipleToolbarsSetting","toolbars","toolbarArray","ToolbarLocation","getToolbarMode","_a$1","FocusMode","getToolbarLocation","auto","isToolbarLocationBottom","fixedContainerTarget","inline","fixedContainerSelector","fixedToolbarContainerTarget","useFixedContainer","getUiContainer","isDistractionFree","isStickyToolbar","getMenubar","getAnchorTop","getAnchorBottom","ReadOnlyChannel","ReadOnlyDataSchema","broadcastReadonly","uiComponents","readonly","outerContainer","mothership","uiMothership","setupReadonlyModeSwitch","setMode","receivingConfig","DisablingConfigs","runWithApi","getApi","onControlAttached","editorOffCell","onDestroy","onControlDetached","onMenuItemExecute","itemResponse","triggersSubmenu","CLOSE_ON_EXECUTE","menuItemEventOrder","componentRenderPipeline","renderCommonItem","providersbackstage","optComponents","buildData","global$9","convertText","mac","alt","ctrl","shift","access","updated","segment","renderIcon$1","renderText","renderHtml","renderStyledText","renderShortcut","renderCheckmark","renderItemDomStructure","ariaLabel","domTitle","renderItemStructure","providersBackstage","renderIcons","providerBackstage","common","baseDom","itemText","iconSvg","iconContent","renderColorStructure","iconSpec","leftIcon","checkmark","checkMark","textRender","htmlContent","shortcutContent","caret","renderNormalItemStructure","tooltipBehaviour","sharedBackstage","tooltipWorker","getSink","_tooltip","replaceText","encoded","encodeText","escapedMatchRegex","escape","render$2","extras","directionClass","alignClass","align","valign","getValignClass","renderContainer","src","renderImage","shouldHighlight","cardText","parts$f","hexColour","shorthandRegex","longformRegex","isHexString","hex","normalizeHex","startsWith","numChars","removeFromStart","toUpperCase","toHex","fromRgba","rgbaColour","red","green","blue","round$1","rgbRegex","rgbaRegex","alpha","isRgbaComponent","fromHsv","hsv","hue","saturation","brightness","side","chroma","fromHex","longForm","splitForm","hexString","m","getLongForm","exec","fromStringValues","fromString","rgbaString","rgbMatch","rgbaMatch","rgba","fireResizeContent","hsvColour","fromRgb","minRGB","maxRGB","hsvToHex","anyToHex","canvas","canvasContext","clearRect","fillStyle","fillRect","getImageData","global$8","storageName","choiceItem","defaultColors","colorCache","storageString","getItem","localstorage","cache","idx","splice","unshift","setItem","ColorCache","hasCustomColors$1","getColors$2","unmapped","getColorMap","colorMap","colors","mapColors","addColor","fallbackColor","getColorCols$1","defaultCols","getColorCols$2","sqrt","getAdditionalColors","hasCustom","applyColor","onChoice","colorPickerDialog","dialog","colorOpt","getColors$1","getFetch$1","setIconColor","splitButtonApi","newColor","setIconFill","registerTextColorButton","lastColor","addSplitButton","optCurrentRgb","getCurrentColor","currentRgb","currentHex","_splitButtonApi","onItemAction","fireTextColorChange","registerTextColorMenuItem","addNestedMenuItem","getSubmenuItems","fancytype","isValid","colorpicker","_api","details","alert","onCancel","createPartialChoiceMenu","onItemValueHandler","alloyItems","createChoiceItems","itemPresets","useText","isSelected","isActive","renderChoiceItem","deriveMenuMovement","menuMarkers","cellOverEvent","cellExecuteEvent","makeCell","col","labelId","se","makeComponents","cells","cellRow","makeLabelText","fancyMenuItems","sizeLabelId","makeCells","emptyLabelText","memLabel","selectedRow","selectedColumn","selectCells","backstage","useCustomColors","initData","allowCustomColors","colorinput","hasCustomColors","getColors","getColorItems","getColorCols","shared","providers","widgetSpec","separator$3","createMenuItemFromBridge","isHorizontalMenu","parseForHorizontalMenu","menuitem","createNestedMenuItem","downwardsCaret","renderSubmenuCaret","nested","createToggleMenuItem","toggle$1","createSeparatorMenuItem","createFancyMenuItem","render","fancy","createAutocompleteItems","createCardMenuItem","card","createAutocompleterItem","autocomplete","createPartialMenu","createItem","itemHasIcon","createTieredDataFrom","partialMenu","Autocompleter","activeAutocompleter","processingAction","cancelIfNecessary","hideIfNecessary","lastElement","getAutocompleters","popups","getAll","triggerChars","stringArray","datasetValues","dv","register$b","newContext","getTriggerContext","lookup$2","doLookup","lookupInfo","matchLength","commenceIfNecessary","combinedItems","choices","itemMeta","nr","autocompleterApi","reload","BUBBLE_TO_SANDBOX","ld","focusMode","ContentFocus","createMenuFrom","display","autocompleterUiApi","onKeypress","isMenuOpen","isProcessingAction","getView","redirectKeyToItem","stopImmediatePropagation","AutocompleterEditorEvents","closest","DelayedFunction","ref","schedule","getTouch","touches","setup$d","rawSettings","stopBackspace","tapEvent","startData","longpressFired","longpress$1","touch","distX","distY","isFarEnough","fireIfReady","monitor","simpleEvents","tapStopped","pasteTimeout","onPaste","onKeydown","isDangerous","onFocusIn","bindFocus","focusoutTimeout","onFocusOut","bindBlur","derive","rawTarget","adt$1","stopped","resume","complete","doTriggerHandler","eventType","isStopped","isCut","fromSource","handlerInfo","eventHandler","doTriggerOnUntilStopped","triggerOnUntilStopped","Registry","registerId","extraArgs","curryArgs","unregisterId","handlersById","_eventName","filterByType","broadcastHandler","isAboveRoot","findHandler","unregister","tagId","readOrTag","conflict","failOnDuplicate","getById","Container","domWithoutAttributes","containerBehaviours","takeover","domEvents","triggerUntilStopped","_alloyId","triggerHandler","broadcast$1","broadcastData","receivers","receiver","listeners","_logger","fromExternal","listener","schema$l","parts$e","excludeFactory","exclude$1","FormField","fieldBehaviours","descriptor","descriptorId","getField","getLabel","ActiveTabstopping","tabConfig","tabAttr","TabstopSchema","Tabstopping","renderFormFieldWith","pLabel","pField","extraClasses","extraBehaviours","renderFormFieldSpecWith","renderFormFieldDomWith","renderLabel$2","formChangeEvent","formCloseEvent","formCancelEvent","formActionEvent","formSubmitEvent","formBlockEvent","formUnblockEvent","formTabChangeEvent","formResizeEvent","schema$k","focusBehaviours","selectOnFocus","setSelectionRange","inputBehaviours","inputAttributes","inputStyles","inputClasses","Input","exports$1","module","exports","define","require","globalThis","EphoxContactWrapper","commonjsGlobal","promise","setTimeoutFunc","Promise","_handled","_value","_deferreds","doResolve","deferred","_immediateFn","cb","onFulfilled","onRejected","reject","finale","_unhandledRejectionFn","Handler","done","reason","ex","prom","remaining","race","setImmediate","_setImmediateFn","_setUnhandledRejectionFn","promisePolyfill","boltExport","HighlightOnOpen","Promise$1","nu$3","baseFn","callbacks","nCallback","isReady","LazyValue","pure","errorReporter","make$5","aFutureB","toPromise","anonBind","futureB","toLazy","toCached","Future","ariaElements","isAriaElement","markValid","invalidConfig","invalidClass","notify","notifyInfo","getContainer","validHtml","onValid","markInvalid","invalidState","onInvalid","_invalidState","validatorInfo","validate","onValidate","valid","InvalidateApis","isInvalid","ActiveInvalidate","onEvent","validateOnLoad","InvalidateSchema","Invalidating","validation","CouplingApis","getCoupled","coupleConfig","coupleState","getOrCreate","CouplingSchema","CouplingState","coupled","Coupling","partType$1","kernel","colorFn","getAnchor","getHotspot","getAnchorOverrides","mapFetch","onOpenSync","highlightOnOpen","processed","futureData","fetcher","getLazySink","tdata","HighlightFirst","openF","_onOpenSync","_highlightOnOpen","togglePopup","sinkDetail","internalSink","lazySinkFn","doRepositionMenus","makeSandbox$1","ariaOwner","sandboxClasses","sandboxBehaviours","matchWidth","useMinWidth","buttonWidth","set$6","sandboxFields","schema$j","parts$d","Dropdown","switchToMenu","HighlightNone","triggerExecute","dropdownBehaviours","ActiveUnselecting","unselectable","Unselecting","colorInputChangeEvent","colorSwatchChangeEvent","colorPickerCancelEvent","labelPart","edgePart","model","edgeActions","det","mouseIsDown","tlEdgePart","tedgePart","trEdgePart","redgePart","brEdgePart","bedgePart","blEdgePart","ledgePart","thumbPart","spectrumPart","getValueFromEvent","spectrum","SliderParts","sliderChangeEvent","getEventSource","isTouchEvent$2","touchEvent","mouseEvent","minX","minY","min1X","min1Y","max1X","max1Y","xRange","yRange","halfX","halfY","step","stepSize","snap","snapToGrid","snapStart","rounded","hasEdge","edgeName","hasLEdge","hasREdge","hasTEdge","hasBEdge","currentValue","xValue","yValue","xyValue","fireSliderChange$3","reduceBy","increaseBy","capValue","findValueOf","hasMinEdge","hasMaxEdge","minBound","maxBound","screenRange","capMin","capMax","findOffsetOf","extraValue","remainder","adjustment","rawSteps","maxSteps","snapValueOf","findOffsetOfValue$2","maxOffset","centerMinEdge","centerMaxEdge","getBoundsProperty","getMinXBounds","getMaxXBounds","getMinYBounds","getMaxYBounds","getXScreenRange","getYScreenRange","getCenterOffsetOf","componentMinEdge","componentMaxEdge","spectrumMinEdge","getXCenterOffSetOf","componentBounds","spectrumBounds","getYCenterOffSetOf","fireSliderChange$2","sliderValue$2","findValueOfOffset$1","handleMovement$2","moveBy$2","findPositionOfValue$1","slider","minEdge","maxEdge","minOffset","findOffsetOfValue$1","onLeft$2","onRight$2","onUp$2","onDown$2","edgeActions$2","HorizontalModel","sliderVal","setToMin","setToMax","findValueOfOffset","findPositionOfValue","setPositionFromValue","thumb","edges","getSpectrum","getLeftEdge","getRightEdge","thumbRadius","fireSliderChange$1","sliderValue$1","handleMovement$1","moveBy$1","findOffsetOfValue","onLeft$1","onRight$1","onUp$1","onDown$1","edgeActions$1","VerticalModel","getTopEdge","getBottomEdge","fireSliderChange","sliderValue","handleMovement","isVerticalMovement","moveBy","TwoDModel","mX","mY","xPos","yPos","thumbXRadius","thumbYRadius","Slider","getThumb","modelDetail","choose","wasDown","onChoose","onDragStart","onDragEnd","sliderBehaviours","changeValue","getInitialValue","onInit","resetToMin","resetToMax","fieldsUpdate","sliderUpdate","paletteUpdate","owner$1","schema$i","getPartName$1","make$4","formBehaviours","form","resPs","resPThunk","pName","Form","fSpec","fieldParts","validInput","invalidInput","validatingInput","translatePrefix","rgbFormFactory","getClass","onValidHexx","onInvalidHexx","invalidation","renderTextField","description","helptext","comps","concats","copyRgbToForm","rgb","memPreview","updatePreview","preview","rgbFormSketcher","setValueRgb","onInvalidInput","onValidInput","isHexInputEvent","hexField","copyRgbToHex","onValidRgb","onValidHex","formPartStrings","redStrings","greenStrings","blueStrings","hexStrings","updateHex","copyHexToRgb","makeFactory","colourPickerSketcher","updates","rgbForm","onInvalidHex","sbPalette","_translate","setColour","ctx","grdWhite","createLinearGradient","addColorStop","grdBlack","_detail","_thumb","_slider","setHue","_apis","setPaletteHue","setThumb","setPaletteThumb","paletteFactory","hueDegreesToSlider","paletteRgba","paletteHue","memSlider","sliderFactory","memPalette","memRgb","updatePalette","_hex","palette","updateFields","runUpdates","hexToHsv","oldHue","newHsv","newHex","onPaletteUpdate","hueSliderToDegrees","oldRgb","oldHsv","onSliderUpdate","ComposingConfigs","english","translate$1","getEnglishText","processors","withComp","optInitialValue","getter","setter","RepresentingConfigs","mem","rawProcessors","other","rawValue","postprocess","beforeObject","afterObject","craftWithClasses","outline","craft","triggerTab","targetComp","isPseudoStop","platformNeedsSandboxing","create$3","resize$3","tCanvas","get2dContext","drawImage","getWidth$1","image","naturalWidth","getHeight$1","naturalHeight","canvasToBlob","quality","HTMLCanvasElement","toBlob","uri","toDataURL","mimetype","base64","sliceSize","byteCharacters","atob","bytesLength","slicesCount","byteArrays","sliceIndex","begin","end","bytes","charCodeAt","Uint8Array","Blob","dataUriToBlobSync","revokeImageUrl","URL","revokeObjectURL","create$2","getCanvas","initialType","getType","toAdjustedDataURL","canvasToDataURL","toBase64","toAdjustedBlob","toAdjustedBase64","dataurl","toCanvas","fromBlob","reader","FileReader","onloadend","readAsDataURL","blobToDataUri","blobUrl","createObjectURL","Image","removeListeners","loaded","blobToImage","blobToCanvas","fromCanvas","clamp","parsedValue","DELTA_INDEX","multiply","matrix1","matrix2","colorFilter","ir","applyColorFilter","pixels","pixelsData","m0","m1","m2","m3","m4","m5","m6","m7","m8","m9","m10","m11","m12","m13","m14","m15","m16","m17","m18","m19","applyMatrix","putImageData","complexAdjustableColorFilter","matrixAdjustFn","adjust","invert$1","basicColorFilter","brightness$1","contrast$1","sharpen$1","pixelsIn","pixelsOut","pIn","pOut","aMatrix","halfSide","drgba","cy","cx","scx","innerOffset","wt","applyConvoluteFilter","convoluteFilter","gamma$1","pow","applyLookup","filterImpl","scale","dW","dH","sW","sH","wRatio","hRatio","scaleCapped","scaled","_scale","ceilWithPrecision","precision","mul","upper","invert","sharpen","gamma","contrast","flip","axis","applyFlip","flip$1","crop","applyCrop","crop$1","rotate","angle","rad","PI","sin","cos","newWidth","newHeight","applyRotate","rotate$1","renderIcon","iconsProvider","renderIconFromPack","renderReplacableIconFromPack","renderLabel$1","internalToolbarButtonExecute","toolbarButtonEventOrder","updateMenuText","updateMenuIcon","renderCommonDropdown","optMemDisplayText","optMemDisplayIcon","onLeftOrRightInMenu","dropdown","tooltipAttributes","translatedTooltip","displayIcon","isSeparator$1","separator$2","realItems","isMenuItemReference","unwrapReferences","itemWithValue","generateValueIfRequired","isExpandingMenuItem","submenuItems","getFromExpandingItem","getFromItem","mainMenu","submenus","getMenuButtonApi","renderMenuButton","_comp","getFetch","getButton","getMenuItemAction","storage","orig","getMenuItemSetup","renderCommonSpec","actionOpt","domFinal","renderIconButtonSpec","renderIconButton","iconButtonSpec","renderButtonSpec","translatedText","borderless","renderButton","buttonSpec","getAction","buttonType","renderFooterButton","isMenuFooterButtonSpec","menuButtonSpec","fixedSpec","memButton_1","isNormalFooterButtonSpec","schema$h","coupledPart","selfName","otherName","lock","onLockedChange","parts$c","locked","lockClass","FormCoupledInputs","coupledFieldBehaviours","field1Name","field1","field2Name","field2","getField1","getField2","getLock","parseSize","sizeText","convertUnit","inInch","noSizeConversion","_input","renderSizeInput","converter","ratioEvent","makeIcon","pLock","formGroup","getFieldPart","isField1","widthField","heightField","_lock","newSize","unitDec","numText","formatSize","otherFieldText","cValue","oValue","optCurrent","optOther","value1","value2","cSize","oSize","ratioSizeConversion","internal","undo","redo","zoom","back","swap","tempTransform","transformApply","saveState","renderEditPanel","imagePanel","createButton","createIconButton","disableAllComponents","eventcomp","enableAllComponents","panelDom","noop$1","emit$1","emitDisable","emitEnable","emitTransform","getBackSwap","memContainer","ButtonPanel","emitTransformApply","createBackButton","button","createSpacer","createApplyButton","cropPanelComponents","getRect","hideCrop","CropPanel","memSize","constrain","resizePanelComponents","sizeInput","newCanvas","resize$2","resize$1","ResizePanel","makeValueTransform","horizontalFlip","verticalFlip","counterclockwiseRotate","clockwiseRotate","flipRotateOnAction","operation","emitTempTransform","flipRotateComponents","FlipRotatePanel","makeSlider","makeVariableSlider","valTransform","createVariableFilterPanel","filterPanelComponents","variableFilterPanelComponents","FilterPanel","BrightnessPanel","ContrastPanel","GammaPanel","makeColorTransform","adjustR","adjustG","adjustB","adjustColors","colorize$1","colorize","makeColorSlider","redOpt","memRed","blueOpt","memBlue","greenOpt","memGreen","colorizePanelComponents","ColorizePanel","getTransformPanelEvent","panel","sharpenTransform","invertTransform","buttonPanelComponents","_anyInSystem","showCrop","measurements","getMeasurements","getApplyButton","updateWithTouchData","changedTouches","isTouchEvent$1","Delimiter","CropRect","currentRect","viewPortRect","clampRect","containerElm","dragHelpers","handles","xMul","yMul","deltaX","deltaY","deltaW","deltaH","blockers","getRelativeRect","outerRect","innerRect","moveRect","startRect","setInnerRect","repaint","updateElementRect","newRect","setRect","relativeRect","cropContainer","blocker","blockerElm","cropBlocker","handleElm","cropHandle","_c","eventOverlay","downButton","startX","startY","handleEvents","overlayEvents","sugarDoc","handleElement","getElementById","docSize","scrollWidth","scrollHeight","getDocumentSize","screenX","screenY","cursor","drag","DragHelper","handleFocus","activeHandle","moveAndBlock","SPACEBAR","toggleVisibility","elems","setClampRect","getInnerRect","setViewPortRect","helper","setButtonEnabled","enabled","renderImageTools","canUndo","canRedo","blobState","tempState","undoStack","setBlobState","createState","destroyState","destroyTempState","addBlobState","states","getBlobState","getTempState","updateTempState","newTempState","addTempState","applyTempState","postApply","temp","currentState","getHistoryStates","undoEnabled","redoEnabled","makeState","updateButtonUndoStates","historyStates","sideBar","imageResultToBlob","block","unblock","editPanel","applyButton","updateSrc","blobManipulate","blobToImageResult","catch","manipulate","currentUrl","initialUrl","memBg","zoomState","cropRect","rectState","viewRectState","repaintImg","panelW","panelH","bg","cRect","aImg","lastViewRect","viewRect","inflate","zoomFit","currentZoom","newZoom","renderImagePanel","memUndo","memRedo","renderSideBar","_oImg","tempManipulate","manipulateApply","disableUndoRedo","isSingleListItem","dataAttribute","fetchItems","dropdownComp","selectedValue","findItemByValue","HtmlSelect","initialValues","selectClasses","selectAttributes","selectBehaviours","baseInputBehaviours","multiline","validatingBehaviours","vl","inputMode","inputmode","classname","extraClasses2","flex","maximized","ActiveStreaming","streamConfig","streamState","processor","stream","streams","cancelEvent","_config","setTimer","StreamingState","StreamingSchema","streamInfo","sInfo","throttler","onStream","stopEvent","Streaming","setValueFromItem","itemData","setCursorAtEnd","setSelectionOn","itemExecute","schema$g","parts$b","previewing","selectsOver","inputDisplay_1","getDisplayText","setSelectionToEnd","attemptSelectOver","populateFromBrowse","typeahead","Typeahead","navigateList","highlighter","focusBehaviours$1","responseTime","previousValue_1","pv","sandboxIsOpen","openClass","onItemExecute","dismissOnBlur","typeaheadBehaviours","wrap","bindFuture","resA","bindResult","mapResult","foldResult","whenError","whenValue","withTimeout","timeout","errorThunk","timedOut","FutureResult","worker","separator$1","toMenuItem","staticMenuItem","filteredTargets","toMenuItems","filterLinkTargets","headerTargets","linkInfo","anchorTargets","anchorTargetTop","anchorTop","anchorTargetBottom","anchorBottom","filterByQuery","term","lowerCaseTerm","errorId","make$2","factories","bar","interpreter","renderBar","collection","runOnItem","tgt","collectionEvents","currentActive","iterCollectionItems","applyAttributes","childElm","htmlLines","mapItemName","encodeAllRaw","renderCollection","alertbanner","iconTooltip","renderAlertBanner","renderInput","textarea","renderTextarea","backstageShared","renderLabel","iframe","isSandbox","sandboxed","sourcing","cachedValue","_frameComponent","frameComponent","contentWindow","getDynamicSource","renderIFrame","iframeSpec","renderDialogButton","checkbox","repBehaviour","toggleCheckboxHandler","memIcons","renderCheckbox","colorInputBackstage","inputValue","span","emitSwatchChange","colorBit","memColorButton","renderPanelButton","colorPicker","valueOpt","colorButton","_field","renderColorInput","colourPickerFactory","memPicker","picker","dropzone","actions","onDrop","transferEvent","handleFiles","dataTransfer","files","onSelect","allowedImageFileTypes","explode","getSetting","file","filterByExtension","memInput","accept","renderDropZone","renderGrid","listbox","initialItem","listBoxWrap","sketchSpec","renderListBox","selectbox","translatedOptions","chevron","selectWrap","renderSelectBox","sizeinput","urlinput","urlBackstage","updateHistory","urlEntry","addToHistory","fileType","urlInputValue","getLinkInformation","history","historyTargets","getHistory","getItems","memUrlBox","_newValue","getValidationHandler","memInvalidIcon","invalidComp","completer","_menu","_entry","errId","memStatus","optUrlPicker","getUrlPicker","browseUrlEvent","memUrlPickerButton","componentData","urlData","fieldname","chosenData","renderUrlInput","customeditor","editorApi","memReplaced","ta","isOldCustomEditor","scriptId","scriptUrl","ea","cvalue","ed","htmlpanel","imagetools","header","renderTd","renderTable","renderPanel","noFormParts","interpretInForm","oldBackstage","newBackstage","interpretParts","bubbleAlignments$2","valignCentre","alignCentre","alignLeft","alignRight","getInlineDialogAnchor","contentAreaElement","lazyAnchorbar","lazyUseEditableAreaAnchor","getBannerAnchor","getCursorAnchor","bodyElement","getNodeAnchor$1","getAnchors","isToolbarTop","useFixedToolbarContainer","getContentAreaContainer","inlineDialog","ColorInputBackstage","isDraggableModal","isDraggableModal$1","DialogBackstage","defaultStyleFormats","mapFormats","userFormats","fmt","customFormats","formats","isBlockFormat","isSelectorFormat","formatNameWithPrefix","getStyleFormats","getUserStyleFormats","registeredUserFormats","registerFormats","formatter","registerCustomFormats","isMergeStyleFormats","processBasic","isSelectedFor","getPreviewFor","formatterSpec","getStylePreview","register$8","doEnrich","newItems","enrichMenu","getStyleItems","enrichSupported","formatName","customSpec","newItem","enrichCustom","init$8","parseStyle","getCssText","settingsFormats","settingsFlattenedFormats","eventsFormats","eventsFlattenedFormats","replaceSettings","_e","enriched","modifications","fromSettings","fromEvents","getFlattenedKeys","hasContentEditableState","isElement","contentEditable","isContentEditableTrue","isContentEditableFalse","getElementText","isValidAnchor","isEditable","isHeader","isChildOfContentEditableTrue","isValidHeader","headerTarget","headerId","getOrGenerateId","getLevel","anchorTarget","anchorId","anchorText","hasTitle","LinkTargets","elms","getTargetElements","getHeaderTargets","getAnchorTargets","STORAGE_KEY","isHttpUrl","isRecordOfUrlArray","getAllHistory","unparsedHistory","SyntaxError","itemsWithoutUrl","setAllHistory","isTruthy","makeMap","getPicker","getFilePickerCallback","getTextSetting","UrlInputBackstage","noTypeaheadUrls","getFilePickerValidatorHandler","pickerTypes","optFileTypes","getFilePickerTypes","optLegacyTypes","getFileBrowserCallbackTypes","optTypes","_picker","types","getPickerTypes","getPickerSetting","entry","parts$a","partType","schema$f","itemsPart","parts$9","CustomList","_external","shell","listBehaviours","setItems","itemComps","numListsRequired","numListsToAdd","itemsToAdd","makeItem","itemsToRemove","builtLists","setupItem","schema$e","parts$8","Toolbar","toolbarBehaviours","setGroups","groups","setup$a","isDocked$2","getBehaviours$1","StaticHeader","isDocked","getBehaviours","getOffsetParent","offsetParent$1","getOrigin","morphAdt","static","appear","contextualInfo","transitionClass","fadeOutClass","fadeInClass","disappear","isVisibleForModes","isBottomCompletelyVisible","isTopCompletelyVisible","getPrior","getInitialPos","revertToOriginal","clearInitialPos","offsetBox_1","_left","_top","_right","_bottom","getMorph","getModes","morphToOriginal","setInitialPos","storePrior","winBox","top_1","isTop","morphToFixed","morphToStatic","setDocked","onUndocked","morphToCoord","onDocked","updateVisibility","morphToDocked","contextual","contextInfo","lazyContext","isPartiallyVisible","setVisible","refresh$4","lazyViewport","morph","refreshInternal","getMorphToOriginal","resetInternal","DockingApis","setModes","ActiveDocking","dockInfo","dockState","onShown","onHidden","DockingSchema","Docking","docked","visible","initialBounds","toolbarHeightChange","visibility","editorStickyOnClass","editorStickyOffClass","isDockedMode","updateIframeContentFlow","parentElem","padding","parentWidth","getOccupiedHeight","updateSinkVisibility","sinkElem","updateEditorClasses","editorContainer","focusedElm","runOnSinkElement","onDockingSwitch","additionalBehaviours","getIframeBehaviours","headerHeight","boxHeight","topBound","headerElem","focusedElem","ownerDoc","activeElm","rootElm","findFocusedElem","win$1","getStickyToolbarOffset","getDockingMode","StickyHeader","lazyHeader","isPositionedAtTop","containerHeader","viewHeight","innerHeight","scrollPos","markerElement","markerPos","markerHeight","markerTop","markerBottom","editorHeaderPos","editorHeaderHeight","editorHeaderTop","editorHeaderBottom","editorHeaderDockedAtTop","editorHeaderDockedAtBottom","scrollFromBehindHeader","groupToolbarButtonSchema","baseMenuButtonFields","MenuButtonSchema","createMenuButton","splitButtonSchema","SilverMenubar","setMenus","newMenus","activeButton","hoveredButton","activeComp","hoveredComp","prev","getAnimationRoot","slideConfig","getDimensionProperty","dimension","getDimension","disableTransitions","shrinkingClass","growingClass","setShrunk","closedClass","setGrown","doImmediateShrink","slideState","_calculatedSize","setCollapsed","onStartShrink","onShrunk","doStartShrink","calculatedSize","doStartSmartShrink","doStartGrow","wasShrinking","beforeSize","fullSize","setExpanded","onStartGrow","isGrowing","_slideState","isShrinking","SlidingApis","isExpanded","grow","shrink","immediateShrink","hasGrown","hasShrunk","isCollapsed","isTransitioning","toggleGrow","ActiveSliding","onGrown","SlidingSchema","Sliding","schema$d","getPartName","make$1","getSlotNames","onSlot","def","slot","doShowing","hideSlot","hideSlots","showSlot","getSlot","hideAllSlots","slotBehaviours","slotApis","SlotContainer","sSpec","sidebarSchema","makePanels","panelConfigs","bridged","createSidebar","sidepanel","optSidePanelSpec","sidePanelSpec","makeSidebar","slotContainer","whichSidebar","sidebar","fixSize","autoSize","BlockingApis","getBusySpec","blockerBehaviours","blockSpec","isBlocked","onBlock","blockWith","onUnblock","BlockingSchema","Blocking","focusBusyComponent","throbber","setup$7","lazyThrobber","throbberState","stealFocus","isFocusEvent","targetElm","editorManager","command","tabIndexAttr","dataTabIndexAttr","iframeElement","tabIndex","toggleEditorTabIndex","_root","_behaviours","getBusySpec$1","throbberFocus","busyComp","toggleThrobber","within","withinWidth","apportion","total","parray","toUnit","setGroups$1","storedGroups","bGroups","refresh$2","setOverflow","builtGroups","overflowGroup","focusedComp","overflows","overflower","divide","tryFit","fitLast","overflow","fitAll","partition","schema$c","schema$b","parts$7","expandable","setMax","schema$a","parts$6","toggledClass","toolbarSandbox","bounder","FloatingToolbarButton","makeSandbox","getToolbar","schema$9","parts$5","ToolbarGroup","tgroupBehaviours","itemSelector","buildGroups","refresh$1","memFloatingToolbarButton","overflowGroups","floatingToolbarButton","SplitFloatingToolbar","getOverflowBounds","overflowToggledClass","splitToolbarBehaviours","getOverflow","schema$8","parts$4","onClosed","onOpened","toggleToolbar","overf","SplitSlidingToolbar","toolbarToggleEvent","_button","doSetGroups","renderToolbarGroupCommon","toolbarGroup","renderToolbarGroup","getToolbarbehaviours","toolbarSpec","modeName","onAttached","initGroups","renderMoreToolbarCommon","cyclicKeying","renderFloatingMoreToolbar","baseSpec","moreDrawerData","headerBounds","docElem","docBounds","overflowXOffset","renderSlidingMoreToolbar","renderToolbar","scrolling","partMenubar","partMultipleToolbar","_mToolbar","tc","_index","partToolbar","renderer","sliding","floating","toolbarFactory","lazyToolbar","lazyMoreButton","partHeader","sticky","partSocket","partSidebar","partThrobber","OuterContainer","getSocket","setSidebar","toggleSidebar","getHeader","setToolbar","setToolbars","mToolbar","refreshToolbar","toggleToolbarDrawer","isToolbarDrawerToggled","getThrobber","focusToolbar","setMenubar","menubar","focusMenubar","grps","grp","renderedToolbars","defaultMenus","edit","tools","help","parseItemsString","identifyMenus","rawMenuData","userDefinedMenus","validMenus","isDefaultMenu","menuData","removedMenuItems","getRemovedMenuItems","itemName","removedMenuItem","fireSkinLoaded","_skinLoaded","fireSkinLoaded$1","initialized","loadStylesheet","stylesheetUrl","styleSheetLoader","unload","loadUiSkins","skinUrl","loadShadowDomUiSkins","loadSkin","isInline","skin","skinName","documentBaseURI","baseURL","getSkinUrl","contentCSS","isSkinDisabled","fireSkinLoadError$1","fireSkinLoadError","onSetupFormatToggle","boundCallback","binding","formatChanged","once","onSetupEvent","handleEvent","onActionToggleFormat$1","rawItem","onActionExecCommand","generateSelectItems","_editor","generateItem","response","si","invalid","validateItems","preItems","getCurrentValue","shouldHide","createMenuItems","createSelectButton","getComponent","decimalDigits","exponentPart","unsignedDecimalLiteral","ResizeTypes","buildBasicSettingsDataset","settingName","delimiter","rawFormats","SemiColon","alignMenuItems","getSpec$4","_format","alignment","canApply","systemStackFonts","splitFonts","fontFamily","fonts","font","getSpec$3","systemFont","getMatchingValue","getFirstFont","queryCommandValue","matchOpt","isSystemFontStack","legacyFontSizes","keywordFontSizes","getSpec$2","fontSize","_loop_1","pt","factor","toPt","legacy","toLegacy","Space","findNearest","getStyles","getSpec$1","fallbackFormat","getSpec","getFormatItems","flattenedItems","ActiveReflecting","reflectingConfig","reflectingState","renderComponents","newComponents","channel","rawData","ReflectingApis","reflectState","ReflectingSchema","Reflecting","schema$7","arrowPart","arrow","buttonPart","btn","splitDropdown","parts$3","SplitDropdown","executeOnButton","buttonEvents","splitDropdownBehaviours","getButtonApi","getToggleApi","getTooltipAttributes","focusButtonEvent","renderCommonStructure","_d","renderCommonToolbarButton","specialisation","itemApi","toolbarButtonBehaviours","renderToolbarButtonWith","bonusEvents","renderToolbarToggleButtonWith","fetchChoices","defaultToolbar","renderFromBridge","bridgeBuilder","togglebutton","menubutton","splitbutton","displayChannel","underlinePath","setIconStroke","buttonComp","renderSplitButton","grouptoolbarbutton","TopToBottom","identifyButtons","renderFloatingToolbarButton","allowToolbarGroups","styleSelectButton","styleselect","createStyleSelect","fontsizeSelectButton","createFontsizeSelect","fontSelectButton","createFontSelect","formatButton","createFormatSelect","alignMenuButton","createAlignSelect","bespokeButtons","fontsizeselect","fontselect","formatselect","toolbarConfig","prefixes","toolbarGroups","groupsStrings","filteredItemGroups","subItem","removeUnusedDefaults","isToolbarGroupSettingArray","createToolbar","toolbarItem","extractFrom","lookupButton","rawUiConfig","toolbarButtonsConfig","detection","isiOS12","Iframe","lastToolbarWidth","eTargetNode","targetNode","uiRoot","attachSystemAfter","innerWidth","initialDocEle","lastWindowDimensions","lastDocumentDimensions","resizeWindow","outer","resizeDocument","docEle","inner","fireScrollContent","elementLoad","setupEvents$1","socket","limit","unbinder","_ui","addQueryValueHandler","toolbarMode","iframeContainer","parseToInt","numToPx","calcCappedSize","minSize","maxSize","minOverride","maxOverride","getWidth","baseWidth","minWidth","getTargetPosAndBounds","Inline","floatContainer","isSticky","editorMaxWidthOpt","headerBackstage","isSplitToolbar","calcToolbarOffset","tbar","repositionPopups$1","updateChromeUi","resetDocking","bodyMargin","targetBounds","updateChromePosition","floatContainerComp","updateMode","updateUi","currentMode","newMode","toolbar_1","toolbarHeight","docHeight","calcMode","setDockingMode","verticalDir","setupMode","addClass","removeClass","InlineHeader","toolbarPersist","isToolbarPersist","uiContainer","prevPosAndBounds","resizeContent","prevPos","prevBounds","hasResized","setupEvents","nodeChanged","hideContextToolbarEvent","runOnExecute","getFormApi","ContextForm","findPrimary","mementos","renderContextToggleButton","renderContextButton","asSpecs","compInSystem","isVerticalOverlap","threshold","getSelectionBounds","leaf$1","getRangeRect","scroll_1","bodyPos","getContextToolbarBounds","toolbarType","viewportBounds","contentAreaBox","toolbarOrMenubarEnabled","getHorizontalBounds","isToolbarLocationTop","headerBox","isToolbarBelowContentArea","isToolbarAbove","containerBounds","getVerticalBounds","bubbleAlignments$1","inset","anchorOverrides","shouldUseInsetLayouts","determineInsetLayout","contextbar","selectionBounds","isSameAnchorElement","isEntireElementSelected","currentPosition","isReposition","preservePosition","getAnchorSpec$2","mobile","smartInsetLayout","newAnchor","getInsetLayouts","matchTargetWith","ctxs","toolbarApi","contextToolbars","contextForms","categorise","forms","inNodeScope","inEditorScope","formNavigators","lookupTable","contextForm","registerForm","contextToolbar","registerToolbar","forwardSlideEvent","backSlideEvent","changeSlideEvent","resizingClass","register$7","registryContextToolbars","lastTrigger","lastContextPosition","currentWidth","newContents","oldContents","forwardContents","canLaunchToolbar","isContextMenuOpen","shouldContextToolbarHide","contextToolbarBounds","anchorBounds","getAnchorElementBounds","hideOrRepositionIfNecessary","contextBarEle","wrapInPopDialog","shortcuts","getScopes","alloySpec","buildToolbar","scopes","allButtons","default","buildContextToolbarGroups","buildContextFormGroups","launchContext","launchContextToolbar","anchorLayout","getAnchorLayout","isSameLaunchElement","rootElem","startNode","isOutsideRoot","nodeCandidates","editorCandidates","nodeMatches","editorMatches","doesPositionExist","filterToolbarsByPosition","hasSelectionToolbars","hasNodeToolbars","nodeToolbars","selectionToolbars","filterByPositionForStartNode","matchStartNode","ancestorElem","findPosition_1","filterByPositionForAncestorNode","matchAncestor","lookup$1","unsupportedLength","pattern","registerController","getMenuItems","getOptions","hash","oldApi","unbindWatcher","watcher","setCurrent","addMenuButton","onToolbarSetup","onMenuSetup","lineHeightSpec","accepted","unitRaw","check","isUnit","normalise","onSetupOutdentState","queryCommandState","onActionToggleFormat","register$2","_idx","name_1","registerFormatButtons","registerCommandButtons","registerCommandToggleButtons","registerButtons$1","registerMenuItems$2","onSetupUndoRedoState","onSetupVisualAidState","hasVisual","setup$6","cmd","register$6","alignSelectMenu","fontSelectMenu","styleSelectMenu","formatSelectMenu","fontsizeSelectMenu","register$4","registerMenuItems$1","registerButtons","register$1","applyFormat","removeFormat","registerCommands","lastForeColor","lastBackColor","register$a","registerToolbarButton","addToggleMenuItem","registerMenuItems","registerButtons$2","register$3","settingsOpt","getContentLanguages","customCode","code","customValue","ele","lang","languageSpec","register$5","isTouchEvent","getPointAnchor","pageX","pageY","fromPageXY","containerPos","getPos","dx","dy","transpose","transposeContentAreaContainer","fromClientXY","getSelectionAnchor","getAnchorSpec$1","anchorType","getNodeAnchor","initAndShow$1","buildMenu","contextmenu","anchorSpec","bubbleAlignments","initAndShow","getAnchorSpec","openiOS_1","originalSelection","selectionReset","unbindEventListeners","preventMousedown","clearSelectionReset","setupiOSOverrides","touch_1","rngRect","isTouchWithinSelection","patchPipeConfig","shouldNeverUseNative","makeContextItem","commonMenuItem","addContextMenuGroup","groupItems","isTriggeredByKeyboard","pointerType","getSelectedElement","setup$5","setContextMenuState","hideContextMenu","showContextMenu","isNativeOverrideKeyEvent","isContextMenuDisabled","getAvoidOverlapSelector","getAnchorType","selectedElement","defaultItems","contextMenus","getContextMenu","sections","allItems","generateContextMenu","hideEvents","subtract","changes","asFixed","coord","asAbsolute","asOffset","toStyles","stylesOpt","absorb","partialCoord","originalCoord","absorbOne","stencil","optX","optY","parseAttrToInt","NaN","moveOrSnap","snapInfo","newCoord","snapsInfo","leftAttr","topAttr","getCoords","mustSnap","findClosestSnap","findSnap","fixedCoord","spanned","findMatchingSnap","snaps","sensor","inRange","coord1","coord2","withinRange","getSnapPoints","bestSnap","deltas","getDeltas","bestDeltas","DraggingApis","snapTo","dragConfig","getTarget","repositionTarget","origin_1","snapPin","snapTo$1","initialAttribute","instigate","anyComponent","zindex","changeZIndex","discard","zIndex","resetZIndex","createComponent","blockerClass","blockerEvents","SnapSchema","schema$6","calcStartData","dragState","dragMode","dragStartData","getStartData","dlt","currentCoord","oc","location","getCurrentCoord","optSnaps","coords","absoluteCoord","newCoords","offset$1","clampCoords","translated","snapping","onSensor","calcNewCoord","onDrag","dragBy","stopDrag","updateStartState","setStartData","MouseData","events$2","stop$1","delayDrop","dragApi","drop","forceDrop","init$2","schema$5","TouchData","getDataFrom","events$1","blockerSingleton","stopBlocking","init$1","mouse","mouseOrTouch","DraggingBranches","DragState","previous","dragEvent","nuData","calculateDelta","Dragging","dragger","calcSnap","selectorOpt","td","snapWidth","selectorHandle","sensorLeft","sensorTop","getSnapsConfig","cellOpt","currentTd","isSameCell","createSelector","setup$4","tlTds","brTds","startCell","finishCell","getTopLeftSnap","memTopLeft","getBottomRightSnap","memBottomRight","topLeftSnaps","bottomRightSnaps","bottomRight","getSnapConfig","isAbove","isBelow","cellRect","viewportHeight","aboveViewport","belowViewport","showOrHideHandle","snapTopLeft","snapBottomRight","otherCells","upOrLeftCells","downOrRightCells","isHidden","getP","resize","resizeType","originalHeight","originalWidth","Both","getDimensions","dim","fireResizeEditor","keyboardHandler","renderStatusbar","getTextComponents","newPathElements","divider","newPath","parent_1","isDefaultPrevented","isPropagationStopped","updatePath","_btn","newAcc","renderElementPath","replaceCountText","words","characters","currentVal","wordCount","renderWordCount","resizeHandler","None","Vertical","getResizeType","_target","renderResizeHandler","getComponents","setup$3","isGridUiContainer","sinkSpec","reactiveWidthSpec","lazyOuterContainer","platformClasses","deviceClasses","isToolbarBottom","dirAttributes","verticalDirAttributes","memAnchorBar","contextMenuState","HeaderBackstage","interpretWithoutForm","init$7","statusbar","socketSidebarContainer","hasMultipleToolbar","hasToolbar","hasMenubar","editorComponents","containerComponents","opacity","border","addQueryStateHandler","ship","fireDismissPopups","onTouchstart","onTouchmove","onTouchend","onMousedown","onMouseup","onContentClick","onContentMouseup","onContentMousedown","loopEditor","relatedTarget","onWindowScroll","onWindowResize","onEditorResize","onEditorProgress","onDismissPopups","setup$b","setEditorSize","parsedHeight","baseHeight","minHeight","getHeight","getHeightWithFallback","parsedWidth","getWidthWithFallback","renderUI","sidebars","handleToggle","setup$8","getToolbarGroups","toolbarGroupButtonConfig","addGroupToolbarButton","toolbarOpt","getUi","broadcastAll","schema$2","basic","parts$2","dragBlockClass","getDragBounds","ModalDialog","dialogComp","modalEventsId","externalBlocker","blockerDom","getFooter","setIdle","setBusy","modalBehaviours","labelledElement","labelElement","describedElement","describeElement","describeId","dialogToggleMenuItemSchema","dialogToggleMenuItemDataProcessor","baseFooterButtonFields","dialogFooterButtonFields","normalFooterButtonFields","menuFooterButtonFields","dialogFooterButtonSchema","submit","alertBannerFields","alertBannerSchema","buttonFields","buttonSchema","checkboxFields","checkboxSchema","checkboxDataProcessor","formComponentFields","formComponentWithLabelFields","collectionFields","collectionSchema","collectionDataProcessor","colorInputSchema","colorInputDataProcessor","colorPickerSchema","colorPickerDataProcessor","customEditorFields","customEditorFieldsOld","customEditorSchema","customEditorDataProcessor","dropZoneSchema","dropZoneDataProcessor","createGridFields","itemsField","htmlPanelFields","htmlPanelSchema","iframeFields","iframeSchema","iframeDataProcessor","imageToolsFields","imageToolsSchema","inputFields","inputSchema","inputDataProcessor","createLabelFields","listBoxSingleItemFields","listBoxNestedItemFields","listBoxItemSchema","listBoxFields","listBoxSchema","listBoxDataProcessor","selectBoxFields","selectBoxSchema","selectBoxDataProcessor","sizeInputFields","sizeInputSchema","sizeInputDataProcessor","tableFields","tableSchema","textAreaFields","textAreaSchema","textAreaDataProcessor","urlInputFields","urlInputSchema","urlInputDataProcessor","createItemsField","itemSchema","sErr","passValue","panelSchema","panelFields","tabFields","tabPanelFields","tabPanelSchema","dialogButtonFields","dialogButtonSchema","dialogSchema","tabpanel","urlDialogButtonSchema","urlDialogSchema","getAllObjects","isNamedItem","dataProcessors","togglemenuitem","createDataValidator","namedItems","getNamedItems","getDataProcessor","internalDialog","dataValidator","DialogManager","openUrl","redial","toValidValues","renderBodyPanel","memForm","formValue","TabButton","tabButtonBehaviours","schema$1","tabsPart","barDetail","dismissTab$1","tabbar","changeTab$1","clickToDismiss","tabClass","parts$1","Tabbar","tabbarBehaviours","selectedClass","tab","Tabview","tabviewBehaviours","barPart","tabs","viewPart","TabSection","changeTabBy","section","byPred","tabSectionBehaviours","selectFirst","tabValue","tabview","tabData","onChangeTab","onDismissTab","getViewItems","showTab","tabKey","setTabviewHeight","updateTabviewHeight","dialogBody","maxTabHeight","tablist","documentElement$1","tabviewHeight","currentTabHeight","dialogTopMargin","dialogBottomMargin","getMaxTabviewHeight","getTabview","SendDataToSectionChannel","SendDataToViewChannel","renderTabPanel","storedValue","updateDataWithForm","formData","validData","currentData","setDataOnForm","oldTab","allTabs","tabMode","extraEvents","smartTabHeight","tabviewComp","heights","_tab","measureHeights","maxTabHeightOpt","getMaxHeight","oldHeight","naiveTabHeight","_viewItems","oldName","tsection","dialogChannel","titleChannel","bodyChannel","footerChannel","bodySendMessageChannel","renderBody","ariaAttrs","incoming","isTabPanel","hiddenHeader","pClose","pUntitled","pBodyMessage","pFooter","footer","pFooterGroup","startButtons","endButtons","renderDialog$1","dialogClass","blockerBackdropClass","scrollLockClass","extraStyles","dialogEvents","renderClose","renderTitle","renderDragHandle","pTitle","pHandle","draghandle","draggable","renderModalHeader","bs","getEventExtras","lazyDialog","closeWindow","blockEvent","renderModalDialog","mapMenuButtons","mapItems","extractCellsToObject","innerAcc","initCommonEvents","fireApiEvent","_event","SilverDialogEvents","getInstanceApi","withSpec","currentDialogInit","cur","onTabChange","newTabName","oldTabName","footerButtons","buttonGroups","makeGroup","memento","renderFooter","initSpec","makeButton","lookupByName","buttonName","renderModalFooter","getCompByName","form_1","getFormWrapper","getDialogApi","doRedial","menuItemStates","withRoot","instanceApi","valueComp","representedValues","menuItemCurrentState","prevData","mergedData","newInternalData","dialogState","validateData$1","tabSection","dialogInit","SUPPORTED_MESSAGE_ACTIONS","isSupportedMessage","mceAction","renderUrlDialog","bodySpec","currentDialog","iframeUri","base_uri","iframeDomain","protocol","port","messageHandlerUnbinder","isSameOrigin","handleMessage","isCustomMessage","onMessage","iframeEle","postMessage","sendMessage","inlineAdditionalBehaviours","isStickyToolbar$1","alertDialog","closeDialog","memFooterClose","titleSpec","closeSpec","footerCloseButton","setup$2","confirmDialog","memFooterYes","footerNo","footerYesButton","setup$1","openModalDialog","internalInitialData","renderModalBody","storagedMenuButtons","objOfCells","dialogSize","getDialogSizeClasses","modalAccess","outerForm","renderDialog","openInlineDialog","config$1","refreshDocking","dialogUi","titleId","dialogLabelId","dialogContentId","memHeader","memBody","contentId","renderInlineBody","memFooter","renderInlineFooter","renderInlineDialog","inlineDialogComp","isAlertOrConfirmDialog","openModalUrlDialog","windowMgr","getWindowManagerImpl","getNotificationManagerImpl","closeCallback","hideCloseButton","notificationWrapper","notification","progressBar","contentArea","moveTo","moveRel","notificationSpec","layoutDirection_1","getLayoutDirection","nodeAnchor","nuText","getEl","notifications","getArgs","NotificationManagerImpl","typeOf$1","eq$2","eqString","eqArray","eqa","eqRecord","kx","ky","compareFn","contramap","sort$1","eqSortedArray","q","eqAny","tx","isEquatableType","isString$1","isArray$1","compose1","identity","contains$3","map$3","each$k","filter$4","findUntil$1","findIndex$2","each$j","objAcc","filter$3","each$i","indexOf$1","reduce","iteratee","accumulator","unknown$2","detect$2","blank","trim$5","lTrim","rTrim","isEmpty$3","nu$2","platform$2","platform$1","browser$4","webkit","fileApi","windowsPhone","Env","ie","gecko","iOS","transparentSrc","caretAfter","ceFalse","cacheSuffix","experimentalShadowDom","canHaveCSP","desktop","whiteSpaceRegExp$2","trim$4","is$3","walk$3","delim","hasOwn","extend","exts","ext","sp","scn","de","cn","ns","createNS","onCreate","walk","_addCacheSuffix","fromDom$2","recurse","is$2","isElement$6","isText$8","isDocument$2","isDocumentFragment$1","prevSibling","previousSibling","prevSiblings","nextSiblings","lastChild","childNodesCount","getStyleContainer","getHead","before$4","after$3","intoView","alignToTop","scrollIntoViewIfNeeded","isNodeType","isRestrictedNode","isElement$5","matchNodeNames","lowercasedNames","matchStyleValues","computed","isBogus$2","isTable$3","isTextareaOrInput","isText$7","isComment","isDocument$1","isBr$5","isImg","isContentEditableTrue$4","isContentEditableFalse$b","isTableCell$5","isMedia$2","browser$3","firstElement","nodes","hasChild","module$1","nu$1","unite","requestAnimationFramePromise","support","Expr","isXML","tokenize","compile","select$1","outermostContext","sortInput","hasDuplicate","setDocument","document$1","documentIsHTML","rbuggyQSA","rbuggyMatches","ancestor$3","promiseObj","wrappedSetTimeout","wrappedSetInterval","setInterval","debounce","Delay","requestAnimationFrameFunc","vendors","setEditorInterval","clearInterval","StyleSheetLoader","documentOrShadowRoot","idCount","loadedStates","edos","maxLoadTime","failure","urlWithSuffix","passed","failed","getOrCreateState","onload","onerror","waitForWebKitLinkLoaded","waitCallback","styleSheets","ownerNode","testCallback","now","linkElem","contentCssCors","referrerPolicy","loadF","styleContainer","loadAll","urls","futures","asyncValues","asyncValue","unloadAll","_setReferrerPolicy","WeakMap","forElement","referenceElement","rootDom","sl","DomTreeWalker","prev2","findSibling","findPreviousNode","startName","siblingName","lazyLookup","isHeading","isBlock$2","isInline$1","isBr$4","isTextBlock$2","isList","isListItem","isTableSection","isTableCell$4","isWsPreserveElement","nbsp","ZWSP$1","isZwsp","trim$3","isElement$4","isText$6","isCaretContainerBlock$1","isCaretContainerInline","isCaretContainer$2","hasContent","isBeforeInline","isAtStart","isAfterInline","isAtEnd","startsWithCaretContainer$1","endsWithCaretContainer$1","showCaretContainerBlock","caretContainer","lastBr","brs","isRangeInCaretContainerBlock","isContentEditableTrue$3","isContentEditableFalse$a","isBr$3","isText$5","isInvalidTextElement","isAtomicInline","isTable$1","isCaretContainer$1","isCaretCandidate$3","isNonUiContentEditableFalse","isUnselectable","isEditableCaretCandidate$1","isInEditable","whiteSpaceRegExp$1","isWhitespaceText","isContent$1","rootElement","hasWhitespacePreserveParent","isNamedAnchor","isBookmark","isBogus$1","isBogusAll","isEmpty$2","skipBogus","brCount","isEmptyNode","isInlineContent","isBookmarkNode$2","isSpan","trimNode","currentChildren","isKeepElement","prevIsInline","nextIsInline","surroundedByInlineContent","isKeepTextNode","makeMap$3","attrsCharsRegExp","textCharsRegExp","rawCharsRegExp","entityRegExp","asciiMap","baseEntities","reverseEntities","buildEntitiesLookup","radix","entity","fromCharCode","namedEntities","encodeRaw","encodeNumeric","encodeNamed","entities","Entities","getEncodeFunc","entitiesMap","nameMap","named","numeric","decode","nativeDecode","mapCache","dummyObj","makeMap$2","each$h","extend$5","explode$3","inArray$2","split$1","createMap","defaultValue","extendWith","getTextRootBlockElements","getTextBlockElements","compileElementMap","Schema","patternElements","customElementsMap","specialElements","createLookupTable","schemaItems","globalAttributes","blockContent","phrasingContent","flowContent","html4BlockContent","html4PhrasingContent","ni","attributesOrder","arrayToMap","addAttrs","schemaItem","caption","script","compileSchema","verify_html","valid_elements","validStyles","valid_styles","invalidStyles","invalid_styles","validClasses","valid_classes","whiteSpaceElementsMap","selfClosingElementsMap","shortEndedElementsMap","boolAttrMap","nonEmptyOrMoveCaretBeforeOnEnter","nonEmptyElementsMap","moveCaretBeforeOnEnterElementsMap","textBlockElementsMap","blockElementsMap","textInlineElementsMap","patternToRegExp","addValidElements","validElements","ei","ai","al","attrData","elementName","attrType","outputName","globalAttributesOrder","elementRuleRegExp","attrRuleRegExp","hasPatternsRegExp","validElementsArr","paddEmpty","removeEmpty","removeEmptyAttrs","attributesRequired","attributesDefault","attributesForced","forcedValue","validValues","attributePatterns","setValidElements","addCustomElements","customElements","customElementRegExp","text_block_elements","block_elements","cloneName","customRule","elmName","addValidChildren","validChildren","childRuleRegExp","getElementRule","_val","padd_empty_block_inline_children","paddInEmptyBlock","custom_elements","valid_children","extended_valid_elements","dd","dt","li","th","tr","thead","tfoot","legend","area","param","parentsRequired","invalid_elements","getValidStyles","getInvalidStyles","getValidClasses","getBoolAttrs","getBlockElements","getShortEndedElements","getSelfClosingElements","getNonEmptyElements","getMoveCaretBeforeOnEnterElements","getWhiteSpaceElements","getSpecialElements","getCustomElements","isValidChild","attrPatterns","Styles","_this","rgbRegExp","urlOrStrRegExp","styleRegExp","trimRightRegExp","encodingLookup","encodingItems","isEncoded","urlConverter","url_converter","urlConverterScope","url_converter_scope","compress","noJoin","canCompress","keepSlashes","decodeSingleHexSequence","escSeq","decodeHexSequences","processUrl","url2","url3","str2","allow_script_urls","allow_svg_data_urls","lastIndex","serialize","serializeStyles","styleList","i_1","styleMap","deprecated","keyLocation","layerX","layerY","returnValue","webkitMovementX","webkitMovementY","keyIdentifier","mozPressure","isNativeEvent","Event","initEvent","normalize$3","originalEvent","fallbackTarget","srcElement","needsNormalizing","defaultPrevented","cancelBubble","isImmediatePropagationStopped","hasIsDefaultPrevented","mouseEventRe","addEvent","attachEvent","removeEvent","detachEvent","fix","isMouseEvent","eventDoc","bindOnReady","eventUtils","domLoaded","readyHandler","readyState","EventUtils","expando","hasMouseEnterLeave","hasFocusIn","callbackList","fakeName","nativeHandler","defaultNativeHandler","executeHandlers","namesList","mouseEnterLeave","currentTarget","related","ci","eventMap","parentWindow","clean","preferredDoc","dirruns","classCache","createCache","tokenCache","compilerCache","sortOrder","strundefined","MAX_NEGATIVE","push_native","push$1","slice$1","whitespace","identifier","pseudos","rtrim","rcomma","rcombinators","rattributeQuotes","rpseudo","ridentifier","matchExpr","ID","CLASS","TAG","ATTR","PSEUDO","CHILD","bool","needsContext","rinputs","rheader","rnative","rquickExpr$1","rsibling","rescape","runescape","funescape","escaped","escapedWhitespace","high","els","Sizzle","seed","nid","newSelector","getElementsByClassName","qsa","toSelector","testContext","qsaError","cacheLength","markFunction","siblingCheck","diff","sourceIndex","createPositionalPseudo","argument","matchIndexes","setFilters","tokens","addCombinator","matcher","combinator","checkNonElements","doneName","oldCache","outerCache","newCache","elementMatcher","matchers","condense","unmatched","newUnmatched","mapped","setMatcher","preFilter","postFilter","postFinder","postSelector","preMap","postMap","preexisting","contexts","multipleContexts","matcherIn","matcherOut","matcherFromTokens","checkContext","leadingRelative","implicitRelative","matchContext","matchAnyContext","hasCompare","getTop","attrId","tmp","disconnectedMatch","adown","bup","compare","sortDetached","aup","ap","bp","expr","matchesSelector","attrHandle","specified","uniqueSort","duplicates","detectDuplicates","sortStable","createPseudo","excess","unquoted","nodeNameSelector","operator","what","forward","ofType","nodeIndex","useCache","pseudo","matched","elemLang","selectedIndex","even","odd","lt","gt","nth","createInputPseudo","createButtonPseudo","filters","parseOnly","soFar","preFilters","setMatchers","elementMatchers","bySet","byElement","superMatcher","outermost","matchedCount","setMatched","contextBackup","dirrunsUnique","matcherFromGroupMatchers","token","compiled","rquickExpr","Event$1","skipUniques","isDefined","createFragment$1","fragDoc","frag","domManipulate","targetNodes","sourceItem","getElementDocument","DomQuery","makeArray","hasClass","lastParent","newWrapper","numericCssMap","booleanMap","propFix","for","cssFix","float","attrHooks","cssHooks","DomQueryConstructor","whiteSpaceRegExp","trim$2","each$g","grep$2","removeAttr","camel","dashed","currentStyle","appendTo","prependTo","replaceWith","wrapInner","classState","existingClassName","trigger","docElm","sibling$1","firstSibling","contentDocument","wrappedResult","parentsUntil","nextUntil","prevUntil","overrideDefaults","sub","each$f","grep$1","simpleSelectorRe","updateInternalStyleAttr","$elm","findNodeIndex","normalized","lastNodeType","DOMUtils","addedStyles","counter","boundEvents","ownEvents","$$","defaultVal","getAttribs","setAttrib","originalValue","onSetAttrib","attrElm","root_element","getPos$1","castOffsetParent","bodyTop","captionTop","captionHeight","getTableCaptionDeltaY","getSize","collect","selectorVal","_findSib","setHTML","canHaveHTML","parentElm","newElm","keepChildren","$node","oldElm","replaceChild","isNonEmptyElement","rv","stdMode","boxModel","deep","clone_1","getViewPort","argWin","getPrev","outHtml","createFragment","setStyle","update_styles","setStyles","stylesArg","removeAllAttribs","removeAttributeNode","cssText","serializeStyle","addStyle","styleElm","styleSheet","loadCSS","uniqueId","getOuterHTML","setOuterHTML","insertAfter","reference","referenceNode","rename","attrNode","findCommonAncestor","pe","rgbVal","isEmpty","bogusVal","splitElm","replacementElm","beforeFragment","afterFragment","getContentEditableParent","isChildOf","dumpRng","keepValues","keep_values","keepUrlHook","setupAttrHooks","DOM$a","each$e","ScriptLoader","queue","scriptLoadedCallbacks","queueLoadedCallbacks","loading","loadScript","cleanup","isDone","markDone","loadQueue","loadScripts","scripts","failures","execCallbacks","loadingScripts","notifyCallbacks","currentCode","getLanguageData","I18n","setCode","newCode","getCode","langData","translation","getLangData","textstr","removeContext","isTokenised","values_1","$1","$2","hasCode","AddOnManager","_listeners","runListeners","matchedListeners","dependencies","createUrl","baseUrl","resource","addOnUrl","urlString","deps","newUrl","loadDependencies","waitFor","requireLangPack","languages","languageLoad","language","addOn","addOnConstructor","addComponents","pluginName","pluginUrl","PluginManager","ThemeManager","read$4","annotation","dataAnnotation","dataAnnotationId","identify","annotationName","an","newStart","getAttr","findMarkers","deep$1","TextWalker","TextSeeker","isBlockBoundary","newOffset","forwards","round$2","toStart","isValidOverflow","overflowY","rect1","rect2","isAbove$1","halfHeight","isBelow$1","containsXY","getSelectedNode","getNode$1","safeOffset","clamp$2","extendingChars","isExtendingChar","isElement$3","isCaretCandidate$2","isBlock$1","isFloated","isValidElementCaretCandidate","isNotPre","isText$4","isBr$2","nodeIndex$1","resolveIndex$1","createRange$1","isWhiteSpace$1","isRange","isHiddenWhiteSpaceRange","isZeroRect","getBoundingClientRect$1","clientRect","clientRects","brNode","nbsp$1","getBrClientRect","sc","ec","so","eo","newRng","getBoundingClientRectWebKitText","collapseAndInflateWidth","newClientRect","CaretPosition","caretPosition","addUniqueAndValidRect","addCharacterOffset","beforeNode","getCaretPositionClientRects","toRange","isEqual","fromRangeStart","fromRangeEnd","pos1","pos2","isTextPosition","isElementPosition","HDirection","trimEmptyTextNode$1","rangeInsertNode","insertFragment","isText$3","isBogus","normalizedParent","equal","createPathItem","numTextFragments","normalizedNodeIndex","outputOffset","normalizedTextOffset","parentsUntil$1","resolve$2","resolvePathItem","dataLen","targetOffset","findTextPosition","isContentEditableFalse$9","getPoint","trimmedOffset","getNormalizedTextOffset","moveEndPoint$1","normalizeTableCellSelection","getOffsetBookmark","findAdjacentContentEditableFalseElm","isFakeCaret","getLocation","createBookmarkSpan","filled","getPersistentBookmark","rng2","endBookmarkNode","startBookmarkNode","keep","getUndoBookmark","DOM$9","getBodySetting","bodyObj","getContentSecurityPolicy","getForcedRootBlock","getForcedRootBlockAttrs","isAutomaticUploadsEnabled","shouldReuseFileName","getIconPackName","getImageUploadUrl","getImageUploadBasePath","getImagesUploadCredentials","getImagesUploadHandler","shouldUseContentCssCors","getReferrerPolicy","getLanguageCode","shouldIndentUseMargin","getFontCss","fontCss","getObjectResizing","getEventRoot","getTheme","shouldValidate","isInlineBoundariesEnabled","hasContentCssCors","getPlugins","isText$2","removeNode$1","trimCount","trimmedText","deleteZwspChars","deleteData","removeUnchanged","removeAndReposition","removeTextAndReposition","removeTextCaretContainer","newPosition","indexOf$2","removeElementAndReposition","removeElementCaretContainer","caretContainerNode","browser$2","isContentEditableFalse$8","isMedia$1","isTableCell$3","getAbsoluteClientRect","scrollX","scrollY","rootRect","FakeCaret","cursorInterval","lastVisualCaret","rootBlock","caretBlock","fakeCaretTargetNodes","trimInlineCaretContainers","caretState","textNode","splitText","insertInline$1","isInlineFakeCaretTarget","blockName","br","blockNode","insertBlock$1","getCss","isFakeCaretTableBrowser","isFakeCaretTarget","isContentEditableFalse$7","isMedia","isBlockLike","isCaretContainer","isCaretContainerBlock","isCaretCandidate$1","isForwards","isBackwards","skipCaretContainers","findNode$1","predicateFn","isCefOrCaretContainer","getParentBlock$2","isInSameBlock","caretPosition1","caretPosition2","getChildNodeAtRelativeOffset","relativeOffset","beforeAfter","isNodesInSameBlock","node1","node2","lean","normalizeRange","leanLeft","leanRight","location_1","getRelativeCefElm","getNormalizedRangeEndPoint","normalizedRange","getElementFromPosition","getVisualCaretPosition","walkFn","isMoveInsideSameBlock","inSameBlock","expected","isContentEditableFalse$6","isBr$1","isCaretCandidate","isAtomic","isAtomicContentEditableFalse","isEditableCaretCandidate","nodeAtIndex","getCaretCandidatePosition","findCaretPosition$1","startPos","innerNode","Forwards","moveForwardFromBr","rootContentEditableFalseElm","getParents$3","CaretWalker","Backwards","isBeforeOrStart","isAfterOrEnd","isBeforeAfterSameElement","fromPosition","shouldSkipPosition","navigateIgnore","ignoreFilter","positionIn","walkToPositionIn","nextPosition","prevPosition","firstPositionIn","lastPositionIn","CARET_ID$1","isCaretNode","getParentCaretContainer","isPathBookmark","addBogus","tryFindRangePosition","padEmptyCaretContainer","isEmpty$1","insertZwsp","setEndPoint","isValidTextNode","restoreEndPoint","appendData","getBookmark$1","getCaretBookmark","getRangeBookmark","getBookmark$2","resolvePaths","isStringPathBookmark","resolveCaretPositionBookmark","isIdBookmark","endPos","spos","epos","resolveId","isIndexBookmark","resolveIndex","isRangeBookmark","resolve$1","isBookmarkNode$1","isNbsp","actual","isWhiteSpace","isContent","isNode","moveStart","isInlineBlock","isWhiteSpaceNode$1","getNonWhiteSpaceSibling","inc","nextName","isTextBlock$1","allowSpaces","replaceVars","vars","isEq$5","str1","normalizeStyleValue","getTextDecoration","decoration","getParents$2","isInlineFormat","shouldExpandToSelector","isBookmarkNode","getParents$1","isWhiteSpaceNode","isTextBlock","findParentContentEditable","walkText","findSpace","findContent","findWordEndPoint","includeTrailingSpaces","lastTextNode","textSeeker","textOffset","findSelectorEndPoint","formatList","curFormat","findBlockEndPoint","scopeRoot","isAtBlockBoundary$1","findParentContainer","block_expand","isSelfOrParentBookmark","expandRng","includeTrailingSpace","walk$2","exclude","firstNode","lastNode","collectSiblings","endNode","siblings","findEndPoint","walkBoundary","siblings_1","startPoint","endPoint","getCellsFromElementOrRanges","selectedCells","getSelectedNodes","getCellsFromRanges","getCellsFromEditor","getSel","getClosestTable","getFirstChildren","getLastChildren$1","hasAllContentsSelected","getStartNode","getEndNode","moveEndPoint","hasAnyRanges","runOnRanges","fakeSelectionNodes","fakeNodeRng","fillBookmark","api$1","makeAnnotation","eDoc","decorate","master","annotate","newWrappers","finishWrapper","processElements","processElement","wrapName","isZeroWidth","isAnnotation","wrap$3","processNodes","Annotator","annotations","serializer","addNodeFilter","spans","identifyParserNode","persistent","setup$m","_registry","changeCallbacks","withCallbacks","updateCallbacks","callbackMap","outputData","onNodeChange","fireNoAnnotation","fireCallbacks","addListener","setup$n","initialRng","hasFakeSelection","applyWordGrab","selectionRng","annotateWithBookmark","annotationChanged","nodesAlready","findAll","BookmarkManager","getContentEditableRoot$1","isXYWithinRange","fireError","errorType","fireFormatApply","fireFormatRemove","VK","DELETE","ESC","PAGE_UP","PAGE_DOWN","END","HOME","modifierPressed","isContentEditableFalse$5","ControlSelection","selectedElmGhost","resizeHelper","selectedHandle","resizeBackdrop","startW","startH","ratio","resizeStarted","startScrollWidth","startScrollHeight","elementSelectionAttr","editableDoc","rootDocument","resizeHandles","nw","ne","sw","isImage","contextMenuSelectImage","isEventOnImageOutsideRange","getResizeTargets","isResizable","setSizeProp","setGhostElmSize","ghostElm","resizeGhostElement","proportional","resizeHelperX","resizeHelperY","getResizeImgProportional","selectedElmX","selectedElmY","fireObjectResizeStart","endGhostResize","wasResizeStarted","showResizeRect","fireObjectResized","unbindResizeHandleEvents","targetWidth","targetHeight","hideResizeRect","startDrag","updateResizeRect","controlElm","isChildOrEqual","disableGeckoResize","isWithinContentEditableFalse","handleMSControlSelect_1","delayedSelect","throttledUpdateResizeRect","composing","hasCeProperty","fromPoint","pointDoc","caretPositionFromPoint","offsetNode","caretRangeFromPoint","createTextRange","moveToPoint","elementFromPoint","moveToElementText","findClosestIeRange","parentElement","findParent$1","moveOutOfContentEditableFalse","isEq$4","rng1","hasParent$1","findParent","hasParentWithName","isTable","isTableCell$2","isCeFalseCaretContainer","hasBrBeforeAfter","findTextNodeRelative","isAfterNode","lastInlineElement","parentBlockContainer","normalizeEndPoint","directionLeft","hasContentEditableFalseParent","isPrevNode","normalize$2","normRng","RangeUtils","normalizedRng","compareRanges","getCaretRangeFromPoint","documentFocusInHandler","excludeFromDescend","markerInfo","cleanupFun","withMarker","preserveWith","applyWithMarker","withScrollEvents","fireScrollIntoViewEvent","fireAfterScrollIntoViewEvent","withElement","elementMarker","startElement","endElement","scrollToMarker","intoWindowIfNeeded","viewportBottom","largerThanViewport","intoWindow","intoFrame","frameViewHeight","op","rangeIntoWindow","elementIntoWindow","rangeIntoFrame","elementIntoFrame","scrollRangeIntoView","hasFocus$1","browser$1","normalizeRng","isOrContains","isRngInRoot","shouldStore","nativeRangeToSelectionRange","bookmarkToNativeRng","newBookmark","FocusManager","isEditorUIElement","throttledStore","mouseUpPage","registerPageMouseUp","registerFocusOut","registerMouseUp","selectionChange","isManualNodeChange","registerEditorEvents","DOM$8","isUIElement","customSelector","getCustomUiSelector","registerEvents$1","focusedEditor","blurredEditor","getActiveElement","activeEditor","unregisterDocumentEvents","normalizeSelection$1","getCollapsedNode","getFocusInElement","caretPos","focusBody","rawBody","hasInlineFocus","hasIframeFocus","activateEditor","getEndpointElement","real","skipEmptyTextNodes","processRanges","typeLookup","walk$1","isEmptyTextNode","AstNode","selfAttrs","cloneAttrs","selfAttr","shortEnded","refNode","unescapedTextParents","containsZwsp","getTemporaryNodeSelector","tempAttrs","createWalker","whatToShow","createTreeWalker","createZwspCommentWalker","FILTER_ACCEPT","FILTER_SKIP","createUnescapedZwspTextWalker","hasZwspComment","hasUnescapedZwspText","hasTemporaryNode","trimTemporaryNodes","getTemporaryNodes","emptyAllNodeValuesInWalker","curr","emptyZwspComments","emptyUnescapedZwspTexts","conditionalTrims","condition","trimmed","cloned","each$d","ElementUtils","attribs","compareObjects","obj1","obj2","makeMap$1","Writer","indent","indentBefore","indent_before","indentAfter","indent_after","entity_encoding","htmlOutput","element_format","cdata","comment","pi","HtmlSerializer","writer","sortedAttrs","elementRule","nonInheritableStyles","Set","shorthandStyleProps","getStyleProps","hasStyleConflict","nodeStyleProps","parentNodeStyleProps","valueMismatch","parentValue","nodeStyleProp","propExists","longhandProps","isChar","isBeforeSpace","isAfterSpace","isEmptyText","matchesElementPosition","isImageBlock","isCefNode","isBogusAll$1","isBeforeImageBlock","isAfterImageBlock","isBeforeMedia","isAfterMedia","isBeforeTable","isAfterTable","isBeforeContentEditableFalse","isAfterContentEditableFalse","fillWithPaddingBr","trimBlockTrailingBr","lastChildPrevSibling","rawParent","parents$1","parentsAndSelf","navigateIgnoreEmptyTextNodes","getClosestBlock$1","isAtBeforeAfterBlockBoundary","fromBlock","isAtBlockBoundary","isAtStartOfBlock","isAtEndOfBlock","isBeforeBlock","isAfterBlock","isBr","findBr","parentBlocks","isBeforeBr$1","isAfterBr","getElementFromPrevPosition","findPreviousBr","findNextBr","isInMiddleOfText","getClosestBlock","hasSpaceBefore","hasSpaceAfter","isInPre","isPreValue","needsToBeNbspLeft","needsToBeNbspRight","needsToBeNbsp","isNbspAt","hasNbsp","normalizeNbsps","newText","firstPos","normalizeNbspAtStart","chars","normalizeNbspMiddle","lastPos","normalizeNbspAtEnd","normalizeNbspsInEditor","normalize$1","isEndOfContent","isStartOfContent","replaceData","previousCharIsSpace","normalizeContent","normalizeWhitespaceAfter","whitespaceCount","normalizeWhitespaceBefore","mergeTextNodes","prevNode","normalizeWhitespace","mergeToPrev","whitespaceOffset","newNode","removeNode","insertData","needsReposition","getPreviousSiblingCaretPosition","getNextSiblingCaretPosition","findCaretPosOutsideElmAfterDelete","findCaretPositionForwardsFromElm","findCaretPositionForward","startPosition","findCaretPositionBackwardsFromElm","findCaretPositionBackwards","findCaretPosition","setSelection$1","paddEmptyBlock","deleteElement$2","moveCaret","rawNode","afterDeletePos","parentBlock","normalizedAfterDeletePos","afterDeletePosOpt","prevTextOpt","nextTextOpt","deleteNormalized","isInlineElement","paddPos","getTableCells","tableCellRng","deleteAction","singleCellTable","fullTable","partialTable","multiTable","getClosestCell$1","isExpandedCellRng","cellRng","getTableFromCellRng","startParentTable","endParentTable","getTableSelectionFromCellRng","tableSelection","getTableSelections","selectionDetails","isSameTable","sameTableSelection","endCell","startTableSelection","getCellRangeFromStartTable","endTableSelection","getCellRangeFromEndTable","getCellIndex","getSelectedCells","startIndex","unselectCells","startTable","endTable","otherContentRng","getActionFromRange","isRootFromElement","optCellRng","getCellRng","getTable","isStartInTable","isEndInTable","isMultiTable","getTableDetailsFromRange","isSingleCellTable","isSingleCellTableContentSelected","startTableSelectedCells","endTableSelectedCells","handleMultiTable","handleSingleTable","freefallRtl","cleanCells","deleteContentInsideCell","isFirstCellInSelection","insideTableRng","deleteCellContents","collapseAndRestoreCellSelection","selectedNode","emptySingleTableCells","outsideDetails","editorRng","cellsToClean","outsideBlock","getOutsideBlock","deleteContents","startInTable","emptyBlock","handleEmptyBlock","endPointCell","emptyMultiTableCells","startTableCells","endTableCells","betweenRng","startTableCellsToClean","endTableCellsToClean","moveSelection","lastBlock","additionalCleanupNodes","deleteTableElement","getParentCell","getParentCaption","emptyElement","isNearTable","deleteCaret$3","startElm","fromCell","deleteBetweenCells","deleteCaretCells","fromPos","isBeforeOrAfterTable","fromCaption","isDeleteOfLastCharPos","emptyCaretCaption","toCaption","validateCaretCaption","deleteCaretInsideCaption","deleteCaretCaption","backspaceDelete$9","deleteCellRange","deleteCaptionRange","deleteTableRange","deleteRange$2","commonAncestorContainer","newEndPos","normalizeBlockSelectionRange","isListFragment","nonEmptyElements","hasOnlyOneChild$1","isPaddingNode","isPaddedEmptyBlock","isEmptyFragmentElement","trimListItems","isPadding","getParentLi","findLastOf","newCaretPos","insertAtCaret$1","domFragment","cleanupDomFragment","toDomFragment","liTarget","liElms","isAt","caretWalker","findFirstIn","insertBefore$1","insertAfter$1","beforeRng","afterRng","getSplit","insertMiddle","isTableCell$1","insertHtmlAtCaret","trimOrPadLeftRight","parser","merge","bookmarkHtml","paste","preserve_zwsp","caretElement","canHaveChildren","isTableCellContentSelected","deleteSelectedContent","parserArgs","isParentBlockLi","markFragmentElements","_selectionOverrides","showBlockCaretContainer","validInsertion","textInlineElements","root_1","elementUtils_1","isNonInheritableStyle","hasInheritableStyles","reduceInlineTextElements","nextRng","parentEditableElm","isPartOfFragment","findNextCaretRng","moveSelectionToMarker","trimBrsFromTableCell","addVisual","traverse","isTreeNode","setEditorHtml","noSelection","setContentInternal","defaultedArgs","setupArgs$2","updatedArgs","no_events","nodeFilters","attributeFilters","getNodeFilters","getAttributeFilters","attrMatches","name_2","findMatchingNodes","no_selection","setContentTree","padd","forcedRootBlockName","isRootContent","setContentString","sibling$2","isEq$3","matchesUnInheritedFormatSelector","inherit","matchParents","similar","matchNode","matchName$1","matchItems","onmatch","expectedValue","isEmptyValue","match$2","matchAllOnNode","formatNames","matchSimilar","isVariableValue","fieldValues","isVariableFormatName","ZWSP","CARET_ID","isCaretContainerEmpty","getEmptyCaretContainers","findFirstTextNode","createCaretContainer","fill","removeCaretContainerNode","trimZwspFromCaretContainer","removeCaretContainer","appendNode","insertFormatNodesIntoCaretContainer","formatNodes","innerMostFormatNode","formatNode","removeCaretFormat","hasContentAfter","expandedRng","newCaretContainer","allBrs","getLastChildren","insertCaretContainerNode","cleanedFormatNode","validFormats","matchedFormats","fmtName","otherFormatName","filterObj","validKey","fmt1","filteredFmt1","fmt2","filteredFmt2","equal$1","areSimilarFormats","clonedFormatNode","cleanFormatNode","caretTextNode","isFormatElement","inlineElements","postProcessHooks","each$c","blocks","isPre","getSelectedBlocks","pre","pre1","pre2","addPostProcessHook","each$b","isElementNode$1","findElementSibling","mergeSiblingsNodes","elementUtils","tmpSibling","mergeSiblings","merge_siblings","processChildElements","hasStyle","applyStyle","unwrapEmptySpan","removeResult","MCE_ATTR_RE","each$a","isEq$2","isChildOfInlineParent","lastIdx","normalizeTableSelection","isTableCellOrRow","childNode","wrapWithSiblings","removeFormatInternal","compareNode","stylesModified","matchName","isColorFormatAndAnchor","preserve_attributes","attrsToPreserve","remove_similar","valueOut","rootBlockElm","forcedRootBlock","list_block","forced_root_block_attrs","isMixedFormat","removeFormat$1","newName","removeFormatFromClone","splitToFormatRoot","formatRoot","findFormatRoot","lastClone","firstClone","formatRootParent","mixed","wrapAndSplit","removeNodeFormat","lastContentEditable","currentNodeMatches","textDecoration","isRemoveBookmarkNode","removeRngStyle","ceFalseOverride","each$9","each$8","isElementNode","applyFormat$1","setElementFormat","onformat","styleVal","applyNodeStyle","found","createWrapElement","wrapElm","applyRngStyle","nodeSpecific","currentWrapElm","parentName","canFormatEmptyLines","validBRParentElements","hasCaretNodeSibling","canFormatBR","childCount","isEmptyTextNode$1","getChildCount","childElement","mergeStyles","clear_child_styles","clearChildStyles","mergeWithChildren","merge_with_parents","mergeWithParents","backgroundColor","mergeBackgroundColorAndFontSize","processTextDecorationsAndColor","mergeTextDecorationsAndColor","mergeSubSup","wordcharRegex","applyCaretFormat","curSelNode","firstFormat","forced_root_block","defaultBlock","fake","postProcess$1","formatItem","hasVars","fallbackElement","matchingNode","matchingFormat","updateAndFireChangeCallbacks","registeredCallbacks","runIfChanged","node_1","withSimilar","withoutSimilar","withVars","fromElements","tableModel","tableRow","cellPosition","getSpan","cellExists","findElementPos","extractRows","sx","sy","ey","newRows","toDom","tableElement","tableBody","createDomTable","modelRowsToDomRows","getFullySelectedListWrappers","_li","findParentListContainer","listCont","listElm","listStyles","_style","emptyFragment","getFragmentFromRange","innerElm","commonAnchorContainer","wrapElements","listWrappers","allWrappers","directListWrappers","getWrapElements","getTableFragment","selectedTableCells","tableElm","firstCell","lastCell","fullTableModel","rowspan","colspan","y2","x2","fillout","skipCellsX","subTable","sectionedTableModel","isCollapsibleWhitespace","getInnerText","bin","shouldTrim","trimLeadingCollapsibleText","getSelectedContentInternal","setupArgs$1","parentBlockOpt","contextNodeName","getContextNodeName","shouldTrimSpaces","nonRenderedText","parentBlockText","textIndex","getTextContent","getInner","tmpElm","getSelectionFragment","read$3","getSerializedContent","getOuterHtml","fragments","vDown","vUp","buildScript","buildSnake","getMiddleSnake","currentFragments","insertAt","removeAt","applyDiff","start1","end1","start2","end2","diag","i2","snake","lazyTempDocument$1","createFromEditor","getTempAttrs","hasIframes","beforeBookmark","applyToEditor","getLevelContent","getCleanLevelContent","isEq$1","level1","level2","hasEqualContent","hasEqualCleanedContent","isUnlocked","locks","setTyping","typing","endTyping","makePlainAdaptor","beforeChange","beforeChange$1","currentLevel","lastLevel","bm","customUndoRedoLevels","getCustomUndoRedoLevels","setDirty","addUndoLevel$1","undo$1","redo$1","clear$1","reset$1","hasUndo","hasUndo$1","hasRedo","hasRedo$1","transact$1","ignore$1","callback1","callback2","extra$1","matchAll","matchedFormatNames","checkedMap","rawElm","registeredFormatListeners","nodeOrRange","setup$j","formatChangeItems","toAppendTo","addListeners","formatChangedInternal","setupArgs$3","emptyRegExp","trimEmptyContents","getContentFromBody","getContentInternal","isVisualAidsEnabled","matchedElm","getVisualAidsTableClass","value_1","cls_1","getVisualAidsAnchorClass","addVisualInternal","getModel","isRtc","plugins","getRtcInstanceWithFallback","rtcInstance","getRtcInstanceWithError","mergeAndNormalizeText","outerNode","outerElm","oldLength","innerTextNode","walkPastBookmark","normalizeTextIfRequired","deleteFromCallbackMap","newCallbacks","isNativeIeSelection","isAttachedToDom","EditorSelection","selectedRange","explicitRange","selectorChangedWithUnbind","selectorChangedData","currentSelectors","findMatchingNode","matchedSelectors","SelectorChanged","setupArgs","eventArgs","contextBlock","contextArgs","cleanContent","prevText","nextText","rngSetContent","createContextualFragment","setContent$1","getRng$1","tryCompareBoundaryPoints","how","sourceRange","destinationRange","compareBoundaryPoints","START_TO_START","END_TO_END","isValidRange","ieRange","removeAllRanges","addRange","setBaseAndExtent","isForward","anchorRange","focusRange","bookmarkManager","controlSelection","getSelectedContent","getContent$1","compareEndPoints","setNode","endElm","selectedBlocks","selectorChanged","getScrollContainer","scrollContainer","scrollElementIntoView","placeCaretAt","addFilters","domParser","convert_fonts_to_spans","fontSizes","face","removeAttrs","addFontToSpansFilter","font_size_legacy_values","addStrikeToSpanFilter","parseDataUri$1","uriParts","decodeURIComponent","buildBlob","uriToBlob","rejectWithError","xhr_1","XMLHttpRequest","responseType","blobUriToBlob","count$1","ImageScanner","uploadStatus","blobCache","cachedPromises","images","getAllImages","isUploaded","promises","imageInfo","blobInfo","newPromise","getByData","getByUri","dataUri","imageToBlobInfo","restoreDataUris","re","imageId","uris","paddEmptyNode","blockElements","padd_empty_with_br","hasOnlyChild","whitespaceElements","isPadded","each$7","queryParts","DEFAULT_PORTS","ftp","http","https","mailto","safeSvgDataUrlElements","URI","baseUri","isProtocolRelative","toAbsPath","urlMatch","userInfo","parseDataUri","uriComponents","decodedUri","unescape","allow_html_data_urls","allowSvgDataUrls","blockSvgDataUris","isInvalidUri","getDocumentBaseUrl","pathname","setPath","pathMatch","getURI","toRelative","relativeUri","tu","uu","toRelPath","noHost","absoluteUri","defaultPort","breakPoint","normalizedBase","outPath","nb","normalizedPath","noProtoHost","filteredClobberElements","lazyTempDocument","findMatchingEndTagIndex","startTagRegExp","endTagRegExp","shortEndedElements","startMatch","findCommentEndIndex","endMatch","lcHtml","isConditionalComment","endIfIndex","endCommentRegexp","checkBogusAttribute","regExp","attrString","SaxParser","fix_self_closing","base64Extract","endRegExp","attrList","textData","isInternalElement","isShortEnded","isValidElement","attribsValue","validAttributesMap","validAttributePatterns","filteredUrlAttrs","parsingMode","processEndTag","processText","processComment","allow_conditional_comments","processMalformedComment","startTag","parseAttribute","val2","val3","processAttr","fillAttrsMap","isValidPrefixAttrName","attrRule","tokenRegExp","attrRegExp","selfClosing","self_closing_elements","removeInternalElements","remove_internals","fixSelfClosing","processHtml","bogusValue","preserve_cdata","parseInternal","dataImageUri","extractBase64DataUris","findEndTag","each$6","explode$2","extend$4","DomParser","matchedNodes","matchedAttributes","root_name","filterNode","addAttributeFilter","fi","fl","invalidChildren","textRootBlockElements","rootBlockName","getRootBlockName","whiteSpaceElements","startWhiteSpaceRegExp","endWhiteSpaceRegExp","allWhiteSpaceRegExp","isAllWhiteSpaceRegExp","isInWhiteSpacePreservedElement","createNode","removeWhitespaceBefore","textVal","textNodeNext","cloneAndExcludeBlocks","isLineBreakNode","parent_2","attrFiltersLen","isNodeEmpty","tempNode","isTextRootBlockEmpty","isPaddedWithNbsp","nonSplitableElements","textBlockElements","removeOrUnwrapInvalidNode","originalNodeParent","children_1","newParent","fixInvalidChildren","rootBlockNode","addRootBlocks","remove_trailing_brs","prevName","allow_unsafe_link_target","appendRel","allow_html_in_named_anchor","fix_list_elements","classValue","validClassesMap","blob_cache","processImage","inputSrc","isInternalImageSource","isBogusImage","images_dataimg_filter","imgElem_1","isValidDataImg","blobUri","registerBase64ImageFilter","inline_styles","addTempAttr","htmlParser","DomSerializerImpl","internalName","hasChildren","hasEventListeners","shouldFireEvent","oldDoc","clonedNode","impl","doc_1","firePreProcess","preProcess","getHtmlFromNode","brNode1","brNode2","trimTrailingBr","parseHtml","serializeNode","outArgs","firePostProcess","postProcess","toHtml","addRules","setRules","DomSerializer","domSerializer","setContent$2","DOM$7","safeDestroy","deprecatedSettings","deprecatedPlugins","movedToPremiumPlugins","getDeprecatedSettings","settingNames","setting","getDeprecatedPlugins","plugin","pluginNames","deviceDetection","legacyMobilePlugins","defaultTouchSettings","table_grid","object_resizing","normalizePlugins","trimmedPlugins","hasSection","sectionResult","getDefaultMobileSettings","mobileSettings","defaultMobileSettings","toolbar_mode","toolbar_sticky","getExternalPlugins","overrideSettings","userDefinedExternalPlugins","external_plugins","processPlugins","isMobileDevice","defaultOverrideSettings","forcedPlugins","forced_plugins","desktopPlugins","mobileConfig","getSectionConfig","combinedPlugins","combinePlugins","mobilePlugins","theme","isSectionTheme","getPlatformPlugins","combineSettings","defaultSettings","defaultDeviceSettings","extractSections","extendedSettings","isOnMobile","sectionSettings","getSection","getFiltered","iconPack","getProp","propName","getComputedSizeProp","getClientWidth","getClientHeight","getMarginTop","getMarginLeft","isXYInContentArea","bodyElm","transposedPoint","isInsideElementContentArea","NotificationManager","getImplementation","unimplemented","getTopNotification","closeNotification","otherNotification","fireEvent","isEditorAttachedToDom","addNotification","getNotifications","serviceMessage","getServiceMessage","registerEvents","WindowManager","dialogs","getParams","setParams","funcBind","fireCloseEvent","otherDialog","storeSelectionAndOpenDialog","fireOpenEvent","addDialog","windowManagerImpl","displayNotification","notificationManager","displayError","logError","createLoadError","pluginLoadError","initError","transformToUrls","cssLinks","contentCssFile","isContentCssSkinName","appendContentCssFromSettings","contentCss","getContentCss","getContentCssUrls","getFontCssUrls","UploadStatus","blobUriStatuses","createStatus","resultUri","hasBlobUri","getResultUri","isPending","markPending","markUploaded","removeFailed","uuid","rnd","Uploader","pendingPromises","defaultHandler","xhr","withCredentials","credentials","upload","onprogress","path1","path2","json","responseText","basePath","FormData","filename","handlerSuccess","handlerFailure","resolvePending","blobInfos","openNotification","pendingUploadBlobInfo","closeNotification_1","failureOptions","uploadBlobInfo","uploadBlobs","createUploader","each$5","parsedSelectorToHtml","ancestry","sItem","wrapInHtml","parentCandidate","ancestorName","parentRequired","elmRule","getRequiredParent","siblingElm","parseSelectorItem","$0","$3","$4","previewFrag","parentFontSize","previewCss","previewStyles","getPreviewStyles","removeVars","previewOpt","previewElm","Formatter","valigntop","verticalAlign","valignmiddle","valignbottom","alignleft","textAlign","aligncenter","marginLeft","marginRight","alignright","alignjustify","bold","fontWeight","italic","fontStyle","underline","strikethrough","forecolor","hilitecolor","fontname","fontsize","lineheight","lineHeight","fontsize_class","blockquote","subscript","superscript","_fmt","_itemName","removeformat","getFormats","FormatRegistry","formatChangeState","setup$h","disableCaretContainer","setup$k","toggleFormat","matchFormat","closestFormat","matchAllFormats","matchNodeFormat","canApplyFormat","shouldIgnoreCommand","UndoManager","addUndoLevel","isFirstTypedCharacter","addNonTypingUndoLevel","isDirty","modKey","inputType","isInsertFromPasteOrDrop","addKeyboardShortcuts","nonTypingKeycodes","placeholderAttr","isKeyboardEvent","isDeleteEvent","strongRtl","isInlineTarget","getInlineBoundarySelector","findRootInline","findInlineParents","normalizePosition","normalizeForwards","normalizeBackwards","isTextBlockOrListItem","getParentBlock$1","isBeforeRoot","paddEmptyBody","placeCaretInEmptyBody","blockBoundary","getBlockPosition","blockPosition","getChildrenUntilBlockBoundary","extractChildren","removeEmptyRoot","nestedBlockMerge","toBlock","insertionPoint","sidelongBlockMerge","trimBr","mergeBlockInto","parentsAndSelf$1","findInsertionPoint","getInsertionPoint","mergeBlocks","block1","block2","backspaceDelete$8","fromBlockPos","toBlockPos","blockPos","lastPositionInBlock","skipLastBr","isDifferentBlocks","parent1","parent2","hasSameParent","isEditable$1","readFromRange","isRawNodeInTable","deleteRange$1","noPrevious","noNext","isSelectionInTable","isEverythingSelected","emptyEditor","deleteRangeMergeBlocks","backspaceDelete$7","_forward","isContentEditableTrue$2","isContentEditableFalse$4","showCaret","getNodeRange","renderCaretAtRange","caretPositionNode","caretPositionBeforeNode","ceRoot","renderRangeCaret","isBeforeBoundary","isAfterBoundary","deleteContentAndShowCaret","peekCaretPosition","caretRange","deleteRange","trimEmptyTextNode","backspaceDelete$6","getNextPosFn","isBeforeFn","nextCaretPosition","deleteBoundaryText","DeleteAction","moveToElement","moveToPosition","findCefPosition","isDeleteFromCefDifferentBlocks","toCefElm","blockElm","deleteEmptyBlockOrMoveToCef","getAncestorCe","backspaceDeleteCaret","caretLocation","isAtContentEditableBlockCaret","getContentEditableBlockAction","skipMoveToActionFromInlineCefToContent","getContentEditableAction","hideFakeCaret","deleteElement$1","paddEmptyElement","backspaceDelete$5","backspaceDeleteRange","backspaceDelete$4","deleteCaret$2","startsWithCaretContainer","endsWithCaretContainer","createZwsp","insertInline","insertInlineBefore","insertInlineAfter","insertInlinePos","isPosCaretContainer","caretNode","renderCaret","evaluateUntil","fns","Location","rescope$1","nPos","isNotInsideFormatCaretContainer","findInsideRootInline","start$1","isValidLocation","readLocation","getName","outside","betweenInlines","fromInline","toInline","hasSameParentBlock","skipNoMovement","fromLocation","toLocation","location2","location1","findLocationSimple","findLocation$1","findLocationTraverse","BreakType","modify","VDirection","getBreakType","currentPos","nextPos","Br","Block","Wrap","getPositionsUntil","breakType","breakAt","Eol","getAdjacentLinePositions","getPositionsUntilBreak","findClosestHorizontalPositionFromPoint","lastRect","lastDist","findClosestHorizontalPosition","targetRect","getPositionsUntilPreviousLine","getPositionsUntilNextLine","getPositionsAbove","getPositionsBelow","getNodeClientRects","toArrayWithNode","customEventRootDelegates","beforeUnloadDelegate","walkUntil$1","isAboveFn","isBeflowFn","targetClientRect","upUntil","Up","downUntil","Down","isAboveLine","lineNumber","aboveLineNumber","isLine","isLineNumber","isContentEditableFalse$3","findNode","distanceToRectLeft","distanceToRectRight","isInsideX","isInsideY","findClosestClientRect","allowInside","oldClientRect","oldDistance","newDistance","walkUntil","includeChildren","moveToRange","renderRangeCaretOpt","moveHorizontally","isBefore","isAfter","rangeIsInContainerBlock","moveVertically","caretClientRect","linePositions","nextLinePositions","nextLineRect","dist1","dist2","caretPositions","isBelowFn","getClientRect","positionsUntil","closestNextLineRect","getLineEndPoint","moveToLineEndPoint$3","setCaretPosition","setSelected","renderCaretLocation","move$2","isInlineTarget$1","findLocation","moveWord","_caret","hasSelectionModifyApi","moveByWord","setupSelectedState","inlineBoundaries","selectedInlines","targetInlines","toggleInlines","isAtZwsp","safeRemoveCaretContainer","inlines","_inline","renderInsideInlineCaret","moveNextWord","movePrevWord","moveToLineEndPoint$2","linePoint","outsideLoc","setCaretLocation","deleteFromTo","rangeFromPositions","backspaceDelete$3","rescope","toPosition","normalizedFirstPos","normalizedLastPos","hasOnlyTwoOrLessPositionsLeft","backspaceDeleteCollapsed","hasOnlyOneChild","deleteCaret$1","parentInlines","getParentInlines","normalizedFromPos","willDeleteLastPositionInElement","isFormatElement$1","innerMost","replaceWithCaretFormat","deleteLastPosition","backspaceDelete$2","deleteElement","backspaceDelete$1","isNearMedia","deleteCaret","parseIndentValue","getIndentStyleName","useMargin","canOutdent","getBlocksToIndent","indentStyleName","intentValue","validateBlocks","isListComponent","parentIsListComponent","indentation","getIndentation","indentUnit","indentValue","styleValue","indentElement","backspaceDelete","nativeCommand","isBlockElement","isValidTarget","shouldRemoveTextNode","rootNodeName","hasBlockParent","restoreSelection","blockCaretContainer","removeIeControlRect","handleBlockContainer","findBlockCaretContainer","isContentEditableFalse$2","exitPreBlock","getVisualCaretPosition$1","hasForcedRootBlock","newBlock","textBlock","createTextBlock","moveH$2","moveToCeFalseHorizontally","getHorizontalRange","newRange","moveV$3","down","moveToCeFalseVertically","getVerticalRange","moveToLineEndPoint$1","isTarget","rangeBefore","insertElement","moveCaretToNewEmptyLine","rootBlockAttrs","getClosestTargetBlock","isAtLastLine","isAtFirstLine","isAtFirstOrLastLine","insertBr","insertBlock","insertEmptyLine","moveV$2","defaultPatterns","matchesEvent","match$1","moveH$1","moveV$1","moveToLineEndPoint","getClosestCell","getYAxisValue","isTargetCorner","corners","tds","deflate","getCorners","corner","newCorner","oldCorner","oldDist","newDist","findClosestCorner","getClosestCellAbove","getClosestCellBelow","isAtTableCellLine","lineInfo","startsWithWrapBreak","startsWithBrBreak","breakPos","hasNextBreak","isAtFirstTableCellLine","isAtLastTableCellLine","navigateHorizontally","_td","isCaretAtStartOrEndOfTable","renderBlock","navigateVertically","findClosestPositionInAboveCell","getClosestAbovePosition","findClosestPositionInBelowCell","getClosestBelowPosition","mover","moveH","moveV","moveToCaretPosition","firstNonWhiteSpaceNodeSibling","getParentBlock","hasParent","isListBlock","getContainerBlock","containerBlock","containerBlockParent","isFirstOrLastLi","isEmptyAnchor","containerAndSiblingName","canSplitBlock","normalizeZwspOffset","getEditableRoot","editableRoot","setForcedBlockAttrs","forcedRootBlockAttrs","attrStyles","currentStyles","newStyles","attrClassesOpt","attrClasses","currentClassesOpt","currentClasses","filteredClasses","newClasses","appliedAttrs","remainingAttrs","insert$2","tmpRng","parentBlockName","newBlockName","isAfterLastNodeInContainer","createNewBlock","shouldKeepStyles","isCaretAtStartOrEndOfBlock","normalizedOffset","insertNewBlockAfter","containerBlockName","shouldEndContainerOnEmptyBlock","isTableCell","wrapSelfAndSiblingsInDefaultBlock","isFirstChild","hasFirstChild","insert$3","includeZwspInRange","trimZwsp","trimLeadingLineBreaks","firstChilds","trimInlineElementsOnLeftSideOfBlock","addBrToBlockIfNeeded","moveSelectionToBr","brElm","extraBr","insertBrBefore","insertBrAfter","hasBrAfter","isAnchorLink","isInsideAnchor","insertBrOutsideAnchor","insert$1","anchorLocation","readInlineAnchorLocation","isControlKey","hasRightSideContent","insertBrAtCaret","newLineAction","shouldBlockNewLine","_shiftKey","getNoNewLineSelector","shouldBlockNewLine$1","isBrMode","requiredState","inListBlock","isListItemParentBlock","inBlock","getParentBlockName","inPreBlock","shouldPutBrInPre","shouldPutBrInPre$1","inBrContext","getBrNewLineSelector","shouldInsertBr","hasShiftKey","canInsertIntoEditableRoot","rootEditable","getEditableRoot$1","predicates","isPageUpDown","setNodeChangeBlocker","blocked","insertTextAtPosition","insertNbspAtPosition","insertSpaceAtPosition","insertInlineBoundarySpaceOrNbsp","checkPos","isAtBeginningOfBody","isAtEndOfBody","isAtLineBoundary","needsToHaveNbsp","insertSpaceOrNbspAtSelection","locationToCaretPosition","setSelection","registerKeyboardOverrides","setup$c","executeKeydownOverride$3","executeKeydownOverride$2","executeKeyupOverride","handleEnterKeyEvent","setup$9","executeKeydownOverride","keypressThrotter","setupIeInput","isComposing","executeKeydownOverride$1","executeKeyupAction","NodeChange","lastPath","nativeRng","fakeRng","isSameElementPath","currentPath","isTextBlockNode","getAbsolutePosition","isContentEditableFalse$1","isContentEditableTrue$1","createGhost","clonedElm","boxSizing","removeElement","removeDragState","ghost","bindFakeDragEvents","pageDom","dragStartHandler","isLeftMouseButtonPressed","ceElm","elmPos","dragging","relX","relY","dragHandler","throttledPlaceCaretAt","targetPos","applyRelPos","bodyPosition","getBodyPosition","scrollPosition","getScrollPosition","mousePosition","iframePosition","inlineScroll","iframeScroll","getBodyScroll","getMousePosition","calc","overflowX","moveGhost","dropHandler","dragElement","isValidDropTarget","targetClone_1","cloneElm","dragEndHandler","getContentEditableRoot","SelectionOverrides","fakeCaret","realSelectionId","isFakeSelectionTargetElement","isNearFakeSelectionElement","setRange","getRange","isWithinCaretContainer","isRangeInCaretContainer","setElementSelection","afterNode","targetClone","origTargetClone","$realSelectionContainer","setupOffscreenSelection","nodeElm","selectElement","removeElementSelection","contentEditableRoot","targetBlock","fakeCaretInfo","fakeTargetNodeRects","getFakeCaretTargets","targetNodeRects","checkInside","closestNodeRect","targetNodeRect","checkPosFn","lineRects","findLineNodeRects","caretInfo","closestFakeCaret","hasNormalCaretPosition","normalizeShortEndedElementSelection","clipboardData","realSelectionElement","clearData","outerText","realTarget","blockIeDrop","shouldBlockUnsupportedDrop","preventFileDrop","preventFileDropIfUIElement","editorRoot","eventNames","blockUnsupportedFileDrop","renderFocusCaret","DOM$6","getRootName","removeUndefined","mkSchemaSettings","boolean_attributes","move_caret_before_on_enter_elements","non_empty_elements","short_ended_elements","text_inline_elements","whitespace_elements","format_empty_lines","mkParserSettings","editorUpload","initEditor","bindPendingEventDelegates","fireInit","storeNative","moveSelectionToFirstCaretPosition","execCallback","auto_focus","focusEditor","destroyed","autoFocus","getStyleSheetLoader$1","loadContentCss","removeCss","contentStyles","contentCssText_1","allStylesheets","framedFonts","makeStylesheetLoadingPromises","content_style","appendStyle","preInit","firePreInit","browser_spellcheck","gecko_spellcheck","spellcheck","quirks","getAttributeApplyFunction","isSelectionAcrossElements","serializeRng","isGecko","isWebKit","mceInternalUrlPrefix","mceInternalDataType","setEditorCommandState","selectAll","documentElementEditingFocus","Range","body_1","selectControlElements","disableBackspaceIntoATable","setGeckoEditingOptions","isReadOnly$1","showBrokenImageIcon","restoreFocusOnKeyDown","bodyHeight","blockCmdArrowNavigation","tapLinksAndImages","blockFormSubmitInsideEditor","refreshContentEditable","allRng","allContentsSelected","selectionHtml","internalContent","setMceInternalContent","getMceInternalContent","queryCommandSupported","setAttributeNode","Quirks","firePostRender","directionality","getDirectionality","protect","initEditorWithInitialContent","startContent","loadInitialContent","initContentBody","skipWrite","orgVisibility","iframeHTML","contentAreaContainer","uploader","imageScanner","toBlobInfo","findFirst","mime","cachedBlobInfo","removeByUri","urlFilters","changeHandler","lastChangedLevel","fireIfChanged","UploadChangeHandler","aliveGuard","replaceString","replaceImageUrl","targetUrl","replacementUrl","replacementString","replaceUrlInUndoStack","uploadImages","scanForImages","imageInfos","imagesToRemove","filteredResult","uploadInfo","shouldReplaceBlobUris","replaceImageUriInView","uploadError","uploadUri","uploadImagesAuto","isValidDataUriImage","imgElm","dataImgFilter","getImagesDataImgFilter","resultItem","replaceBlobUris","source_view","addFilter","EditorUpload","hex_colors","force_hex_style_colors","createParser","mkSerializerSettings","annotator","_nodeChangeDispatcher","debounceLongpress","isEqualNode","setup$e","preventSummaryToggle","filterDetails","normalizeSelection","deleteCommand","forwardDeleteCommand","setup$f","getPlaceholder","updatePlaceholder","isNonTypingKeyboardEvent","showPlaceholder","isTypingKeyboardEvent","isForcedRootBlockFalse","isVisuallyEmpty","firePlaceholderToggle","setup$g","setupRtcThunk","editorCast","rtcPlugin","getRtcSetup","nul","makeNoopAdaptor","rtcEditor","defaultVars","_undoManager","_locks","_node","_similar","_rfl","_details","getRawModel","makeRtcAdaptor","rtc","isRemote","setup$i","setupRtc","setProgressState","_rtcMode","DOM$5","createIframe","customAttrs","iframeTitle","ifr","getIframeAttrs","frameBorder","allowTransparency","isDomainRelaxed","domain","hostname","bodyUuid","domainRelaxUrl","relaxDomain","getDocType","documentBaseUrl","bodyId","getBodyId","bodyClass","getBodyClass","translatedAriaText","getIframeAriaText","getIframeHtml","DOM$4","initPlugin","initializedPlugins","Plugin","pluginInstance","pluginInitError","trimLegacyPrefix","createThemeFalseResult","renderThemeUi","orgDisplay","renderFromLoadedTheme","iframeHeight","renderFromThemeFunc","renderThemeFalseIframe","renderThemeFalse","iconPackName","currentIcons","loadIcons","svgData","addIcon","initIcons","Theme","initTheme","initPlugins","renderInfo","uiApiFacade","augmentEditorUiApi","boxInfo","hidden","DOM$3","hasSkipLoadPrefix","getIconsUrlMetaFromName","scriptLoader","themeUrl","getThemeUrl","loadTheme","languageCode","languageUrl","getLanguageUrl","url_1","languageLoadError","loadLanguage","defaultIconsUrl","customIconsUrl","getIconsUrl","getIconsUrlMetaFromUrl","urlMeta","iconsLoadError","getExternalPlugins$1","depPlugin","url_2","loadPlugins","legacyPropNames","getFontProp","legacyPropName","getProperty","getSpecifiedFontProp","getComputedFontProp","getFontSize","getFontFamily","findFirstCaretElement","mapRange","mapper","getCaretElement","bindRange","fromFontSizeNumber","fontSizeNumber","getFontStyleValues","fontClasses","getFontSizeClasses","normalizeFontNames","each$4","EditorCommands","setupCommands","skip_focus","customCommand","addCommands","commandList","hasCustomCommand","execNativeCommand","isFormatMatch","storeSelection","selectionBookmark","_command","skipFocus","bookmarkRng","contentEditableHost","getContentEditableHost","queryCommandEnabled","listParent","fontNameAction","fontSizeAction","lineHeightAction","processValue","insertAtCaret","editingHost","selectNodeContents","alignStates","Undo","Redo","fontNameQuery","fontSizeQuery","specifiedStyle","lineHeightQuery","internalContentEditableAttr","setContentEditable","toggleReadOnly","removeFakeSelection","hasUiFocus","hasEditorOrUiFocus","restoreFakeSelection","registerFilters","nativeEvents","EventDispatcher","bindings","toggleEvent","isNative","beforeFire","wrappedCallback","currentName","bindingName","filteredHandlers","getEventDispatcher","_eventDispatcher","toggleNativeEvent","Observable","dispatcherArgs","DOM$2","getEventTarget","eventRoot","isListening","isClickEvent","getAnchorHrefOpt","processReadonlyEvents","bindEventDelegate","delegates","eventRootElm","editors","EditorObservable","_pendingNativeEvents","unbindAllNativeEvents","defaultModes","switchToMode","activeMode","availableModes","oldMode","activate","deactivate","editorReadOnly","fireSwitchMode","each$3","explode$1","keyCodeLookup","f1","f2","f3","f4","f5","f6","f7","f8","f9","f10","f11","f12","modifierNames","parseShortcut","charCode","Shortcuts","pendingPatterns","hasModifier","isFunctionKey","matchShortcut","subpatterns","executeShortcutAction","cmdFunc","normalizeCommandFunc","createShortcut","DOM$1","extend$3","each$2","Editor","bridge","loadedCSS","isNotDirty","documentBaseURL","baseDefaults","document_base_url","add_form_submit_trigger","submit_patch","add_unload_trigger","convert_urls","relative_urls","remove_script_host","visual","hidden_input","getDefaultSettings","finalSettings","deprecation_warnings","hasDeprecatedPlugins","hasDeprecatedSettings","isLegacyMobileTheme","listJoiner","themesMessage","pluginsMessage","settingsMessage","logDeprecationsWarning","getEditorSettings","base_url","_setBaseUrl","baseURI","referrer_policy","language_load","editorCommands","cache_suffix","addAutocompleter","addContextToolbar","addSidebar","modeInstance","design","registerReadOnlyContentFilters","registerReadOnlySelectionBlockers","registerMode","clone$3","getStyleSheetLoader","hasHiddenInput","formEventDelegate","resetContent","shouldPatchSubmit","_mceOldSubmit","triggerSave","isEncodingXml","save","shouldAddFormSubmitTrigger","shouldAddUnloadTrigger","_beforeUnload","set_dirty","callbackLookup","getParamObject","is_removing","getContent$2","initialContent","oldState","urlconverter_callback","addVisual$1","fireRemove","restoreOriginalStyles","fireDetach","automatic","restoreForm","clearDomReferences","_scanForImages","extend$2","instanceCounter","boundGlobalEvents","legacyEditors","globalEventDelegate","EditorManager","toggleGlobalEvents","removeEditorFromList","targetEditor","oldEditors","isQuirksMode","compatMode","majorVersion","minorVersion","releaseDate","i18n","tinyMCEPreInit","srcScript","pluginBaseUrls","plugin_base_urls","pluginBaseUrl","invalidInlineTargets","createId","provideResults","initEditors","initCount","createEditor","editor_deselector","editor_selector","findTargets","isInvalidInlineTarget","addI18n","tasks","resultFns","extendClass","initializing","min$1","max$1","relativePosition","targetW","targetH","relChars","Rect","findBestRelativePosition","constrainRect","intersect","x1","y1","fixedSize","cx2","cy2","underflowX1","underflowY1","overflowX2","overflowY2","fromClientRect","Resource","loadErrMsg","runErrMsg","task","waiter","resolveCb","rejectCb","awaiter","extend$1","_super","mixins","mixin","Mixins","dummy","Methods","Properties","Statics","Defaults","member","createMethod","localStorage","JSONUtils","hexCode","JSONP","XHR","ready","async","success_scope","error_scope","overrideMimeType","content_type","crossDomain","setRequestHeader","requestheaders","JSONRequest","sendRPC","ecb","scb","xhrArgs","ty","method","removeItem","publicApi","geom","LocalStorage","Color","hsvToRgb","toRgb","toHsv","rgb2hsv","ImageUploader","showNotification","TreeWalker","Serializer","Selection","isMac","tinyMCE","exportToWindowGlobal","exportToModuleLoaders"],"sourceRoot":""}